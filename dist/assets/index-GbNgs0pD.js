function _mergeNamespaces(e,o){for(var a=0;a<o.length;a++){const c=o[a];if(typeof c!="string"&&!Array.isArray(c)){for(const d in c)if(d!=="default"&&!(d in e)){const g=Object.getOwnPropertyDescriptor(c,d);g&&Object.defineProperty(e,d,g.get?g:{enumerable:!0,get:()=>c[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function a(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(d){if(d.ep)return;d.ep=!0;const g=a(d);fetch(d.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var o=e.default;if(typeof o=="function"){var a=function c(){return this instanceof c?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};a.prototype=o.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(c){var d=Object.getOwnPropertyDescriptor(e,c);Object.defineProperty(a,c,d.get?d:{enumerable:!0,get:function(){return e[c]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min$1={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$2(e){return e===null||typeof e!="object"?null:(e=z$4&&e[z$4]||e["@@iterator"],typeof e=="function"?e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(e,o,a){this.props=e,this.context=o,this.refs=D$2,this.updater=a||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(e,o){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,o,"setState")};E$2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(e,o,a){this.props=e,this.context=o,this.refs=D$2,this.updater=a||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(e,o,a){var c,d={},g=null,b=null;if(o!=null)for(c in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(g=""+o.key),o)J$1.call(o,c)&&!L$2.hasOwnProperty(c)&&(d[c]=o[c]);var j=arguments.length-2;if(j===1)d.children=a;else if(1<j){for(var $=Array(j),_e=0;_e<j;_e++)$[_e]=arguments[_e+2];d.children=$}if(e&&e.defaultProps)for(c in j=e.defaultProps,j)d[c]===void 0&&(d[c]=j[c]);return{$$typeof:l$2,type:e,key:g,ref:b,props:d,_owner:K$2.current}}function N$2(e,o){return{$$typeof:l$2,type:e.type,key:o,ref:e.ref,props:e.props,_owner:e._owner}}function O$2(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$2}function escape$1(e){var o={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return o[a]})}var P$2=/\/+/g;function Q$2(e,o){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):o.toString(36)}function R$2(e,o,a,c,d){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var b=!1;if(e===null)b=!0;else switch(g){case"string":case"number":b=!0;break;case"object":switch(e.$$typeof){case l$2:case n$2:b=!0}}if(b)return b=e,d=d(b),e=c===""?"."+Q$2(b,0):c,I$2(d)?(a="",e!=null&&(a=e.replace(P$2,"$&/")+"/"),R$2(d,o,a,"",function(_e){return _e})):d!=null&&(O$2(d)&&(d=N$2(d,a+(!d.key||b&&b.key===d.key?"":(""+d.key).replace(P$2,"$&/")+"/")+e)),o.push(d)),1;if(b=0,c=c===""?".":c+":",I$2(e))for(var j=0;j<e.length;j++){g=e[j];var $=c+Q$2(g,j);b+=R$2(g,o,a,$,d)}else if($=A$2(e),typeof $=="function")for(e=$.call(e),j=0;!(g=e.next()).done;)g=g.value,$=c+Q$2(g,j++),b+=R$2(g,o,a,$,d);else if(g==="object")throw o=String(e),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function S$2(e,o,a){if(e==null)return e;var c=[],d=0;return R$2(e,c,"","",function(g){return o.call(a,g,d++)}),c}function T$2(e){if(e._status===-1){var o=e._result;o=o(),o.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=o)}if(e._status===1)return e._result.default;throw e._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min$1.Children={map:S$2,forEach:function(e,o,a){S$2(e,function(){o.apply(this,arguments)},a)},count:function(e){var o=0;return S$2(e,function(){o++}),o},toArray:function(e){return S$2(e,function(o){return o})||[]},only:function(e){if(!O$2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min$1.Component=E$2;react_production_min$1.Fragment=p$3;react_production_min$1.Profiler=r$2;react_production_min$1.PureComponent=G$2;react_production_min$1.StrictMode=q$2;react_production_min$1.Suspense=w$3;react_production_min$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min$1.cloneElement=function(e,o,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var c=C$2({},e.props),d=e.key,g=e.ref,b=e._owner;if(o!=null){if(o.ref!==void 0&&(g=o.ref,b=K$2.current),o.key!==void 0&&(d=""+o.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for($ in o)J$1.call(o,$)&&!L$2.hasOwnProperty($)&&(c[$]=o[$]===void 0&&j!==void 0?j[$]:o[$])}var $=arguments.length-2;if($===1)c.children=a;else if(1<$){j=Array($);for(var _e=0;_e<$;_e++)j[_e]=arguments[_e+2];c.children=j}return{$$typeof:l$2,type:e.type,key:d,ref:g,props:c,_owner:b}};react_production_min$1.createContext=function(e){return e={$$typeof:u$1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t$2,_context:e},e.Consumer=e};react_production_min$1.createElement=M$2;react_production_min$1.createFactory=function(e){var o=M$2.bind(null,e);return o.type=e,o};react_production_min$1.createRef=function(){return{current:null}};react_production_min$1.forwardRef=function(e){return{$$typeof:v$4,render:e}};react_production_min$1.isValidElement=O$2;react_production_min$1.lazy=function(e){return{$$typeof:y$1,_payload:{_status:-1,_result:e},_init:T$2}};react_production_min$1.memo=function(e,o){return{$$typeof:x$1,type:e,compare:o===void 0?null:o}};react_production_min$1.startTransition=function(e){var o=V$2.transition;V$2.transition={};try{e()}finally{V$2.transition=o}};react_production_min$1.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min$1.useCallback=function(e,o){return U$2.current.useCallback(e,o)};react_production_min$1.useContext=function(e){return U$2.current.useContext(e)};react_production_min$1.useDebugValue=function(){};react_production_min$1.useDeferredValue=function(e){return U$2.current.useDeferredValue(e)};react_production_min$1.useEffect=function(e,o){return U$2.current.useEffect(e,o)};react_production_min$1.useId=function(){return U$2.current.useId()};react_production_min$1.useImperativeHandle=function(e,o,a){return U$2.current.useImperativeHandle(e,o,a)};react_production_min$1.useInsertionEffect=function(e,o){return U$2.current.useInsertionEffect(e,o)};react_production_min$1.useLayoutEffect=function(e,o){return U$2.current.useLayoutEffect(e,o)};react_production_min$1.useMemo=function(e,o){return U$2.current.useMemo(e,o)};react_production_min$1.useReducer=function(e,o,a){return U$2.current.useReducer(e,o,a)};react_production_min$1.useRef=function(e){return U$2.current.useRef(e)};react_production_min$1.useState=function(e){return U$2.current.useState(e)};react_production_min$1.useSyncExternalStore=function(e,o,a){return U$2.current.useSyncExternalStore(e,o,a)};react_production_min$1.useTransition=function(){return U$2.current.useTransition()};react_production_min$1.version="18.2.0";react$1.exports=react_production_min$1;var reactExports$1=react$1.exports;const React$2=getDefaultExportFromCjs(reactExports$1),React$3=_mergeNamespaces({__proto__:null,default:React$2},[reactExports$1]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports$1,k=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(e,o,a){var c,d={},g=null,b=null;a!==void 0&&(g=""+a),o.key!==void 0&&(g=""+o.key),o.ref!==void 0&&(b=o.ref);for(c in o)m$1.call(o,c)&&!p$2.hasOwnProperty(c)&&(d[c]=o[c]);if(e&&e.defaultProps)for(c in o=e.defaultProps,o)d[c]===void 0&&(d[c]=o[c]);return{$$typeof:k,type:e,key:g,ref:b,props:d,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function o(Gr,ds){var Zn=Gr.length;Gr.push(ds);e:for(;0<Zn;){var Nn=Zn-1>>>1,Qn=Gr[Nn];if(0<d(Qn,ds))Gr[Nn]=ds,Gr[Zn]=Qn,Zn=Nn;else break e}}function a(Gr){return Gr.length===0?null:Gr[0]}function c(Gr){if(Gr.length===0)return null;var ds=Gr[0],Zn=Gr.pop();if(Zn!==ds){Gr[0]=Zn;e:for(var Nn=0,Qn=Gr.length,bu=Qn>>>1;Nn<bu;){var ou=2*(Nn+1)-1,g0=Gr[ou],Su=ou+1,l1=Gr[Su];if(0>d(g0,Zn))Su<Qn&&0>d(l1,g0)?(Gr[Nn]=l1,Gr[Su]=Zn,Nn=Su):(Gr[Nn]=g0,Gr[ou]=Zn,Nn=ou);else if(Su<Qn&&0>d(l1,Zn))Gr[Nn]=l1,Gr[Su]=Zn,Nn=Su;else break e}}return ds}function d(Gr,ds){var Zn=Gr.sortIndex-ds.sortIndex;return Zn!==0?Zn:Gr.id-ds.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var b=Date,j=b.now();e.unstable_now=function(){return b.now()-j}}var $=[],_e=[],st=1,rt=null,ut=3,gt=!1,yt=!1,wt=!1,Ct=typeof setTimeout=="function"?setTimeout:null,Pt=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tt(Gr){for(var ds=a(_e);ds!==null;){if(ds.callback===null)c(_e);else if(ds.startTime<=Gr)c(_e),ds.sortIndex=ds.expirationTime,o($,ds);else break;ds=a(_e)}}function kt(Gr){if(wt=!1,Tt(Gr),!yt)if(a($)!==null)yt=!0,_s(It);else{var ds=a(_e);ds!==null&&gn(kt,ds.startTime-Gr)}}function It(Gr,ds){yt=!1,wt&&(wt=!1,Pt(Nt),Nt=-1),gt=!0;var Zn=ut;try{for(Tt(ds),rt=a($);rt!==null&&(!(rt.expirationTime>ds)||Gr&&!hs());){var Nn=rt.callback;if(typeof Nn=="function"){rt.callback=null,ut=rt.priorityLevel;var Qn=Nn(rt.expirationTime<=ds);ds=e.unstable_now(),typeof Qn=="function"?rt.callback=Qn:rt===a($)&&c($),Tt(ds)}else c($);rt=a($)}if(rt!==null)var bu=!0;else{var ou=a(_e);ou!==null&&gn(kt,ou.startTime-ds),bu=!1}return bu}finally{rt=null,ut=Zn,gt=!1}}var Lt=!1,Ft=null,Nt=-1,Ht=5,dr=-1;function hs(){return!(e.unstable_now()-dr<Ht)}function us(){if(Ft!==null){var Gr=e.unstable_now();dr=Gr;var ds=!0;try{ds=Ft(!0,Gr)}finally{ds?hn():(Lt=!1,Ft=null)}}else Lt=!1}var hn;if(typeof At=="function")hn=function(){At(us)};else if(typeof MessageChannel<"u"){var un=new MessageChannel,bo=un.port2;un.port1.onmessage=us,hn=function(){bo.postMessage(null)}}else hn=function(){Ct(us,0)};function _s(Gr){Ft=Gr,Lt||(Lt=!0,hn())}function gn(Gr,ds){Nt=Ct(function(){Gr(e.unstable_now())},ds)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Gr){Gr.callback=null},e.unstable_continueExecution=function(){yt||gt||(yt=!0,_s(It))},e.unstable_forceFrameRate=function(Gr){0>Gr||125<Gr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ht=0<Gr?Math.floor(1e3/Gr):5},e.unstable_getCurrentPriorityLevel=function(){return ut},e.unstable_getFirstCallbackNode=function(){return a($)},e.unstable_next=function(Gr){switch(ut){case 1:case 2:case 3:var ds=3;break;default:ds=ut}var Zn=ut;ut=ds;try{return Gr()}finally{ut=Zn}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Gr,ds){switch(Gr){case 1:case 2:case 3:case 4:case 5:break;default:Gr=3}var Zn=ut;ut=Gr;try{return ds()}finally{ut=Zn}},e.unstable_scheduleCallback=function(Gr,ds,Zn){var Nn=e.unstable_now();switch(typeof Zn=="object"&&Zn!==null?(Zn=Zn.delay,Zn=typeof Zn=="number"&&0<Zn?Nn+Zn:Nn):Zn=Nn,Gr){case 1:var Qn=-1;break;case 2:Qn=250;break;case 5:Qn=1073741823;break;case 4:Qn=1e4;break;default:Qn=5e3}return Qn=Zn+Qn,Gr={id:st++,callback:ds,priorityLevel:Gr,startTime:Zn,expirationTime:Qn,sortIndex:-1},Zn>Nn?(Gr.sortIndex=Zn,o(_e,Gr),a($)===null&&Gr===a(_e)&&(wt?(Pt(Nt),Nt=-1):wt=!0,gn(kt,Zn-Nn))):(Gr.sortIndex=Qn,o($,Gr),yt||gt||(yt=!0,_s(It))),Gr},e.unstable_shouldYield=hs,e.unstable_wrapCallback=function(Gr){var ds=ut;return function(){var Zn=ut;ut=ds;try{return Gr.apply(this,arguments)}finally{ut=Zn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports$1,ca=schedulerExports;function p$1(e){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(e,o){ha$1(e,o),ha$1(e+"Capture",o)}function ha$1(e,o){for(ea$1[e]=o,e=0;e<o.length;e++)da$1.add(o[e])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(e){return ja$1.call(ma$1,e)?!0:ja$1.call(la$1,e)?!1:ka$1.test(e)?ma$1[e]=!0:(la$1[e]=!0,!1)}function pa$1(e,o,a,c){if(a!==null&&a.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa$1(e,o,a,c){if(o===null||typeof o>"u"||pa$1(e,o,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$3(e,o,a,c,d,g,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=e,this.type=o,this.sanitizeURL=g,this.removeEmptyString=b}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z$3[e]=new v$3(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var o=e[0];z$3[o]=new v$3(o,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z$3[e]=new v$3(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z$3[e]=new v$3(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z$3[e]=new v$3(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z$3[e]=new v$3(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z$3[e]=new v$3(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z$3[e]=new v$3(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z$3[e]=new v$3(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var o=e.replace(ra$1,sa$1);z$3[o]=new v$3(o,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var o=e.replace(ra$1,sa$1);z$3[o]=new v$3(o,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var o=e.replace(ra$1,sa$1);z$3[o]=new v$3(o,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z$3[e]=new v$3(e,1,!1,e.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z$3[e]=new v$3(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta$1(e,o,a,c){var d=z$3.hasOwnProperty(o)?z$3[o]:null;(d!==null?d.type!==0:c||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa$1(o,a,d,c)&&(a=null),c||d===null?oa$1(o)&&(a===null?e.removeAttribute(o):e.setAttribute(o,""+a)):d.mustUseProperty?e[d.propertyName]=a===null?d.type===3?!1:"":a:(o=d.attributeName,c=d.attributeNamespace,a===null?e.removeAttribute(o):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?e.setAttributeNS(c,o,a):e.setAttribute(o,a))))}var ua$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(e){return e===null||typeof e!="object"?null:(e=Ja$1&&e[Ja$1]||e["@@iterator"],typeof e=="function"?e:null)}var A$1=Object.assign,La$1;function Ma$1(e){if(La$1===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);La$1=o&&o[1]||""}return`
`+La$1+e}var Na$1=!1;function Oa$1(e,o){if(!e||Na$1)return"";Na$1=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_e){var c=_e}Reflect.construct(e,[],o)}else{try{o.call()}catch(_e){c=_e}e.call(o.prototype)}else{try{throw Error()}catch(_e){c=_e}e()}}catch(_e){if(_e&&c&&typeof _e.stack=="string"){for(var d=_e.stack.split(`
`),g=c.stack.split(`
`),b=d.length-1,j=g.length-1;1<=b&&0<=j&&d[b]!==g[j];)j--;for(;1<=b&&0<=j;b--,j--)if(d[b]!==g[j]){if(b!==1||j!==1)do if(b--,j--,0>j||d[b]!==g[j]){var $=`
`+d[b].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=b&&0<=j);break}}}finally{Na$1=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?Ma$1(e):""}function Pa$1(e){switch(e.tag){case 5:return Ma$1(e.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return e=Oa$1(e.type,!1),e;case 11:return e=Oa$1(e.type.render,!1),e;case 1:return e=Oa$1(e.type,!0),e;default:return""}}function Qa$1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca$1:return(e.displayName||"Context")+".Consumer";case Ba$1:return(e._context.displayName||"Context")+".Provider";case Da$1:var o=e.render;return e=e.displayName,e||(e=o.displayName||o.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga$1:return o=e.displayName||null,o!==null?o:Qa$1(e.type)||"Memo";case Ha$1:o=e._payload,e=e._init;try{return Qa$1(e(o))}catch{}}return null}function Ra$1(e){var o=e.type;switch(e.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=o.render,e=e.displayName||e.name||"",o.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(o);case 8:return o===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa$1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta$1(e){var o=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua$1(e){var o=Ta$1(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,o),c=""+e[o];if(!e.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(e,o,{configurable:!0,get:function(){return d.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(e,o,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){e._valueTracker=null,delete e[o]}}}}function Va$1(e){e._valueTracker||(e._valueTracker=Ua$1(e))}function Wa$1(e){if(!e)return!1;var o=e._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return e&&(c=Ta$1(e)?e.checked?"true":"false":e.value),e=c,e!==a?(o.setValue(e),!0):!1}function Xa$1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya$1(e,o){var a=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Za$1(e,o){var a=o.defaultValue==null?"":o.defaultValue,c=o.checked!=null?o.checked:o.defaultChecked;a=Sa$1(o.value!=null?o.value:a),e._wrapperState={initialChecked:c,initialValue:a,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab$1(e,o){o=o.checked,o!=null&&ta$1(e,"checked",o,!1)}function bb$1(e,o){ab$1(e,o);var a=Sa$1(o.value),c=o.type;if(a!=null)c==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}o.hasOwnProperty("value")?cb$1(e,o.type,a):o.hasOwnProperty("defaultValue")&&cb$1(e,o.type,Sa$1(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(e.defaultChecked=!!o.defaultChecked)}function db$1(e,o,a){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var c=o.type;if(!(c!=="submit"&&c!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+e._wrapperState.initialValue,a||o===e.value||(e.value=o),e.defaultValue=o}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function cb$1(e,o,a){(o!=="number"||Xa$1(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var eb$1=Array.isArray;function fb(e,o,a,c){if(e=e.options,o){o={};for(var d=0;d<a.length;d++)o["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=o.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&c&&(e[a].defaultSelected=!0)}else{for(a=""+Sa$1(a),o=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,c&&(e[d].defaultSelected=!0);return}o!==null||e[d].disabled||(o=e[d])}o!==null&&(o.selected=!0)}}function gb$1(e,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb$1(e,o){var a=o.value;if(a==null){if(a=o.children,o=o.defaultValue,a!=null){if(o!=null)throw Error(p$1(92));if(eb$1(a)){if(1<a.length)throw Error(p$1(93));a=a[0]}o=a}o==null&&(o=""),a=o}e._wrapperState={initialValue:Sa$1(a)}}function ib$1(e,o){var a=Sa$1(o.value),c=Sa$1(o.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),o.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),c!=null&&(e.defaultValue=""+c)}function jb$1(e){var o=e.textContent;o===e._wrapperState.initialValue&&o!==""&&o!==null&&(e.value=o)}function kb$1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(e,o){return e==null||e==="http://www.w3.org/1999/xhtml"?kb$1(o):e==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb$1,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,a,c,d){MSApp.execUnsafeLocalFunction(function(){return e(o,a,c,d)})}:e}(function(e,o){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=o;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb$1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;o.firstChild;)e.appendChild(o.firstChild)}});function ob$1(e,o){if(o){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=o;return}}e.textContent=o}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(e){qb$1.forEach(function(o){o=o+e.charAt(0).toUpperCase()+e.substring(1),pb$1[o]=pb$1[e]})});function rb$1(e,o,a){return o==null||typeof o=="boolean"||o===""?"":a||typeof o!="number"||o===0||pb$1.hasOwnProperty(e)&&pb$1[e]?(""+o).trim():o+"px"}function sb(e,o){e=e.style;for(var a in o)if(o.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=rb$1(a,o[a],c);a==="float"&&(a="cssFloat"),c?e.setProperty(a,d):e[a]=d}}var tb$1=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(e,o){if(o){if(tb$1[e]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$1(137,e));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$1(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$1(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$1(62))}}function vb$1(e,o){if(e.indexOf("-")===-1)return typeof o.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(e){if(e=Cb$1(e)){if(typeof yb$1!="function")throw Error(p$1(280));var o=e.stateNode;o&&(o=Db$1(o),yb$1(e.stateNode,e.type,o))}}function Eb$1(e){zb$1?Ab$1?Ab$1.push(e):Ab$1=[e]:zb$1=e}function Fb$1(){if(zb$1){var e=zb$1,o=Ab$1;if(Ab$1=zb$1=null,Bb$1(e),o)for(e=0;e<o.length;e++)Bb$1(o[e])}}function Gb$1(e,o){return e(o)}function Hb$1(){}var Ib$1=!1;function Jb(e,o,a){if(Ib$1)return e(o,a);Ib$1=!0;try{return Gb$1(e,o,a)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(e,o){var a=e.stateNode;if(a===null)return null;var c=Db$1(a);if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(p$1(231,o,typeof a));return a}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(e,o,a,c,d,g,b,j,$){var _e=Array.prototype.slice.call(arguments,3);try{o.apply(a,_e)}catch(st){this.onError(st)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(e){Ob$1=!0,Pb$1=e}};function Tb$1(e,o,a,c,d,g,b,j,$){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(e,o,a,c,d,g,b,j,$){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var _e=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$1(198));Qb$1||(Qb$1=!0,Rb$1=_e)}}function Vb$1(e){var o=e,a=e;if(e.alternate)for(;o.return;)o=o.return;else{e=o;do o=e,o.flags&4098&&(a=o.return),e=o.return;while(e)}return o.tag===3?a:null}function Wb$1(e){if(e.tag===13){var o=e.memoizedState;if(o===null&&(e=e.alternate,e!==null&&(o=e.memoizedState)),o!==null)return o.dehydrated}return null}function Xb$1(e){if(Vb$1(e)!==e)throw Error(p$1(188))}function Yb$1(e){var o=e.alternate;if(!o){if(o=Vb$1(e),o===null)throw Error(p$1(188));return o!==e?null:e}for(var a=e,c=o;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Xb$1(d),e;if(g===c)return Xb$1(d),o;g=g.sibling}throw Error(p$1(188))}if(a.return!==c.return)a=d,c=g;else{for(var b=!1,j=d.child;j;){if(j===a){b=!0,a=d,c=g;break}if(j===c){b=!0,c=d,a=g;break}j=j.sibling}if(!b){for(j=g.child;j;){if(j===a){b=!0,a=g,c=d;break}if(j===c){b=!0,c=g,a=d;break}j=j.sibling}if(!b)throw Error(p$1(189))}}if(a.alternate!==c)throw Error(p$1(190))}if(a.tag!==3)throw Error(p$1(188));return a.stateNode.current===a?e:o}function Zb$1(e){return e=Yb$1(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var o=$b(e);if(o!==null)return o;e=e.sibling}return null}var ac$1=ca.unstable_scheduleCallback,bc$1=ca.unstable_cancelCallback,cc$1=ca.unstable_shouldYield,dc$1=ca.unstable_requestPaint,B$1=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc$1=ca.unstable_ImmediatePriority,gc$1=ca.unstable_UserBlockingPriority,hc$1=ca.unstable_NormalPriority,ic$1=ca.unstable_LowPriority,jc$1=ca.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,e,void 0,(e.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(e){return e>>>=0,e===0?32:31-(pc$1(e)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc$1(e,o){var a=e.pendingLanes;if(a===0)return 0;var c=0,d=e.suspendedLanes,g=e.pingedLanes,b=a&268435455;if(b!==0){var j=b&~d;j!==0?c=tc$1(j):(g&=b,g!==0&&(c=tc$1(g)))}else b=a&~d,b!==0?c=tc$1(b):g!==0&&(c=tc$1(g));if(c===0)return 0;if(o!==0&&o!==c&&!(o&d)&&(d=c&-c,g=o&-o,d>=g||d===16&&(g&4194240)!==0))return o;if(c&4&&(c|=a&16),o=e.entangledLanes,o!==0)for(e=e.entanglements,o&=c;0<o;)a=31-oc$1(o),d=1<<a,c|=e[a],o&=~d;return c}function vc$1(e,o){switch(e){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(e,o){for(var a=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes;0<g;){var b=31-oc$1(g),j=1<<b,$=d[b];$===-1?(!(j&a)||j&c)&&(d[b]=vc$1(j,o)):$<=o&&(e.expiredLanes|=j),g&=~j}}function xc$1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc$1(){var e=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),e}function zc$1(e){for(var o=[],a=0;31>a;a++)o.push(e);return o}function Ac$1(e,o,a){e.pendingLanes|=o,o!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,o=31-oc$1(o),e[o]=a}function Bc$1(e,o){var a=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<a;){var d=31-oc$1(a),g=1<<d;o[d]=0,c[d]=-1,e[d]=-1,a&=~g}}function Cc$1(e,o){var a=e.entangledLanes|=o;for(e=e.entanglements;a;){var c=31-oc$1(a),d=1<<c;d&o|e[c]&o&&(e[c]|=o),a&=~d}}var C$1=0;function Dc$1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(e,o){switch(e){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(o.pointerId)}}function Tc$1(e,o,a,c,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},o!==null&&(o=Cb$1(o),o!==null&&Fc$1(o)),e):(e.eventSystemFlags|=c,o=e.targetContainers,d!==null&&o.indexOf(d)===-1&&o.push(d),e)}function Uc$1(e,o,a,c,d){switch(o){case"focusin":return Lc$1=Tc$1(Lc$1,e,o,a,c,d),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,e,o,a,c,d),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,e,o,a,c,d),!0;case"pointerover":var g=d.pointerId;return Oc$1.set(g,Tc$1(Oc$1.get(g)||null,e,o,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,Pc$1.set(g,Tc$1(Pc$1.get(g)||null,e,o,a,c,d)),!0}return!1}function Vc$1(e){var o=Wc$1(e.target);if(o!==null){var a=Vb$1(o);if(a!==null){if(o=a.tag,o===13){if(o=Wb$1(a),o!==null){e.blockedOn=o,Ic$1(e.priority,function(){Gc$1(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc$1(e){if(e.blockedOn!==null)return!1;for(var o=e.targetContainers;0<o.length;){var a=Yc$1(e.domEventName,e.eventSystemFlags,o[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);wb$1=c,a.target.dispatchEvent(c),wb$1=null}else return o=Cb$1(a),o!==null&&Fc$1(o),e.blockedOn=a,!1;o.shift()}return!0}function Zc(e,o,a){Xc$1(e)&&a.delete(o)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc),Pc$1.forEach(Zc)}function ad$1(e,o){e.blockedOn===o&&(e.blockedOn=null,Jc$1||(Jc$1=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c$1)))}function bd$1(e){function o(d){return ad$1(d,e)}if(0<Kc$1.length){ad$1(Kc$1[0],e);for(var a=1;a<Kc$1.length;a++){var c=Kc$1[a];c.blockedOn===e&&(c.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,e),Mc$1!==null&&ad$1(Mc$1,e),Nc$1!==null&&ad$1(Nc$1,e),Oc$1.forEach(o),Pc$1.forEach(o),a=0;a<Qc$1.length;a++)c=Qc$1[a],c.blockedOn===e&&(c.blockedOn=null);for(;0<Qc$1.length&&(a=Qc$1[0],a.blockedOn===null);)Vc$1(a),a.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(e,o,a,c){var d=C$1,g=cd$1.transition;cd$1.transition=null;try{C$1=1,fd$1(e,o,a,c)}finally{C$1=d,cd$1.transition=g}}function gd$1(e,o,a,c){var d=C$1,g=cd$1.transition;cd$1.transition=null;try{C$1=4,fd$1(e,o,a,c)}finally{C$1=d,cd$1.transition=g}}function fd$1(e,o,a,c){if(dd$1){var d=Yc$1(e,o,a,c);if(d===null)hd$1(e,o,c,id$3,a),Sc$1(e,c);else if(Uc$1(d,e,o,a,c))c.stopPropagation();else if(Sc$1(e,c),o&4&&-1<Rc$1.indexOf(e)){for(;d!==null;){var g=Cb$1(d);if(g!==null&&Ec$1(g),g=Yc$1(e,o,a,c),g===null&&hd$1(e,o,c,id$3,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else hd$1(e,o,c,null,a)}}var id$3=null;function Yc$1(e,o,a,c){if(id$3=null,e=xb$1(c),e=Wc$1(e),e!==null)if(o=Vb$1(e),o===null)e=null;else if(a=o.tag,a===13){if(e=Wb$1(o),e!==null)return e;e=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;e=null}else o!==e&&(e=null);return id$3=e,null}function jd$1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var e,o=ld$1,a=o.length,c,d="value"in kd$1?kd$1.value:kd$1.textContent,g=d.length;for(e=0;e<a&&o[e]===d[e];e++);var b=a-e;for(c=1;c<=b&&o[a-c]===d[g-c];c++);return md$1=d.slice(e,1<c?1-c:void 0)}function od$1(e){var o=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&o===13&&(e=13)):e=o,e===10&&(e=13),32<=e||e===13?e:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(e){function o(a,c,d,g,b){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(a=e[j],this[j]=a?a(g):g[j]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),o}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$1({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$1({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd$1&&(yd$1&&e.type==="mousemove"?(wd$1=e.screenX-yd$1.screenX,xd$1=e.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=e),wd$1)},movementY:function(e){return"movementY"in e?e.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$1({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$1({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$1({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$1({},sd$1,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$1({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(e){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(e):(e=Od$1[e])?!!o[e]:!1}function zd$1(){return Pd$1}var Qd$1=A$1({},ud$1,{key:function(e){if(e.key){var o=Md$1[e.key]||e.key;if(o!=="Unidentified")return o}return e.type==="keypress"?(e=od$1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd$1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(e){return e.type==="keypress"?od$1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od$1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$1({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$1({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$1({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$1({},Ad$1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae=ia$1&&"CompositionEvent"in window,be=null;ia$1&&"documentMode"in document&&(be=document.documentMode);var ce$2=ia$1&&"TextEvent"in window&&!be,de=ia$1&&(!ae||be&&8<be&&11>=be),ee=" ",fe$2=!1;function ge(e,o){switch(e){case"keyup":return $d$1.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,o){switch(e){case"compositionend":return he$1(o);case"keypress":return o.which!==32?null:(fe$2=!0,ee);case"textInput":return e=o.data,e===ee&&fe$2?null:e;default:return null}}function ke$1(e,o){if(ie)return e==="compositionend"||!ae&&ge(e,o)?(e=nd$1(),md$1=ld$1=kd$1=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o==="input"?!!le$1[e.type]:o==="textarea"}function ne(e,o,a,c){Eb$1(c),o=oe(o,"onChange"),0<o.length&&(a=new td$1("onChange","change",null,a,c),e.push({event:a,listeners:o}))}var pe=null,qe$1=null;function re(e){se$1(e,0)}function te(e){var o=ue$2(e);if(Wa$1(o))return e}function ve(e,o){if(e==="change")return o}var we=!1;if(ia$1){var xe;if(ia$1){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe$1)){var o=[];ne(o,qe$1,e,xb$1(e)),Jb(re,o)}}function Ce(e,o,a){e==="focusin"?(Ae$1(),pe=o,qe$1=a,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae$1()}function De$2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe$1)}function Ee(e,o){if(e==="click")return te(o)}function Fe(e,o){if(e==="input"||e==="change")return te(o)}function Ge(e,o){return e===o&&(e!==0||1/e===1/o)||e!==e&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,o){if(He(e,o))return!0;if(typeof e!="object"||e===null||typeof o!="object"||o===null)return!1;var a=Object.keys(e),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!ja$1.call(o,d)||!He(e[d],o[d]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke$1(e,o){var a=Je(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=o&&c>=o)return{node:a,offset:o-e};e=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Je(a)}}function Le$1(e,o){return e&&o?e===o?!0:e&&e.nodeType===3?!1:o&&o.nodeType===3?Le$1(e,o.parentNode):"contains"in e?e.contains(o):e.compareDocumentPosition?!!(e.compareDocumentPosition(o)&16):!1:!1}function Me$1(){for(var e=window,o=Xa$1();o instanceof e.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)e=o.contentWindow;else break;o=Xa$1(e.document)}return o}function Ne(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o&&(o==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||o==="textarea"||e.contentEditable==="true")}function Oe(e){var o=Me$1(),a=e.focusedElem,c=e.selectionRange;if(o!==a&&a&&a.ownerDocument&&Le$1(a.ownerDocument.documentElement,a)){if(c!==null&&Ne(a)){if(o=c.start,e=c.end,e===void 0&&(e=o),"selectionStart"in a)a.selectionStart=o,a.selectionEnd=Math.min(e,a.value.length);else if(e=(o=a.ownerDocument||document)&&o.defaultView||window,e.getSelection){e=e.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!e.extend&&g>c&&(d=c,c=g,g=d),d=Ke$1(a,g);var b=Ke$1(a,c);d&&b&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==b.node||e.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(d.node,d.offset),e.removeAllRanges(),g>c?(e.addRange(o),e.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),e.addRange(o)))}}for(o=[],e=a;e=e.parentNode;)e.nodeType===1&&o.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<o.length;a++)e=o[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(e,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(c)||(c=Qe$1,"selectionStart"in c&&Ne(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Se$1&&Ie(Se$1,c)||(Se$1=c,c=oe(Re,"onSelect"),0<c.length&&(o=new td$1("onSelect","select",null,o,a),e.push({event:o,listeners:c}),o.target=Qe$1)))}function Ve(e,o){var a={};return a[e.toLowerCase()]=o.toLowerCase(),a["Webkit"+e]="webkit"+o,a["Moz"+e]="moz"+o,a}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$1={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(e){if(Xe$1[e])return Xe$1[e];if(!We$1[e])return e;var o=We$1[e],a;for(a in o)if(o.hasOwnProperty(a)&&a in Ye)return Xe$1[e]=o[a];return e}var $e$2=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(e,o){df$1.set(e,o),fa$1(o,[e])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$2,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(e,o,a){var c=e.type||"unknown-event";e.currentTarget=a,Ub$1(c,o,void 0,e),e.currentTarget=null}function se$1(e,o){o=(o&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],d=c.event;c=c.listeners;e:{var g=void 0;if(o)for(var b=c.length-1;0<=b;b--){var j=c[b],$=j.instance,_e=j.currentTarget;if(j=j.listener,$!==g&&d.isPropagationStopped())break e;nf$1(d,j,_e),g=$}else for(b=0;b<c.length;b++){if(j=c[b],$=j.instance,_e=j.currentTarget,j=j.listener,$!==g&&d.isPropagationStopped())break e;nf$1(d,j,_e),g=$}}}if(Qb$1)throw e=Rb$1,Qb$1=!1,Rb$1=null,e}function D$1(e,o){var a=o[of$1];a===void 0&&(a=o[of$1]=new Set);var c=e+"__bubble";a.has(c)||(pf$1(o,e,2,!1),a.add(c))}function qf$1(e,o,a){var c=0;o&&(c|=4),pf$1(a,e,c,o)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(e){if(!e[rf$1]){e[rf$1]=!0,da$1.forEach(function(a){a!=="selectionchange"&&(mf$1.has(a)||qf$1(a,!1,e),qf$1(a,!0,e))});var o=e.nodeType===9?e:e.ownerDocument;o===null||o[rf$1]||(o[rf$1]=!0,qf$1("selectionchange",!1,o))}}function pf$1(e,o,a,c){switch(jd$1(o)){case 1:var d=ed$1;break;case 4:d=gd$1;break;default:d=fd$1}a=d.bind(null,o,a,e),d=void 0,!Lb$1||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(d=!0),c?d!==void 0?e.addEventListener(o,a,{capture:!0,passive:d}):e.addEventListener(o,a,!0):d!==void 0?e.addEventListener(o,a,{passive:d}):e.addEventListener(o,a,!1)}function hd$1(e,o,a,c,d){var g=c;if(!(o&1)&&!(o&2)&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var j=c.stateNode.containerInfo;if(j===d||j.nodeType===8&&j.parentNode===d)break;if(b===4)for(b=c.return;b!==null;){var $=b.tag;if(($===3||$===4)&&($=b.stateNode.containerInfo,$===d||$.nodeType===8&&$.parentNode===d))return;b=b.return}for(;j!==null;){if(b=Wc$1(j),b===null)return;if($=b.tag,$===5||$===6){c=g=b;continue e}j=j.parentNode}}c=c.return}Jb(function(){var _e=g,st=xb$1(a),rt=[];e:{var ut=df$1.get(e);if(ut!==void 0){var gt=td$1,yt=e;switch(e){case"keypress":if(od$1(a)===0)break e;case"keydown":case"keyup":gt=Rd$1;break;case"focusin":yt="focus",gt=Fd$1;break;case"focusout":yt="blur",gt=Fd$1;break;case"beforeblur":case"afterblur":gt=Fd$1;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Vd$1;break;case $e$2:case af$1:case bf$1:gt=Hd$1;break;case cf$1:gt=Xd$1;break;case"scroll":gt=vd$1;break;case"wheel":gt=Zd$1;break;case"copy":case"cut":case"paste":gt=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Td$1}var wt=(o&4)!==0,Ct=!wt&&e==="scroll",Pt=wt?ut!==null?ut+"Capture":null:ut;wt=[];for(var At=_e,Tt;At!==null;){Tt=At;var kt=Tt.stateNode;if(Tt.tag===5&&kt!==null&&(Tt=kt,Pt!==null&&(kt=Kb$1(At,Pt),kt!=null&&wt.push(tf$1(At,kt,Tt)))),Ct)break;At=At.return}0<wt.length&&(ut=new gt(ut,yt,null,a,st),rt.push({event:ut,listeners:wt}))}}if(!(o&7)){e:{if(ut=e==="mouseover"||e==="pointerover",gt=e==="mouseout"||e==="pointerout",ut&&a!==wb$1&&(yt=a.relatedTarget||a.fromElement)&&(Wc$1(yt)||yt[uf$1]))break e;if((gt||ut)&&(ut=st.window===st?st:(ut=st.ownerDocument)?ut.defaultView||ut.parentWindow:window,gt?(yt=a.relatedTarget||a.toElement,gt=_e,yt=yt?Wc$1(yt):null,yt!==null&&(Ct=Vb$1(yt),yt!==Ct||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(gt=null,yt=_e),gt!==yt)){if(wt=Bd$1,kt="onMouseLeave",Pt="onMouseEnter",At="mouse",(e==="pointerout"||e==="pointerover")&&(wt=Td$1,kt="onPointerLeave",Pt="onPointerEnter",At="pointer"),Ct=gt==null?ut:ue$2(gt),Tt=yt==null?ut:ue$2(yt),ut=new wt(kt,At+"leave",gt,a,st),ut.target=Ct,ut.relatedTarget=Tt,kt=null,Wc$1(st)===_e&&(wt=new wt(Pt,At+"enter",yt,a,st),wt.target=Tt,wt.relatedTarget=Ct,kt=wt),Ct=kt,gt&&yt)t:{for(wt=gt,Pt=yt,At=0,Tt=wt;Tt;Tt=vf$1(Tt))At++;for(Tt=0,kt=Pt;kt;kt=vf$1(kt))Tt++;for(;0<At-Tt;)wt=vf$1(wt),At--;for(;0<Tt-At;)Pt=vf$1(Pt),Tt--;for(;At--;){if(wt===Pt||Pt!==null&&wt===Pt.alternate)break t;wt=vf$1(wt),Pt=vf$1(Pt)}wt=null}else wt=null;gt!==null&&wf$1(rt,ut,gt,wt,!1),yt!==null&&Ct!==null&&wf$1(rt,Ct,yt,wt,!0)}}e:{if(ut=_e?ue$2(_e):window,gt=ut.nodeName&&ut.nodeName.toLowerCase(),gt==="select"||gt==="input"&&ut.type==="file")var It=ve;else if(me(ut))if(we)It=Fe;else{It=De$2;var Lt=Ce}else(gt=ut.nodeName)&&gt.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(It=Ee);if(It&&(It=It(e,_e))){ne(rt,It,a,st);break e}Lt&&Lt(e,ut,_e),e==="focusout"&&(Lt=ut._wrapperState)&&Lt.controlled&&ut.type==="number"&&cb$1(ut,"number",ut.value)}switch(Lt=_e?ue$2(_e):window,e){case"focusin":(me(Lt)||Lt.contentEditable==="true")&&(Qe$1=Lt,Re=_e,Se$1=null);break;case"focusout":Se$1=Re=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(rt,a,st);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(rt,a,st)}var Ft;if(ae)e:{switch(e){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else ie?ge(e,a)&&(Nt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Nt="onCompositionStart");Nt&&(de&&a.locale!=="ko"&&(ie||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&ie&&(Ft=nd$1()):(kd$1=st,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),Lt=oe(_e,Nt),0<Lt.length&&(Nt=new Ld$1(Nt,e,null,a,st),rt.push({event:Nt,listeners:Lt}),Ft?Nt.data=Ft:(Ft=he$1(a),Ft!==null&&(Nt.data=Ft)))),(Ft=ce$2?je(e,a):ke$1(e,a))&&(_e=oe(_e,"onBeforeInput"),0<_e.length&&(st=new Ld$1("onBeforeInput","beforeinput",null,a,st),rt.push({event:st,listeners:_e}),st.data=Ft))}se$1(rt,o)})}function tf$1(e,o,a){return{instance:e,listener:o,currentTarget:a}}function oe(e,o){for(var a=o+"Capture",c=[];e!==null;){var d=e,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=Kb$1(e,a),g!=null&&c.unshift(tf$1(e,g,d)),g=Kb$1(e,o),g!=null&&c.push(tf$1(e,g,d))),e=e.return}return c}function vf$1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf$1(e,o,a,c,d){for(var g=o._reactName,b=[];a!==null&&a!==c;){var j=a,$=j.alternate,_e=j.stateNode;if($!==null&&$===c)break;j.tag===5&&_e!==null&&(j=_e,d?($=Kb$1(a,g),$!=null&&b.unshift(tf$1(a,$,j))):d||($=Kb$1(a,g),$!=null&&b.push(tf$1(a,$,j)))),a=a.return}b.length!==0&&e.push({event:o,listeners:b})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(e){return(typeof e=="string"?e:""+e).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(e,o,a){if(o=zf$1(o),zf$1(e)!==o&&a)throw Error(p$1(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(e,o){return e==="textarea"||e==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(e){return Hf$1.resolve(null).then(e).catch(If$1)}:Ff$1;function If$1(e){setTimeout(function(){throw e})}function Kf$1(e,o){var a=o,c=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){e.removeChild(d),bd$1(o);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);bd$1(o)}function Lf$1(e){for(;e!=null;e=e.nextSibling){var o=e.nodeType;if(o===1||o===3)break;if(o===8){if(o=e.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return e}function Mf$1(e){e=e.previousSibling;for(var o=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return e;o--}else a==="/$"&&o++}e=e.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(e){var o=e[Of$1];if(o)return o;for(var a=e.parentNode;a;){if(o=a[uf$1]||a[Of$1]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(e=Mf$1(e);e!==null;){if(a=e[Of$1])return a;e=Mf$1(e)}return o}e=a,a=e.parentNode}return null}function Cb$1(e){return e=e[Of$1]||e[uf$1],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue$2(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p$1(33))}function Db$1(e){return e[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(e){return{current:e}}function E$1(e){0>Tf$1||(e.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(e,o){Tf$1++,Sf$1[Tf$1]=e.current,e.current=o}var Vf$1={},H$1=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(e,o){var a=e.type.contextTypes;if(!a)return Vf$1;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===o)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=o[g];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=d),d}function Zf$1(e){return e=e.childContextTypes,e!=null}function $f$1(){E$1(Wf$1),E$1(H$1)}function ag$1(e,o,a){if(H$1.current!==Vf$1)throw Error(p$1(168));G$1(H$1,o),G$1(Wf$1,a)}function bg$1(e,o,a){var c=e.stateNode;if(o=o.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in o))throw Error(p$1(108,Ra$1(e)||"Unknown",d));return A$1({},a,c)}function cg$1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$1.current,G$1(H$1,e),G$1(Wf$1,Wf$1.current),!0}function dg$1(e,o,a){var c=e.stateNode;if(!c)throw Error(p$1(169));a?(e=bg$1(e,o,Xf$1),c.__reactInternalMemoizedMergedChildContext=e,E$1(Wf$1),E$1(H$1),G$1(H$1,e)):E$1(Wf$1),G$1(Wf$1,a)}var eg$1=null,fg$1=!1,gg$1=!1;function hg$1(e){eg$1===null?eg$1=[e]:eg$1.push(e)}function ig$1(e){fg$1=!0,hg$1(e)}function jg$1(){if(!gg$1&&eg$1!==null){gg$1=!0;var e=0,o=C$1;try{var a=eg$1;for(C$1=1;e<a.length;e++){var c=a[e];do c=c(!0);while(c!==null)}eg$1=null,fg$1=!1}catch(d){throw eg$1!==null&&(eg$1=eg$1.slice(e+1)),ac$1(fc$1,jg$1),d}finally{C$1=o,gg$1=!1}}return null}var kg$1=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg$1=null,rg$1=1,sg$1="";function tg$1(e,o){kg$1[lg$1++]=ng$1,kg$1[lg$1++]=mg$1,mg$1=e,ng$1=o}function ug$1(e,o,a){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,qg$1=e;var c=rg$1;e=sg$1;var d=32-oc$1(c)-1;c&=~(1<<d),a+=1;var g=32-oc$1(o)+d;if(30<g){var b=d-d%5;g=(c&(1<<b)-1).toString(32),c>>=b,d-=b,rg$1=1<<32-oc$1(o)+d|a<<d|c,sg$1=g+e}else rg$1=1<<g|a<<d|c,sg$1=e}function vg$1(e){e.return!==null&&(tg$1(e,1),ug$1(e,1,0))}function wg$1(e){for(;e===mg$1;)mg$1=kg$1[--lg$1],kg$1[lg$1]=null,ng$1=kg$1[--lg$1],kg$1[lg$1]=null;for(;e===qg$1;)qg$1=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg$1=null,I$1=!1,zg$1=null;function Ag$1(e,o){var a=Bg(5,null,null,0);a.elementType="DELETED",a.stateNode=o,a.return=e,o=e.deletions,o===null?(e.deletions=[a],e.flags|=16):o.push(a)}function Cg$1(e,o){switch(e.tag){case 5:var a=e.type;return o=o.nodeType!==1||a.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(e.stateNode=o,xg$1=e,yg$1=Lf$1(o.firstChild),!0):!1;case 6:return o=e.pendingProps===""||o.nodeType!==3?null:o,o!==null?(e.stateNode=o,xg$1=e,yg$1=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(a=qg$1!==null?{id:rg$1,overflow:sg$1}:null,e.memoizedState={dehydrated:o,treeContext:a,retryLane:1073741824},a=Bg(18,null,null,0),a.stateNode=o,a.return=e,e.child=a,xg$1=e,yg$1=null,!0):!1;default:return!1}}function Dg$1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg$1(e){if(I$1){var o=yg$1;if(o){var a=o;if(!Cg$1(e,o)){if(Dg$1(e))throw Error(p$1(418));o=Lf$1(a.nextSibling);var c=xg$1;o&&Cg$1(e,o)?Ag$1(c,a):(e.flags=e.flags&-4097|2,I$1=!1,xg$1=e)}}else{if(Dg$1(e))throw Error(p$1(418));e.flags=e.flags&-4097|2,I$1=!1,xg$1=e}}}function Fg$1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg$1=e}function Gg$1(e){if(e!==xg$1)return!1;if(!I$1)return Fg$1(e),I$1=!0,!1;var o;if((o=e.tag!==3)&&!(o=e.tag!==5)&&(o=e.type,o=o!=="head"&&o!=="body"&&!Ef$1(e.type,e.memoizedProps)),o&&(o=yg$1)){if(Dg$1(e))throw Hg$1(),Error(p$1(418));for(;o;)Ag$1(e,o),o=Lf$1(o.nextSibling)}if(Fg$1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p$1(317));e:{for(e=e.nextSibling,o=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(o===0){yg$1=Lf$1(e.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++}e=e.nextSibling}yg$1=null}}else yg$1=xg$1?Lf$1(e.stateNode.nextSibling):null;return!0}function Hg$1(){for(var e=yg$1;e;)e=Lf$1(e.nextSibling)}function Ig$1(){yg$1=xg$1=null,I$1=!1}function Jg$1(e){zg$1===null?zg$1=[e]:zg$1.push(e)}var Kg$1=ua$1.ReactCurrentBatchConfig;function Lg$1(e,o){if(e&&e.defaultProps){o=A$1({},o),e=e.defaultProps;for(var a in e)o[a]===void 0&&(o[a]=e[a]);return o}return o}var Mg$1=Uf$1(null),Ng=null,Og$1=null,Pg$1=null;function Qg$1(){Pg$1=Og$1=Ng=null}function Rg$1(e){var o=Mg$1.current;E$1(Mg$1),e._currentValue=o}function Sg$1(e,o,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&o)!==o?(e.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),e===a)break;e=e.return}}function Tg$1(e,o){Ng=e,Pg$1=Og$1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&o&&(Ug$1=!0),e.firstContext=null)}function Vg$1(e){var o=e._currentValue;if(Pg$1!==e)if(e={context:e,memoizedValue:o,next:null},Og$1===null){if(Ng===null)throw Error(p$1(308));Og$1=e,Ng.dependencies={lanes:0,firstContext:e}}else Og$1=Og$1.next=e;return o}var Wg$1=null;function Xg$1(e){Wg$1===null?Wg$1=[e]:Wg$1.push(e)}function Yg$1(e,o,a,c){var d=o.interleaved;return d===null?(a.next=a,Xg$1(o)):(a.next=d.next,d.next=a),o.interleaved=a,Zg$1(e,c)}function Zg$1(e,o){e.lanes|=o;var a=e.alternate;for(a!==null&&(a.lanes|=o),a=e,e=e.return;e!==null;)e.childLanes|=o,a=e.alternate,a!==null&&(a.childLanes|=o),a=e,e=e.return;return a.tag===3?a.stateNode:null}var $g$1=!1;function ah$1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(e,o){e=e.updateQueue,o.updateQueue===e&&(o.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch$1(e,o){return{eventTime:e,lane:o,tag:0,payload:null,callback:null,next:null}}function dh$1(e,o,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,K$1&2){var d=c.pending;return d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o,Zg$1(e,a)}return d=c.interleaved,d===null?(o.next=o,Xg$1(c)):(o.next=d.next,d.next=o),c.interleaved=o,Zg$1(e,a)}function eh$1(e,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194240)!==0)){var c=o.lanes;c&=e.pendingLanes,a|=c,o.lanes=a,Cc$1(e,a)}}function fh$1(e,o){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?d=g=o:g=g.next=o}else d=g=o;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=o:e.next=o,a.lastBaseUpdate=o}function gh$1(e,o,a,c){var d=e.updateQueue;$g$1=!1;var g=d.firstBaseUpdate,b=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var $=j,_e=$.next;$.next=null,b===null?g=_e:b.next=_e,b=$;var st=e.alternate;st!==null&&(st=st.updateQueue,j=st.lastBaseUpdate,j!==b&&(j===null?st.firstBaseUpdate=_e:j.next=_e,st.lastBaseUpdate=$))}if(g!==null){var rt=d.baseState;b=0,st=_e=$=null,j=g;do{var ut=j.lane,gt=j.eventTime;if((c&ut)===ut){st!==null&&(st=st.next={eventTime:gt,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var yt=e,wt=j;switch(ut=o,gt=a,wt.tag){case 1:if(yt=wt.payload,typeof yt=="function"){rt=yt.call(gt,rt,ut);break e}rt=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=wt.payload,ut=typeof yt=="function"?yt.call(gt,rt,ut):yt,ut==null)break e;rt=A$1({},rt,ut);break e;case 2:$g$1=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,ut=d.effects,ut===null?d.effects=[j]:ut.push(j))}else gt={eventTime:gt,lane:ut,tag:j.tag,payload:j.payload,callback:j.callback,next:null},st===null?(_e=st=gt,$=rt):st=st.next=gt,b|=ut;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;ut=j,j=ut.next,ut.next=null,d.lastBaseUpdate=ut,d.shared.pending=null}}while(!0);if(st===null&&($=rt),d.baseState=$,d.firstBaseUpdate=_e,d.lastBaseUpdate=st,o=d.shared.interleaved,o!==null){d=o;do b|=d.lane,d=d.next;while(d!==o)}else g===null&&(d.shared.lanes=0);hh$1|=b,e.lanes=b,e.memoizedState=rt}}function ih$1(e,o,a){if(e=o.effects,o.effects=null,e!==null)for(o=0;o<e.length;o++){var c=e[o],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(p$1(191,d));d.call(c)}}}var jh$1=new aa$2.Component().refs;function kh$1(e,o,a,c){o=e.memoizedState,a=a(c,o),a=a==null?o:A$1({},o,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var nh$1={isMounted:function(e){return(e=e._reactInternals)?Vb$1(e)===e:!1},enqueueSetState:function(e,o,a){e=e._reactInternals;var c=L$1(),d=lh$1(e),g=ch$1(c,d);g.payload=o,a!=null&&(g.callback=a),o=dh$1(e,g,d),o!==null&&(mh$1(o,e,d,c),eh$1(o,e,d))},enqueueReplaceState:function(e,o,a){e=e._reactInternals;var c=L$1(),d=lh$1(e),g=ch$1(c,d);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=dh$1(e,g,d),o!==null&&(mh$1(o,e,d,c),eh$1(o,e,d))},enqueueForceUpdate:function(e,o){e=e._reactInternals;var a=L$1(),c=lh$1(e),d=ch$1(a,c);d.tag=2,o!=null&&(d.callback=o),o=dh$1(e,d,c),o!==null&&(mh$1(o,e,c,a),eh$1(o,e,c))}};function oh$1(e,o,a,c,d,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,b):o.prototype&&o.prototype.isPureReactComponent?!Ie(a,c)||!Ie(d,g):!0}function ph$1(e,o,a){var c=!1,d=Vf$1,g=o.contextType;return typeof g=="object"&&g!==null?g=Vg$1(g):(d=Zf$1(o)?Xf$1:H$1.current,c=o.contextTypes,g=(c=c!=null)?Yf$1(e,d):Vf$1),o=new o(a,g),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh$1,e.stateNode=o,o._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=g),o}function qh$1(e,o,a,c){e=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==e&&nh$1.enqueueReplaceState(o,o.state,null)}function rh$1(e,o,a,c){var d=e.stateNode;d.props=a,d.state=e.memoizedState,d.refs=jh$1,ah$1(e);var g=o.contextType;typeof g=="object"&&g!==null?d.context=Vg$1(g):(g=Zf$1(o)?Xf$1:H$1.current,d.context=Yf$1(e,g)),d.state=e.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(kh$1(e,o,g,a),d.state=e.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(o=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),o!==d.state&&nh$1.enqueueReplaceState(d,d.state,null),gh$1(e,a,d,c),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function sh$1(e,o,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(p$1(309));var c=a.stateNode}if(!c)throw Error(p$1(147,e));var d=c,g=""+e;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===g?o.ref:(o=function(b){var j=d.refs;j===jh$1&&(j=d.refs={}),b===null?delete j[g]:j[g]=b},o._stringRef=g,o)}if(typeof e!="string")throw Error(p$1(284));if(!a._owner)throw Error(p$1(290,e))}return e}function th$1(e,o){throw e=Object.prototype.toString.call(o),Error(p$1(31,e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e))}function uh$1(e){var o=e._init;return o(e._payload)}function vh$2(e){function o(Pt,At){if(e){var Tt=Pt.deletions;Tt===null?(Pt.deletions=[At],Pt.flags|=16):Tt.push(At)}}function a(Pt,At){if(!e)return null;for(;At!==null;)o(Pt,At),At=At.sibling;return null}function c(Pt,At){for(Pt=new Map;At!==null;)At.key!==null?Pt.set(At.key,At):Pt.set(At.index,At),At=At.sibling;return Pt}function d(Pt,At){return Pt=wh$1(Pt,At),Pt.index=0,Pt.sibling=null,Pt}function g(Pt,At,Tt){return Pt.index=Tt,e?(Tt=Pt.alternate,Tt!==null?(Tt=Tt.index,Tt<At?(Pt.flags|=2,At):Tt):(Pt.flags|=2,At)):(Pt.flags|=1048576,At)}function b(Pt){return e&&Pt.alternate===null&&(Pt.flags|=2),Pt}function j(Pt,At,Tt,kt){return At===null||At.tag!==6?(At=xh$1(Tt,Pt.mode,kt),At.return=Pt,At):(At=d(At,Tt),At.return=Pt,At)}function $(Pt,At,Tt,kt){var It=Tt.type;return It===ya$1?st(Pt,At,Tt.props.children,kt,Tt.key):At!==null&&(At.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha$1&&uh$1(It)===At.type)?(kt=d(At,Tt.props),kt.ref=sh$1(Pt,At,Tt),kt.return=Pt,kt):(kt=yh$1(Tt.type,Tt.key,Tt.props,null,Pt.mode,kt),kt.ref=sh$1(Pt,At,Tt),kt.return=Pt,kt)}function _e(Pt,At,Tt,kt){return At===null||At.tag!==4||At.stateNode.containerInfo!==Tt.containerInfo||At.stateNode.implementation!==Tt.implementation?(At=zh$1(Tt,Pt.mode,kt),At.return=Pt,At):(At=d(At,Tt.children||[]),At.return=Pt,At)}function st(Pt,At,Tt,kt,It){return At===null||At.tag!==7?(At=Ah$1(Tt,Pt.mode,kt,It),At.return=Pt,At):(At=d(At,Tt),At.return=Pt,At)}function rt(Pt,At,Tt){if(typeof At=="string"&&At!==""||typeof At=="number")return At=xh$1(""+At,Pt.mode,Tt),At.return=Pt,At;if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va$1:return Tt=yh$1(At.type,At.key,At.props,null,Pt.mode,Tt),Tt.ref=sh$1(Pt,null,At),Tt.return=Pt,Tt;case wa$1:return At=zh$1(At,Pt.mode,Tt),At.return=Pt,At;case Ha$1:var kt=At._init;return rt(Pt,kt(At._payload),Tt)}if(eb$1(At)||Ka$1(At))return At=Ah$1(At,Pt.mode,Tt,null),At.return=Pt,At;th$1(Pt,At)}return null}function ut(Pt,At,Tt,kt){var It=At!==null?At.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return It!==null?null:j(Pt,At,""+Tt,kt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va$1:return Tt.key===It?$(Pt,At,Tt,kt):null;case wa$1:return Tt.key===It?_e(Pt,At,Tt,kt):null;case Ha$1:return It=Tt._init,ut(Pt,At,It(Tt._payload),kt)}if(eb$1(Tt)||Ka$1(Tt))return It!==null?null:st(Pt,At,Tt,kt,null);th$1(Pt,Tt)}return null}function gt(Pt,At,Tt,kt,It){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return Pt=Pt.get(Tt)||null,j(At,Pt,""+kt,It);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case va$1:return Pt=Pt.get(kt.key===null?Tt:kt.key)||null,$(At,Pt,kt,It);case wa$1:return Pt=Pt.get(kt.key===null?Tt:kt.key)||null,_e(At,Pt,kt,It);case Ha$1:var Lt=kt._init;return gt(Pt,At,Tt,Lt(kt._payload),It)}if(eb$1(kt)||Ka$1(kt))return Pt=Pt.get(Tt)||null,st(At,Pt,kt,It,null);th$1(At,kt)}return null}function yt(Pt,At,Tt,kt){for(var It=null,Lt=null,Ft=At,Nt=At=0,Ht=null;Ft!==null&&Nt<Tt.length;Nt++){Ft.index>Nt?(Ht=Ft,Ft=null):Ht=Ft.sibling;var dr=ut(Pt,Ft,Tt[Nt],kt);if(dr===null){Ft===null&&(Ft=Ht);break}e&&Ft&&dr.alternate===null&&o(Pt,Ft),At=g(dr,At,Nt),Lt===null?It=dr:Lt.sibling=dr,Lt=dr,Ft=Ht}if(Nt===Tt.length)return a(Pt,Ft),I$1&&tg$1(Pt,Nt),It;if(Ft===null){for(;Nt<Tt.length;Nt++)Ft=rt(Pt,Tt[Nt],kt),Ft!==null&&(At=g(Ft,At,Nt),Lt===null?It=Ft:Lt.sibling=Ft,Lt=Ft);return I$1&&tg$1(Pt,Nt),It}for(Ft=c(Pt,Ft);Nt<Tt.length;Nt++)Ht=gt(Ft,Pt,Nt,Tt[Nt],kt),Ht!==null&&(e&&Ht.alternate!==null&&Ft.delete(Ht.key===null?Nt:Ht.key),At=g(Ht,At,Nt),Lt===null?It=Ht:Lt.sibling=Ht,Lt=Ht);return e&&Ft.forEach(function(hs){return o(Pt,hs)}),I$1&&tg$1(Pt,Nt),It}function wt(Pt,At,Tt,kt){var It=Ka$1(Tt);if(typeof It!="function")throw Error(p$1(150));if(Tt=It.call(Tt),Tt==null)throw Error(p$1(151));for(var Lt=It=null,Ft=At,Nt=At=0,Ht=null,dr=Tt.next();Ft!==null&&!dr.done;Nt++,dr=Tt.next()){Ft.index>Nt?(Ht=Ft,Ft=null):Ht=Ft.sibling;var hs=ut(Pt,Ft,dr.value,kt);if(hs===null){Ft===null&&(Ft=Ht);break}e&&Ft&&hs.alternate===null&&o(Pt,Ft),At=g(hs,At,Nt),Lt===null?It=hs:Lt.sibling=hs,Lt=hs,Ft=Ht}if(dr.done)return a(Pt,Ft),I$1&&tg$1(Pt,Nt),It;if(Ft===null){for(;!dr.done;Nt++,dr=Tt.next())dr=rt(Pt,dr.value,kt),dr!==null&&(At=g(dr,At,Nt),Lt===null?It=dr:Lt.sibling=dr,Lt=dr);return I$1&&tg$1(Pt,Nt),It}for(Ft=c(Pt,Ft);!dr.done;Nt++,dr=Tt.next())dr=gt(Ft,Pt,Nt,dr.value,kt),dr!==null&&(e&&dr.alternate!==null&&Ft.delete(dr.key===null?Nt:dr.key),At=g(dr,At,Nt),Lt===null?It=dr:Lt.sibling=dr,Lt=dr);return e&&Ft.forEach(function(us){return o(Pt,us)}),I$1&&tg$1(Pt,Nt),It}function Ct(Pt,At,Tt,kt){if(typeof Tt=="object"&&Tt!==null&&Tt.type===ya$1&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va$1:e:{for(var It=Tt.key,Lt=At;Lt!==null;){if(Lt.key===It){if(It=Tt.type,It===ya$1){if(Lt.tag===7){a(Pt,Lt.sibling),At=d(Lt,Tt.props.children),At.return=Pt,Pt=At;break e}}else if(Lt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Ha$1&&uh$1(It)===Lt.type){a(Pt,Lt.sibling),At=d(Lt,Tt.props),At.ref=sh$1(Pt,Lt,Tt),At.return=Pt,Pt=At;break e}a(Pt,Lt);break}else o(Pt,Lt);Lt=Lt.sibling}Tt.type===ya$1?(At=Ah$1(Tt.props.children,Pt.mode,kt,Tt.key),At.return=Pt,Pt=At):(kt=yh$1(Tt.type,Tt.key,Tt.props,null,Pt.mode,kt),kt.ref=sh$1(Pt,At,Tt),kt.return=Pt,Pt=kt)}return b(Pt);case wa$1:e:{for(Lt=Tt.key;At!==null;){if(At.key===Lt)if(At.tag===4&&At.stateNode.containerInfo===Tt.containerInfo&&At.stateNode.implementation===Tt.implementation){a(Pt,At.sibling),At=d(At,Tt.children||[]),At.return=Pt,Pt=At;break e}else{a(Pt,At);break}else o(Pt,At);At=At.sibling}At=zh$1(Tt,Pt.mode,kt),At.return=Pt,Pt=At}return b(Pt);case Ha$1:return Lt=Tt._init,Ct(Pt,At,Lt(Tt._payload),kt)}if(eb$1(Tt))return yt(Pt,At,Tt,kt);if(Ka$1(Tt))return wt(Pt,At,Tt,kt);th$1(Pt,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"?(Tt=""+Tt,At!==null&&At.tag===6?(a(Pt,At.sibling),At=d(At,Tt),At.return=Pt,Pt=At):(a(Pt,At),At=xh$1(Tt,Pt.mode,kt),At.return=Pt,Pt=At),b(Pt)):a(Pt,At)}return Ct}var Bh$1=vh$2(!0),Ch$1=vh$2(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(e){if(e===Dh$1)throw Error(p$1(174));return e}function Ih$1(e,o){switch(G$1(Gh$1,o),G$1(Fh$1,e),G$1(Eh$1,Dh$1),e=o.nodeType,e){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb$1(null,"");break;default:e=e===8?o.parentNode:o,o=e.namespaceURI||null,e=e.tagName,o=lb$1(o,e)}E$1(Eh$1),G$1(Eh$1,o)}function Jh$1(){E$1(Eh$1),E$1(Fh$1),E$1(Gh$1)}function Kh$1(e){Hh$1(Gh$1.current);var o=Hh$1(Eh$1.current),a=lb$1(o,e.type);o!==a&&(G$1(Fh$1,e),G$1(Eh$1,a))}function Lh$1(e){Fh$1.current===e&&(E$1(Eh$1),E$1(Fh$1))}var M$1=Uf$1(0);function Mh$1(e){for(var o=e;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh$1=[];function Oh$1(){for(var e=0;e<Nh$1.length;e++)Nh$1[e]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$1.ReactCurrentDispatcher,Qh$1=ua$1.ReactCurrentBatchConfig,Rh$1=0,N$1=null,O$1=null,P$1=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q$1(){throw Error(p$1(321))}function Wh$1(e,o){if(o===null)return!1;for(var a=0;a<o.length&&a<e.length;a++)if(!He(e[a],o[a]))return!1;return!0}function Xh$1(e,o,a,c,d,g){if(Rh$1=g,N$1=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph$1.current=e===null||e.memoizedState===null?Yh$1:Zh$1,e=a(c,d),Th$1){g=0;do{if(Th$1=!1,Uh$1=0,25<=g)throw Error(p$1(301));g+=1,P$1=O$1=null,o.updateQueue=null,Ph$1.current=$h$1,e=a(c,d)}while(Th$1)}if(Ph$1.current=ai$1,o=O$1!==null&&O$1.next!==null,Rh$1=0,P$1=O$1=N$1=null,Sh$1=!1,o)throw Error(p$1(300));return e}function bi$1(){var e=Uh$1!==0;return Uh$1=0,e}function ci$1(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=e:P$1=P$1.next=e,P$1}function di(){if(O$1===null){var e=N$1.alternate;e=e!==null?e.memoizedState:null}else e=O$1.next;var o=P$1===null?N$1.memoizedState:P$1.next;if(o!==null)P$1=o,O$1=e;else{if(e===null)throw Error(p$1(310));O$1=e,e={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=e:P$1=P$1.next=e}return P$1}function ei$1(e,o){return typeof o=="function"?o(e):o}function fi(e){var o=di(),a=o.queue;if(a===null)throw Error(p$1(311));a.lastRenderedReducer=e;var c=O$1,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var b=d.next;d.next=g.next,g.next=b}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var j=b=null,$=null,_e=g;do{var st=_e.lane;if((Rh$1&st)===st)$!==null&&($=$.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),c=_e.hasEagerState?_e.eagerState:e(c,_e.action);else{var rt={lane:st,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};$===null?(j=$=rt,b=c):$=$.next=rt,N$1.lanes|=st,hh$1|=st}_e=_e.next}while(_e!==null&&_e!==g);$===null?b=c:$.next=j,He(c,o.memoizedState)||(Ug$1=!0),o.memoizedState=c,o.baseState=b,o.baseQueue=$,a.lastRenderedState=c}if(e=a.interleaved,e!==null){d=e;do g=d.lane,N$1.lanes|=g,hh$1|=g,d=d.next;while(d!==e)}else d===null&&(a.lanes=0);return[o.memoizedState,a.dispatch]}function gi$1(e){var o=di(),a=o.queue;if(a===null)throw Error(p$1(311));a.lastRenderedReducer=e;var c=a.dispatch,d=a.pending,g=o.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do g=e(g,b.action),b=b.next;while(b!==d);He(g,o.memoizedState)||(Ug$1=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),a.lastRenderedState=g}return[g,c]}function hi$1(){}function ii$1(e,o){var a=N$1,c=di(),d=o(),g=!He(c.memoizedState,d);if(g&&(c.memoizedState=d,Ug$1=!0),c=c.queue,ji$1(ki$1.bind(null,a,c,e),[e]),c.getSnapshot!==o||g||P$1!==null&&P$1.memoizedState.tag&1){if(a.flags|=2048,li$1(9,mi$1.bind(null,a,c,d,o),void 0,null),R$1===null)throw Error(p$1(349));Rh$1&30||ni$1(a,o,d)}return d}function ni$1(e,o,a){e.flags|=16384,e={getSnapshot:o,value:a},o=N$1.updateQueue,o===null?(o={lastEffect:null,stores:null},N$1.updateQueue=o,o.stores=[e]):(a=o.stores,a===null?o.stores=[e]:a.push(e))}function mi$1(e,o,a,c){o.value=a,o.getSnapshot=c,oi$1(o)&&pi$1(e)}function ki$1(e,o,a){return a(function(){oi$1(o)&&pi$1(e)})}function oi$1(e){var o=e.getSnapshot;e=e.value;try{var a=o();return!He(e,a)}catch{return!0}}function pi$1(e){var o=Zg$1(e,1);o!==null&&mh$1(o,e,1,-1)}function qi$1(e){var o=ci$1();return typeof e=="function"&&(e=e()),o.memoizedState=o.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:e},o.queue=e,e=e.dispatch=ri$1.bind(null,N$1,e),[o.memoizedState,e]}function li$1(e,o,a,c){return e={tag:e,create:o,destroy:a,deps:c,next:null},o=N$1.updateQueue,o===null?(o={lastEffect:null,stores:null},N$1.updateQueue=o,o.lastEffect=e.next=e):(a=o.lastEffect,a===null?o.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,o.lastEffect=e)),e}function si$1(){return di().memoizedState}function ti$1(e,o,a,c){var d=ci$1();N$1.flags|=e,d.memoizedState=li$1(1|o,a,void 0,c===void 0?null:c)}function ui$1(e,o,a,c){var d=di();c=c===void 0?null:c;var g=void 0;if(O$1!==null){var b=O$1.memoizedState;if(g=b.destroy,c!==null&&Wh$1(c,b.deps)){d.memoizedState=li$1(o,a,g,c);return}}N$1.flags|=e,d.memoizedState=li$1(1|o,a,g,c)}function vi$1(e,o){return ti$1(8390656,8,e,o)}function ji$1(e,o){return ui$1(2048,8,e,o)}function wi$1(e,o){return ui$1(4,2,e,o)}function xi$1(e,o){return ui$1(4,4,e,o)}function yi$1(e,o){if(typeof o=="function")return e=e(),o(e),function(){o(null)};if(o!=null)return e=e(),o.current=e,function(){o.current=null}}function zi$1(e,o,a){return a=a!=null?a.concat([e]):null,ui$1(4,4,yi$1.bind(null,o,e),a)}function Ai$1(){}function Bi$1(e,o){var a=di();o=o===void 0?null:o;var c=a.memoizedState;return c!==null&&o!==null&&Wh$1(o,c[1])?c[0]:(a.memoizedState=[e,o],e)}function Ci$1(e,o){var a=di();o=o===void 0?null:o;var c=a.memoizedState;return c!==null&&o!==null&&Wh$1(o,c[1])?c[0]:(e=e(),a.memoizedState=[e,o],e)}function Di$1(e,o,a){return Rh$1&21?(He(a,o)||(a=yc$1(),N$1.lanes|=a,hh$1|=a,e.baseState=!0),o):(e.baseState&&(e.baseState=!1,Ug$1=!0),e.memoizedState=a)}function Ei(e,o){var a=C$1;C$1=a!==0&&4>a?a:4,e(!0);var c=Qh$1.transition;Qh$1.transition={};try{e(!1),o()}finally{C$1=a,Qh$1.transition=c}}function Fi$1(){return di().memoizedState}function Gi$1(e,o,a){var c=lh$1(e);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Hi$1(e))Ii$1(o,a);else if(a=Yg$1(e,o,a,c),a!==null){var d=L$1();mh$1(a,e,c,d),Ji$1(a,o,c)}}function ri$1(e,o,a){var c=lh$1(e),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(e))Ii$1(o,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var b=o.lastRenderedState,j=g(b,a);if(d.hasEagerState=!0,d.eagerState=j,He(j,b)){var $=o.interleaved;$===null?(d.next=d,Xg$1(o)):(d.next=$.next,$.next=d),o.interleaved=d;return}}catch{}finally{}a=Yg$1(e,o,d,c),a!==null&&(d=L$1(),mh$1(a,e,c,d),Ji$1(a,o,c))}}function Hi$1(e){var o=e.alternate;return e===N$1||o!==null&&o===N$1}function Ii$1(e,o){Th$1=Sh$1=!0;var a=e.pending;a===null?o.next=o:(o.next=a.next,a.next=o),e.pending=o}function Ji$1(e,o,a){if(a&4194240){var c=o.lanes;c&=e.pendingLanes,a|=c,o.lanes=a,Cc$1(e,a)}}var ai$1={readContext:Vg$1,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh$1={readContext:Vg$1,useCallback:function(e,o){return ci$1().memoizedState=[e,o===void 0?null:o],e},useContext:Vg$1,useEffect:vi$1,useImperativeHandle:function(e,o,a){return a=a!=null?a.concat([e]):null,ti$1(4194308,4,yi$1.bind(null,o,e),a)},useLayoutEffect:function(e,o){return ti$1(4194308,4,e,o)},useInsertionEffect:function(e,o){return ti$1(4,2,e,o)},useMemo:function(e,o){var a=ci$1();return o=o===void 0?null:o,e=e(),a.memoizedState=[e,o],e},useReducer:function(e,o,a){var c=ci$1();return o=a!==void 0?a(o):o,c.memoizedState=c.baseState=o,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},c.queue=e,e=e.dispatch=Gi$1.bind(null,N$1,e),[c.memoizedState,e]},useRef:function(e){var o=ci$1();return e={current:e},o.memoizedState=e},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(e){return ci$1().memoizedState=e},useTransition:function(){var e=qi$1(!1),o=e[0];return e=Ei.bind(null,e[1]),ci$1().memoizedState=e,[o,e]},useMutableSource:function(){},useSyncExternalStore:function(e,o,a){var c=N$1,d=ci$1();if(I$1){if(a===void 0)throw Error(p$1(407));a=a()}else{if(a=o(),R$1===null)throw Error(p$1(349));Rh$1&30||ni$1(c,o,a)}d.memoizedState=a;var g={value:a,getSnapshot:o};return d.queue=g,vi$1(ki$1.bind(null,c,g,e),[e]),c.flags|=2048,li$1(9,mi$1.bind(null,c,g,a,o),void 0,null),a},useId:function(){var e=ci$1(),o=R$1.identifierPrefix;if(I$1){var a=sg$1,c=rg$1;a=(c&~(1<<32-oc$1(c)-1)).toString(32)+a,o=":"+o+"R"+a,a=Uh$1++,0<a&&(o+="H"+a.toString(32)),o+=":"}else a=Vh$1++,o=":"+o+"r"+a.toString(32)+":";return e.memoizedState=o},unstable_isNewReconciler:!1},Zh$1={readContext:Vg$1,useCallback:Bi$1,useContext:Vg$1,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi,useRef:si$1,useState:function(){return fi(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var o=di();return Di$1(o,O$1.memoizedState,e)},useTransition:function(){var e=fi(ei$1)[0],o=di().memoizedState;return[e,o]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg$1,useCallback:Bi$1,useContext:Vg$1,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var o=di();return O$1===null?o.memoizedState=e:Di$1(o,O$1.memoizedState,e)},useTransition:function(){var e=gi$1(ei$1)[0],o=di().memoizedState;return[e,o]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(e,o){try{var a="",c=o;do a+=Pa$1(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:o,stack:d,digest:null}}function Li$1(e,o,a){return{value:e,source:null,stack:a??null,digest:o??null}}function Mi$1(e,o){try{console.error(o.value)}catch(a){setTimeout(function(){throw a})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(e,o,a){a=ch$1(-1,a),a.tag=3,a.payload={element:null};var c=o.value;return a.callback=function(){Pi$1||(Pi$1=!0,Qi$1=c),Mi$1(e,o)},a}function Ri$1(e,o,a){a=ch$1(-1,a),a.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var d=o.value;a.payload=function(){return c(d)},a.callback=function(){Mi$1(e,o)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Mi$1(e,o),typeof c!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),a}function Ti$1(e,o,a){var c=e.pingCache;if(c===null){c=e.pingCache=new Ni$1;var d=new Set;c.set(o,d)}else d=c.get(o),d===void 0&&(d=new Set,c.set(o,d));d.has(a)||(d.add(a),e=Ui$1.bind(null,e,o,a),o.then(e,e))}function Vi$1(e){do{var o;if((o=e.tag===13)&&(o=e.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return e;e=e.return}while(e!==null);return null}function Wi$1(e,o,a,c,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===o?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(o=ch$1(-1,1),o.tag=2,dh$1(a,o,1))),a.lanes|=1),e)}var Xi$1=ua$1.ReactCurrentOwner,Ug$1=!1;function Yi$1(e,o,a,c){o.child=e===null?Ch$1(o,null,a,c):Bh$1(o,e.child,a,c)}function Zi$1(e,o,a,c,d){a=a.render;var g=o.ref;return Tg$1(o,d),c=Xh$1(e,o,a,c,g,d),a=bi$1(),e!==null&&!Ug$1?(o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~d,$i$1(e,o,d)):(I$1&&a&&vg$1(o),o.flags|=1,Yi$1(e,o,c,d),o.child)}function aj$1(e,o,a,c,d){if(e===null){var g=a.type;return typeof g=="function"&&!bj$1(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(o.tag=15,o.type=g,cj$1(e,o,g,c,d)):(e=yh$1(a.type,null,c,o,o.mode,d),e.ref=o.ref,e.return=o,o.child=e)}if(g=e.child,!(e.lanes&d)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ie,a(b,c)&&e.ref===o.ref)return $i$1(e,o,d)}return o.flags|=1,e=wh$1(g,c),e.ref=o.ref,e.return=o,o.child=e}function cj$1(e,o,a,c,d){if(e!==null){var g=e.memoizedProps;if(Ie(g,c)&&e.ref===o.ref)if(Ug$1=!1,o.pendingProps=c=g,(e.lanes&d)!==0)e.flags&131072&&(Ug$1=!0);else return o.lanes=e.lanes,$i$1(e,o,d)}return dj$1(e,o,a,c,d)}function ej$1(e,o,a){var c=o.pendingProps,d=c.children,g=e!==null?e.memoizedState:null;if(c.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj$1,gj$1),gj$1|=a;else{if(!(a&1073741824))return e=g!==null?g.baseLanes|a:a,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:e,cachePool:null,transitions:null},o.updateQueue=null,G$1(fj$1,gj$1),gj$1|=e,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,G$1(fj$1,gj$1),gj$1|=c}else g!==null?(c=g.baseLanes|a,o.memoizedState=null):c=a,G$1(fj$1,gj$1),gj$1|=c;return Yi$1(e,o,d,a),o.child}function hj$1(e,o){var a=o.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(o.flags|=512,o.flags|=2097152)}function dj$1(e,o,a,c,d){var g=Zf$1(a)?Xf$1:H$1.current;return g=Yf$1(o,g),Tg$1(o,d),a=Xh$1(e,o,a,c,g,d),c=bi$1(),e!==null&&!Ug$1?(o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~d,$i$1(e,o,d)):(I$1&&c&&vg$1(o),o.flags|=1,Yi$1(e,o,a,d),o.child)}function ij$1(e,o,a,c,d){if(Zf$1(a)){var g=!0;cg$1(o)}else g=!1;if(Tg$1(o,d),o.stateNode===null)jj$1(e,o),ph$1(o,a,c),rh$1(o,a,c,d),c=!0;else if(e===null){var b=o.stateNode,j=o.memoizedProps;b.props=j;var $=b.context,_e=a.contextType;typeof _e=="object"&&_e!==null?_e=Vg$1(_e):(_e=Zf$1(a)?Xf$1:H$1.current,_e=Yf$1(o,_e));var st=a.getDerivedStateFromProps,rt=typeof st=="function"||typeof b.getSnapshotBeforeUpdate=="function";rt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==c||$!==_e)&&qh$1(o,b,c,_e),$g$1=!1;var ut=o.memoizedState;b.state=ut,gh$1(o,c,b,d),$=o.memoizedState,j!==c||ut!==$||Wf$1.current||$g$1?(typeof st=="function"&&(kh$1(o,a,st,c),$=o.memoizedState),(j=$g$1||oh$1(o,a,j,c,ut,$,_e))?(rt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=$),b.props=c,b.state=$,b.context=_e,c=j):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{b=o.stateNode,bh$1(e,o),j=o.memoizedProps,_e=o.type===o.elementType?j:Lg$1(o.type,j),b.props=_e,rt=o.pendingProps,ut=b.context,$=a.contextType,typeof $=="object"&&$!==null?$=Vg$1($):($=Zf$1(a)?Xf$1:H$1.current,$=Yf$1(o,$));var gt=a.getDerivedStateFromProps;(st=typeof gt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==rt||ut!==$)&&qh$1(o,b,c,$),$g$1=!1,ut=o.memoizedState,b.state=ut,gh$1(o,c,b,d);var yt=o.memoizedState;j!==rt||ut!==yt||Wf$1.current||$g$1?(typeof gt=="function"&&(kh$1(o,a,gt,c),yt=o.memoizedState),(_e=$g$1||oh$1(o,a,_e,c,ut,yt,$)||!1)?(st||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,yt,$),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,yt,$)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=yt),b.props=c,b.state=yt,b.context=$,c=_e):(typeof b.componentDidUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(o.flags|=1024),c=!1)}return kj$1(e,o,a,c,g,d)}function kj$1(e,o,a,c,d,g){hj$1(e,o);var b=(o.flags&128)!==0;if(!c&&!b)return d&&dg$1(o,a,!1),$i$1(e,o,g);c=o.stateNode,Xi$1.current=o;var j=b&&typeof a.getDerivedStateFromError!="function"?null:c.render();return o.flags|=1,e!==null&&b?(o.child=Bh$1(o,e.child,null,g),o.child=Bh$1(o,null,j,g)):Yi$1(e,o,j,g),o.memoizedState=c.state,d&&dg$1(o,a,!0),o.child}function lj$1(e){var o=e.stateNode;o.pendingContext?ag$1(e,o.pendingContext,o.pendingContext!==o.context):o.context&&ag$1(e,o.context,!1),Ih$1(e,o.containerInfo)}function mj$1(e,o,a,c,d){return Ig$1(),Jg$1(d),o.flags|=256,Yi$1(e,o,a,c),o.child}var nj$1={dehydrated:null,treeContext:null,retryLane:0};function oj$1(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj$1(e,o,a){var c=o.pendingProps,d=M$1.current,g=!1,b=(o.flags&128)!==0,j;if((j=b)||(j=e!==null&&e.memoizedState===null?!1:(d&2)!==0),j?(g=!0,o.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),G$1(M$1,d&1),e===null)return Eg$1(o),e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(o.mode&1?e.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=c.children,e=c.fallback,g?(c=o.mode,g=o.child,b={mode:"hidden",children:b},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=b):g=qj$1(b,c,0,null),e=Ah$1(e,c,a,null),g.return=o,e.return=o,g.sibling=e,o.child=g,o.child.memoizedState=oj$1(a),o.memoizedState=nj$1,e):rj$1(o,b));if(d=e.memoizedState,d!==null&&(j=d.dehydrated,j!==null))return sj$1(e,o,b,c,j,d,a);if(g){g=c.fallback,b=o.mode,d=e.child,j=d.sibling;var $={mode:"hidden",children:c.children};return!(b&1)&&o.child!==d?(c=o.child,c.childLanes=0,c.pendingProps=$,o.deletions=null):(c=wh$1(d,$),c.subtreeFlags=d.subtreeFlags&14680064),j!==null?g=wh$1(j,g):(g=Ah$1(g,b,a,null),g.flags|=2),g.return=o,c.return=o,c.sibling=g,o.child=c,c=g,g=o.child,b=e.child.memoizedState,b=b===null?oj$1(a):{baseLanes:b.baseLanes|a,cachePool:null,transitions:b.transitions},g.memoizedState=b,g.childLanes=e.childLanes&~a,o.memoizedState=nj$1,c}return g=e.child,e=g.sibling,c=wh$1(g,{mode:"visible",children:c.children}),!(o.mode&1)&&(c.lanes=a),c.return=o,c.sibling=null,e!==null&&(a=o.deletions,a===null?(o.deletions=[e],o.flags|=16):a.push(e)),o.child=c,o.memoizedState=null,c}function rj$1(e,o){return o=qj$1({mode:"visible",children:o},e.mode,0,null),o.return=e,e.child=o}function tj$1(e,o,a,c){return c!==null&&Jg$1(c),Bh$1(o,e.child,null,a),e=rj$1(o,o.pendingProps.children),e.flags|=2,o.memoizedState=null,e}function sj$1(e,o,a,c,d,g,b){if(a)return o.flags&256?(o.flags&=-257,c=Li$1(Error(p$1(422))),tj$1(e,o,b,c)):o.memoizedState!==null?(o.child=e.child,o.flags|=128,null):(g=c.fallback,d=o.mode,c=qj$1({mode:"visible",children:c.children},d,0,null),g=Ah$1(g,d,b,null),g.flags|=2,c.return=o,g.return=o,c.sibling=g,o.child=c,o.mode&1&&Bh$1(o,e.child,null,b),o.child.memoizedState=oj$1(b),o.memoizedState=nj$1,g);if(!(o.mode&1))return tj$1(e,o,b,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var j=c.dgst;return c=j,g=Error(p$1(419)),c=Li$1(g,c,void 0),tj$1(e,o,b,c)}if(j=(b&e.childLanes)!==0,Ug$1||j){if(c=R$1,c!==null){switch(b&-b){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|b)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Zg$1(e,d),mh$1(c,e,d,-1))}return uj$1(),c=Li$1(Error(p$1(421))),tj$1(e,o,b,c)}return d.data==="$?"?(o.flags|=128,o.child=e.child,o=vj$1.bind(null,e),d._reactRetry=o,null):(e=g.treeContext,yg$1=Lf$1(d.nextSibling),xg$1=o,I$1=!0,zg$1=null,e!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,rg$1=e.id,sg$1=e.overflow,qg$1=o),o=rj$1(o,c.children),o.flags|=4096,o)}function wj$1(e,o,a){e.lanes|=o;var c=e.alternate;c!==null&&(c.lanes|=o),Sg$1(e.return,o,a)}function xj$1(e,o,a,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function yj$1(e,o,a){var c=o.pendingProps,d=c.revealOrder,g=c.tail;if(Yi$1(e,o,c.children,a),c=M$1.current,c&2)c=c&1|2,o.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=o.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj$1(e,a,o);else if(e.tag===19)wj$1(e,a,o);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break e;for(;e.sibling===null;){if(e.return===null||e.return===o)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(G$1(M$1,c),!(o.mode&1))o.memoizedState=null;else switch(d){case"forwards":for(a=o.child,d=null;a!==null;)e=a.alternate,e!==null&&Mh$1(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=o.child,o.child=null):(d=a.sibling,a.sibling=null),xj$1(o,!1,d,a,g);break;case"backwards":for(a=null,d=o.child,o.child=null;d!==null;){if(e=d.alternate,e!==null&&Mh$1(e)===null){o.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}xj$1(o,!0,a,null,g);break;case"together":xj$1(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj$1(e,o){!(o.mode&1)&&e!==null&&(e.alternate=null,o.alternate=null,o.flags|=2)}function $i$1(e,o,a){if(e!==null&&(o.dependencies=e.dependencies),hh$1|=o.lanes,!(a&o.childLanes))return null;if(e!==null&&o.child!==e.child)throw Error(p$1(153));if(o.child!==null){for(e=o.child,a=wh$1(e,e.pendingProps),o.child=a,a.return=o;e.sibling!==null;)e=e.sibling,a=a.sibling=wh$1(e,e.pendingProps),a.return=o;a.sibling=null}return o.child}function zj$1(e,o,a){switch(o.tag){case 3:lj$1(o),Ig$1();break;case 5:Kh$1(o);break;case 1:Zf$1(o.type)&&cg$1(o);break;case 4:Ih$1(o,o.stateNode.containerInfo);break;case 10:var c=o.type._context,d=o.memoizedProps.value;G$1(Mg$1,c._currentValue),c._currentValue=d;break;case 13:if(c=o.memoizedState,c!==null)return c.dehydrated!==null?(G$1(M$1,M$1.current&1),o.flags|=128,null):a&o.child.childLanes?pj$1(e,o,a):(G$1(M$1,M$1.current&1),e=$i$1(e,o,a),e!==null?e.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(c=(a&o.childLanes)!==0,e.flags&128){if(c)return yj$1(e,o,a);o.flags|=128}if(d=o.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G$1(M$1,M$1.current),c)break;return null;case 22:case 23:return o.lanes=0,ej$1(e,o,a)}return $i$1(e,o,a)}var Aj$1,Bj$1,Cj$1,Dj$1;Aj$1=function(e,o){for(var a=o.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Bj$1=function(){};Cj$1=function(e,o,a,c){var d=e.memoizedProps;if(d!==c){e=o.stateNode,Hh$1(Eh$1.current);var g=null;switch(a){case"input":d=Ya$1(e,d),c=Ya$1(e,c),g=[];break;case"select":d=A$1({},d,{value:void 0}),c=A$1({},c,{value:void 0}),g=[];break;case"textarea":d=gb$1(e,d),c=gb$1(e,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Bf$1)}ub$1(a,c);var b;a=null;for(_e in d)if(!c.hasOwnProperty(_e)&&d.hasOwnProperty(_e)&&d[_e]!=null)if(_e==="style"){var j=d[_e];for(b in j)j.hasOwnProperty(b)&&(a||(a={}),a[b]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(ea$1.hasOwnProperty(_e)?g||(g=[]):(g=g||[]).push(_e,null));for(_e in c){var $=c[_e];if(j=d!=null?d[_e]:void 0,c.hasOwnProperty(_e)&&$!==j&&($!=null||j!=null))if(_e==="style")if(j){for(b in j)!j.hasOwnProperty(b)||$&&$.hasOwnProperty(b)||(a||(a={}),a[b]="");for(b in $)$.hasOwnProperty(b)&&j[b]!==$[b]&&(a||(a={}),a[b]=$[b])}else a||(g||(g=[]),g.push(_e,a)),a=$;else _e==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,j=j?j.__html:void 0,$!=null&&j!==$&&(g=g||[]).push(_e,$)):_e==="children"?typeof $!="string"&&typeof $!="number"||(g=g||[]).push(_e,""+$):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(_e)?($!=null&&_e==="onScroll"&&D$1("scroll",e),g||j===$||(g=[])):(g=g||[]).push(_e,$))}a&&(g=g||[]).push("style",a);var _e=g;(o.updateQueue=_e)&&(o.flags|=4)}};Dj$1=function(e,o,a,c){a!==c&&(o.flags|=4)};function Ej$1(e,o){if(!I$1)switch(e.tailMode){case"hidden":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function S$1(e){var o=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(o)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=c,e.childLanes=a,o}function Fj$1(e,o,a){var c=o.pendingProps;switch(wg$1(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(o),null;case 1:return Zf$1(o.type)&&$f$1(),S$1(o),null;case 3:return c=o.stateNode,Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Gg$1(o)?o.flags|=4:e===null||e.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg$1!==null&&(Gj$1(zg$1),zg$1=null))),Bj$1(e,o),S$1(o),null;case 5:Lh$1(o);var d=Hh$1(Gh$1.current);if(a=o.type,e!==null&&o.stateNode!=null)Cj$1(e,o,a,c,d),e.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!c){if(o.stateNode===null)throw Error(p$1(166));return S$1(o),null}if(e=Hh$1(Eh$1.current),Gg$1(o)){c=o.stateNode,a=o.type;var g=o.memoizedProps;switch(c[Of$1]=o,c[Pf$1]=g,e=(o.mode&1)!==0,a){case"dialog":D$1("cancel",c),D$1("close",c);break;case"iframe":case"object":case"embed":D$1("load",c);break;case"video":case"audio":for(d=0;d<lf$1.length;d++)D$1(lf$1[d],c);break;case"source":D$1("error",c);break;case"img":case"image":case"link":D$1("error",c),D$1("load",c);break;case"details":D$1("toggle",c);break;case"input":Za$1(c,g),D$1("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},D$1("invalid",c);break;case"textarea":hb$1(c,g),D$1("invalid",c)}ub$1(a,g),d=null;for(var b in g)if(g.hasOwnProperty(b)){var j=g[b];b==="children"?typeof j=="string"?c.textContent!==j&&(g.suppressHydrationWarning!==!0&&Af$1(c.textContent,j,e),d=["children",j]):typeof j=="number"&&c.textContent!==""+j&&(g.suppressHydrationWarning!==!0&&Af$1(c.textContent,j,e),d=["children",""+j]):ea$1.hasOwnProperty(b)&&j!=null&&b==="onScroll"&&D$1("scroll",c)}switch(a){case"input":Va$1(c),db$1(c,g,!0);break;case"textarea":Va$1(c),jb$1(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Bf$1)}c=d,o.updateQueue=c,c!==null&&(o.flags|=4)}else{b=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb$1(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=b.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=b.createElement(a,{is:c.is}):(e=b.createElement(a),a==="select"&&(b=e,c.multiple?b.multiple=!0:c.size&&(b.size=c.size))):e=b.createElementNS(e,a),e[Of$1]=o,e[Pf$1]=c,Aj$1(e,o,!1,!1),o.stateNode=e;e:{switch(b=vb$1(a,c),a){case"dialog":D$1("cancel",e),D$1("close",e),d=c;break;case"iframe":case"object":case"embed":D$1("load",e),d=c;break;case"video":case"audio":for(d=0;d<lf$1.length;d++)D$1(lf$1[d],e);d=c;break;case"source":D$1("error",e),d=c;break;case"img":case"image":case"link":D$1("error",e),D$1("load",e),d=c;break;case"details":D$1("toggle",e),d=c;break;case"input":Za$1(e,c),d=Ya$1(e,c),D$1("invalid",e);break;case"option":d=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},d=A$1({},c,{value:void 0}),D$1("invalid",e);break;case"textarea":hb$1(e,c),d=gb$1(e,c),D$1("invalid",e);break;default:d=c}ub$1(a,d),j=d;for(g in j)if(j.hasOwnProperty(g)){var $=j[g];g==="style"?sb(e,$):g==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&nb(e,$)):g==="children"?typeof $=="string"?(a!=="textarea"||$!=="")&&ob$1(e,$):typeof $=="number"&&ob$1(e,""+$):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea$1.hasOwnProperty(g)?$!=null&&g==="onScroll"&&D$1("scroll",e):$!=null&&ta$1(e,g,$,b))}switch(a){case"input":Va$1(e),db$1(e,c,!1);break;case"textarea":Va$1(e),jb$1(e);break;case"option":c.value!=null&&e.setAttribute("value",""+Sa$1(c.value));break;case"select":e.multiple=!!c.multiple,g=c.value,g!=null?fb(e,!!c.multiple,g,!1):c.defaultValue!=null&&fb(e,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Bf$1)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S$1(o),null;case 6:if(e&&o.stateNode!=null)Dj$1(e,o,e.memoizedProps,c);else{if(typeof c!="string"&&o.stateNode===null)throw Error(p$1(166));if(a=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg$1(o)){if(c=o.stateNode,a=o.memoizedProps,c[Of$1]=o,(g=c.nodeValue!==a)&&(e=xg$1,e!==null))switch(e.tag){case 3:Af$1(c.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af$1(c.nodeValue,a,(e.mode&1)!==0)}g&&(o.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Of$1]=o,o.stateNode=c}return S$1(o),null;case 13:if(E$1(M$1),c=o.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I$1&&yg$1!==null&&o.mode&1&&!(o.flags&128))Hg$1(),Ig$1(),o.flags|=98560,g=!1;else if(g=Gg$1(o),c!==null&&c.dehydrated!==null){if(e===null){if(!g)throw Error(p$1(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(p$1(317));g[Of$1]=o}else Ig$1(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S$1(o),g=!1}else zg$1!==null&&(Gj$1(zg$1),zg$1=null),g=!0;if(!g)return o.flags&65536?o:null}return o.flags&128?(o.lanes=a,o):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(o.child.flags|=8192,o.mode&1&&(e===null||M$1.current&1?T$1===0&&(T$1=3):uj$1())),o.updateQueue!==null&&(o.flags|=4),S$1(o),null);case 4:return Jh$1(),Bj$1(e,o),e===null&&sf$1(o.stateNode.containerInfo),S$1(o),null;case 10:return Rg$1(o.type._context),S$1(o),null;case 17:return Zf$1(o.type)&&$f$1(),S$1(o),null;case 19:if(E$1(M$1),g=o.memoizedState,g===null)return S$1(o),null;if(c=(o.flags&128)!==0,b=g.rendering,b===null)if(c)Ej$1(g,!1);else{if(T$1!==0||e!==null&&e.flags&128)for(e=o.child;e!==null;){if(b=Mh$1(e),b!==null){for(o.flags|=128,Ej$1(g,!1),c=b.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),o.subtreeFlags=0,c=a,a=o.child;a!==null;)g=a,e=c,g.flags&=14680066,b=g.alternate,b===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=b.childLanes,g.lanes=b.lanes,g.child=b.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=b.memoizedProps,g.memoizedState=b.memoizedState,g.updateQueue=b.updateQueue,g.type=b.type,e=b.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return G$1(M$1,M$1.current&1|2),o.child}e=e.sibling}g.tail!==null&&B$1()>Hj$1&&(o.flags|=128,c=!0,Ej$1(g,!1),o.lanes=4194304)}else{if(!c)if(e=Mh$1(b),e!==null){if(o.flags|=128,c=!0,a=e.updateQueue,a!==null&&(o.updateQueue=a,o.flags|=4),Ej$1(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!I$1)return S$1(o),null}else 2*B$1()-g.renderingStartTime>Hj$1&&a!==1073741824&&(o.flags|=128,c=!0,Ej$1(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(a=g.last,a!==null?a.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=B$1(),o.sibling=null,a=M$1.current,G$1(M$1,c?a&1|2:a&1),o):(S$1(o),null);case 22:case 23:return Ij$1(),c=o.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(o.flags|=8192),c&&o.mode&1?gj$1&1073741824&&(S$1(o),o.subtreeFlags&6&&(o.flags|=8192)):S$1(o),null;case 24:return null;case 25:return null}throw Error(p$1(156,o.tag))}function Jj$1(e,o){switch(wg$1(o),o.tag){case 1:return Zf$1(o.type)&&$f$1(),e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 3:return Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),e=o.flags,e&65536&&!(e&128)?(o.flags=e&-65537|128,o):null;case 5:return Lh$1(o),null;case 13:if(E$1(M$1),e=o.memoizedState,e!==null&&e.dehydrated!==null){if(o.alternate===null)throw Error(p$1(340));Ig$1()}return e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 19:return E$1(M$1),null;case 4:return Jh$1(),null;case 10:return Rg$1(o.type._context),null;case 22:case 23:return Ij$1(),null;case 24:return null;default:return null}}var Kj$1=!1,U$1=!1,Lj$1=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj$1(e,o){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){W$1(e,o,c)}else a.current=null}function Nj$1(e,o,a){try{a()}catch(c){W$1(e,o,c)}}var Oj$1=!1;function Pj$1(e,o){if(Cf$1=dd$1,e=Me$1(),Ne(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var b=0,j=-1,$=-1,_e=0,st=0,rt=e,ut=null;t:for(;;){for(var gt;rt!==a||d!==0&&rt.nodeType!==3||(j=b+d),rt!==g||c!==0&&rt.nodeType!==3||($=b+c),rt.nodeType===3&&(b+=rt.nodeValue.length),(gt=rt.firstChild)!==null;)ut=rt,rt=gt;for(;;){if(rt===e)break t;if(ut===a&&++_e===d&&(j=b),ut===g&&++st===c&&($=b),(gt=rt.nextSibling)!==null)break;rt=ut,ut=rt.parentNode}rt=gt}a=j===-1||$===-1?null:{start:j,end:$}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df$1={focusedElem:e,selectionRange:a},dd$1=!1,V$1=o;V$1!==null;)if(o=V$1,e=o.child,(o.subtreeFlags&1028)!==0&&e!==null)e.return=o,V$1=e;else for(;V$1!==null;){o=V$1;try{var yt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var wt=yt.memoizedProps,Ct=yt.memoizedState,Pt=o.stateNode,At=Pt.getSnapshotBeforeUpdate(o.elementType===o.type?wt:Lg$1(o.type,wt),Ct);Pt.__reactInternalSnapshotBeforeUpdate=At}break;case 3:var Tt=o.stateNode.containerInfo;Tt.nodeType===1?Tt.textContent="":Tt.nodeType===9&&Tt.documentElement&&Tt.removeChild(Tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(kt){W$1(o,o.return,kt)}if(e=o.sibling,e!==null){e.return=o.return,V$1=e;break}V$1=o.return}return yt=Oj$1,Oj$1=!1,yt}function Qj$1(e,o,a){var c=o.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&e)===e){var g=d.destroy;d.destroy=void 0,g!==void 0&&Nj$1(o,a,g)}d=d.next}while(d!==c)}}function Rj$1(e,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&e)===e){var c=a.create;a.destroy=c()}a=a.next}while(a!==o)}}function Sj$1(e){var o=e.ref;if(o!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof o=="function"?o(e):o.current=e}}function Tj$1(e){var o=e.alternate;o!==null&&(e.alternate=null,Tj$1(o)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(o=e.stateNode,o!==null&&(delete o[Of$1],delete o[Pf$1],delete o[of$1],delete o[Qf$1],delete o[Rf$1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj$1(e){return e.tag===5||e.tag===3||e.tag===4}function Vj$1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj$1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj$1(e,o,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,o?a.nodeType===8?a.parentNode.insertBefore(e,o):a.insertBefore(e,o):(a.nodeType===8?(o=a.parentNode,o.insertBefore(e,a)):(o=a,o.appendChild(e)),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Bf$1));else if(c!==4&&(e=e.child,e!==null))for(Wj$1(e,o,a),e=e.sibling;e!==null;)Wj$1(e,o,a),e=e.sibling}function Xj$1(e,o,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,o?a.insertBefore(e,o):a.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(Xj$1(e,o,a),e=e.sibling;e!==null;)Xj$1(e,o,a),e=e.sibling}var X$2=null,Yj$1=!1;function Zj$1(e,o,a){for(a=a.child;a!==null;)ak$1(e,o,a),a=a.sibling}function ak$1(e,o,a){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,a)}catch{}switch(a.tag){case 5:U$1||Mj$1(a,o);case 6:var c=X$2,d=Yj$1;X$2=null,Zj$1(e,o,a),X$2=c,Yj$1=d,X$2!==null&&(Yj$1?(e=X$2,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):X$2.removeChild(a.stateNode));break;case 18:X$2!==null&&(Yj$1?(e=X$2,a=a.stateNode,e.nodeType===8?Kf$1(e.parentNode,a):e.nodeType===1&&Kf$1(e,a),bd$1(e)):Kf$1(X$2,a.stateNode));break;case 4:c=X$2,d=Yj$1,X$2=a.stateNode.containerInfo,Yj$1=!0,Zj$1(e,o,a),X$2=c,Yj$1=d;break;case 0:case 11:case 14:case 15:if(!U$1&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,b=g.destroy;g=g.tag,b!==void 0&&(g&2||g&4)&&Nj$1(a,o,b),d=d.next}while(d!==c)}Zj$1(e,o,a);break;case 1:if(!U$1&&(Mj$1(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(j){W$1(a,o,j)}Zj$1(e,o,a);break;case 21:Zj$1(e,o,a);break;case 22:a.mode&1?(U$1=(c=U$1)||a.memoizedState!==null,Zj$1(e,o,a),U$1=c):Zj$1(e,o,a);break;default:Zj$1(e,o,a)}}function bk$1(e){var o=e.updateQueue;if(o!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Lj$1),o.forEach(function(c){var d=ck$1.bind(null,e,c);a.has(c)||(a.add(c),c.then(d,d))})}}function dk$1(e,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=e,b=o,j=b;e:for(;j!==null;){switch(j.tag){case 5:X$2=j.stateNode,Yj$1=!1;break e;case 3:X$2=j.stateNode.containerInfo,Yj$1=!0;break e;case 4:X$2=j.stateNode.containerInfo,Yj$1=!0;break e}j=j.return}if(X$2===null)throw Error(p$1(160));ak$1(g,b,d),X$2=null,Yj$1=!1;var $=d.alternate;$!==null&&($.return=null),d.return=null}catch(_e){W$1(d,o,_e)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek$1(o,e),o=o.sibling}function ek$1(e,o){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk$1(o,e),fk$1(e),c&4){try{Qj$1(3,e,e.return),Rj$1(3,e)}catch(wt){W$1(e,e.return,wt)}try{Qj$1(5,e,e.return)}catch(wt){W$1(e,e.return,wt)}}break;case 1:dk$1(o,e),fk$1(e),c&512&&a!==null&&Mj$1(a,a.return);break;case 5:if(dk$1(o,e),fk$1(e),c&512&&a!==null&&Mj$1(a,a.return),e.flags&32){var d=e.stateNode;try{ob$1(d,"")}catch(wt){W$1(e,e.return,wt)}}if(c&4&&(d=e.stateNode,d!=null)){var g=e.memoizedProps,b=a!==null?a.memoizedProps:g,j=e.type,$=e.updateQueue;if(e.updateQueue=null,$!==null)try{j==="input"&&g.type==="radio"&&g.name!=null&&ab$1(d,g),vb$1(j,b);var _e=vb$1(j,g);for(b=0;b<$.length;b+=2){var st=$[b],rt=$[b+1];st==="style"?sb(d,rt):st==="dangerouslySetInnerHTML"?nb(d,rt):st==="children"?ob$1(d,rt):ta$1(d,st,rt,_e)}switch(j){case"input":bb$1(d,g);break;case"textarea":ib$1(d,g);break;case"select":var ut=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var gt=g.value;gt!=null?fb(d,!!g.multiple,gt,!1):ut!==!!g.multiple&&(g.defaultValue!=null?fb(d,!!g.multiple,g.defaultValue,!0):fb(d,!!g.multiple,g.multiple?[]:"",!1))}d[Pf$1]=g}catch(wt){W$1(e,e.return,wt)}}break;case 6:if(dk$1(o,e),fk$1(e),c&4){if(e.stateNode===null)throw Error(p$1(162));d=e.stateNode,g=e.memoizedProps;try{d.nodeValue=g}catch(wt){W$1(e,e.return,wt)}}break;case 3:if(dk$1(o,e),fk$1(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{bd$1(o.containerInfo)}catch(wt){W$1(e,e.return,wt)}break;case 4:dk$1(o,e),fk$1(e);break;case 13:dk$1(o,e),fk$1(e),d=e.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(gk$1=B$1())),c&4&&bk$1(e);break;case 22:if(st=a!==null&&a.memoizedState!==null,e.mode&1?(U$1=(_e=U$1)||st,dk$1(o,e),U$1=_e):dk$1(o,e),fk$1(e),c&8192){if(_e=e.memoizedState!==null,(e.stateNode.isHidden=_e)&&!st&&e.mode&1)for(V$1=e,st=e.child;st!==null;){for(rt=V$1=st;V$1!==null;){switch(ut=V$1,gt=ut.child,ut.tag){case 0:case 11:case 14:case 15:Qj$1(4,ut,ut.return);break;case 1:Mj$1(ut,ut.return);var yt=ut.stateNode;if(typeof yt.componentWillUnmount=="function"){c=ut,a=ut.return;try{o=c,yt.props=o.memoizedProps,yt.state=o.memoizedState,yt.componentWillUnmount()}catch(wt){W$1(c,a,wt)}}break;case 5:Mj$1(ut,ut.return);break;case 22:if(ut.memoizedState!==null){hk$1(rt);continue}}gt!==null?(gt.return=ut,V$1=gt):hk$1(rt)}st=st.sibling}e:for(st=null,rt=e;;){if(rt.tag===5){if(st===null){st=rt;try{d=rt.stateNode,_e?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(j=rt.stateNode,$=rt.memoizedProps.style,b=$!=null&&$.hasOwnProperty("display")?$.display:null,j.style.display=rb$1("display",b))}catch(wt){W$1(e,e.return,wt)}}}else if(rt.tag===6){if(st===null)try{rt.stateNode.nodeValue=_e?"":rt.memoizedProps}catch(wt){W$1(e,e.return,wt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===e)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===e)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===e)break e;st===rt&&(st=null),rt=rt.return}st===rt&&(st=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:dk$1(o,e),fk$1(e),c&4&&bk$1(e);break;case 21:break;default:dk$1(o,e),fk$1(e)}}function fk$1(e){var o=e.flags;if(o&2){try{e:{for(var a=e.return;a!==null;){if(Uj$1(a)){var c=a;break e}a=a.return}throw Error(p$1(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ob$1(d,""),c.flags&=-33);var g=Vj$1(e);Xj$1(e,g,d);break;case 3:case 4:var b=c.stateNode.containerInfo,j=Vj$1(e);Wj$1(e,j,b);break;default:throw Error(p$1(161))}}catch($){W$1(e,e.return,$)}e.flags&=-3}o&4096&&(e.flags&=-4097)}function ik$1(e,o,a){V$1=e,jk$1(e)}function jk$1(e,o,a){for(var c=(e.mode&1)!==0;V$1!==null;){var d=V$1,g=d.child;if(d.tag===22&&c){var b=d.memoizedState!==null||Kj$1;if(!b){var j=d.alternate,$=j!==null&&j.memoizedState!==null||U$1;j=Kj$1;var _e=U$1;if(Kj$1=b,(U$1=$)&&!_e)for(V$1=d;V$1!==null;)b=V$1,$=b.child,b.tag===22&&b.memoizedState!==null?kk$1(d):$!==null?($.return=b,V$1=$):kk$1(d);for(;g!==null;)V$1=g,jk$1(g),g=g.sibling;V$1=d,Kj$1=j,U$1=_e}lk$1(e)}else d.subtreeFlags&8772&&g!==null?(g.return=d,V$1=g):lk$1(e)}}function lk$1(e){for(;V$1!==null;){var o=V$1;if(o.flags&8772){var a=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U$1||Rj$1(5,o);break;case 1:var c=o.stateNode;if(o.flags&4&&!U$1)if(a===null)c.componentDidMount();else{var d=o.elementType===o.type?a.memoizedProps:Lg$1(o.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=o.updateQueue;g!==null&&ih$1(o,g,c);break;case 3:var b=o.updateQueue;if(b!==null){if(a=null,o.child!==null)switch(o.child.tag){case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}ih$1(o,b,a)}break;case 5:var j=o.stateNode;if(a===null&&o.flags&4){a=j;var $=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&a.focus();break;case"img":$.src&&(a.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _e=o.alternate;if(_e!==null){var st=_e.memoizedState;if(st!==null){var rt=st.dehydrated;rt!==null&&bd$1(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||o.flags&512&&Sj$1(o)}catch(ut){W$1(o,o.return,ut)}}if(o===e){V$1=null;break}if(a=o.sibling,a!==null){a.return=o.return,V$1=a;break}V$1=o.return}}function hk$1(e){for(;V$1!==null;){var o=V$1;if(o===e){V$1=null;break}var a=o.sibling;if(a!==null){a.return=o.return,V$1=a;break}V$1=o.return}}function kk$1(e){for(;V$1!==null;){var o=V$1;try{switch(o.tag){case 0:case 11:case 15:var a=o.return;try{Rj$1(4,o)}catch($){W$1(o,a,$)}break;case 1:var c=o.stateNode;if(typeof c.componentDidMount=="function"){var d=o.return;try{c.componentDidMount()}catch($){W$1(o,d,$)}}var g=o.return;try{Sj$1(o)}catch($){W$1(o,g,$)}break;case 5:var b=o.return;try{Sj$1(o)}catch($){W$1(o,b,$)}}}catch($){W$1(o,o.return,$)}if(o===e){V$1=null;break}var j=o.sibling;if(j!==null){j.return=o.return,V$1=j;break}V$1=o.return}}var mk$1=Math.ceil,nk$1=ua$1.ReactCurrentDispatcher,ok$1=ua$1.ReactCurrentOwner,pk$1=ua$1.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$2=0,gj$1=0,fj$1=Uf$1(0),T$1=0,qk$1=null,hh$1=0,rk$1=0,sk$1=0,tk$1=null,uk$1=null,gk$1=0,Hj$1=1/0,vk$1=null,Pi$1=!1,Qi$1=null,Si=null,wk$1=!1,xk$1=null,yk$1=0,zk$1=0,Ak$1=null,Bk$1=-1,Ck$1=0;function L$1(){return K$1&6?B$1():Bk$1!==-1?Bk$1:Bk$1=B$1()}function lh$1(e){return e.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg$1.transition!==null?(Ck$1===0&&(Ck$1=yc$1()),Ck$1):(e=C$1,e!==0||(e=window.event,e=e===void 0?16:jd$1(e.type)),e):1}function mh$1(e,o,a,c){if(50<zk$1)throw zk$1=0,Ak$1=null,Error(p$1(185));Ac$1(e,a,c),(!(K$1&2)||e!==R$1)&&(e===R$1&&(!(K$1&2)&&(rk$1|=a),T$1===4&&Dk$1(e,Z$2)),Ek$1(e,c),a===1&&K$1===0&&!(o.mode&1)&&(Hj$1=B$1()+500,fg$1&&jg$1()))}function Ek$1(e,o){var a=e.callbackNode;wc$1(e,o);var c=uc$1(e,e===R$1?Z$2:0);if(c===0)a!==null&&bc$1(a),e.callbackNode=null,e.callbackPriority=0;else if(o=c&-c,e.callbackPriority!==o){if(a!=null&&bc$1(a),o===1)e.tag===0?ig$1(Fk$1.bind(null,e)):hg$1(Fk$1.bind(null,e)),Jf$1(function(){!(K$1&6)&&jg$1()}),a=null;else{switch(Dc$1(c)){case 1:a=fc$1;break;case 4:a=gc$1;break;case 16:a=hc$1;break;case 536870912:a=jc$1;break;default:a=hc$1}a=Gk$1(a,Hk$1.bind(null,e))}e.callbackPriority=o,e.callbackNode=a}}function Hk$1(e,o){if(Bk$1=-1,Ck$1=0,K$1&6)throw Error(p$1(327));var a=e.callbackNode;if(Ik$1()&&e.callbackNode!==a)return null;var c=uc$1(e,e===R$1?Z$2:0);if(c===0)return null;if(c&30||c&e.expiredLanes||o)o=Jk$1(e,c);else{o=c;var d=K$1;K$1|=2;var g=Kk$1();(R$1!==e||Z$2!==o)&&(vk$1=null,Hj$1=B$1()+500,Lk$1(e,o));do try{Mk$1();break}catch(j){Nk$1(e,j)}while(!0);Qg$1(),nk$1.current=g,K$1=d,Y$1!==null?o=0:(R$1=null,Z$2=0,o=T$1)}if(o!==0){if(o===2&&(d=xc$1(e),d!==0&&(c=d,o=Ok$1(e,d))),o===1)throw a=qk$1,Lk$1(e,0),Dk$1(e,c),Ek$1(e,B$1()),a;if(o===6)Dk$1(e,c);else{if(d=e.current.alternate,!(c&30)&&!Pk$1(d)&&(o=Jk$1(e,c),o===2&&(g=xc$1(e),g!==0&&(c=g,o=Ok$1(e,g))),o===1))throw a=qk$1,Lk$1(e,0),Dk$1(e,c),Ek$1(e,B$1()),a;switch(e.finishedWork=d,e.finishedLanes=c,o){case 0:case 1:throw Error(p$1(345));case 2:Qk$1(e,uk$1,vk$1);break;case 3:if(Dk$1(e,c),(c&130023424)===c&&(o=gk$1+500-B$1(),10<o)){if(uc$1(e,0)!==0)break;if(d=e.suspendedLanes,(d&c)!==c){L$1(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Ff$1(Qk$1.bind(null,e,uk$1,vk$1),o);break}Qk$1(e,uk$1,vk$1);break;case 4:if(Dk$1(e,c),(c&4194240)===c)break;for(o=e.eventTimes,d=-1;0<c;){var b=31-oc$1(c);g=1<<b,b=o[b],b>d&&(d=b),c&=~g}if(c=d,c=B$1()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*mk$1(c/1960))-c,10<c){e.timeoutHandle=Ff$1(Qk$1.bind(null,e,uk$1,vk$1),c);break}Qk$1(e,uk$1,vk$1);break;case 5:Qk$1(e,uk$1,vk$1);break;default:throw Error(p$1(329))}}}return Ek$1(e,B$1()),e.callbackNode===a?Hk$1.bind(null,e):null}function Ok$1(e,o){var a=tk$1;return e.current.memoizedState.isDehydrated&&(Lk$1(e,o).flags|=256),e=Jk$1(e,o),e!==2&&(o=uk$1,uk$1=a,o!==null&&Gj$1(o)),e}function Gj$1(e){uk$1===null?uk$1=e:uk$1.push.apply(uk$1,e)}function Pk$1(e){for(var o=e;;){if(o.flags&16384){var a=o.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!He(g(),d))return!1}catch{return!1}}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk$1(e,o){for(o&=~sk$1,o&=~rk$1,e.suspendedLanes|=o,e.pingedLanes&=~o,e=e.expirationTimes;0<o;){var a=31-oc$1(o),c=1<<a;e[a]=-1,o&=~c}}function Fk$1(e){if(K$1&6)throw Error(p$1(327));Ik$1();var o=uc$1(e,0);if(!(o&1))return Ek$1(e,B$1()),null;var a=Jk$1(e,o);if(e.tag!==0&&a===2){var c=xc$1(e);c!==0&&(o=c,a=Ok$1(e,c))}if(a===1)throw a=qk$1,Lk$1(e,0),Dk$1(e,o),Ek$1(e,B$1()),a;if(a===6)throw Error(p$1(345));return e.finishedWork=e.current.alternate,e.finishedLanes=o,Qk$1(e,uk$1,vk$1),Ek$1(e,B$1()),null}function Rk$1(e,o){var a=K$1;K$1|=1;try{return e(o)}finally{K$1=a,K$1===0&&(Hj$1=B$1()+500,fg$1&&jg$1())}}function Sk$1(e){xk$1!==null&&xk$1.tag===0&&!(K$1&6)&&Ik$1();var o=K$1;K$1|=1;var a=pk$1.transition,c=C$1;try{if(pk$1.transition=null,C$1=1,e)return e()}finally{C$1=c,pk$1.transition=a,K$1=o,!(K$1&6)&&jg$1()}}function Ij$1(){gj$1=fj$1.current,E$1(fj$1)}function Lk$1(e,o){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,Gf$1(a)),Y$1!==null)for(a=Y$1.return;a!==null;){var c=a;switch(wg$1(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&$f$1();break;case 3:Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1();break;case 5:Lh$1(c);break;case 4:Jh$1();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg$1(c.type._context);break;case 22:case 23:Ij$1()}a=a.return}if(R$1=e,Y$1=e=wh$1(e.current,null),Z$2=gj$1=o,T$1=0,qk$1=null,sk$1=rk$1=hh$1=0,uk$1=tk$1=null,Wg$1!==null){for(o=0;o<Wg$1.length;o++)if(a=Wg$1[o],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var b=g.next;g.next=d,c.next=b}a.pending=c}Wg$1=null}return e}function Nk$1(e,o){do{var a=Y$1;try{if(Qg$1(),Ph$1.current=ai$1,Sh$1){for(var c=N$1.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Sh$1=!1}if(Rh$1=0,P$1=O$1=N$1=null,Th$1=!1,Uh$1=0,ok$1.current=null,a===null||a.return===null){T$1=1,qk$1=o,Y$1=null;break}e:{var g=e,b=a.return,j=a,$=o;if(o=Z$2,j.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var _e=$,st=j,rt=st.tag;if(!(st.mode&1)&&(rt===0||rt===11||rt===15)){var ut=st.alternate;ut?(st.updateQueue=ut.updateQueue,st.memoizedState=ut.memoizedState,st.lanes=ut.lanes):(st.updateQueue=null,st.memoizedState=null)}var gt=Vi$1(b);if(gt!==null){gt.flags&=-257,Wi$1(gt,b,j,g,o),gt.mode&1&&Ti$1(g,_e,o),o=gt,$=_e;var yt=o.updateQueue;if(yt===null){var wt=new Set;wt.add($),o.updateQueue=wt}else yt.add($);break e}else{if(!(o&1)){Ti$1(g,_e,o),uj$1();break e}$=Error(p$1(426))}}else if(I$1&&j.mode&1){var Ct=Vi$1(b);if(Ct!==null){!(Ct.flags&65536)&&(Ct.flags|=256),Wi$1(Ct,b,j,g,o),Jg$1(Ki$1($,j));break e}}g=$=Ki$1($,j),T$1!==4&&(T$1=2),tk$1===null?tk$1=[g]:tk$1.push(g),g=b;do{switch(g.tag){case 3:g.flags|=65536,o&=-o,g.lanes|=o;var Pt=Oi$1(g,$,o);fh$1(g,Pt);break e;case 1:j=$;var At=g.type,Tt=g.stateNode;if(!(g.flags&128)&&(typeof At.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(Si===null||!Si.has(Tt)))){g.flags|=65536,o&=-o,g.lanes|=o;var kt=Ri$1(g,j,o);fh$1(g,kt);break e}}g=g.return}while(g!==null)}Tk$1(a)}catch(It){o=It,Y$1===a&&a!==null&&(Y$1=a=a.return);continue}break}while(!0)}function Kk$1(){var e=nk$1.current;return nk$1.current=ai$1,e===null?ai$1:e}function uj$1(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh$1&268435455)&&!(rk$1&268435455)||Dk$1(R$1,Z$2)}function Jk$1(e,o){var a=K$1;K$1|=2;var c=Kk$1();(R$1!==e||Z$2!==o)&&(vk$1=null,Lk$1(e,o));do try{Uk$1();break}catch(d){Nk$1(e,d)}while(!0);if(Qg$1(),K$1=a,nk$1.current=c,Y$1!==null)throw Error(p$1(261));return R$1=null,Z$2=0,T$1}function Uk$1(){for(;Y$1!==null;)Vk$1(Y$1)}function Mk$1(){for(;Y$1!==null&&!cc$1();)Vk$1(Y$1)}function Vk$1(e){var o=Wk$1(e.alternate,e,gj$1);e.memoizedProps=e.pendingProps,o===null?Tk$1(e):Y$1=o,ok$1.current=null}function Tk$1(e){var o=e;do{var a=o.alternate;if(e=o.return,o.flags&32768){if(a=Jj$1(a,o),a!==null){a.flags&=32767,Y$1=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T$1=6,Y$1=null;return}}else if(a=Fj$1(a,o,gj$1),a!==null){Y$1=a;return}if(o=o.sibling,o!==null){Y$1=o;return}Y$1=o=e}while(o!==null);T$1===0&&(T$1=5)}function Qk$1(e,o,a){var c=C$1,d=pk$1.transition;try{pk$1.transition=null,C$1=1,Xk$1(e,o,a,c)}finally{pk$1.transition=d,C$1=c}return null}function Xk$1(e,o,a,c){do Ik$1();while(xk$1!==null);if(K$1&6)throw Error(p$1(327));a=e.finishedWork;var d=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(p$1(177));e.callbackNode=null,e.callbackPriority=0;var g=a.lanes|a.childLanes;if(Bc$1(e,g),e===R$1&&(Y$1=R$1=null,Z$2=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||wk$1||(wk$1=!0,Gk$1(hc$1,function(){return Ik$1(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=pk$1.transition,pk$1.transition=null;var b=C$1;C$1=1;var j=K$1;K$1|=4,ok$1.current=null,Pj$1(e,a),ek$1(a,e),Oe(Df$1),dd$1=!!Cf$1,Df$1=Cf$1=null,e.current=a,ik$1(a),dc$1(),K$1=j,C$1=b,pk$1.transition=g}else e.current=a;if(wk$1&&(wk$1=!1,xk$1=e,yk$1=d),g=e.pendingLanes,g===0&&(Si=null),mc$1(a.stateNode),Ek$1(e,B$1()),o!==null)for(c=e.onRecoverableError,a=0;a<o.length;a++)d=o[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Pi$1)throw Pi$1=!1,e=Qi$1,Qi$1=null,e;return yk$1&1&&e.tag!==0&&Ik$1(),g=e.pendingLanes,g&1?e===Ak$1?zk$1++:(zk$1=0,Ak$1=e):zk$1=0,jg$1(),null}function Ik$1(){if(xk$1!==null){var e=Dc$1(yk$1),o=pk$1.transition,a=C$1;try{if(pk$1.transition=null,C$1=16>e?16:e,xk$1===null)var c=!1;else{if(e=xk$1,xk$1=null,yk$1=0,K$1&6)throw Error(p$1(331));var d=K$1;for(K$1|=4,V$1=e.current;V$1!==null;){var g=V$1,b=g.child;if(V$1.flags&16){var j=g.deletions;if(j!==null){for(var $=0;$<j.length;$++){var _e=j[$];for(V$1=_e;V$1!==null;){var st=V$1;switch(st.tag){case 0:case 11:case 15:Qj$1(8,st,g)}var rt=st.child;if(rt!==null)rt.return=st,V$1=rt;else for(;V$1!==null;){st=V$1;var ut=st.sibling,gt=st.return;if(Tj$1(st),st===_e){V$1=null;break}if(ut!==null){ut.return=gt,V$1=ut;break}V$1=gt}}}var yt=g.alternate;if(yt!==null){var wt=yt.child;if(wt!==null){yt.child=null;do{var Ct=wt.sibling;wt.sibling=null,wt=Ct}while(wt!==null)}}V$1=g}}if(g.subtreeFlags&2064&&b!==null)b.return=g,V$1=b;else e:for(;V$1!==null;){if(g=V$1,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Qj$1(9,g,g.return)}var Pt=g.sibling;if(Pt!==null){Pt.return=g.return,V$1=Pt;break e}V$1=g.return}}var At=e.current;for(V$1=At;V$1!==null;){b=V$1;var Tt=b.child;if(b.subtreeFlags&2064&&Tt!==null)Tt.return=b,V$1=Tt;else e:for(b=At;V$1!==null;){if(j=V$1,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Rj$1(9,j)}}catch(It){W$1(j,j.return,It)}if(j===b){V$1=null;break e}var kt=j.sibling;if(kt!==null){kt.return=j.return,V$1=kt;break e}V$1=j.return}}if(K$1=d,jg$1(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,e)}catch{}c=!0}return c}finally{C$1=a,pk$1.transition=o}}return!1}function Yk$1(e,o,a){o=Ki$1(a,o),o=Oi$1(e,o,1),e=dh$1(e,o,1),o=L$1(),e!==null&&(Ac$1(e,1,o),Ek$1(e,o))}function W$1(e,o,a){if(e.tag===3)Yk$1(e,e,a);else for(;o!==null;){if(o.tag===3){Yk$1(o,e,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Si===null||!Si.has(c))){e=Ki$1(a,e),e=Ri$1(o,e,1),o=dh$1(o,e,1),e=L$1(),o!==null&&(Ac$1(o,1,e),Ek$1(o,e));break}}o=o.return}}function Ui$1(e,o,a){var c=e.pingCache;c!==null&&c.delete(o),o=L$1(),e.pingedLanes|=e.suspendedLanes&a,R$1===e&&(Z$2&a)===a&&(T$1===4||T$1===3&&(Z$2&130023424)===Z$2&&500>B$1()-gk$1?Lk$1(e,0):sk$1|=a),Ek$1(e,o)}function Zk$1(e,o){o===0&&(e.mode&1?(o=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):o=1);var a=L$1();e=Zg$1(e,o),e!==null&&(Ac$1(e,o,a),Ek$1(e,a))}function vj$1(e){var o=e.memoizedState,a=0;o!==null&&(a=o.retryLane),Zk$1(e,a)}function ck$1(e,o){var a=0;switch(e.tag){case 13:var c=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(p$1(314))}c!==null&&c.delete(o),Zk$1(e,a)}var Wk$1;Wk$1=function(e,o,a){if(e!==null)if(e.memoizedProps!==o.pendingProps||Wf$1.current)Ug$1=!0;else{if(!(e.lanes&a)&&!(o.flags&128))return Ug$1=!1,zj$1(e,o,a);Ug$1=!!(e.flags&131072)}else Ug$1=!1,I$1&&o.flags&1048576&&ug$1(o,ng$1,o.index);switch(o.lanes=0,o.tag){case 2:var c=o.type;jj$1(e,o),e=o.pendingProps;var d=Yf$1(o,H$1.current);Tg$1(o,a),d=Xh$1(null,o,c,e,d,a);var g=bi$1();return o.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf$1(c)?(g=!0,cg$1(o)):g=!1,o.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ah$1(o),d.updater=nh$1,o.stateNode=d,d._reactInternals=o,rh$1(o,c,e,a),o=kj$1(null,o,c,!0,g,a)):(o.tag=0,I$1&&g&&vg$1(o),Yi$1(null,o,d,a),o=o.child),o;case 16:c=o.elementType;e:{switch(jj$1(e,o),e=o.pendingProps,d=c._init,c=d(c._payload),o.type=c,d=o.tag=$k$1(c),e=Lg$1(c,e),d){case 0:o=dj$1(null,o,c,e,a);break e;case 1:o=ij$1(null,o,c,e,a);break e;case 11:o=Zi$1(null,o,c,e,a);break e;case 14:o=aj$1(null,o,c,Lg$1(c.type,e),a);break e}throw Error(p$1(306,c,""))}return o;case 0:return c=o.type,d=o.pendingProps,d=o.elementType===c?d:Lg$1(c,d),dj$1(e,o,c,d,a);case 1:return c=o.type,d=o.pendingProps,d=o.elementType===c?d:Lg$1(c,d),ij$1(e,o,c,d,a);case 3:e:{if(lj$1(o),e===null)throw Error(p$1(387));c=o.pendingProps,g=o.memoizedState,d=g.element,bh$1(e,o),gh$1(o,c,null,a);var b=o.memoizedState;if(c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){d=Ki$1(Error(p$1(423)),o),o=mj$1(e,o,c,a,d);break e}else if(c!==d){d=Ki$1(Error(p$1(424)),o),o=mj$1(e,o,c,a,d);break e}else for(yg$1=Lf$1(o.stateNode.containerInfo.firstChild),xg$1=o,I$1=!0,zg$1=null,a=Ch$1(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ig$1(),c===d){o=$i$1(e,o,a);break e}Yi$1(e,o,c,a)}o=o.child}return o;case 5:return Kh$1(o),e===null&&Eg$1(o),c=o.type,d=o.pendingProps,g=e!==null?e.memoizedProps:null,b=d.children,Ef$1(c,d)?b=null:g!==null&&Ef$1(c,g)&&(o.flags|=32),hj$1(e,o),Yi$1(e,o,b,a),o.child;case 6:return e===null&&Eg$1(o),null;case 13:return pj$1(e,o,a);case 4:return Ih$1(o,o.stateNode.containerInfo),c=o.pendingProps,e===null?o.child=Bh$1(o,null,c,a):Yi$1(e,o,c,a),o.child;case 11:return c=o.type,d=o.pendingProps,d=o.elementType===c?d:Lg$1(c,d),Zi$1(e,o,c,d,a);case 7:return Yi$1(e,o,o.pendingProps,a),o.child;case 8:return Yi$1(e,o,o.pendingProps.children,a),o.child;case 12:return Yi$1(e,o,o.pendingProps.children,a),o.child;case 10:e:{if(c=o.type._context,d=o.pendingProps,g=o.memoizedProps,b=d.value,G$1(Mg$1,c._currentValue),c._currentValue=b,g!==null)if(He(g.value,b)){if(g.children===d.children&&!Wf$1.current){o=$i$1(e,o,a);break e}}else for(g=o.child,g!==null&&(g.return=o);g!==null;){var j=g.dependencies;if(j!==null){b=g.child;for(var $=j.firstContext;$!==null;){if($.context===c){if(g.tag===1){$=ch$1(-1,a&-a),$.tag=2;var _e=g.updateQueue;if(_e!==null){_e=_e.shared;var st=_e.pending;st===null?$.next=$:($.next=st.next,st.next=$),_e.pending=$}}g.lanes|=a,$=g.alternate,$!==null&&($.lanes|=a),Sg$1(g.return,a,o),j.lanes|=a;break}$=$.next}}else if(g.tag===10)b=g.type===o.type?null:g.child;else if(g.tag===18){if(b=g.return,b===null)throw Error(p$1(341));b.lanes|=a,j=b.alternate,j!==null&&(j.lanes|=a),Sg$1(b,a,o),b=g.sibling}else b=g.child;if(b!==null)b.return=g;else for(b=g;b!==null;){if(b===o){b=null;break}if(g=b.sibling,g!==null){g.return=b.return,b=g;break}b=b.return}g=b}Yi$1(e,o,d.children,a),o=o.child}return o;case 9:return d=o.type,c=o.pendingProps.children,Tg$1(o,a),d=Vg$1(d),c=c(d),o.flags|=1,Yi$1(e,o,c,a),o.child;case 14:return c=o.type,d=Lg$1(c,o.pendingProps),d=Lg$1(c.type,d),aj$1(e,o,c,d,a);case 15:return cj$1(e,o,o.type,o.pendingProps,a);case 17:return c=o.type,d=o.pendingProps,d=o.elementType===c?d:Lg$1(c,d),jj$1(e,o),o.tag=1,Zf$1(c)?(e=!0,cg$1(o)):e=!1,Tg$1(o,a),ph$1(o,c,d),rh$1(o,c,d,a),kj$1(null,o,c,!0,e,a);case 19:return yj$1(e,o,a);case 22:return ej$1(e,o,a)}throw Error(p$1(156,o.tag))};function Gk$1(e,o){return ac$1(e,o)}function al$1(e,o,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,o,a,c){return new al$1(e,o,a,c)}function bj$1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k$1(e){if(typeof e=="function")return bj$1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da$1)return 11;if(e===Ga$1)return 14}return 2}function wh$1(e,o){var a=e.alternate;return a===null?(a=Bg(e.tag,o,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=o,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,o=e.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function yh$1(e,o,a,c,d,g){var b=2;if(c=e,typeof e=="function")bj$1(e)&&(b=1);else if(typeof e=="string")b=5;else e:switch(e){case ya$1:return Ah$1(a.children,d,g,o);case za$1:b=8,d|=8;break;case Aa$1:return e=Bg(12,a,o,d|2),e.elementType=Aa$1,e.lanes=g,e;case Ea$1:return e=Bg(13,a,o,d),e.elementType=Ea$1,e.lanes=g,e;case Fa$1:return e=Bg(19,a,o,d),e.elementType=Fa$1,e.lanes=g,e;case Ia$1:return qj$1(a,d,g,o);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba$1:b=10;break e;case Ca$1:b=9;break e;case Da$1:b=11;break e;case Ga$1:b=14;break e;case Ha$1:b=16,c=null;break e}throw Error(p$1(130,e==null?e:typeof e,""))}return o=Bg(b,a,o,d),o.elementType=e,o.type=c,o.lanes=g,o}function Ah$1(e,o,a,c){return e=Bg(7,e,c,o),e.lanes=a,e}function qj$1(e,o,a,c){return e=Bg(22,e,c,o),e.elementType=Ia$1,e.lanes=a,e.stateNode={isHidden:!1},e}function xh$1(e,o,a){return e=Bg(6,e,null,o),e.lanes=a,e}function zh$1(e,o,a){return o=Bg(4,e.children!==null?e.children:[],e.key,o),o.lanes=a,o.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},o}function bl$1(e,o,a,c,d){this.tag=o,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function cl$1(e,o,a,c,d,g,b,j,$){return e=new bl$1(e,o,a,j,$),o===1?(o=1,g===!0&&(o|=8)):o=0,g=Bg(3,null,null,o),e.current=g,g.stateNode=e,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(g),e}function dl$1(e,o,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:c==null?null:""+c,children:e,containerInfo:o,implementation:a}}function el$1(e){if(!e)return Vf$1;e=e._reactInternals;e:{if(Vb$1(e)!==e||e.tag!==1)throw Error(p$1(170));var o=e;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf$1(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$1(171))}if(e.tag===1){var a=e.type;if(Zf$1(a))return bg$1(e,a,o)}return o}function fl$1(e,o,a,c,d,g,b,j,$){return e=cl$1(a,c,!0,e,d,g,b,j,$),e.context=el$1(null),a=e.current,c=L$1(),d=lh$1(a),g=ch$1(c,d),g.callback=o??null,dh$1(a,g,d),e.current.lanes=d,Ac$1(e,d,c),Ek$1(e,c),e}function gl$1(e,o,a,c){var d=o.current,g=L$1(),b=lh$1(d);return a=el$1(a),o.context===null?o.context=a:o.pendingContext=a,o=ch$1(g,b),o.payload={element:e},c=c===void 0?null:c,c!==null&&(o.callback=c),e=dh$1(d,o,b),e!==null&&(mh$1(e,d,b,g),eh$1(e,d,b)),b}function hl$1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il$1(e,o){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<o?a:o}}function jl(e,o){il$1(e,o),(e=e.alternate)&&il$1(e,o)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml$1(e){this._internalRoot=e}nl$1.prototype.render=ml$1.prototype.render=function(e){var o=this._internalRoot;if(o===null)throw Error(p$1(409));gl$1(e,o,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var o=e.containerInfo;Sk$1(function(){gl$1(null,e,null,null)}),o[uf$1]=null}};function nl$1(e){this._internalRoot=e}nl$1.prototype.unstable_scheduleHydration=function(e){if(e){var o=Hc$1();e={blockedOn:null,target:e,priority:o};for(var a=0;a<Qc$1.length&&o!==0&&o<Qc$1[a].priority;a++);Qc$1.splice(a,0,e),a===0&&Vc$1(e)}};function ol$1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl$1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql$1(){}function rl$1(e,o,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var _e=hl$1(b);g.call(_e)}}var b=fl$1(o,c,e,0,null,!1,!1,"",ql$1);return e._reactRootContainer=b,e[uf$1]=b.current,sf$1(e.nodeType===8?e.parentNode:e),Sk$1(),b}for(;d=e.lastChild;)e.removeChild(d);if(typeof c=="function"){var j=c;c=function(){var _e=hl$1($);j.call(_e)}}var $=cl$1(e,0,!1,null,null,!1,!1,"",ql$1);return e._reactRootContainer=$,e[uf$1]=$.current,sf$1(e.nodeType===8?e.parentNode:e),Sk$1(function(){gl$1(o,$,a,c)}),$}function sl$1(e,o,a,c,d){var g=a._reactRootContainer;if(g){var b=g;if(typeof d=="function"){var j=d;d=function(){var $=hl$1(b);j.call($)}}gl$1(o,b,e,d)}else b=rl$1(a,o,e,d,c);return hl$1(b)}Ec$1=function(e){switch(e.tag){case 3:var o=e.stateNode;if(o.current.memoizedState.isDehydrated){var a=tc$1(o.pendingLanes);a!==0&&(Cc$1(o,a|1),Ek$1(o,B$1()),!(K$1&6)&&(Hj$1=B$1()+500,jg$1()))}break;case 13:Sk$1(function(){var c=Zg$1(e,1);if(c!==null){var d=L$1();mh$1(c,e,1,d)}}),jl(e,1)}};Fc$1=function(e){if(e.tag===13){var o=Zg$1(e,134217728);if(o!==null){var a=L$1();mh$1(o,e,134217728,a)}jl(e,134217728)}};Gc$1=function(e){if(e.tag===13){var o=lh$1(e),a=Zg$1(e,o);if(a!==null){var c=L$1();mh$1(a,e,o,c)}jl(e,o)}};Hc$1=function(){return C$1};Ic$1=function(e,o){var a=C$1;try{return C$1=e,o()}finally{C$1=a}};yb$1=function(e,o,a){switch(o){case"input":if(bb$1(e,a),o=a.name,a.type==="radio"&&o!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==e&&c.form===e.form){var d=Db$1(c);if(!d)throw Error(p$1(90));Wa$1(c),bb$1(c,d)}}}break;case"textarea":ib$1(e,a);break;case"select":o=a.value,o!=null&&fb(e,!!a.multiple,o,!1)}};Gb$1=Rk$1;Hb$1=Sk$1;var tl$1={usingClientEntryPoint:!1,Events:[Cb$1,ue$2,Db$1,Eb$1,Fb$1,Rk$1]},ul$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$1={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb$1(e),e===null?null:e.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$1=wl$1.inject(vl$1),lc$1=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(e,o){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(o))throw Error(p$1(200));return dl$1(e,o,null,a)};reactDom_production_min.createRoot=function(e,o){if(!ol$1(e))throw Error(p$1(299));var a=!1,c="",d=ll$1;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onRecoverableError!==void 0&&(d=o.onRecoverableError)),o=cl$1(e,1,!1,null,null,a,!1,c,d),e[uf$1]=o.current,sf$1(e.nodeType===8?e.parentNode:e),new ml$1(o)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var o=e._reactInternals;if(o===void 0)throw typeof e.render=="function"?Error(p$1(188)):(e=Object.keys(e).join(","),Error(p$1(268,e)));return e=Zb$1(o),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk$1(e)};reactDom_production_min.hydrate=function(e,o,a){if(!pl$1(o))throw Error(p$1(200));return sl$1(null,e,o,!0,a)};reactDom_production_min.hydrateRoot=function(e,o,a){if(!ol$1(e))throw Error(p$1(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",b=ll$1;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),o=fl$1(o,null,e,1,a??null,d,!1,g,b),e[uf$1]=o.current,sf$1(e),c)for(e=0;e<c.length;e++)a=c[e],d=a._getVersion,d=d(a._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[a,d]:o.mutableSourceEagerHydrationData.push(a,d);return new nl$1(o)};reactDom_production_min.render=function(e,o,a){if(!pl$1(o))throw Error(p$1(200));return sl$1(null,e,o,!1,a)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl$1(e))throw Error(p$1(40));return e._reactRootContainer?(Sk$1(function(){sl$1(null,null,e,!1,function(){e._reactRootContainer=null,e[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk$1;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,o,a,c){if(!pl$1(a))throw Error(p$1(200));if(e==null||e._reactInternals===void 0)throw Error(p$1(38));return sl$1(e,o,a,!1,c)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(o,a,c){let d=Promise.resolve();if(a&&a.length>0){const g=document.getElementsByTagName("link");d=Promise.all(a.map(b=>{if(b=assetsURL(b),b in seen)return;seen[b]=!0;const j=b.endsWith(".css"),$=j?'[rel="stylesheet"]':"";if(!!c)for(let rt=g.length-1;rt>=0;rt--){const ut=g[rt];if(ut.href===b&&(!j||ut.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${$}`))return;const st=document.createElement("link");if(st.rel=j?"stylesheet":scriptRel,j||(st.as="script",st.crossOrigin=""),st.href=b,document.head.appendChild(st),j)return new Promise((rt,ut)=>{st.addEventListener("load",rt),st.addEventListener("error",()=>ut(new Error(`Unable to preload CSS for ${b}`)))})}))}return d.then(()=>o()).catch(g=>{const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=g,window.dispatchEvent(b),!b.defaultPrevented)throw g})};var ZN=Object.create,Fg=Object.defineProperty,JN=Object.getOwnPropertyDescriptor,$N=Object.getOwnPropertyNames,eF=Object.getPrototypeOf,tF=Object.prototype.hasOwnProperty,rF=(e,o,a)=>o in e?Fg(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,zi=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),iF=(e,o)=>{for(var a in o)Fg(e,a,{get:o[a],enumerable:!0})},nF=(e,o,a,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of $N(o))!tF.call(e,d)&&d!==a&&Fg(e,d,{get:()=>o[d],enumerable:!(c=JN(o,d))||c.enumerable});return e},pi=(e,o,a)=>(a=e!=null?ZN(eF(e)):{},nF(o||!e||!e.__esModule?Fg(a,"default",{value:e,enumerable:!0}):a,e)),Ui=(e,o,a)=>(rF(e,typeof o!="symbol"?o+"":o,a),a),CO=zi((e,o)=>{(function(a,c){typeof e=="object"?o.exports=c():typeof define=="function"&&define.amd?define(c):a.Alea=c()})(e,function(){return a.importState=function(d){var g=new a;return g.importState(d),g},a;function a(){return function(d){var g=0,b=0,j=0,$=1;d.length==0&&(d=[+new Date]);var _e=c();g=_e(" "),b=_e(" "),j=_e(" ");for(var st=0;st<d.length;st++)g-=_e(d[st]),g<0&&(g+=1),b-=_e(d[st]),b<0&&(b+=1),j-=_e(d[st]),j<0&&(j+=1);_e=null;var rt=function(){var ut=2091639*g+$*23283064365386963e-26;return g=b,b=j,j=ut-($=ut|0)};return rt.next=rt,rt.uint32=function(){return rt()*4294967296},rt.fract53=function(){return rt()+(rt()*2097152|0)*11102230246251565e-32},rt.version="Alea 0.9",rt.args=d,rt.exportState=function(){return[g,b,j,$]},rt.importState=function(ut){g=+ut[0]||0,b=+ut[1]||0,j=+ut[2]||0,$=+ut[3]||0},rt}(Array.prototype.slice.call(arguments))}function c(){var d=4022871197,g=function(b){b=b.toString();for(var j=0;j<b.length;j++){d+=b.charCodeAt(j);var $=.02519603282416938*d;d=$>>>0,$-=d,$*=d,d=$>>>0,$-=d,d+=$*4294967296}return(d>>>0)*23283064365386963e-26};return g.version="Mash 0.9",g}})}),iA=zi((e,o)=>{(function(a,c){typeof e=="object"&&typeof o<"u"?c(e):typeof define=="function"&&define.amd?define(["exports"],c):c((a=typeof globalThis<"u"?globalThis:a||self).SVDJS={})})(e,function(a){a.SVD=function(c,d,g,b,j){if(d=d===void 0||d,g=g===void 0||g,j=1e-64/(b=b||Math.pow(2,-52)),!c)throw new TypeError("Matrix a is not defined");var $,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt,kt=c[0].length,It=c.length;if(It<kt)throw new TypeError("Invalid matrix: m < n");for(var Lt=[],Ft=[],Nt=[],Ht=d==="f"?It:kt,dr=Pt=yt=0;dr<It;dr++)Ft[dr]=new Array(Ht).fill(0);for(dr=0;dr<kt;dr++)Nt[dr]=new Array(kt).fill(0);var hs,us=new Array(kt).fill(0);for(dr=0;dr<It;dr++)for($=0;$<kt;$++)Ft[dr][$]=c[dr][$];for(dr=0;dr<kt;dr++){for(Lt[dr]=yt,Ct=0,st=dr+1,$=dr;$<It;$++)Ct+=Math.pow(Ft[$][dr],2);if(Ct<j)yt=0;else for(wt=(gt=Ft[dr][dr])*(yt=gt<0?Math.sqrt(Ct):-Math.sqrt(Ct))-Ct,Ft[dr][dr]=gt-yt,$=st;$<kt;$++){for(Ct=0,_e=dr;_e<It;_e++)Ct+=Ft[_e][dr]*Ft[_e][$];for(gt=Ct/wt,_e=dr;_e<It;_e++)Ft[_e][$]=Ft[_e][$]+gt*Ft[_e][dr]}for(us[dr]=yt,Ct=0,$=st;$<kt;$++)Ct+=Math.pow(Ft[dr][$],2);if(Ct<j)yt=0;else{for(wt=(gt=Ft[dr][dr+1])*(yt=gt<0?Math.sqrt(Ct):-Math.sqrt(Ct))-Ct,Ft[dr][dr+1]=gt-yt,$=st;$<kt;$++)Lt[$]=Ft[dr][$]/wt;for($=st;$<It;$++){for(Ct=0,_e=st;_e<kt;_e++)Ct+=Ft[$][_e]*Ft[dr][_e];for(_e=st;_e<kt;_e++)Ft[$][_e]=Ft[$][_e]+Ct*Lt[_e]}}Pt<(At=Math.abs(us[dr])+Math.abs(Lt[dr]))&&(Pt=At)}if(g)for(dr=kt-1;0<=dr;dr--){if(yt!==0){for(wt=Ft[dr][dr+1]*yt,$=st;$<kt;$++)Nt[$][dr]=Ft[dr][$]/wt;for($=st;$<kt;$++){for(Ct=0,_e=st;_e<kt;_e++)Ct+=Ft[dr][_e]*Nt[_e][$];for(_e=st;_e<kt;_e++)Nt[_e][$]=Nt[_e][$]+Ct*Nt[_e][dr]}}for($=st;$<kt;$++)Nt[dr][$]=0,Nt[$][dr]=0;Nt[dr][dr]=1,yt=Lt[dr],st=dr}if(d){if(d==="f")for(dr=kt;dr<It;dr++){for($=kt;$<It;$++)Ft[dr][$]=0;Ft[dr][dr]=1}for(dr=kt-1;0<=dr;dr--){for(st=dr+1,yt=us[dr],$=st;$<Ht;$++)Ft[dr][$]=0;if(yt!==0){for(wt=Ft[dr][dr]*yt,$=st;$<Ht;$++){for(Ct=0,_e=st;_e<It;_e++)Ct+=Ft[_e][dr]*Ft[_e][$];for(gt=Ct/wt,_e=dr;_e<It;_e++)Ft[_e][$]=Ft[_e][$]+gt*Ft[_e][dr]}for($=dr;$<It;$++)Ft[$][dr]=Ft[$][dr]/yt}else for($=dr;$<It;$++)Ft[$][dr]=0;Ft[dr][dr]=Ft[dr][dr]+1}}for(b*=Pt,_e=kt-1;0<=_e;_e--)for(var hn=0;hn<50;hn++){for(hs=!1,st=_e;0<=st;st--){if(Math.abs(Lt[st])<=b){hs=!0;break}if(Math.abs(us[st-1])<=b)break}if(!hs){for(ut=0,rt=st-(Ct=1),dr=st;dr<_e+1&&(gt=Ct*Lt[dr],Lt[dr]=ut*Lt[dr],!(Math.abs(gt)<=b));dr++)if(yt=us[dr],us[dr]=Math.sqrt(gt*gt+yt*yt),ut=yt/(wt=us[dr]),Ct=-gt/wt,d)for($=0;$<It;$++)At=Ft[$][rt],Tt=Ft[$][dr],Ft[$][rt]=At*ut+Tt*Ct,Ft[$][dr]=-At*Ct+Tt*ut}if(Tt=us[_e],st===_e){if(Tt<0&&(us[_e]=-Tt,g))for($=0;$<kt;$++)Nt[$][_e]=-Nt[$][_e];break}for(Pt=us[st],gt=(((At=us[_e-1])-Tt)*(At+Tt)+((yt=Lt[_e-1])-(wt=Lt[_e]))*(yt+wt))/(2*wt*At),yt=Math.sqrt(gt*gt+1),gt=((Pt-Tt)*(Pt+Tt)+wt*(At/(gt<0?gt-yt:gt+yt)-wt))/Pt,dr=st+(Ct=ut=1);dr<_e+1;dr++){if(yt=Lt[dr],At=us[dr],wt=Ct*yt,yt*=ut,Tt=Math.sqrt(gt*gt+wt*wt),gt=Pt*(ut=gt/(Lt[dr-1]=Tt))+yt*(Ct=wt/Tt),yt=-Pt*Ct+yt*ut,wt=At*Ct,At*=ut,g)for($=0;$<kt;$++)Pt=Nt[$][dr-1],Tt=Nt[$][dr],Nt[$][dr-1]=Pt*ut+Tt*Ct,Nt[$][dr]=-Pt*Ct+Tt*ut;if(Tt=Math.sqrt(gt*gt+wt*wt),gt=(ut=gt/(us[dr-1]=Tt))*yt+(Ct=wt/Tt)*At,Pt=-Ct*yt+ut*At,d)for($=0;$<It;$++)At=Ft[$][dr-1],Tt=Ft[$][dr],Ft[$][dr-1]=At*ut+Tt*Ct,Ft[$][dr]=-At*Ct+Tt*ut}Lt[st]=0,Lt[_e]=gt,us[_e]=Pt}for(dr=0;dr<kt;dr++)us[dr]<b&&(us[dr]=0);return{u:Ft,q:us,v:Nt}},a.VERSION="1.1.1",Object.defineProperty(a,"__esModule",{value:!0})})}),sI=zi((e,o)=>{(function(a,c){typeof e=="object"&&typeof o<"u"?o.exports=c():typeof define=="function"&&define.amd?define(c):(a=a||self,a.TinyQueue=c())})(e,function(){var a=function(d,g){if(d===void 0&&(d=[]),g===void 0&&(g=c),this.data=d,this.length=this.data.length,this.compare=g,this.length>0)for(var b=(this.length>>1)-1;b>=0;b--)this._down(b)};a.prototype.push=function(d){this.data.push(d),this.length++,this._up(this.length-1)},a.prototype.pop=function(){if(this.length!==0){var d=this.data[0],g=this.data.pop();return this.length--,this.length>0&&(this.data[0]=g,this._down(0)),d}},a.prototype.peek=function(){return this.data[0]},a.prototype._up=function(d){for(var g=this,b=g.data,j=g.compare,$=b[d];d>0;){var _e=d-1>>1,st=b[_e];if(j($,st)>=0)break;b[d]=st,d=_e}b[d]=$},a.prototype._down=function(d){for(var g=this,b=g.data,j=g.compare,$=this.length>>1,_e=b[d];d<$;){var st=(d<<1)+1,rt=b[st],ut=st+1;if(ut<this.length&&j(b[ut],rt)<0&&(st=ut,rt=b[ut]),j(rt,_e)>=0)break;b[d]=rt,d=st}b[d]=_e};function c(d,g){return d<g?-1:d>g?1:0}return a})}),aI=zi((e,o)=>{var a=sI();a.default&&(a=a.default),o.exports=c,o.exports.default=c;function c(_e,st,rt){st=st||1;for(var ut,gt,yt,wt,Ct=0;Ct<_e[0].length;Ct++){var Pt=_e[0][Ct];(!Ct||Pt[0]<ut)&&(ut=Pt[0]),(!Ct||Pt[1]<gt)&&(gt=Pt[1]),(!Ct||Pt[0]>yt)&&(yt=Pt[0]),(!Ct||Pt[1]>wt)&&(wt=Pt[1])}var At=yt-ut,Tt=wt-gt,kt=Math.min(At,Tt),It=kt/2;if(kt===0){var Lt=[ut,gt];return Lt.distance=0,Lt}for(var Ft=new a(void 0,d),Nt=ut;Nt<yt;Nt+=kt)for(var Ht=gt;Ht<wt;Ht+=kt)Ft.push(new g(Nt+It,Ht+It,It,_e));var dr=j(_e),hs=new g(ut+At/2,gt+Tt/2,0,_e);hs.d>dr.d&&(dr=hs);for(var us=Ft.length;Ft.length;){var hn=Ft.pop();hn.d>dr.d&&(dr=hn,rt&&console.log("found best %d after %d probes",Math.round(1e4*hn.d)/1e4,us)),!(hn.max-dr.d<=st)&&(It=hn.h/2,Ft.push(new g(hn.x-It,hn.y-It,It,_e)),Ft.push(new g(hn.x+It,hn.y-It,It,_e)),Ft.push(new g(hn.x-It,hn.y+It,It,_e)),Ft.push(new g(hn.x+It,hn.y+It,It,_e)),us+=4)}rt&&(console.log("num probes: "+us),console.log("best distance: "+dr.d));var un=[dr.x,dr.y];return un.distance=dr.d,un}function d(_e,st){return st.max-_e.max}function g(_e,st,rt,ut){this.x=_e,this.y=st,this.h=rt,this.d=b(_e,st,ut),this.max=this.d+this.h*Math.SQRT2}function b(_e,st,rt){for(var ut=!1,gt=1/0,yt=0;yt<rt.length;yt++)for(var wt=rt[yt],Ct=0,Pt=wt.length,At=Pt-1;Ct<Pt;At=Ct++){var Tt=wt[Ct],kt=wt[At];Tt[1]>st!=kt[1]>st&&_e<(kt[0]-Tt[0])*(st-Tt[1])/(kt[1]-Tt[1])+Tt[0]&&(ut=!ut),gt=Math.min(gt,$(_e,st,Tt,kt))}return gt===0?0:(ut?1:-1)*Math.sqrt(gt)}function j(_e){for(var st=0,rt=0,ut=0,gt=_e[0],yt=0,wt=gt.length,Ct=wt-1;yt<wt;Ct=yt++){var Pt=gt[yt],At=gt[Ct],Tt=Pt[0]*At[1]-At[0]*Pt[1];rt+=(Pt[0]+At[0])*Tt,ut+=(Pt[1]+At[1])*Tt,st+=Tt*3}return st===0?new g(gt[0][0],gt[0][1],0,_e):new g(rt/st,ut/st,0,_e)}function $(_e,st,rt,ut){var gt=rt[0],yt=rt[1],wt=ut[0]-gt,Ct=ut[1]-yt;if(wt!==0||Ct!==0){var Pt=((_e-gt)*wt+(st-yt)*Ct)/(wt*wt+Ct*Ct);Pt>1?(gt=ut[0],yt=ut[1]):Pt>0&&(gt+=wt*Pt,yt+=Ct*Pt)}return wt=_e-gt,Ct=st-yt,wt*wt+Ct*Ct}}),oR=zi((e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(c){if(c===null||c===!0||c===!1)return NaN;var d=Number(c);return isNaN(d)?d:d<0?Math.ceil(d):Math.floor(d)}o.exports=e.default}),lR=zi((e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(c){var d=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()));return d.setUTCFullYear(c.getFullYear()),c.getTime()-d.getTime()}o.exports=e.default}),vR=zi(e=>{(function(){var o=function(){this.init()};o.prototype={init:function(){var rt=this||a;return rt._counter=1e3,rt._html5AudioPool=[],rt.html5PoolSize=10,rt._codecs={},rt._howls=[],rt._muted=!1,rt._volume=1,rt._canPlayEvent="canplaythrough",rt._navigator=typeof window<"u"&&window.navigator?window.navigator:null,rt.masterGain=null,rt.noAudio=!1,rt.usingWebAudio=!0,rt.autoSuspend=!0,rt.ctx=null,rt.autoUnlock=!0,rt._setup(),rt},volume:function(rt){var ut=this||a;if(rt=parseFloat(rt),ut.ctx||st(),typeof rt<"u"&&rt>=0&&rt<=1){if(ut._volume=rt,ut._muted)return ut;ut.usingWebAudio&&ut.masterGain.gain.setValueAtTime(rt,a.ctx.currentTime);for(var gt=0;gt<ut._howls.length;gt++)if(!ut._howls[gt]._webAudio)for(var yt=ut._howls[gt]._getSoundIds(),wt=0;wt<yt.length;wt++){var Ct=ut._howls[gt]._soundById(yt[wt]);Ct&&Ct._node&&(Ct._node.volume=Ct._volume*rt)}return ut}return ut._volume},mute:function(rt){var ut=this||a;ut.ctx||st(),ut._muted=rt,ut.usingWebAudio&&ut.masterGain.gain.setValueAtTime(rt?0:ut._volume,a.ctx.currentTime);for(var gt=0;gt<ut._howls.length;gt++)if(!ut._howls[gt]._webAudio)for(var yt=ut._howls[gt]._getSoundIds(),wt=0;wt<yt.length;wt++){var Ct=ut._howls[gt]._soundById(yt[wt]);Ct&&Ct._node&&(Ct._node.muted=rt?!0:Ct._muted)}return ut},stop:function(){for(var rt=this||a,ut=0;ut<rt._howls.length;ut++)rt._howls[ut].stop();return rt},unload:function(){for(var rt=this||a,ut=rt._howls.length-1;ut>=0;ut--)rt._howls[ut].unload();return rt.usingWebAudio&&rt.ctx&&typeof rt.ctx.close<"u"&&(rt.ctx.close(),rt.ctx=null,st()),rt},codecs:function(rt){return(this||a)._codecs[rt.replace(/^x-/,"")]},_setup:function(){var rt=this||a;if(rt.state=rt.ctx&&rt.ctx.state||"suspended",rt._autoSuspend(),!rt.usingWebAudio)if(typeof Audio<"u")try{var ut=new Audio;typeof ut.oncanplaythrough>"u"&&(rt._canPlayEvent="canplay")}catch{rt.noAudio=!0}else rt.noAudio=!0;try{var ut=new Audio;ut.muted&&(rt.noAudio=!0)}catch{}return rt.noAudio||rt._setupCodecs(),rt},_setupCodecs:function(){var rt=this||a,ut=null;try{ut=typeof Audio<"u"?new Audio:null}catch{return rt}if(!ut||typeof ut.canPlayType!="function")return rt;var gt=ut.canPlayType("audio/mpeg;").replace(/^no$/,""),yt=rt._navigator?rt._navigator.userAgent:"",wt=yt.match(/OPR\/([0-6].)/g),Ct=wt&&parseInt(wt[0].split("/")[1],10)<33,Pt=yt.indexOf("Safari")!==-1&&yt.indexOf("Chrome")===-1,At=yt.match(/Version\/(.*?) /),Tt=Pt&&At&&parseInt(At[1],10)<15;return rt._codecs={mp3:!!(!Ct&&(gt||ut.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!gt,opus:!!ut.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!ut.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!ut.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(ut.canPlayType('audio/wav; codecs="1"')||ut.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!ut.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!ut.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(ut.canPlayType("audio/x-m4a;")||ut.canPlayType("audio/m4a;")||ut.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(ut.canPlayType("audio/x-m4b;")||ut.canPlayType("audio/m4b;")||ut.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(ut.canPlayType("audio/x-mp4;")||ut.canPlayType("audio/mp4;")||ut.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!Tt&&ut.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!Tt&&ut.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!ut.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(ut.canPlayType("audio/x-flac;")||ut.canPlayType("audio/flac;")).replace(/^no$/,"")},rt},_unlockAudio:function(){var rt=this||a;if(!(rt._audioUnlocked||!rt.ctx)){rt._audioUnlocked=!1,rt.autoUnlock=!1,!rt._mobileUnloaded&&rt.ctx.sampleRate!==44100&&(rt._mobileUnloaded=!0,rt.unload()),rt._scratchBuffer=rt.ctx.createBuffer(1,1,22050);var ut=function(gt){for(;rt._html5AudioPool.length<rt.html5PoolSize;)try{var yt=new Audio;yt._unlocked=!0,rt._releaseHtml5Audio(yt)}catch{rt.noAudio=!0;break}for(var wt=0;wt<rt._howls.length;wt++)if(!rt._howls[wt]._webAudio)for(var Ct=rt._howls[wt]._getSoundIds(),Pt=0;Pt<Ct.length;Pt++){var At=rt._howls[wt]._soundById(Ct[Pt]);At&&At._node&&!At._node._unlocked&&(At._node._unlocked=!0,At._node.load())}rt._autoResume();var Tt=rt.ctx.createBufferSource();Tt.buffer=rt._scratchBuffer,Tt.connect(rt.ctx.destination),typeof Tt.start>"u"?Tt.noteOn(0):Tt.start(0),typeof rt.ctx.resume=="function"&&rt.ctx.resume(),Tt.onended=function(){Tt.disconnect(0),rt._audioUnlocked=!0,document.removeEventListener("touchstart",ut,!0),document.removeEventListener("touchend",ut,!0),document.removeEventListener("click",ut,!0),document.removeEventListener("keydown",ut,!0);for(var kt=0;kt<rt._howls.length;kt++)rt._howls[kt]._emit("unlock")}};return document.addEventListener("touchstart",ut,!0),document.addEventListener("touchend",ut,!0),document.addEventListener("click",ut,!0),document.addEventListener("keydown",ut,!0),rt}},_obtainHtml5Audio:function(){var rt=this||a;if(rt._html5AudioPool.length)return rt._html5AudioPool.pop();var ut=new Audio().play();return ut&&typeof Promise<"u"&&(ut instanceof Promise||typeof ut.then=="function")&&ut.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(rt){var ut=this||a;return rt._unlocked&&ut._html5AudioPool.push(rt),ut},_autoSuspend:function(){var rt=this;if(!(!rt.autoSuspend||!rt.ctx||typeof rt.ctx.suspend>"u"||!a.usingWebAudio)){for(var ut=0;ut<rt._howls.length;ut++)if(rt._howls[ut]._webAudio){for(var gt=0;gt<rt._howls[ut]._sounds.length;gt++)if(!rt._howls[ut]._sounds[gt]._paused)return rt}return rt._suspendTimer&&clearTimeout(rt._suspendTimer),rt._suspendTimer=setTimeout(function(){if(rt.autoSuspend){rt._suspendTimer=null,rt.state="suspending";var yt=function(){rt.state="suspended",rt._resumeAfterSuspend&&(delete rt._resumeAfterSuspend,rt._autoResume())};rt.ctx.suspend().then(yt,yt)}},3e4),rt}},_autoResume:function(){var rt=this;if(!(!rt.ctx||typeof rt.ctx.resume>"u"||!a.usingWebAudio))return rt.state==="running"&&rt.ctx.state!=="interrupted"&&rt._suspendTimer?(clearTimeout(rt._suspendTimer),rt._suspendTimer=null):rt.state==="suspended"||rt.state==="running"&&rt.ctx.state==="interrupted"?(rt.ctx.resume().then(function(){rt.state="running";for(var ut=0;ut<rt._howls.length;ut++)rt._howls[ut]._emit("resume")}),rt._suspendTimer&&(clearTimeout(rt._suspendTimer),rt._suspendTimer=null)):rt.state==="suspending"&&(rt._resumeAfterSuspend=!0),rt}};var a=new o,c=function(rt){var ut=this;if(!rt.src||rt.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}ut.init(rt)};c.prototype={init:function(rt){var ut=this;return a.ctx||st(),ut._autoplay=rt.autoplay||!1,ut._format=typeof rt.format!="string"?rt.format:[rt.format],ut._html5=rt.html5||!1,ut._muted=rt.mute||!1,ut._loop=rt.loop||!1,ut._pool=rt.pool||5,ut._preload=typeof rt.preload=="boolean"||rt.preload==="metadata"?rt.preload:!0,ut._rate=rt.rate||1,ut._sprite=rt.sprite||{},ut._src=typeof rt.src!="string"?rt.src:[rt.src],ut._volume=rt.volume!==void 0?rt.volume:1,ut._xhr={method:rt.xhr&&rt.xhr.method?rt.xhr.method:"GET",headers:rt.xhr&&rt.xhr.headers?rt.xhr.headers:null,withCredentials:rt.xhr&&rt.xhr.withCredentials?rt.xhr.withCredentials:!1},ut._duration=0,ut._state="unloaded",ut._sounds=[],ut._endTimers={},ut._queue=[],ut._playLock=!1,ut._onend=rt.onend?[{fn:rt.onend}]:[],ut._onfade=rt.onfade?[{fn:rt.onfade}]:[],ut._onload=rt.onload?[{fn:rt.onload}]:[],ut._onloaderror=rt.onloaderror?[{fn:rt.onloaderror}]:[],ut._onplayerror=rt.onplayerror?[{fn:rt.onplayerror}]:[],ut._onpause=rt.onpause?[{fn:rt.onpause}]:[],ut._onplay=rt.onplay?[{fn:rt.onplay}]:[],ut._onstop=rt.onstop?[{fn:rt.onstop}]:[],ut._onmute=rt.onmute?[{fn:rt.onmute}]:[],ut._onvolume=rt.onvolume?[{fn:rt.onvolume}]:[],ut._onrate=rt.onrate?[{fn:rt.onrate}]:[],ut._onseek=rt.onseek?[{fn:rt.onseek}]:[],ut._onunlock=rt.onunlock?[{fn:rt.onunlock}]:[],ut._onresume=[],ut._webAudio=a.usingWebAudio&&!ut._html5,typeof a.ctx<"u"&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(ut),ut._autoplay&&ut._queue.push({event:"play",action:function(){ut.play()}}),ut._preload&&ut._preload!=="none"&&ut.load(),ut},load:function(){var rt=this,ut=null;if(a.noAudio){rt._emit("loaderror",null,"No audio support.");return}typeof rt._src=="string"&&(rt._src=[rt._src]);for(var gt=0;gt<rt._src.length;gt++){var yt,wt;if(rt._format&&rt._format[gt])yt=rt._format[gt];else{if(wt=rt._src[gt],typeof wt!="string"){rt._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}yt=/^data:audio\/([^;,]+);/i.exec(wt),yt||(yt=/\.([^.]+)$/.exec(wt.split("?",1)[0])),yt&&(yt=yt[1].toLowerCase())}if(yt||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),yt&&a.codecs(yt)){ut=rt._src[gt];break}}if(!ut){rt._emit("loaderror",null,"No codec support for selected audio sources.");return}return rt._src=ut,rt._state="loading",window.location.protocol==="https:"&&ut.slice(0,5)==="http:"&&(rt._html5=!0,rt._webAudio=!1),new d(rt),rt._webAudio&&b(rt),rt},play:function(rt,ut){var gt=this,yt=null;if(typeof rt=="number")yt=rt,rt=null;else{if(typeof rt=="string"&&gt._state==="loaded"&&!gt._sprite[rt])return null;if(typeof rt>"u"&&(rt="__default",!gt._playLock)){for(var wt=0,Ct=0;Ct<gt._sounds.length;Ct++)gt._sounds[Ct]._paused&&!gt._sounds[Ct]._ended&&(wt++,yt=gt._sounds[Ct]._id);wt===1?rt=null:yt=null}}var Pt=yt?gt._soundById(yt):gt._inactiveSound();if(!Pt)return null;if(yt&&!rt&&(rt=Pt._sprite||"__default"),gt._state!=="loaded"){Pt._sprite=rt,Pt._ended=!1;var At=Pt._id;return gt._queue.push({event:"play",action:function(){gt.play(At)}}),At}if(yt&&!Pt._paused)return ut||gt._loadQueue("play"),Pt._id;gt._webAudio&&a._autoResume();var Tt=Math.max(0,Pt._seek>0?Pt._seek:gt._sprite[rt][0]/1e3),kt=Math.max(0,(gt._sprite[rt][0]+gt._sprite[rt][1])/1e3-Tt),It=kt*1e3/Math.abs(Pt._rate),Lt=gt._sprite[rt][0]/1e3,Ft=(gt._sprite[rt][0]+gt._sprite[rt][1])/1e3;Pt._sprite=rt,Pt._ended=!1;var Nt=function(){Pt._paused=!1,Pt._seek=Tt,Pt._start=Lt,Pt._stop=Ft,Pt._loop=!!(Pt._loop||gt._sprite[rt][2])};if(Tt>=Ft){gt._ended(Pt);return}var Ht=Pt._node;if(gt._webAudio){var dr=function(){gt._playLock=!1,Nt(),gt._refreshBuffer(Pt);var un=Pt._muted||gt._muted?0:Pt._volume;Ht.gain.setValueAtTime(un,a.ctx.currentTime),Pt._playStart=a.ctx.currentTime,typeof Ht.bufferSource.start>"u"?Pt._loop?Ht.bufferSource.noteGrainOn(0,Tt,86400):Ht.bufferSource.noteGrainOn(0,Tt,kt):Pt._loop?Ht.bufferSource.start(0,Tt,86400):Ht.bufferSource.start(0,Tt,kt),It!==1/0&&(gt._endTimers[Pt._id]=setTimeout(gt._ended.bind(gt,Pt),It)),ut||setTimeout(function(){gt._emit("play",Pt._id),gt._loadQueue()},0)};a.state==="running"&&a.ctx.state!=="interrupted"?dr():(gt._playLock=!0,gt.once("resume",dr),gt._clearTimer(Pt._id))}else{var hs=function(){Ht.currentTime=Tt,Ht.muted=Pt._muted||gt._muted||a._muted||Ht.muted,Ht.volume=Pt._volume*a.volume(),Ht.playbackRate=Pt._rate;try{var un=Ht.play();if(un&&typeof Promise<"u"&&(un instanceof Promise||typeof un.then=="function")?(gt._playLock=!0,Nt(),un.then(function(){gt._playLock=!1,Ht._unlocked=!0,ut?gt._loadQueue():gt._emit("play",Pt._id)}).catch(function(){gt._playLock=!1,gt._emit("playerror",Pt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),Pt._ended=!0,Pt._paused=!0})):ut||(gt._playLock=!1,Nt(),gt._emit("play",Pt._id)),Ht.playbackRate=Pt._rate,Ht.paused){gt._emit("playerror",Pt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}rt!=="__default"||Pt._loop?gt._endTimers[Pt._id]=setTimeout(gt._ended.bind(gt,Pt),It):(gt._endTimers[Pt._id]=function(){gt._ended(Pt),Ht.removeEventListener("ended",gt._endTimers[Pt._id],!1)},Ht.addEventListener("ended",gt._endTimers[Pt._id],!1))}catch(bo){gt._emit("playerror",Pt._id,bo)}};Ht.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(Ht.src=gt._src,Ht.load());var us=window&&window.ejecta||!Ht.readyState&&a._navigator.isCocoonJS;if(Ht.readyState>=3||us)hs();else{gt._playLock=!0,gt._state="loading";var hn=function(){gt._state="loaded",hs(),Ht.removeEventListener(a._canPlayEvent,hn,!1)};Ht.addEventListener(a._canPlayEvent,hn,!1),gt._clearTimer(Pt._id)}}return Pt._id},pause:function(rt){var ut=this;if(ut._state!=="loaded"||ut._playLock)return ut._queue.push({event:"pause",action:function(){ut.pause(rt)}}),ut;for(var gt=ut._getSoundIds(rt),yt=0;yt<gt.length;yt++){ut._clearTimer(gt[yt]);var wt=ut._soundById(gt[yt]);if(wt&&!wt._paused&&(wt._seek=ut.seek(gt[yt]),wt._rateSeek=0,wt._paused=!0,ut._stopFade(gt[yt]),wt._node))if(ut._webAudio){if(!wt._node.bufferSource)continue;typeof wt._node.bufferSource.stop>"u"?wt._node.bufferSource.noteOff(0):wt._node.bufferSource.stop(0),ut._cleanBuffer(wt._node)}else(!isNaN(wt._node.duration)||wt._node.duration===1/0)&&wt._node.pause();arguments[1]||ut._emit("pause",wt?wt._id:null)}return ut},stop:function(rt,ut){var gt=this;if(gt._state!=="loaded"||gt._playLock)return gt._queue.push({event:"stop",action:function(){gt.stop(rt)}}),gt;for(var yt=gt._getSoundIds(rt),wt=0;wt<yt.length;wt++){gt._clearTimer(yt[wt]);var Ct=gt._soundById(yt[wt]);Ct&&(Ct._seek=Ct._start||0,Ct._rateSeek=0,Ct._paused=!0,Ct._ended=!0,gt._stopFade(yt[wt]),Ct._node&&(gt._webAudio?Ct._node.bufferSource&&(typeof Ct._node.bufferSource.stop>"u"?Ct._node.bufferSource.noteOff(0):Ct._node.bufferSource.stop(0),gt._cleanBuffer(Ct._node)):(!isNaN(Ct._node.duration)||Ct._node.duration===1/0)&&(Ct._node.currentTime=Ct._start||0,Ct._node.pause(),Ct._node.duration===1/0&&gt._clearSound(Ct._node))),ut||gt._emit("stop",Ct._id))}return gt},mute:function(rt,ut){var gt=this;if(gt._state!=="loaded"||gt._playLock)return gt._queue.push({event:"mute",action:function(){gt.mute(rt,ut)}}),gt;if(typeof ut>"u")if(typeof rt=="boolean")gt._muted=rt;else return gt._muted;for(var yt=gt._getSoundIds(ut),wt=0;wt<yt.length;wt++){var Ct=gt._soundById(yt[wt]);Ct&&(Ct._muted=rt,Ct._interval&&gt._stopFade(Ct._id),gt._webAudio&&Ct._node?Ct._node.gain.setValueAtTime(rt?0:Ct._volume,a.ctx.currentTime):Ct._node&&(Ct._node.muted=a._muted?!0:rt),gt._emit("mute",Ct._id))}return gt},volume:function(){var rt=this,ut=arguments,gt,yt;if(ut.length===0)return rt._volume;if(ut.length===1||ut.length===2&&typeof ut[1]>"u"){var wt=rt._getSoundIds(),Ct=wt.indexOf(ut[0]);Ct>=0?yt=parseInt(ut[0],10):gt=parseFloat(ut[0])}else ut.length>=2&&(gt=parseFloat(ut[0]),yt=parseInt(ut[1],10));var Pt;if(typeof gt<"u"&&gt>=0&&gt<=1){if(rt._state!=="loaded"||rt._playLock)return rt._queue.push({event:"volume",action:function(){rt.volume.apply(rt,ut)}}),rt;typeof yt>"u"&&(rt._volume=gt),yt=rt._getSoundIds(yt);for(var At=0;At<yt.length;At++)Pt=rt._soundById(yt[At]),Pt&&(Pt._volume=gt,ut[2]||rt._stopFade(yt[At]),rt._webAudio&&Pt._node&&!Pt._muted?Pt._node.gain.setValueAtTime(gt,a.ctx.currentTime):Pt._node&&!Pt._muted&&(Pt._node.volume=gt*a.volume()),rt._emit("volume",Pt._id))}else return Pt=yt?rt._soundById(yt):rt._sounds[0],Pt?Pt._volume:0;return rt},fade:function(rt,ut,gt,yt){var wt=this;if(wt._state!=="loaded"||wt._playLock)return wt._queue.push({event:"fade",action:function(){wt.fade(rt,ut,gt,yt)}}),wt;rt=Math.min(Math.max(0,parseFloat(rt)),1),ut=Math.min(Math.max(0,parseFloat(ut)),1),gt=parseFloat(gt),wt.volume(rt,yt);for(var Ct=wt._getSoundIds(yt),Pt=0;Pt<Ct.length;Pt++){var At=wt._soundById(Ct[Pt]);if(At){if(yt||wt._stopFade(Ct[Pt]),wt._webAudio&&!At._muted){var Tt=a.ctx.currentTime,kt=Tt+gt/1e3;At._volume=rt,At._node.gain.setValueAtTime(rt,Tt),At._node.gain.linearRampToValueAtTime(ut,kt)}wt._startFadeInterval(At,rt,ut,gt,Ct[Pt],typeof yt>"u")}}return wt},_startFadeInterval:function(rt,ut,gt,yt,wt,Ct){var Pt=this,At=ut,Tt=gt-ut,kt=Math.abs(Tt/.01),It=Math.max(4,kt>0?yt/kt:yt),Lt=Date.now();rt._fadeTo=gt,rt._interval=setInterval(function(){var Ft=(Date.now()-Lt)/yt;Lt=Date.now(),At+=Tt*Ft,At=Math.round(At*100)/100,Tt<0?At=Math.max(gt,At):At=Math.min(gt,At),Pt._webAudio?rt._volume=At:Pt.volume(At,rt._id,!0),Ct&&(Pt._volume=At),(gt<ut&&At<=gt||gt>ut&&At>=gt)&&(clearInterval(rt._interval),rt._interval=null,rt._fadeTo=null,Pt.volume(gt,rt._id),Pt._emit("fade",rt._id))},It)},_stopFade:function(rt){var ut=this,gt=ut._soundById(rt);return gt&&gt._interval&&(ut._webAudio&&gt._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(gt._interval),gt._interval=null,ut.volume(gt._fadeTo,rt),gt._fadeTo=null,ut._emit("fade",rt)),ut},loop:function(){var rt=this,ut=arguments,gt,yt,wt;if(ut.length===0)return rt._loop;if(ut.length===1)if(typeof ut[0]=="boolean")gt=ut[0],rt._loop=gt;else return wt=rt._soundById(parseInt(ut[0],10)),wt?wt._loop:!1;else ut.length===2&&(gt=ut[0],yt=parseInt(ut[1],10));for(var Ct=rt._getSoundIds(yt),Pt=0;Pt<Ct.length;Pt++)wt=rt._soundById(Ct[Pt]),wt&&(wt._loop=gt,rt._webAudio&&wt._node&&wt._node.bufferSource&&(wt._node.bufferSource.loop=gt,gt&&(wt._node.bufferSource.loopStart=wt._start||0,wt._node.bufferSource.loopEnd=wt._stop,rt.playing(Ct[Pt])&&(rt.pause(Ct[Pt],!0),rt.play(Ct[Pt],!0)))));return rt},rate:function(){var rt=this,ut=arguments,gt,yt;if(ut.length===0)yt=rt._sounds[0]._id;else if(ut.length===1){var wt=rt._getSoundIds(),Ct=wt.indexOf(ut[0]);Ct>=0?yt=parseInt(ut[0],10):gt=parseFloat(ut[0])}else ut.length===2&&(gt=parseFloat(ut[0]),yt=parseInt(ut[1],10));var Pt;if(typeof gt=="number"){if(rt._state!=="loaded"||rt._playLock)return rt._queue.push({event:"rate",action:function(){rt.rate.apply(rt,ut)}}),rt;typeof yt>"u"&&(rt._rate=gt),yt=rt._getSoundIds(yt);for(var At=0;At<yt.length;At++)if(Pt=rt._soundById(yt[At]),Pt){rt.playing(yt[At])&&(Pt._rateSeek=rt.seek(yt[At]),Pt._playStart=rt._webAudio?a.ctx.currentTime:Pt._playStart),Pt._rate=gt,rt._webAudio&&Pt._node&&Pt._node.bufferSource?Pt._node.bufferSource.playbackRate.setValueAtTime(gt,a.ctx.currentTime):Pt._node&&(Pt._node.playbackRate=gt);var Tt=rt.seek(yt[At]),kt=(rt._sprite[Pt._sprite][0]+rt._sprite[Pt._sprite][1])/1e3-Tt,It=kt*1e3/Math.abs(Pt._rate);(rt._endTimers[yt[At]]||!Pt._paused)&&(rt._clearTimer(yt[At]),rt._endTimers[yt[At]]=setTimeout(rt._ended.bind(rt,Pt),It)),rt._emit("rate",Pt._id)}}else return Pt=rt._soundById(yt),Pt?Pt._rate:rt._rate;return rt},seek:function(){var rt=this,ut=arguments,gt,yt;if(ut.length===0)rt._sounds.length&&(yt=rt._sounds[0]._id);else if(ut.length===1){var wt=rt._getSoundIds(),Ct=wt.indexOf(ut[0]);Ct>=0?yt=parseInt(ut[0],10):rt._sounds.length&&(yt=rt._sounds[0]._id,gt=parseFloat(ut[0]))}else ut.length===2&&(gt=parseFloat(ut[0]),yt=parseInt(ut[1],10));if(typeof yt>"u")return 0;if(typeof gt=="number"&&(rt._state!=="loaded"||rt._playLock))return rt._queue.push({event:"seek",action:function(){rt.seek.apply(rt,ut)}}),rt;var Pt=rt._soundById(yt);if(Pt)if(typeof gt=="number"&&gt>=0){var At=rt.playing(yt);At&&rt.pause(yt,!0),Pt._seek=gt,Pt._ended=!1,rt._clearTimer(yt),!rt._webAudio&&Pt._node&&!isNaN(Pt._node.duration)&&(Pt._node.currentTime=gt);var Tt=function(){At&&rt.play(yt,!0),rt._emit("seek",yt)};if(At&&!rt._webAudio){var kt=function(){rt._playLock?setTimeout(kt,0):Tt()};setTimeout(kt,0)}else Tt()}else if(rt._webAudio){var It=rt.playing(yt)?a.ctx.currentTime-Pt._playStart:0,Lt=Pt._rateSeek?Pt._rateSeek-Pt._seek:0;return Pt._seek+(Lt+It*Math.abs(Pt._rate))}else return Pt._node.currentTime;return rt},playing:function(rt){var ut=this;if(typeof rt=="number"){var gt=ut._soundById(rt);return gt?!gt._paused:!1}for(var yt=0;yt<ut._sounds.length;yt++)if(!ut._sounds[yt]._paused)return!0;return!1},duration:function(rt){var ut=this,gt=ut._duration,yt=ut._soundById(rt);return yt&&(gt=ut._sprite[yt._sprite][1]/1e3),gt},state:function(){return this._state},unload:function(){for(var rt=this,ut=rt._sounds,gt=0;gt<ut.length;gt++)ut[gt]._paused||rt.stop(ut[gt]._id),rt._webAudio||(rt._clearSound(ut[gt]._node),ut[gt]._node.removeEventListener("error",ut[gt]._errorFn,!1),ut[gt]._node.removeEventListener(a._canPlayEvent,ut[gt]._loadFn,!1),ut[gt]._node.removeEventListener("ended",ut[gt]._endFn,!1),a._releaseHtml5Audio(ut[gt]._node)),delete ut[gt]._node,rt._clearTimer(ut[gt]._id);var yt=a._howls.indexOf(rt);yt>=0&&a._howls.splice(yt,1);var wt=!0;for(gt=0;gt<a._howls.length;gt++)if(a._howls[gt]._src===rt._src||rt._src.indexOf(a._howls[gt]._src)>=0){wt=!1;break}return g&&wt&&delete g[rt._src],a.noAudio=!1,rt._state="unloaded",rt._sounds=[],rt=null,null},on:function(rt,ut,gt,yt){var wt=this,Ct=wt["_on"+rt];return typeof ut=="function"&&Ct.push(yt?{id:gt,fn:ut,once:yt}:{id:gt,fn:ut}),wt},off:function(rt,ut,gt){var yt=this,wt=yt["_on"+rt],Ct=0;if(typeof ut=="number"&&(gt=ut,ut=null),ut||gt)for(Ct=0;Ct<wt.length;Ct++){var Pt=gt===wt[Ct].id;if(ut===wt[Ct].fn&&Pt||!ut&&Pt){wt.splice(Ct,1);break}}else if(rt)yt["_on"+rt]=[];else{var At=Object.keys(yt);for(Ct=0;Ct<At.length;Ct++)At[Ct].indexOf("_on")===0&&Array.isArray(yt[At[Ct]])&&(yt[At[Ct]]=[])}return yt},once:function(rt,ut,gt){var yt=this;return yt.on(rt,ut,gt,1),yt},_emit:function(rt,ut,gt){for(var yt=this,wt=yt["_on"+rt],Ct=wt.length-1;Ct>=0;Ct--)(!wt[Ct].id||wt[Ct].id===ut||rt==="load")&&(setTimeout((function(Pt){Pt.call(this,ut,gt)}).bind(yt,wt[Ct].fn),0),wt[Ct].once&&yt.off(rt,wt[Ct].fn,wt[Ct].id));return yt._loadQueue(rt),yt},_loadQueue:function(rt){var ut=this;if(ut._queue.length>0){var gt=ut._queue[0];gt.event===rt&&(ut._queue.shift(),ut._loadQueue()),rt||gt.action()}return ut},_ended:function(rt){var ut=this,gt=rt._sprite;if(!ut._webAudio&&rt._node&&!rt._node.paused&&!rt._node.ended&&rt._node.currentTime<rt._stop)return setTimeout(ut._ended.bind(ut,rt),100),ut;var yt=!!(rt._loop||ut._sprite[gt][2]);if(ut._emit("end",rt._id),!ut._webAudio&&yt&&ut.stop(rt._id,!0).play(rt._id),ut._webAudio&&yt){ut._emit("play",rt._id),rt._seek=rt._start||0,rt._rateSeek=0,rt._playStart=a.ctx.currentTime;var wt=(rt._stop-rt._start)*1e3/Math.abs(rt._rate);ut._endTimers[rt._id]=setTimeout(ut._ended.bind(ut,rt),wt)}return ut._webAudio&&!yt&&(rt._paused=!0,rt._ended=!0,rt._seek=rt._start||0,rt._rateSeek=0,ut._clearTimer(rt._id),ut._cleanBuffer(rt._node),a._autoSuspend()),!ut._webAudio&&!yt&&ut.stop(rt._id,!0),ut},_clearTimer:function(rt){var ut=this;if(ut._endTimers[rt]){if(typeof ut._endTimers[rt]!="function")clearTimeout(ut._endTimers[rt]);else{var gt=ut._soundById(rt);gt&&gt._node&&gt._node.removeEventListener("ended",ut._endTimers[rt],!1)}delete ut._endTimers[rt]}return ut},_soundById:function(rt){for(var ut=this,gt=0;gt<ut._sounds.length;gt++)if(rt===ut._sounds[gt]._id)return ut._sounds[gt];return null},_inactiveSound:function(){var rt=this;rt._drain();for(var ut=0;ut<rt._sounds.length;ut++)if(rt._sounds[ut]._ended)return rt._sounds[ut].reset();return new d(rt)},_drain:function(){var rt=this,ut=rt._pool,gt=0,yt=0;if(!(rt._sounds.length<ut)){for(yt=0;yt<rt._sounds.length;yt++)rt._sounds[yt]._ended&&gt++;for(yt=rt._sounds.length-1;yt>=0;yt--){if(gt<=ut)return;rt._sounds[yt]._ended&&(rt._webAudio&&rt._sounds[yt]._node&&rt._sounds[yt]._node.disconnect(0),rt._sounds.splice(yt,1),gt--)}}},_getSoundIds:function(rt){var ut=this;if(typeof rt>"u"){for(var gt=[],yt=0;yt<ut._sounds.length;yt++)gt.push(ut._sounds[yt]._id);return gt}else return[rt]},_refreshBuffer:function(rt){var ut=this;return rt._node.bufferSource=a.ctx.createBufferSource(),rt._node.bufferSource.buffer=g[ut._src],rt._panner?rt._node.bufferSource.connect(rt._panner):rt._node.bufferSource.connect(rt._node),rt._node.bufferSource.loop=rt._loop,rt._loop&&(rt._node.bufferSource.loopStart=rt._start||0,rt._node.bufferSource.loopEnd=rt._stop||0),rt._node.bufferSource.playbackRate.setValueAtTime(rt._rate,a.ctx.currentTime),ut},_cleanBuffer:function(rt){var ut=this,gt=a._navigator&&a._navigator.vendor.indexOf("Apple")>=0;if(a._scratchBuffer&&rt.bufferSource&&(rt.bufferSource.onended=null,rt.bufferSource.disconnect(0),gt))try{rt.bufferSource.buffer=a._scratchBuffer}catch{}return rt.bufferSource=null,ut},_clearSound:function(rt){var ut=/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent);ut||(rt.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var d=function(rt){this._parent=rt,this.init()};d.prototype={init:function(){var rt=this,ut=rt._parent;return rt._muted=ut._muted,rt._loop=ut._loop,rt._volume=ut._volume,rt._rate=ut._rate,rt._seek=0,rt._paused=!0,rt._ended=!0,rt._sprite="__default",rt._id=++a._counter,ut._sounds.push(rt),rt.create(),rt},create:function(){var rt=this,ut=rt._parent,gt=a._muted||rt._muted||rt._parent._muted?0:rt._volume;return ut._webAudio?(rt._node=typeof a.ctx.createGain>"u"?a.ctx.createGainNode():a.ctx.createGain(),rt._node.gain.setValueAtTime(gt,a.ctx.currentTime),rt._node.paused=!0,rt._node.connect(a.masterGain)):a.noAudio||(rt._node=a._obtainHtml5Audio(),rt._errorFn=rt._errorListener.bind(rt),rt._node.addEventListener("error",rt._errorFn,!1),rt._loadFn=rt._loadListener.bind(rt),rt._node.addEventListener(a._canPlayEvent,rt._loadFn,!1),rt._endFn=rt._endListener.bind(rt),rt._node.addEventListener("ended",rt._endFn,!1),rt._node.src=ut._src,rt._node.preload=ut._preload===!0?"auto":ut._preload,rt._node.volume=gt*a.volume(),rt._node.load()),rt},reset:function(){var rt=this,ut=rt._parent;return rt._muted=ut._muted,rt._loop=ut._loop,rt._volume=ut._volume,rt._rate=ut._rate,rt._seek=0,rt._rateSeek=0,rt._paused=!0,rt._ended=!0,rt._sprite="__default",rt._id=++a._counter,rt},_errorListener:function(){var rt=this;rt._parent._emit("loaderror",rt._id,rt._node.error?rt._node.error.code:0),rt._node.removeEventListener("error",rt._errorFn,!1)},_loadListener:function(){var rt=this,ut=rt._parent;ut._duration=Math.ceil(rt._node.duration*10)/10,Object.keys(ut._sprite).length===0&&(ut._sprite={__default:[0,ut._duration*1e3]}),ut._state!=="loaded"&&(ut._state="loaded",ut._emit("load"),ut._loadQueue()),rt._node.removeEventListener(a._canPlayEvent,rt._loadFn,!1)},_endListener:function(){var rt=this,ut=rt._parent;ut._duration===1/0&&(ut._duration=Math.ceil(rt._node.duration*10)/10,ut._sprite.__default[1]===1/0&&(ut._sprite.__default[1]=ut._duration*1e3),ut._ended(rt)),rt._node.removeEventListener("ended",rt._endFn,!1)}};var g={},b=function(rt){var ut=rt._src;if(g[ut]){rt._duration=g[ut].duration,_e(rt);return}if(/^data:[^;]+;base64,/.test(ut)){for(var gt=atob(ut.split(",")[1]),yt=new Uint8Array(gt.length),wt=0;wt<gt.length;++wt)yt[wt]=gt.charCodeAt(wt);$(yt.buffer,rt)}else{var Ct=new XMLHttpRequest;Ct.open(rt._xhr.method,ut,!0),Ct.withCredentials=rt._xhr.withCredentials,Ct.responseType="arraybuffer",rt._xhr.headers&&Object.keys(rt._xhr.headers).forEach(function(Pt){Ct.setRequestHeader(Pt,rt._xhr.headers[Pt])}),Ct.onload=function(){var Pt=(Ct.status+"")[0];if(Pt!=="0"&&Pt!=="2"&&Pt!=="3"){rt._emit("loaderror",null,"Failed loading audio file with status: "+Ct.status+".");return}$(Ct.response,rt)},Ct.onerror=function(){rt._webAudio&&(rt._html5=!0,rt._webAudio=!1,rt._sounds=[],delete g[ut],rt.load())},j(Ct)}},j=function(rt){try{rt.send()}catch{rt.onerror()}},$=function(rt,ut){var gt=function(){ut._emit("loaderror",null,"Decoding audio data failed.")},yt=function(wt){wt&&ut._sounds.length>0?(g[ut._src]=wt,_e(ut,wt)):gt()};typeof Promise<"u"&&a.ctx.decodeAudioData.length===1?a.ctx.decodeAudioData(rt).then(yt).catch(gt):a.ctx.decodeAudioData(rt,yt,gt)},_e=function(rt,ut){ut&&!rt._duration&&(rt._duration=ut.duration),Object.keys(rt._sprite).length===0&&(rt._sprite={__default:[0,rt._duration*1e3]}),rt._state!=="loaded"&&(rt._state="loaded",rt._emit("load"),rt._loadQueue())},st=function(){if(a.usingWebAudio){try{typeof AudioContext<"u"?a.ctx=new AudioContext:typeof webkitAudioContext<"u"?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch{a.usingWebAudio=!1}a.ctx||(a.usingWebAudio=!1);var rt=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),ut=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),gt=ut?parseInt(ut[1],10):null;if(rt&&gt&&gt<9){var yt=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());a._navigator&&!yt&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=typeof a.ctx.createGain>"u"?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:a,Howl:c}}),typeof e<"u"&&(e.Howler=a,e.Howl=c),typeof global<"u"?(global.HowlerGlobal=o,global.Howler=a,global.Howl=c,global.Sound=d):typeof window<"u"&&(window.HowlerGlobal=o,window.Howler=a,window.Howl=c,window.Sound=d)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(a){var c=this;if(!c.ctx||!c.ctx.listener)return c;for(var d=c._howls.length-1;d>=0;d--)c._howls[d].stereo(a);return c},HowlerGlobal.prototype.pos=function(a,c,d){var g=this;if(!g.ctx||!g.ctx.listener)return g;if(c=typeof c!="number"?g._pos[1]:c,d=typeof d!="number"?g._pos[2]:d,typeof a=="number")g._pos=[a,c,d],typeof g.ctx.listener.positionX<"u"?(g.ctx.listener.positionX.setTargetAtTime(g._pos[0],Howler.ctx.currentTime,.1),g.ctx.listener.positionY.setTargetAtTime(g._pos[1],Howler.ctx.currentTime,.1),g.ctx.listener.positionZ.setTargetAtTime(g._pos[2],Howler.ctx.currentTime,.1)):g.ctx.listener.setPosition(g._pos[0],g._pos[1],g._pos[2]);else return g._pos;return g},HowlerGlobal.prototype.orientation=function(a,c,d,g,b,j){var $=this;if(!$.ctx||!$.ctx.listener)return $;var _e=$._orientation;if(c=typeof c!="number"?_e[1]:c,d=typeof d!="number"?_e[2]:d,g=typeof g!="number"?_e[3]:g,b=typeof b!="number"?_e[4]:b,j=typeof j!="number"?_e[5]:j,typeof a=="number")$._orientation=[a,c,d,g,b,j],typeof $.ctx.listener.forwardX<"u"?($.ctx.listener.forwardX.setTargetAtTime(a,Howler.ctx.currentTime,.1),$.ctx.listener.forwardY.setTargetAtTime(c,Howler.ctx.currentTime,.1),$.ctx.listener.forwardZ.setTargetAtTime(d,Howler.ctx.currentTime,.1),$.ctx.listener.upX.setTargetAtTime(g,Howler.ctx.currentTime,.1),$.ctx.listener.upY.setTargetAtTime(b,Howler.ctx.currentTime,.1),$.ctx.listener.upZ.setTargetAtTime(j,Howler.ctx.currentTime,.1)):$.ctx.listener.setOrientation(a,c,d,g,b,j);else return _e;return $},Howl.prototype.init=function(a){return function(c){var d=this;return d._orientation=c.orientation||[1,0,0],d._stereo=c.stereo||null,d._pos=c.pos||null,d._pannerAttr={coneInnerAngle:typeof c.coneInnerAngle<"u"?c.coneInnerAngle:360,coneOuterAngle:typeof c.coneOuterAngle<"u"?c.coneOuterAngle:360,coneOuterGain:typeof c.coneOuterGain<"u"?c.coneOuterGain:0,distanceModel:typeof c.distanceModel<"u"?c.distanceModel:"inverse",maxDistance:typeof c.maxDistance<"u"?c.maxDistance:1e4,panningModel:typeof c.panningModel<"u"?c.panningModel:"HRTF",refDistance:typeof c.refDistance<"u"?c.refDistance:1,rolloffFactor:typeof c.rolloffFactor<"u"?c.rolloffFactor:1},d._onstereo=c.onstereo?[{fn:c.onstereo}]:[],d._onpos=c.onpos?[{fn:c.onpos}]:[],d._onorientation=c.onorientation?[{fn:c.onorientation}]:[],a.call(this,c)}}(Howl.prototype.init),Howl.prototype.stereo=function(a,c){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"stereo",action:function(){d.stereo(a,c)}}),d;var g=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof c>"u")if(typeof a=="number")d._stereo=a,d._pos=[a,0,0];else return d._stereo;for(var b=d._getSoundIds(c),j=0;j<b.length;j++){var $=d._soundById(b[j]);if($)if(typeof a=="number")$._stereo=a,$._pos=[a,0,0],$._node&&($._pannerAttr.panningModel="equalpower",(!$._panner||!$._panner.pan)&&o($,g),g==="spatial"?typeof $._panner.positionX<"u"?($._panner.positionX.setValueAtTime(a,Howler.ctx.currentTime),$._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),$._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):$._panner.setPosition(a,0,0):$._panner.pan.setValueAtTime(a,Howler.ctx.currentTime)),d._emit("stereo",$._id);else return $._stereo}return d},Howl.prototype.pos=function(a,c,d,g){var b=this;if(!b._webAudio)return b;if(b._state!=="loaded")return b._queue.push({event:"pos",action:function(){b.pos(a,c,d,g)}}),b;if(c=typeof c!="number"?0:c,d=typeof d!="number"?-.5:d,typeof g>"u")if(typeof a=="number")b._pos=[a,c,d];else return b._pos;for(var j=b._getSoundIds(g),$=0;$<j.length;$++){var _e=b._soundById(j[$]);if(_e)if(typeof a=="number")_e._pos=[a,c,d],_e._node&&((!_e._panner||_e._panner.pan)&&o(_e,"spatial"),typeof _e._panner.positionX<"u"?(_e._panner.positionX.setValueAtTime(a,Howler.ctx.currentTime),_e._panner.positionY.setValueAtTime(c,Howler.ctx.currentTime),_e._panner.positionZ.setValueAtTime(d,Howler.ctx.currentTime)):_e._panner.setPosition(a,c,d)),b._emit("pos",_e._id);else return _e._pos}return b},Howl.prototype.orientation=function(a,c,d,g){var b=this;if(!b._webAudio)return b;if(b._state!=="loaded")return b._queue.push({event:"orientation",action:function(){b.orientation(a,c,d,g)}}),b;if(c=typeof c!="number"?b._orientation[1]:c,d=typeof d!="number"?b._orientation[2]:d,typeof g>"u")if(typeof a=="number")b._orientation=[a,c,d];else return b._orientation;for(var j=b._getSoundIds(g),$=0;$<j.length;$++){var _e=b._soundById(j[$]);if(_e)if(typeof a=="number")_e._orientation=[a,c,d],_e._node&&(_e._panner||(_e._pos||(_e._pos=b._pos||[0,0,-.5]),o(_e,"spatial")),typeof _e._panner.orientationX<"u"?(_e._panner.orientationX.setValueAtTime(a,Howler.ctx.currentTime),_e._panner.orientationY.setValueAtTime(c,Howler.ctx.currentTime),_e._panner.orientationZ.setValueAtTime(d,Howler.ctx.currentTime)):_e._panner.setOrientation(a,c,d)),b._emit("orientation",_e._id);else return _e._orientation}return b},Howl.prototype.pannerAttr=function(){var a=this,c=arguments,d,g,b;if(!a._webAudio)return a;if(c.length===0)return a._pannerAttr;if(c.length===1)if(typeof c[0]=="object")d=c[0],typeof g>"u"&&(d.pannerAttr||(d.pannerAttr={coneInnerAngle:d.coneInnerAngle,coneOuterAngle:d.coneOuterAngle,coneOuterGain:d.coneOuterGain,distanceModel:d.distanceModel,maxDistance:d.maxDistance,refDistance:d.refDistance,rolloffFactor:d.rolloffFactor,panningModel:d.panningModel}),a._pannerAttr={coneInnerAngle:typeof d.pannerAttr.coneInnerAngle<"u"?d.pannerAttr.coneInnerAngle:a._coneInnerAngle,coneOuterAngle:typeof d.pannerAttr.coneOuterAngle<"u"?d.pannerAttr.coneOuterAngle:a._coneOuterAngle,coneOuterGain:typeof d.pannerAttr.coneOuterGain<"u"?d.pannerAttr.coneOuterGain:a._coneOuterGain,distanceModel:typeof d.pannerAttr.distanceModel<"u"?d.pannerAttr.distanceModel:a._distanceModel,maxDistance:typeof d.pannerAttr.maxDistance<"u"?d.pannerAttr.maxDistance:a._maxDistance,refDistance:typeof d.pannerAttr.refDistance<"u"?d.pannerAttr.refDistance:a._refDistance,rolloffFactor:typeof d.pannerAttr.rolloffFactor<"u"?d.pannerAttr.rolloffFactor:a._rolloffFactor,panningModel:typeof d.pannerAttr.panningModel<"u"?d.pannerAttr.panningModel:a._panningModel});else return b=a._soundById(parseInt(c[0],10)),b?b._pannerAttr:a._pannerAttr;else c.length===2&&(d=c[0],g=parseInt(c[1],10));for(var j=a._getSoundIds(g),$=0;$<j.length;$++)if(b=a._soundById(j[$]),b){var _e=b._pannerAttr;_e={coneInnerAngle:typeof d.coneInnerAngle<"u"?d.coneInnerAngle:_e.coneInnerAngle,coneOuterAngle:typeof d.coneOuterAngle<"u"?d.coneOuterAngle:_e.coneOuterAngle,coneOuterGain:typeof d.coneOuterGain<"u"?d.coneOuterGain:_e.coneOuterGain,distanceModel:typeof d.distanceModel<"u"?d.distanceModel:_e.distanceModel,maxDistance:typeof d.maxDistance<"u"?d.maxDistance:_e.maxDistance,refDistance:typeof d.refDistance<"u"?d.refDistance:_e.refDistance,rolloffFactor:typeof d.rolloffFactor<"u"?d.rolloffFactor:_e.rolloffFactor,panningModel:typeof d.panningModel<"u"?d.panningModel:_e.panningModel};var st=b._panner;st?(st.coneInnerAngle=_e.coneInnerAngle,st.coneOuterAngle=_e.coneOuterAngle,st.coneOuterGain=_e.coneOuterGain,st.distanceModel=_e.distanceModel,st.maxDistance=_e.maxDistance,st.refDistance=_e.refDistance,st.rolloffFactor=_e.rolloffFactor,st.panningModel=_e.panningModel):(b._pos||(b._pos=a._pos||[0,0,-.5]),o(b,"spatial"))}return a},Sound.prototype.init=function(a){return function(){var c=this,d=c._parent;c._orientation=d._orientation,c._stereo=d._stereo,c._pos=d._pos,c._pannerAttr=d._pannerAttr,a.call(this),c._stereo?d.stereo(c._stereo):c._pos&&d.pos(c._pos[0],c._pos[1],c._pos[2],c._id)}}(Sound.prototype.init),Sound.prototype.reset=function(a){return function(){var c=this,d=c._parent;return c._orientation=d._orientation,c._stereo=d._stereo,c._pos=d._pos,c._pannerAttr=d._pannerAttr,c._stereo?d.stereo(c._stereo):c._pos?d.pos(c._pos[0],c._pos[1],c._pos[2],c._id):c._panner&&(c._panner.disconnect(0),c._panner=void 0,d._refreshBuffer(c)),a.call(this)}}(Sound.prototype.reset);var o=function(a,c){c=c||"spatial",c==="spatial"?(a._panner=Howler.ctx.createPanner(),a._panner.coneInnerAngle=a._pannerAttr.coneInnerAngle,a._panner.coneOuterAngle=a._pannerAttr.coneOuterAngle,a._panner.coneOuterGain=a._pannerAttr.coneOuterGain,a._panner.distanceModel=a._pannerAttr.distanceModel,a._panner.maxDistance=a._pannerAttr.maxDistance,a._panner.refDistance=a._pannerAttr.refDistance,a._panner.rolloffFactor=a._pannerAttr.rolloffFactor,a._panner.panningModel=a._pannerAttr.panningModel,typeof a._panner.positionX<"u"?(a._panner.positionX.setValueAtTime(a._pos[0],Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(a._pos[1],Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(a._pos[2],Howler.ctx.currentTime)):a._panner.setPosition(a._pos[0],a._pos[1],a._pos[2]),typeof a._panner.orientationX<"u"?(a._panner.orientationX.setValueAtTime(a._orientation[0],Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(a._orientation[1],Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(a._orientation[2],Howler.ctx.currentTime)):a._panner.setOrientation(a._orientation[0],a._orientation[1],a._orientation[2])):(a._panner=Howler.ctx.createStereoPanner(),a._panner.pan.setValueAtTime(a._stereo,Howler.ctx.currentTime)),a._panner.connect(a._node),a._paused||a._parent.pause(a._id,!0).play(a._id,!0)}}()}),Y3=zi((e,o)=>{function a(g,b){function j(){this.constructor=g}j.prototype=b.prototype,g.prototype=new j}function c(g,b,j,$){this.message=g,this.expected=b,this.found=j,this.location=$,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,c)}a(c,Error),c.buildMessage=function(g,b){var j={literal:function(yt){return'"'+_e(yt.text)+'"'},class:function(yt){var wt="",Ct;for(Ct=0;Ct<yt.parts.length;Ct++)wt+=yt.parts[Ct]instanceof Array?st(yt.parts[Ct][0])+"-"+st(yt.parts[Ct][1]):st(yt.parts[Ct]);return"["+(yt.inverted?"^":"")+wt+"]"},any:function(yt){return"any character"},end:function(yt){return"end of input"},other:function(yt){return yt.description}};function $(yt){return yt.charCodeAt(0).toString(16).toUpperCase()}function _e(yt){return yt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(wt){return"\\x0"+$(wt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(wt){return"\\x"+$(wt)})}function st(yt){return yt.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(wt){return"\\x0"+$(wt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(wt){return"\\x"+$(wt)})}function rt(yt){return j[yt.type](yt)}function ut(yt){var wt=new Array(yt.length),Ct,Pt;for(Ct=0;Ct<yt.length;Ct++)wt[Ct]=rt(yt[Ct]);if(wt.sort(),wt.length>0){for(Ct=1,Pt=1;Ct<wt.length;Ct++)wt[Ct-1]!==wt[Ct]&&(wt[Pt]=wt[Ct],Pt++);wt.length=Pt}switch(wt.length){case 1:return wt[0];case 2:return wt[0]+" or "+wt[1];default:return wt.slice(0,-1).join(", ")+", or "+wt[wt.length-1]}}function gt(yt){return yt?'"'+_e(yt)+'"':"end of input"}return"Expected "+ut(g)+" but "+gt(b)+" found."};function d(g,b){b=b!==void 0?b:{};var j={},$={svg_path:r$},_e=r$,st=function(So){if(!So)return[];for(var mu=[],P0=0;P0<So.length;P0++)mu=mu.concat.apply(mu,So[P0]);var wu=mu[0];return wu&&wu.code=="m"&&(delete wu.relative,wu.code="M"),mu},rt=function(So,mu){return m$(So,mu)},ut=/^[Mm]/,gt=MO(["M","m"],!1,!1),yt=function(So,mu,P0){var wu=p$(So,[mu]);return P0&&(wu=wu.concat(p$(So=="M"?"L":"l",P0[1]))),wu},wt=/^[Zz]/,Ct=MO(["Z","z"],!1,!1),Pt=function(){return p$("Z")},At=/^[Ll]/,Tt=MO(["L","l"],!1,!1),kt=function(So,mu){return p$(So,mu)},It=/^[Hh]/,Lt=MO(["H","h"],!1,!1),Ft=function(So,mu){return p$(So,mu.map(function(P0){return{x:P0}}))},Nt=/^[Vv]/,Ht=MO(["V","v"],!1,!1),dr=function(So,mu){return p$(So,mu.map(function(P0){return{y:P0}}))},hs=/^[Cc]/,us=MO(["C","c"],!1,!1),hn=function(So,mu,P0){return{x1:So.x,y1:So.y,x2:mu.x,y2:mu.y,x:P0.x,y:P0.y}},un=/^[Ss]/,bo=MO(["S","s"],!1,!1),_s=function(So,mu){return{x2:So.x,y2:So.y,x:mu.x,y:mu.y}},gn=/^[Qq]/,Gr=MO(["Q","q"],!1,!1),ds=function(So,mu){return{x1:So.x,y1:So.y,x:mu.x,y:mu.y}},Zn=/^[Tt]/,Nn=MO(["T","t"],!1,!1),Qn=/^[Aa]/,bu=MO(["A","a"],!1,!1),ou=function(So,mu,P0,wu,ax,q3){return{rx:So,ry:mu,xAxisRotation:P0,largeArc:wu,sweep:ax,x:q3.x,y:q3.y}},g0=function(So,mu){return{x:So,y:mu}},Su=function(So){return So*1},l1=function(So){return So.join("")*1},B0=/^[01]/,a1=MO(["0","1"],!1,!1),q1=function(So){return So=="1"},ox=function(){return""},U_=",",tS=bL(",",!1),iS=function(So){return So.join("")},wA=".",pO=bL(".",!1),aR=/^[eE]/,fD=MO(["e","E"],!1,!1),AA=/^[+\-]/,oI=MO(["+","-"],!1,!1),mO=/^[0-9]/,sp=MO([["0","9"]],!1,!1),xu=function(So){return So.join("")},ux=/^[ \t\n\r]/,tA=MO([" ","	",`
`,"\r"],!1,!1),au=0,C3=[{line:1,column:1}],X3=0,sR=[],N_;if("startRule"in b){if(!(b.startRule in $))throw new Error(`Can't start parsing from rule "`+b.startRule+'".');_e=$[b.startRule]}function bL(So,mu){return{type:"literal",text:So,ignoreCase:mu}}function MO(So,mu,P0){return{type:"class",parts:So,inverted:mu,ignoreCase:P0}}function PL(){return{type:"end"}}function jL(So){var mu=C3[So],P0;if(mu)return mu;for(P0=So-1;!C3[P0];)P0--;for(mu=C3[P0],mu={line:mu.line,column:mu.column};P0<So;)g.charCodeAt(P0)===10?(mu.line++,mu.column=1):mu.column++,P0++;return C3[So]=mu,mu}function TL(So,mu){var P0=jL(So),wu=jL(mu);return{start:{offset:So,line:P0.line,column:P0.column},end:{offset:mu,line:wu.line,column:wu.column}}}function OL(So){au<X3||(au>X3&&(X3=au,sR=[]),sR.push(So))}function t$(So,mu,P0){return new c(c.buildMessage(So,mu),So,mu,P0)}function r$(){var So,mu,P0,wu,ax;for(So=au,mu=[],P0=UL();P0!==j;)mu.push(P0),P0=UL();if(mu!==j)if(P0=X1(),P0===j&&(P0=null),P0!==j){for(wu=[],ax=UL();ax!==j;)wu.push(ax),ax=UL();wu!==j?(mu=st(P0),So=mu):(au=So,So=j)}else au=So,So=j;else au=So,So=j;return So}function X1(){var So,mu,P0,wu,ax,q3;if(So=au,mu=rS(),mu!==j){for(P0=[],wu=au,ax=[],q3=UL();q3!==j;)ax.push(q3),q3=UL();for(ax!==j?(q3=rS(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;){for(P0.push(wu),wu=au,ax=[],q3=UL();q3!==j;)ax.push(q3),q3=UL();ax!==j?(q3=rS(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j)}P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function rS(){var So,mu,P0,wu,ax,q3;if(So=au,mu=IO(),mu!==j){for(P0=[],wu=au,ax=[],q3=UL();q3!==j;)ax.push(q3),q3=UL();for(ax!==j?(q3=SA(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;){for(P0.push(wu),wu=au,ax=[],q3=UL();q3!==j;)ax.push(q3),q3=UL();ax!==j?(q3=SA(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j)}P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function SA(){var So;return So=IL(),So===j&&(So=WL(),So===j&&(So=a$(),So===j&&(So=i$(),So===j&&(So=u$(),So===j&&(So=S$(),So===j&&(So=Vv(),So===j&&(So=qx(),So===j&&(So=CL())))))))),So}function IO(){var So,mu,P0,wu,ax,q3,g$;if(So=au,ut.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(gt)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=LL(),wu!==j?(ax=au,q3=BL(),q3===j&&(q3=null),q3!==j?(g$=n$(),g$!==j?(q3=[q3,g$],ax=q3):(au=ax,ax=j)):(au=ax,ax=j),ax===j&&(ax=null),ax!==j?(mu=yt(mu,wu,ax),So=mu):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function IL(){var So,mu;return So=au,wt.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(Ct)),mu!==j&&(mu=Pt()),So=mu,So}function WL(){var So,mu,P0,wu;if(So=au,At.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(Tt)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=n$(),wu!==j?(mu=kt(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function n$(){var So,mu,P0,wu,ax,q3;if(So=au,mu=LL(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=LL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=LL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function a$(){var So,mu,P0,wu;if(So=au,It.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(Lt)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=d$(),wu!==j?(mu=Ft(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function d$(){var So,mu,P0,wu,ax,q3;if(So=au,mu=GL(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=GL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=GL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function i$(){var So,mu,P0,wu;if(So=au,Nt.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(Ht)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=d$(),wu!==j?(mu=dr(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function u$(){var So,mu,P0,wu;if(So=au,hs.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(us)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=l$(),wu!==j?(mu=kt(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function l$(){var So,mu,P0,wu,ax,q3;if(So=au,mu=x$(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=x$(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=x$(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function x$(){var So,mu,P0,wu,ax,q3;return So=au,mu=LL(),mu!==j?(P0=BL(),P0===j&&(P0=null),P0!==j?(wu=LL(),wu!==j?(ax=BL(),ax===j&&(ax=null),ax!==j?(q3=LL(),q3!==j?(mu=hn(mu,wu,q3),So=mu):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j),So}function S$(){var So,mu,P0,wu;if(So=au,un.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(bo)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=E$(),wu!==j?(mu=kt(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function E$(){var So,mu,P0,wu,ax,q3;if(So=au,mu=b$(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=b$(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=b$(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function b$(){var So,mu,P0,wu;return So=au,mu=LL(),mu!==j?(P0=BL(),P0===j&&(P0=null),P0!==j?(wu=LL(),wu!==j?(mu=_s(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)):(au=So,So=j),So}function Vv(){var So,mu,P0,wu;if(So=au,gn.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(Gr)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=eS(),wu!==j?(mu=kt(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function eS(){var So,mu,P0,wu,ax,q3;if(So=au,mu=eE(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=eE(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=eE(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function eE(){var So,mu,P0,wu;return So=au,mu=LL(),mu!==j?(P0=BL(),P0===j&&(P0=null),P0!==j?(wu=LL(),wu!==j?(mu=ds(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)):(au=So,So=j),So}function qx(){var So,mu,P0,wu;if(So=au,Zn.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(Nn)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=tE(),wu!==j?(mu=kt(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function tE(){var So,mu,P0,wu,ax,q3;if(So=au,mu=LL(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=LL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=LL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function CL(){var So,mu,P0,wu;if(So=au,Qn.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(bu)),mu!==j){for(P0=[],wu=UL();wu!==j;)P0.push(wu),wu=UL();P0!==j?(wu=FL(),wu!==j?(mu=kt(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)}else au=So,So=j;return So}function FL(){var So,mu,P0,wu,ax,q3;if(So=au,mu=VL(),mu!==j){for(P0=[],wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=VL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);wu!==j;)P0.push(wu),wu=au,ax=BL(),ax===j&&(ax=null),ax!==j?(q3=VL(),q3!==j?(ax=[ax,q3],wu=ax):(au=wu,wu=j)):(au=wu,wu=j);P0!==j?(mu=rt(mu,P0),So=mu):(au=So,So=j)}else au=So,So=j;return So}function VL(){var So,mu,P0,wu,ax,q3,g$,P$,_$,C$,w$,A$;return So=au,mu=e$(),mu!==j?(P0=BL(),P0===j&&(P0=null),P0!==j?(wu=e$(),wu!==j?(ax=BL(),ax===j&&(ax=null),ax!==j?(q3=GL(),q3!==j?(g$=BL(),g$!==j?(P$=qL(),P$!==j?(_$=BL(),_$===j&&(_$=null),_$!==j?(C$=qL(),C$!==j?(w$=BL(),w$===j&&(w$=null),w$!==j?(A$=LL(),A$!==j?(mu=ou(mu,wu,q3,P$,C$,A$),So=mu):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j)):(au=So,So=j),So}function LL(){var So,mu,P0,wu;return So=au,mu=GL(),mu!==j?(P0=BL(),P0===j&&(P0=null),P0!==j?(wu=GL(),wu!==j?(mu=g0(mu,wu),So=mu):(au=So,So=j)):(au=So,So=j)):(au=So,So=j),So}function e$(){var So,mu;return So=au,mu=h$(),mu===j&&(mu=c$()),mu!==j&&(mu=Su(mu)),So=mu,So}function GL(){var So,mu,P0,wu;return So=au,mu=au,P0=HL(),P0===j&&(P0=null),P0!==j?(wu=h$(),wu!==j?(P0=[P0,wu],mu=P0):(au=mu,mu=j)):(au=mu,mu=j),mu===j&&(mu=au,P0=HL(),P0===j&&(P0=null),P0!==j?(wu=c$(),wu!==j?(P0=[P0,wu],mu=P0):(au=mu,mu=j)):(au=mu,mu=j)),mu!==j&&(mu=l1(mu)),So=mu,So}function qL(){var So,mu;return So=au,B0.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(a1)),mu!==j&&(mu=q1(mu)),So=mu,So}function BL(){var So,mu,P0,wu,ax;if(So=au,mu=[],P0=UL(),P0!==j)for(;P0!==j;)mu.push(P0),P0=UL();else mu=j;if(mu!==j)if(P0=o$(),P0===j&&(P0=null),P0!==j){for(wu=[],ax=UL();ax!==j;)wu.push(ax),ax=UL();wu!==j?(mu=[mu,P0,wu],So=mu):(au=So,So=j)}else au=So,So=j;else au=So,So=j;if(So===j){if(So=au,mu=au,P0=o$(),P0!==j){for(wu=[],ax=UL();ax!==j;)wu.push(ax),ax=UL();wu!==j?(P0=[P0,wu],mu=P0):(au=mu,mu=j)}else au=mu,mu=j;mu!==j&&(mu=ox()),So=mu}return So}function o$(){var So;return g.charCodeAt(au)===44?(So=U_,au++):(So=j,OL(tS)),So}function h$(){var So,mu,P0,wu;return So=au,mu=au,P0=f$(),P0!==j?(wu=s$(),wu===j&&(wu=null),wu!==j?(P0=[P0,wu],mu=P0):(au=mu,mu=j)):(au=mu,mu=j),mu===j&&(mu=au,P0=c$(),P0!==j?(wu=s$(),wu!==j?(P0=[P0,wu],mu=P0):(au=mu,mu=j)):(au=mu,mu=j)),mu!==j&&(mu=iS(mu)),So=mu,So}function f$(){var So,mu,P0,wu,ax;return So=au,mu=au,P0=c$(),P0===j&&(P0=null),P0!==j?(g.charCodeAt(au)===46?(wu=wA,au++):(wu=j,OL(pO)),wu!==j?(ax=c$(),ax!==j?(P0=[P0,wu,ax],mu=P0):(au=mu,mu=j)):(au=mu,mu=j)):(au=mu,mu=j),mu===j&&(mu=au,P0=c$(),P0!==j?(g.charCodeAt(au)===46?(wu=wA,au++):(wu=j,OL(pO)),wu!==j?(P0=[P0,wu],mu=P0):(au=mu,mu=j)):(au=mu,mu=j)),mu!==j&&(mu=iS(mu)),So=mu,So}function s$(){var So,mu,P0,wu,ax;return So=au,mu=au,aR.test(g.charAt(au))?(P0=g.charAt(au),au++):(P0=j,OL(fD)),P0!==j?(wu=HL(),wu===j&&(wu=null),wu!==j?(ax=c$(),ax!==j?(P0=[P0,wu,ax],mu=P0):(au=mu,mu=j)):(au=mu,mu=j)):(au=mu,mu=j),mu!==j&&(mu=iS(mu)),So=mu,So}function HL(){var So;return AA.test(g.charAt(au))?(So=g.charAt(au),au++):(So=j,OL(oI)),So}function c$(){var So,mu,P0;if(So=au,mu=[],mO.test(g.charAt(au))?(P0=g.charAt(au),au++):(P0=j,OL(sp)),P0!==j)for(;P0!==j;)mu.push(P0),mO.test(g.charAt(au))?(P0=g.charAt(au),au++):(P0=j,OL(sp));else mu=j;return mu!==j&&(mu=xu(mu)),So=mu,So}function UL(){var So,mu;return So=au,ux.test(g.charAt(au))?(mu=g.charAt(au),au++):(mu=j,OL(tA)),mu!==j&&(mu=ox()),So=mu,So}function m$(So,mu){if(!mu)return[So];for(var P0=[So],wu=0,ax=mu.length;wu<ax;wu++)P0[wu+1]=mu[wu][1];return P0}var y$={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var v$ in y$)y$[v$.toUpperCase()]=y$[v$];function p$(So,mu){mu||(mu=[{}]);for(var P0=mu.length;P0--;){var wu={code:So,command:y$[So]};So==So.toLowerCase()&&(wu.relative=!0);for(var ax in mu[P0])wu[ax]=mu[P0][ax];mu[P0]=wu}return mu}if(N_=_e(),N_!==j&&au===g.length)return N_;throw N_!==j&&au<g.length&&OL(PL()),t$(sR,X3<g.length?g.charAt(X3):null,X3<g.length?TL(X3,X3+1):TL(X3,X3))}o.exports={SyntaxError:c,parse:d}}),Y_=zi((e,o)=>{var a=Y3().parse;a.parseSVG=a,a.makeAbsolute=c,o.exports=a;function c(d){var g,b={x:0,y:0},j={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return d.forEach(function($){$.command==="moveto"&&(g=$),$.x0=b.x,$.y0=b.y;for(var _e in j)_e in $&&($[_e]+=$.relative?$[j[_e]]:0);"x"in $||($.x=b.x),"y"in $||($.y=b.y),$.relative=!1,$.code=$.code.toUpperCase(),$.command=="closepath"&&($.x=g.x,$.y=g.y),b=$}),d}}),ML=zi((e,o)=>{function a(c){for(var d=new Array(c),g=0;g<c;++g)d[g]=g;return d}o.exports=a}),DL=zi((e,o)=>{o.exports=function(d){return d!=null&&(a(d)||c(d)||!!d._isBuffer)};function a(d){return!!d.constructor&&typeof d.constructor.isBuffer=="function"&&d.constructor.isBuffer(d)}function c(d){return typeof d.readFloatLE=="function"&&typeof d.slice=="function"&&a(d.slice(0,0))}}),Uf=zi((e,o)=>{var a=ML(),c=DL(),d=typeof Float64Array<"u";function g(rt,ut){return rt[0]-ut[0]}function b(){var rt=this.stride,ut=new Array(rt.length),gt;for(gt=0;gt<ut.length;++gt)ut[gt]=[Math.abs(rt[gt]),gt];ut.sort(g);var yt=new Array(ut.length);for(gt=0;gt<yt.length;++gt)yt[gt]=ut[gt][1];return yt}function j(rt,ut){var gt=["View",ut,"d",rt].join("");ut<0&&(gt="View_Nil"+rt);var yt=rt==="generic";if(ut===-1){var wt="function "+gt+"(a){this.data=a;};var proto="+gt+".prototype;proto.dtype='"+rt+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+gt+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+gt+"(a){return new "+gt+"(a);}",dr=new Function(wt);return dr()}else if(ut===0){var wt="function "+gt+"(a,d) {this.data = a;this.offset = d};var proto="+gt+".prototype;proto.dtype='"+rt+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+gt+"_copy() {return new "+gt+"(this.data,this.offset)};proto.pick=function "+gt+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+gt+"_get(){return "+(yt?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+gt+"_set(v){return "+(yt?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+gt+"(a,b,c,d){return new "+gt+"(a,d)}",dr=new Function("TrivialArray",wt);return dr(_e[rt][0])}var wt=["'use strict'"],Ct=a(ut),Pt=Ct.map(function(hs){return"i"+hs}),At="this.offset+"+Ct.map(function(hs){return"this.stride["+hs+"]*i"+hs}).join("+"),Tt=Ct.map(function(hs){return"b"+hs}).join(","),kt=Ct.map(function(hs){return"c"+hs}).join(",");wt.push("function "+gt+"(a,"+Tt+","+kt+",d){this.data=a","this.shape=["+Tt+"]","this.stride=["+kt+"]","this.offset=d|0}","var proto="+gt+".prototype","proto.dtype='"+rt+"'","proto.dimension="+ut),wt.push("Object.defineProperty(proto,'size',{get:function "+gt+"_size(){return "+Ct.map(function(hs){return"this.shape["+hs+"]"}).join("*"),"}})"),ut===1?wt.push("proto.order=[0]"):(wt.push("Object.defineProperty(proto,'order',{get:"),ut<4?(wt.push("function "+gt+"_order(){"),ut===2?wt.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):ut===3&&wt.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):wt.push("ORDER})")),wt.push("proto.set=function "+gt+"_set("+Pt.join(",")+",v){"),yt?wt.push("return this.data.set("+At+",v)}"):wt.push("return this.data["+At+"]=v}"),wt.push("proto.get=function "+gt+"_get("+Pt.join(",")+"){"),yt?wt.push("return this.data.get("+At+")}"):wt.push("return this.data["+At+"]}"),wt.push("proto.index=function "+gt+"_index(",Pt.join(),"){return "+At+"}"),wt.push("proto.hi=function "+gt+"_hi("+Pt.join(",")+"){return new "+gt+"(this.data,"+Ct.map(function(hs){return["(typeof i",hs,"!=='number'||i",hs,"<0)?this.shape[",hs,"]:i",hs,"|0"].join("")}).join(",")+","+Ct.map(function(hs){return"this.stride["+hs+"]"}).join(",")+",this.offset)}");var It=Ct.map(function(hs){return"a"+hs+"=this.shape["+hs+"]"}),Lt=Ct.map(function(hs){return"c"+hs+"=this.stride["+hs+"]"});wt.push("proto.lo=function "+gt+"_lo("+Pt.join(",")+"){var b=this.offset,d=0,"+It.join(",")+","+Lt.join(","));for(var Ft=0;Ft<ut;++Ft)wt.push("if(typeof i"+Ft+"==='number'&&i"+Ft+">=0){d=i"+Ft+"|0;b+=c"+Ft+"*d;a"+Ft+"-=d}");wt.push("return new "+gt+"(this.data,"+Ct.map(function(hs){return"a"+hs}).join(",")+","+Ct.map(function(hs){return"c"+hs}).join(",")+",b)}"),wt.push("proto.step=function "+gt+"_step("+Pt.join(",")+"){var "+Ct.map(function(hs){return"a"+hs+"=this.shape["+hs+"]"}).join(",")+","+Ct.map(function(hs){return"b"+hs+"=this.stride["+hs+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var Ft=0;Ft<ut;++Ft)wt.push("if(typeof i"+Ft+"==='number'){d=i"+Ft+"|0;if(d<0){c+=b"+Ft+"*(a"+Ft+"-1);a"+Ft+"=ceil(-a"+Ft+"/d)}else{a"+Ft+"=ceil(a"+Ft+"/d)}b"+Ft+"*=d}");wt.push("return new "+gt+"(this.data,"+Ct.map(function(hs){return"a"+hs}).join(",")+","+Ct.map(function(hs){return"b"+hs}).join(",")+",c)}");for(var Nt=new Array(ut),Ht=new Array(ut),Ft=0;Ft<ut;++Ft)Nt[Ft]="a[i"+Ft+"]",Ht[Ft]="b[i"+Ft+"]";wt.push("proto.transpose=function "+gt+"_transpose("+Pt+"){"+Pt.map(function(hs,us){return hs+"=("+hs+"===undefined?"+us+":"+hs+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+gt+"(this.data,"+Nt.join(",")+","+Ht.join(",")+",this.offset)}"),wt.push("proto.pick=function "+gt+"_pick("+Pt+"){var a=[],b=[],c=this.offset");for(var Ft=0;Ft<ut;++Ft)wt.push("if(typeof i"+Ft+"==='number'&&i"+Ft+">=0){c=(c+this.stride["+Ft+"]*i"+Ft+")|0}else{a.push(this.shape["+Ft+"]);b.push(this.stride["+Ft+"])}");wt.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),wt.push("return function construct_"+gt+"(data,shape,stride,offset){return new "+gt+"(data,"+Ct.map(function(hs){return"shape["+hs+"]"}).join(",")+","+Ct.map(function(hs){return"stride["+hs+"]"}).join(",")+",offset)}");var dr=new Function("CTOR_LIST","ORDER",wt.join(`
`));return dr(_e[rt],b)}function $(rt){if(c(rt))return"buffer";if(d)switch(Object.prototype.toString.call(rt)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(rt)?"array":"generic"}var _e={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function st(rt,ut,gt,yt){if(rt===void 0){var kt=_e.array[0];return kt([])}else typeof rt=="number"&&(rt=[rt]);ut===void 0&&(ut=[rt.length]);var wt=ut.length;if(gt===void 0){gt=new Array(wt);for(var Ct=wt-1,Pt=1;Ct>=0;--Ct)gt[Ct]=Pt,Pt*=ut[Ct]}if(yt===void 0){yt=0;for(var Ct=0;Ct<wt;++Ct)gt[Ct]<0&&(yt-=(ut[Ct]-1)*gt[Ct])}for(var At=$(rt),Tt=_e[At];Tt.length<=wt+1;)Tt.push(j(At,Tt.length-1));var kt=Tt[wt+1];return kt(rt,ut,gt,yt)}o.exports=st}),RL=zi((e,o)=>{function a(g,b){for(var j=1,$=g.length,_e=g[0],st=g[0],rt=1;rt<$;++rt)if(st=_e,_e=g[rt],b(_e,st)){if(rt===j){j++;continue}g[j++]=_e}return g.length=j,g}function c(g){for(var b=1,j=g.length,$=g[0],_e=g[0],st=1;st<j;++st,_e=$)if(_e=$,$=g[st],$!==_e){if(st===b){b++;continue}g[b++]=$}return g.length=b,g}function d(g,b,j){return g.length===0?g:b?(j||g.sort(b),a(g,b)):(j||g.sort(),c(g))}o.exports=d}),NL=zi((e,o)=>{var a=RL();function c(_e,st,rt){var ut=_e.length,gt=st.arrayArgs.length,yt=st.indexArgs.length>0,wt=[],Ct=[],Pt=0,At=0,Tt,kt;for(Tt=0;Tt<ut;++Tt)Ct.push(["i",Tt,"=0"].join(""));for(kt=0;kt<gt;++kt)for(Tt=0;Tt<ut;++Tt)At=Pt,Pt=_e[Tt],Tt===0?Ct.push(["d",kt,"s",Tt,"=t",kt,"p",Pt].join("")):Ct.push(["d",kt,"s",Tt,"=(t",kt,"p",Pt,"-s",At,"*t",kt,"p",At,")"].join(""));for(Ct.length>0&&wt.push("var "+Ct.join(",")),Tt=ut-1;Tt>=0;--Tt)Pt=_e[Tt],wt.push(["for(i",Tt,"=0;i",Tt,"<s",Pt,";++i",Tt,"){"].join(""));for(wt.push(rt),Tt=0;Tt<ut;++Tt){for(At=Pt,Pt=_e[Tt],kt=0;kt<gt;++kt)wt.push(["p",kt,"+=d",kt,"s",Tt].join(""));yt&&(Tt>0&&wt.push(["index[",At,"]-=s",At].join("")),wt.push(["++index[",Pt,"]"].join(""))),wt.push("}")}return wt.join(`
`)}function d(_e,st,rt,ut){for(var gt=st.length,yt=rt.arrayArgs.length,wt=rt.blockSize,Ct=rt.indexArgs.length>0,Pt=[],At=0;At<yt;++At)Pt.push(["var offset",At,"=p",At].join(""));for(var At=_e;At<gt;++At)Pt.push(["for(var j"+At+"=SS[",st[At],"]|0;j",At,">0;){"].join("")),Pt.push(["if(j",At,"<",wt,"){"].join("")),Pt.push(["s",st[At],"=j",At].join("")),Pt.push(["j",At,"=0"].join("")),Pt.push(["}else{s",st[At],"=",wt].join("")),Pt.push(["j",At,"-=",wt,"}"].join("")),Ct&&Pt.push(["index[",st[At],"]=j",At].join(""));for(var At=0;At<yt;++At){for(var Tt=["offset"+At],kt=_e;kt<gt;++kt)Tt.push(["j",kt,"*t",At,"p",st[kt]].join(""));Pt.push(["p",At,"=(",Tt.join("+"),")"].join(""))}Pt.push(c(st,rt,ut));for(var At=_e;At<gt;++At)Pt.push("}");return Pt.join(`
`)}function g(_e){for(var st=0,rt=_e[0].length;st<rt;){for(var ut=1;ut<_e.length;++ut)if(_e[ut][st]!==_e[0][st])return st;++st}return st}function b(_e,st,rt){for(var ut=_e.body,gt=[],yt=[],wt=0;wt<_e.args.length;++wt){var Ct=_e.args[wt];if(!(Ct.count<=0)){var Pt=new RegExp(Ct.name,"g"),At="",Tt=st.arrayArgs.indexOf(wt);switch(st.argTypes[wt]){case"offset":var kt=st.offsetArgIndex.indexOf(wt),It=st.offsetArgs[kt];Tt=It.array,At="+q"+kt;case"array":At="p"+Tt+At;var Lt="l"+wt,Ft="a"+Tt;if(st.arrayBlockIndices[Tt]===0)Ct.count===1?rt[Tt]==="generic"?Ct.lvalue?(gt.push(["var ",Lt,"=",Ft,".get(",At,")"].join("")),ut=ut.replace(Pt,Lt),yt.push([Ft,".set(",At,",",Lt,")"].join(""))):ut=ut.replace(Pt,[Ft,".get(",At,")"].join("")):ut=ut.replace(Pt,[Ft,"[",At,"]"].join("")):rt[Tt]==="generic"?(gt.push(["var ",Lt,"=",Ft,".get(",At,")"].join("")),ut=ut.replace(Pt,Lt),Ct.lvalue&&yt.push([Ft,".set(",At,",",Lt,")"].join(""))):(gt.push(["var ",Lt,"=",Ft,"[",At,"]"].join("")),ut=ut.replace(Pt,Lt),Ct.lvalue&&yt.push([Ft,"[",At,"]=",Lt].join("")));else{for(var Nt=[Ct.name],Ht=[At],dr=0;dr<Math.abs(st.arrayBlockIndices[Tt]);dr++)Nt.push("\\s*\\[([^\\]]+)\\]"),Ht.push("$"+(dr+1)+"*t"+Tt+"b"+dr);if(Pt=new RegExp(Nt.join(""),"g"),At=Ht.join("+"),rt[Tt]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");ut=ut.replace(Pt,[Ft,"[",At,"]"].join(""))}break;case"scalar":ut=ut.replace(Pt,"Y"+st.scalarArgs.indexOf(wt));break;case"index":ut=ut.replace(Pt,"index");break;case"shape":ut=ut.replace(Pt,"shape");break}}}return[gt.join(`
`),ut,yt.join(`
`)].join(`
`).trim()}function j(_e){for(var st=new Array(_e.length),rt=!0,ut=0;ut<_e.length;++ut){var gt=_e[ut],yt=gt.match(/\d+/);yt?yt=yt[0]:yt="",gt.charAt(0)===0?st[ut]="u"+gt.charAt(1)+yt:st[ut]=gt.charAt(0)+yt,ut>0&&(rt=rt&&st[ut]===st[ut-1])}return rt?st[0]:st.join("")}function $(_e,st){for(var rt=st[1].length-Math.abs(_e.arrayBlockIndices[0])|0,ut=new Array(_e.arrayArgs.length),gt=new Array(_e.arrayArgs.length),yt=0;yt<_e.arrayArgs.length;++yt)gt[yt]=st[2*yt],ut[yt]=st[2*yt+1];for(var wt=[],Ct=[],Pt=[],At=[],Tt=[],yt=0;yt<_e.arrayArgs.length;++yt){_e.arrayBlockIndices[yt]<0?(Pt.push(0),At.push(rt),wt.push(rt),Ct.push(rt+_e.arrayBlockIndices[yt])):(Pt.push(_e.arrayBlockIndices[yt]),At.push(_e.arrayBlockIndices[yt]+rt),wt.push(0),Ct.push(_e.arrayBlockIndices[yt]));for(var kt=[],It=0;It<ut[yt].length;It++)Pt[yt]<=ut[yt][It]&&ut[yt][It]<At[yt]&&kt.push(ut[yt][It]-Pt[yt]);Tt.push(kt)}for(var Lt=["SS"],Ft=["'use strict'"],Nt=[],It=0;It<rt;++It)Nt.push(["s",It,"=SS[",It,"]"].join(""));for(var yt=0;yt<_e.arrayArgs.length;++yt){Lt.push("a"+yt),Lt.push("t"+yt),Lt.push("p"+yt);for(var It=0;It<rt;++It)Nt.push(["t",yt,"p",It,"=t",yt,"[",Pt[yt]+It,"]"].join(""));for(var It=0;It<Math.abs(_e.arrayBlockIndices[yt]);++It)Nt.push(["t",yt,"b",It,"=t",yt,"[",wt[yt]+It,"]"].join(""))}for(var yt=0;yt<_e.scalarArgs.length;++yt)Lt.push("Y"+yt);if(_e.shapeArgs.length>0&&Nt.push("shape=SS.slice(0)"),_e.indexArgs.length>0){for(var Ht=new Array(rt),yt=0;yt<rt;++yt)Ht[yt]="0";Nt.push(["index=[",Ht.join(","),"]"].join(""))}for(var yt=0;yt<_e.offsetArgs.length;++yt){for(var dr=_e.offsetArgs[yt],hs=[],It=0;It<dr.offset.length;++It)dr.offset[It]!==0&&(dr.offset[It]===1?hs.push(["t",dr.array,"p",It].join("")):hs.push([dr.offset[It],"*t",dr.array,"p",It].join("")));hs.length===0?Nt.push("q"+yt+"=0"):Nt.push(["q",yt,"=",hs.join("+")].join(""))}var us=a([].concat(_e.pre.thisVars).concat(_e.body.thisVars).concat(_e.post.thisVars));Nt=Nt.concat(us),Nt.length>0&&Ft.push("var "+Nt.join(","));for(var yt=0;yt<_e.arrayArgs.length;++yt)Ft.push("p"+yt+"|=0");_e.pre.body.length>3&&Ft.push(b(_e.pre,_e,gt));var hn=b(_e.body,_e,gt),un=g(Tt);un<rt?Ft.push(d(un,Tt[0],_e,hn)):Ft.push(c(Tt[0],_e,hn)),_e.post.body.length>3&&Ft.push(b(_e.post,_e,gt)),_e.debug&&console.log("-----Generated cwise routine for ",st,`:
`+Ft.join(`
`)+`
----------`);var bo=[_e.funcName||"unnamed","_cwise_loop_",ut[0].join("s"),"m",un,j(gt)].join(""),_s=new Function(["function ",bo,"(",Lt.join(","),"){",Ft.join(`
`),"} return ",bo].join(""));return _s()}o.exports=$}),kL=zi((e,o)=>{var a=NL();function c(d){var g=["'use strict'","var CACHED={}"],b=[],j=d.funcName+"_cwise_thunk";g.push(["return function ",j,"(",d.shimArgs.join(","),"){"].join(""));for(var $=[],_e=[],st=[["array",d.arrayArgs[0],".shape.slice(",Math.max(0,d.arrayBlockIndices[0]),d.arrayBlockIndices[0]<0?","+d.arrayBlockIndices[0]+")":")"].join("")],rt=[],ut=[],gt=0;gt<d.arrayArgs.length;++gt){var yt=d.arrayArgs[gt];b.push(["t",yt,"=array",yt,".dtype,","r",yt,"=array",yt,".order"].join("")),$.push("t"+yt),$.push("r"+yt),_e.push("t"+yt),_e.push("r"+yt+".join()"),st.push("array"+yt+".data"),st.push("array"+yt+".stride"),st.push("array"+yt+".offset|0"),gt>0&&(rt.push("array"+d.arrayArgs[0]+".shape.length===array"+yt+".shape.length+"+(Math.abs(d.arrayBlockIndices[0])-Math.abs(d.arrayBlockIndices[gt]))),ut.push("array"+d.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,d.arrayBlockIndices[0])+"]===array"+yt+".shape[shapeIndex+"+Math.max(0,d.arrayBlockIndices[gt])+"]"))}d.arrayArgs.length>1&&(g.push("if (!("+rt.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),g.push("for(var shapeIndex=array"+d.arrayArgs[0]+".shape.length-"+Math.abs(d.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),g.push("if (!("+ut.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),g.push("}"));for(var gt=0;gt<d.scalarArgs.length;++gt)st.push("scalar"+d.scalarArgs[gt]);b.push(["type=[",_e.join(","),"].join()"].join("")),b.push("proc=CACHED[type]"),g.push("var "+b.join(",")),g.push(["if(!proc){","CACHED[type]=proc=compile([",$.join(","),"])}","return proc(",st.join(","),")}"].join("")),d.debug&&console.log(`-----Generated thunk:
`+g.join(`
`)+`
----------`);var wt=new Function("compile",g.join(`
`));return wt(a.bind(void 0,d))}o.exports=c}),zL=zi((e,o)=>{var a=kL();function c(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function d(g){var b=new c;b.pre=g.pre,b.body=g.body,b.post=g.post;var j=g.args.slice(0);b.argTypes=j;for(var $=0;$<j.length;++$){var _e=j[$];if(_e==="array"||typeof _e=="object"&&_e.blockIndices){if(b.argTypes[$]="array",b.arrayArgs.push($),b.arrayBlockIndices.push(_e.blockIndices?_e.blockIndices:0),b.shimArgs.push("array"+$),$<b.pre.args.length&&b.pre.args[$].count>0)throw new Error("cwise: pre() block may not reference array args");if($<b.post.args.length&&b.post.args[$].count>0)throw new Error("cwise: post() block may not reference array args")}else if(_e==="scalar")b.scalarArgs.push($),b.shimArgs.push("scalar"+$);else if(_e==="index"){if(b.indexArgs.push($),$<b.pre.args.length&&b.pre.args[$].count>0)throw new Error("cwise: pre() block may not reference array index");if($<b.body.args.length&&b.body.args[$].lvalue)throw new Error("cwise: body() block may not write to array index");if($<b.post.args.length&&b.post.args[$].count>0)throw new Error("cwise: post() block may not reference array index")}else if(_e==="shape"){if(b.shapeArgs.push($),$<b.pre.args.length&&b.pre.args[$].lvalue)throw new Error("cwise: pre() block may not write to array shape");if($<b.body.args.length&&b.body.args[$].lvalue)throw new Error("cwise: body() block may not write to array shape");if($<b.post.args.length&&b.post.args[$].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof _e=="object"&&_e.offset)b.argTypes[$]="offset",b.offsetArgs.push({array:_e.array,offset:_e.offset}),b.offsetArgIndex.push($);else throw new Error("cwise: Unknown argument type "+j[$])}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>j.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>j.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>j.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!g.printCode||!!g.debug,b.funcName=g.funcName||"cwise",b.blockSize=g.blockSize||64,a(b)}o.exports=d}),Gf=zi(e=>{var o=zL(),a={body:"",args:[],thisVars:[],localVars:[]};function c(ut){if(!ut)return a;for(var gt=0;gt<ut.args.length;++gt){var yt=ut.args[gt];gt===0?ut.args[gt]={name:yt,lvalue:!0,rvalue:!!ut.rvalue,count:ut.count||1}:ut.args[gt]={name:yt,lvalue:!1,rvalue:!0,count:1}}return ut.thisVars||(ut.thisVars=[]),ut.localVars||(ut.localVars=[]),ut}function d(ut){return o({args:ut.args,pre:c(ut.pre),body:c(ut.body),post:c(ut.proc),funcName:ut.funcName})}function g(ut){for(var gt=[],yt=0;yt<ut.args.length;++yt)gt.push("a"+yt);var wt=new Function("P",["return function ",ut.funcName,"_ndarrayops(",gt.join(","),") {P(",gt.join(","),");return a0}"].join(""));return wt(d(ut))}var b={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var ut in b){var gt=b[ut];e[ut]=g({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+gt+"c"},funcName:ut}),e[ut+"eq"]=g({args:["array","array"],body:{args:["a","b"],body:"a"+gt+"=b"},rvalue:!0,funcName:ut+"eq"}),e[ut+"s"]=g({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+gt+"s"},funcName:ut+"s"}),e[ut+"seq"]=g({args:["array","scalar"],body:{args:["a","s"],body:"a"+gt+"=s"},rvalue:!0,funcName:ut+"seq"})}})();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var ut in j){var gt=j[ut];e[ut]=g({args:["array","array"],body:{args:["a","b"],body:"a="+gt+"b"},funcName:ut}),e[ut+"eq"]=g({args:["array"],body:{args:["a"],body:"a="+gt+"a"},rvalue:!0,count:2,funcName:ut+"eq"})}})();var $={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var ut in $){var gt=$[ut];e[ut]=g({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+gt+"c"},funcName:ut}),e[ut+"s"]=g({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+gt+"s"},funcName:ut+"s"}),e[ut+"eq"]=g({args:["array","array"],body:{args:["a","b"],body:"a=a"+gt+"b"},rvalue:!0,count:2,funcName:ut+"eq"}),e[ut+"seq"]=g({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+gt+"s"},rvalue:!0,count:2,funcName:ut+"seq"})}})();var _e=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var ut=0;ut<_e.length;++ut){var gt=_e[ut];e[gt]=g({args:["array","array"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:gt}),e[gt+"eq"]=g({args:["array"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:gt+"eq"})}})();var st=["max","min","atan2","pow"];(function(){for(var ut=0;ut<st.length;++ut){var gt=st[ut];e[gt]=g({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:gt}),e[gt+"s"]=g({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:gt+"s"}),e[gt+"eq"]=g({args:["array","array"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:gt+"eq"}),e[gt+"seq"]=g({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:gt+"seq"})}})();var rt=["atan2","pow"];(function(){for(var ut=0;ut<rt.length;++ut){var gt=rt[ut];e[gt+"op"]=g({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:gt+"op"}),e[gt+"ops"]=g({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:gt+"ops"}),e[gt+"opeq"]=g({args:["array","array"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:gt+"opeq"}),e[gt+"opseq"]=g({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+gt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:gt+"opseq"})}})(),e.any=o({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=o({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=g({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=g({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=g({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=o({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),XN=zi((e,o)=>{o.exports=function(a,c){for(var d=a.split("."),g=c.split("."),b=0;b<3;b++){var j=Number(d[b]),$=Number(g[b]);if(j>$)return 1;if($>j)return-1;if(!isNaN(j)&&isNaN($))return 1;if(isNaN(j)&&!isNaN($))return-1}return 0}}),ba$1="149",ns={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sF=0,lT=1,oF=2,Gy=1,aF=2,mp=3,es=0,yi=1,tn=2,er=0,sl=1,cT=2,uT=3,hT=4,lF=5,Fu=100,cF=101,uF=102,dT=103,fT=104,hF=200,dF=201,fF=202,pF=203,zM=204,UM=205,mF=206,gF=207,yF=208,vF=209,xF=210,bF=0,SF=1,wF=2,US=3,AF=4,_F=5,EF=6,TF=7,GM=0,MF=1,CF=2,Hs=0,PF=1,DF=2,OF=3,IF=4,RF=5,jM=300,al=301,ll=302,GS=303,jS=304,ch=306,Ws=1e3,Kt=1001,HS=1002,Vt=1003,pT=1004,nS=1005,tt=1006,LF=1007,bc=1008,Ir$1=1009,BF=1010,NF=1011,HM=1012,FF=1013,js=1014,Sr$1=1015,va=1016,kF=1017,VF=1018,ol=1020,zF=1021,Qr=1023,UF=1024,GF=1025,vc=1026,cl=1027,jF=1028,HF=1029,uh=1030,WF=1031,Aw=1033,sS=33776,oS=33777,aS=33778,lS=33779,mT=35840,gT=35841,yT=35842,vT=35843,qF=36196,xT=37492,bT=37496,ST=37808,wT=37809,AT=37810,_T=37811,ET=37812,TT=37813,MT=37814,CT=37815,PT=37816,DT=37817,OT=37818,IT=37819,RT=37820,LT=37821,cS=36492,YF=36283,BT=36284,NT=36285,FT=36286,_w=2200,Ew=2201,kp=2202,fy=2300,py=2301,uS=2302,ku=2400,Vu=2401,my=2402,Tw=2500,XF=2501,Sn=3e3,at=3001,ji=3200,Mw=3201,QF=0,KF=1,wo="srgb",wp="srgb-linear",hS=7680,ZF=519,WS=35044,WM=35048,kT="300 es",qS=1035,fr$2=class{addEventListener(o,a){this._listeners===void 0&&(this._listeners={});let c=this._listeners;c[o]===void 0&&(c[o]=[]),c[o].indexOf(a)===-1&&c[o].push(a)}hasEventListener(o,a){if(this._listeners===void 0)return!1;let c=this._listeners;return c[o]!==void 0&&c[o].indexOf(a)!==-1}removeEventListener(o,a){if(this._listeners===void 0)return;let c=this._listeners[o];if(c!==void 0){let d=c.indexOf(a);d!==-1&&c.splice(d,1)}}dispatchEvent(o){if(this._listeners===void 0)return;let a=this._listeners[o.type];if(a!==void 0){o.target=this;let c=a.slice(0);for(let d=0,g=c.length;d<g;d++)c[d].call(this,o);o.target=null}}},dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],VT=1234567,yp=Math.PI/180,Ap=180/Math.PI;function ms(){let e=Math.random()*4294967295|0,o=Math.random()*4294967295|0,a=Math.random()*4294967295|0,c=Math.random()*4294967295|0;return(dn[e&255]+dn[e>>8&255]+dn[e>>16&255]+dn[e>>24&255]+"-"+dn[o&255]+dn[o>>8&255]+"-"+dn[o>>16&15|64]+dn[o>>24&255]+"-"+dn[a&63|128]+dn[a>>8&255]+"-"+dn[a>>16&255]+dn[a>>24&255]+dn[c&255]+dn[c>>8&255]+dn[c>>16&255]+dn[c>>24&255]).toLowerCase()}function gi(e,o,a){return Math.max(o,Math.min(a,e))}function Cw(e,o){return(e%o+o)%o}function JF(e,o,a,c,d){return c+(e-o)*(d-c)/(a-o)}function $F(e,o,a){return e!==o?(a-e)/(o-e):0}function vp(e,o,a){return(1-a)*e+a*o}function ek(e,o,a,c){return vp(e,o,1-Math.exp(-a*c))}function tk(e,o=1){return o-Math.abs(Cw(e,o*2)-o)}function rk(e,o,a){return e<=o?0:e>=a?1:(e=(e-o)/(a-o),e*e*(3-2*e))}function ik(e,o,a){return e<=o?0:e>=a?1:(e=(e-o)/(a-o),e*e*e*(e*(e*6-15)+10))}function nk(e,o){return e+Math.floor(Math.random()*(o-e+1))}function sk(e,o){return e+Math.random()*(o-e)}function ok(e){return e*(.5-Math.random())}function ak(e){e!==void 0&&(VT=e);let o=VT+=1831565813;return o=Math.imul(o^o>>>15,o|1),o^=o+Math.imul(o^o>>>7,o|61),((o^o>>>14)>>>0)/4294967296}function lk(e){return e*yp}function ck(e){return e*Ap}function YS(e){return(e&e-1)===0&&e!==0}function qM(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function gy(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function uk(e,o,a,c,d){let g=Math.cos,b=Math.sin,j=g(a/2),$=b(a/2),_e=g((o+c)/2),st=b((o+c)/2),rt=g((o-c)/2),ut=b((o-c)/2),gt=g((c-o)/2),yt=b((c-o)/2);switch(d){case"XYX":e.set(j*st,$*rt,$*ut,j*_e);break;case"YZY":e.set($*ut,j*st,$*rt,j*_e);break;case"ZXZ":e.set($*rt,$*ut,j*st,j*_e);break;case"XZX":e.set(j*st,$*yt,$*gt,j*_e);break;case"YXY":e.set($*gt,j*st,$*yt,j*_e);break;case"ZYZ":e.set($*yt,$*gt,j*st,j*_e);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}function ya(e,o){switch(o.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function br(e,o){switch(o.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Me=Object.freeze({__proto__:null,DEG2RAD:yp,RAD2DEG:Ap,ceilPowerOfTwo:qM,clamp:gi,damp:ek,degToRad:lk,denormalize:ya,euclideanModulo:Cw,floorPowerOfTwo:gy,generateUUID:ms,inverseLerp:$F,isPowerOfTwo:YS,lerp:vp,mapLinear:JF,normalize:br,pingpong:tk,radToDeg:ck,randFloat:sk,randFloatSpread:ok,randInt:nk,seededRandom:ak,setQuaternionFromProperEuler:uk,smootherstep:ik,smoothstep:rk}),z$2=class{constructor(o=0,a=0){z$2.prototype.isVector2=!0,this.x=o,this.y=a}get width(){return this.x}set width(o){this.x=o}get height(){return this.y}set height(o){this.y=o}set(o,a){return this.x=o,this.y=a,this}setScalar(o){return this.x=o,this.y=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setComponent(o,a){switch(o){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y)}copy(o){return this.x=o.x,this.y=o.y,this}add(o){return this.x+=o.x,this.y+=o.y,this}addScalar(o){return this.x+=o,this.y+=o,this}addVectors(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this}addScaledVector(o,a){return this.x+=o.x*a,this.y+=o.y*a,this}sub(o){return this.x-=o.x,this.y-=o.y,this}subScalar(o){return this.x-=o,this.y-=o,this}subVectors(o,a){return this.x=o.x-a.x,this.y=o.y-a.y,this}multiply(o){return this.x*=o.x,this.y*=o.y,this}multiplyScalar(o){return this.x*=o,this.y*=o,this}divide(o){return this.x/=o.x,this.y/=o.y,this}divideScalar(o){return this.multiplyScalar(1/o)}applyMatrix3(o){let a=this.x,c=this.y,d=o.elements;return this.x=d[0]*a+d[3]*c+d[6],this.y=d[1]*a+d[4]*c+d[7],this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this}clamp(o,a){return this.x=Math.max(o.x,Math.min(a.x,this.x)),this.y=Math.max(o.y,Math.min(a.y,this.y)),this}clampScalar(o,a){return this.x=Math.max(o,Math.min(a,this.x)),this.y=Math.max(o,Math.min(a,this.y)),this}clampLength(o,a){let c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(o,Math.min(a,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(o){return this.x*o.x+this.y*o.y}cross(o){return this.x*o.y-this.y*o.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){let a=this.x-o.x,c=this.y-o.y;return a*a+c*c}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,a){return this.x+=(o.x-this.x)*a,this.y+=(o.y-this.y)*a,this}lerpVectors(o,a,c){return this.x=o.x+(a.x-o.x)*c,this.y=o.y+(a.y-o.y)*c,this}equals(o){return o.x===this.x&&o.y===this.y}fromArray(o,a=0){return this.x=o[a],this.y=o[a+1],this}toArray(o=[],a=0){return o[a]=this.x,o[a+1]=this.y,o}fromBufferAttribute(o,a){return this.x=o.getX(a),this.y=o.getY(a),this}rotateAround(o,a){let c=Math.cos(a),d=Math.sin(a),g=this.x-o.x,b=this.y-o.y;return this.x=g*c-b*d+o.x,this.y=g*d+b*c+o.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},nr=class{constructor(){nr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,o,a,c,d,g,b,j,$){let _e=this.elements;return _e[0]=e,_e[1]=c,_e[2]=b,_e[3]=o,_e[4]=d,_e[5]=j,_e[6]=a,_e[7]=g,_e[8]=$,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let o=this.elements,a=e.elements;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],this}extractBasis(e,o,a){return e.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let o=e.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){let a=e.elements,c=o.elements,d=this.elements,g=a[0],b=a[3],j=a[6],$=a[1],_e=a[4],st=a[7],rt=a[2],ut=a[5],gt=a[8],yt=c[0],wt=c[3],Ct=c[6],Pt=c[1],At=c[4],Tt=c[7],kt=c[2],It=c[5],Lt=c[8];return d[0]=g*yt+b*Pt+j*kt,d[3]=g*wt+b*At+j*It,d[6]=g*Ct+b*Tt+j*Lt,d[1]=$*yt+_e*Pt+st*kt,d[4]=$*wt+_e*At+st*It,d[7]=$*Ct+_e*Tt+st*Lt,d[2]=rt*yt+ut*Pt+gt*kt,d[5]=rt*wt+ut*At+gt*It,d[8]=rt*Ct+ut*Tt+gt*Lt,this}multiplyScalar(e){let o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=e,o[4]*=e,o[7]*=e,o[2]*=e,o[5]*=e,o[8]*=e,this}determinant(){let e=this.elements,o=e[0],a=e[1],c=e[2],d=e[3],g=e[4],b=e[5],j=e[6],$=e[7],_e=e[8];return o*g*_e-o*b*$-a*d*_e+a*b*j+c*d*$-c*g*j}invert(){let e=this.elements,o=e[0],a=e[1],c=e[2],d=e[3],g=e[4],b=e[5],j=e[6],$=e[7],_e=e[8],st=_e*g-b*$,rt=b*j-_e*d,ut=$*d-g*j,gt=o*st+a*rt+c*ut;if(gt===0)return this.set(0,0,0,0,0,0,0,0,0);let yt=1/gt;return e[0]=st*yt,e[1]=(c*$-_e*a)*yt,e[2]=(b*a-c*g)*yt,e[3]=rt*yt,e[4]=(_e*o-c*j)*yt,e[5]=(c*d-b*o)*yt,e[6]=ut*yt,e[7]=(a*j-$*o)*yt,e[8]=(g*o-a*d)*yt,this}transpose(){let e,o=this.elements;return e=o[1],o[1]=o[3],o[3]=e,e=o[2],o[2]=o[6],o[6]=e,e=o[5],o[5]=o[7],o[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let o=this.elements;return e[0]=o[0],e[1]=o[3],e[2]=o[6],e[3]=o[1],e[4]=o[4],e[5]=o[7],e[6]=o[2],e[7]=o[5],e[8]=o[8],this}setUvTransform(e,o,a,c,d,g,b){let j=Math.cos(d),$=Math.sin(d);return this.set(a*j,a*$,-a*(j*g+$*b)+g+e,-c*$,c*j,-c*(-$*g+j*b)+b+o,0,0,1),this}scale(e,o){return this.premultiply(dS.makeScale(e,o)),this}rotate(e){return this.premultiply(dS.makeRotation(-e)),this}translate(e,o){return this.premultiply(dS.makeTranslation(e,o)),this}makeTranslation(e,o){return this.set(1,0,e,0,1,o,0,0,1),this}makeRotation(e){let o=Math.cos(e),a=Math.sin(e);return this.set(o,-a,0,a,o,0,0,0,1),this}makeScale(e,o){return this.set(e,0,0,0,o,0,0,0,1),this}equals(e){let o=this.elements,a=e.elements;for(let c=0;c<9;c++)if(o[c]!==a[c])return!1;return!0}fromArray(e,o=0){for(let a=0;a<9;a++)this.elements[a]=e[a+o];return this}toArray(e=[],o=0){let a=this.elements;return e[o]=a[0],e[o+1]=a[1],e[o+2]=a[2],e[o+3]=a[3],e[o+4]=a[4],e[o+5]=a[5],e[o+6]=a[6],e[o+7]=a[7],e[o+8]=a[8],e}clone(){return new this.constructor().fromArray(this.elements)}},dS=new nr;function YM(e){for(let o=e.length-1;o>=0;--o)if(e[o]>=65535)return!0;return!1}var hk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kg(e,o){return new hk[e](o)}function _p(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function xc(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function dy(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var fS={[wo]:{[wp]:xc},[wp]:{[wo]:dy}},vn={legacyMode:!0,get workingColorSpace(){return wp},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,o,a){if(this.legacyMode||o===a||!o||!a)return e;if(fS[o]&&fS[o][a]!==void 0){let c=fS[o][a];return e.r=c(e.r),e.g=c(e.g),e.b=c(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,o){return this.convert(e,this.workingColorSpace,o)},toWorkingColorSpace:function(e,o){return this.convert(e,o,this.workingColorSpace)}},XM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ti={r:0,g:0,b:0},zs={h:0,s:0,l:0},Vg={h:0,s:0,l:0};function pS(e,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+(o-e)*6*a:a<1/2?o:a<2/3?e+(o-e)*6*(2/3-a):e}function zg(e,o){return o.r=e.r,o.g=e.g,o.b=e.b,o}var We=class{constructor(e,o,a){return this.isColor=!0,this.r=1,this.g=1,this.b=1,o===void 0&&a===void 0?this.set(e):this.setRGB(e,o,a)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,o=wo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.toWorkingColorSpace(this,o),this}setRGB(e,o,a,c=vn.workingColorSpace){return this.r=e,this.g=o,this.b=a,vn.toWorkingColorSpace(this,c),this}setHSL(e,o,a,c=vn.workingColorSpace){if(e=Cw(e,1),o=gi(o,0,1),a=gi(a,0,1),o===0)this.r=this.g=this.b=a;else{let d=a<=.5?a*(1+o):a+o-a*o,g=2*a-d;this.r=pS(g,d,e+1/3),this.g=pS(g,d,e),this.b=pS(g,d,e-1/3)}return vn.toWorkingColorSpace(this,c),this}setStyle(e,o=wo){function a(d){d!==void 0&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let c;if(c=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let d,g=c[1],b=c[2];switch(g){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,vn.toWorkingColorSpace(this,o),a(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,vn.toWorkingColorSpace(this,o),a(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b)){let j=parseFloat(d[1])/360,$=parseFloat(d[2])/100,_e=parseFloat(d[3])/100;return a(d[4]),this.setHSL(j,$,_e,o)}break}}else if(c=/^\#([A-Fa-f\d]+)$/.exec(e)){let d=c[1],g=d.length;if(g===3)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,vn.toWorkingColorSpace(this,o),this;if(g===6)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,vn.toWorkingColorSpace(this,o),this}return e&&e.length>0?this.setColorName(e,o):this}setColorName(e,o=wo){let a=XM[e.toLowerCase()];return a!==void 0?this.setHex(a,o):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xc(e.r),this.g=xc(e.g),this.b=xc(e.b),this}copyLinearToSRGB(e){return this.r=dy(e.r),this.g=dy(e.g),this.b=dy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=wo){return vn.fromWorkingColorSpace(zg(this,Ti),e),gi(Ti.r*255,0,255)<<16^gi(Ti.g*255,0,255)<<8^gi(Ti.b*255,0,255)<<0}getHexString(e=wo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,o=vn.workingColorSpace){vn.fromWorkingColorSpace(zg(this,Ti),o);let a=Ti.r,c=Ti.g,d=Ti.b,g=Math.max(a,c,d),b=Math.min(a,c,d),j,$,_e=(b+g)/2;if(b===g)j=0,$=0;else{let st=g-b;switch($=_e<=.5?st/(g+b):st/(2-g-b),g){case a:j=(c-d)/st+(c<d?6:0);break;case c:j=(d-a)/st+2;break;case d:j=(a-c)/st+4;break}j/=6}return e.h=j,e.s=$,e.l=_e,e}getRGB(e,o=vn.workingColorSpace){return vn.fromWorkingColorSpace(zg(this,Ti),o),e.r=Ti.r,e.g=Ti.g,e.b=Ti.b,e}getStyle(e=wo){return vn.fromWorkingColorSpace(zg(this,Ti),e),e!==wo?`color(${e} ${Ti.r} ${Ti.g} ${Ti.b})`:`rgb(${Ti.r*255|0},${Ti.g*255|0},${Ti.b*255|0})`}offsetHSL(e,o,a){return this.getHSL(zs),zs.h+=e,zs.s+=o,zs.l+=a,this.setHSL(zs.h,zs.s,zs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,o){return this.r=e.r+o.r,this.g=e.g+o.g,this.b=e.b+o.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,o){return this.r+=(e.r-this.r)*o,this.g+=(e.g-this.g)*o,this.b+=(e.b-this.b)*o,this}lerpColors(e,o,a){return this.r=e.r+(o.r-e.r)*a,this.g=e.g+(o.g-e.g)*a,this.b=e.b+(o.b-e.b)*a,this}lerpHSL(e,o){this.getHSL(zs),e.getHSL(Vg);let a=vp(zs.h,Vg.h,o),c=vp(zs.s,Vg.s,o),d=vp(zs.l,Vg.l,o);return this.setHSL(a,c,d),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,o=0){return this.r=e[o],this.g=e[o+1],this.b=e[o+2],this}toArray(e=[],o=0){return e[o]=this.r,e[o+1]=this.g,e[o+2]=this.b,e}fromBufferAttribute(e,o){return this.r=e.getX(o),this.g=e.getY(o),this.b=e.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};We.NAMES=XM;var Au,yy=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let o;if(e instanceof HTMLCanvasElement)o=e;else{Au===void 0&&(Au=_p("canvas")),Au.width=e.width,Au.height=e.height;let a=Au.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),o=Au}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let o=_p("canvas");o.width=e.width,o.height=e.height;let a=o.getContext("2d");a.drawImage(e,0,0,e.width,e.height);let c=a.getImageData(0,0,e.width,e.height),d=c.data;for(let g=0;g<d.length;g++)d[g]=xc(d[g]/255)*255;return a.putImageData(c,0,0),o}else if(e.data){let o=e.data.slice(0);for(let a=0;a<o.length;a++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[a]=Math.floor(xc(o[a]/255)*255):o[a]=xc(o[a]);return{data:o,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},vy=class{constructor(e=null){this.isSource=!0,this.uuid=ms(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let o=e===void 0||typeof e=="string";if(!o&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let a={uuid:this.uuid,url:""},c=this.data;if(c!==null){let d;if(Array.isArray(c)){d=[];for(let g=0,b=c.length;g<b;g++)c[g].isDataTexture?d.push(mS(c[g].image)):d.push(mS(c[g]))}else d=mS(c);a.url=d}return o||(e.images[this.uuid]=a),a}};function mS(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?yy.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var dk=0,tr=class extends fr$2{constructor(e=tr.DEFAULT_IMAGE,o=tr.DEFAULT_MAPPING,a=Kt,c=Kt,d=tt,g=bc,b=Qr,j=Ir$1,$=tr.DEFAULT_ANISOTROPY,_e=Sn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dk++}),this.uuid=ms(),this.name="",this.source=new vy(e),this.mipmaps=[],this.mapping=o,this.wrapS=a,this.wrapT=c,this.magFilter=d,this.minFilter=g,this.anisotropy=$,this.format=b,this.internalFormat=null,this.type=j,this.offset=new z$2(0,0),this.repeat=new z$2(1,1),this.center=new z$2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_e,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let o=e===void 0||typeof e=="string";if(!o&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),o||(e.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ws:e.x=e.x-Math.floor(e.x);break;case Kt:e.x=e.x<0?0:1;break;case HS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ws:e.y=e.y-Math.floor(e.y);break;case Kt:e.y=e.y<0?0:1;break;case HS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};tr.DEFAULT_IMAGE=null;tr.DEFAULT_MAPPING=jM;tr.DEFAULT_ANISOTROPY=1;var Ke=class{constructor(e=0,o=0,a=0,c=1){Ke.prototype.isVector4=!0,this.x=e,this.y=o,this.z=a,this.w=c}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,o,a,c){return this.x=e,this.y=o,this.z=a,this.w=c,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this.w=e.w+o.w,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this.w+=e.w*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this.w=e.w-o.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let o=this.x,a=this.y,c=this.z,d=this.w,g=e.elements;return this.x=g[0]*o+g[4]*a+g[8]*c+g[12]*d,this.y=g[1]*o+g[5]*a+g[9]*c+g[13]*d,this.z=g[2]*o+g[6]*a+g[10]*c+g[14]*d,this.w=g[3]*o+g[7]*a+g[11]*c+g[15]*d,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let o=Math.sqrt(1-e.w*e.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/o,this.y=e.y/o,this.z=e.z/o),this}setAxisAngleFromRotationMatrix(e){let o,a,c,d,g=e.elements,b=g[0],j=g[4],$=g[8],_e=g[1],st=g[5],rt=g[9],ut=g[2],gt=g[6],yt=g[10];if(Math.abs(j-_e)<.01&&Math.abs($-ut)<.01&&Math.abs(rt-gt)<.01){if(Math.abs(j+_e)<.1&&Math.abs($+ut)<.1&&Math.abs(rt+gt)<.1&&Math.abs(b+st+yt-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;let Ct=(b+1)/2,Pt=(st+1)/2,At=(yt+1)/2,Tt=(j+_e)/4,kt=($+ut)/4,It=(rt+gt)/4;return Ct>Pt&&Ct>At?Ct<.01?(a=0,c=.707106781,d=.707106781):(a=Math.sqrt(Ct),c=Tt/a,d=kt/a):Pt>At?Pt<.01?(a=.707106781,c=0,d=.707106781):(c=Math.sqrt(Pt),a=Tt/c,d=It/c):At<.01?(a=.707106781,c=.707106781,d=0):(d=Math.sqrt(At),a=kt/d,c=It/d),this.set(a,c,d,o),this}let wt=Math.sqrt((gt-rt)*(gt-rt)+($-ut)*($-ut)+(_e-j)*(_e-j));return Math.abs(wt)<.001&&(wt=1),this.x=(gt-rt)/wt,this.y=($-ut)/wt,this.z=(_e-j)/wt,this.w=Math.acos((b+st+yt-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this.w=Math.max(e.w,Math.min(o.w,this.w)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this.w=Math.max(e,Math.min(o,this.w)),this}clampLength(e,o){let a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this.w+=(e.w-this.w)*o,this}lerpVectors(e,o,a){return this.x=e.x+(o.x-e.x)*a,this.y=e.y+(o.y-e.y)*a,this.z=e.z+(o.z-e.z)*a,this.w=e.w+(o.w-e.w)*a,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this.w=e[o+3],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e[o+3]=this.w,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this.w=e.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},ft=class extends fr$2{constructor(e=1,o=1,a={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=o,this.depth=1,this.scissor=new Ke(0,0,e,o),this.scissorTest=!1,this.viewport=new Ke(0,0,e,o);let c={width:e,height:o,depth:1};this.texture=new tr(c,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=a.generateMipmaps!==void 0?a.generateMipmaps:!1,this.texture.internalFormat=a.internalFormat!==void 0?a.internalFormat:null,this.texture.minFilter=a.minFilter!==void 0?a.minFilter:tt,this.depthBuffer=a.depthBuffer!==void 0?a.depthBuffer:!0,this.stencilBuffer=a.stencilBuffer!==void 0?a.stencilBuffer:!1,this.depthTexture=a.depthTexture!==void 0?a.depthTexture:null,this.samples=a.samples!==void 0?a.samples:0}setSize(e,o,a=1){(this.width!==e||this.height!==o||this.depth!==a)&&(this.width=e,this.height=o,this.depth=a,this.texture.image.width=e,this.texture.image.height=o,this.texture.image.depth=a,this.dispose()),this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let o=Object.assign({},e.texture.image);return this.texture.source=new vy(o),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},xy=class extends tr{constructor(e=null,o=1,a=1,c=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:o,height:a,depth:c},this.magFilter=Vt,this.minFilter=Vt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},by=class extends tr{constructor(e=null,o=1,a=1,c=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:o,height:a,depth:c},this.magFilter=Vt,this.minFilter=Vt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Sy=class extends ft{constructor(e=1,o=1,a=1,c={}){super(e,o,c),this.isWebGLMultipleRenderTargets=!0;let d=this.texture;this.texture=[];for(let g=0;g<a;g++)this.texture[g]=d.clone(),this.texture[g].isRenderTargetTexture=!0}setSize(e,o,a=1){if(this.width!==e||this.height!==o||this.depth!==a){this.width=e,this.height=o,this.depth=a;for(let c=0,d=this.texture.length;c<d;c++)this.texture[c].image.width=e,this.texture[c].image.height=o,this.texture[c].image.depth=a;this.dispose()}return this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let o=0,a=e.texture.length;o<a;o++)this.texture[o]=e.texture[o].clone(),this.texture[o].isRenderTargetTexture=!0;return this}},Qe=class{constructor(e=0,o=0,a=0,c=1){this.isQuaternion=!0,this._x=e,this._y=o,this._z=a,this._w=c}static slerpFlat(e,o,a,c,d,g,b){let j=a[c+0],$=a[c+1],_e=a[c+2],st=a[c+3],rt=d[g+0],ut=d[g+1],gt=d[g+2],yt=d[g+3];if(b===0){e[o+0]=j,e[o+1]=$,e[o+2]=_e,e[o+3]=st;return}if(b===1){e[o+0]=rt,e[o+1]=ut,e[o+2]=gt,e[o+3]=yt;return}if(st!==yt||j!==rt||$!==ut||_e!==gt){let wt=1-b,Ct=j*rt+$*ut+_e*gt+st*yt,Pt=Ct>=0?1:-1,At=1-Ct*Ct;if(At>Number.EPSILON){let kt=Math.sqrt(At),It=Math.atan2(kt,Ct*Pt);wt=Math.sin(wt*It)/kt,b=Math.sin(b*It)/kt}let Tt=b*Pt;if(j=j*wt+rt*Tt,$=$*wt+ut*Tt,_e=_e*wt+gt*Tt,st=st*wt+yt*Tt,wt===1-b){let kt=1/Math.sqrt(j*j+$*$+_e*_e+st*st);j*=kt,$*=kt,_e*=kt,st*=kt}}e[o]=j,e[o+1]=$,e[o+2]=_e,e[o+3]=st}static multiplyQuaternionsFlat(e,o,a,c,d,g){let b=a[c],j=a[c+1],$=a[c+2],_e=a[c+3],st=d[g],rt=d[g+1],ut=d[g+2],gt=d[g+3];return e[o]=b*gt+_e*st+j*ut-$*rt,e[o+1]=j*gt+_e*rt+$*st-b*ut,e[o+2]=$*gt+_e*ut+b*rt-j*st,e[o+3]=_e*gt-b*st-j*rt-$*ut,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,o,a,c){return this._x=e,this._y=o,this._z=a,this._w=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,o){let a=e._x,c=e._y,d=e._z,g=e._order,b=Math.cos,j=Math.sin,$=b(a/2),_e=b(c/2),st=b(d/2),rt=j(a/2),ut=j(c/2),gt=j(d/2);switch(g){case"XYZ":this._x=rt*_e*st+$*ut*gt,this._y=$*ut*st-rt*_e*gt,this._z=$*_e*gt+rt*ut*st,this._w=$*_e*st-rt*ut*gt;break;case"YXZ":this._x=rt*_e*st+$*ut*gt,this._y=$*ut*st-rt*_e*gt,this._z=$*_e*gt-rt*ut*st,this._w=$*_e*st+rt*ut*gt;break;case"ZXY":this._x=rt*_e*st-$*ut*gt,this._y=$*ut*st+rt*_e*gt,this._z=$*_e*gt+rt*ut*st,this._w=$*_e*st-rt*ut*gt;break;case"ZYX":this._x=rt*_e*st-$*ut*gt,this._y=$*ut*st+rt*_e*gt,this._z=$*_e*gt-rt*ut*st,this._w=$*_e*st+rt*ut*gt;break;case"YZX":this._x=rt*_e*st+$*ut*gt,this._y=$*ut*st+rt*_e*gt,this._z=$*_e*gt-rt*ut*st,this._w=$*_e*st-rt*ut*gt;break;case"XZY":this._x=rt*_e*st-$*ut*gt,this._y=$*ut*st-rt*_e*gt,this._z=$*_e*gt+rt*ut*st,this._w=$*_e*st+rt*ut*gt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+g)}return o!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,o){let a=o/2,c=Math.sin(a);return this._x=e.x*c,this._y=e.y*c,this._z=e.z*c,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){let o=e.elements,a=o[0],c=o[4],d=o[8],g=o[1],b=o[5],j=o[9],$=o[2],_e=o[6],st=o[10],rt=a+b+st;if(rt>0){let ut=.5/Math.sqrt(rt+1);this._w=.25/ut,this._x=(_e-j)*ut,this._y=(d-$)*ut,this._z=(g-c)*ut}else if(a>b&&a>st){let ut=2*Math.sqrt(1+a-b-st);this._w=(_e-j)/ut,this._x=.25*ut,this._y=(c+g)/ut,this._z=(d+$)/ut}else if(b>st){let ut=2*Math.sqrt(1+b-a-st);this._w=(d-$)/ut,this._x=(c+g)/ut,this._y=.25*ut,this._z=(j+_e)/ut}else{let ut=2*Math.sqrt(1+st-a-b);this._w=(g-c)/ut,this._x=(d+$)/ut,this._y=(j+_e)/ut,this._z=.25*ut}return this._onChangeCallback(),this}setFromUnitVectors(e,o){let a=e.dot(o)+1;return a<Number.EPSILON?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*o.z-e.z*o.y,this._y=e.z*o.x-e.x*o.z,this._z=e.x*o.y-e.y*o.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gi(this.dot(e),-1,1)))}rotateTowards(e,o){let a=this.angleTo(e);if(a===0)return this;let c=Math.min(1,o/a);return this.slerp(e,c),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,o){let a=e._x,c=e._y,d=e._z,g=e._w,b=o._x,j=o._y,$=o._z,_e=o._w;return this._x=a*_e+g*b+c*$-d*j,this._y=c*_e+g*j+d*b-a*$,this._z=d*_e+g*$+a*j-c*b,this._w=g*_e-a*b-c*j-d*$,this._onChangeCallback(),this}slerp(e,o){if(o===0)return this;if(o===1)return this.copy(e);let a=this._x,c=this._y,d=this._z,g=this._w,b=g*e._w+a*e._x+c*e._y+d*e._z;if(b<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,b=-b):this.copy(e),b>=1)return this._w=g,this._x=a,this._y=c,this._z=d,this;let j=1-b*b;if(j<=Number.EPSILON){let ut=1-o;return this._w=ut*g+o*this._w,this._x=ut*a+o*this._x,this._y=ut*c+o*this._y,this._z=ut*d+o*this._z,this.normalize(),this._onChangeCallback(),this}let $=Math.sqrt(j),_e=Math.atan2($,b),st=Math.sin((1-o)*_e)/$,rt=Math.sin(o*_e)/$;return this._w=g*st+this._w*rt,this._x=a*st+this._x*rt,this._y=c*st+this._y*rt,this._z=d*st+this._z*rt,this._onChangeCallback(),this}slerpQuaternions(e,o,a){return this.copy(e).slerp(o,a)}random(){let e=Math.random(),o=Math.sqrt(1-e),a=Math.sqrt(e),c=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(o*Math.cos(c),a*Math.sin(d),a*Math.cos(d),o*Math.sin(c))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,o=0){return this._x=e[o],this._y=e[o+1],this._z=e[o+2],this._w=e[o+3],this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._w,e}fromBufferAttribute(e,o){return this._x=e.getX(o),this._y=e.getY(o),this._z=e.getZ(o),this._w=e.getW(o),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},_=class{constructor(e=0,o=0,a=0){_.prototype.isVector3=!0,this.x=e,this.y=o,this.z=a}set(e,o,a){return a===void 0&&(a=this.z),this.x=e,this.y=o,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,o){return this.x=e.x*o.x,this.y=e.y*o.y,this.z=e.z*o.z,this}applyEuler(e){return this.applyQuaternion(zT.setFromEuler(e))}applyAxisAngle(e,o){return this.applyQuaternion(zT.setFromAxisAngle(e,o))}applyMatrix3(e){let o=this.x,a=this.y,c=this.z,d=e.elements;return this.x=d[0]*o+d[3]*a+d[6]*c,this.y=d[1]*o+d[4]*a+d[7]*c,this.z=d[2]*o+d[5]*a+d[8]*c,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let o=this.x,a=this.y,c=this.z,d=e.elements,g=1/(d[3]*o+d[7]*a+d[11]*c+d[15]);return this.x=(d[0]*o+d[4]*a+d[8]*c+d[12])*g,this.y=(d[1]*o+d[5]*a+d[9]*c+d[13])*g,this.z=(d[2]*o+d[6]*a+d[10]*c+d[14])*g,this}applyQuaternion(e){let o=this.x,a=this.y,c=this.z,d=e.x,g=e.y,b=e.z,j=e.w,$=j*o+g*c-b*a,_e=j*a+b*o-d*c,st=j*c+d*a-g*o,rt=-d*o-g*a-b*c;return this.x=$*j+rt*-d+_e*-b-st*-g,this.y=_e*j+rt*-g+st*-d-$*-b,this.z=st*j+rt*-b+$*-g-_e*-d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let o=this.x,a=this.y,c=this.z,d=e.elements;return this.x=d[0]*o+d[4]*a+d[8]*c,this.y=d[1]*o+d[5]*a+d[9]*c,this.z=d[2]*o+d[6]*a+d[10]*c,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this}clampLength(e,o){let a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this}lerpVectors(e,o,a){return this.x=e.x+(o.x-e.x)*a,this.y=e.y+(o.y-e.y)*a,this.z=e.z+(o.z-e.z)*a,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,o){let a=e.x,c=e.y,d=e.z,g=o.x,b=o.y,j=o.z;return this.x=c*j-d*b,this.y=d*g-a*j,this.z=a*b-c*g,this}projectOnVector(e){let o=e.lengthSq();if(o===0)return this.set(0,0,0);let a=e.dot(this)/o;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return gS.copy(this).projectOnVector(e),this.sub(gS)}reflect(e){return this.sub(gS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let o=Math.sqrt(this.lengthSq()*e.lengthSq());if(o===0)return Math.PI/2;let a=this.dot(e)/o;return Math.acos(gi(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let o=this.x-e.x,a=this.y-e.y,c=this.z-e.z;return o*o+a*a+c*c}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,o,a){let c=Math.sin(o)*e;return this.x=c*Math.sin(a),this.y=Math.cos(o)*e,this.z=c*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,o,a){return this.x=e*Math.sin(o),this.y=a,this.z=e*Math.cos(o),this}setFromMatrixPosition(e){let o=e.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(e){let o=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),c=this.setFromMatrixColumn(e,2).length();return this.x=o,this.y=a,this.z=c,this}setFromMatrixColumn(e,o){return this.fromArray(e.elements,o*4)}setFromMatrix3Column(e,o){return this.fromArray(e.elements,o*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,o=Math.random()*Math.PI*2,a=Math.sqrt(1-e**2);return this.x=a*Math.cos(o),this.y=a*Math.sin(o),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},gS=new _,zT=new Qe,Wt=class{constructor(e=new _(1/0,1/0,1/0),o=new _(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromArray(e){let o=1/0,a=1/0,c=1/0,d=-1/0,g=-1/0,b=-1/0;for(let j=0,$=e.length;j<$;j+=3){let _e=e[j],st=e[j+1],rt=e[j+2];_e<o&&(o=_e),st<a&&(a=st),rt<c&&(c=rt),_e>d&&(d=_e),st>g&&(g=st),rt>b&&(b=rt)}return this.min.set(o,a,c),this.max.set(d,g,b),this}setFromBufferAttribute(e){let o=1/0,a=1/0,c=1/0,d=-1/0,g=-1/0,b=-1/0;for(let j=0,$=e.count;j<$;j++){let _e=e.getX(j),st=e.getY(j),rt=e.getZ(j);_e<o&&(o=_e),st<a&&(a=st),rt<c&&(c=rt),_e>d&&(d=_e),st>g&&(g=st),rt>b&&(b=rt)}return this.min.set(o,a,c),this.max.set(d,g,b),this}setFromPoints(e){this.makeEmpty();for(let o=0,a=e.length;o<a;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){let a=fc.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}setFromObject(e,o=!1){return this.makeEmpty(),this.expandByObject(e,o)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,o=!1){e.updateWorldMatrix(!1,!1);let a=e.geometry;if(a!==void 0)if(o&&a.attributes!=null&&a.attributes.position!==void 0){let d=a.attributes.position;for(let g=0,b=d.count;g<b;g++)fc.fromBufferAttribute(d,g).applyMatrix4(e.matrixWorld),this.expandByPoint(fc)}else a.boundingBox===null&&a.computeBoundingBox(),yS.copy(a.boundingBox),yS.applyMatrix4(e.matrixWorld),this.union(yS);let c=e.children;for(let d=0,g=c.length;d<g;d++)this.expandByObject(c[d],o);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fc),fc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let o,a;return e.normal.x>0?(o=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(o=e.normal.x*this.max.x,a=e.normal.x*this.min.x),e.normal.y>0?(o+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(o+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),e.normal.z>0?(o+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(o+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),o<=-e.constant&&a>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(op$2),Ug.subVectors(this.max,op$2),_u.subVectors(e.a,op$2),Eu.subVectors(e.b,op$2),Tu.subVectors(e.c,op$2),el.subVectors(Eu,_u),tl.subVectors(Tu,Eu),pc.subVectors(_u,Tu);let o=[0,-el.z,el.y,0,-tl.z,tl.y,0,-pc.z,pc.y,el.z,0,-el.x,tl.z,0,-tl.x,pc.z,0,-pc.x,-el.y,el.x,0,-tl.y,tl.x,0,-pc.y,pc.x,0];return!vS(o,_u,Eu,Tu,Ug)||(o=[1,0,0,0,1,0,0,0,1],!vS(o,_u,Eu,Tu,Ug))?!1:(Gg.crossVectors(el,tl),o=[Gg.x,Gg.y,Gg.z],vS(o,_u,Eu,Tu,Ug))}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(fc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ua[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ua[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ua[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ua[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ua[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ua[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ua[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ua[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ua),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},ua=[new _,new _,new _,new _,new _,new _,new _,new _],fc=new _,yS=new Wt,_u=new _,Eu=new _,Tu=new _,el=new _,tl=new _,pc=new _,op$2=new _,Ug=new _,Gg=new _,mc=new _;function vS(e,o,a,c,d){for(let g=0,b=e.length-3;g<=b;g+=3){mc.fromArray(e,g);let j=d.x*Math.abs(mc.x)+d.y*Math.abs(mc.y)+d.z*Math.abs(mc.z),$=o.dot(mc),_e=a.dot(mc),st=c.dot(mc);if(Math.max(-Math.max($,_e,st),Math.min($,_e,st))>j)return!1}return!0}var fk=new Wt,ap=new _,xS=new _,Br=class{constructor(e=new _,o=-1){this.center=e,this.radius=o}set(e,o){return this.center.copy(e),this.radius=o,this}setFromPoints(e,o){let a=this.center;o!==void 0?a.copy(o):fk.setFromPoints(e).getCenter(a);let c=0;for(let d=0,g=e.length;d<g;d++)c=Math.max(c,a.distanceToSquared(e[d]));return this.radius=Math.sqrt(c),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let o=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=o*o}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,o){let a=this.center.distanceToSquared(e);return o.copy(e),a>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ap.subVectors(e,this.center);let o=ap.lengthSq();if(o>this.radius*this.radius){let a=Math.sqrt(o),c=(a-this.radius)*.5;this.center.addScaledVector(ap,c/a),this.radius+=c}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ap.copy(e.center).add(xS)),this.expandByPoint(ap.copy(e.center).sub(xS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ha=new _,bS=new _,jg=new _,rl=new _,SS=new _,Hg=new _,wS=new _,qs=class{constructor(e=new _,o=new _(0,0,-1)){this.origin=e,this.direction=o}set(e,o){return this.origin.copy(e),this.direction.copy(o),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,o){return o.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ha)),this}closestPointToPoint(e,o){o.subVectors(e,this.origin);let a=o.dot(this.direction);return a<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(a).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let o=ha.subVectors(e,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(e):(ha.copy(this.direction).multiplyScalar(o).add(this.origin),ha.distanceToSquared(e))}distanceSqToSegment(e,o,a,c){bS.copy(e).add(o).multiplyScalar(.5),jg.copy(o).sub(e).normalize(),rl.copy(this.origin).sub(bS);let d=e.distanceTo(o)*.5,g=-this.direction.dot(jg),b=rl.dot(this.direction),j=-rl.dot(jg),$=rl.lengthSq(),_e=Math.abs(1-g*g),st,rt,ut,gt;if(_e>0)if(st=g*j-b,rt=g*b-j,gt=d*_e,st>=0)if(rt>=-gt)if(rt<=gt){let yt=1/_e;st*=yt,rt*=yt,ut=st*(st+g*rt+2*b)+rt*(g*st+rt+2*j)+$}else rt=d,st=Math.max(0,-(g*rt+b)),ut=-st*st+rt*(rt+2*j)+$;else rt=-d,st=Math.max(0,-(g*rt+b)),ut=-st*st+rt*(rt+2*j)+$;else rt<=-gt?(st=Math.max(0,-(-g*d+b)),rt=st>0?-d:Math.min(Math.max(-d,-j),d),ut=-st*st+rt*(rt+2*j)+$):rt<=gt?(st=0,rt=Math.min(Math.max(-d,-j),d),ut=rt*(rt+2*j)+$):(st=Math.max(0,-(g*d+b)),rt=st>0?d:Math.min(Math.max(-d,-j),d),ut=-st*st+rt*(rt+2*j)+$);else rt=g>0?-d:d,st=Math.max(0,-(g*rt+b)),ut=-st*st+rt*(rt+2*j)+$;return a&&a.copy(this.direction).multiplyScalar(st).add(this.origin),c&&c.copy(jg).multiplyScalar(rt).add(bS),ut}intersectSphere(e,o){ha.subVectors(e.center,this.origin);let a=ha.dot(this.direction),c=ha.dot(ha)-a*a,d=e.radius*e.radius;if(c>d)return null;let g=Math.sqrt(d-c),b=a-g,j=a+g;return b<0&&j<0?null:b<0?this.at(j,o):this.at(b,o)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let o=e.normal.dot(this.direction);if(o===0)return e.distanceToPoint(this.origin)===0?0:null;let a=-(this.origin.dot(e.normal)+e.constant)/o;return a>=0?a:null}intersectPlane(e,o){let a=this.distanceToPlane(e);return a===null?null:this.at(a,o)}intersectsPlane(e){let o=e.distanceToPoint(this.origin);return o===0||e.normal.dot(this.direction)*o<0}intersectBox(e,o){let a,c,d,g,b,j,$=1/this.direction.x,_e=1/this.direction.y,st=1/this.direction.z,rt=this.origin;return $>=0?(a=(e.min.x-rt.x)*$,c=(e.max.x-rt.x)*$):(a=(e.max.x-rt.x)*$,c=(e.min.x-rt.x)*$),_e>=0?(d=(e.min.y-rt.y)*_e,g=(e.max.y-rt.y)*_e):(d=(e.max.y-rt.y)*_e,g=(e.min.y-rt.y)*_e),a>g||d>c||((d>a||isNaN(a))&&(a=d),(g<c||isNaN(c))&&(c=g),st>=0?(b=(e.min.z-rt.z)*st,j=(e.max.z-rt.z)*st):(b=(e.max.z-rt.z)*st,j=(e.min.z-rt.z)*st),a>j||b>c)||((b>a||a!==a)&&(a=b),(j<c||c!==c)&&(c=j),c<0)?null:this.at(a>=0?a:c,o)}intersectsBox(e){return this.intersectBox(e,ha)!==null}intersectTriangle(e,o,a,c,d){SS.subVectors(o,e),Hg.subVectors(a,e),wS.crossVectors(SS,Hg);let g=this.direction.dot(wS),b;if(g>0){if(c)return null;b=1}else if(g<0)b=-1,g=-g;else return null;rl.subVectors(this.origin,e);let j=b*this.direction.dot(Hg.crossVectors(rl,Hg));if(j<0)return null;let $=b*this.direction.dot(SS.cross(rl));if($<0||j+$>g)return null;let _e=-b*rl.dot(wS);return _e<0?null:this.at(_e/g,d)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ce$1=class{constructor(){ce$1.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct){let Pt=this.elements;return Pt[0]=o,Pt[4]=a,Pt[8]=c,Pt[12]=d,Pt[1]=g,Pt[5]=b,Pt[9]=j,Pt[13]=$,Pt[2]=_e,Pt[6]=st,Pt[10]=rt,Pt[14]=ut,Pt[3]=gt,Pt[7]=yt,Pt[11]=wt,Pt[15]=Ct,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ce$1().fromArray(this.elements)}copy(o){let a=this.elements,c=o.elements;return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],this}copyPosition(o){let a=this.elements,c=o.elements;return a[12]=c[12],a[13]=c[13],a[14]=c[14],this}setFromMatrix3(o){let a=o.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(o,a,c){return o.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(o,a,c){return this.set(o.x,a.x,c.x,0,o.y,a.y,c.y,0,o.z,a.z,c.z,0,0,0,0,1),this}extractRotation(o){let a=this.elements,c=o.elements,d=1/Mu.setFromMatrixColumn(o,0).length(),g=1/Mu.setFromMatrixColumn(o,1).length(),b=1/Mu.setFromMatrixColumn(o,2).length();return a[0]=c[0]*d,a[1]=c[1]*d,a[2]=c[2]*d,a[3]=0,a[4]=c[4]*g,a[5]=c[5]*g,a[6]=c[6]*g,a[7]=0,a[8]=c[8]*b,a[9]=c[9]*b,a[10]=c[10]*b,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(o){let a=this.elements,c=o.x,d=o.y,g=o.z,b=Math.cos(c),j=Math.sin(c),$=Math.cos(d),_e=Math.sin(d),st=Math.cos(g),rt=Math.sin(g);if(o.order==="XYZ"){let ut=b*st,gt=b*rt,yt=j*st,wt=j*rt;a[0]=$*st,a[4]=-$*rt,a[8]=_e,a[1]=gt+yt*_e,a[5]=ut-wt*_e,a[9]=-j*$,a[2]=wt-ut*_e,a[6]=yt+gt*_e,a[10]=b*$}else if(o.order==="YXZ"){let ut=$*st,gt=$*rt,yt=_e*st,wt=_e*rt;a[0]=ut+wt*j,a[4]=yt*j-gt,a[8]=b*_e,a[1]=b*rt,a[5]=b*st,a[9]=-j,a[2]=gt*j-yt,a[6]=wt+ut*j,a[10]=b*$}else if(o.order==="ZXY"){let ut=$*st,gt=$*rt,yt=_e*st,wt=_e*rt;a[0]=ut-wt*j,a[4]=-b*rt,a[8]=yt+gt*j,a[1]=gt+yt*j,a[5]=b*st,a[9]=wt-ut*j,a[2]=-b*_e,a[6]=j,a[10]=b*$}else if(o.order==="ZYX"){let ut=b*st,gt=b*rt,yt=j*st,wt=j*rt;a[0]=$*st,a[4]=yt*_e-gt,a[8]=ut*_e+wt,a[1]=$*rt,a[5]=wt*_e+ut,a[9]=gt*_e-yt,a[2]=-_e,a[6]=j*$,a[10]=b*$}else if(o.order==="YZX"){let ut=b*$,gt=b*_e,yt=j*$,wt=j*_e;a[0]=$*st,a[4]=wt-ut*rt,a[8]=yt*rt+gt,a[1]=rt,a[5]=b*st,a[9]=-j*st,a[2]=-_e*st,a[6]=gt*rt+yt,a[10]=ut-wt*rt}else if(o.order==="XZY"){let ut=b*$,gt=b*_e,yt=j*$,wt=j*_e;a[0]=$*st,a[4]=-rt,a[8]=_e*st,a[1]=ut*rt+wt,a[5]=b*st,a[9]=gt*rt-yt,a[2]=yt*rt-gt,a[6]=j*st,a[10]=wt*rt+ut}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(o){return this.compose(pk,o,mk)}lookAt(o,a,c){let d=this.elements;return Jn.subVectors(o,a),Jn.lengthSq()===0&&(Jn.z=1),Jn.normalize(),il.crossVectors(c,Jn),il.lengthSq()===0&&(Math.abs(c.z)===1?Jn.x+=1e-4:Jn.z+=1e-4,Jn.normalize(),il.crossVectors(c,Jn)),il.normalize(),Wg.crossVectors(Jn,il),d[0]=il.x,d[4]=Wg.x,d[8]=Jn.x,d[1]=il.y,d[5]=Wg.y,d[9]=Jn.y,d[2]=il.z,d[6]=Wg.z,d[10]=Jn.z,this}multiply(o){return this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,a){let c=o.elements,d=a.elements,g=this.elements,b=c[0],j=c[4],$=c[8],_e=c[12],st=c[1],rt=c[5],ut=c[9],gt=c[13],yt=c[2],wt=c[6],Ct=c[10],Pt=c[14],At=c[3],Tt=c[7],kt=c[11],It=c[15],Lt=d[0],Ft=d[4],Nt=d[8],Ht=d[12],dr=d[1],hs=d[5],us=d[9],hn=d[13],un=d[2],bo=d[6],_s=d[10],gn=d[14],Gr=d[3],ds=d[7],Zn=d[11],Nn=d[15];return g[0]=b*Lt+j*dr+$*un+_e*Gr,g[4]=b*Ft+j*hs+$*bo+_e*ds,g[8]=b*Nt+j*us+$*_s+_e*Zn,g[12]=b*Ht+j*hn+$*gn+_e*Nn,g[1]=st*Lt+rt*dr+ut*un+gt*Gr,g[5]=st*Ft+rt*hs+ut*bo+gt*ds,g[9]=st*Nt+rt*us+ut*_s+gt*Zn,g[13]=st*Ht+rt*hn+ut*gn+gt*Nn,g[2]=yt*Lt+wt*dr+Ct*un+Pt*Gr,g[6]=yt*Ft+wt*hs+Ct*bo+Pt*ds,g[10]=yt*Nt+wt*us+Ct*_s+Pt*Zn,g[14]=yt*Ht+wt*hn+Ct*gn+Pt*Nn,g[3]=At*Lt+Tt*dr+kt*un+It*Gr,g[7]=At*Ft+Tt*hs+kt*bo+It*ds,g[11]=At*Nt+Tt*us+kt*_s+It*Zn,g[15]=At*Ht+Tt*hn+kt*gn+It*Nn,this}multiplyScalar(o){let a=this.elements;return a[0]*=o,a[4]*=o,a[8]*=o,a[12]*=o,a[1]*=o,a[5]*=o,a[9]*=o,a[13]*=o,a[2]*=o,a[6]*=o,a[10]*=o,a[14]*=o,a[3]*=o,a[7]*=o,a[11]*=o,a[15]*=o,this}determinant(){let o=this.elements,a=o[0],c=o[4],d=o[8],g=o[12],b=o[1],j=o[5],$=o[9],_e=o[13],st=o[2],rt=o[6],ut=o[10],gt=o[14],yt=o[3],wt=o[7],Ct=o[11],Pt=o[15];return yt*(+g*$*rt-d*_e*rt-g*j*ut+c*_e*ut+d*j*gt-c*$*gt)+wt*(+a*$*gt-a*_e*ut+g*b*ut-d*b*gt+d*_e*st-g*$*st)+Ct*(+a*_e*rt-a*j*gt-g*b*rt+c*b*gt+g*j*st-c*_e*st)+Pt*(-d*j*st-a*$*rt+a*j*ut+d*b*rt-c*b*ut+c*$*st)}transpose(){let o=this.elements,a;return a=o[1],o[1]=o[4],o[4]=a,a=o[2],o[2]=o[8],o[8]=a,a=o[6],o[6]=o[9],o[9]=a,a=o[3],o[3]=o[12],o[12]=a,a=o[7],o[7]=o[13],o[13]=a,a=o[11],o[11]=o[14],o[14]=a,this}setPosition(o,a,c){let d=this.elements;return o.isVector3?(d[12]=o.x,d[13]=o.y,d[14]=o.z):(d[12]=o,d[13]=a,d[14]=c),this}invert(){let o=this.elements,a=o[0],c=o[1],d=o[2],g=o[3],b=o[4],j=o[5],$=o[6],_e=o[7],st=o[8],rt=o[9],ut=o[10],gt=o[11],yt=o[12],wt=o[13],Ct=o[14],Pt=o[15],At=rt*Ct*_e-wt*ut*_e+wt*$*gt-j*Ct*gt-rt*$*Pt+j*ut*Pt,Tt=yt*ut*_e-st*Ct*_e-yt*$*gt+b*Ct*gt+st*$*Pt-b*ut*Pt,kt=st*wt*_e-yt*rt*_e+yt*j*gt-b*wt*gt-st*j*Pt+b*rt*Pt,It=yt*rt*$-st*wt*$-yt*j*ut+b*wt*ut+st*j*Ct-b*rt*Ct,Lt=a*At+c*Tt+d*kt+g*It;if(Lt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let Ft=1/Lt;return o[0]=At*Ft,o[1]=(wt*ut*g-rt*Ct*g-wt*d*gt+c*Ct*gt+rt*d*Pt-c*ut*Pt)*Ft,o[2]=(j*Ct*g-wt*$*g+wt*d*_e-c*Ct*_e-j*d*Pt+c*$*Pt)*Ft,o[3]=(rt*$*g-j*ut*g-rt*d*_e+c*ut*_e+j*d*gt-c*$*gt)*Ft,o[4]=Tt*Ft,o[5]=(st*Ct*g-yt*ut*g+yt*d*gt-a*Ct*gt-st*d*Pt+a*ut*Pt)*Ft,o[6]=(yt*$*g-b*Ct*g-yt*d*_e+a*Ct*_e+b*d*Pt-a*$*Pt)*Ft,o[7]=(b*ut*g-st*$*g+st*d*_e-a*ut*_e-b*d*gt+a*$*gt)*Ft,o[8]=kt*Ft,o[9]=(yt*rt*g-st*wt*g-yt*c*gt+a*wt*gt+st*c*Pt-a*rt*Pt)*Ft,o[10]=(b*wt*g-yt*j*g+yt*c*_e-a*wt*_e-b*c*Pt+a*j*Pt)*Ft,o[11]=(st*j*g-b*rt*g-st*c*_e+a*rt*_e+b*c*gt-a*j*gt)*Ft,o[12]=It*Ft,o[13]=(st*wt*d-yt*rt*d+yt*c*ut-a*wt*ut-st*c*Ct+a*rt*Ct)*Ft,o[14]=(yt*j*d-b*wt*d-yt*c*$+a*wt*$+b*c*Ct-a*j*Ct)*Ft,o[15]=(b*rt*d-st*j*d+st*c*$-a*rt*$-b*c*ut+a*j*ut)*Ft,this}scale(o){let a=this.elements,c=o.x,d=o.y,g=o.z;return a[0]*=c,a[4]*=d,a[8]*=g,a[1]*=c,a[5]*=d,a[9]*=g,a[2]*=c,a[6]*=d,a[10]*=g,a[3]*=c,a[7]*=d,a[11]*=g,this}getMaxScaleOnAxis(){let o=this.elements,a=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],c=o[4]*o[4]+o[5]*o[5]+o[6]*o[6],d=o[8]*o[8]+o[9]*o[9]+o[10]*o[10];return Math.sqrt(Math.max(a,c,d))}makeTranslation(o,a,c){return this.set(1,0,0,o,0,1,0,a,0,0,1,c,0,0,0,1),this}makeRotationX(o){let a=Math.cos(o),c=Math.sin(o);return this.set(1,0,0,0,0,a,-c,0,0,c,a,0,0,0,0,1),this}makeRotationY(o){let a=Math.cos(o),c=Math.sin(o);return this.set(a,0,c,0,0,1,0,0,-c,0,a,0,0,0,0,1),this}makeRotationZ(o){let a=Math.cos(o),c=Math.sin(o);return this.set(a,-c,0,0,c,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(o,a){let c=Math.cos(a),d=Math.sin(a),g=1-c,b=o.x,j=o.y,$=o.z,_e=g*b,st=g*j;return this.set(_e*b+c,_e*j-d*$,_e*$+d*j,0,_e*j+d*$,st*j+c,st*$-d*b,0,_e*$-d*j,st*$+d*b,g*$*$+c,0,0,0,0,1),this}makeScale(o,a,c){return this.set(o,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1),this}makeShear(o,a,c,d,g,b){return this.set(1,c,g,0,o,1,b,0,a,d,1,0,0,0,0,1),this}compose(o,a,c){let d=this.elements,g=a._x,b=a._y,j=a._z,$=a._w,_e=g+g,st=b+b,rt=j+j,ut=g*_e,gt=g*st,yt=g*rt,wt=b*st,Ct=b*rt,Pt=j*rt,At=$*_e,Tt=$*st,kt=$*rt,It=c.x,Lt=c.y,Ft=c.z;return d[0]=(1-(wt+Pt))*It,d[1]=(gt+kt)*It,d[2]=(yt-Tt)*It,d[3]=0,d[4]=(gt-kt)*Lt,d[5]=(1-(ut+Pt))*Lt,d[6]=(Ct+At)*Lt,d[7]=0,d[8]=(yt+Tt)*Ft,d[9]=(Ct-At)*Ft,d[10]=(1-(ut+wt))*Ft,d[11]=0,d[12]=o.x,d[13]=o.y,d[14]=o.z,d[15]=1,this}decompose(o,a,c){let d=this.elements,g=Mu.set(d[0],d[1],d[2]).length(),b=Mu.set(d[4],d[5],d[6]).length(),j=Mu.set(d[8],d[9],d[10]).length();this.determinant()<0&&(g=-g),o.x=d[12],o.y=d[13],o.z=d[14],Us.copy(this);let $=1/g,_e=1/b,st=1/j;return Us.elements[0]*=$,Us.elements[1]*=$,Us.elements[2]*=$,Us.elements[4]*=_e,Us.elements[5]*=_e,Us.elements[6]*=_e,Us.elements[8]*=st,Us.elements[9]*=st,Us.elements[10]*=st,a.setFromRotationMatrix(Us),c.x=g,c.y=b,c.z=j,this}makePerspective(o,a,c,d,g,b){let j=this.elements,$=2*g/(a-o),_e=2*g/(c-d),st=(a+o)/(a-o),rt=(c+d)/(c-d),ut=-(b+g)/(b-g),gt=-2*b*g/(b-g);return j[0]=$,j[4]=0,j[8]=st,j[12]=0,j[1]=0,j[5]=_e,j[9]=rt,j[13]=0,j[2]=0,j[6]=0,j[10]=ut,j[14]=gt,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,this}makeOrthographic(o,a,c,d,g,b){let j=this.elements,$=1/(a-o),_e=1/(c-d),st=1/(b-g),rt=(a+o)*$,ut=(c+d)*_e,gt=(b+g)*st;return j[0]=2*$,j[4]=0,j[8]=0,j[12]=-rt,j[1]=0,j[5]=2*_e,j[9]=0,j[13]=-ut,j[2]=0,j[6]=0,j[10]=-2*st,j[14]=-gt,j[3]=0,j[7]=0,j[11]=0,j[15]=1,this}equals(o){let a=this.elements,c=o.elements;for(let d=0;d<16;d++)if(a[d]!==c[d])return!1;return!0}fromArray(o,a=0){for(let c=0;c<16;c++)this.elements[c]=o[c+a];return this}toArray(o=[],a=0){let c=this.elements;return o[a]=c[0],o[a+1]=c[1],o[a+2]=c[2],o[a+3]=c[3],o[a+4]=c[4],o[a+5]=c[5],o[a+6]=c[6],o[a+7]=c[7],o[a+8]=c[8],o[a+9]=c[9],o[a+10]=c[10],o[a+11]=c[11],o[a+12]=c[12],o[a+13]=c[13],o[a+14]=c[14],o[a+15]=c[15],o}},Mu=new _,Us=new ce$1,pk=new _(0,0,0),mk=new _(1,1,1),il=new _,Wg=new _,Jn=new _,UT=new ce$1,GT=new Qe,or$1=class{constructor(o=0,a=0,c=0,d=or$1.DEFAULT_ORDER){this.isEuler=!0,this._x=o,this._y=a,this._z=c,this._order=d}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get order(){return this._order}set order(o){this._order=o,this._onChangeCallback()}set(o,a,c,d=this._order){return this._x=o,this._y=a,this._z=c,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}setFromRotationMatrix(o,a=this._order,c=!0){let d=o.elements,g=d[0],b=d[4],j=d[8],$=d[1],_e=d[5],st=d[9],rt=d[2],ut=d[6],gt=d[10];switch(a){case"XYZ":this._y=Math.asin(gi(j,-1,1)),Math.abs(j)<.9999999?(this._x=Math.atan2(-st,gt),this._z=Math.atan2(-b,g)):(this._x=Math.atan2(ut,_e),this._z=0);break;case"YXZ":this._x=Math.asin(-gi(st,-1,1)),Math.abs(st)<.9999999?(this._y=Math.atan2(j,gt),this._z=Math.atan2($,_e)):(this._y=Math.atan2(-rt,g),this._z=0);break;case"ZXY":this._x=Math.asin(gi(ut,-1,1)),Math.abs(ut)<.9999999?(this._y=Math.atan2(-rt,gt),this._z=Math.atan2(-b,_e)):(this._y=0,this._z=Math.atan2($,g));break;case"ZYX":this._y=Math.asin(-gi(rt,-1,1)),Math.abs(rt)<.9999999?(this._x=Math.atan2(ut,gt),this._z=Math.atan2($,g)):(this._x=0,this._z=Math.atan2(-b,_e));break;case"YZX":this._z=Math.asin(gi($,-1,1)),Math.abs($)<.9999999?(this._x=Math.atan2(-st,_e),this._y=Math.atan2(-rt,g)):(this._x=0,this._y=Math.atan2(j,gt));break;case"XZY":this._z=Math.asin(-gi(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(ut,_e),this._y=Math.atan2(j,g)):(this._x=Math.atan2(-st,gt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+a)}return this._order=a,c===!0&&this._onChangeCallback(),this}setFromQuaternion(o,a,c){return UT.makeRotationFromQuaternion(o),this.setFromRotationMatrix(UT,a,c)}setFromVector3(o,a=this._order){return this.set(o.x,o.y,o.z,a)}reorder(o){return GT.setFromEuler(this),this.setFromQuaternion(GT,o)}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}fromArray(o){return this._x=o[0],this._y=o[1],this._z=o[2],o[3]!==void 0&&(this._order=o[3]),this._onChangeCallback(),this}toArray(o=[],a=0){return o[a]=this._x,o[a+1]=this._y,o[a+2]=this._z,o[a+3]=this._order,o}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};or$1.DEFAULT_ORDER="XYZ";var Ep=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},gk=0,jT=new _,Cu=new Qe,da=new ce$1,qg=new _,lp=new _,yk=new _,vk=new Qe,HT=new _(1,0,0),WT=new _(0,1,0),qT=new _(0,0,1),xk={type:"added"},YT={type:"removed"},_t=class extends fr$2{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gk++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_t.DEFAULT_UP.clone();let e=new _,o=new or$1,a=new Qe,c=new _(1,1,1);function d(){a.setFromEuler(o,!1)}function g(){o.setFromQuaternion(a,void 0,!1)}o._onChange(d),a._onChange(g),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new ce$1},normalMatrix:{value:new nr}}),this.matrix=new ce$1,this.matrixWorld=new ce$1,this.matrixAutoUpdate=_t.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ep,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,o){this.quaternion.setFromAxisAngle(e,o)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,o){return Cu.setFromAxisAngle(e,o),this.quaternion.multiply(Cu),this}rotateOnWorldAxis(e,o){return Cu.setFromAxisAngle(e,o),this.quaternion.premultiply(Cu),this}rotateX(e){return this.rotateOnAxis(HT,e)}rotateY(e){return this.rotateOnAxis(WT,e)}rotateZ(e){return this.rotateOnAxis(qT,e)}translateOnAxis(e,o){return jT.copy(e).applyQuaternion(this.quaternion),this.position.add(jT.multiplyScalar(o)),this}translateX(e){return this.translateOnAxis(HT,e)}translateY(e){return this.translateOnAxis(WT,e)}translateZ(e){return this.translateOnAxis(qT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(da.copy(this.matrixWorld).invert())}lookAt(e,o,a){e.isVector3?qg.copy(e):qg.set(e,o,a);let c=this.parent;this.updateWorldMatrix(!0,!1),lp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?da.lookAt(lp,qg,this.up):da.lookAt(qg,lp,this.up),this.quaternion.setFromRotationMatrix(da),c&&(da.extractRotation(c.matrixWorld),Cu.setFromRotationMatrix(da),this.quaternion.premultiply(Cu.invert()))}add(e){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(xk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}let o=this.children.indexOf(e);return o!==-1&&(e.parent=null,this.children.splice(o,1),e.dispatchEvent(YT)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let o=this.children[e];o.parent=null,o.dispatchEvent(YT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),da.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),da.multiply(e.parent.matrixWorld)),e.applyMatrix4(da),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,o){if(this[e]===o)return this;for(let a=0,c=this.children.length;a<c;a++){let d=this.children[a].getObjectByProperty(e,o);if(d!==void 0)return d}}getObjectsByProperty(e,o){let a=[];this[e]===o&&a.push(this);for(let c=0,d=this.children.length;c<d;c++){let g=this.children[c].getObjectsByProperty(e,o);g.length>0&&(a=a.concat(g))}return a}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lp,e,yk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lp,vk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let o=this.matrixWorld.elements;return e.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(e){e(this);let o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].traverseVisible(e)}traverseAncestors(e){let o=this.parent;o!==null&&(e(o),o.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let o=this.children;for(let a=0,c=o.length;a<c;a++){let d=o[a];(d.matrixWorldAutoUpdate===!0||e===!0)&&d.updateMatrixWorld(e)}}updateWorldMatrix(e,o){let a=this.parent;if(e===!0&&a!==null&&a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){let c=this.children;for(let d=0,g=c.length;d<g;d++){let b=c[d];b.matrixWorldAutoUpdate===!0&&b.updateWorldMatrix(!1,!0)}}}toJSON(e){let o=e===void 0||typeof e=="string",a={};o&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let c={};c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),this.castShadow===!0&&(c.castShadow=!0),this.receiveShadow===!0&&(c.receiveShadow=!0),this.visible===!1&&(c.visible=!1),this.frustumCulled===!1&&(c.frustumCulled=!1),this.renderOrder!==0&&(c.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(c.instanceColor=this.instanceColor.toJSON()));function d(b,j){return b[j.uuid]===void 0&&(b[j.uuid]=j.toJSON(e)),j.uuid}if(this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(c.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=d(e.geometries,this.geometry);let b=this.geometry.parameters;if(b!==void 0&&b.shapes!==void 0){let j=b.shapes;if(Array.isArray(j))for(let $=0,_e=j.length;$<_e;$++){let st=j[$];d(e.shapes,st)}else d(e.shapes,j)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(d(e.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let b=[];for(let j=0,$=this.material.length;j<$;j++)b.push(d(e.materials,this.material[j]));c.material=b}else c.material=d(e.materials,this.material);if(this.children.length>0){c.children=[];for(let b=0;b<this.children.length;b++)c.children.push(this.children[b].toJSON(e).object)}if(this.animations.length>0){c.animations=[];for(let b=0;b<this.animations.length;b++){let j=this.animations[b];c.animations.push(d(e.animations,j))}}if(o){let b=g(e.geometries),j=g(e.materials),$=g(e.textures),_e=g(e.images),st=g(e.shapes),rt=g(e.skeletons),ut=g(e.animations),gt=g(e.nodes);b.length>0&&(a.geometries=b),j.length>0&&(a.materials=j),$.length>0&&(a.textures=$),_e.length>0&&(a.images=_e),st.length>0&&(a.shapes=st),rt.length>0&&(a.skeletons=rt),ut.length>0&&(a.animations=ut),gt.length>0&&(a.nodes=gt)}return a.object=c,a;function g(b){let j=[];for(let $ in b){let _e=b[$];delete _e.metadata,j.push(_e)}return j}}clone(e){return new this.constructor().copy(this,e)}copy(e,o=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),o===!0)for(let a=0;a<e.children.length;a++){let c=e.children[a];this.add(c.clone())}return this}};_t.DEFAULT_UP=new _(0,1,0);_t.DEFAULT_MATRIX_AUTO_UPDATE=!0;_t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Gs=new _,fa=new _,AS=new _,pa=new _,Pu=new _,Du=new _,XT=new _,_S=new _,ES=new _,TS=new _,Dr$1=class{constructor(o=new _,a=new _,c=new _){this.a=o,this.b=a,this.c=c}static getNormal(o,a,c,d){d.subVectors(c,a),Gs.subVectors(o,a),d.cross(Gs);let g=d.lengthSq();return g>0?d.multiplyScalar(1/Math.sqrt(g)):d.set(0,0,0)}static getBarycoord(o,a,c,d,g){Gs.subVectors(d,a),fa.subVectors(c,a),AS.subVectors(o,a);let b=Gs.dot(Gs),j=Gs.dot(fa),$=Gs.dot(AS),_e=fa.dot(fa),st=fa.dot(AS),rt=b*_e-j*j;if(rt===0)return g.set(-2,-1,-1);let ut=1/rt,gt=(_e*$-j*st)*ut,yt=(b*st-j*$)*ut;return g.set(1-gt-yt,yt,gt)}static containsPoint(o,a,c,d){return this.getBarycoord(o,a,c,d,pa),pa.x>=0&&pa.y>=0&&pa.x+pa.y<=1}static getUV(o,a,c,d,g,b,j,$){return this.getBarycoord(o,a,c,d,pa),$.set(0,0),$.addScaledVector(g,pa.x),$.addScaledVector(b,pa.y),$.addScaledVector(j,pa.z),$}static isFrontFacing(o,a,c,d){return Gs.subVectors(c,a),fa.subVectors(o,a),Gs.cross(fa).dot(d)<0}set(o,a,c){return this.a.copy(o),this.b.copy(a),this.c.copy(c),this}setFromPointsAndIndices(o,a,c,d){return this.a.copy(o[a]),this.b.copy(o[c]),this.c.copy(o[d]),this}setFromAttributeAndIndices(o,a,c,d){return this.a.fromBufferAttribute(o,a),this.b.fromBufferAttribute(o,c),this.c.fromBufferAttribute(o,d),this}clone(){return new this.constructor().copy(this)}copy(o){return this.a.copy(o.a),this.b.copy(o.b),this.c.copy(o.c),this}getArea(){return Gs.subVectors(this.c,this.b),fa.subVectors(this.a,this.b),Gs.cross(fa).length()*.5}getMidpoint(o){return o.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(o){return Dr$1.getNormal(this.a,this.b,this.c,o)}getPlane(o){return o.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(o,a){return Dr$1.getBarycoord(o,this.a,this.b,this.c,a)}getUV(o,a,c,d,g){return Dr$1.getUV(o,this.a,this.b,this.c,a,c,d,g)}containsPoint(o){return Dr$1.containsPoint(o,this.a,this.b,this.c)}isFrontFacing(o){return Dr$1.isFrontFacing(this.a,this.b,this.c,o)}intersectsBox(o){return o.intersectsTriangle(this)}closestPointToPoint(o,a){let c=this.a,d=this.b,g=this.c,b,j;Pu.subVectors(d,c),Du.subVectors(g,c),_S.subVectors(o,c);let $=Pu.dot(_S),_e=Du.dot(_S);if($<=0&&_e<=0)return a.copy(c);ES.subVectors(o,d);let st=Pu.dot(ES),rt=Du.dot(ES);if(st>=0&&rt<=st)return a.copy(d);let ut=$*rt-st*_e;if(ut<=0&&$>=0&&st<=0)return b=$/($-st),a.copy(c).addScaledVector(Pu,b);TS.subVectors(o,g);let gt=Pu.dot(TS),yt=Du.dot(TS);if(yt>=0&&gt<=yt)return a.copy(g);let wt=gt*_e-$*yt;if(wt<=0&&_e>=0&&yt<=0)return j=_e/(_e-yt),a.copy(c).addScaledVector(Du,j);let Ct=st*yt-gt*rt;if(Ct<=0&&rt-st>=0&&gt-yt>=0)return XT.subVectors(g,d),j=(rt-st)/(rt-st+(gt-yt)),a.copy(d).addScaledVector(XT,j);let Pt=1/(Ct+wt+ut);return b=wt*Pt,j=ut*Pt,a.copy(c).addScaledVector(Pu,b).addScaledVector(Du,j)}equals(o){return o.a.equals(this.a)&&o.b.equals(this.b)&&o.c.equals(this.c)}},bk=0,Sc=class extends fr$2{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bk++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=sl,this.side=es,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=zM,this.blendDst=UM,this.blendEquation=Fu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=US,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hS,this.stencilZFail=hS,this.stencilZPass=hS,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let o in e){let a=e[o];if(a===void 0){console.warn("THREE.Material: '"+o+"' parameter is undefined.");continue}let c=this[o];if(c===void 0){console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.");continue}c&&c.isColor?c.set(a):c&&c.isVector3&&a&&a.isVector3?c.copy(a):this[o]=a}}toJSON(e){let o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{}});let a={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen!==void 0&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(a.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(a.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(a.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(a.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(e).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(e).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(e).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(e).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(e).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(a.combine=this.combine)),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(a.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(a.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(a.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(a.size=this.size),this.shadowSide!==null&&(a.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==sl&&(a.blending=this.blending),this.side!==es&&(a.side=this.side),this.vertexColors&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=this.transparent),a.depthFunc=this.depthFunc,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.colorWrite=this.colorWrite,a.stencilWrite=this.stencilWrite,a.stencilWriteMask=this.stencilWriteMask,a.stencilFunc=this.stencilFunc,a.stencilRef=this.stencilRef,a.stencilFuncMask=this.stencilFuncMask,a.stencilFail=this.stencilFail,a.stencilZFail=this.stencilZFail,a.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(a.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(a.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(a.wireframe=this.wireframe),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(a.flatShading=this.flatShading),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),this.fog===!1&&(a.fog=!1),Object.keys(this.userData).length>0&&(a.userData=this.userData);function c(d){let g=[];for(let b in d){let j=d[b];delete j.metadata,g.push(j)}return g}if(o){let d=c(e.textures),g=c(e.images);d.length>0&&(a.textures=d),g.length>0&&(a.images=g)}return a}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let o=e.clippingPlanes,a=null;if(o!==null){let c=o.length;a=new Array(c);for(let d=0;d!==c;++d)a[d]=o[d].clone()}return this.clippingPlanes=a,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},ts=class extends Sc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=GM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},mi=new _,Yg=new z$2,Xe=class{constructor(e,o,a=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=o,this.count=e!==void 0?e.length/o:0,this.normalized=a,this.usage=WS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,o,a){e*=this.itemSize,a*=o.itemSize;for(let c=0,d=this.itemSize;c<d;c++)this.array[e+c]=o.array[a+c];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let o=0,a=this.count;o<a;o++)Yg.fromBufferAttribute(this,o),Yg.applyMatrix3(e),this.setXY(o,Yg.x,Yg.y);else if(this.itemSize===3)for(let o=0,a=this.count;o<a;o++)mi.fromBufferAttribute(this,o),mi.applyMatrix3(e),this.setXYZ(o,mi.x,mi.y,mi.z);return this}applyMatrix4(e){for(let o=0,a=this.count;o<a;o++)mi.fromBufferAttribute(this,o),mi.applyMatrix4(e),this.setXYZ(o,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let o=0,a=this.count;o<a;o++)mi.fromBufferAttribute(this,o),mi.applyNormalMatrix(e),this.setXYZ(o,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let o=0,a=this.count;o<a;o++)mi.fromBufferAttribute(this,o),mi.transformDirection(e),this.setXYZ(o,mi.x,mi.y,mi.z);return this}set(e,o=0){return this.array.set(e,o),this}getX(e){let o=this.array[e*this.itemSize];return this.normalized&&(o=ya(o,this.array)),o}setX(e,o){return this.normalized&&(o=br(o,this.array)),this.array[e*this.itemSize]=o,this}getY(e){let o=this.array[e*this.itemSize+1];return this.normalized&&(o=ya(o,this.array)),o}setY(e,o){return this.normalized&&(o=br(o,this.array)),this.array[e*this.itemSize+1]=o,this}getZ(e){let o=this.array[e*this.itemSize+2];return this.normalized&&(o=ya(o,this.array)),o}setZ(e,o){return this.normalized&&(o=br(o,this.array)),this.array[e*this.itemSize+2]=o,this}getW(e){let o=this.array[e*this.itemSize+3];return this.normalized&&(o=ya(o,this.array)),o}setW(e,o){return this.normalized&&(o=br(o,this.array)),this.array[e*this.itemSize+3]=o,this}setXY(e,o,a){return e*=this.itemSize,this.normalized&&(o=br(o,this.array),a=br(a,this.array)),this.array[e+0]=o,this.array[e+1]=a,this}setXYZ(e,o,a,c){return e*=this.itemSize,this.normalized&&(o=br(o,this.array),a=br(a,this.array),c=br(c,this.array)),this.array[e+0]=o,this.array[e+1]=a,this.array[e+2]=c,this}setXYZW(e,o,a,c,d){return e*=this.itemSize,this.normalized&&(o=br(o,this.array),a=br(a,this.array),c=br(c,this.array),d=br(d,this.array)),this.array[e+0]=o,this.array[e+1]=a,this.array[e+2]=c,this.array[e+3]=d,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==WS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},wy=class extends Xe{constructor(e,o,a){super(new Uint16Array(e),o,a)}},_o=class extends Xe{constructor(e,o,a){super(new Uint32Array(e),o,a)}},Te=class extends Xe{constructor(e,o,a){super(new Float32Array(e),o,a)}},Sk=0,fs=new ce$1,MS$1=new _t,Ou=new _,$n=new Wt,cp=new Wt,Gi=new _,Pe=class extends fr$2{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sk++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YM(e)?_o:wy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,o){return this.attributes[e]=o,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,o,a=0){this.groups.push({start:e,count:o,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(e,o){this.drawRange.start=e,this.drawRange.count=o}applyMatrix4(e){let o=this.attributes.position;o!==void 0&&(o.applyMatrix4(e),o.needsUpdate=!0);let a=this.attributes.normal;if(a!==void 0){let d=new nr().getNormalMatrix(e);a.applyNormalMatrix(d),a.needsUpdate=!0}let c=this.attributes.tangent;return c!==void 0&&(c.transformDirection(e),c.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return fs.makeRotationFromQuaternion(e),this.applyMatrix4(fs),this}rotateX(e){return fs.makeRotationX(e),this.applyMatrix4(fs),this}rotateY(e){return fs.makeRotationY(e),this.applyMatrix4(fs),this}rotateZ(e){return fs.makeRotationZ(e),this.applyMatrix4(fs),this}translate(e,o,a){return fs.makeTranslation(e,o,a),this.applyMatrix4(fs),this}scale(e,o,a){return fs.makeScale(e,o,a),this.applyMatrix4(fs),this}lookAt(e){return MS$1.lookAt(e),MS$1.updateMatrix(),this.applyMatrix4(MS$1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ou).negate(),this.translate(Ou.x,Ou.y,Ou.z),this}setFromPoints(e){let o=[];for(let a=0,c=e.length;a<c;a++){let d=e[a];o.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Te(o,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wt);let e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new _(-1/0,-1/0,-1/0),new _(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),o)for(let a=0,c=o.length;a<c;a++){let d=o[a];$n.setFromBufferAttribute(d),this.morphTargetsRelative?(Gi.addVectors(this.boundingBox.min,$n.min),this.boundingBox.expandByPoint(Gi),Gi.addVectors(this.boundingBox.max,$n.max),this.boundingBox.expandByPoint(Gi)):(this.boundingBox.expandByPoint($n.min),this.boundingBox.expandByPoint($n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Br);let e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new _,1/0);return}if(e){let a=this.boundingSphere.center;if($n.setFromBufferAttribute(e),o)for(let d=0,g=o.length;d<g;d++){let b=o[d];cp.setFromBufferAttribute(b),this.morphTargetsRelative?(Gi.addVectors($n.min,cp.min),$n.expandByPoint(Gi),Gi.addVectors($n.max,cp.max),$n.expandByPoint(Gi)):($n.expandByPoint(cp.min),$n.expandByPoint(cp.max))}$n.getCenter(a);let c=0;for(let d=0,g=e.count;d<g;d++)Gi.fromBufferAttribute(e,d),c=Math.max(c,a.distanceToSquared(Gi));if(o)for(let d=0,g=o.length;d<g;d++){let b=o[d],j=this.morphTargetsRelative;for(let $=0,_e=b.count;$<_e;$++)Gi.fromBufferAttribute(b,$),j&&(Ou.fromBufferAttribute(e,$),Gi.add(Ou)),c=Math.max(c,a.distanceToSquared(Gi))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,o=this.attributes;if(e===null||o.position===void 0||o.normal===void 0||o.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let a=e.array,c=o.position.array,d=o.normal.array,g=o.uv.array,b=c.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xe(new Float32Array(4*b),4));let j=this.getAttribute("tangent").array,$=[],_e=[];for(let Ht=0;Ht<b;Ht++)$[Ht]=new _,_e[Ht]=new _;let st=new _,rt=new _,ut=new _,gt=new z$2,yt=new z$2,wt=new z$2,Ct=new _,Pt=new _;function At(Ht,dr,hs){st.fromArray(c,Ht*3),rt.fromArray(c,dr*3),ut.fromArray(c,hs*3),gt.fromArray(g,Ht*2),yt.fromArray(g,dr*2),wt.fromArray(g,hs*2),rt.sub(st),ut.sub(st),yt.sub(gt),wt.sub(gt);let us=1/(yt.x*wt.y-wt.x*yt.y);!isFinite(us)||(Ct.copy(rt).multiplyScalar(wt.y).addScaledVector(ut,-yt.y).multiplyScalar(us),Pt.copy(ut).multiplyScalar(yt.x).addScaledVector(rt,-wt.x).multiplyScalar(us),$[Ht].add(Ct),$[dr].add(Ct),$[hs].add(Ct),_e[Ht].add(Pt),_e[dr].add(Pt),_e[hs].add(Pt))}let Tt=this.groups;Tt.length===0&&(Tt=[{start:0,count:a.length}]);for(let Ht=0,dr=Tt.length;Ht<dr;++Ht){let hs=Tt[Ht],us=hs.start,hn=hs.count;for(let un=us,bo=us+hn;un<bo;un+=3)At(a[un+0],a[un+1],a[un+2])}let kt=new _,It=new _,Lt=new _,Ft=new _;function Nt(Ht){Lt.fromArray(d,Ht*3),Ft.copy(Lt);let dr=$[Ht];kt.copy(dr),kt.sub(Lt.multiplyScalar(Lt.dot(dr))).normalize(),It.crossVectors(Ft,dr);let hs=It.dot(_e[Ht])<0?-1:1;j[Ht*4]=kt.x,j[Ht*4+1]=kt.y,j[Ht*4+2]=kt.z,j[Ht*4+3]=hs}for(let Ht=0,dr=Tt.length;Ht<dr;++Ht){let hs=Tt[Ht],us=hs.start,hn=hs.count;for(let un=us,bo=us+hn;un<bo;un+=3)Nt(a[un+0]),Nt(a[un+1]),Nt(a[un+2])}}computeVertexNormals(){let e=this.index,o=this.getAttribute("position");if(o!==void 0){let a=this.getAttribute("normal");if(a===void 0)a=new Xe(new Float32Array(o.count*3),3),this.setAttribute("normal",a);else for(let rt=0,ut=a.count;rt<ut;rt++)a.setXYZ(rt,0,0,0);let c=new _,d=new _,g=new _,b=new _,j=new _,$=new _,_e=new _,st=new _;if(e)for(let rt=0,ut=e.count;rt<ut;rt+=3){let gt=e.getX(rt+0),yt=e.getX(rt+1),wt=e.getX(rt+2);c.fromBufferAttribute(o,gt),d.fromBufferAttribute(o,yt),g.fromBufferAttribute(o,wt),_e.subVectors(g,d),st.subVectors(c,d),_e.cross(st),b.fromBufferAttribute(a,gt),j.fromBufferAttribute(a,yt),$.fromBufferAttribute(a,wt),b.add(_e),j.add(_e),$.add(_e),a.setXYZ(gt,b.x,b.y,b.z),a.setXYZ(yt,j.x,j.y,j.z),a.setXYZ(wt,$.x,$.y,$.z)}else for(let rt=0,ut=o.count;rt<ut;rt+=3)c.fromBufferAttribute(o,rt+0),d.fromBufferAttribute(o,rt+1),g.fromBufferAttribute(o,rt+2),_e.subVectors(g,d),st.subVectors(c,d),_e.cross(st),a.setXYZ(rt+0,_e.x,_e.y,_e.z),a.setXYZ(rt+1,_e.x,_e.y,_e.z),a.setXYZ(rt+2,_e.x,_e.y,_e.z);this.normalizeNormals(),a.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let o=0,a=e.count;o<a;o++)Gi.fromBufferAttribute(e,o),Gi.normalize(),e.setXYZ(o,Gi.x,Gi.y,Gi.z)}toNonIndexed(){function e(b,j){let $=b.array,_e=b.itemSize,st=b.normalized,rt=new $.constructor(j.length*_e),ut=0,gt=0;for(let yt=0,wt=j.length;yt<wt;yt++){b.isInterleavedBufferAttribute?ut=j[yt]*b.data.stride+b.offset:ut=j[yt]*_e;for(let Ct=0;Ct<_e;Ct++)rt[gt++]=$[ut++]}return new Xe(rt,_e,st)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let o=new Pe,a=this.index.array,c=this.attributes;for(let b in c){let j=c[b],$=e(j,a);o.setAttribute(b,$)}let d=this.morphAttributes;for(let b in d){let j=[],$=d[b];for(let _e=0,st=$.length;_e<st;_e++){let rt=$[_e],ut=e(rt,a);j.push(ut)}o.morphAttributes[b]=j}o.morphTargetsRelative=this.morphTargetsRelative;let g=this.groups;for(let b=0,j=g.length;b<j;b++){let $=g[b];o.addGroup($.start,$.count,$.materialIndex)}return o}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let j=this.parameters;for(let $ in j)j[$]!==void 0&&(e[$]=j[$]);return e}e.data={attributes:{}};let o=this.index;o!==null&&(e.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});let a=this.attributes;for(let j in a){let $=a[j];e.data.attributes[j]=$.toJSON(e.data)}let c={},d=!1;for(let j in this.morphAttributes){let $=this.morphAttributes[j],_e=[];for(let st=0,rt=$.length;st<rt;st++){let ut=$[st];_e.push(ut.toJSON(e.data))}_e.length>0&&(c[j]=_e,d=!0)}d&&(e.data.morphAttributes=c,e.data.morphTargetsRelative=this.morphTargetsRelative);let g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));let b=this.boundingSphere;return b!==null&&(e.data.boundingSphere={center:b.center.toArray(),radius:b.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let o={};this.name=e.name;let a=e.index;a!==null&&this.setIndex(a.clone(o));let c=e.attributes;for(let $ in c){let _e=c[$];this.setAttribute($,_e.clone(o))}let d=e.morphAttributes;for(let $ in d){let _e=[],st=d[$];for(let rt=0,ut=st.length;rt<ut;rt++)_e.push(st[rt].clone(o));this.morphAttributes[$]=_e}this.morphTargetsRelative=e.morphTargetsRelative;let g=e.groups;for(let $=0,_e=g.length;$<_e;$++){let st=g[$];this.addGroup(st.start,st.count,st.materialIndex)}let b=e.boundingBox;b!==null&&(this.boundingBox=b.clone());let j=e.boundingSphere;return j!==null&&(this.boundingSphere=j.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},QT=new ce$1,Iu=new qs,CS=new Br,up=new _,hp=new _,dp=new _,PS=new _,Xg=new _,Qg=new z$2,Kg=new z$2,Zg=new z$2,DS=new _,Jg=new _,sr=class extends _t{constructor(e=new Pe,o=new ts){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,o=Object.keys(e);if(o.length>0){let a=e[o[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,d=a.length;c<d;c++){let g=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=c}}}}getVertexPosition(e,o){let a=this.geometry,c=a.attributes.position,d=a.morphAttributes.position,g=a.morphTargetsRelative;o.fromBufferAttribute(c,e);let b=this.morphTargetInfluences;if(d&&b){Xg.set(0,0,0);for(let j=0,$=d.length;j<$;j++){let _e=b[j],st=d[j];_e!==0&&(PS.fromBufferAttribute(st,e),g?Xg.addScaledVector(PS,_e):Xg.addScaledVector(PS.sub(o),_e))}o.add(Xg)}return this.isSkinnedMesh&&this.boneTransform(e,o),o}raycast(e,o){let a=this.geometry,c=this.material,d=this.matrixWorld;if(c===void 0||(a.boundingSphere===null&&a.computeBoundingSphere(),CS.copy(a.boundingSphere),CS.applyMatrix4(d),e.ray.intersectsSphere(CS)===!1)||(QT.copy(d).invert(),Iu.copy(e.ray).applyMatrix4(QT),a.boundingBox!==null&&Iu.intersectsBox(a.boundingBox)===!1))return;let g,b=a.index,j=a.attributes.position,$=a.attributes.uv,_e=a.attributes.uv2,st=a.groups,rt=a.drawRange;if(b!==null)if(Array.isArray(c))for(let ut=0,gt=st.length;ut<gt;ut++){let yt=st[ut],wt=c[yt.materialIndex],Ct=Math.max(yt.start,rt.start),Pt=Math.min(b.count,Math.min(yt.start+yt.count,rt.start+rt.count));for(let At=Ct,Tt=Pt;At<Tt;At+=3){let kt=b.getX(At),It=b.getX(At+1),Lt=b.getX(At+2);g=$g(this,wt,e,Iu,$,_e,kt,It,Lt),g&&(g.faceIndex=Math.floor(At/3),g.face.materialIndex=yt.materialIndex,o.push(g))}}else{let ut=Math.max(0,rt.start),gt=Math.min(b.count,rt.start+rt.count);for(let yt=ut,wt=gt;yt<wt;yt+=3){let Ct=b.getX(yt),Pt=b.getX(yt+1),At=b.getX(yt+2);g=$g(this,c,e,Iu,$,_e,Ct,Pt,At),g&&(g.faceIndex=Math.floor(yt/3),o.push(g))}}else if(j!==void 0)if(Array.isArray(c))for(let ut=0,gt=st.length;ut<gt;ut++){let yt=st[ut],wt=c[yt.materialIndex],Ct=Math.max(yt.start,rt.start),Pt=Math.min(j.count,Math.min(yt.start+yt.count,rt.start+rt.count));for(let At=Ct,Tt=Pt;At<Tt;At+=3){let kt=At,It=At+1,Lt=At+2;g=$g(this,wt,e,Iu,$,_e,kt,It,Lt),g&&(g.faceIndex=Math.floor(At/3),g.face.materialIndex=yt.materialIndex,o.push(g))}}else{let ut=Math.max(0,rt.start),gt=Math.min(j.count,rt.start+rt.count);for(let yt=ut,wt=gt;yt<wt;yt+=3){let Ct=yt,Pt=yt+1,At=yt+2;g=$g(this,c,e,Iu,$,_e,Ct,Pt,At),g&&(g.faceIndex=Math.floor(yt/3),o.push(g))}}}};function wk(e,o,a,c,d,g,b,j){let $;if(o.side===yi?$=c.intersectTriangle(b,g,d,!0,j):$=c.intersectTriangle(d,g,b,o.side===es,j),$===null)return null;Jg.copy(j),Jg.applyMatrix4(e.matrixWorld);let _e=a.ray.origin.distanceTo(Jg);return _e<a.near||_e>a.far?null:{distance:_e,point:Jg.clone(),object:e}}function $g(e,o,a,c,d,g,b,j,$){e.getVertexPosition(b,up),e.getVertexPosition(j,hp),e.getVertexPosition($,dp);let _e=wk(e,o,a,c,up,hp,dp,DS);if(_e){d&&(Qg.fromBufferAttribute(d,b),Kg.fromBufferAttribute(d,j),Zg.fromBufferAttribute(d,$),_e.uv=Dr$1.getUV(DS,up,hp,dp,Qg,Kg,Zg,new z$2)),g&&(Qg.fromBufferAttribute(g,b),Kg.fromBufferAttribute(g,j),Zg.fromBufferAttribute(g,$),_e.uv2=Dr$1.getUV(DS,up,hp,dp,Qg,Kg,Zg,new z$2));let st={a:b,b:j,c:$,normal:new _,materialIndex:0};Dr$1.getNormal(up,hp,dp,st.normal),_e.face=st}return _e}var vi=class extends Pe{constructor(e=1,o=1,a=1,c=1,d=1,g=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:o,depth:a,widthSegments:c,heightSegments:d,depthSegments:g};let b=this;c=Math.floor(c),d=Math.floor(d),g=Math.floor(g);let j=[],$=[],_e=[],st=[],rt=0,ut=0;gt("z","y","x",-1,-1,a,o,e,g,d,0),gt("z","y","x",1,-1,a,o,-e,g,d,1),gt("x","z","y",1,1,e,a,o,c,g,2),gt("x","z","y",1,-1,e,a,-o,c,g,3),gt("x","y","z",1,-1,e,o,a,c,d,4),gt("x","y","z",-1,-1,e,o,-a,c,d,5),this.setIndex(j),this.setAttribute("position",new Te($,3)),this.setAttribute("normal",new Te(_e,3)),this.setAttribute("uv",new Te(st,2));function gt(yt,wt,Ct,Pt,At,Tt,kt,It,Lt,Ft,Nt){let Ht=Tt/Lt,dr=kt/Ft,hs=Tt/2,us=kt/2,hn=It/2,un=Lt+1,bo=Ft+1,_s=0,gn=0,Gr=new _;for(let ds=0;ds<bo;ds++){let Zn=ds*dr-us;for(let Nn=0;Nn<un;Nn++){let Qn=Nn*Ht-hs;Gr[yt]=Qn*Pt,Gr[wt]=Zn*At,Gr[Ct]=hn,$.push(Gr.x,Gr.y,Gr.z),Gr[yt]=0,Gr[wt]=0,Gr[Ct]=It>0?1:-1,_e.push(Gr.x,Gr.y,Gr.z),st.push(Nn/Lt),st.push(1-ds/Ft),_s+=1}}for(let ds=0;ds<Ft;ds++)for(let Zn=0;Zn<Lt;Zn++){let Nn=rt+Zn+un*ds,Qn=rt+Zn+un*(ds+1),bu=rt+(Zn+1)+un*(ds+1),ou=rt+(Zn+1)+un*ds;j.push(Nn,Qn,ou),j.push(Qn,bu,ou),gn+=6}b.addGroup(ut,gn,Nt),ut+=gn,rt+=_s}}static fromJSON(e){return new vi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function ju(e){let o={};for(let a in e){o[a]={};for(let c in e[a]){let d=e[a][c];d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?o[a][c]=d.clone():Array.isArray(d)?o[a][c]=d.slice():o[a][c]=d}}return o}function bn(e){let o={};for(let a=0;a<e.length;a++){let c=ju(e[a]);for(let d in c)o[d]=c[d]}return o}function Ak(e){let o=[];for(let a=0;a<e.length;a++)o.push(e[a].clone());return o}function QM(e){return e.getRenderTarget()===null&&e.outputEncoding===at?wo:wp}var Xs={clone:ju,merge:bn},_k=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ek=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,lt=class extends Sc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_k,this.fragmentShader=Ek,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ju(e.uniforms),this.uniformsGroups=Ak(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let o=super.toJSON(e);o.glslVersion=this.glslVersion,o.uniforms={};for(let c in this.uniforms){let d=this.uniforms[c].value;d&&d.isTexture?o.uniforms[c]={type:"t",value:d.toJSON(e).uuid}:d&&d.isColor?o.uniforms[c]={type:"c",value:d.getHex()}:d&&d.isVector2?o.uniforms[c]={type:"v2",value:d.toArray()}:d&&d.isVector3?o.uniforms[c]={type:"v3",value:d.toArray()}:d&&d.isVector4?o.uniforms[c]={type:"v4",value:d.toArray()}:d&&d.isMatrix3?o.uniforms[c]={type:"m3",value:d.toArray()}:d&&d.isMatrix4?o.uniforms[c]={type:"m4",value:d.toArray()}:o.uniforms[c]={value:d}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;let a={};for(let c in this.extensions)this.extensions[c]===!0&&(a[c]=!0);return Object.keys(a).length>0&&(o.extensions=a),o}},rs=class extends _t{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ce$1,this.projectionMatrix=new ce$1,this.projectionMatrixInverse=new ce$1}copy(e,o){return super.copy(e,o),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let o=this.matrixWorld.elements;return e.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,o){super.updateWorldMatrix(e,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ri=class extends rs{constructor(e=50,o=1,a=.1,c=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=a,this.far=c,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let o=.5*this.getFilmHeight()/e;this.fov=Ap*2*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(yp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ap*2*Math.atan(Math.tan(yp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,o,a,c,d,g){this.aspect=e/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=a,this.view.offsetY=c,this.view.width=d,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,o=e*Math.tan(yp*.5*this.fov)/this.zoom,a=2*o,c=this.aspect*a,d=-.5*c,g=this.view;if(this.view!==null&&this.view.enabled){let j=g.fullWidth,$=g.fullHeight;d+=g.offsetX*c/j,o-=g.offsetY*a/$,c*=g.width/j,a*=g.height/$}let b=this.filmOffset;b!==0&&(d+=e*b/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+c,o,o-a,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let o=super.toJSON(e);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,this.view!==null&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}},Ru=-90,Lu=1,XS=class extends _t{constructor(e,o,a){super(),this.type="CubeCamera",this.renderTarget=a;let c=new ri(Ru,Lu,e,o);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(1,0,0),this.add(c);let d=new ri(Ru,Lu,e,o);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(-1,0,0),this.add(d);let g=new ri(Ru,Lu,e,o);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),this.add(g);let b=new ri(Ru,Lu,e,o);b.layers=this.layers,b.up.set(0,0,1),b.lookAt(0,-1,0),this.add(b);let j=new ri(Ru,Lu,e,o);j.layers=this.layers,j.up.set(0,1,0),j.lookAt(0,0,1),this.add(j);let $=new ri(Ru,Lu,e,o);$.layers=this.layers,$.up.set(0,1,0),$.lookAt(0,0,-1),this.add($)}update(e,o){this.parent===null&&this.updateMatrixWorld();let a=this.renderTarget,[c,d,g,b,j,$]=this.children,_e=e.getRenderTarget(),st=e.toneMapping,rt=e.xr.enabled;e.toneMapping=Hs,e.xr.enabled=!1;let ut=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,e.setRenderTarget(a,0),e.render(o,c),e.setRenderTarget(a,1),e.render(o,d),e.setRenderTarget(a,2),e.render(o,g),e.setRenderTarget(a,3),e.render(o,b),e.setRenderTarget(a,4),e.render(o,j),a.texture.generateMipmaps=ut,e.setRenderTarget(a,5),e.render(o,$),e.setRenderTarget(_e),e.toneMapping=st,e.xr.enabled=rt,a.texture.needsPMREMUpdate=!0}},Hu=class extends tr{constructor(e,o,a,c,d,g,b,j,$,_e){e=e!==void 0?e:[],o=o!==void 0?o:al,super(e,o,a,c,d,g,b,j,$,_e),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},QS=class extends ft{constructor(e=1,o={}){super(e,e,o),this.isWebGLCubeRenderTarget=!0;let a={width:e,height:e,depth:1},c=[a,a,a,a,a,a];this.texture=new Hu(c,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:tt}fromEquirectangularTexture(e,o){this.texture.type=o.type,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;let a={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},c=new vi(5,5,5),d=new lt({name:"CubemapFromEquirect",uniforms:ju(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:yi,blending:er});d.uniforms.tEquirect.value=o;let g=new sr(c,d),b=o.minFilter;return o.minFilter===bc&&(o.minFilter=tt),new XS(1,10,this).update(e,g),o.minFilter=b,g.geometry.dispose(),g.material.dispose(),this}clear(e,o,a,c){let d=e.getRenderTarget();for(let g=0;g<6;g++)e.setRenderTarget(this,g),e.clear(o,a,c);e.setRenderTarget(d)}},OS=new _,Tk=new _,Mk=new nr,ii=class{constructor(e=new _(1,0,0),o=0){this.isPlane=!0,this.normal=e,this.constant=o}set(e,o){return this.normal.copy(e),this.constant=o,this}setComponents(e,o,a,c){return this.normal.set(e,o,a),this.constant=c,this}setFromNormalAndCoplanarPoint(e,o){return this.normal.copy(e),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(e,o,a){let c=OS.subVectors(a,o).cross(Tk.subVectors(e,o)).normalize();return this.setFromNormalAndCoplanarPoint(c,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,o){return o.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,o){let a=e.delta(OS),c=this.normal.dot(a);if(c===0)return this.distanceToPoint(e.start)===0?o.copy(e.start):null;let d=-(e.start.dot(this.normal)+this.constant)/c;return d<0||d>1?null:o.copy(a).multiplyScalar(d).add(e.start)}intersectsLine(e){let o=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return o<0&&a>0||a<0&&o>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,o){let a=o||Mk.getNormalMatrix(e),c=this.coplanarPoint(OS).applyMatrix4(e),d=this.normal.applyMatrix3(a).normalize();return this.constant=-c.dot(d),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Bu=new Br,ey=new _,Tp=class{constructor(e=new ii,o=new ii,a=new ii,c=new ii,d=new ii,g=new ii){this.planes=[e,o,a,c,d,g]}set(e,o,a,c,d,g){let b=this.planes;return b[0].copy(e),b[1].copy(o),b[2].copy(a),b[3].copy(c),b[4].copy(d),b[5].copy(g),this}copy(e){let o=this.planes;for(let a=0;a<6;a++)o[a].copy(e.planes[a]);return this}setFromProjectionMatrix(e){let o=this.planes,a=e.elements,c=a[0],d=a[1],g=a[2],b=a[3],j=a[4],$=a[5],_e=a[6],st=a[7],rt=a[8],ut=a[9],gt=a[10],yt=a[11],wt=a[12],Ct=a[13],Pt=a[14],At=a[15];return o[0].setComponents(b-c,st-j,yt-rt,At-wt).normalize(),o[1].setComponents(b+c,st+j,yt+rt,At+wt).normalize(),o[2].setComponents(b+d,st+$,yt+ut,At+Ct).normalize(),o[3].setComponents(b-d,st-$,yt-ut,At-Ct).normalize(),o[4].setComponents(b-g,st-_e,yt-gt,At-Pt).normalize(),o[5].setComponents(b+g,st+_e,yt+gt,At+Pt).normalize(),this}intersectsObject(e){let o=e.geometry;return o.boundingSphere===null&&o.computeBoundingSphere(),Bu.copy(o.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Bu)}intersectsSprite(e){return Bu.center.set(0,0,0),Bu.radius=.7071067811865476,Bu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bu)}intersectsSphere(e){let o=this.planes,a=e.center,c=-e.radius;for(let d=0;d<6;d++)if(o[d].distanceToPoint(a)<c)return!1;return!0}intersectsBox(e){let o=this.planes;for(let a=0;a<6;a++){let c=o[a];if(ey.x=c.normal.x>0?e.max.x:e.min.x,ey.y=c.normal.y>0?e.max.y:e.min.y,ey.z=c.normal.z>0?e.max.z:e.min.z,c.distanceToPoint(ey)<0)return!1}return!0}containsPoint(e){let o=this.planes;for(let a=0;a<6;a++)if(o[a].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function KM(){let e=null,o=!1,a=null,c=null;function d(g,b){a(g,b),c=e.requestAnimationFrame(d)}return{start:function(){o!==!0&&a!==null&&(c=e.requestAnimationFrame(d),o=!0)},stop:function(){e.cancelAnimationFrame(c),o=!1},setAnimationLoop:function(g){a=g},setContext:function(g){e=g}}}function Ck(e,o){let a=o.isWebGL2,c=new WeakMap;function d(_e,st){let rt=_e.array,ut=_e.usage,gt=e.createBuffer();e.bindBuffer(st,gt),e.bufferData(st,rt,ut),_e.onUploadCallback();let yt;if(rt instanceof Float32Array)yt=5126;else if(rt instanceof Uint16Array)if(_e.isFloat16BufferAttribute)if(a)yt=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else yt=5123;else if(rt instanceof Int16Array)yt=5122;else if(rt instanceof Uint32Array)yt=5125;else if(rt instanceof Int32Array)yt=5124;else if(rt instanceof Int8Array)yt=5120;else if(rt instanceof Uint8Array)yt=5121;else if(rt instanceof Uint8ClampedArray)yt=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+rt);return{buffer:gt,type:yt,bytesPerElement:rt.BYTES_PER_ELEMENT,version:_e.version}}function g(_e,st,rt){let ut=st.array,gt=st.updateRange;e.bindBuffer(rt,_e),gt.count===-1?e.bufferSubData(rt,0,ut):(a?e.bufferSubData(rt,gt.offset*ut.BYTES_PER_ELEMENT,ut,gt.offset,gt.count):e.bufferSubData(rt,gt.offset*ut.BYTES_PER_ELEMENT,ut.subarray(gt.offset,gt.offset+gt.count)),gt.count=-1),st.onUploadCallback()}function b(_e){return _e.isInterleavedBufferAttribute&&(_e=_e.data),c.get(_e)}function j(_e){_e.isInterleavedBufferAttribute&&(_e=_e.data);let st=c.get(_e);st&&(e.deleteBuffer(st.buffer),c.delete(_e))}function $(_e,st){if(_e.isGLBufferAttribute){let ut=c.get(_e);(!ut||ut.version<_e.version)&&c.set(_e,{buffer:_e.buffer,type:_e.type,bytesPerElement:_e.elementSize,version:_e.version});return}_e.isInterleavedBufferAttribute&&(_e=_e.data);let rt=c.get(_e);rt===void 0?c.set(_e,d(_e,st)):rt.version<_e.version&&(g(rt.buffer,_e,st),rt.version=_e.version)}return{get:b,remove:j,update:$}}var wn=class extends Pe{constructor(e=1,o=1,a=1,c=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:o,widthSegments:a,heightSegments:c};let d=e/2,g=o/2,b=Math.floor(a),j=Math.floor(c),$=b+1,_e=j+1,st=e/b,rt=o/j,ut=[],gt=[],yt=[],wt=[];for(let Ct=0;Ct<_e;Ct++){let Pt=Ct*rt-g;for(let At=0;At<$;At++){let Tt=At*st-d;gt.push(Tt,-Pt,0),yt.push(0,0,1),wt.push(At/b),wt.push(1-Ct/j)}}for(let Ct=0;Ct<j;Ct++)for(let Pt=0;Pt<b;Pt++){let At=Pt+$*Ct,Tt=Pt+$*(Ct+1),kt=Pt+1+$*(Ct+1),It=Pt+1+$*Ct;ut.push(At,Tt,It),ut.push(Tt,kt,It)}this.setIndex(ut),this.setAttribute("position",new Te(gt,3)),this.setAttribute("normal",new Te(yt,3)),this.setAttribute("uv",new Te(wt,2))}static fromJSON(e){return new wn(e.width,e.height,e.widthSegments,e.heightSegments)}},Pk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Dk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ok=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Ik=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Lk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Bk="vec3 transformed = vec3( position );",Nk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fk=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Uk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Gk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Hk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Yk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Xk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Qk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Kk=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Zk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Jk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,$k=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tV="gl_FragColor = linearToOutputTexel( gl_FragColor );",rV=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,iV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,aV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,hV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,pV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vV=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,xV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,SV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,AV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,_V=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,EV=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,MV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,CV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,PV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,OV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,IV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,FV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kV=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zV=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,UV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,GV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,jV=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,YV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,XV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,QV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,KV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ZV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$V=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,ez=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,rz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,sz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oz=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,az=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,hz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,dz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,yz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,xz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,bz=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Sz=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,wz=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Az=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,_z=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Ez=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Tz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Mz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Pz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Oz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Iz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Rz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Lz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Bz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Nz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Vz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uz=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Gz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Xz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Qz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Jz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$z=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,rU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iU=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nU=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bt={alphamap_fragment:Pk,alphamap_pars_fragment:Dk,alphatest_fragment:Ok,alphatest_pars_fragment:Ik,aomap_fragment:Rk,aomap_pars_fragment:Lk,begin_vertex:Bk,beginnormal_vertex:Nk,bsdfs:Fk,iridescence_fragment:kk,bumpmap_pars_fragment:Vk,clipping_planes_fragment:zk,clipping_planes_pars_fragment:Uk,clipping_planes_pars_vertex:Gk,clipping_planes_vertex:jk,color_fragment:Hk,color_pars_fragment:Wk,color_pars_vertex:qk,color_vertex:Yk,common:Xk,cube_uv_reflection_fragment:Qk,defaultnormal_vertex:Kk,displacementmap_pars_vertex:Zk,displacementmap_vertex:Jk,emissivemap_fragment:$k,emissivemap_pars_fragment:eV,encodings_fragment:tV,encodings_pars_fragment:rV,envmap_fragment:iV,envmap_common_pars_fragment:nV,envmap_pars_fragment:sV,envmap_pars_vertex:oV,envmap_physical_pars_fragment:vV,envmap_vertex:aV,fog_vertex:lV,fog_pars_vertex:cV,fog_fragment:uV,fog_pars_fragment:hV,gradientmap_pars_fragment:dV,lightmap_fragment:fV,lightmap_pars_fragment:pV,lights_lambert_fragment:mV,lights_lambert_pars_fragment:gV,lights_pars_begin:yV,lights_toon_fragment:xV,lights_toon_pars_fragment:bV,lights_phong_fragment:SV,lights_phong_pars_fragment:wV,lights_physical_fragment:AV,lights_physical_pars_fragment:_V,lights_fragment_begin:EV,lights_fragment_maps:TV,lights_fragment_end:MV,logdepthbuf_fragment:CV,logdepthbuf_pars_fragment:PV,logdepthbuf_pars_vertex:DV,logdepthbuf_vertex:OV,map_fragment:IV,map_pars_fragment:RV,map_particle_fragment:LV,map_particle_pars_fragment:BV,metalnessmap_fragment:NV,metalnessmap_pars_fragment:FV,morphcolor_vertex:kV,morphnormal_vertex:VV,morphtarget_pars_vertex:zV,morphtarget_vertex:UV,normal_fragment_begin:GV,normal_fragment_maps:jV,normal_pars_fragment:HV,normal_pars_vertex:WV,normal_vertex:qV,normalmap_pars_fragment:YV,clearcoat_normal_fragment_begin:XV,clearcoat_normal_fragment_maps:QV,clearcoat_pars_fragment:KV,iridescence_pars_fragment:ZV,output_fragment:JV,packing:$V,premultiplied_alpha_fragment:ez,project_vertex:tz,dithering_fragment:rz,dithering_pars_fragment:iz,roughnessmap_fragment:nz,roughnessmap_pars_fragment:sz,shadowmap_pars_fragment:oz,shadowmap_pars_vertex:az,shadowmap_vertex:lz,shadowmask_pars_fragment:cz,skinbase_vertex:uz,skinning_pars_vertex:hz,skinning_vertex:dz,skinnormal_vertex:fz,specularmap_fragment:pz,specularmap_pars_fragment:mz,tonemapping_fragment:gz,tonemapping_pars_fragment:yz,transmission_fragment:vz,transmission_pars_fragment:xz,uv_pars_fragment:bz,uv_pars_vertex:Sz,uv_vertex:wz,uv2_pars_fragment:Az,uv2_pars_vertex:_z,uv2_vertex:Ez,worldpos_vertex:Tz,background_vert:Mz,background_frag:Cz,backgroundCube_vert:Pz,backgroundCube_frag:Dz,cube_vert:Oz,cube_frag:Iz,depth_vert:Rz,depth_frag:Lz,distanceRGBA_vert:Bz,distanceRGBA_frag:Nz,equirect_vert:Fz,equirect_frag:kz,linedashed_vert:Vz,linedashed_frag:zz,meshbasic_vert:Uz,meshbasic_frag:Gz,meshlambert_vert:jz,meshlambert_frag:Hz,meshmatcap_vert:Wz,meshmatcap_frag:qz,meshnormal_vert:Yz,meshnormal_frag:Xz,meshphong_vert:Qz,meshphong_frag:Kz,meshphysical_vert:Zz,meshphysical_frag:Jz,meshtoon_vert:$z,meshtoon_frag:eU,points_vert:tU,points_frag:rU,shadow_vert:iU,shadow_frag:nU,sprite_vert:sU,sprite_frag:oU},De$1={common:{diffuse:{value:new We(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new nr},uv2Transform:{value:new nr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new z$2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new We(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new We(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nr}},sprite:{diffuse:{value:new We(16777215)},opacity:{value:1},center:{value:new z$2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nr}}},Ao={basic:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:bn([De$1.common,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.roughnessmap,De$1.metalnessmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:bn([De$1.common,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.gradientmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:bn([De$1.common,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:bn([De$1.points,De$1.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:bn([De$1.common,De$1.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:bn([De$1.common,De$1.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:bn([De$1.common,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:bn([De$1.sprite,De$1.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new nr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:bn([De$1.common,De$1.displacementmap,{referencePosition:{value:new _},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:bn([De$1.lights,De$1.fog,{color:{value:new We(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};Ao.physical={uniforms:bn([Ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new z$2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new We(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new z$2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new We(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new We(1,1,1)},specularColorMap:{value:null}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};var ty={r:0,b:0,g:0};function aU(e,o,a,c,d,g,b){let j=new We(0),$=g===!0?0:1,_e,st,rt=null,ut=0,gt=null;function yt(Ct,Pt){let At=!1,Tt=Pt.isScene===!0?Pt.background:null;Tt&&Tt.isTexture&&(Tt=(Pt.backgroundBlurriness>0?a:o).get(Tt));let kt=e.xr,It=kt.getSession&&kt.getSession();It&&It.environmentBlendMode==="additive"&&(Tt=null),Tt===null?wt(j,$):Tt&&Tt.isColor&&(wt(Tt,1),At=!0),(e.autoClear||At)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),Tt&&(Tt.isCubeTexture||Tt.mapping===ch)?(st===void 0&&(st=new sr(new vi(1,1,1),new lt({name:"BackgroundCubeMaterial",uniforms:ju(Ao.backgroundCube.uniforms),vertexShader:Ao.backgroundCube.vertexShader,fragmentShader:Ao.backgroundCube.fragmentShader,side:yi,depthTest:!1,depthWrite:!1,fog:!1})),st.geometry.deleteAttribute("normal"),st.geometry.deleteAttribute("uv"),st.onBeforeRender=function(Lt,Ft,Nt){this.matrixWorld.copyPosition(Nt.matrixWorld)},Object.defineProperty(st.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),d.update(st)),st.material.uniforms.envMap.value=Tt,st.material.uniforms.flipEnvMap.value=Tt.isCubeTexture&&Tt.isRenderTargetTexture===!1?-1:1,st.material.uniforms.backgroundBlurriness.value=Pt.backgroundBlurriness,st.material.uniforms.backgroundIntensity.value=Pt.backgroundIntensity,st.material.toneMapped=Tt.encoding!==at,(rt!==Tt||ut!==Tt.version||gt!==e.toneMapping)&&(st.material.needsUpdate=!0,rt=Tt,ut=Tt.version,gt=e.toneMapping),st.layers.enableAll(),Ct.unshift(st,st.geometry,st.material,0,0,null)):Tt&&Tt.isTexture&&(_e===void 0&&(_e=new sr(new wn(2,2),new lt({name:"BackgroundMaterial",uniforms:ju(Ao.background.uniforms),vertexShader:Ao.background.vertexShader,fragmentShader:Ao.background.fragmentShader,side:es,depthTest:!1,depthWrite:!1,fog:!1})),_e.geometry.deleteAttribute("normal"),Object.defineProperty(_e.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(_e)),_e.material.uniforms.t2D.value=Tt,_e.material.uniforms.backgroundIntensity.value=Pt.backgroundIntensity,_e.material.toneMapped=Tt.encoding!==at,Tt.matrixAutoUpdate===!0&&Tt.updateMatrix(),_e.material.uniforms.uvTransform.value.copy(Tt.matrix),(rt!==Tt||ut!==Tt.version||gt!==e.toneMapping)&&(_e.material.needsUpdate=!0,rt=Tt,ut=Tt.version,gt=e.toneMapping),_e.layers.enableAll(),Ct.unshift(_e,_e.geometry,_e.material,0,0,null))}function wt(Ct,Pt){Ct.getRGB(ty,QM(e)),c.buffers.color.setClear(ty.r,ty.g,ty.b,Pt,b)}return{getClearColor:function(){return j},setClearColor:function(Ct,Pt=1){j.set(Ct),$=Pt,wt(j,$)},getClearAlpha:function(){return $},setClearAlpha:function(Ct){$=Ct,wt(j,$)},render:yt}}function lU(e,o,a,c){let d=e.getParameter(34921),g=c.isWebGL2?null:o.get("OES_vertex_array_object"),b=c.isWebGL2||g!==null,j={},$=Ct(null),_e=$,st=!1;function rt(un,bo,_s,gn,Gr){let ds=!1;if(b){let Zn=wt(gn,_s,bo);_e!==Zn&&(_e=Zn,gt(_e.object)),ds=Pt(un,gn,_s,Gr),ds&&At(un,gn,_s,Gr)}else{let Zn=bo.wireframe===!0;(_e.geometry!==gn.id||_e.program!==_s.id||_e.wireframe!==Zn)&&(_e.geometry=gn.id,_e.program=_s.id,_e.wireframe=Zn,ds=!0)}Gr!==null&&a.update(Gr,34963),(ds||st)&&(st=!1,Nt(un,bo,_s,gn),Gr!==null&&e.bindBuffer(34963,a.get(Gr).buffer))}function ut(){return c.isWebGL2?e.createVertexArray():g.createVertexArrayOES()}function gt(un){return c.isWebGL2?e.bindVertexArray(un):g.bindVertexArrayOES(un)}function yt(un){return c.isWebGL2?e.deleteVertexArray(un):g.deleteVertexArrayOES(un)}function wt(un,bo,_s){let gn=_s.wireframe===!0,Gr=j[un.id];Gr===void 0&&(Gr={},j[un.id]=Gr);let ds=Gr[bo.id];ds===void 0&&(ds={},Gr[bo.id]=ds);let Zn=ds[gn];return Zn===void 0&&(Zn=Ct(ut()),ds[gn]=Zn),Zn}function Ct(un){let bo=[],_s=[],gn=[];for(let Gr=0;Gr<d;Gr++)bo[Gr]=0,_s[Gr]=0,gn[Gr]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:bo,enabledAttributes:_s,attributeDivisors:gn,object:un,attributes:{},index:null}}function Pt(un,bo,_s,gn){let Gr=_e.attributes,ds=bo.attributes,Zn=0,Nn=_s.getAttributes();for(let Qn in Nn)if(Nn[Qn].location>=0){let bu=Gr[Qn],ou=ds[Qn];if(ou===void 0&&(Qn==="instanceMatrix"&&un.instanceMatrix&&(ou=un.instanceMatrix),Qn==="instanceColor"&&un.instanceColor&&(ou=un.instanceColor)),bu===void 0||bu.attribute!==ou||ou&&bu.data!==ou.data)return!0;Zn++}return _e.attributesNum!==Zn||_e.index!==gn}function At(un,bo,_s,gn){let Gr={},ds=bo.attributes,Zn=0,Nn=_s.getAttributes();for(let Qn in Nn)if(Nn[Qn].location>=0){let bu=ds[Qn];bu===void 0&&(Qn==="instanceMatrix"&&un.instanceMatrix&&(bu=un.instanceMatrix),Qn==="instanceColor"&&un.instanceColor&&(bu=un.instanceColor));let ou={};ou.attribute=bu,bu&&bu.data&&(ou.data=bu.data),Gr[Qn]=ou,Zn++}_e.attributes=Gr,_e.attributesNum=Zn,_e.index=gn}function Tt(){let un=_e.newAttributes;for(let bo=0,_s=un.length;bo<_s;bo++)un[bo]=0}function kt(un){It(un,0)}function It(un,bo){let _s=_e.newAttributes,gn=_e.enabledAttributes,Gr=_e.attributeDivisors;_s[un]=1,gn[un]===0&&(e.enableVertexAttribArray(un),gn[un]=1),Gr[un]!==bo&&((c.isWebGL2?e:o.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](un,bo),Gr[un]=bo)}function Lt(){let un=_e.newAttributes,bo=_e.enabledAttributes;for(let _s=0,gn=bo.length;_s<gn;_s++)bo[_s]!==un[_s]&&(e.disableVertexAttribArray(_s),bo[_s]=0)}function Ft(un,bo,_s,gn,Gr,ds){c.isWebGL2===!0&&(_s===5124||_s===5125)?e.vertexAttribIPointer(un,bo,_s,Gr,ds):e.vertexAttribPointer(un,bo,_s,gn,Gr,ds)}function Nt(un,bo,_s,gn){if(c.isWebGL2===!1&&(un.isInstancedMesh||gn.isInstancedBufferGeometry)&&o.get("ANGLE_instanced_arrays")===null)return;Tt();let Gr=gn.attributes,ds=_s.getAttributes(),Zn=bo.defaultAttributeValues;for(let Nn in ds){let Qn=ds[Nn];if(Qn.location>=0){let bu=Gr[Nn];if(bu===void 0&&(Nn==="instanceMatrix"&&un.instanceMatrix&&(bu=un.instanceMatrix),Nn==="instanceColor"&&un.instanceColor&&(bu=un.instanceColor)),bu!==void 0){let ou=bu.normalized,g0=bu.itemSize,Su=a.get(bu);if(Su===void 0)continue;let l1=Su.buffer,B0=Su.type,a1=Su.bytesPerElement;if(bu.isInterleavedBufferAttribute){let q1=bu.data,ox=q1.stride,U_=bu.offset;if(q1.isInstancedInterleavedBuffer){for(let tS=0;tS<Qn.locationSize;tS++)It(Qn.location+tS,q1.meshPerAttribute);un.isInstancedMesh!==!0&&gn._maxInstanceCount===void 0&&(gn._maxInstanceCount=q1.meshPerAttribute*q1.count)}else for(let tS=0;tS<Qn.locationSize;tS++)kt(Qn.location+tS);e.bindBuffer(34962,l1);for(let tS=0;tS<Qn.locationSize;tS++)Ft(Qn.location+tS,g0/Qn.locationSize,B0,ou,ox*a1,(U_+g0/Qn.locationSize*tS)*a1)}else{if(bu.isInstancedBufferAttribute){for(let q1=0;q1<Qn.locationSize;q1++)It(Qn.location+q1,bu.meshPerAttribute);un.isInstancedMesh!==!0&&gn._maxInstanceCount===void 0&&(gn._maxInstanceCount=bu.meshPerAttribute*bu.count)}else for(let q1=0;q1<Qn.locationSize;q1++)kt(Qn.location+q1);e.bindBuffer(34962,l1);for(let q1=0;q1<Qn.locationSize;q1++)Ft(Qn.location+q1,g0/Qn.locationSize,B0,ou,g0*a1,g0/Qn.locationSize*q1*a1)}}else if(Zn!==void 0){let ou=Zn[Nn];if(ou!==void 0)switch(ou.length){case 2:e.vertexAttrib2fv(Qn.location,ou);break;case 3:e.vertexAttrib3fv(Qn.location,ou);break;case 4:e.vertexAttrib4fv(Qn.location,ou);break;default:e.vertexAttrib1fv(Qn.location,ou)}}}}Lt()}function Ht(){us();for(let un in j){let bo=j[un];for(let _s in bo){let gn=bo[_s];for(let Gr in gn)yt(gn[Gr].object),delete gn[Gr];delete bo[_s]}delete j[un]}}function dr(un){if(j[un.id]===void 0)return;let bo=j[un.id];for(let _s in bo){let gn=bo[_s];for(let Gr in gn)yt(gn[Gr].object),delete gn[Gr];delete bo[_s]}delete j[un.id]}function hs(un){for(let bo in j){let _s=j[bo];if(_s[un.id]===void 0)continue;let gn=_s[un.id];for(let Gr in gn)yt(gn[Gr].object),delete gn[Gr];delete _s[un.id]}}function us(){hn(),st=!0,_e!==$&&(_e=$,gt(_e.object))}function hn(){$.geometry=null,$.program=null,$.wireframe=!1}return{setup:rt,reset:us,resetDefaultState:hn,dispose:Ht,releaseStatesOfGeometry:dr,releaseStatesOfProgram:hs,initAttributes:Tt,enableAttribute:kt,disableUnusedAttributes:Lt}}function cU(e,o,a,c){let d=c.isWebGL2,g;function b(_e){g=_e}function j(_e,st){e.drawArrays(g,_e,st),a.update(st,g,1)}function $(_e,st,rt){if(rt===0)return;let ut,gt;if(d)ut=e,gt="drawArraysInstanced";else if(ut=o.get("ANGLE_instanced_arrays"),gt="drawArraysInstancedANGLE",ut===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ut[gt](g,_e,st,rt),a.update(st,g,rt)}this.setMode=b,this.render=j,this.renderInstances=$}function uU(e,o,a){let c;function d(){if(c!==void 0)return c;if(o.has("EXT_texture_filter_anisotropic")===!0){let Ft=o.get("EXT_texture_filter_anisotropic");c=e.getParameter(Ft.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c}function g(Ft){if(Ft==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Ft="mediump"}return Ft==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let b=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,j=a.precision!==void 0?a.precision:"highp",$=g(j);$!==j&&(console.warn("THREE.WebGLRenderer:",j,"not supported, using",$,"instead."),j=$);let _e=b||o.has("WEBGL_draw_buffers"),st=a.logarithmicDepthBuffer===!0,rt=e.getParameter(34930),ut=e.getParameter(35660),gt=e.getParameter(3379),yt=e.getParameter(34076),wt=e.getParameter(34921),Ct=e.getParameter(36347),Pt=e.getParameter(36348),At=e.getParameter(36349),Tt=ut>0,kt=b||o.has("OES_texture_float"),It=Tt&&kt,Lt=b?e.getParameter(36183):0;return{isWebGL2:b,drawBuffers:_e,getMaxAnisotropy:d,getMaxPrecision:g,precision:j,logarithmicDepthBuffer:st,maxTextures:rt,maxVertexTextures:ut,maxTextureSize:gt,maxCubemapSize:yt,maxAttributes:wt,maxVertexUniforms:Ct,maxVaryings:Pt,maxFragmentUniforms:At,vertexTextures:Tt,floatFragmentTextures:kt,floatVertexTextures:It,maxSamples:Lt}}function hU(e){let o=this,a=null,c=0,d=!1,g=!1,b=new ii,j=new nr,$={value:null,needsUpdate:!1};this.uniform=$,this.numPlanes=0,this.numIntersection=0,this.init=function(rt,ut){let gt=rt.length!==0||ut||c!==0||d;return d=ut,c=rt.length,gt},this.beginShadows=function(){g=!0,st(null)},this.endShadows=function(){g=!1},this.setGlobalState=function(rt,ut){a=st(rt,ut,0)},this.setState=function(rt,ut,gt){let yt=rt.clippingPlanes,wt=rt.clipIntersection,Ct=rt.clipShadows,Pt=e.get(rt);if(!d||yt===null||yt.length===0||g&&!Ct)g?st(null):_e();else{let At=g?0:c,Tt=At*4,kt=Pt.clippingState||null;$.value=kt,kt=st(yt,ut,Tt,gt);for(let It=0;It!==Tt;++It)kt[It]=a[It];Pt.clippingState=kt,this.numIntersection=wt?this.numPlanes:0,this.numPlanes+=At}};function _e(){$.value!==a&&($.value=a,$.needsUpdate=c>0),o.numPlanes=c,o.numIntersection=0}function st(rt,ut,gt,yt){let wt=rt!==null?rt.length:0,Ct=null;if(wt!==0){if(Ct=$.value,yt!==!0||Ct===null){let Pt=gt+wt*4,At=ut.matrixWorldInverse;j.getNormalMatrix(At),(Ct===null||Ct.length<Pt)&&(Ct=new Float32Array(Pt));for(let Tt=0,kt=gt;Tt!==wt;++Tt,kt+=4)b.copy(rt[Tt]).applyMatrix4(At,j),b.normal.toArray(Ct,kt),Ct[kt+3]=b.constant}$.value=Ct,$.needsUpdate=!0}return o.numPlanes=wt,o.numIntersection=0,Ct}}function dU(e){let o=new WeakMap;function a(b,j){return j===GS?b.mapping=al:j===jS&&(b.mapping=ll),b}function c(b){if(b&&b.isTexture&&b.isRenderTargetTexture===!1){let j=b.mapping;if(j===GS||j===jS)if(o.has(b)){let $=o.get(b).texture;return a($,b.mapping)}else{let $=b.image;if($&&$.height>0){let _e=new QS($.height/2);return _e.fromEquirectangularTexture(e,b),o.set(b,_e),b.addEventListener("dispose",d),a(_e.texture,b.mapping)}else return null}}return b}function d(b){let j=b.target;j.removeEventListener("dispose",d);let $=o.get(j);$!==void 0&&(o.delete(j),$.dispose())}function g(){o=new WeakMap}return{get:c,dispose:g}}var Wu=class extends rs{constructor(e=-1,o=1,a=1,c=-1,d=.1,g=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=o,this.top=a,this.bottom=c,this.near=d,this.far=g,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,o,a,c,d,g){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=a,this.view.offsetY=c,this.view.width=d,this.view.height=g,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,c=(this.top+this.bottom)/2,d=a-e,g=a+e,b=c+o,j=c-o;if(this.view!==null&&this.view.enabled){let $=(this.right-this.left)/this.view.fullWidth/this.zoom,_e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=$*this.view.offsetX,g=d+$*this.view.width,b-=_e*this.view.offsetY,j=b-_e*this.view.height}this.projectionMatrix.makeOrthographic(d,g,b,j,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let o=super.toJSON(e);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,this.view!==null&&(o.object.view=Object.assign({},this.view)),o}},zu=4,KT=[.125,.215,.35,.446,.526,.582],yc=20,IS=new Wu,ZT=new We,RS=null,gc=(1+Math.sqrt(5))/2,Nu=1/gc,JT=[new _(1,1,1),new _(-1,1,1),new _(1,1,-1),new _(-1,1,-1),new _(0,gc,Nu),new _(0,gc,-Nu),new _(Nu,0,gc),new _(-Nu,0,gc),new _(gc,Nu,0),new _(-gc,Nu,0)],Ay=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,o=0,a=.1,c=100){RS=this._renderer.getRenderTarget(),this._setSize(256);let d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,a,c,d),o>0&&this._blur(d,0,0,o),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,o=null){return this._fromTexture(e,o)}fromCubemap(e,o=null){return this._fromTexture(e,o)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(RS),e.scissorTest=!1,ry(e,0,0,e.width,e.height)}_fromTexture(e,o){e.mapping===al||e.mapping===ll?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),RS=this._renderer.getRenderTarget();let a=o||this._allocateTargets();return this._textureToCubeUV(e,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,a={magFilter:tt,minFilter:tt,generateMipmaps:!1,type:va,format:Qr,encoding:Sn,depthBuffer:!1},c=$T(e,o,a);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==o){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$T(e,o,a);let{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=fU(d)),this._blurMaterial=pU(d,e,o)}return c}_compileMaterial(e){let o=new sr(this._lodPlanes[0],e);this._renderer.compile(o,IS)}_sceneToCubeUV(e,o,a,c){let d=new ri(90,1,o,a),g=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],j=this._renderer,$=j.autoClear,_e=j.toneMapping;j.getClearColor(ZT),j.toneMapping=Hs,j.autoClear=!1;let st=new ts({name:"PMREM.Background",side:yi,depthWrite:!1,depthTest:!1}),rt=new sr(new vi,st),ut=!1,gt=e.background;gt?gt.isColor&&(st.color.copy(gt),e.background=null,ut=!0):(st.color.copy(ZT),ut=!0);for(let yt=0;yt<6;yt++){let wt=yt%3;wt===0?(d.up.set(0,g[yt],0),d.lookAt(b[yt],0,0)):wt===1?(d.up.set(0,0,g[yt]),d.lookAt(0,b[yt],0)):(d.up.set(0,g[yt],0),d.lookAt(0,0,b[yt]));let Ct=this._cubeSize;ry(c,wt*Ct,yt>2?Ct:0,Ct,Ct),j.setRenderTarget(c),ut&&j.render(rt,d),j.render(e,d)}rt.geometry.dispose(),rt.material.dispose(),j.toneMapping=_e,j.autoClear=$,e.background=gt}_textureToCubeUV(e,o){let a=this._renderer,c=e.mapping===al||e.mapping===ll;c?(this._cubemapMaterial===null&&(this._cubemapMaterial=tM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eM());let d=c?this._cubemapMaterial:this._equirectMaterial,g=new sr(this._lodPlanes[0],d),b=d.uniforms;b.envMap.value=e;let j=this._cubeSize;ry(o,0,0,3*j,2*j),a.setRenderTarget(o),a.render(g,IS)}_applyPMREM(e){let o=this._renderer,a=o.autoClear;o.autoClear=!1;for(let c=1;c<this._lodPlanes.length;c++){let d=Math.sqrt(this._sigmas[c]*this._sigmas[c]-this._sigmas[c-1]*this._sigmas[c-1]),g=JT[(c-1)%JT.length];this._blur(e,c-1,c,d,g)}o.autoClear=a}_blur(e,o,a,c,d){let g=this._pingPongRenderTarget;this._halfBlur(e,g,o,a,c,"latitudinal",d),this._halfBlur(g,e,a,a,c,"longitudinal",d)}_halfBlur(e,o,a,c,d,g,b){let j=this._renderer,$=this._blurMaterial;g!=="latitudinal"&&g!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let _e=3,st=new sr(this._lodPlanes[c],$),rt=$.uniforms,ut=this._sizeLods[a]-1,gt=isFinite(d)?Math.PI/(2*ut):2*Math.PI/(2*yc-1),yt=d/gt,wt=isFinite(d)?1+Math.floor(_e*yt):yc;wt>yc&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${wt} samples when the maximum is set to ${yc}`);let Ct=[],Pt=0;for(let Lt=0;Lt<yc;++Lt){let Ft=Lt/yt,Nt=Math.exp(-Ft*Ft/2);Ct.push(Nt),Lt===0?Pt+=Nt:Lt<wt&&(Pt+=2*Nt)}for(let Lt=0;Lt<Ct.length;Lt++)Ct[Lt]=Ct[Lt]/Pt;rt.envMap.value=e.texture,rt.samples.value=wt,rt.weights.value=Ct,rt.latitudinal.value=g==="latitudinal",b&&(rt.poleAxis.value=b);let{_lodMax:At}=this;rt.dTheta.value=gt,rt.mipInt.value=At-a;let Tt=this._sizeLods[c],kt=3*Tt*(c>At-zu?c-At+zu:0),It=4*(this._cubeSize-Tt);ry(o,kt,It,3*Tt,2*Tt),j.setRenderTarget(o),j.render(st,IS)}};function fU(e){let o=[],a=[],c=[],d=e,g=e-zu+1+KT.length;for(let b=0;b<g;b++){let j=Math.pow(2,d);a.push(j);let $=1/j;b>e-zu?$=KT[b-e+zu-1]:b===0&&($=0),c.push($);let _e=1/(j-2),st=-_e,rt=1+_e,ut=[st,st,rt,st,rt,rt,st,st,rt,rt,st,rt],gt=6,yt=6,wt=3,Ct=2,Pt=1,At=new Float32Array(wt*yt*gt),Tt=new Float32Array(Ct*yt*gt),kt=new Float32Array(Pt*yt*gt);for(let Lt=0;Lt<gt;Lt++){let Ft=Lt%3*2/3-1,Nt=Lt>2?0:-1,Ht=[Ft,Nt,0,Ft+2/3,Nt,0,Ft+2/3,Nt+1,0,Ft,Nt,0,Ft+2/3,Nt+1,0,Ft,Nt+1,0];At.set(Ht,wt*yt*Lt),Tt.set(ut,Ct*yt*Lt);let dr=[Lt,Lt,Lt,Lt,Lt,Lt];kt.set(dr,Pt*yt*Lt)}let It=new Pe;It.setAttribute("position",new Xe(At,wt)),It.setAttribute("uv",new Xe(Tt,Ct)),It.setAttribute("faceIndex",new Xe(kt,Pt)),o.push(It),d>zu&&d--}return{lodPlanes:o,sizeLods:a,sigmas:c}}function $T(e,o,a){let c=new ft(e,o,a);return c.texture.mapping=ch,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function ry(e,o,a,c,d){e.viewport.set(o,a,c,d),e.scissor.set(o,a,c,d)}function pU(e,o,a){let c=new Float32Array(yc),d=new _(0,1,0);return new lt({name:"SphericalGaussianBlur",defines:{n:yc,CUBEUV_TEXEL_WIDTH:1/o,CUBEUV_TEXEL_HEIGHT:1/a,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:c},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function eM(){return new lt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function tM(){return new lt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function Pw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mU(e){let o=new WeakMap,a=null;function c(j){if(j&&j.isTexture){let $=j.mapping,_e=$===GS||$===jS,st=$===al||$===ll;if(_e||st)if(j.isRenderTargetTexture&&j.needsPMREMUpdate===!0){j.needsPMREMUpdate=!1;let rt=o.get(j);return a===null&&(a=new Ay(e)),rt=_e?a.fromEquirectangular(j,rt):a.fromCubemap(j,rt),o.set(j,rt),rt.texture}else{if(o.has(j))return o.get(j).texture;{let rt=j.image;if(_e&&rt&&rt.height>0||st&&rt&&d(rt)){a===null&&(a=new Ay(e));let ut=_e?a.fromEquirectangular(j):a.fromCubemap(j);return o.set(j,ut),j.addEventListener("dispose",g),ut.texture}else return null}}}return j}function d(j){let $=0,_e=6;for(let st=0;st<_e;st++)j[st]!==void 0&&$++;return $===_e}function g(j){let $=j.target;$.removeEventListener("dispose",g);let _e=o.get($);_e!==void 0&&(o.delete($),_e.dispose())}function b(){o=new WeakMap,a!==null&&(a.dispose(),a=null)}return{get:c,dispose:b}}function gU(e){let o={};function a(c){if(o[c]!==void 0)return o[c];let d;switch(c){case"WEBGL_depth_texture":d=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=e.getExtension(c)}return o[c]=d,d}return{has:function(c){return a(c)!==null},init:function(c){c.isWebGL2?a("EXT_color_buffer_float"):(a("WEBGL_depth_texture"),a("OES_texture_float"),a("OES_texture_half_float"),a("OES_texture_half_float_linear"),a("OES_standard_derivatives"),a("OES_element_index_uint"),a("OES_vertex_array_object"),a("ANGLE_instanced_arrays")),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float"),a("WEBGL_multisampled_render_to_texture")},get:function(c){let d=a(c);return d===null&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),d}}}function yU(e,o,a,c){let d={},g=new WeakMap;function b(rt){let ut=rt.target;ut.index!==null&&o.remove(ut.index);for(let yt in ut.attributes)o.remove(ut.attributes[yt]);ut.removeEventListener("dispose",b),delete d[ut.id];let gt=g.get(ut);gt&&(o.remove(gt),g.delete(ut)),c.releaseStatesOfGeometry(ut),ut.isInstancedBufferGeometry===!0&&delete ut._maxInstanceCount,a.memory.geometries--}function j(rt,ut){return d[ut.id]===!0||(ut.addEventListener("dispose",b),d[ut.id]=!0,a.memory.geometries++),ut}function $(rt){let ut=rt.attributes;for(let yt in ut)o.update(ut[yt],34962);let gt=rt.morphAttributes;for(let yt in gt){let wt=gt[yt];for(let Ct=0,Pt=wt.length;Ct<Pt;Ct++)o.update(wt[Ct],34962)}}function _e(rt){let ut=[],gt=rt.index,yt=rt.attributes.position,wt=0;if(gt!==null){let At=gt.array;wt=gt.version;for(let Tt=0,kt=At.length;Tt<kt;Tt+=3){let It=At[Tt+0],Lt=At[Tt+1],Ft=At[Tt+2];ut.push(It,Lt,Lt,Ft,Ft,It)}}else{let At=yt.array;wt=yt.version;for(let Tt=0,kt=At.length/3-1;Tt<kt;Tt+=3){let It=Tt+0,Lt=Tt+1,Ft=Tt+2;ut.push(It,Lt,Lt,Ft,Ft,It)}}let Ct=new(YM(ut)?_o:wy)(ut,1);Ct.version=wt;let Pt=g.get(rt);Pt&&o.remove(Pt),g.set(rt,Ct)}function st(rt){let ut=g.get(rt);if(ut){let gt=rt.index;gt!==null&&ut.version<gt.version&&_e(rt)}else _e(rt);return g.get(rt)}return{get:j,update:$,getWireframeAttribute:st}}function vU(e,o,a,c){let d=c.isWebGL2,g;function b(ut){g=ut}let j,$;function _e(ut){j=ut.type,$=ut.bytesPerElement}function st(ut,gt){e.drawElements(g,gt,j,ut*$),a.update(gt,g,1)}function rt(ut,gt,yt){if(yt===0)return;let wt,Ct;if(d)wt=e,Ct="drawElementsInstanced";else if(wt=o.get("ANGLE_instanced_arrays"),Ct="drawElementsInstancedANGLE",wt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}wt[Ct](g,gt,j,ut*$,yt),a.update(gt,g,yt)}this.setMode=b,this.setIndex=_e,this.render=st,this.renderInstances=rt}function xU(e){let o={geometries:0,textures:0},a={frame:0,calls:0,triangles:0,points:0,lines:0};function c(g,b,j){switch(a.calls++,b){case 4:a.triangles+=j*(g/3);break;case 1:a.lines+=j*(g/2);break;case 3:a.lines+=j*(g-1);break;case 2:a.lines+=j*g;break;case 0:a.points+=j*g;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",b);break}}function d(){a.frame++,a.calls=0,a.triangles=0,a.points=0,a.lines=0}return{memory:o,render:a,programs:null,autoReset:!0,reset:d,update:c}}function bU(e,o){return e[0]-o[0]}function SU(e,o){return Math.abs(o[1])-Math.abs(e[1])}function wU(e,o,a){let c={},d=new Float32Array(8),g=new WeakMap,b=new Ke,j=[];for(let _e=0;_e<8;_e++)j[_e]=[_e,0];function $(_e,st,rt,ut){let gt=_e.morphTargetInfluences;if(o.isWebGL2===!0){let yt=st.morphAttributes.position||st.morphAttributes.normal||st.morphAttributes.color,wt=yt!==void 0?yt.length:0,Ct=g.get(st);if(Ct===void 0||Ct.count!==wt){let Tt=function(){un.dispose(),g.delete(st),st.removeEventListener("dispose",Tt)};Ct!==void 0&&Ct.texture.dispose();let kt=st.morphAttributes.position!==void 0,It=st.morphAttributes.normal!==void 0,Lt=st.morphAttributes.color!==void 0,Ft=st.morphAttributes.position||[],Nt=st.morphAttributes.normal||[],Ht=st.morphAttributes.color||[],dr=0;kt===!0&&(dr=1),It===!0&&(dr=2),Lt===!0&&(dr=3);let hs=st.attributes.position.count*dr,us=1;hs>o.maxTextureSize&&(us=Math.ceil(hs/o.maxTextureSize),hs=o.maxTextureSize);let hn=new Float32Array(hs*us*4*wt),un=new xy(hn,hs,us,wt);un.type=Sr$1,un.needsUpdate=!0;let bo=dr*4;for(let _s=0;_s<wt;_s++){let gn=Ft[_s],Gr=Nt[_s],ds=Ht[_s],Zn=hs*us*4*_s;for(let Nn=0;Nn<gn.count;Nn++){let Qn=Nn*bo;kt===!0&&(b.fromBufferAttribute(gn,Nn),hn[Zn+Qn+0]=b.x,hn[Zn+Qn+1]=b.y,hn[Zn+Qn+2]=b.z,hn[Zn+Qn+3]=0),It===!0&&(b.fromBufferAttribute(Gr,Nn),hn[Zn+Qn+4]=b.x,hn[Zn+Qn+5]=b.y,hn[Zn+Qn+6]=b.z,hn[Zn+Qn+7]=0),Lt===!0&&(b.fromBufferAttribute(ds,Nn),hn[Zn+Qn+8]=b.x,hn[Zn+Qn+9]=b.y,hn[Zn+Qn+10]=b.z,hn[Zn+Qn+11]=ds.itemSize===4?b.w:1)}}Ct={count:wt,texture:un,size:new z$2(hs,us)},g.set(st,Ct),st.addEventListener("dispose",Tt)}let Pt=0;for(let Tt=0;Tt<gt.length;Tt++)Pt+=gt[Tt];let At=st.morphTargetsRelative?1:1-Pt;ut.getUniforms().setValue(e,"morphTargetBaseInfluence",At),ut.getUniforms().setValue(e,"morphTargetInfluences",gt),ut.getUniforms().setValue(e,"morphTargetsTexture",Ct.texture,a),ut.getUniforms().setValue(e,"morphTargetsTextureSize",Ct.size)}else{let yt=gt===void 0?0:gt.length,wt=c[st.id];if(wt===void 0||wt.length!==yt){wt=[];for(let kt=0;kt<yt;kt++)wt[kt]=[kt,0];c[st.id]=wt}for(let kt=0;kt<yt;kt++){let It=wt[kt];It[0]=kt,It[1]=gt[kt]}wt.sort(SU);for(let kt=0;kt<8;kt++)kt<yt&&wt[kt][1]?(j[kt][0]=wt[kt][0],j[kt][1]=wt[kt][1]):(j[kt][0]=Number.MAX_SAFE_INTEGER,j[kt][1]=0);j.sort(bU);let Ct=st.morphAttributes.position,Pt=st.morphAttributes.normal,At=0;for(let kt=0;kt<8;kt++){let It=j[kt],Lt=It[0],Ft=It[1];Lt!==Number.MAX_SAFE_INTEGER&&Ft?(Ct&&st.getAttribute("morphTarget"+kt)!==Ct[Lt]&&st.setAttribute("morphTarget"+kt,Ct[Lt]),Pt&&st.getAttribute("morphNormal"+kt)!==Pt[Lt]&&st.setAttribute("morphNormal"+kt,Pt[Lt]),d[kt]=Ft,At+=Ft):(Ct&&st.hasAttribute("morphTarget"+kt)===!0&&st.deleteAttribute("morphTarget"+kt),Pt&&st.hasAttribute("morphNormal"+kt)===!0&&st.deleteAttribute("morphNormal"+kt),d[kt]=0)}let Tt=st.morphTargetsRelative?1:1-At;ut.getUniforms().setValue(e,"morphTargetBaseInfluence",Tt),ut.getUniforms().setValue(e,"morphTargetInfluences",d)}}return{update:$}}function AU(e,o,a,c){let d=new WeakMap;function g($){let _e=c.render.frame,st=$.geometry,rt=o.get($,st);return d.get(rt)!==_e&&(o.update(rt),d.set(rt,_e)),$.isInstancedMesh&&($.hasEventListener("dispose",j)===!1&&$.addEventListener("dispose",j),a.update($.instanceMatrix,34962),$.instanceColor!==null&&a.update($.instanceColor,34962)),rt}function b(){d=new WeakMap}function j($){let _e=$.target;_e.removeEventListener("dispose",j),a.remove(_e.instanceMatrix),_e.instanceColor!==null&&a.remove(_e.instanceColor)}return{update:g,dispose:b}}var ZM=new tr,JM=new xy,$M=new by,eC=new Hu,rM=[],iM=[],nM=new Float32Array(16),sM=new Float32Array(9),oM=new Float32Array(4);function hh(e,o,a){let c=e[0];if(c<=0||c>0)return e;let d=o*a,g=rM[d];if(g===void 0&&(g=new Float32Array(d),rM[d]=g),o!==0){c.toArray(g,0);for(let b=1,j=0;b!==o;++b)j+=a,e[b].toArray(g,j)}return g}function Mi(e,o){if(e.length!==o.length)return!1;for(let a=0,c=e.length;a<c;a++)if(e[a]!==o[a])return!1;return!0}function Ci(e,o){for(let a=0,c=o.length;a<c;a++)e[a]=o[a]}function jy(e,o){let a=iM[o];a===void 0&&(a=new Int32Array(o),iM[o]=a);for(let c=0;c!==o;++c)a[c]=e.allocateTextureUnit();return a}function _U(e,o){let a=this.cache;a[0]!==o&&(e.uniform1f(this.addr,o),a[0]=o)}function EU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y)&&(e.uniform2f(this.addr,o.x,o.y),a[0]=o.x,a[1]=o.y);else{if(Mi(a,o))return;e.uniform2fv(this.addr,o),Ci(a,o)}}function TU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z)&&(e.uniform3f(this.addr,o.x,o.y,o.z),a[0]=o.x,a[1]=o.y,a[2]=o.z);else if(o.r!==void 0)(a[0]!==o.r||a[1]!==o.g||a[2]!==o.b)&&(e.uniform3f(this.addr,o.r,o.g,o.b),a[0]=o.r,a[1]=o.g,a[2]=o.b);else{if(Mi(a,o))return;e.uniform3fv(this.addr,o),Ci(a,o)}}function MU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z||a[3]!==o.w)&&(e.uniform4f(this.addr,o.x,o.y,o.z,o.w),a[0]=o.x,a[1]=o.y,a[2]=o.z,a[3]=o.w);else{if(Mi(a,o))return;e.uniform4fv(this.addr,o),Ci(a,o)}}function CU(e,o){let a=this.cache,c=o.elements;if(c===void 0){if(Mi(a,o))return;e.uniformMatrix2fv(this.addr,!1,o),Ci(a,o)}else{if(Mi(a,c))return;oM.set(c),e.uniformMatrix2fv(this.addr,!1,oM),Ci(a,c)}}function PU(e,o){let a=this.cache,c=o.elements;if(c===void 0){if(Mi(a,o))return;e.uniformMatrix3fv(this.addr,!1,o),Ci(a,o)}else{if(Mi(a,c))return;sM.set(c),e.uniformMatrix3fv(this.addr,!1,sM),Ci(a,c)}}function DU(e,o){let a=this.cache,c=o.elements;if(c===void 0){if(Mi(a,o))return;e.uniformMatrix4fv(this.addr,!1,o),Ci(a,o)}else{if(Mi(a,c))return;nM.set(c),e.uniformMatrix4fv(this.addr,!1,nM),Ci(a,c)}}function OU(e,o){let a=this.cache;a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o)}function IU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y)&&(e.uniform2i(this.addr,o.x,o.y),a[0]=o.x,a[1]=o.y);else{if(Mi(a,o))return;e.uniform2iv(this.addr,o),Ci(a,o)}}function RU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z)&&(e.uniform3i(this.addr,o.x,o.y,o.z),a[0]=o.x,a[1]=o.y,a[2]=o.z);else{if(Mi(a,o))return;e.uniform3iv(this.addr,o),Ci(a,o)}}function LU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z||a[3]!==o.w)&&(e.uniform4i(this.addr,o.x,o.y,o.z,o.w),a[0]=o.x,a[1]=o.y,a[2]=o.z,a[3]=o.w);else{if(Mi(a,o))return;e.uniform4iv(this.addr,o),Ci(a,o)}}function BU(e,o){let a=this.cache;a[0]!==o&&(e.uniform1ui(this.addr,o),a[0]=o)}function NU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y)&&(e.uniform2ui(this.addr,o.x,o.y),a[0]=o.x,a[1]=o.y);else{if(Mi(a,o))return;e.uniform2uiv(this.addr,o),Ci(a,o)}}function FU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z)&&(e.uniform3ui(this.addr,o.x,o.y,o.z),a[0]=o.x,a[1]=o.y,a[2]=o.z);else{if(Mi(a,o))return;e.uniform3uiv(this.addr,o),Ci(a,o)}}function kU(e,o){let a=this.cache;if(o.x!==void 0)(a[0]!==o.x||a[1]!==o.y||a[2]!==o.z||a[3]!==o.w)&&(e.uniform4ui(this.addr,o.x,o.y,o.z,o.w),a[0]=o.x,a[1]=o.y,a[2]=o.z,a[3]=o.w);else{if(Mi(a,o))return;e.uniform4uiv(this.addr,o),Ci(a,o)}}function VU(e,o,a){let c=this.cache,d=a.allocateTextureUnit();c[0]!==d&&(e.uniform1i(this.addr,d),c[0]=d),a.setTexture2D(o||ZM,d)}function zU(e,o,a){let c=this.cache,d=a.allocateTextureUnit();c[0]!==d&&(e.uniform1i(this.addr,d),c[0]=d),a.setTexture3D(o||$M,d)}function UU(e,o,a){let c=this.cache,d=a.allocateTextureUnit();c[0]!==d&&(e.uniform1i(this.addr,d),c[0]=d),a.setTextureCube(o||eC,d)}function GU(e,o,a){let c=this.cache,d=a.allocateTextureUnit();c[0]!==d&&(e.uniform1i(this.addr,d),c[0]=d),a.setTexture2DArray(o||JM,d)}function jU(e){switch(e){case 5126:return _U;case 35664:return EU;case 35665:return TU;case 35666:return MU;case 35674:return CU;case 35675:return PU;case 35676:return DU;case 5124:case 35670:return OU;case 35667:case 35671:return IU;case 35668:case 35672:return RU;case 35669:case 35673:return LU;case 5125:return BU;case 36294:return NU;case 36295:return FU;case 36296:return kU;case 35678:case 36198:case 36298:case 36306:case 35682:return VU;case 35679:case 36299:case 36307:return zU;case 35680:case 36300:case 36308:case 36293:return UU;case 36289:case 36303:case 36311:case 36292:return GU}}function HU(e,o){e.uniform1fv(this.addr,o)}function WU(e,o){let a=hh(o,this.size,2);e.uniform2fv(this.addr,a)}function qU(e,o){let a=hh(o,this.size,3);e.uniform3fv(this.addr,a)}function YU(e,o){let a=hh(o,this.size,4);e.uniform4fv(this.addr,a)}function XU(e,o){let a=hh(o,this.size,4);e.uniformMatrix2fv(this.addr,!1,a)}function QU(e,o){let a=hh(o,this.size,9);e.uniformMatrix3fv(this.addr,!1,a)}function KU(e,o){let a=hh(o,this.size,16);e.uniformMatrix4fv(this.addr,!1,a)}function ZU(e,o){e.uniform1iv(this.addr,o)}function JU(e,o){e.uniform2iv(this.addr,o)}function $U(e,o){e.uniform3iv(this.addr,o)}function eG(e,o){e.uniform4iv(this.addr,o)}function tG(e,o){e.uniform1uiv(this.addr,o)}function rG(e,o){e.uniform2uiv(this.addr,o)}function iG(e,o){e.uniform3uiv(this.addr,o)}function nG(e,o){e.uniform4uiv(this.addr,o)}function sG(e,o,a){let c=this.cache,d=o.length,g=jy(a,d);Mi(c,g)||(e.uniform1iv(this.addr,g),Ci(c,g));for(let b=0;b!==d;++b)a.setTexture2D(o[b]||ZM,g[b])}function oG(e,o,a){let c=this.cache,d=o.length,g=jy(a,d);Mi(c,g)||(e.uniform1iv(this.addr,g),Ci(c,g));for(let b=0;b!==d;++b)a.setTexture3D(o[b]||$M,g[b])}function aG(e,o,a){let c=this.cache,d=o.length,g=jy(a,d);Mi(c,g)||(e.uniform1iv(this.addr,g),Ci(c,g));for(let b=0;b!==d;++b)a.setTextureCube(o[b]||eC,g[b])}function lG(e,o,a){let c=this.cache,d=o.length,g=jy(a,d);Mi(c,g)||(e.uniform1iv(this.addr,g),Ci(c,g));for(let b=0;b!==d;++b)a.setTexture2DArray(o[b]||JM,g[b])}function cG(e){switch(e){case 5126:return HU;case 35664:return WU;case 35665:return qU;case 35666:return YU;case 35674:return XU;case 35675:return QU;case 35676:return KU;case 5124:case 35670:return ZU;case 35667:case 35671:return JU;case 35668:case 35672:return $U;case 35669:case 35673:return eG;case 5125:return tG;case 36294:return rG;case 36295:return iG;case 36296:return nG;case 35678:case 36198:case 36298:case 36306:case 35682:return sG;case 35679:case 36299:case 36307:return oG;case 35680:case 36300:case 36308:case 36293:return aG;case 36289:case 36303:case 36311:case 36292:return lG}}var KS=class{constructor(e,o,a){this.id=e,this.addr=a,this.cache=[],this.setValue=jU(o.type)}},ZS=class{constructor(e,o,a){this.id=e,this.addr=a,this.cache=[],this.size=o.size,this.setValue=cG(o.type)}},JS=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,o,a){let c=this.seq;for(let d=0,g=c.length;d!==g;++d){let b=c[d];b.setValue(e,o[b.id],a)}}},LS=/(\w+)(\])?(\[|\.)?/g;function aM(e,o){e.seq.push(o),e.map[o.id]=o}function uG(e,o,a){let c=e.name,d=c.length;for(LS.lastIndex=0;;){let g=LS.exec(c),b=LS.lastIndex,j=g[1],$=g[2]==="]",_e=g[3];if($&&(j=j|0),_e===void 0||_e==="["&&b+2===d){aM(a,_e===void 0?new KS(j,e,o):new ZS(j,e,o));break}else{let st=a.map[j];st===void 0&&(st=new JS(j),aM(a,st)),a=st}}}var Gu=class{constructor(e,o){this.seq=[],this.map={};let a=e.getProgramParameter(o,35718);for(let c=0;c<a;++c){let d=e.getActiveUniform(o,c),g=e.getUniformLocation(o,d.name);uG(d,g,this)}}setValue(e,o,a,c){let d=this.map[o];d!==void 0&&d.setValue(e,a,c)}setOptional(e,o,a){let c=o[a];c!==void 0&&this.setValue(e,a,c)}static upload(e,o,a,c){for(let d=0,g=o.length;d!==g;++d){let b=o[d],j=a[b.id];j.needsUpdate!==!1&&b.setValue(e,j.value,c)}}static seqWithValue(e,o){let a=[];for(let c=0,d=e.length;c!==d;++c){let g=e[c];g.id in o&&a.push(g)}return a}};function lM(e,o,a){let c=e.createShader(o);return e.shaderSource(c,a),e.compileShader(c),c}var hG=0;function dG(e,o){let a=e.split(`
`),c=[],d=Math.max(o-6,0),g=Math.min(o+6,a.length);for(let b=d;b<g;b++){let j=b+1;c.push(`${j===o?">":" "} ${j}: ${a[b]}`)}return c.join(`
`)}function fG(e){switch(e){case Sn:return["Linear","( value )"];case at:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function cM(e,o,a){let c=e.getShaderParameter(o,35713),d=e.getShaderInfoLog(o).trim();if(c&&d==="")return"";let g=/ERROR: 0:(\d+)/.exec(d);if(g){let b=parseInt(g[1]);return a.toUpperCase()+`

`+d+`

`+dG(e.getShaderSource(o),b)}else return d}function pG(e,o){let a=fG(o);return"vec4 "+e+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function mG(e,o){let a;switch(o){case PF:a="Linear";break;case DF:a="Reinhard";break;case OF:a="OptimizedCineon";break;case IF:a="ACESFilmic";break;case RF:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",o),a="Linear"}return"vec3 "+e+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function gG(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gp).join(`
`)}function yG(e){let o=[];for(let a in e){let c=e[a];c!==!1&&o.push("#define "+a+" "+c)}return o.join(`
`)}function vG(e,o){let a={},c=e.getProgramParameter(o,35721);for(let d=0;d<c;d++){let g=e.getActiveAttrib(o,d),b=g.name,j=1;g.type===35674&&(j=2),g.type===35675&&(j=3),g.type===35676&&(j=4),a[b]={type:g.type,location:e.getAttribLocation(o,b),locationSize:j}}return a}function gp(e){return e!==""}function uM(e,o){let a=o.numSpotLightShadows+o.numSpotLightMaps-o.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,o.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,a).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,o.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,o.numPointLightShadows)}function hM(e,o){return e.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}var xG=/^[ \t]*#include +<([\w\d./]+)>/gm;function $S(e){return e.replace(xG,bG)}function bG(e,o){let a=bt[o];if(a===void 0)throw new Error("Can not resolve #include <"+o+">");return $S(a)}var SG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dM(e){return e.replace(SG,wG)}function wG(e,o,a,c){let d="";for(let g=parseInt(o);g<parseInt(a);g++)d+=c.replace(/\[\s*i\s*\]/g,"[ "+g+" ]").replace(/UNROLLED_LOOP_INDEX/g,g);return d}function fM(e){let o="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?o+=`
#define HIGH_PRECISION`:e.precision==="mediump"?o+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(o+=`
#define LOW_PRECISION`),o}function AG(e){let o="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Gy?o="SHADOWMAP_TYPE_PCF":e.shadowMapType===aF?o="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===mp&&(o="SHADOWMAP_TYPE_VSM"),o}function _G(e){let o="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case al:case ll:o="ENVMAP_TYPE_CUBE";break;case ch:o="ENVMAP_TYPE_CUBE_UV";break}return o}function EG(e){let o="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ll:o="ENVMAP_MODE_REFRACTION";break}return o}function TG(e){let o="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case GM:o="ENVMAP_BLENDING_MULTIPLY";break;case MF:o="ENVMAP_BLENDING_MIX";break;case CF:o="ENVMAP_BLENDING_ADD";break}return o}function MG(e){let o=e.envMapCubeUVHeight;if(o===null)return null;let a=Math.log2(o)-2,c=1/o;return{texelWidth:1/(3*Math.max(Math.pow(2,a),7*16)),texelHeight:c,maxMip:a}}function CG(e,o,a,c){let d=e.getContext(),g=a.defines,b=a.vertexShader,j=a.fragmentShader,$=AG(a),_e=_G(a),st=EG(a),rt=TG(a),ut=MG(a),gt=a.isWebGL2?"":gG(a),yt=yG(g),wt=d.createProgram(),Ct,Pt,At=a.glslVersion?"#version "+a.glslVersion+`
`:"";a.isRawShaderMaterial?(Ct=[yt].filter(gp).join(`
`),Ct.length>0&&(Ct+=`
`),Pt=[gt,yt].filter(gp).join(`
`),Pt.length>0&&(Pt+=`
`)):(Ct=[fM(a),"#define SHADER_NAME "+a.shaderName,yt,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+st:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.morphColors&&a.isWebGL2?"#define USE_MORPHCOLORS":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+a.morphTextureStride:"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+$:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gp).join(`
`),Pt=[gt,fM(a),"#define SHADER_NAME "+a.shaderName,yt,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+_e:"",a.envMap?"#define "+st:"",a.envMap?"#define "+rt:"",ut?"#define CUBEUV_TEXEL_WIDTH "+ut.texelWidth:"",ut?"#define CUBEUV_TEXEL_HEIGHT "+ut.texelHeight:"",ut?"#define CUBEUV_MAX_MIP "+ut.maxMip+".0":"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescence?"#define USE_IRIDESCENCE":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+$:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==Hs?"#define TONE_MAPPING":"",a.toneMapping!==Hs?bt.tonemapping_pars_fragment:"",a.toneMapping!==Hs?mG("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.opaque?"#define OPAQUE":"",bt.encodings_pars_fragment,pG("linearToOutputTexel",a.outputEncoding),a.useDepthPacking?"#define DEPTH_PACKING "+a.depthPacking:"",`
`].filter(gp).join(`
`)),b=$S(b),b=uM(b,a),b=hM(b,a),j=$S(j),j=uM(j,a),j=hM(j,a),b=dM(b),j=dM(j),a.isWebGL2&&a.isRawShaderMaterial!==!0&&(At=`#version 300 es
`,Ct=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Ct,Pt=["#define varying in",a.glslVersion===kT?"":"layout(location = 0) out highp vec4 pc_fragColor;",a.glslVersion===kT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Pt);let Tt=At+Ct+b,kt=At+Pt+j,It=lM(d,35633,Tt),Lt=lM(d,35632,kt);if(d.attachShader(wt,It),d.attachShader(wt,Lt),a.index0AttributeName!==void 0?d.bindAttribLocation(wt,0,a.index0AttributeName):a.morphTargets===!0&&d.bindAttribLocation(wt,0,"position"),d.linkProgram(wt),e.debug.checkShaderErrors){let Ht=d.getProgramInfoLog(wt).trim(),dr=d.getShaderInfoLog(It).trim(),hs=d.getShaderInfoLog(Lt).trim(),us=!0,hn=!0;if(d.getProgramParameter(wt,35714)===!1){us=!1;let un=cM(d,It,"vertex"),bo=cM(d,Lt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(wt,35715)+`

Program Info Log: `+Ht+`
`+un+`
`+bo)}else Ht!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Ht):(dr===""||hs==="")&&(hn=!1);hn&&(this.diagnostics={runnable:us,programLog:Ht,vertexShader:{log:dr,prefix:Ct},fragmentShader:{log:hs,prefix:Pt}})}d.deleteShader(It),d.deleteShader(Lt);let Ft;this.getUniforms=function(){return Ft===void 0&&(Ft=new Gu(d,wt)),Ft};let Nt;return this.getAttributes=function(){return Nt===void 0&&(Nt=vG(d,wt)),Nt},this.destroy=function(){c.releaseStatesOfProgram(this),d.deleteProgram(wt),this.program=void 0},this.name=a.shaderName,this.id=hG++,this.cacheKey=o,this.usedTimes=1,this.program=wt,this.vertexShader=It,this.fragmentShader=Lt,this}var PG=0,ew=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let o=e.vertexShader,a=e.fragmentShader,c=this._getShaderStage(o),d=this._getShaderStage(a),g=this._getShaderCacheForMaterial(e);return g.has(c)===!1&&(g.add(c),c.usedTimes++),g.has(d)===!1&&(g.add(d),d.usedTimes++),this}remove(e){let o=this.materialCache.get(e);for(let a of o)a.usedTimes--,a.usedTimes===0&&this.shaderCache.delete(a.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let o=this.materialCache,a=o.get(e);return a===void 0&&(a=new Set,o.set(e,a)),a}_getShaderStage(e){let o=this.shaderCache,a=o.get(e);return a===void 0&&(a=new tw(e),o.set(e,a)),a}},tw=class{constructor(e){this.id=PG++,this.code=e,this.usedTimes=0}};function DG(e,o,a,c,d,g,b){let j=new Ep,$=new ew,_e=[],st=d.isWebGL2,rt=d.logarithmicDepthBuffer,ut=d.vertexTextures,gt=d.precision,yt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function wt(Nt,Ht,dr,hs,us){let hn=hs.fog,un=us.geometry,bo=Nt.isMeshStandardMaterial?hs.environment:null,_s=(Nt.isMeshStandardMaterial?a:o).get(Nt.envMap||bo),gn=_s&&_s.mapping===ch?_s.image.height:null,Gr=yt[Nt.type];Nt.precision!==null&&(gt=d.getMaxPrecision(Nt.precision),gt!==Nt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Nt.precision,"not supported, using",gt,"instead."));let ds=un.morphAttributes.position||un.morphAttributes.normal||un.morphAttributes.color,Zn=ds!==void 0?ds.length:0,Nn=0;un.morphAttributes.position!==void 0&&(Nn=1),un.morphAttributes.normal!==void 0&&(Nn=2),un.morphAttributes.color!==void 0&&(Nn=3);let Qn,bu,ou,g0;if(Gr){let q1=Ao[Gr];Qn=q1.vertexShader,bu=q1.fragmentShader}else Qn=Nt.vertexShader,bu=Nt.fragmentShader,$.update(Nt),ou=$.getVertexShaderID(Nt),g0=$.getFragmentShaderID(Nt);let Su=e.getRenderTarget(),l1=Nt.alphaTest>0,B0=Nt.clearcoat>0,a1=Nt.iridescence>0;return{isWebGL2:st,shaderID:Gr,shaderName:Nt.type,vertexShader:Qn,fragmentShader:bu,defines:Nt.defines,customVertexShaderID:ou,customFragmentShaderID:g0,isRawShaderMaterial:Nt.isRawShaderMaterial===!0,glslVersion:Nt.glslVersion,precision:gt,instancing:us.isInstancedMesh===!0,instancingColor:us.isInstancedMesh===!0&&us.instanceColor!==null,supportsVertexTextures:ut,outputEncoding:Su===null?e.outputEncoding:Su.isXRRenderTarget===!0?Su.texture.encoding:Sn,map:!!Nt.map,matcap:!!Nt.matcap,envMap:!!_s,envMapMode:_s&&_s.mapping,envMapCubeUVHeight:gn,lightMap:!!Nt.lightMap,aoMap:!!Nt.aoMap,emissiveMap:!!Nt.emissiveMap,bumpMap:!!Nt.bumpMap,normalMap:!!Nt.normalMap,objectSpaceNormalMap:Nt.normalMapType===KF,tangentSpaceNormalMap:Nt.normalMapType===QF,decodeVideoTexture:!!Nt.map&&Nt.map.isVideoTexture===!0&&Nt.map.encoding===at,clearcoat:B0,clearcoatMap:B0&&!!Nt.clearcoatMap,clearcoatRoughnessMap:B0&&!!Nt.clearcoatRoughnessMap,clearcoatNormalMap:B0&&!!Nt.clearcoatNormalMap,iridescence:a1,iridescenceMap:a1&&!!Nt.iridescenceMap,iridescenceThicknessMap:a1&&!!Nt.iridescenceThicknessMap,displacementMap:!!Nt.displacementMap,roughnessMap:!!Nt.roughnessMap,metalnessMap:!!Nt.metalnessMap,specularMap:!!Nt.specularMap,specularIntensityMap:!!Nt.specularIntensityMap,specularColorMap:!!Nt.specularColorMap,opaque:Nt.transparent===!1&&Nt.blending===sl,alphaMap:!!Nt.alphaMap,alphaTest:l1,gradientMap:!!Nt.gradientMap,sheen:Nt.sheen>0,sheenColorMap:!!Nt.sheenColorMap,sheenRoughnessMap:!!Nt.sheenRoughnessMap,transmission:Nt.transmission>0,transmissionMap:!!Nt.transmissionMap,thicknessMap:!!Nt.thicknessMap,combine:Nt.combine,vertexTangents:!!Nt.normalMap&&!!un.attributes.tangent,vertexColors:Nt.vertexColors,vertexAlphas:Nt.vertexColors===!0&&!!un.attributes.color&&un.attributes.color.itemSize===4,vertexUvs:!!Nt.map||!!Nt.bumpMap||!!Nt.normalMap||!!Nt.specularMap||!!Nt.alphaMap||!!Nt.emissiveMap||!!Nt.roughnessMap||!!Nt.metalnessMap||!!Nt.clearcoatMap||!!Nt.clearcoatRoughnessMap||!!Nt.clearcoatNormalMap||!!Nt.iridescenceMap||!!Nt.iridescenceThicknessMap||!!Nt.displacementMap||!!Nt.transmissionMap||!!Nt.thicknessMap||!!Nt.specularIntensityMap||!!Nt.specularColorMap||!!Nt.sheenColorMap||!!Nt.sheenRoughnessMap,uvsVertexOnly:!(Nt.map||Nt.bumpMap||Nt.normalMap||Nt.specularMap||Nt.alphaMap||Nt.emissiveMap||Nt.roughnessMap||Nt.metalnessMap||Nt.clearcoatNormalMap||Nt.iridescenceMap||Nt.iridescenceThicknessMap||Nt.transmission>0||Nt.transmissionMap||Nt.thicknessMap||Nt.specularIntensityMap||Nt.specularColorMap||Nt.sheen>0||Nt.sheenColorMap||Nt.sheenRoughnessMap)&&!!Nt.displacementMap,fog:!!hn,useFog:Nt.fog===!0,fogExp2:hn&&hn.isFogExp2,flatShading:!!Nt.flatShading,sizeAttenuation:Nt.sizeAttenuation,logarithmicDepthBuffer:rt,skinning:us.isSkinnedMesh===!0,morphTargets:un.morphAttributes.position!==void 0,morphNormals:un.morphAttributes.normal!==void 0,morphColors:un.morphAttributes.color!==void 0,morphTargetsCount:Zn,morphTextureStride:Nn,numDirLights:Ht.directional.length,numPointLights:Ht.point.length,numSpotLights:Ht.spot.length,numSpotLightMaps:Ht.spotLightMap.length,numRectAreaLights:Ht.rectArea.length,numHemiLights:Ht.hemi.length,numDirLightShadows:Ht.directionalShadowMap.length,numPointLightShadows:Ht.pointShadowMap.length,numSpotLightShadows:Ht.spotShadowMap.length,numSpotLightShadowsWithMaps:Ht.numSpotLightShadowsWithMaps,numClippingPlanes:b.numPlanes,numClipIntersection:b.numIntersection,dithering:Nt.dithering,shadowMapEnabled:e.shadowMap.enabled&&dr.length>0,shadowMapType:e.shadowMap.type,toneMapping:Nt.toneMapped?e.toneMapping:Hs,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:Nt.premultipliedAlpha,doubleSided:Nt.side===tn,flipSided:Nt.side===yi,useDepthPacking:!!Nt.depthPacking,depthPacking:Nt.depthPacking||0,index0AttributeName:Nt.index0AttributeName,extensionDerivatives:Nt.extensions&&Nt.extensions.derivatives,extensionFragDepth:Nt.extensions&&Nt.extensions.fragDepth,extensionDrawBuffers:Nt.extensions&&Nt.extensions.drawBuffers,extensionShaderTextureLOD:Nt.extensions&&Nt.extensions.shaderTextureLOD,rendererExtensionFragDepth:st||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:st||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:st||c.has("EXT_shader_texture_lod"),customProgramCacheKey:Nt.customProgramCacheKey()}}function Ct(Nt){let Ht=[];if(Nt.shaderID?Ht.push(Nt.shaderID):(Ht.push(Nt.customVertexShaderID),Ht.push(Nt.customFragmentShaderID)),Nt.defines!==void 0)for(let dr in Nt.defines)Ht.push(dr),Ht.push(Nt.defines[dr]);return Nt.isRawShaderMaterial===!1&&(Pt(Ht,Nt),At(Ht,Nt),Ht.push(e.outputEncoding)),Ht.push(Nt.customProgramCacheKey),Ht.join()}function Pt(Nt,Ht){Nt.push(Ht.precision),Nt.push(Ht.outputEncoding),Nt.push(Ht.envMapMode),Nt.push(Ht.envMapCubeUVHeight),Nt.push(Ht.combine),Nt.push(Ht.vertexUvs),Nt.push(Ht.fogExp2),Nt.push(Ht.sizeAttenuation),Nt.push(Ht.morphTargetsCount),Nt.push(Ht.morphAttributeCount),Nt.push(Ht.numDirLights),Nt.push(Ht.numPointLights),Nt.push(Ht.numSpotLights),Nt.push(Ht.numSpotLightMaps),Nt.push(Ht.numHemiLights),Nt.push(Ht.numRectAreaLights),Nt.push(Ht.numDirLightShadows),Nt.push(Ht.numPointLightShadows),Nt.push(Ht.numSpotLightShadows),Nt.push(Ht.numSpotLightShadowsWithMaps),Nt.push(Ht.shadowMapType),Nt.push(Ht.toneMapping),Nt.push(Ht.numClippingPlanes),Nt.push(Ht.numClipIntersection),Nt.push(Ht.depthPacking)}function At(Nt,Ht){j.disableAll(),Ht.isWebGL2&&j.enable(0),Ht.supportsVertexTextures&&j.enable(1),Ht.instancing&&j.enable(2),Ht.instancingColor&&j.enable(3),Ht.map&&j.enable(4),Ht.matcap&&j.enable(5),Ht.envMap&&j.enable(6),Ht.lightMap&&j.enable(7),Ht.aoMap&&j.enable(8),Ht.emissiveMap&&j.enable(9),Ht.bumpMap&&j.enable(10),Ht.normalMap&&j.enable(11),Ht.objectSpaceNormalMap&&j.enable(12),Ht.tangentSpaceNormalMap&&j.enable(13),Ht.clearcoat&&j.enable(14),Ht.clearcoatMap&&j.enable(15),Ht.clearcoatRoughnessMap&&j.enable(16),Ht.clearcoatNormalMap&&j.enable(17),Ht.iridescence&&j.enable(18),Ht.iridescenceMap&&j.enable(19),Ht.iridescenceThicknessMap&&j.enable(20),Ht.displacementMap&&j.enable(21),Ht.specularMap&&j.enable(22),Ht.roughnessMap&&j.enable(23),Ht.metalnessMap&&j.enable(24),Ht.gradientMap&&j.enable(25),Ht.alphaMap&&j.enable(26),Ht.alphaTest&&j.enable(27),Ht.vertexColors&&j.enable(28),Ht.vertexAlphas&&j.enable(29),Ht.vertexUvs&&j.enable(30),Ht.vertexTangents&&j.enable(31),Ht.uvsVertexOnly&&j.enable(32),Nt.push(j.mask),j.disableAll(),Ht.fog&&j.enable(0),Ht.useFog&&j.enable(1),Ht.flatShading&&j.enable(2),Ht.logarithmicDepthBuffer&&j.enable(3),Ht.skinning&&j.enable(4),Ht.morphTargets&&j.enable(5),Ht.morphNormals&&j.enable(6),Ht.morphColors&&j.enable(7),Ht.premultipliedAlpha&&j.enable(8),Ht.shadowMapEnabled&&j.enable(9),Ht.physicallyCorrectLights&&j.enable(10),Ht.doubleSided&&j.enable(11),Ht.flipSided&&j.enable(12),Ht.useDepthPacking&&j.enable(13),Ht.dithering&&j.enable(14),Ht.specularIntensityMap&&j.enable(15),Ht.specularColorMap&&j.enable(16),Ht.transmission&&j.enable(17),Ht.transmissionMap&&j.enable(18),Ht.thicknessMap&&j.enable(19),Ht.sheen&&j.enable(20),Ht.sheenColorMap&&j.enable(21),Ht.sheenRoughnessMap&&j.enable(22),Ht.decodeVideoTexture&&j.enable(23),Ht.opaque&&j.enable(24),Nt.push(j.mask)}function Tt(Nt){let Ht=yt[Nt.type],dr;if(Ht){let hs=Ao[Ht];dr=Xs.clone(hs.uniforms)}else dr=Nt.uniforms;return dr}function kt(Nt,Ht){let dr;for(let hs=0,us=_e.length;hs<us;hs++){let hn=_e[hs];if(hn.cacheKey===Ht){dr=hn,++dr.usedTimes;break}}return dr===void 0&&(dr=new CG(e,Ht,Nt,g),_e.push(dr)),dr}function It(Nt){if(--Nt.usedTimes===0){let Ht=_e.indexOf(Nt);_e[Ht]=_e[_e.length-1],_e.pop(),Nt.destroy()}}function Lt(Nt){$.remove(Nt)}function Ft(){$.dispose()}return{getParameters:wt,getProgramCacheKey:Ct,getUniforms:Tt,acquireProgram:kt,releaseProgram:It,releaseShaderCache:Lt,programs:_e,dispose:Ft}}function OG(){let e=new WeakMap;function o(g){let b=e.get(g);return b===void 0&&(b={},e.set(g,b)),b}function a(g){e.delete(g)}function c(g,b,j){e.get(g)[b]=j}function d(){e=new WeakMap}return{get:o,remove:a,update:c,dispose:d}}function IG(e,o){return e.groupOrder!==o.groupOrder?e.groupOrder-o.groupOrder:e.renderOrder!==o.renderOrder?e.renderOrder-o.renderOrder:e.material.id!==o.material.id?e.material.id-o.material.id:e.z!==o.z?e.z-o.z:e.id-o.id}function pM(e,o){return e.groupOrder!==o.groupOrder?e.groupOrder-o.groupOrder:e.renderOrder!==o.renderOrder?e.renderOrder-o.renderOrder:e.z!==o.z?o.z-e.z:e.id-o.id}function mM(){let e=[],o=0,a=[],c=[],d=[];function g(){o=0,a.length=0,c.length=0,d.length=0}function b(rt,ut,gt,yt,wt,Ct){let Pt=e[o];return Pt===void 0?(Pt={id:rt.id,object:rt,geometry:ut,material:gt,groupOrder:yt,renderOrder:rt.renderOrder,z:wt,group:Ct},e[o]=Pt):(Pt.id=rt.id,Pt.object=rt,Pt.geometry=ut,Pt.material=gt,Pt.groupOrder=yt,Pt.renderOrder=rt.renderOrder,Pt.z=wt,Pt.group=Ct),o++,Pt}function j(rt,ut,gt,yt,wt,Ct){let Pt=b(rt,ut,gt,yt,wt,Ct);gt.transmission>0?c.push(Pt):gt.transparent===!0?d.push(Pt):a.push(Pt)}function $(rt,ut,gt,yt,wt,Ct){let Pt=b(rt,ut,gt,yt,wt,Ct);gt.transmission>0?c.unshift(Pt):gt.transparent===!0?d.unshift(Pt):a.unshift(Pt)}function _e(rt,ut){a.length>1&&a.sort(rt||IG),c.length>1&&c.sort(ut||pM),d.length>1&&d.sort(ut||pM)}function st(){for(let rt=o,ut=e.length;rt<ut;rt++){let gt=e[rt];if(gt.id===null)break;gt.id=null,gt.object=null,gt.geometry=null,gt.material=null,gt.group=null}}return{opaque:a,transmissive:c,transparent:d,init:g,push:j,unshift:$,finish:st,sort:_e}}function RG(){let e=new WeakMap;function o(c,d){let g=e.get(c),b;return g===void 0?(b=new mM,e.set(c,[b])):d>=g.length?(b=new mM,g.push(b)):b=g[d],b}function a(){e=new WeakMap}return{get:o,dispose:a}}function LG(){let e={};return{get:function(o){if(e[o.id]!==void 0)return e[o.id];let a;switch(o.type){case"DirectionalLight":a={direction:new _,color:new We};break;case"SpotLight":a={position:new _,direction:new _,color:new We,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new _,color:new We,distance:0,decay:0};break;case"HemisphereLight":a={direction:new _,skyColor:new We,groundColor:new We};break;case"RectAreaLight":a={color:new We,position:new _,halfWidth:new _,halfHeight:new _};break}return e[o.id]=a,a}}}function BG(){let e={};return{get:function(o){if(e[o.id]!==void 0)return e[o.id];let a;switch(o.type){case"DirectionalLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$2};break;case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$2};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$2,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[o.id]=a,a}}}var NG=0;function FG(e,o){return(o.castShadow?2:0)-(e.castShadow?2:0)+(o.map?1:0)-(e.map?1:0)}function kG(e,o){let a=new LG,c=BG(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let st=0;st<9;st++)d.probe.push(new _);let g=new _,b=new ce$1,j=new ce$1;function $(st,rt){let ut=0,gt=0,yt=0;for(let hs=0;hs<9;hs++)d.probe[hs].set(0,0,0);let wt=0,Ct=0,Pt=0,At=0,Tt=0,kt=0,It=0,Lt=0,Ft=0,Nt=0;st.sort(FG);let Ht=rt!==!0?Math.PI:1;for(let hs=0,us=st.length;hs<us;hs++){let hn=st[hs],un=hn.color,bo=hn.intensity,_s=hn.distance,gn=hn.shadow&&hn.shadow.map?hn.shadow.map.texture:null;if(hn.isAmbientLight)ut+=un.r*bo*Ht,gt+=un.g*bo*Ht,yt+=un.b*bo*Ht;else if(hn.isLightProbe)for(let Gr=0;Gr<9;Gr++)d.probe[Gr].addScaledVector(hn.sh.coefficients[Gr],bo);else if(hn.isDirectionalLight){let Gr=a.get(hn);if(Gr.color.copy(hn.color).multiplyScalar(hn.intensity*Ht),hn.castShadow){let ds=hn.shadow,Zn=c.get(hn);Zn.shadowBias=ds.bias,Zn.shadowNormalBias=ds.normalBias,Zn.shadowRadius=ds.radius,Zn.shadowMapSize=ds.mapSize,d.directionalShadow[wt]=Zn,d.directionalShadowMap[wt]=gn,d.directionalShadowMatrix[wt]=hn.shadow.matrix,kt++}d.directional[wt]=Gr,wt++}else if(hn.isSpotLight){let Gr=a.get(hn);Gr.position.setFromMatrixPosition(hn.matrixWorld),Gr.color.copy(un).multiplyScalar(bo*Ht),Gr.distance=_s,Gr.coneCos=Math.cos(hn.angle),Gr.penumbraCos=Math.cos(hn.angle*(1-hn.penumbra)),Gr.decay=hn.decay,d.spot[Pt]=Gr;let ds=hn.shadow;if(hn.map&&(d.spotLightMap[Ft]=hn.map,Ft++,ds.updateMatrices(hn),hn.castShadow&&Nt++),d.spotLightMatrix[Pt]=ds.matrix,hn.castShadow){let Zn=c.get(hn);Zn.shadowBias=ds.bias,Zn.shadowNormalBias=ds.normalBias,Zn.shadowRadius=ds.radius,Zn.shadowMapSize=ds.mapSize,d.spotShadow[Pt]=Zn,d.spotShadowMap[Pt]=gn,Lt++}Pt++}else if(hn.isRectAreaLight){let Gr=a.get(hn);Gr.color.copy(un).multiplyScalar(bo),Gr.halfWidth.set(hn.width*.5,0,0),Gr.halfHeight.set(0,hn.height*.5,0),d.rectArea[At]=Gr,At++}else if(hn.isPointLight){let Gr=a.get(hn);if(Gr.color.copy(hn.color).multiplyScalar(hn.intensity*Ht),Gr.distance=hn.distance,Gr.decay=hn.decay,hn.castShadow){let ds=hn.shadow,Zn=c.get(hn);Zn.shadowBias=ds.bias,Zn.shadowNormalBias=ds.normalBias,Zn.shadowRadius=ds.radius,Zn.shadowMapSize=ds.mapSize,Zn.shadowCameraNear=ds.camera.near,Zn.shadowCameraFar=ds.camera.far,d.pointShadow[Ct]=Zn,d.pointShadowMap[Ct]=gn,d.pointShadowMatrix[Ct]=hn.shadow.matrix,It++}d.point[Ct]=Gr,Ct++}else if(hn.isHemisphereLight){let Gr=a.get(hn);Gr.skyColor.copy(hn.color).multiplyScalar(bo*Ht),Gr.groundColor.copy(hn.groundColor).multiplyScalar(bo*Ht),d.hemi[Tt]=Gr,Tt++}}At>0&&(o.isWebGL2||e.has("OES_texture_float_linear")===!0?(d.rectAreaLTC1=De$1.LTC_FLOAT_1,d.rectAreaLTC2=De$1.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(d.rectAreaLTC1=De$1.LTC_HALF_1,d.rectAreaLTC2=De$1.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=ut,d.ambient[1]=gt,d.ambient[2]=yt;let dr=d.hash;(dr.directionalLength!==wt||dr.pointLength!==Ct||dr.spotLength!==Pt||dr.rectAreaLength!==At||dr.hemiLength!==Tt||dr.numDirectionalShadows!==kt||dr.numPointShadows!==It||dr.numSpotShadows!==Lt||dr.numSpotMaps!==Ft)&&(d.directional.length=wt,d.spot.length=Pt,d.rectArea.length=At,d.point.length=Ct,d.hemi.length=Tt,d.directionalShadow.length=kt,d.directionalShadowMap.length=kt,d.pointShadow.length=It,d.pointShadowMap.length=It,d.spotShadow.length=Lt,d.spotShadowMap.length=Lt,d.directionalShadowMatrix.length=kt,d.pointShadowMatrix.length=It,d.spotLightMatrix.length=Lt+Ft-Nt,d.spotLightMap.length=Ft,d.numSpotLightShadowsWithMaps=Nt,dr.directionalLength=wt,dr.pointLength=Ct,dr.spotLength=Pt,dr.rectAreaLength=At,dr.hemiLength=Tt,dr.numDirectionalShadows=kt,dr.numPointShadows=It,dr.numSpotShadows=Lt,dr.numSpotMaps=Ft,d.version=NG++)}function _e(st,rt){let ut=0,gt=0,yt=0,wt=0,Ct=0,Pt=rt.matrixWorldInverse;for(let At=0,Tt=st.length;At<Tt;At++){let kt=st[At];if(kt.isDirectionalLight){let It=d.directional[ut];It.direction.setFromMatrixPosition(kt.matrixWorld),g.setFromMatrixPosition(kt.target.matrixWorld),It.direction.sub(g),It.direction.transformDirection(Pt),ut++}else if(kt.isSpotLight){let It=d.spot[yt];It.position.setFromMatrixPosition(kt.matrixWorld),It.position.applyMatrix4(Pt),It.direction.setFromMatrixPosition(kt.matrixWorld),g.setFromMatrixPosition(kt.target.matrixWorld),It.direction.sub(g),It.direction.transformDirection(Pt),yt++}else if(kt.isRectAreaLight){let It=d.rectArea[wt];It.position.setFromMatrixPosition(kt.matrixWorld),It.position.applyMatrix4(Pt),j.identity(),b.copy(kt.matrixWorld),b.premultiply(Pt),j.extractRotation(b),It.halfWidth.set(kt.width*.5,0,0),It.halfHeight.set(0,kt.height*.5,0),It.halfWidth.applyMatrix4(j),It.halfHeight.applyMatrix4(j),wt++}else if(kt.isPointLight){let It=d.point[gt];It.position.setFromMatrixPosition(kt.matrixWorld),It.position.applyMatrix4(Pt),gt++}else if(kt.isHemisphereLight){let It=d.hemi[Ct];It.direction.setFromMatrixPosition(kt.matrixWorld),It.direction.transformDirection(Pt),Ct++}}}return{setup:$,setupView:_e,state:d}}function gM(e,o){let a=new kG(e,o),c=[],d=[];function g(){c.length=0,d.length=0}function b(st){c.push(st)}function j(st){d.push(st)}function $(st){a.setup(c,st)}function _e(st){a.setupView(c,st)}return{init:g,state:{lightsArray:c,shadowsArray:d,lights:a},setupLights:$,setupLightsView:_e,pushLight:b,pushShadow:j}}function VG(e,o){let a=new WeakMap;function c(g,b=0){let j=a.get(g),$;return j===void 0?($=new gM(e,o),a.set(g,[$])):b>=j.length?($=new gM(e,o),j.push($)):$=j[b],$}function d(){a=new WeakMap}return{get:c,dispose:d}}var Mp=class extends Sc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ji,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},rw=class extends Sc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new _,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},zG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,UG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GG(e,o,a){let c=new Tp,d=new z$2,g=new z$2,b=new Ke,j=new Mp({depthPacking:Mw}),$=new rw,_e={},st=a.maxTextureSize,rt={[es]:yi,[yi]:es,[tn]:tn},ut=new lt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new z$2},radius:{value:4}},vertexShader:zG,fragmentShader:UG}),gt=ut.clone();gt.defines.HORIZONTAL_PASS=1;let yt=new Pe;yt.setAttribute("position",new Xe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let wt=new sr(yt,ut),Ct=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Gy,this.render=function(kt,It,Lt){if(Ct.enabled===!1||Ct.autoUpdate===!1&&Ct.needsUpdate===!1||kt.length===0)return;let Ft=e.getRenderTarget(),Nt=e.getActiveCubeFace(),Ht=e.getActiveMipmapLevel(),dr=e.state;dr.setBlending(er),dr.buffers.color.setClear(1,1,1,1),dr.buffers.depth.setTest(!0),dr.setScissorTest(!1);for(let hs=0,us=kt.length;hs<us;hs++){let hn=kt[hs],un=hn.shadow;if(un===void 0){console.warn("THREE.WebGLShadowMap:",hn,"has no shadow.");continue}if(un.autoUpdate===!1&&un.needsUpdate===!1)continue;d.copy(un.mapSize);let bo=un.getFrameExtents();if(d.multiply(bo),g.copy(un.mapSize),(d.x>st||d.y>st)&&(d.x>st&&(g.x=Math.floor(st/bo.x),d.x=g.x*bo.x,un.mapSize.x=g.x),d.y>st&&(g.y=Math.floor(st/bo.y),d.y=g.y*bo.y,un.mapSize.y=g.y)),un.map===null){let gn=this.type!==mp?{minFilter:Vt,magFilter:Vt}:{};un.map=new ft(d.x,d.y,gn),un.map.texture.name=hn.name+".shadowMap",un.camera.updateProjectionMatrix()}e.setRenderTarget(un.map),e.clear();let _s=un.getViewportCount();for(let gn=0;gn<_s;gn++){let Gr=un.getViewport(gn);b.set(g.x*Gr.x,g.y*Gr.y,g.x*Gr.z,g.y*Gr.w),dr.viewport(b),un.updateMatrices(hn,gn),c=un.getFrustum(),Tt(It,Lt,un.camera,hn,this.type)}un.isPointLightShadow!==!0&&this.type===mp&&Pt(un,Lt),un.needsUpdate=!1}Ct.needsUpdate=!1,e.setRenderTarget(Ft,Nt,Ht)};function Pt(kt,It){let Lt=o.update(wt);ut.defines.VSM_SAMPLES!==kt.blurSamples&&(ut.defines.VSM_SAMPLES=kt.blurSamples,gt.defines.VSM_SAMPLES=kt.blurSamples,ut.needsUpdate=!0,gt.needsUpdate=!0),kt.mapPass===null&&(kt.mapPass=new ft(d.x,d.y)),ut.uniforms.shadow_pass.value=kt.map.texture,ut.uniforms.resolution.value=kt.mapSize,ut.uniforms.radius.value=kt.radius,e.setRenderTarget(kt.mapPass),e.clear(),e.renderBufferDirect(It,null,Lt,ut,wt,null),gt.uniforms.shadow_pass.value=kt.mapPass.texture,gt.uniforms.resolution.value=kt.mapSize,gt.uniforms.radius.value=kt.radius,e.setRenderTarget(kt.map),e.clear(),e.renderBufferDirect(It,null,Lt,gt,wt,null)}function At(kt,It,Lt,Ft,Nt,Ht){let dr=null,hs=Lt.isPointLight===!0?kt.customDistanceMaterial:kt.customDepthMaterial;if(hs!==void 0)dr=hs;else if(dr=Lt.isPointLight===!0?$:j,e.localClippingEnabled&&It.clipShadows===!0&&Array.isArray(It.clippingPlanes)&&It.clippingPlanes.length!==0||It.displacementMap&&It.displacementScale!==0||It.alphaMap&&It.alphaTest>0||It.map&&It.alphaTest>0){let us=dr.uuid,hn=It.uuid,un=_e[us];un===void 0&&(un={},_e[us]=un);let bo=un[hn];bo===void 0&&(bo=dr.clone(),un[hn]=bo),dr=bo}return dr.visible=It.visible,dr.wireframe=It.wireframe,Ht===mp?dr.side=It.shadowSide!==null?It.shadowSide:It.side:dr.side=It.shadowSide!==null?It.shadowSide:rt[It.side],dr.alphaMap=It.alphaMap,dr.alphaTest=It.alphaTest,dr.map=It.map,dr.clipShadows=It.clipShadows,dr.clippingPlanes=It.clippingPlanes,dr.clipIntersection=It.clipIntersection,dr.displacementMap=It.displacementMap,dr.displacementScale=It.displacementScale,dr.displacementBias=It.displacementBias,dr.wireframeLinewidth=It.wireframeLinewidth,dr.linewidth=It.linewidth,Lt.isPointLight===!0&&dr.isMeshDistanceMaterial===!0&&(dr.referencePosition.setFromMatrixPosition(Lt.matrixWorld),dr.nearDistance=Ft,dr.farDistance=Nt),dr}function Tt(kt,It,Lt,Ft,Nt){if(kt.visible===!1)return;if(kt.layers.test(It.layers)&&(kt.isMesh||kt.isLine||kt.isPoints)&&(kt.castShadow||kt.receiveShadow&&Nt===mp)&&(!kt.frustumCulled||c.intersectsObject(kt))){kt.modelViewMatrix.multiplyMatrices(Lt.matrixWorldInverse,kt.matrixWorld);let dr=o.update(kt),hs=kt.material;if(Array.isArray(hs)){let us=dr.groups;for(let hn=0,un=us.length;hn<un;hn++){let bo=us[hn],_s=hs[bo.materialIndex];if(_s&&_s.visible){let gn=At(kt,_s,Ft,Lt.near,Lt.far,Nt);e.renderBufferDirect(Lt,null,dr,gn,kt,bo)}}}else if(hs.visible){let us=At(kt,hs,Ft,Lt.near,Lt.far,Nt);e.renderBufferDirect(Lt,null,dr,us,kt,null)}}let Ht=kt.children;for(let dr=0,hs=Ht.length;dr<hs;dr++)Tt(Ht[dr],It,Lt,Ft,Nt)}}function jG(e,o,a){let c=a.isWebGL2;function d(){let X1=!1,rS=new Ke,SA=null,IO=new Ke(0,0,0,0);return{setMask:function(IL){SA!==IL&&!X1&&(e.colorMask(IL,IL,IL,IL),SA=IL)},setLocked:function(IL){X1=IL},setClear:function(IL,WL,n$,a$,d$){d$===!0&&(IL*=a$,WL*=a$,n$*=a$),rS.set(IL,WL,n$,a$),IO.equals(rS)===!1&&(e.clearColor(IL,WL,n$,a$),IO.copy(rS))},reset:function(){X1=!1,SA=null,IO.set(-1,0,0,0)}}}function g(){let X1=!1,rS=null,SA=null,IO=null;return{setTest:function(IL){IL?l1(2929):B0(2929)},setMask:function(IL){rS!==IL&&!X1&&(e.depthMask(IL),rS=IL)},setFunc:function(IL){if(SA!==IL){switch(IL){case bF:e.depthFunc(512);break;case SF:e.depthFunc(519);break;case wF:e.depthFunc(513);break;case US:e.depthFunc(515);break;case AF:e.depthFunc(514);break;case _F:e.depthFunc(518);break;case EF:e.depthFunc(516);break;case TF:e.depthFunc(517);break;default:e.depthFunc(515)}SA=IL}},setLocked:function(IL){X1=IL},setClear:function(IL){IO!==IL&&(e.clearDepth(IL),IO=IL)},reset:function(){X1=!1,rS=null,SA=null,IO=null}}}function b(){let X1=!1,rS=null,SA=null,IO=null,IL=null,WL=null,n$=null,a$=null,d$=null;return{setTest:function(i$){X1||(i$?l1(2960):B0(2960))},setMask:function(i$){rS!==i$&&!X1&&(e.stencilMask(i$),rS=i$)},setFunc:function(i$,u$,l$){(SA!==i$||IO!==u$||IL!==l$)&&(e.stencilFunc(i$,u$,l$),SA=i$,IO=u$,IL=l$)},setOp:function(i$,u$,l$){(WL!==i$||n$!==u$||a$!==l$)&&(e.stencilOp(i$,u$,l$),WL=i$,n$=u$,a$=l$)},setLocked:function(i$){X1=i$},setClear:function(i$){d$!==i$&&(e.clearStencil(i$),d$=i$)},reset:function(){X1=!1,rS=null,SA=null,IO=null,IL=null,WL=null,n$=null,a$=null,d$=null}}}let j=new d,$=new g,_e=new b,st=new WeakMap,rt=new WeakMap,ut={},gt={},yt=new WeakMap,wt=[],Ct=null,Pt=!1,At=null,Tt=null,kt=null,It=null,Lt=null,Ft=null,Nt=null,Ht=!1,dr=null,hs=null,us=null,hn=null,un=null,bo=e.getParameter(35661),_s=!1,gn=0,Gr=e.getParameter(7938);Gr.indexOf("WebGL")!==-1?(gn=parseFloat(/^WebGL (\d)/.exec(Gr)[1]),_s=gn>=1):Gr.indexOf("OpenGL ES")!==-1&&(gn=parseFloat(/^OpenGL ES (\d)/.exec(Gr)[1]),_s=gn>=2);let ds=null,Zn={},Nn=e.getParameter(3088),Qn=e.getParameter(2978),bu=new Ke().fromArray(Nn),ou=new Ke().fromArray(Qn);function g0(X1,rS,SA){let IO=new Uint8Array(4),IL=e.createTexture();e.bindTexture(X1,IL),e.texParameteri(X1,10241,9728),e.texParameteri(X1,10240,9728);for(let WL=0;WL<SA;WL++)e.texImage2D(rS+WL,0,6408,1,1,0,6408,5121,IO);return IL}let Su={};Su[3553]=g0(3553,3553,1),Su[34067]=g0(34067,34069,6),j.setClear(0,0,0,1),$.setClear(1),_e.setClear(0),l1(2929),$.setFunc(US),pO(!1),aR(lT),l1(2884),iS(er);function l1(X1){ut[X1]!==!0&&(e.enable(X1),ut[X1]=!0)}function B0(X1){ut[X1]!==!1&&(e.disable(X1),ut[X1]=!1)}function a1(X1,rS){return gt[X1]!==rS?(e.bindFramebuffer(X1,rS),gt[X1]=rS,c&&(X1===36009&&(gt[36160]=rS),X1===36160&&(gt[36009]=rS)),!0):!1}function q1(X1,rS){let SA=wt,IO=!1;if(X1)if(SA=yt.get(rS),SA===void 0&&(SA=[],yt.set(rS,SA)),X1.isWebGLMultipleRenderTargets){let IL=X1.texture;if(SA.length!==IL.length||SA[0]!==36064){for(let WL=0,n$=IL.length;WL<n$;WL++)SA[WL]=36064+WL;SA.length=IL.length,IO=!0}}else SA[0]!==36064&&(SA[0]=36064,IO=!0);else SA[0]!==1029&&(SA[0]=1029,IO=!0);IO&&(a.isWebGL2?e.drawBuffers(SA):o.get("WEBGL_draw_buffers").drawBuffersWEBGL(SA))}function ox(X1){return Ct!==X1?(e.useProgram(X1),Ct=X1,!0):!1}let U_={[Fu]:32774,[cF]:32778,[uF]:32779};if(c)U_[dT]=32775,U_[fT]=32776;else{let X1=o.get("EXT_blend_minmax");X1!==null&&(U_[dT]=X1.MIN_EXT,U_[fT]=X1.MAX_EXT)}let tS={[hF]:0,[dF]:1,[fF]:768,[zM]:770,[xF]:776,[yF]:774,[mF]:772,[pF]:769,[UM]:771,[vF]:775,[gF]:773};function iS(X1,rS,SA,IO,IL,WL,n$,a$){if(X1===er){Pt===!0&&(B0(3042),Pt=!1);return}if(Pt===!1&&(l1(3042),Pt=!0),X1!==lF){if(X1!==At||a$!==Ht){if((Tt!==Fu||Lt!==Fu)&&(e.blendEquation(32774),Tt=Fu,Lt=Fu),a$)switch(X1){case sl:e.blendFuncSeparate(1,771,1,771);break;case cT:e.blendFunc(1,1);break;case uT:e.blendFuncSeparate(0,769,0,1);break;case hT:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",X1);break}else switch(X1){case sl:e.blendFuncSeparate(770,771,1,771);break;case cT:e.blendFunc(770,1);break;case uT:e.blendFuncSeparate(0,769,0,1);break;case hT:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",X1);break}kt=null,It=null,Ft=null,Nt=null,At=X1,Ht=a$}return}IL=IL||rS,WL=WL||SA,n$=n$||IO,(rS!==Tt||IL!==Lt)&&(e.blendEquationSeparate(U_[rS],U_[IL]),Tt=rS,Lt=IL),(SA!==kt||IO!==It||WL!==Ft||n$!==Nt)&&(e.blendFuncSeparate(tS[SA],tS[IO],tS[WL],tS[n$]),kt=SA,It=IO,Ft=WL,Nt=n$),At=X1,Ht=!1}function wA(X1,rS){X1.side===tn?B0(2884):l1(2884);let SA=X1.side===yi;rS&&(SA=!SA),pO(SA),X1.blending===sl&&X1.transparent===!1?iS(er):iS(X1.blending,X1.blendEquation,X1.blendSrc,X1.blendDst,X1.blendEquationAlpha,X1.blendSrcAlpha,X1.blendDstAlpha,X1.premultipliedAlpha),$.setFunc(X1.depthFunc),$.setTest(X1.depthTest),$.setMask(X1.depthWrite),j.setMask(X1.colorWrite);let IO=X1.stencilWrite;_e.setTest(IO),IO&&(_e.setMask(X1.stencilWriteMask),_e.setFunc(X1.stencilFunc,X1.stencilRef,X1.stencilFuncMask),_e.setOp(X1.stencilFail,X1.stencilZFail,X1.stencilZPass)),AA(X1.polygonOffset,X1.polygonOffsetFactor,X1.polygonOffsetUnits),X1.alphaToCoverage===!0?l1(32926):B0(32926)}function pO(X1){dr!==X1&&(X1?e.frontFace(2304):e.frontFace(2305),dr=X1)}function aR(X1){X1!==sF?(l1(2884),X1!==hs&&(X1===lT?e.cullFace(1029):X1===oF?e.cullFace(1028):e.cullFace(1032))):B0(2884),hs=X1}function fD(X1){X1!==us&&(_s&&e.lineWidth(X1),us=X1)}function AA(X1,rS,SA){X1?(l1(32823),(hn!==rS||un!==SA)&&(e.polygonOffset(rS,SA),hn=rS,un=SA)):B0(32823)}function oI(X1){X1?l1(3089):B0(3089)}function mO(X1){X1===void 0&&(X1=33984+bo-1),ds!==X1&&(e.activeTexture(X1),ds=X1)}function sp(X1,rS,SA){SA===void 0&&(ds===null?SA=33984+bo-1:SA=ds);let IO=Zn[SA];IO===void 0&&(IO={type:void 0,texture:void 0},Zn[SA]=IO),(IO.type!==X1||IO.texture!==rS)&&(ds!==SA&&(e.activeTexture(SA),ds=SA),e.bindTexture(X1,rS||Su[X1]),IO.type=X1,IO.texture=rS)}function xu(){let X1=Zn[ds];X1!==void 0&&X1.type!==void 0&&(e.bindTexture(X1.type,null),X1.type=void 0,X1.texture=void 0)}function ux(){try{e.compressedTexImage2D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function tA(){try{e.compressedTexImage3D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function au(){try{e.texSubImage2D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function C3(){try{e.texSubImage3D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function X3(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function sR(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function N_(){try{e.texStorage2D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function bL(){try{e.texStorage3D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function MO(){try{e.texImage2D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function PL(){try{e.texImage3D.apply(e,arguments)}catch(X1){console.error("THREE.WebGLState:",X1)}}function jL(X1){bu.equals(X1)===!1&&(e.scissor(X1.x,X1.y,X1.z,X1.w),bu.copy(X1))}function TL(X1){ou.equals(X1)===!1&&(e.viewport(X1.x,X1.y,X1.z,X1.w),ou.copy(X1))}function OL(X1,rS){let SA=rt.get(rS);SA===void 0&&(SA=new WeakMap,rt.set(rS,SA));let IO=SA.get(X1);IO===void 0&&(IO=e.getUniformBlockIndex(rS,X1.name),SA.set(X1,IO))}function t$(X1,rS){let SA=rt.get(rS).get(X1);st.get(rS)!==SA&&(e.uniformBlockBinding(rS,SA,X1.__bindingPointIndex),st.set(rS,SA))}function r$(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),c===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),ut={},ds=null,Zn={},gt={},yt=new WeakMap,wt=[],Ct=null,Pt=!1,At=null,Tt=null,kt=null,It=null,Lt=null,Ft=null,Nt=null,Ht=!1,dr=null,hs=null,us=null,hn=null,un=null,bu.set(0,0,e.canvas.width,e.canvas.height),ou.set(0,0,e.canvas.width,e.canvas.height),j.reset(),$.reset(),_e.reset()}return{buffers:{color:j,depth:$,stencil:_e},enable:l1,disable:B0,bindFramebuffer:a1,drawBuffers:q1,useProgram:ox,setBlending:iS,setMaterial:wA,setFlipSided:pO,setCullFace:aR,setLineWidth:fD,setPolygonOffset:AA,setScissorTest:oI,activeTexture:mO,bindTexture:sp,unbindTexture:xu,compressedTexImage2D:ux,compressedTexImage3D:tA,texImage2D:MO,texImage3D:PL,updateUBOMapping:OL,uniformBlockBinding:t$,texStorage2D:N_,texStorage3D:bL,texSubImage2D:au,texSubImage3D:C3,compressedTexSubImage2D:X3,compressedTexSubImage3D:sR,scissor:jL,viewport:TL,reset:r$}}function HG(e,o,a,c,d,g,b){let j=d.isWebGL2,$=d.maxTextures,_e=d.maxCubemapSize,st=d.maxTextureSize,rt=d.maxSamples,ut=o.has("WEBGL_multisampled_render_to_texture")?o.get("WEBGL_multisampled_render_to_texture"):null,gt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),yt=new WeakMap,wt,Ct=new WeakMap,Pt=!1;try{Pt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function At(sp,xu){return Pt?new OffscreenCanvas(sp,xu):_p("canvas")}function Tt(sp,xu,ux,tA){let au=1;if((sp.width>tA||sp.height>tA)&&(au=tA/Math.max(sp.width,sp.height)),au<1||xu===!0)if(typeof HTMLImageElement<"u"&&sp instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&sp instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&sp instanceof ImageBitmap){let C3=xu?gy:Math.floor,X3=C3(au*sp.width),sR=C3(au*sp.height);wt===void 0&&(wt=At(X3,sR));let N_=ux?At(X3,sR):wt;return N_.width=X3,N_.height=sR,N_.getContext("2d").drawImage(sp,0,0,X3,sR),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+sp.width+"x"+sp.height+") to ("+X3+"x"+sR+")."),N_}else return"data"in sp&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+sp.width+"x"+sp.height+")."),sp;return sp}function kt(sp){return YS(sp.width)&&YS(sp.height)}function It(sp){return j?!1:sp.wrapS!==Kt||sp.wrapT!==Kt||sp.minFilter!==Vt&&sp.minFilter!==tt}function Lt(sp,xu){return sp.generateMipmaps&&xu&&sp.minFilter!==Vt&&sp.minFilter!==tt}function Ft(sp){e.generateMipmap(sp)}function Nt(sp,xu,ux,tA,au=!1){if(j===!1)return xu;if(sp!==null){if(e[sp]!==void 0)return e[sp];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+sp+"'")}let C3=xu;return xu===6403&&(ux===5126&&(C3=33326),ux===5131&&(C3=33325),ux===5121&&(C3=33321)),xu===33319&&(ux===5126&&(C3=33328),ux===5131&&(C3=33327),ux===5121&&(C3=33323)),xu===6408&&(ux===5126&&(C3=34836),ux===5131&&(C3=34842),ux===5121&&(C3=tA===at&&au===!1?35907:32856),ux===32819&&(C3=32854),ux===32820&&(C3=32855)),(C3===33325||C3===33326||C3===33327||C3===33328||C3===34842||C3===34836)&&o.get("EXT_color_buffer_float"),C3}function Ht(sp,xu,ux){return Lt(sp,ux)===!0||sp.isFramebufferTexture&&sp.minFilter!==Vt&&sp.minFilter!==tt?Math.log2(Math.max(xu.width,xu.height))+1:sp.mipmaps!==void 0&&sp.mipmaps.length>0?sp.mipmaps.length:sp.isCompressedTexture&&Array.isArray(sp.image)?xu.mipmaps.length:1}function dr(sp){return sp===Vt||sp===pT||sp===nS?9728:9729}function hs(sp){let xu=sp.target;xu.removeEventListener("dispose",hs),hn(xu),xu.isVideoTexture&&yt.delete(xu)}function us(sp){let xu=sp.target;xu.removeEventListener("dispose",us),bo(xu)}function hn(sp){let xu=c.get(sp);if(xu.__webglInit===void 0)return;let ux=sp.source,tA=Ct.get(ux);if(tA){let au=tA[xu.__cacheKey];au.usedTimes--,au.usedTimes===0&&un(sp),Object.keys(tA).length===0&&Ct.delete(ux)}c.remove(sp)}function un(sp){let xu=c.get(sp);e.deleteTexture(xu.__webglTexture);let ux=sp.source,tA=Ct.get(ux);delete tA[xu.__cacheKey],b.memory.textures--}function bo(sp){let xu=sp.texture,ux=c.get(sp),tA=c.get(xu);if(tA.__webglTexture!==void 0&&(e.deleteTexture(tA.__webglTexture),b.memory.textures--),sp.depthTexture&&sp.depthTexture.dispose(),sp.isWebGLCubeRenderTarget)for(let au=0;au<6;au++)e.deleteFramebuffer(ux.__webglFramebuffer[au]),ux.__webglDepthbuffer&&e.deleteRenderbuffer(ux.__webglDepthbuffer[au]);else{if(e.deleteFramebuffer(ux.__webglFramebuffer),ux.__webglDepthbuffer&&e.deleteRenderbuffer(ux.__webglDepthbuffer),ux.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ux.__webglMultisampledFramebuffer),ux.__webglColorRenderbuffer)for(let au=0;au<ux.__webglColorRenderbuffer.length;au++)ux.__webglColorRenderbuffer[au]&&e.deleteRenderbuffer(ux.__webglColorRenderbuffer[au]);ux.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ux.__webglDepthRenderbuffer)}if(sp.isWebGLMultipleRenderTargets)for(let au=0,C3=xu.length;au<C3;au++){let X3=c.get(xu[au]);X3.__webglTexture&&(e.deleteTexture(X3.__webglTexture),b.memory.textures--),c.remove(xu[au])}c.remove(xu),c.remove(sp)}let _s=0;function gn(){_s=0}function Gr(){let sp=_s;return sp>=$&&console.warn("THREE.WebGLTextures: Trying to use "+sp+" texture units while this GPU supports only "+$),_s+=1,sp}function ds(sp){let xu=[];return xu.push(sp.wrapS),xu.push(sp.wrapT),xu.push(sp.wrapR||0),xu.push(sp.magFilter),xu.push(sp.minFilter),xu.push(sp.anisotropy),xu.push(sp.internalFormat),xu.push(sp.format),xu.push(sp.type),xu.push(sp.generateMipmaps),xu.push(sp.premultiplyAlpha),xu.push(sp.flipY),xu.push(sp.unpackAlignment),xu.push(sp.encoding),xu.join()}function Zn(sp,xu){let ux=c.get(sp);if(sp.isVideoTexture&&oI(sp),sp.isRenderTargetTexture===!1&&sp.version>0&&ux.__version!==sp.version){let tA=sp.image;if(tA===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(tA.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{B0(ux,sp,xu);return}}a.bindTexture(3553,ux.__webglTexture,33984+xu)}function Nn(sp,xu){let ux=c.get(sp);if(sp.version>0&&ux.__version!==sp.version){B0(ux,sp,xu);return}a.bindTexture(35866,ux.__webglTexture,33984+xu)}function Qn(sp,xu){let ux=c.get(sp);if(sp.version>0&&ux.__version!==sp.version){B0(ux,sp,xu);return}a.bindTexture(32879,ux.__webglTexture,33984+xu)}function bu(sp,xu){let ux=c.get(sp);if(sp.version>0&&ux.__version!==sp.version){a1(ux,sp,xu);return}a.bindTexture(34067,ux.__webglTexture,33984+xu)}let ou={[Ws]:10497,[Kt]:33071,[HS]:33648},g0={[Vt]:9728,[pT]:9984,[nS]:9986,[tt]:9729,[LF]:9985,[bc]:9987};function Su(sp,xu,ux){if(ux?(e.texParameteri(sp,10242,ou[xu.wrapS]),e.texParameteri(sp,10243,ou[xu.wrapT]),(sp===32879||sp===35866)&&e.texParameteri(sp,32882,ou[xu.wrapR]),e.texParameteri(sp,10240,g0[xu.magFilter]),e.texParameteri(sp,10241,g0[xu.minFilter])):(e.texParameteri(sp,10242,33071),e.texParameteri(sp,10243,33071),(sp===32879||sp===35866)&&e.texParameteri(sp,32882,33071),(xu.wrapS!==Kt||xu.wrapT!==Kt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(sp,10240,dr(xu.magFilter)),e.texParameteri(sp,10241,dr(xu.minFilter)),xu.minFilter!==Vt&&xu.minFilter!==tt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.has("EXT_texture_filter_anisotropic")===!0){let tA=o.get("EXT_texture_filter_anisotropic");if(xu.magFilter===Vt||xu.minFilter!==nS&&xu.minFilter!==bc||xu.type===Sr$1&&o.has("OES_texture_float_linear")===!1||j===!1&&xu.type===va&&o.has("OES_texture_half_float_linear")===!1)return;(xu.anisotropy>1||c.get(xu).__currentAnisotropy)&&(e.texParameterf(sp,tA.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(xu.anisotropy,d.getMaxAnisotropy())),c.get(xu).__currentAnisotropy=xu.anisotropy)}}function l1(sp,xu){let ux=!1;sp.__webglInit===void 0&&(sp.__webglInit=!0,xu.addEventListener("dispose",hs));let tA=xu.source,au=Ct.get(tA);au===void 0&&(au={},Ct.set(tA,au));let C3=ds(xu);if(C3!==sp.__cacheKey){au[C3]===void 0&&(au[C3]={texture:e.createTexture(),usedTimes:0},b.memory.textures++,ux=!0),au[C3].usedTimes++;let X3=au[sp.__cacheKey];X3!==void 0&&(au[sp.__cacheKey].usedTimes--,X3.usedTimes===0&&un(xu)),sp.__cacheKey=C3,sp.__webglTexture=au[C3].texture}return ux}function B0(sp,xu,ux){let tA=3553;(xu.isDataArrayTexture||xu.isCompressedArrayTexture)&&(tA=35866),xu.isData3DTexture&&(tA=32879);let au=l1(sp,xu),C3=xu.source;a.bindTexture(tA,sp.__webglTexture,33984+ux);let X3=c.get(C3);if(C3.version!==X3.__version||au===!0){a.activeTexture(33984+ux),e.pixelStorei(37440,xu.flipY),e.pixelStorei(37441,xu.premultiplyAlpha),e.pixelStorei(3317,xu.unpackAlignment),e.pixelStorei(37443,0);let sR=It(xu)&&kt(xu.image)===!1,N_=Tt(xu.image,sR,!1,st);N_=mO(xu,N_);let bL=kt(N_)||j,MO=g.convert(xu.format,xu.encoding),PL=g.convert(xu.type),jL=Nt(xu.internalFormat,MO,PL,xu.encoding,xu.isVideoTexture);Su(tA,xu,bL);let TL,OL=xu.mipmaps,t$=j&&xu.isVideoTexture!==!0,r$=X3.__version===void 0||au===!0,X1=Ht(xu,N_,bL);if(xu.isDepthTexture)jL=6402,j?xu.type===Sr$1?jL=36012:xu.type===js?jL=33190:xu.type===ol?jL=35056:jL=33189:xu.type===Sr$1&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),xu.format===vc&&jL===6402&&xu.type!==HM&&xu.type!==js&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),xu.type=js,PL=g.convert(xu.type)),xu.format===cl&&jL===6402&&(jL=34041,xu.type!==ol&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),xu.type=ol,PL=g.convert(xu.type))),r$&&(t$?a.texStorage2D(3553,1,jL,N_.width,N_.height):a.texImage2D(3553,0,jL,N_.width,N_.height,0,MO,PL,null));else if(xu.isDataTexture)if(OL.length>0&&bL){t$&&r$&&a.texStorage2D(3553,X1,jL,OL[0].width,OL[0].height);for(let rS=0,SA=OL.length;rS<SA;rS++)TL=OL[rS],t$?a.texSubImage2D(3553,rS,0,0,TL.width,TL.height,MO,PL,TL.data):a.texImage2D(3553,rS,jL,TL.width,TL.height,0,MO,PL,TL.data);xu.generateMipmaps=!1}else t$?(r$&&a.texStorage2D(3553,X1,jL,N_.width,N_.height),a.texSubImage2D(3553,0,0,0,N_.width,N_.height,MO,PL,N_.data)):a.texImage2D(3553,0,jL,N_.width,N_.height,0,MO,PL,N_.data);else if(xu.isCompressedTexture)if(xu.isCompressedArrayTexture){t$&&r$&&a.texStorage3D(35866,X1,jL,OL[0].width,OL[0].height,N_.depth);for(let rS=0,SA=OL.length;rS<SA;rS++)TL=OL[rS],xu.format!==Qr?MO!==null?t$?a.compressedTexSubImage3D(35866,rS,0,0,0,TL.width,TL.height,N_.depth,MO,TL.data,0,0):a.compressedTexImage3D(35866,rS,jL,TL.width,TL.height,N_.depth,0,TL.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t$?a.texSubImage3D(35866,rS,0,0,0,TL.width,TL.height,N_.depth,MO,PL,TL.data):a.texImage3D(35866,rS,jL,TL.width,TL.height,N_.depth,0,MO,PL,TL.data)}else{t$&&r$&&a.texStorage2D(3553,X1,jL,OL[0].width,OL[0].height);for(let rS=0,SA=OL.length;rS<SA;rS++)TL=OL[rS],xu.format!==Qr?MO!==null?t$?a.compressedTexSubImage2D(3553,rS,0,0,TL.width,TL.height,MO,TL.data):a.compressedTexImage2D(3553,rS,jL,TL.width,TL.height,0,TL.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t$?a.texSubImage2D(3553,rS,0,0,TL.width,TL.height,MO,PL,TL.data):a.texImage2D(3553,rS,jL,TL.width,TL.height,0,MO,PL,TL.data)}else if(xu.isDataArrayTexture)t$?(r$&&a.texStorage3D(35866,X1,jL,N_.width,N_.height,N_.depth),a.texSubImage3D(35866,0,0,0,0,N_.width,N_.height,N_.depth,MO,PL,N_.data)):a.texImage3D(35866,0,jL,N_.width,N_.height,N_.depth,0,MO,PL,N_.data);else if(xu.isData3DTexture)t$?(r$&&a.texStorage3D(32879,X1,jL,N_.width,N_.height,N_.depth),a.texSubImage3D(32879,0,0,0,0,N_.width,N_.height,N_.depth,MO,PL,N_.data)):a.texImage3D(32879,0,jL,N_.width,N_.height,N_.depth,0,MO,PL,N_.data);else if(xu.isFramebufferTexture){if(r$)if(t$)a.texStorage2D(3553,X1,jL,N_.width,N_.height);else{let rS=N_.width,SA=N_.height;for(let IO=0;IO<X1;IO++)a.texImage2D(3553,IO,jL,rS,SA,0,MO,PL,null),rS>>=1,SA>>=1}}else if(OL.length>0&&bL){t$&&r$&&a.texStorage2D(3553,X1,jL,OL[0].width,OL[0].height);for(let rS=0,SA=OL.length;rS<SA;rS++)TL=OL[rS],t$?a.texSubImage2D(3553,rS,0,0,MO,PL,TL):a.texImage2D(3553,rS,jL,MO,PL,TL);xu.generateMipmaps=!1}else t$?(r$&&a.texStorage2D(3553,X1,jL,N_.width,N_.height),a.texSubImage2D(3553,0,0,0,MO,PL,N_)):a.texImage2D(3553,0,jL,MO,PL,N_);Lt(xu,bL)&&Ft(tA),X3.__version=C3.version,xu.onUpdate&&xu.onUpdate(xu)}sp.__version=xu.version}function a1(sp,xu,ux){if(xu.image.length!==6)return;let tA=l1(sp,xu),au=xu.source;a.bindTexture(34067,sp.__webglTexture,33984+ux);let C3=c.get(au);if(au.version!==C3.__version||tA===!0){a.activeTexture(33984+ux),e.pixelStorei(37440,xu.flipY),e.pixelStorei(37441,xu.premultiplyAlpha),e.pixelStorei(3317,xu.unpackAlignment),e.pixelStorei(37443,0);let X3=xu.isCompressedTexture||xu.image[0].isCompressedTexture,sR=xu.image[0]&&xu.image[0].isDataTexture,N_=[];for(let rS=0;rS<6;rS++)!X3&&!sR?N_[rS]=Tt(xu.image[rS],!1,!0,_e):N_[rS]=sR?xu.image[rS].image:xu.image[rS],N_[rS]=mO(xu,N_[rS]);let bL=N_[0],MO=kt(bL)||j,PL=g.convert(xu.format,xu.encoding),jL=g.convert(xu.type),TL=Nt(xu.internalFormat,PL,jL,xu.encoding),OL=j&&xu.isVideoTexture!==!0,t$=C3.__version===void 0||tA===!0,r$=Ht(xu,bL,MO);Su(34067,xu,MO);let X1;if(X3){OL&&t$&&a.texStorage2D(34067,r$,TL,bL.width,bL.height);for(let rS=0;rS<6;rS++){X1=N_[rS].mipmaps;for(let SA=0;SA<X1.length;SA++){let IO=X1[SA];xu.format!==Qr?PL!==null?OL?a.compressedTexSubImage2D(34069+rS,SA,0,0,IO.width,IO.height,PL,IO.data):a.compressedTexImage2D(34069+rS,SA,TL,IO.width,IO.height,0,IO.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):OL?a.texSubImage2D(34069+rS,SA,0,0,IO.width,IO.height,PL,jL,IO.data):a.texImage2D(34069+rS,SA,TL,IO.width,IO.height,0,PL,jL,IO.data)}}}else{X1=xu.mipmaps,OL&&t$&&(X1.length>0&&r$++,a.texStorage2D(34067,r$,TL,N_[0].width,N_[0].height));for(let rS=0;rS<6;rS++)if(sR){OL?a.texSubImage2D(34069+rS,0,0,0,N_[rS].width,N_[rS].height,PL,jL,N_[rS].data):a.texImage2D(34069+rS,0,TL,N_[rS].width,N_[rS].height,0,PL,jL,N_[rS].data);for(let SA=0;SA<X1.length;SA++){let IO=X1[SA].image[rS].image;OL?a.texSubImage2D(34069+rS,SA+1,0,0,IO.width,IO.height,PL,jL,IO.data):a.texImage2D(34069+rS,SA+1,TL,IO.width,IO.height,0,PL,jL,IO.data)}}else{OL?a.texSubImage2D(34069+rS,0,0,0,PL,jL,N_[rS]):a.texImage2D(34069+rS,0,TL,PL,jL,N_[rS]);for(let SA=0;SA<X1.length;SA++){let IO=X1[SA];OL?a.texSubImage2D(34069+rS,SA+1,0,0,PL,jL,IO.image[rS]):a.texImage2D(34069+rS,SA+1,TL,PL,jL,IO.image[rS])}}}Lt(xu,MO)&&Ft(34067),C3.__version=au.version,xu.onUpdate&&xu.onUpdate(xu)}sp.__version=xu.version}function q1(sp,xu,ux,tA,au){let C3=g.convert(ux.format,ux.encoding),X3=g.convert(ux.type),sR=Nt(ux.internalFormat,C3,X3,ux.encoding);c.get(xu).__hasExternalTextures||(au===32879||au===35866?a.texImage3D(au,0,sR,xu.width,xu.height,xu.depth,0,C3,X3,null):a.texImage2D(au,0,sR,xu.width,xu.height,0,C3,X3,null)),a.bindFramebuffer(36160,sp),AA(xu)?ut.framebufferTexture2DMultisampleEXT(36160,tA,au,c.get(ux).__webglTexture,0,fD(xu)):(au===3553||au>=34069&&au<=34074)&&e.framebufferTexture2D(36160,tA,au,c.get(ux).__webglTexture,0),a.bindFramebuffer(36160,null)}function ox(sp,xu,ux){if(e.bindRenderbuffer(36161,sp),xu.depthBuffer&&!xu.stencilBuffer){let tA=33189;if(ux||AA(xu)){let au=xu.depthTexture;au&&au.isDepthTexture&&(au.type===Sr$1?tA=36012:au.type===js&&(tA=33190));let C3=fD(xu);AA(xu)?ut.renderbufferStorageMultisampleEXT(36161,C3,tA,xu.width,xu.height):e.renderbufferStorageMultisample(36161,C3,tA,xu.width,xu.height)}else e.renderbufferStorage(36161,tA,xu.width,xu.height);e.framebufferRenderbuffer(36160,36096,36161,sp)}else if(xu.depthBuffer&&xu.stencilBuffer){let tA=fD(xu);ux&&AA(xu)===!1?e.renderbufferStorageMultisample(36161,tA,35056,xu.width,xu.height):AA(xu)?ut.renderbufferStorageMultisampleEXT(36161,tA,35056,xu.width,xu.height):e.renderbufferStorage(36161,34041,xu.width,xu.height),e.framebufferRenderbuffer(36160,33306,36161,sp)}else{let tA=xu.isWebGLMultipleRenderTargets===!0?xu.texture:[xu.texture];for(let au=0;au<tA.length;au++){let C3=tA[au],X3=g.convert(C3.format,C3.encoding),sR=g.convert(C3.type),N_=Nt(C3.internalFormat,X3,sR,C3.encoding),bL=fD(xu);ux&&AA(xu)===!1?e.renderbufferStorageMultisample(36161,bL,N_,xu.width,xu.height):AA(xu)?ut.renderbufferStorageMultisampleEXT(36161,bL,N_,xu.width,xu.height):e.renderbufferStorage(36161,N_,xu.width,xu.height)}}e.bindRenderbuffer(36161,null)}function U_(sp,xu){if(xu&&xu.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,sp),!(xu.depthTexture&&xu.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(xu.depthTexture).__webglTexture||xu.depthTexture.image.width!==xu.width||xu.depthTexture.image.height!==xu.height)&&(xu.depthTexture.image.width=xu.width,xu.depthTexture.image.height=xu.height,xu.depthTexture.needsUpdate=!0),Zn(xu.depthTexture,0);let ux=c.get(xu.depthTexture).__webglTexture,tA=fD(xu);if(xu.depthTexture.format===vc)AA(xu)?ut.framebufferTexture2DMultisampleEXT(36160,36096,3553,ux,0,tA):e.framebufferTexture2D(36160,36096,3553,ux,0);else if(xu.depthTexture.format===cl)AA(xu)?ut.framebufferTexture2DMultisampleEXT(36160,33306,3553,ux,0,tA):e.framebufferTexture2D(36160,33306,3553,ux,0);else throw new Error("Unknown depthTexture format")}function tS(sp){let xu=c.get(sp),ux=sp.isWebGLCubeRenderTarget===!0;if(sp.depthTexture&&!xu.__autoAllocateDepthBuffer){if(ux)throw new Error("target.depthTexture not supported in Cube render targets");U_(xu.__webglFramebuffer,sp)}else if(ux){xu.__webglDepthbuffer=[];for(let tA=0;tA<6;tA++)a.bindFramebuffer(36160,xu.__webglFramebuffer[tA]),xu.__webglDepthbuffer[tA]=e.createRenderbuffer(),ox(xu.__webglDepthbuffer[tA],sp,!1)}else a.bindFramebuffer(36160,xu.__webglFramebuffer),xu.__webglDepthbuffer=e.createRenderbuffer(),ox(xu.__webglDepthbuffer,sp,!1);a.bindFramebuffer(36160,null)}function iS(sp,xu,ux){let tA=c.get(sp);xu!==void 0&&q1(tA.__webglFramebuffer,sp,sp.texture,36064,3553),ux!==void 0&&tS(sp)}function wA(sp){let xu=sp.texture,ux=c.get(sp),tA=c.get(xu);sp.addEventListener("dispose",us),sp.isWebGLMultipleRenderTargets!==!0&&(tA.__webglTexture===void 0&&(tA.__webglTexture=e.createTexture()),tA.__version=xu.version,b.memory.textures++);let au=sp.isWebGLCubeRenderTarget===!0,C3=sp.isWebGLMultipleRenderTargets===!0,X3=kt(sp)||j;if(au){ux.__webglFramebuffer=[];for(let sR=0;sR<6;sR++)ux.__webglFramebuffer[sR]=e.createFramebuffer()}else{if(ux.__webglFramebuffer=e.createFramebuffer(),C3)if(d.drawBuffers){let sR=sp.texture;for(let N_=0,bL=sR.length;N_<bL;N_++){let MO=c.get(sR[N_]);MO.__webglTexture===void 0&&(MO.__webglTexture=e.createTexture(),b.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(j&&sp.samples>0&&AA(sp)===!1){let sR=C3?xu:[xu];ux.__webglMultisampledFramebuffer=e.createFramebuffer(),ux.__webglColorRenderbuffer=[],a.bindFramebuffer(36160,ux.__webglMultisampledFramebuffer);for(let N_=0;N_<sR.length;N_++){let bL=sR[N_];ux.__webglColorRenderbuffer[N_]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ux.__webglColorRenderbuffer[N_]);let MO=g.convert(bL.format,bL.encoding),PL=g.convert(bL.type),jL=Nt(bL.internalFormat,MO,PL,bL.encoding,sp.isXRRenderTarget===!0),TL=fD(sp);e.renderbufferStorageMultisample(36161,TL,jL,sp.width,sp.height),e.framebufferRenderbuffer(36160,36064+N_,36161,ux.__webglColorRenderbuffer[N_])}e.bindRenderbuffer(36161,null),sp.depthBuffer&&(ux.__webglDepthRenderbuffer=e.createRenderbuffer(),ox(ux.__webglDepthRenderbuffer,sp,!0)),a.bindFramebuffer(36160,null)}}if(au){a.bindTexture(34067,tA.__webglTexture),Su(34067,xu,X3);for(let sR=0;sR<6;sR++)q1(ux.__webglFramebuffer[sR],sp,xu,36064,34069+sR);Lt(xu,X3)&&Ft(34067),a.unbindTexture()}else if(C3){let sR=sp.texture;for(let N_=0,bL=sR.length;N_<bL;N_++){let MO=sR[N_],PL=c.get(MO);a.bindTexture(3553,PL.__webglTexture),Su(3553,MO,X3),q1(ux.__webglFramebuffer,sp,MO,36064+N_,3553),Lt(MO,X3)&&Ft(3553)}a.unbindTexture()}else{let sR=3553;(sp.isWebGL3DRenderTarget||sp.isWebGLArrayRenderTarget)&&(j?sR=sp.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),a.bindTexture(sR,tA.__webglTexture),Su(sR,xu,X3),q1(ux.__webglFramebuffer,sp,xu,36064,sR),Lt(xu,X3)&&Ft(sR),a.unbindTexture()}sp.depthBuffer&&tS(sp)}function pO(sp){let xu=kt(sp)||j,ux=sp.isWebGLMultipleRenderTargets===!0?sp.texture:[sp.texture];for(let tA=0,au=ux.length;tA<au;tA++){let C3=ux[tA];if(Lt(C3,xu)){let X3=sp.isWebGLCubeRenderTarget?34067:3553,sR=c.get(C3).__webglTexture;a.bindTexture(X3,sR),Ft(X3),a.unbindTexture()}}}function aR(sp){if(j&&sp.samples>0&&AA(sp)===!1){let xu=sp.isWebGLMultipleRenderTargets?sp.texture:[sp.texture],ux=sp.width,tA=sp.height,au=16384,C3=[],X3=sp.stencilBuffer?33306:36096,sR=c.get(sp),N_=sp.isWebGLMultipleRenderTargets===!0;if(N_)for(let bL=0;bL<xu.length;bL++)a.bindFramebuffer(36160,sR.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+bL,36161,null),a.bindFramebuffer(36160,sR.__webglFramebuffer),e.framebufferTexture2D(36009,36064+bL,3553,null,0);a.bindFramebuffer(36008,sR.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,sR.__webglFramebuffer);for(let bL=0;bL<xu.length;bL++){C3.push(36064+bL),sp.depthBuffer&&C3.push(X3);let MO=sR.__ignoreDepthValues!==void 0?sR.__ignoreDepthValues:!1;if(MO===!1&&(sp.depthBuffer&&(au|=256),sp.stencilBuffer&&(au|=1024)),N_&&e.framebufferRenderbuffer(36008,36064,36161,sR.__webglColorRenderbuffer[bL]),MO===!0&&(e.invalidateFramebuffer(36008,[X3]),e.invalidateFramebuffer(36009,[X3])),N_){let PL=c.get(xu[bL]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,PL,0)}e.blitFramebuffer(0,0,ux,tA,0,0,ux,tA,au,9728),gt&&e.invalidateFramebuffer(36008,C3)}if(a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,null),N_)for(let bL=0;bL<xu.length;bL++){a.bindFramebuffer(36160,sR.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+bL,36161,sR.__webglColorRenderbuffer[bL]);let MO=c.get(xu[bL]).__webglTexture;a.bindFramebuffer(36160,sR.__webglFramebuffer),e.framebufferTexture2D(36009,36064+bL,3553,MO,0)}a.bindFramebuffer(36009,sR.__webglMultisampledFramebuffer)}}function fD(sp){return Math.min(rt,sp.samples)}function AA(sp){let xu=c.get(sp);return j&&sp.samples>0&&o.has("WEBGL_multisampled_render_to_texture")===!0&&xu.__useRenderToTexture!==!1}function oI(sp){let xu=b.render.frame;yt.get(sp)!==xu&&(yt.set(sp,xu),sp.update())}function mO(sp,xu){let ux=sp.encoding,tA=sp.format,au=sp.type;return sp.isCompressedTexture===!0||sp.isVideoTexture===!0||sp.format===qS||ux!==Sn&&(ux===at?j===!1?o.has("EXT_sRGB")===!0&&tA===Qr?(sp.format=qS,sp.minFilter=tt,sp.generateMipmaps=!1):xu=yy.sRGBToLinear(xu):(tA!==Qr||au!==Ir$1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ux)),xu}this.allocateTextureUnit=Gr,this.resetTextureUnits=gn,this.setTexture2D=Zn,this.setTexture2DArray=Nn,this.setTexture3D=Qn,this.setTextureCube=bu,this.rebindTextures=iS,this.setupRenderTarget=wA,this.updateRenderTargetMipmap=pO,this.updateMultisampleRenderTarget=aR,this.setupDepthRenderbuffer=tS,this.setupFrameBufferTexture=q1,this.useMultisampledRTT=AA}function WG(e,o,a){let c=a.isWebGL2;function d(g,b=null){let j;if(g===Ir$1)return 5121;if(g===kF)return 32819;if(g===VF)return 32820;if(g===BF)return 5120;if(g===NF)return 5122;if(g===HM)return 5123;if(g===FF)return 5124;if(g===js)return 5125;if(g===Sr$1)return 5126;if(g===va)return c?5131:(j=o.get("OES_texture_half_float"),j!==null?j.HALF_FLOAT_OES:null);if(g===zF)return 6406;if(g===Qr)return 6408;if(g===UF)return 6409;if(g===GF)return 6410;if(g===vc)return 6402;if(g===cl)return 34041;if(g===qS)return j=o.get("EXT_sRGB"),j!==null?j.SRGB_ALPHA_EXT:null;if(g===jF)return 6403;if(g===HF)return 36244;if(g===uh)return 33319;if(g===WF)return 33320;if(g===Aw)return 36249;if(g===sS||g===oS||g===aS||g===lS)if(b===at)if(j=o.get("WEBGL_compressed_texture_s3tc_srgb"),j!==null){if(g===sS)return j.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(g===oS)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(g===aS)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(g===lS)return j.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(j=o.get("WEBGL_compressed_texture_s3tc"),j!==null){if(g===sS)return j.COMPRESSED_RGB_S3TC_DXT1_EXT;if(g===oS)return j.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(g===aS)return j.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(g===lS)return j.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(g===mT||g===gT||g===yT||g===vT)if(j=o.get("WEBGL_compressed_texture_pvrtc"),j!==null){if(g===mT)return j.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(g===gT)return j.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(g===yT)return j.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(g===vT)return j.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(g===qF)return j=o.get("WEBGL_compressed_texture_etc1"),j!==null?j.COMPRESSED_RGB_ETC1_WEBGL:null;if(g===xT||g===bT)if(j=o.get("WEBGL_compressed_texture_etc"),j!==null){if(g===xT)return b===at?j.COMPRESSED_SRGB8_ETC2:j.COMPRESSED_RGB8_ETC2;if(g===bT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:j.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(g===ST||g===wT||g===AT||g===_T||g===ET||g===TT||g===MT||g===CT||g===PT||g===DT||g===OT||g===IT||g===RT||g===LT)if(j=o.get("WEBGL_compressed_texture_astc"),j!==null){if(g===ST)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:j.COMPRESSED_RGBA_ASTC_4x4_KHR;if(g===wT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:j.COMPRESSED_RGBA_ASTC_5x4_KHR;if(g===AT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:j.COMPRESSED_RGBA_ASTC_5x5_KHR;if(g===_T)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:j.COMPRESSED_RGBA_ASTC_6x5_KHR;if(g===ET)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:j.COMPRESSED_RGBA_ASTC_6x6_KHR;if(g===TT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:j.COMPRESSED_RGBA_ASTC_8x5_KHR;if(g===MT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:j.COMPRESSED_RGBA_ASTC_8x6_KHR;if(g===CT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:j.COMPRESSED_RGBA_ASTC_8x8_KHR;if(g===PT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:j.COMPRESSED_RGBA_ASTC_10x5_KHR;if(g===DT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:j.COMPRESSED_RGBA_ASTC_10x6_KHR;if(g===OT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:j.COMPRESSED_RGBA_ASTC_10x8_KHR;if(g===IT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:j.COMPRESSED_RGBA_ASTC_10x10_KHR;if(g===RT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:j.COMPRESSED_RGBA_ASTC_12x10_KHR;if(g===LT)return b===at?j.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:j.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(g===cS)if(j=o.get("EXT_texture_compression_bptc"),j!==null){if(g===cS)return b===at?j.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:j.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(g===YF||g===BT||g===NT||g===FT)if(j=o.get("EXT_texture_compression_rgtc"),j!==null){if(g===cS)return j.COMPRESSED_RED_RGTC1_EXT;if(g===BT)return j.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(g===NT)return j.COMPRESSED_RED_GREEN_RGTC2_EXT;if(g===FT)return j.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return g===ol?c?34042:(j=o.get("WEBGL_depth_texture"),j!==null?j.UNSIGNED_INT_24_8_WEBGL:null):e[g]!==void 0?e[g]:null}return{convert:d}}var iw=class extends ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},ps=class extends _t{constructor(){super(),this.isGroup=!0,this.type="Group"}},qG={type:"move"},xp=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ps,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ps,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new _,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new _),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ps,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new _,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new _),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let o=this._hand;if(o)for(let a of e.hand.values())this._getHandJoint(o,a)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,o,a){let c=null,d=null,g=null,b=this._targetRay,j=this._grip,$=this._hand;if(e&&o.session.visibilityState!=="visible-blurred"){if($&&e.hand){g=!0;for(let yt of e.hand.values()){let wt=o.getJointPose(yt,a),Ct=this._getHandJoint($,yt);wt!==null&&(Ct.matrix.fromArray(wt.transform.matrix),Ct.matrix.decompose(Ct.position,Ct.rotation,Ct.scale),Ct.jointRadius=wt.radius),Ct.visible=wt!==null}let _e=$.joints["index-finger-tip"],st=$.joints["thumb-tip"],rt=_e.position.distanceTo(st.position),ut=.02,gt=.005;$.inputState.pinching&&rt>ut+gt?($.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!$.inputState.pinching&&rt<=ut-gt&&($.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else j!==null&&e.gripSpace&&(d=o.getPose(e.gripSpace,a),d!==null&&(j.matrix.fromArray(d.transform.matrix),j.matrix.decompose(j.position,j.rotation,j.scale),d.linearVelocity?(j.hasLinearVelocity=!0,j.linearVelocity.copy(d.linearVelocity)):j.hasLinearVelocity=!1,d.angularVelocity?(j.hasAngularVelocity=!0,j.angularVelocity.copy(d.angularVelocity)):j.hasAngularVelocity=!1));b!==null&&(c=o.getPose(e.targetRaySpace,a),c===null&&d!==null&&(c=d),c!==null&&(b.matrix.fromArray(c.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),c.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(c.linearVelocity)):b.hasLinearVelocity=!1,c.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(c.angularVelocity)):b.hasAngularVelocity=!1,this.dispatchEvent(qG)))}return b!==null&&(b.visible=c!==null),j!==null&&(j.visible=d!==null),$!==null&&($.visible=g!==null),this}_getHandJoint(e,o){if(e.joints[o.jointName]===void 0){let a=new ps;a.matrixAutoUpdate=!1,a.visible=!1,e.joints[o.jointName]=a,e.add(a)}return e.joints[o.jointName]}},gs=class extends tr{constructor(e,o,a,c,d,g,b,j,$,_e){if(_e=_e!==void 0?_e:vc,_e!==vc&&_e!==cl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");a===void 0&&_e===vc&&(a=js),a===void 0&&_e===cl&&(a=ol),super(null,c,d,g,b,j,_e,a,$),this.isDepthTexture=!0,this.image={width:e,height:o},this.magFilter=b!==void 0?b:Vt,this.minFilter=j!==void 0?j:Vt,this.flipY=!1,this.generateMipmaps=!1}},nw=class extends fr$2{constructor(e,o){super();let a=this,c=null,d=1,g=null,b="local-floor",j=1,$=null,_e=null,st=null,rt=null,ut=null,gt=null,yt=o.getContextAttributes(),wt=null,Ct=null,Pt=[],At=[],Tt=new Set,kt=new Map,It=new ri;It.layers.enable(1),It.viewport=new Ke;let Lt=new ri;Lt.layers.enable(2),Lt.viewport=new Ke;let Ft=[It,Lt],Nt=new iw;Nt.layers.enable(1),Nt.layers.enable(2);let Ht=null,dr=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Nn){let Qn=Pt[Nn];return Qn===void 0&&(Qn=new xp,Pt[Nn]=Qn),Qn.getTargetRaySpace()},this.getControllerGrip=function(Nn){let Qn=Pt[Nn];return Qn===void 0&&(Qn=new xp,Pt[Nn]=Qn),Qn.getGripSpace()},this.getHand=function(Nn){let Qn=Pt[Nn];return Qn===void 0&&(Qn=new xp,Pt[Nn]=Qn),Qn.getHandSpace()};function hs(Nn){let Qn=At.indexOf(Nn.inputSource);if(Qn===-1)return;let bu=Pt[Qn];bu!==void 0&&bu.dispatchEvent({type:Nn.type,data:Nn.inputSource})}function us(){c.removeEventListener("select",hs),c.removeEventListener("selectstart",hs),c.removeEventListener("selectend",hs),c.removeEventListener("squeeze",hs),c.removeEventListener("squeezestart",hs),c.removeEventListener("squeezeend",hs),c.removeEventListener("end",us),c.removeEventListener("inputsourceschange",hn);for(let Nn=0;Nn<Pt.length;Nn++){let Qn=At[Nn];Qn!==null&&(At[Nn]=null,Pt[Nn].disconnect(Qn))}Ht=null,dr=null,e.setRenderTarget(wt),ut=null,rt=null,st=null,c=null,Ct=null,Zn.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Nn){d=Nn,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Nn){b=Nn,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return $||g},this.setReferenceSpace=function(Nn){$=Nn},this.getBaseLayer=function(){return rt!==null?rt:ut},this.getBinding=function(){return st},this.getFrame=function(){return gt},this.getSession=function(){return c},this.setSession=async function(Nn){if(c=Nn,c!==null){if(wt=e.getRenderTarget(),c.addEventListener("select",hs),c.addEventListener("selectstart",hs),c.addEventListener("selectend",hs),c.addEventListener("squeeze",hs),c.addEventListener("squeezestart",hs),c.addEventListener("squeezeend",hs),c.addEventListener("end",us),c.addEventListener("inputsourceschange",hn),yt.xrCompatible!==!0&&await o.makeXRCompatible(),c.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Qn={antialias:c.renderState.layers===void 0?yt.antialias:!0,alpha:yt.alpha,depth:yt.depth,stencil:yt.stencil,framebufferScaleFactor:d};ut=new XRWebGLLayer(c,o,Qn),c.updateRenderState({baseLayer:ut}),Ct=new ft(ut.framebufferWidth,ut.framebufferHeight,{format:Qr,type:Ir$1,encoding:e.outputEncoding,stencilBuffer:yt.stencil})}else{let Qn=null,bu=null,ou=null;yt.depth&&(ou=yt.stencil?35056:33190,Qn=yt.stencil?cl:vc,bu=yt.stencil?ol:js);let g0={colorFormat:32856,depthFormat:ou,scaleFactor:d};st=new XRWebGLBinding(c,o),rt=st.createProjectionLayer(g0),c.updateRenderState({layers:[rt]}),Ct=new ft(rt.textureWidth,rt.textureHeight,{format:Qr,type:Ir$1,depthTexture:new gs(rt.textureWidth,rt.textureHeight,bu,void 0,void 0,void 0,void 0,void 0,void 0,Qn),stencilBuffer:yt.stencil,encoding:e.outputEncoding,samples:yt.antialias?4:0});let Su=e.properties.get(Ct);Su.__ignoreDepthValues=rt.ignoreDepthValues}Ct.isXRRenderTarget=!0,this.setFoveation(j),$=null,g=await c.requestReferenceSpace(b),Zn.setContext(c),Zn.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}};function hn(Nn){for(let Qn=0;Qn<Nn.removed.length;Qn++){let bu=Nn.removed[Qn],ou=At.indexOf(bu);ou>=0&&(At[ou]=null,Pt[ou].disconnect(bu))}for(let Qn=0;Qn<Nn.added.length;Qn++){let bu=Nn.added[Qn],ou=At.indexOf(bu);if(ou===-1){for(let Su=0;Su<Pt.length;Su++)if(Su>=At.length){At.push(bu),ou=Su;break}else if(At[Su]===null){At[Su]=bu,ou=Su;break}if(ou===-1)break}let g0=Pt[ou];g0&&g0.connect(bu)}}let un=new _,bo=new _;function _s(Nn,Qn,bu){un.setFromMatrixPosition(Qn.matrixWorld),bo.setFromMatrixPosition(bu.matrixWorld);let ou=un.distanceTo(bo),g0=Qn.projectionMatrix.elements,Su=bu.projectionMatrix.elements,l1=g0[14]/(g0[10]-1),B0=g0[14]/(g0[10]+1),a1=(g0[9]+1)/g0[5],q1=(g0[9]-1)/g0[5],ox=(g0[8]-1)/g0[0],U_=(Su[8]+1)/Su[0],tS=l1*ox,iS=l1*U_,wA=ou/(-ox+U_),pO=wA*-ox;Qn.matrixWorld.decompose(Nn.position,Nn.quaternion,Nn.scale),Nn.translateX(pO),Nn.translateZ(wA),Nn.matrixWorld.compose(Nn.position,Nn.quaternion,Nn.scale),Nn.matrixWorldInverse.copy(Nn.matrixWorld).invert();let aR=l1+wA,fD=B0+wA,AA=tS-pO,oI=iS+(ou-pO),mO=a1*B0/fD*aR,sp=q1*B0/fD*aR;Nn.projectionMatrix.makePerspective(AA,oI,mO,sp,aR,fD)}function gn(Nn,Qn){Qn===null?Nn.matrixWorld.copy(Nn.matrix):Nn.matrixWorld.multiplyMatrices(Qn.matrixWorld,Nn.matrix),Nn.matrixWorldInverse.copy(Nn.matrixWorld).invert()}this.updateCamera=function(Nn){if(c===null)return;Nt.near=Lt.near=It.near=Nn.near,Nt.far=Lt.far=It.far=Nn.far,(Ht!==Nt.near||dr!==Nt.far)&&(c.updateRenderState({depthNear:Nt.near,depthFar:Nt.far}),Ht=Nt.near,dr=Nt.far);let Qn=Nn.parent,bu=Nt.cameras;gn(Nt,Qn);for(let g0=0;g0<bu.length;g0++)gn(bu[g0],Qn);Nt.matrixWorld.decompose(Nt.position,Nt.quaternion,Nt.scale),Nn.matrix.copy(Nt.matrix),Nn.matrix.decompose(Nn.position,Nn.quaternion,Nn.scale);let ou=Nn.children;for(let g0=0,Su=ou.length;g0<Su;g0++)ou[g0].updateMatrixWorld(!0);bu.length===2?_s(Nt,It,Lt):Nt.projectionMatrix.copy(It.projectionMatrix)},this.getCamera=function(){return Nt},this.getFoveation=function(){if(!(rt===null&&ut===null))return j},this.setFoveation=function(Nn){j=Nn,rt!==null&&(rt.fixedFoveation=Nn),ut!==null&&ut.fixedFoveation!==void 0&&(ut.fixedFoveation=Nn)},this.getPlanes=function(){return Tt};let Gr=null;function ds(Nn,Qn){if(_e=Qn.getViewerPose($||g),gt=Qn,_e!==null){let bu=_e.views;ut!==null&&(e.setRenderTargetFramebuffer(Ct,ut.framebuffer),e.setRenderTarget(Ct));let ou=!1;bu.length!==Nt.cameras.length&&(Nt.cameras.length=0,ou=!0);for(let g0=0;g0<bu.length;g0++){let Su=bu[g0],l1=null;if(ut!==null)l1=ut.getViewport(Su);else{let a1=st.getViewSubImage(rt,Su);l1=a1.viewport,g0===0&&(e.setRenderTargetTextures(Ct,a1.colorTexture,rt.ignoreDepthValues?void 0:a1.depthStencilTexture),e.setRenderTarget(Ct))}let B0=Ft[g0];B0===void 0&&(B0=new ri,B0.layers.enable(g0),B0.viewport=new Ke,Ft[g0]=B0),B0.matrix.fromArray(Su.transform.matrix),B0.projectionMatrix.fromArray(Su.projectionMatrix),B0.viewport.set(l1.x,l1.y,l1.width,l1.height),g0===0&&Nt.matrix.copy(B0.matrix),ou===!0&&Nt.cameras.push(B0)}}for(let bu=0;bu<Pt.length;bu++){let ou=At[bu],g0=Pt[bu];ou!==null&&g0!==void 0&&g0.update(ou,Qn,$||g)}if(Gr&&Gr(Nn,Qn),Qn.detectedPlanes){a.dispatchEvent({type:"planesdetected",data:Qn.detectedPlanes});let bu=null;for(let ou of Tt)Qn.detectedPlanes.has(ou)||(bu===null&&(bu=[]),bu.push(ou));if(bu!==null)for(let ou of bu)Tt.delete(ou),kt.delete(ou),a.dispatchEvent({type:"planeremoved",data:ou});for(let ou of Qn.detectedPlanes)if(!Tt.has(ou))Tt.add(ou),kt.set(ou,Qn.lastChangedTime),a.dispatchEvent({type:"planeadded",data:ou});else{let g0=kt.get(ou);ou.lastChangedTime>g0&&(kt.set(ou,ou.lastChangedTime),a.dispatchEvent({type:"planechanged",data:ou}))}}gt=null}let Zn=new KM;Zn.setAnimationLoop(ds),this.setAnimationLoop=function(Nn){Gr=Nn},this.dispose=function(){}}};function YG(e,o){function a(wt,Ct){Ct.color.getRGB(wt.fogColor.value,QM(e)),Ct.isFog?(wt.fogNear.value=Ct.near,wt.fogFar.value=Ct.far):Ct.isFogExp2&&(wt.fogDensity.value=Ct.density)}function c(wt,Ct,Pt,At,Tt){Ct.isMeshBasicMaterial||Ct.isMeshLambertMaterial?d(wt,Ct):Ct.isMeshToonMaterial?(d(wt,Ct),st(wt,Ct)):Ct.isMeshPhongMaterial?(d(wt,Ct),_e(wt,Ct)):Ct.isMeshStandardMaterial?(d(wt,Ct),rt(wt,Ct),Ct.isMeshPhysicalMaterial&&ut(wt,Ct,Tt)):Ct.isMeshMatcapMaterial?(d(wt,Ct),gt(wt,Ct)):Ct.isMeshDepthMaterial?d(wt,Ct):Ct.isMeshDistanceMaterial?(d(wt,Ct),yt(wt,Ct)):Ct.isMeshNormalMaterial?d(wt,Ct):Ct.isLineBasicMaterial?(g(wt,Ct),Ct.isLineDashedMaterial&&b(wt,Ct)):Ct.isPointsMaterial?j(wt,Ct,Pt,At):Ct.isSpriteMaterial?$(wt,Ct):Ct.isShadowMaterial?(wt.color.value.copy(Ct.color),wt.opacity.value=Ct.opacity):Ct.isShaderMaterial&&(Ct.uniformsNeedUpdate=!1)}function d(wt,Ct){wt.opacity.value=Ct.opacity,Ct.color&&wt.diffuse.value.copy(Ct.color),Ct.emissive&&wt.emissive.value.copy(Ct.emissive).multiplyScalar(Ct.emissiveIntensity),Ct.map&&(wt.map.value=Ct.map),Ct.alphaMap&&(wt.alphaMap.value=Ct.alphaMap),Ct.bumpMap&&(wt.bumpMap.value=Ct.bumpMap,wt.bumpScale.value=Ct.bumpScale,Ct.side===yi&&(wt.bumpScale.value*=-1)),Ct.displacementMap&&(wt.displacementMap.value=Ct.displacementMap,wt.displacementScale.value=Ct.displacementScale,wt.displacementBias.value=Ct.displacementBias),Ct.emissiveMap&&(wt.emissiveMap.value=Ct.emissiveMap),Ct.normalMap&&(wt.normalMap.value=Ct.normalMap,wt.normalScale.value.copy(Ct.normalScale),Ct.side===yi&&wt.normalScale.value.negate()),Ct.specularMap&&(wt.specularMap.value=Ct.specularMap),Ct.alphaTest>0&&(wt.alphaTest.value=Ct.alphaTest);let Pt=o.get(Ct).envMap;if(Pt&&(wt.envMap.value=Pt,wt.flipEnvMap.value=Pt.isCubeTexture&&Pt.isRenderTargetTexture===!1?-1:1,wt.reflectivity.value=Ct.reflectivity,wt.ior.value=Ct.ior,wt.refractionRatio.value=Ct.refractionRatio),Ct.lightMap){wt.lightMap.value=Ct.lightMap;let kt=e.physicallyCorrectLights!==!0?Math.PI:1;wt.lightMapIntensity.value=Ct.lightMapIntensity*kt}Ct.aoMap&&(wt.aoMap.value=Ct.aoMap,wt.aoMapIntensity.value=Ct.aoMapIntensity);let At;Ct.map?At=Ct.map:Ct.specularMap?At=Ct.specularMap:Ct.displacementMap?At=Ct.displacementMap:Ct.normalMap?At=Ct.normalMap:Ct.bumpMap?At=Ct.bumpMap:Ct.roughnessMap?At=Ct.roughnessMap:Ct.metalnessMap?At=Ct.metalnessMap:Ct.alphaMap?At=Ct.alphaMap:Ct.emissiveMap?At=Ct.emissiveMap:Ct.clearcoatMap?At=Ct.clearcoatMap:Ct.clearcoatNormalMap?At=Ct.clearcoatNormalMap:Ct.clearcoatRoughnessMap?At=Ct.clearcoatRoughnessMap:Ct.iridescenceMap?At=Ct.iridescenceMap:Ct.iridescenceThicknessMap?At=Ct.iridescenceThicknessMap:Ct.specularIntensityMap?At=Ct.specularIntensityMap:Ct.specularColorMap?At=Ct.specularColorMap:Ct.transmissionMap?At=Ct.transmissionMap:Ct.thicknessMap?At=Ct.thicknessMap:Ct.sheenColorMap?At=Ct.sheenColorMap:Ct.sheenRoughnessMap&&(At=Ct.sheenRoughnessMap),At!==void 0&&(At.isWebGLRenderTarget&&(At=At.texture),At.matrixAutoUpdate===!0&&At.updateMatrix(),wt.uvTransform.value.copy(At.matrix));let Tt;Ct.aoMap?Tt=Ct.aoMap:Ct.lightMap&&(Tt=Ct.lightMap),Tt!==void 0&&(Tt.isWebGLRenderTarget&&(Tt=Tt.texture),Tt.matrixAutoUpdate===!0&&Tt.updateMatrix(),wt.uv2Transform.value.copy(Tt.matrix))}function g(wt,Ct){wt.diffuse.value.copy(Ct.color),wt.opacity.value=Ct.opacity}function b(wt,Ct){wt.dashSize.value=Ct.dashSize,wt.totalSize.value=Ct.dashSize+Ct.gapSize,wt.scale.value=Ct.scale}function j(wt,Ct,Pt,At){wt.diffuse.value.copy(Ct.color),wt.opacity.value=Ct.opacity,wt.size.value=Ct.size*Pt,wt.scale.value=At*.5,Ct.map&&(wt.map.value=Ct.map),Ct.alphaMap&&(wt.alphaMap.value=Ct.alphaMap),Ct.alphaTest>0&&(wt.alphaTest.value=Ct.alphaTest);let Tt;Ct.map?Tt=Ct.map:Ct.alphaMap&&(Tt=Ct.alphaMap),Tt!==void 0&&(Tt.matrixAutoUpdate===!0&&Tt.updateMatrix(),wt.uvTransform.value.copy(Tt.matrix))}function $(wt,Ct){wt.diffuse.value.copy(Ct.color),wt.opacity.value=Ct.opacity,wt.rotation.value=Ct.rotation,Ct.map&&(wt.map.value=Ct.map),Ct.alphaMap&&(wt.alphaMap.value=Ct.alphaMap),Ct.alphaTest>0&&(wt.alphaTest.value=Ct.alphaTest);let Pt;Ct.map?Pt=Ct.map:Ct.alphaMap&&(Pt=Ct.alphaMap),Pt!==void 0&&(Pt.matrixAutoUpdate===!0&&Pt.updateMatrix(),wt.uvTransform.value.copy(Pt.matrix))}function _e(wt,Ct){wt.specular.value.copy(Ct.specular),wt.shininess.value=Math.max(Ct.shininess,1e-4)}function st(wt,Ct){Ct.gradientMap&&(wt.gradientMap.value=Ct.gradientMap)}function rt(wt,Ct){wt.roughness.value=Ct.roughness,wt.metalness.value=Ct.metalness,Ct.roughnessMap&&(wt.roughnessMap.value=Ct.roughnessMap),Ct.metalnessMap&&(wt.metalnessMap.value=Ct.metalnessMap),o.get(Ct).envMap&&(wt.envMapIntensity.value=Ct.envMapIntensity)}function ut(wt,Ct,Pt){wt.ior.value=Ct.ior,Ct.sheen>0&&(wt.sheenColor.value.copy(Ct.sheenColor).multiplyScalar(Ct.sheen),wt.sheenRoughness.value=Ct.sheenRoughness,Ct.sheenColorMap&&(wt.sheenColorMap.value=Ct.sheenColorMap),Ct.sheenRoughnessMap&&(wt.sheenRoughnessMap.value=Ct.sheenRoughnessMap)),Ct.clearcoat>0&&(wt.clearcoat.value=Ct.clearcoat,wt.clearcoatRoughness.value=Ct.clearcoatRoughness,Ct.clearcoatMap&&(wt.clearcoatMap.value=Ct.clearcoatMap),Ct.clearcoatRoughnessMap&&(wt.clearcoatRoughnessMap.value=Ct.clearcoatRoughnessMap),Ct.clearcoatNormalMap&&(wt.clearcoatNormalScale.value.copy(Ct.clearcoatNormalScale),wt.clearcoatNormalMap.value=Ct.clearcoatNormalMap,Ct.side===yi&&wt.clearcoatNormalScale.value.negate())),Ct.iridescence>0&&(wt.iridescence.value=Ct.iridescence,wt.iridescenceIOR.value=Ct.iridescenceIOR,wt.iridescenceThicknessMinimum.value=Ct.iridescenceThicknessRange[0],wt.iridescenceThicknessMaximum.value=Ct.iridescenceThicknessRange[1],Ct.iridescenceMap&&(wt.iridescenceMap.value=Ct.iridescenceMap),Ct.iridescenceThicknessMap&&(wt.iridescenceThicknessMap.value=Ct.iridescenceThicknessMap)),Ct.transmission>0&&(wt.transmission.value=Ct.transmission,wt.transmissionSamplerMap.value=Pt.texture,wt.transmissionSamplerSize.value.set(Pt.width,Pt.height),Ct.transmissionMap&&(wt.transmissionMap.value=Ct.transmissionMap),wt.thickness.value=Ct.thickness,Ct.thicknessMap&&(wt.thicknessMap.value=Ct.thicknessMap),wt.attenuationDistance.value=Ct.attenuationDistance,wt.attenuationColor.value.copy(Ct.attenuationColor)),wt.specularIntensity.value=Ct.specularIntensity,wt.specularColor.value.copy(Ct.specularColor),Ct.specularIntensityMap&&(wt.specularIntensityMap.value=Ct.specularIntensityMap),Ct.specularColorMap&&(wt.specularColorMap.value=Ct.specularColorMap)}function gt(wt,Ct){Ct.matcap&&(wt.matcap.value=Ct.matcap)}function yt(wt,Ct){wt.referencePosition.value.copy(Ct.referencePosition),wt.nearDistance.value=Ct.nearDistance,wt.farDistance.value=Ct.farDistance}return{refreshFogUniforms:a,refreshMaterialUniforms:c}}function XG(e,o,a,c){let d={},g={},b=[],j=a.isWebGL2?e.getParameter(35375):0;function $(At,Tt){let kt=Tt.program;c.uniformBlockBinding(At,kt)}function _e(At,Tt){let kt=d[At.id];kt===void 0&&(yt(At),kt=st(At),d[At.id]=kt,At.addEventListener("dispose",Ct));let It=Tt.program;c.updateUBOMapping(At,It);let Lt=o.render.frame;g[At.id]!==Lt&&(ut(At),g[At.id]=Lt)}function st(At){let Tt=rt();At.__bindingPointIndex=Tt;let kt=e.createBuffer(),It=At.__size,Lt=At.usage;return e.bindBuffer(35345,kt),e.bufferData(35345,It,Lt),e.bindBuffer(35345,null),e.bindBufferBase(35345,Tt,kt),kt}function rt(){for(let At=0;At<j;At++)if(b.indexOf(At)===-1)return b.push(At),At;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ut(At){let Tt=d[At.id],kt=At.uniforms,It=At.__cache;e.bindBuffer(35345,Tt);for(let Lt=0,Ft=kt.length;Lt<Ft;Lt++){let Nt=kt[Lt];if(gt(Nt,Lt,It)===!0){let Ht=Nt.__offset,dr=Array.isArray(Nt.value)?Nt.value:[Nt.value],hs=0;for(let us=0;us<dr.length;us++){let hn=dr[us],un=wt(hn);typeof hn=="number"?(Nt.__data[0]=hn,e.bufferSubData(35345,Ht+hs,Nt.__data)):hn.isMatrix3?(Nt.__data[0]=hn.elements[0],Nt.__data[1]=hn.elements[1],Nt.__data[2]=hn.elements[2],Nt.__data[3]=hn.elements[0],Nt.__data[4]=hn.elements[3],Nt.__data[5]=hn.elements[4],Nt.__data[6]=hn.elements[5],Nt.__data[7]=hn.elements[0],Nt.__data[8]=hn.elements[6],Nt.__data[9]=hn.elements[7],Nt.__data[10]=hn.elements[8],Nt.__data[11]=hn.elements[0]):(hn.toArray(Nt.__data,hs),hs+=un.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,Ht,Nt.__data)}}e.bindBuffer(35345,null)}function gt(At,Tt,kt){let It=At.value;if(kt[Tt]===void 0){if(typeof It=="number")kt[Tt]=It;else{let Lt=Array.isArray(It)?It:[It],Ft=[];for(let Nt=0;Nt<Lt.length;Nt++)Ft.push(Lt[Nt].clone());kt[Tt]=Ft}return!0}else if(typeof It=="number"){if(kt[Tt]!==It)return kt[Tt]=It,!0}else{let Lt=Array.isArray(kt[Tt])?kt[Tt]:[kt[Tt]],Ft=Array.isArray(It)?It:[It];for(let Nt=0;Nt<Lt.length;Nt++){let Ht=Lt[Nt];if(Ht.equals(Ft[Nt])===!1)return Ht.copy(Ft[Nt]),!0}}return!1}function yt(At){let Tt=At.uniforms,kt=0,It=16,Lt=0;for(let Ft=0,Nt=Tt.length;Ft<Nt;Ft++){let Ht=Tt[Ft],dr={boundary:0,storage:0},hs=Array.isArray(Ht.value)?Ht.value:[Ht.value];for(let us=0,hn=hs.length;us<hn;us++){let un=hs[us],bo=wt(un);dr.boundary+=bo.boundary,dr.storage+=bo.storage}if(Ht.__data=new Float32Array(dr.storage/Float32Array.BYTES_PER_ELEMENT),Ht.__offset=kt,Ft>0){Lt=kt%It;let us=It-Lt;Lt!==0&&us-dr.boundary<0&&(kt+=It-Lt,Ht.__offset=kt)}kt+=dr.storage}return Lt=kt%It,Lt>0&&(kt+=It-Lt),At.__size=kt,At.__cache={},this}function wt(At){let Tt={boundary:0,storage:0};return typeof At=="number"?(Tt.boundary=4,Tt.storage=4):At.isVector2?(Tt.boundary=8,Tt.storage=8):At.isVector3||At.isColor?(Tt.boundary=16,Tt.storage=12):At.isVector4?(Tt.boundary=16,Tt.storage=16):At.isMatrix3?(Tt.boundary=48,Tt.storage=48):At.isMatrix4?(Tt.boundary=64,Tt.storage=64):At.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",At),Tt}function Ct(At){let Tt=At.target;Tt.removeEventListener("dispose",Ct);let kt=b.indexOf(Tt.__bindingPointIndex);b.splice(kt,1),e.deleteBuffer(d[Tt.id]),delete d[Tt.id],delete g[Tt.id]}function Pt(){for(let At in d)e.deleteBuffer(d[At]);b=[],d={},g={}}return{bind:$,update:_e,dispose:Pt}}function QG(){let e=_p("canvas");return e.style.display="block",e}function Dw(e={}){this.isWebGLRenderer=!0;let o=e.canvas!==void 0?e.canvas:QG(),a=e.context!==void 0?e.context:null,c=e.depth!==void 0?e.depth:!0,d=e.stencil!==void 0?e.stencil:!0,g=e.antialias!==void 0?e.antialias:!1,b=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,j=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,$=e.powerPreference!==void 0?e.powerPreference:"default",_e=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,st;a!==null?st=a.getContextAttributes().alpha:st=e.alpha!==void 0?e.alpha:!1;let rt=null,ut=null,gt=[],yt=[];this.domElement=o,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Sn,this.physicallyCorrectLights=!1,this.toneMapping=Hs,this.toneMappingExposure=1;let wt=this,Ct=!1,Pt=0,At=0,Tt=null,kt=-1,It=null,Lt=new Ke,Ft=new Ke,Nt=null,Ht=o.width,dr=o.height,hs=1,us=null,hn=null,un=new Ke(0,0,Ht,dr),bo=new Ke(0,0,Ht,dr),_s=!1,gn=new Tp,Gr=!1,ds=!1,Zn=null,Nn=new ce$1,Qn=new z$2,bu=new _,ou={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function g0(){return Tt===null?hs:1}let Su=a;function l1(Vv,eS){for(let eE=0;eE<Vv.length;eE++){let qx=Vv[eE],tE=o.getContext(qx,eS);if(tE!==null)return tE}return null}try{let Vv={alpha:!0,depth:c,stencil:d,antialias:g,premultipliedAlpha:b,preserveDrawingBuffer:j,powerPreference:$,failIfMajorPerformanceCaveat:_e};if("setAttribute"in o&&o.setAttribute("data-engine",`three.js r${ba$1}`),o.addEventListener("webglcontextlost",jL,!1),o.addEventListener("webglcontextrestored",TL,!1),o.addEventListener("webglcontextcreationerror",OL,!1),Su===null){let eS=["webgl2","webgl","experimental-webgl"];if(wt.isWebGL1Renderer===!0&&eS.shift(),Su=l1(eS,Vv),Su===null)throw l1(eS)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Su.getShaderPrecisionFormat===void 0&&(Su.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Vv){throw console.error("THREE.WebGLRenderer: "+Vv.message),Vv}let B0,a1,q1,ox,U_,tS,iS,wA,pO,aR,fD,AA,oI,mO,sp,xu,ux,tA,au,C3,X3,sR,N_,bL;function MO(){B0=new gU(Su),a1=new uU(Su,B0,e),B0.init(a1),sR=new WG(Su,B0,a1),q1=new jG(Su,B0,a1),ox=new xU,U_=new OG,tS=new HG(Su,B0,q1,U_,a1,sR,ox),iS=new dU(wt),wA=new mU(wt),pO=new Ck(Su,a1),N_=new lU(Su,B0,pO,a1),aR=new yU(Su,pO,ox,N_),fD=new AU(Su,aR,pO,ox),au=new wU(Su,a1,tS),xu=new hU(U_),AA=new DG(wt,iS,wA,B0,a1,N_,xu),oI=new YG(wt,U_),mO=new RG,sp=new VG(B0,a1),tA=new aU(wt,iS,wA,q1,fD,st,b),ux=new GG(wt,fD,a1),bL=new XG(Su,ox,a1,q1),C3=new cU(Su,B0,ox,a1),X3=new vU(Su,B0,ox,a1),ox.programs=AA.programs,wt.capabilities=a1,wt.extensions=B0,wt.properties=U_,wt.renderLists=mO,wt.shadowMap=ux,wt.state=q1,wt.info=ox}MO();let PL=new nw(wt,Su);this.xr=PL,this.getContext=function(){return Su},this.getContextAttributes=function(){return Su.getContextAttributes()},this.forceContextLoss=function(){let Vv=B0.get("WEBGL_lose_context");Vv&&Vv.loseContext()},this.forceContextRestore=function(){let Vv=B0.get("WEBGL_lose_context");Vv&&Vv.restoreContext()},this.getPixelRatio=function(){return hs},this.setPixelRatio=function(Vv){Vv!==void 0&&(hs=Vv,this.setSize(Ht,dr,!1))},this.getSize=function(Vv){return Vv.set(Ht,dr)},this.setSize=function(Vv,eS,eE){if(PL.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ht=Vv,dr=eS,o.width=Math.floor(Vv*hs),o.height=Math.floor(eS*hs),eE!==!1&&(o.style.width=Vv+"px",o.style.height=eS+"px"),this.setViewport(0,0,Vv,eS)},this.getDrawingBufferSize=function(Vv){return Vv.set(Ht*hs,dr*hs).floor()},this.setDrawingBufferSize=function(Vv,eS,eE){Ht=Vv,dr=eS,hs=eE,o.width=Math.floor(Vv*eE),o.height=Math.floor(eS*eE),this.setViewport(0,0,Vv,eS)},this.getCurrentViewport=function(Vv){return Vv.copy(Lt)},this.getViewport=function(Vv){return Vv.copy(un)},this.setViewport=function(Vv,eS,eE,qx){Vv.isVector4?un.set(Vv.x,Vv.y,Vv.z,Vv.w):un.set(Vv,eS,eE,qx),q1.viewport(Lt.copy(un).multiplyScalar(hs).floor())},this.getScissor=function(Vv){return Vv.copy(bo)},this.setScissor=function(Vv,eS,eE,qx){Vv.isVector4?bo.set(Vv.x,Vv.y,Vv.z,Vv.w):bo.set(Vv,eS,eE,qx),q1.scissor(Ft.copy(bo).multiplyScalar(hs).floor())},this.getScissorTest=function(){return _s},this.setScissorTest=function(Vv){q1.setScissorTest(_s=Vv)},this.setOpaqueSort=function(Vv){us=Vv},this.setTransparentSort=function(Vv){hn=Vv},this.getClearColor=function(Vv){return Vv.copy(tA.getClearColor())},this.setClearColor=function(){tA.setClearColor.apply(tA,arguments)},this.getClearAlpha=function(){return tA.getClearAlpha()},this.setClearAlpha=function(){tA.setClearAlpha.apply(tA,arguments)},this.clear=function(Vv=!0,eS=!0,eE=!0){let qx=0;Vv&&(qx|=16384),eS&&(qx|=256),eE&&(qx|=1024),Su.clear(qx)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",jL,!1),o.removeEventListener("webglcontextrestored",TL,!1),o.removeEventListener("webglcontextcreationerror",OL,!1),mO.dispose(),sp.dispose(),U_.dispose(),iS.dispose(),wA.dispose(),fD.dispose(),N_.dispose(),bL.dispose(),AA.dispose(),PL.dispose(),PL.removeEventListener("sessionstart",IO),PL.removeEventListener("sessionend",IL),Zn&&(Zn.dispose(),Zn=null),WL.stop()};function jL(Vv){Vv.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ct=!0}function TL(){console.log("THREE.WebGLRenderer: Context Restored."),Ct=!1;let Vv=ox.autoReset,eS=ux.enabled,eE=ux.autoUpdate,qx=ux.needsUpdate,tE=ux.type;MO(),ox.autoReset=Vv,ux.enabled=eS,ux.autoUpdate=eE,ux.needsUpdate=qx,ux.type=tE}function OL(Vv){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Vv.statusMessage)}function t$(Vv){let eS=Vv.target;eS.removeEventListener("dispose",t$),r$(eS)}function r$(Vv){X1(Vv),U_.remove(Vv)}function X1(Vv){let eS=U_.get(Vv).programs;eS!==void 0&&(eS.forEach(function(eE){AA.releaseProgram(eE)}),Vv.isShaderMaterial&&AA.releaseShaderCache(Vv))}this.renderBufferDirect=function(Vv,eS,eE,qx,tE,CL){eS===null&&(eS=ou);let FL=tE.isMesh&&tE.matrixWorld.determinant()<0,VL=S$(Vv,eS,eE,qx,tE);q1.setMaterial(qx,FL);let LL=eE.index,e$=1;qx.wireframe===!0&&(LL=aR.getWireframeAttribute(eE),e$=2);let GL=eE.drawRange,qL=eE.attributes.position,BL=GL.start*e$,o$=(GL.start+GL.count)*e$;CL!==null&&(BL=Math.max(BL,CL.start*e$),o$=Math.min(o$,(CL.start+CL.count)*e$)),LL!==null?(BL=Math.max(BL,0),o$=Math.min(o$,LL.count)):qL!=null&&(BL=Math.max(BL,0),o$=Math.min(o$,qL.count));let h$=o$-BL;if(h$<0||h$===1/0)return;N_.setup(tE,qx,VL,eE,LL);let f$,s$=C3;if(LL!==null&&(f$=pO.get(LL),s$=X3,s$.setIndex(f$)),tE.isMesh)qx.wireframe===!0?(q1.setLineWidth(qx.wireframeLinewidth*g0()),s$.setMode(1)):s$.setMode(4);else if(tE.isLine){let HL=qx.linewidth;HL===void 0&&(HL=1),q1.setLineWidth(HL*g0()),tE.isLineSegments?s$.setMode(1):tE.isLineLoop?s$.setMode(2):s$.setMode(3)}else tE.isPoints?s$.setMode(0):tE.isSprite&&s$.setMode(4);if(tE.isInstancedMesh)s$.renderInstances(BL,h$,tE.count);else if(eE.isInstancedBufferGeometry){let HL=eE._maxInstanceCount!==void 0?eE._maxInstanceCount:1/0,c$=Math.min(eE.instanceCount,HL);s$.renderInstances(BL,h$,c$)}else s$.render(BL,h$)},this.compile=function(Vv,eS){function eE(qx,tE,CL){qx.transparent===!0&&qx.side===tn&&qx.forceSinglePass===!1?(qx.side=yi,qx.needsUpdate=!0,l$(qx,tE,CL),qx.side=es,qx.needsUpdate=!0,l$(qx,tE,CL),qx.side=tn):l$(qx,tE,CL)}ut=sp.get(Vv),ut.init(),yt.push(ut),Vv.traverseVisible(function(qx){qx.isLight&&qx.layers.test(eS.layers)&&(ut.pushLight(qx),qx.castShadow&&ut.pushShadow(qx))}),ut.setupLights(wt.physicallyCorrectLights),Vv.traverse(function(qx){let tE=qx.material;if(tE)if(Array.isArray(tE))for(let CL=0;CL<tE.length;CL++){let FL=tE[CL];eE(FL,Vv,qx)}else eE(tE,Vv,qx)}),yt.pop(),ut=null};let rS=null;function SA(Vv){rS&&rS(Vv)}function IO(){WL.stop()}function IL(){WL.start()}let WL=new KM;WL.setAnimationLoop(SA),typeof self<"u"&&WL.setContext(self),this.setAnimationLoop=function(Vv){rS=Vv,PL.setAnimationLoop(Vv),Vv===null?WL.stop():WL.start()},PL.addEventListener("sessionstart",IO),PL.addEventListener("sessionend",IL),this.render=function(Vv,eS){if(eS!==void 0&&eS.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Ct===!0)return;Vv.matrixWorldAutoUpdate===!0&&Vv.updateMatrixWorld(),eS.parent===null&&eS.matrixWorldAutoUpdate===!0&&eS.updateMatrixWorld(),PL.enabled===!0&&PL.isPresenting===!0&&(PL.cameraAutoUpdate===!0&&PL.updateCamera(eS),eS=PL.getCamera()),Vv.isScene===!0&&Vv.onBeforeRender(wt,Vv,eS,Tt),ut=sp.get(Vv,yt.length),ut.init(),yt.push(ut),Nn.multiplyMatrices(eS.projectionMatrix,eS.matrixWorldInverse),gn.setFromProjectionMatrix(Nn),ds=this.localClippingEnabled,Gr=xu.init(this.clippingPlanes,ds),rt=mO.get(Vv,gt.length),rt.init(),gt.push(rt),n$(Vv,eS,0,wt.sortObjects),rt.finish(),wt.sortObjects===!0&&rt.sort(us,hn),Gr===!0&&xu.beginShadows();let eE=ut.state.shadowsArray;if(ux.render(eE,Vv,eS),Gr===!0&&xu.endShadows(),this.info.autoReset===!0&&this.info.reset(),tA.render(rt,Vv),ut.setupLights(wt.physicallyCorrectLights),eS.isArrayCamera){let qx=eS.cameras;for(let tE=0,CL=qx.length;tE<CL;tE++){let FL=qx[tE];a$(rt,Vv,FL,FL.viewport)}}else a$(rt,Vv,eS);Tt!==null&&(tS.updateMultisampleRenderTarget(Tt),tS.updateRenderTargetMipmap(Tt)),Vv.isScene===!0&&Vv.onAfterRender(wt,Vv,eS),N_.resetDefaultState(),kt=-1,It=null,yt.pop(),yt.length>0?ut=yt[yt.length-1]:ut=null,gt.pop(),gt.length>0?rt=gt[gt.length-1]:rt=null};function n$(Vv,eS,eE,qx){if(Vv.visible===!1)return;if(Vv.layers.test(eS.layers)){if(Vv.isGroup)eE=Vv.renderOrder;else if(Vv.isLOD)Vv.autoUpdate===!0&&Vv.update(eS);else if(Vv.isLight)ut.pushLight(Vv),Vv.castShadow&&ut.pushShadow(Vv);else if(Vv.isSprite){if(!Vv.frustumCulled||gn.intersectsSprite(Vv)){qx&&bu.setFromMatrixPosition(Vv.matrixWorld).applyMatrix4(Nn);let CL=fD.update(Vv),FL=Vv.material;FL.visible&&rt.push(Vv,CL,FL,eE,bu.z,null)}}else if((Vv.isMesh||Vv.isLine||Vv.isPoints)&&(Vv.isSkinnedMesh&&Vv.skeleton.frame!==ox.render.frame&&(Vv.skeleton.update(),Vv.skeleton.frame=ox.render.frame),!Vv.frustumCulled||gn.intersectsObject(Vv))){qx&&bu.setFromMatrixPosition(Vv.matrixWorld).applyMatrix4(Nn);let CL=fD.update(Vv),FL=Vv.material;if(Array.isArray(FL)){let VL=CL.groups;for(let LL=0,e$=VL.length;LL<e$;LL++){let GL=VL[LL],qL=FL[GL.materialIndex];qL&&qL.visible&&rt.push(Vv,CL,qL,eE,bu.z,GL)}}else FL.visible&&rt.push(Vv,CL,FL,eE,bu.z,null)}}let tE=Vv.children;for(let CL=0,FL=tE.length;CL<FL;CL++)n$(tE[CL],eS,eE,qx)}function a$(Vv,eS,eE,qx){let tE=Vv.opaque,CL=Vv.transmissive,FL=Vv.transparent;ut.setupLightsView(eE),Gr===!0&&xu.setGlobalState(wt.clippingPlanes,eE),CL.length>0&&d$(tE,eS,eE),qx&&q1.viewport(Lt.copy(qx)),tE.length>0&&i$(tE,eS,eE),CL.length>0&&i$(CL,eS,eE),FL.length>0&&i$(FL,eS,eE),q1.buffers.depth.setTest(!0),q1.buffers.depth.setMask(!0),q1.buffers.color.setMask(!0),q1.setPolygonOffset(!1)}function d$(Vv,eS,eE){let qx=a1.isWebGL2;Zn===null&&(Zn=new ft(1,1,{generateMipmaps:!0,type:B0.has("EXT_color_buffer_half_float")?va:Ir$1,minFilter:bc,samples:qx&&g===!0?4:0})),wt.getDrawingBufferSize(Qn),qx?Zn.setSize(Qn.x,Qn.y):Zn.setSize(gy(Qn.x),gy(Qn.y));let tE=wt.getRenderTarget();wt.setRenderTarget(Zn),wt.clear();let CL=wt.toneMapping;wt.toneMapping=Hs,i$(Vv,eS,eE),wt.toneMapping=CL,tS.updateMultisampleRenderTarget(Zn),tS.updateRenderTargetMipmap(Zn),wt.setRenderTarget(tE)}function i$(Vv,eS,eE){let qx=eS.isScene===!0?eS.overrideMaterial:null;for(let tE=0,CL=Vv.length;tE<CL;tE++){let FL=Vv[tE],VL=FL.object,LL=FL.geometry,e$=qx===null?FL.material:qx,GL=FL.group;VL.layers.test(eE.layers)&&u$(VL,eS,eE,LL,e$,GL)}}function u$(Vv,eS,eE,qx,tE,CL){Vv.onBeforeRender(wt,eS,eE,qx,tE,CL),Vv.modelViewMatrix.multiplyMatrices(eE.matrixWorldInverse,Vv.matrixWorld),Vv.normalMatrix.getNormalMatrix(Vv.modelViewMatrix),tE.onBeforeRender(wt,eS,eE,qx,Vv,CL),tE.transparent===!0&&tE.side===tn&&tE.forceSinglePass===!1?(tE.side=yi,tE.needsUpdate=!0,wt.renderBufferDirect(eE,eS,qx,tE,Vv,CL),tE.side=es,tE.needsUpdate=!0,wt.renderBufferDirect(eE,eS,qx,tE,Vv,CL),tE.side=tn):wt.renderBufferDirect(eE,eS,qx,tE,Vv,CL),Vv.onAfterRender(wt,eS,eE,qx,tE,CL)}function l$(Vv,eS,eE){eS.isScene!==!0&&(eS=ou);let qx=U_.get(Vv),tE=ut.state.lights,CL=ut.state.shadowsArray,FL=tE.state.version,VL=AA.getParameters(Vv,tE.state,CL,eS,eE),LL=AA.getProgramCacheKey(VL),e$=qx.programs;qx.environment=Vv.isMeshStandardMaterial?eS.environment:null,qx.fog=eS.fog,qx.envMap=(Vv.isMeshStandardMaterial?wA:iS).get(Vv.envMap||qx.environment),e$===void 0&&(Vv.addEventListener("dispose",t$),e$=new Map,qx.programs=e$);let GL=e$.get(LL);if(GL!==void 0){if(qx.currentProgram===GL&&qx.lightsStateVersion===FL)return x$(Vv,VL),GL}else VL.uniforms=AA.getUniforms(Vv),Vv.onBuild(eE,VL,wt),Vv.onBeforeCompile(VL,wt),GL=AA.acquireProgram(VL,LL),e$.set(LL,GL),qx.uniforms=VL.uniforms;let qL=qx.uniforms;(!Vv.isShaderMaterial&&!Vv.isRawShaderMaterial||Vv.clipping===!0)&&(qL.clippingPlanes=xu.uniform),x$(Vv,VL),qx.needsLights=b$(Vv),qx.lightsStateVersion=FL,qx.needsLights&&(qL.ambientLightColor.value=tE.state.ambient,qL.lightProbe.value=tE.state.probe,qL.directionalLights.value=tE.state.directional,qL.directionalLightShadows.value=tE.state.directionalShadow,qL.spotLights.value=tE.state.spot,qL.spotLightShadows.value=tE.state.spotShadow,qL.rectAreaLights.value=tE.state.rectArea,qL.ltc_1.value=tE.state.rectAreaLTC1,qL.ltc_2.value=tE.state.rectAreaLTC2,qL.pointLights.value=tE.state.point,qL.pointLightShadows.value=tE.state.pointShadow,qL.hemisphereLights.value=tE.state.hemi,qL.directionalShadowMap.value=tE.state.directionalShadowMap,qL.directionalShadowMatrix.value=tE.state.directionalShadowMatrix,qL.spotShadowMap.value=tE.state.spotShadowMap,qL.spotLightMatrix.value=tE.state.spotLightMatrix,qL.spotLightMap.value=tE.state.spotLightMap,qL.pointShadowMap.value=tE.state.pointShadowMap,qL.pointShadowMatrix.value=tE.state.pointShadowMatrix);let BL=GL.getUniforms(),o$=Gu.seqWithValue(BL.seq,qL);return qx.currentProgram=GL,qx.uniformsList=o$,GL}function x$(Vv,eS){let eE=U_.get(Vv);eE.outputEncoding=eS.outputEncoding,eE.instancing=eS.instancing,eE.skinning=eS.skinning,eE.morphTargets=eS.morphTargets,eE.morphNormals=eS.morphNormals,eE.morphColors=eS.morphColors,eE.morphTargetsCount=eS.morphTargetsCount,eE.numClippingPlanes=eS.numClippingPlanes,eE.numIntersection=eS.numClipIntersection,eE.vertexAlphas=eS.vertexAlphas,eE.vertexTangents=eS.vertexTangents,eE.toneMapping=eS.toneMapping}function S$(Vv,eS,eE,qx,tE){eS.isScene!==!0&&(eS=ou),tS.resetTextureUnits();let CL=eS.fog,FL=qx.isMeshStandardMaterial?eS.environment:null,VL=Tt===null?wt.outputEncoding:Tt.isXRRenderTarget===!0?Tt.texture.encoding:Sn,LL=(qx.isMeshStandardMaterial?wA:iS).get(qx.envMap||FL),e$=qx.vertexColors===!0&&!!eE.attributes.color&&eE.attributes.color.itemSize===4,GL=!!qx.normalMap&&!!eE.attributes.tangent,qL=!!eE.morphAttributes.position,BL=!!eE.morphAttributes.normal,o$=!!eE.morphAttributes.color,h$=qx.toneMapped?wt.toneMapping:Hs,f$=eE.morphAttributes.position||eE.morphAttributes.normal||eE.morphAttributes.color,s$=f$!==void 0?f$.length:0,HL=U_.get(qx),c$=ut.state.lights;if(Gr===!0&&(ds===!0||Vv!==It)){let wu=Vv===It&&qx.id===kt;xu.setState(qx,Vv,wu)}let UL=!1;qx.version===HL.__version?(HL.needsLights&&HL.lightsStateVersion!==c$.state.version||HL.outputEncoding!==VL||tE.isInstancedMesh&&HL.instancing===!1||!tE.isInstancedMesh&&HL.instancing===!0||tE.isSkinnedMesh&&HL.skinning===!1||!tE.isSkinnedMesh&&HL.skinning===!0||HL.envMap!==LL||qx.fog===!0&&HL.fog!==CL||HL.numClippingPlanes!==void 0&&(HL.numClippingPlanes!==xu.numPlanes||HL.numIntersection!==xu.numIntersection)||HL.vertexAlphas!==e$||HL.vertexTangents!==GL||HL.morphTargets!==qL||HL.morphNormals!==BL||HL.morphColors!==o$||HL.toneMapping!==h$||a1.isWebGL2===!0&&HL.morphTargetsCount!==s$)&&(UL=!0):(UL=!0,HL.__version=qx.version);let m$=HL.currentProgram;UL===!0&&(m$=l$(qx,eS,tE));let y$=!1,v$=!1,p$=!1,So=m$.getUniforms(),mu=HL.uniforms;if(q1.useProgram(m$.program)&&(y$=!0,v$=!0,p$=!0),qx.id!==kt&&(kt=qx.id,v$=!0),y$||It!==Vv){if(So.setValue(Su,"projectionMatrix",Vv.projectionMatrix),a1.logarithmicDepthBuffer&&So.setValue(Su,"logDepthBufFC",2/(Math.log(Vv.far+1)/Math.LN2)),It!==Vv&&(It=Vv,v$=!0,p$=!0),qx.isShaderMaterial||qx.isMeshPhongMaterial||qx.isMeshToonMaterial||qx.isMeshStandardMaterial||qx.envMap){let wu=So.map.cameraPosition;wu!==void 0&&wu.setValue(Su,bu.setFromMatrixPosition(Vv.matrixWorld))}(qx.isMeshPhongMaterial||qx.isMeshToonMaterial||qx.isMeshLambertMaterial||qx.isMeshBasicMaterial||qx.isMeshStandardMaterial||qx.isShaderMaterial)&&So.setValue(Su,"isOrthographic",Vv.isOrthographicCamera===!0),(qx.isMeshPhongMaterial||qx.isMeshToonMaterial||qx.isMeshLambertMaterial||qx.isMeshBasicMaterial||qx.isMeshStandardMaterial||qx.isShaderMaterial||qx.isShadowMaterial||tE.isSkinnedMesh)&&So.setValue(Su,"viewMatrix",Vv.matrixWorldInverse)}if(tE.isSkinnedMesh){So.setOptional(Su,tE,"bindMatrix"),So.setOptional(Su,tE,"bindMatrixInverse");let wu=tE.skeleton;wu&&(a1.floatVertexTextures?(wu.boneTexture===null&&wu.computeBoneTexture(),So.setValue(Su,"boneTexture",wu.boneTexture,tS),So.setValue(Su,"boneTextureSize",wu.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let P0=eE.morphAttributes;if((P0.position!==void 0||P0.normal!==void 0||P0.color!==void 0&&a1.isWebGL2===!0)&&au.update(tE,eE,qx,m$),(v$||HL.receiveShadow!==tE.receiveShadow)&&(HL.receiveShadow=tE.receiveShadow,So.setValue(Su,"receiveShadow",tE.receiveShadow)),qx.isMeshGouraudMaterial&&qx.envMap!==null&&(mu.envMap.value=LL,mu.flipEnvMap.value=LL.isCubeTexture&&LL.isRenderTargetTexture===!1?-1:1),v$&&(So.setValue(Su,"toneMappingExposure",wt.toneMappingExposure),HL.needsLights&&E$(mu,p$),CL&&qx.fog===!0&&oI.refreshFogUniforms(mu,CL),oI.refreshMaterialUniforms(mu,qx,hs,dr,Zn),Gu.upload(Su,HL.uniformsList,mu,tS)),qx.isShaderMaterial&&qx.uniformsNeedUpdate===!0&&(Gu.upload(Su,HL.uniformsList,mu,tS),qx.uniformsNeedUpdate=!1),qx.isSpriteMaterial&&So.setValue(Su,"center",tE.center),So.setValue(Su,"modelViewMatrix",tE.modelViewMatrix),So.setValue(Su,"normalMatrix",tE.normalMatrix),So.setValue(Su,"modelMatrix",tE.matrixWorld),tE.previousModelViewMatrix&&So.setValue(Su,"previousModelViewMatrix",tE.previousModelViewMatrix),Vv.previousProjectionMatrix&&So.setValue(Su,"previousProjectionMatrix",Vv.previousProjectionMatrix),qx.isShaderMaterial||qx.isRawShaderMaterial){let wu=qx.uniformsGroups;for(let ax=0,q3=wu.length;ax<q3;ax++)if(a1.isWebGL2){let g$=wu[ax];bL.update(g$,m$),bL.bind(g$,m$)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return m$}function E$(Vv,eS){Vv.ambientLightColor.needsUpdate=eS,Vv.lightProbe.needsUpdate=eS,Vv.directionalLights.needsUpdate=eS,Vv.directionalLightShadows.needsUpdate=eS,Vv.pointLights.needsUpdate=eS,Vv.pointLightShadows.needsUpdate=eS,Vv.spotLights.needsUpdate=eS,Vv.spotLightShadows.needsUpdate=eS,Vv.rectAreaLights.needsUpdate=eS,Vv.hemisphereLights.needsUpdate=eS}function b$(Vv){return Vv.isMeshLambertMaterial||Vv.isMeshToonMaterial||Vv.isMeshPhongMaterial||Vv.isMeshStandardMaterial||Vv.isShadowMaterial||Vv.isShaderMaterial&&Vv.lights===!0}this.getActiveCubeFace=function(){return Pt},this.getActiveMipmapLevel=function(){return At},this.getRenderTarget=function(){return Tt},this.setRenderTargetTextures=function(Vv,eS,eE){U_.get(Vv.texture).__webglTexture=eS,U_.get(Vv.depthTexture).__webglTexture=eE;let qx=U_.get(Vv);qx.__hasExternalTextures=!0,qx.__hasExternalTextures&&(qx.__autoAllocateDepthBuffer=eE===void 0,qx.__autoAllocateDepthBuffer||B0.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),qx.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Vv,eS){let eE=U_.get(Vv);eE.__webglFramebuffer=eS,eE.__useDefaultFramebuffer=eS===void 0},this.setRenderTarget=function(Vv,eS=0,eE=0){Tt=Vv,Pt=eS,At=eE;let qx=!0,tE=null,CL=!1,FL=!1;if(Vv){let VL=U_.get(Vv);VL.__useDefaultFramebuffer!==void 0?(q1.bindFramebuffer(36160,null),qx=!1):VL.__webglFramebuffer===void 0?tS.setupRenderTarget(Vv):VL.__hasExternalTextures&&tS.rebindTextures(Vv,U_.get(Vv.texture).__webglTexture,U_.get(Vv.depthTexture).__webglTexture);let LL=Vv.texture;(LL.isData3DTexture||LL.isDataArrayTexture||LL.isCompressedArrayTexture)&&(FL=!0);let e$=U_.get(Vv).__webglFramebuffer;Vv.isWebGLCubeRenderTarget?(tE=e$[eS],CL=!0):a1.isWebGL2&&Vv.samples>0&&tS.useMultisampledRTT(Vv)===!1?tE=U_.get(Vv).__webglMultisampledFramebuffer:tE=e$,Lt.copy(Vv.viewport),Ft.copy(Vv.scissor),Nt=Vv.scissorTest}else Lt.copy(un).multiplyScalar(hs).floor(),Ft.copy(bo).multiplyScalar(hs).floor(),Nt=_s;if(q1.bindFramebuffer(36160,tE)&&a1.drawBuffers&&qx&&q1.drawBuffers(Vv,tE),q1.viewport(Lt),q1.scissor(Ft),q1.setScissorTest(Nt),CL){let VL=U_.get(Vv.texture);Su.framebufferTexture2D(36160,36064,34069+eS,VL.__webglTexture,eE)}else if(FL){let VL=U_.get(Vv.texture),LL=eS||0;Su.framebufferTextureLayer(36160,36064,VL.__webglTexture,eE||0,LL)}kt=-1},this.readRenderTargetPixels=function(Vv,eS,eE,qx,tE,CL,FL){if(!(Vv&&Vv.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let VL=U_.get(Vv).__webglFramebuffer;if(Vv.isWebGLCubeRenderTarget&&FL!==void 0&&(VL=VL[FL]),VL){q1.bindFramebuffer(36160,VL);try{let LL=Vv.texture,e$=LL.format,GL=LL.type;if(e$!==Qr&&sR.convert(e$)!==Su.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let qL=GL===va&&(B0.has("EXT_color_buffer_half_float")||a1.isWebGL2&&B0.has("EXT_color_buffer_float"));if(GL!==Ir$1&&sR.convert(GL)!==Su.getParameter(35738)&&!(GL===Sr$1&&(a1.isWebGL2||B0.has("OES_texture_float")||B0.has("WEBGL_color_buffer_float")))&&!qL){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}eS>=0&&eS<=Vv.width-qx&&eE>=0&&eE<=Vv.height-tE&&Su.readPixels(eS,eE,qx,tE,sR.convert(e$),sR.convert(GL),CL)}finally{let LL=Tt!==null?U_.get(Tt).__webglFramebuffer:null;q1.bindFramebuffer(36160,LL)}}},this.copyFramebufferToTexture=function(Vv,eS,eE=0){let qx=Math.pow(2,-eE),tE=Math.floor(eS.image.width*qx),CL=Math.floor(eS.image.height*qx);tS.setTexture2D(eS,0),Su.copyTexSubImage2D(3553,eE,0,0,Vv.x,Vv.y,tE,CL),q1.unbindTexture()},this.copyTextureToTexture=function(Vv,eS,eE,qx=0){let tE=eS.image.width,CL=eS.image.height,FL=sR.convert(eE.format),VL=sR.convert(eE.type);tS.setTexture2D(eE,0),Su.pixelStorei(37440,eE.flipY),Su.pixelStorei(37441,eE.premultiplyAlpha),Su.pixelStorei(3317,eE.unpackAlignment),eS.isDataTexture?Su.texSubImage2D(3553,qx,Vv.x,Vv.y,tE,CL,FL,VL,eS.image.data):eS.isCompressedTexture?Su.compressedTexSubImage2D(3553,qx,Vv.x,Vv.y,eS.mipmaps[0].width,eS.mipmaps[0].height,FL,eS.mipmaps[0].data):Su.texSubImage2D(3553,qx,Vv.x,Vv.y,FL,VL,eS.image),qx===0&&eE.generateMipmaps&&Su.generateMipmap(3553),q1.unbindTexture()},this.copyTextureToTexture3D=function(Vv,eS,eE,qx,tE=0){if(wt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let CL=Vv.max.x-Vv.min.x+1,FL=Vv.max.y-Vv.min.y+1,VL=Vv.max.z-Vv.min.z+1,LL=sR.convert(qx.format),e$=sR.convert(qx.type),GL;if(qx.isData3DTexture)tS.setTexture3D(qx,0),GL=32879;else if(qx.isDataArrayTexture)tS.setTexture2DArray(qx,0),GL=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Su.pixelStorei(37440,qx.flipY),Su.pixelStorei(37441,qx.premultiplyAlpha),Su.pixelStorei(3317,qx.unpackAlignment);let qL=Su.getParameter(3314),BL=Su.getParameter(32878),o$=Su.getParameter(3316),h$=Su.getParameter(3315),f$=Su.getParameter(32877),s$=eE.isCompressedTexture?eE.mipmaps[0]:eE.image;Su.pixelStorei(3314,s$.width),Su.pixelStorei(32878,s$.height),Su.pixelStorei(3316,Vv.min.x),Su.pixelStorei(3315,Vv.min.y),Su.pixelStorei(32877,Vv.min.z),eE.isDataTexture||eE.isData3DTexture?Su.texSubImage3D(GL,tE,eS.x,eS.y,eS.z,CL,FL,VL,LL,e$,s$.data):eE.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Su.compressedTexSubImage3D(GL,tE,eS.x,eS.y,eS.z,CL,FL,VL,LL,s$.data)):Su.texSubImage3D(GL,tE,eS.x,eS.y,eS.z,CL,FL,VL,LL,e$,s$),Su.pixelStorei(3314,qL),Su.pixelStorei(32878,BL),Su.pixelStorei(3316,o$),Su.pixelStorei(3315,h$),Su.pixelStorei(32877,f$),tE===0&&qx.generateMipmaps&&Su.generateMipmap(GL),q1.unbindTexture()},this.initTexture=function(Vv){Vv.isCubeTexture?tS.setTextureCube(Vv,0):Vv.isData3DTexture?tS.setTexture3D(Vv,0):Vv.isDataArrayTexture||Vv.isCompressedArrayTexture?tS.setTexture2DArray(Vv,0):tS.setTexture2D(Vv,0),q1.unbindTexture()},this.resetState=function(){Pt=0,At=0,Tt=null,q1.reset(),N_.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var sw=class extends Dw{};sw.prototype.isWebGL1Renderer=!0;var qu=class{constructor(e,o=1,a=1e3){this.isFog=!0,this.name="",this.color=new We(e),this.near=o,this.far=a}clone(){return new qu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Pi=class extends _t{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,o){return super.copy(e,o),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let o=super.toJSON(e);return this.fog!==null&&(o.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(o.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(o.object.backgroundIntensity=this.backgroundIntensity),o}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},_y=class{constructor(e,o){this.isInterleavedBuffer=!0,this.array=e,this.stride=o,this.count=e!==void 0?e.length/o:0,this.usage=WS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,o,a){e*=this.stride,a*=o.stride;for(let c=0,d=this.stride;c<d;c++)this.array[e+c]=o.array[a+c];return this}set(e,o=0){return this.array.set(e,o),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let o=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),a=new this.constructor(o,this.stride);return a.setUsage(this.usage),a}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},xn=new _,wc=class{constructor(e,o,a,c=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=o,this.offset=a,this.normalized=c}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let o=0,a=this.data.count;o<a;o++)xn.fromBufferAttribute(this,o),xn.applyMatrix4(e),this.setXYZ(o,xn.x,xn.y,xn.z);return this}applyNormalMatrix(e){for(let o=0,a=this.count;o<a;o++)xn.fromBufferAttribute(this,o),xn.applyNormalMatrix(e),this.setXYZ(o,xn.x,xn.y,xn.z);return this}transformDirection(e){for(let o=0,a=this.count;o<a;o++)xn.fromBufferAttribute(this,o),xn.transformDirection(e),this.setXYZ(o,xn.x,xn.y,xn.z);return this}setX(e,o){return this.normalized&&(o=br(o,this.array)),this.data.array[e*this.data.stride+this.offset]=o,this}setY(e,o){return this.normalized&&(o=br(o,this.array)),this.data.array[e*this.data.stride+this.offset+1]=o,this}setZ(e,o){return this.normalized&&(o=br(o,this.array)),this.data.array[e*this.data.stride+this.offset+2]=o,this}setW(e,o){return this.normalized&&(o=br(o,this.array)),this.data.array[e*this.data.stride+this.offset+3]=o,this}getX(e){let o=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(o=ya(o,this.array)),o}getY(e){let o=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(o=ya(o,this.array)),o}getZ(e){let o=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(o=ya(o,this.array)),o}getW(e){let o=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(o=ya(o,this.array)),o}setXY(e,o,a){return e=e*this.data.stride+this.offset,this.normalized&&(o=br(o,this.array),a=br(a,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=a,this}setXYZ(e,o,a,c){return e=e*this.data.stride+this.offset,this.normalized&&(o=br(o,this.array),a=br(a,this.array),c=br(c,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=a,this.data.array[e+2]=c,this}setXYZW(e,o,a,c,d){return e=e*this.data.stride+this.offset,this.normalized&&(o=br(o,this.array),a=br(a,this.array),c=br(c,this.array),d=br(d,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=a,this.data.array[e+2]=c,this.data.array[e+3]=d,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let o=[];for(let a=0;a<this.count;a++){let c=a*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)o.push(this.data.array[c+d])}return new Xe(new this.array.constructor(o),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let o=[];for(let a=0;a<this.count;a++){let c=a*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)o.push(this.data.array[c+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Cp=class extends _t{constructor(){super(),this.isBone=!0,this.type="Bone"}},xi=class extends tr{constructor(e=null,o=1,a=1,c,d,g,b,j,$=Vt,_e=Vt,st,rt){super(null,g,b,j,$,_e,c,d,st,rt),this.isDataTexture=!0,this.image={data:e,width:o,height:a},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yM=new ce$1,KG=new ce$1,ul=class{constructor(e=[],o=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),o.length===0)this.calculateInverses();else if(e.length!==o.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let a=0,c=this.bones.length;a<c;a++)this.boneInverses.push(new ce$1)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,o=this.bones.length;e<o;e++){let a=new ce$1;this.bones[e]&&a.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(a)}}pose(){for(let e=0,o=this.bones.length;e<o;e++){let a=this.bones[e];a&&a.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,o=this.bones.length;e<o;e++){let a=this.bones[e];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}update(){let e=this.bones,o=this.boneInverses,a=this.boneMatrices,c=this.boneTexture;for(let d=0,g=e.length;d<g;d++){let b=e[d]?e[d].matrixWorld:KG;yM.multiplyMatrices(b,o[d]),yM.toArray(a,d*16)}c!==null&&(c.needsUpdate=!0)}clone(){return new ul(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=qM(e),e=Math.max(e,4);let o=new Float32Array(e*e*4);o.set(this.boneMatrices);let a=new xi(o,e,e,Qr,Sr$1);return a.needsUpdate=!0,this.boneMatrices=o,this.boneTexture=a,this.boneTextureSize=e,this}getBoneByName(e){for(let o=0,a=this.bones.length;o<a;o++){let c=this.bones[o];if(c.name===e)return c}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,o){this.uuid=e.uuid;for(let a=0,c=e.bones.length;a<c;a++){let d=e.bones[a],g=o[d];g===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",d),g=new Cp),this.bones.push(g),this.boneInverses.push(new ce$1().fromArray(e.boneInverses[a]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let o=this.bones,a=this.boneInverses;for(let c=0,d=o.length;c<d;c++){let g=o[c];e.bones.push(g.uuid);let b=a[c];e.boneInverses.push(b.toArray())}return e}},Eo=class extends Xe{constructor(e,o,a,c=1){super(e,o,a),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=c}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},vM=new ce$1,xM=new ce$1,iy=[],ZG=new ce$1,fp=new sr,Ey=class extends sr{constructor(e,o,a){super(e,o),this.isInstancedMesh=!0,this.instanceMatrix=new Eo(new Float32Array(a*16),16),this.instanceColor=null,this.count=a,this.frustumCulled=!1;for(let c=0;c<a;c++)this.setMatrixAt(c,ZG)}copy(e,o){return super.copy(e,o),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,o){o.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,o){o.fromArray(this.instanceMatrix.array,e*16)}raycast(e,o){let a=this.matrixWorld,c=this.count;if(fp.geometry=this.geometry,fp.material=this.material,fp.material!==void 0)for(let d=0;d<c;d++){this.getMatrixAt(d,vM),xM.multiplyMatrices(a,vM),fp.matrixWorld=xM,fp.raycast(e,iy);for(let g=0,b=iy.length;g<b;g++){let j=iy[g];j.instanceId=d,j.object=this,o.push(j)}iy.length=0}}setColorAt(e,o){this.instanceColor===null&&(this.instanceColor=new Eo(new Float32Array(this.instanceMatrix.count*3),3)),o.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,o){o.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},ys=class extends Sc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new We(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},bM=new _,SM=new _,wM=new ce$1,BS=new qs,ny=new Br,Ac=class extends _t{constructor(e=new Pe,o=new ys){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let o=e.attributes.position,a=[0];for(let c=1,d=o.count;c<d;c++)bM.fromBufferAttribute(o,c-1),SM.fromBufferAttribute(o,c),a[c]=a[c-1],a[c]+=bM.distanceTo(SM);e.setAttribute("lineDistance",new Te(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,o){let a=this.geometry,c=this.matrixWorld,d=e.params.Line.threshold,g=a.drawRange;if(a.boundingSphere===null&&a.computeBoundingSphere(),ny.copy(a.boundingSphere),ny.applyMatrix4(c),ny.radius+=d,e.ray.intersectsSphere(ny)===!1)return;wM.copy(c).invert(),BS.copy(e.ray).applyMatrix4(wM);let b=d/((this.scale.x+this.scale.y+this.scale.z)/3),j=b*b,$=new _,_e=new _,st=new _,rt=new _,ut=this.isLineSegments?2:1,gt=a.index,yt=a.attributes.position;if(gt!==null){let wt=Math.max(0,g.start),Ct=Math.min(gt.count,g.start+g.count);for(let Pt=wt,At=Ct-1;Pt<At;Pt+=ut){let Tt=gt.getX(Pt),kt=gt.getX(Pt+1);if($.fromBufferAttribute(yt,Tt),_e.fromBufferAttribute(yt,kt),BS.distanceSqToSegment($,_e,rt,st)>j)continue;rt.applyMatrix4(this.matrixWorld);let It=e.ray.origin.distanceTo(rt);It<e.near||It>e.far||o.push({distance:It,point:st.clone().applyMatrix4(this.matrixWorld),index:Pt,face:null,faceIndex:null,object:this})}}else{let wt=Math.max(0,g.start),Ct=Math.min(yt.count,g.start+g.count);for(let Pt=wt,At=Ct-1;Pt<At;Pt+=ut){if($.fromBufferAttribute(yt,Pt),_e.fromBufferAttribute(yt,Pt+1),BS.distanceSqToSegment($,_e,rt,st)>j)continue;rt.applyMatrix4(this.matrixWorld);let Tt=e.ray.origin.distanceTo(rt);Tt<e.near||Tt>e.far||o.push({distance:Tt,point:st.clone().applyMatrix4(this.matrixWorld),index:Pt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,o=Object.keys(e);if(o.length>0){let a=e[o[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,d=a.length;c<d;c++){let g=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=c}}}}},AM=new _,_M=new _,hl=class extends Ac{constructor(e,o){super(e,o),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let o=e.attributes.position,a=[];for(let c=0,d=o.count;c<d;c+=2)AM.fromBufferAttribute(o,c),_M.fromBufferAttribute(o,c+1),a[c]=c===0?0:a[c-1],a[c+1]=a[c]+AM.distanceTo(_M);e.setAttribute("lineDistance",new Te(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Ty=class extends tr{constructor(e,o,a,c,d,g,b,j,$){super(e,o,a,c,d,g,b,j,$),this.isVideoTexture=!0,this.minFilter=g!==void 0?g:tt,this.magFilter=d!==void 0?d:tt,this.generateMipmaps=!1;let _e=this;function st(){_e.needsUpdate=!0,e.requestVideoFrameCallback(st)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(st)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},My=class extends tr{constructor(e,o,a,c,d,g,b,j,$){super(e,o,a,c,d,g,b,j,$),this.isCanvasTexture=!0,this.needsUpdate=!0}},vs=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,o){let a=this.getUtoTmapping(e);return this.getPoint(a,o)}getPoints(e=5){let o=[];for(let a=0;a<=e;a++)o.push(this.getPoint(a/e));return o}getSpacedPoints(e=5){let o=[];for(let a=0;a<=e;a++)o.push(this.getPointAt(a/e));return o}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let o=[],a,c=this.getPoint(0),d=0;o.push(0);for(let g=1;g<=e;g++)a=this.getPoint(g/e),d+=a.distanceTo(c),o.push(d),c=a;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,o){let a=this.getLengths(),c=0,d=a.length,g;o?g=o:g=e*a[d-1];let b=0,j=d-1,$;for(;b<=j;)if(c=Math.floor(b+(j-b)/2),$=a[c]-g,$<0)b=c+1;else if($>0)j=c-1;else{j=c;break}if(c=j,a[c]===g)return c/(d-1);let _e=a[c],st=a[c+1]-_e,rt=(g-_e)/st;return(c+rt)/(d-1)}getTangent(e,o){let a=e-1e-4,c=e+1e-4;a<0&&(a=0),c>1&&(c=1);let d=this.getPoint(a),g=this.getPoint(c),b=o||(d.isVector2?new z$2:new _);return b.copy(g).sub(d).normalize(),b}getTangentAt(e,o){let a=this.getUtoTmapping(e);return this.getTangent(a,o)}computeFrenetFrames(e,o){let a=new _,c=[],d=[],g=[],b=new _,j=new ce$1;for(let ut=0;ut<=e;ut++){let gt=ut/e;c[ut]=this.getTangentAt(gt,new _)}d[0]=new _,g[0]=new _;let $=Number.MAX_VALUE,_e=Math.abs(c[0].x),st=Math.abs(c[0].y),rt=Math.abs(c[0].z);_e<=$&&($=_e,a.set(1,0,0)),st<=$&&($=st,a.set(0,1,0)),rt<=$&&a.set(0,0,1),b.crossVectors(c[0],a).normalize(),d[0].crossVectors(c[0],b),g[0].crossVectors(c[0],d[0]);for(let ut=1;ut<=e;ut++){if(d[ut]=d[ut-1].clone(),g[ut]=g[ut-1].clone(),b.crossVectors(c[ut-1],c[ut]),b.length()>Number.EPSILON){b.normalize();let gt=Math.acos(gi(c[ut-1].dot(c[ut]),-1,1));d[ut].applyMatrix4(j.makeRotationAxis(b,gt))}g[ut].crossVectors(c[ut],d[ut])}if(o===!0){let ut=Math.acos(gi(d[0].dot(d[e]),-1,1));ut/=e,c[0].dot(b.crossVectors(d[0],d[e]))>0&&(ut=-ut);for(let gt=1;gt<=e;gt++)d[gt].applyMatrix4(j.makeRotationAxis(c[gt],ut*gt)),g[gt].crossVectors(c[gt],d[gt])}return{tangents:c,normals:d,binormals:g}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},_c=class extends vs{constructor(e=0,o=0,a=1,c=1,d=0,g=Math.PI*2,b=!1,j=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=o,this.xRadius=a,this.yRadius=c,this.aStartAngle=d,this.aEndAngle=g,this.aClockwise=b,this.aRotation=j}getPoint(e,o){let a=o||new z$2,c=Math.PI*2,d=this.aEndAngle-this.aStartAngle,g=Math.abs(d)<Number.EPSILON;for(;d<0;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(g?d=0:d=c),this.aClockwise===!0&&!g&&(d===c?d=-c:d=d-c);let b=this.aStartAngle+e*d,j=this.aX+this.xRadius*Math.cos(b),$=this.aY+this.yRadius*Math.sin(b);if(this.aRotation!==0){let _e=Math.cos(this.aRotation),st=Math.sin(this.aRotation),rt=j-this.aX,ut=$-this.aY;j=rt*_e-ut*st+this.aX,$=rt*st+ut*_e+this.aY}return a.set(j,$)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ow=class extends _c{constructor(e,o,a,c,d,g){super(e,o,a,a,c,d,g),this.isArcCurve=!0,this.type="ArcCurve"}};function Ow(){let e=0,o=0,a=0,c=0;function d(g,b,j,$){e=g,o=j,a=-3*g+3*b-2*j-$,c=2*g-2*b+j+$}return{initCatmullRom:function(g,b,j,$,_e){d(b,j,_e*(j-g),_e*($-b))},initNonuniformCatmullRom:function(g,b,j,$,_e,st,rt){let ut=(b-g)/_e-(j-g)/(_e+st)+(j-b)/st,gt=(j-b)/st-($-b)/(st+rt)+($-j)/rt;ut*=st,gt*=st,d(b,j,ut,gt)},calc:function(g){let b=g*g,j=b*g;return e+o*g+a*b+c*j}}}var sy=new _,NS=new Ow,FS=new Ow,kS=new Ow,aw=class extends vs{constructor(e=[],o=!1,a="centripetal",c=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=o,this.curveType=a,this.tension=c}getPoint(e,o=new _){let a=o,c=this.points,d=c.length,g=(d-(this.closed?0:1))*e,b=Math.floor(g),j=g-b;this.closed?b+=b>0?0:(Math.floor(Math.abs(b)/d)+1)*d:j===0&&b===d-1&&(b=d-2,j=1);let $,_e;this.closed||b>0?$=c[(b-1)%d]:(sy.subVectors(c[0],c[1]).add(c[0]),$=sy);let st=c[b%d],rt=c[(b+1)%d];if(this.closed||b+2<d?_e=c[(b+2)%d]:(sy.subVectors(c[d-1],c[d-2]).add(c[d-1]),_e=sy),this.curveType==="centripetal"||this.curveType==="chordal"){let ut=this.curveType==="chordal"?.5:.25,gt=Math.pow($.distanceToSquared(st),ut),yt=Math.pow(st.distanceToSquared(rt),ut),wt=Math.pow(rt.distanceToSquared(_e),ut);yt<1e-4&&(yt=1),gt<1e-4&&(gt=yt),wt<1e-4&&(wt=yt),NS.initNonuniformCatmullRom($.x,st.x,rt.x,_e.x,gt,yt,wt),FS.initNonuniformCatmullRom($.y,st.y,rt.y,_e.y,gt,yt,wt),kS.initNonuniformCatmullRom($.z,st.z,rt.z,_e.z,gt,yt,wt)}else this.curveType==="catmullrom"&&(NS.initCatmullRom($.x,st.x,rt.x,_e.x,this.tension),FS.initCatmullRom($.y,st.y,rt.y,_e.y,this.tension),kS.initCatmullRom($.z,st.z,rt.z,_e.z,this.tension));return a.set(NS.calc(j),FS.calc(j),kS.calc(j)),a}copy(e){super.copy(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){let c=e.points[o];this.points.push(c.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let o=0,a=this.points.length;o<a;o++){let c=this.points[o];e.points.push(c.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){let c=e.points[o];this.points.push(new _().fromArray(c))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function EM(e,o,a,c,d){let g=(c-o)*.5,b=(d-a)*.5,j=e*e,$=e*j;return(2*a-2*c+g+b)*$+(-3*a+3*c-2*g-b)*j+g*e+a}function JG(e,o){let a=1-e;return a*a*o}function $G(e,o){return 2*(1-e)*e*o}function e4(e,o){return e*e*o}function bp(e,o,a,c){return JG(e,o)+$G(e,a)+e4(e,c)}function t4(e,o){let a=1-e;return a*a*a*o}function r4(e,o){let a=1-e;return 3*a*a*e*o}function i4(e,o){return 3*(1-e)*e*e*o}function n4(e,o){return e*e*e*o}function Sp(e,o,a,c,d){return t4(e,o)+r4(e,a)+i4(e,c)+n4(e,d)}var fn=class extends vs{constructor(e=new z$2,o=new z$2,a=new z$2,c=new z$2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=o,this.v2=a,this.v3=c}getPoint(e,o=new z$2){let a=o,c=this.v0,d=this.v1,g=this.v2,b=this.v3;return a.set(Sp(e,c.x,d.x,g.x,b.x),Sp(e,c.y,d.y,g.y,b.y)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ec=class extends vs{constructor(e=new _,o=new _,a=new _,c=new _){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=o,this.v2=a,this.v3=c}getPoint(e,o=new _){let a=o,c=this.v0,d=this.v1,g=this.v2,b=this.v3;return a.set(Sp(e,c.x,d.x,g.x,b.x),Sp(e,c.y,d.y,g.y,b.y),Sp(e,c.z,d.z,g.z,b.z)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},pn=class extends vs{constructor(e=new z$2,o=new z$2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=o}getPoint(e,o=new z$2){let a=o;return e===1?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(e).add(this.v1)),a}getPointAt(e,o){return this.getPoint(e,o)}getTangent(e,o){let a=o||new z$2;return a.copy(this.v2).sub(this.v1).normalize(),a}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Pp=class extends vs{constructor(e=new _,o=new _){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=o}getPoint(e,o=new _){let a=o;return e===1?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(e).add(this.v1)),a}getPointAt(e,o){return this.getPoint(e,o)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},is$1=class extends vs{constructor(o=new z$2,a=new z$2,c=new z$2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=o,this.v1=a,this.v2=c}getPoint(o,a=new z$2){let c=a,d=this.v0,g=this.v1,b=this.v2;return c.set(bp(o,d.x,g.x,b.x),bp(o,d.y,g.y,b.y)),c}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){let o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}},lw=class extends vs{constructor(e=new _,o=new _,a=new _){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=o,this.v2=a}getPoint(e,o=new _){let a=o,c=this.v0,d=this.v1,g=this.v2;return a.set(bp(e,c.x,d.x,g.x),bp(e,c.y,d.y,g.y),bp(e,c.z,d.z,g.z)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Yu=class extends vs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,o=new z$2){let a=o,c=this.points,d=(c.length-1)*e,g=Math.floor(d),b=d-g,j=c[g===0?g:g-1],$=c[g],_e=c[g>c.length-2?c.length-1:g+1],st=c[g>c.length-3?c.length-1:g+2];return a.set(EM(b,j.x,$.x,_e.x,st.x),EM(b,j.y,$.y,_e.y,st.y)),a}copy(e){super.copy(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){let c=e.points[o];this.points.push(c.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let o=0,a=this.points.length;o<a;o++){let c=this.points[o];e.points.push(c.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){let c=e.points[o];this.points.push(new z$2().fromArray(c))}return this}},s4=Object.freeze({__proto__:null,ArcCurve:ow,CatmullRomCurve3:aw,CubicBezierCurve:fn,CubicBezierCurve3:Ec,EllipseCurve:_c,LineCurve:pn,LineCurve3:Pp,QuadraticBezierCurve:is$1,QuadraticBezierCurve3:lw,SplineCurve:Yu}),Dp=class extends vs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);e.equals(o)||this.curves.push(new pn(o,e))}getPoint(e,o){let a=e*this.getLength(),c=this.getCurveLengths(),d=0;for(;d<c.length;){if(c[d]>=a){let g=c[d]-a,b=this.curves[d],j=b.getLength(),$=j===0?0:1-g/j;return b.getPointAt($,o)}d++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],o=0;for(let a=0,c=this.curves.length;a<c;a++)o+=this.curves[a].getLength(),e.push(o);return this.cacheLengths=e,e}getSpacedPoints(e=40){let o=[];for(let a=0;a<=e;a++)o.push(this.getPoint(a/e));return this.autoClose&&o.push(o[0]),o}getPoints(e=12){let o=[],a;for(let c=0,d=this.curves;c<d.length;c++){let g=d[c],b=g.isEllipseCurve?e*2:g.isLineCurve||g.isLineCurve3?1:g.isSplineCurve?e*g.points.length:e,j=g.getPoints(b);for(let $=0;$<j.length;$++){let _e=j[$];a&&a.equals(_e)||(o.push(_e),a=_e)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(e){super.copy(e),this.curves=[];for(let o=0,a=e.curves.length;o<a;o++){let c=e.curves[o];this.curves.push(c.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let o=0,a=this.curves.length;o<a;o++){let c=this.curves[o];e.curves.push(c.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let o=0,a=e.curves.length;o<a;o++){let c=e.curves[o];this.curves.push(new s4[c.type]().fromJSON(c))}return this}},Tc=class extends Dp{constructor(e){super(),this.type="Path",this.currentPoint=new z$2,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let o=1,a=e.length;o<a;o++)this.lineTo(e[o].x,e[o].y);return this}moveTo(e,o){return this.currentPoint.set(e,o),this}lineTo(e,o){let a=new pn(this.currentPoint.clone(),new z$2(e,o));return this.curves.push(a),this.currentPoint.set(e,o),this}quadraticCurveTo(e,o,a,c){let d=new is$1(this.currentPoint.clone(),new z$2(e,o),new z$2(a,c));return this.curves.push(d),this.currentPoint.set(a,c),this}bezierCurveTo(e,o,a,c,d,g){let b=new fn(this.currentPoint.clone(),new z$2(e,o),new z$2(a,c),new z$2(d,g));return this.curves.push(b),this.currentPoint.set(d,g),this}splineThru(e){let o=[this.currentPoint.clone()].concat(e),a=new Yu(o);return this.curves.push(a),this.currentPoint.copy(e[e.length-1]),this}arc(e,o,a,c,d,g){let b=this.currentPoint.x,j=this.currentPoint.y;return this.absarc(e+b,o+j,a,c,d,g),this}absarc(e,o,a,c,d,g){return this.absellipse(e,o,a,a,c,d,g),this}ellipse(e,o,a,c,d,g,b,j){let $=this.currentPoint.x,_e=this.currentPoint.y;return this.absellipse(e+$,o+_e,a,c,d,g,b,j),this}absellipse(e,o,a,c,d,g,b,j){let $=new _c(e,o,a,c,d,g,b,j);if(this.curves.length>0){let st=$.getPoint(0);st.equals(this.currentPoint)||this.lineTo(st.x,st.y)}this.curves.push($);let _e=$.getPoint(1);return this.currentPoint.copy(_e),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Xu=class extends Pe{constructor(e=[new z$2(0,-.5),new z$2(.5,0),new z$2(0,.5)],o=12,a=0,c=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:o,phiStart:a,phiLength:c},o=Math.floor(o),c=gi(c,0,Math.PI*2);let d=[],g=[],b=[],j=[],$=[],_e=1/o,st=new _,rt=new z$2,ut=new _,gt=new _,yt=new _,wt=0,Ct=0;for(let Pt=0;Pt<=e.length-1;Pt++)switch(Pt){case 0:wt=e[Pt+1].x-e[Pt].x,Ct=e[Pt+1].y-e[Pt].y,ut.x=Ct*1,ut.y=-wt,ut.z=Ct*0,yt.copy(ut),ut.normalize(),j.push(ut.x,ut.y,ut.z);break;case e.length-1:j.push(yt.x,yt.y,yt.z);break;default:wt=e[Pt+1].x-e[Pt].x,Ct=e[Pt+1].y-e[Pt].y,ut.x=Ct*1,ut.y=-wt,ut.z=Ct*0,gt.copy(ut),ut.x+=yt.x,ut.y+=yt.y,ut.z+=yt.z,ut.normalize(),j.push(ut.x,ut.y,ut.z),yt.copy(gt)}for(let Pt=0;Pt<=o;Pt++){let At=a+Pt*_e*c,Tt=Math.sin(At),kt=Math.cos(At);for(let It=0;It<=e.length-1;It++){st.x=e[It].x*Tt,st.y=e[It].y,st.z=e[It].x*kt,g.push(st.x,st.y,st.z),rt.x=Pt/o,rt.y=It/(e.length-1),b.push(rt.x,rt.y);let Lt=j[3*It+0]*Tt,Ft=j[3*It+1],Nt=j[3*It+0]*kt;$.push(Lt,Ft,Nt)}}for(let Pt=0;Pt<o;Pt++)for(let At=0;At<e.length-1;At++){let Tt=At+Pt*e.length,kt=Tt,It=Tt+e.length,Lt=Tt+e.length+1,Ft=Tt+1;d.push(kt,It,Ft),d.push(Lt,Ft,It)}this.setIndex(d),this.setAttribute("position",new Te(g,3)),this.setAttribute("uv",new Te(b,2)),this.setAttribute("normal",new Te($,3))}static fromJSON(e){return new Xu(e.points,e.segments,e.phiStart,e.phiLength)}},Mc=class extends Pe{constructor(e=1,o=1,a=1,c=32,d=1,g=!1,b=0,j=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:o,height:a,radialSegments:c,heightSegments:d,openEnded:g,thetaStart:b,thetaLength:j};let $=this;c=Math.floor(c),d=Math.floor(d);let _e=[],st=[],rt=[],ut=[],gt=0,yt=[],wt=a/2,Ct=0;Pt(),g===!1&&(e>0&&At(!0),o>0&&At(!1)),this.setIndex(_e),this.setAttribute("position",new Te(st,3)),this.setAttribute("normal",new Te(rt,3)),this.setAttribute("uv",new Te(ut,2));function Pt(){let Tt=new _,kt=new _,It=0,Lt=(o-e)/a;for(let Ft=0;Ft<=d;Ft++){let Nt=[],Ht=Ft/d,dr=Ht*(o-e)+e;for(let hs=0;hs<=c;hs++){let us=hs/c,hn=us*j+b,un=Math.sin(hn),bo=Math.cos(hn);kt.x=dr*un,kt.y=-Ht*a+wt,kt.z=dr*bo,st.push(kt.x,kt.y,kt.z),Tt.set(un,Lt,bo).normalize(),rt.push(Tt.x,Tt.y,Tt.z),ut.push(us,1-Ht),Nt.push(gt++)}yt.push(Nt)}for(let Ft=0;Ft<c;Ft++)for(let Nt=0;Nt<d;Nt++){let Ht=yt[Nt][Ft],dr=yt[Nt+1][Ft],hs=yt[Nt+1][Ft+1],us=yt[Nt][Ft+1];_e.push(Ht,dr,us),_e.push(dr,hs,us),It+=6}$.addGroup(Ct,It,0),Ct+=It}function At(Tt){let kt=gt,It=new z$2,Lt=new _,Ft=0,Nt=Tt===!0?e:o,Ht=Tt===!0?1:-1;for(let hs=1;hs<=c;hs++)st.push(0,wt*Ht,0),rt.push(0,Ht,0),ut.push(.5,.5),gt++;let dr=gt;for(let hs=0;hs<=c;hs++){let us=hs/c*j+b,hn=Math.cos(us),un=Math.sin(us);Lt.x=Nt*un,Lt.y=wt*Ht,Lt.z=Nt*hn,st.push(Lt.x,Lt.y,Lt.z),rt.push(0,Ht,0),It.x=hn*.5+.5,It.y=un*.5*Ht+.5,ut.push(It.x,It.y),gt++}for(let hs=0;hs<c;hs++){let us=kt+hs,hn=dr+hs;Tt===!0?_e.push(hn,hn+1,us):_e.push(hn+1,hn,us),Ft+=3}$.addGroup(Ct,Ft,Tt===!0?1:2),Ct+=Ft}}static fromJSON(e){return new Mc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},dl=class extends Mc{constructor(e=1,o=1,a=32,c=1,d=!1,g=0,b=Math.PI*2){super(0,e,o,a,c,d,g,b),this.type="ConeGeometry",this.parameters={radius:e,height:o,radialSegments:a,heightSegments:c,openEnded:d,thetaStart:g,thetaLength:b}}static fromJSON(e){return new dl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Qu=class extends Pe{constructor(e=[],o=[],a=1,c=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:o,radius:a,detail:c};let d=[],g=[];b(c),$(a),_e(),this.setAttribute("position",new Te(d,3)),this.setAttribute("normal",new Te(d.slice(),3)),this.setAttribute("uv",new Te(g,2)),c===0?this.computeVertexNormals():this.normalizeNormals();function b(Pt){let At=new _,Tt=new _,kt=new _;for(let It=0;It<o.length;It+=3)ut(o[It+0],At),ut(o[It+1],Tt),ut(o[It+2],kt),j(At,Tt,kt,Pt)}function j(Pt,At,Tt,kt){let It=kt+1,Lt=[];for(let Ft=0;Ft<=It;Ft++){Lt[Ft]=[];let Nt=Pt.clone().lerp(Tt,Ft/It),Ht=At.clone().lerp(Tt,Ft/It),dr=It-Ft;for(let hs=0;hs<=dr;hs++)hs===0&&Ft===It?Lt[Ft][hs]=Nt:Lt[Ft][hs]=Nt.clone().lerp(Ht,hs/dr)}for(let Ft=0;Ft<It;Ft++)for(let Nt=0;Nt<2*(It-Ft)-1;Nt++){let Ht=Math.floor(Nt/2);Nt%2===0?(rt(Lt[Ft][Ht+1]),rt(Lt[Ft+1][Ht]),rt(Lt[Ft][Ht])):(rt(Lt[Ft][Ht+1]),rt(Lt[Ft+1][Ht+1]),rt(Lt[Ft+1][Ht]))}}function $(Pt){let At=new _;for(let Tt=0;Tt<d.length;Tt+=3)At.x=d[Tt+0],At.y=d[Tt+1],At.z=d[Tt+2],At.normalize().multiplyScalar(Pt),d[Tt+0]=At.x,d[Tt+1]=At.y,d[Tt+2]=At.z}function _e(){let Pt=new _;for(let At=0;At<d.length;At+=3){Pt.x=d[At+0],Pt.y=d[At+1],Pt.z=d[At+2];let Tt=wt(Pt)/2/Math.PI+.5,kt=Ct(Pt)/Math.PI+.5;g.push(Tt,1-kt)}gt(),st()}function st(){for(let Pt=0;Pt<g.length;Pt+=6){let At=g[Pt+0],Tt=g[Pt+2],kt=g[Pt+4],It=Math.max(At,Tt,kt),Lt=Math.min(At,Tt,kt);It>.9&&Lt<.1&&(At<.2&&(g[Pt+0]+=1),Tt<.2&&(g[Pt+2]+=1),kt<.2&&(g[Pt+4]+=1))}}function rt(Pt){d.push(Pt.x,Pt.y,Pt.z)}function ut(Pt,At){let Tt=Pt*3;At.x=e[Tt+0],At.y=e[Tt+1],At.z=e[Tt+2]}function gt(){let Pt=new _,At=new _,Tt=new _,kt=new _,It=new z$2,Lt=new z$2,Ft=new z$2;for(let Nt=0,Ht=0;Nt<d.length;Nt+=9,Ht+=6){Pt.set(d[Nt+0],d[Nt+1],d[Nt+2]),At.set(d[Nt+3],d[Nt+4],d[Nt+5]),Tt.set(d[Nt+6],d[Nt+7],d[Nt+8]),It.set(g[Ht+0],g[Ht+1]),Lt.set(g[Ht+2],g[Ht+3]),Ft.set(g[Ht+4],g[Ht+5]),kt.copy(Pt).add(At).add(Tt).divideScalar(3);let dr=wt(kt);yt(It,Ht+0,Pt,dr),yt(Lt,Ht+2,At,dr),yt(Ft,Ht+4,Tt,dr)}}function yt(Pt,At,Tt,kt){kt<0&&Pt.x===1&&(g[At]=Pt.x-1),Tt.x===0&&Tt.z===0&&(g[At]=kt/2/Math.PI+.5)}function wt(Pt){return Math.atan2(Pt.z,-Pt.x)}function Ct(Pt){return Math.atan2(-Pt.y,Math.sqrt(Pt.x*Pt.x+Pt.z*Pt.z))}}static fromJSON(e){return new Qu(e.vertices,e.indices,e.radius,e.details)}},Ku=class extends Qu{constructor(e=1,o=0){let a=(1+Math.sqrt(5))/2,c=1/a,d=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-c,-a,0,-c,a,0,c,-a,0,c,a,-c,-a,0,-c,a,0,c,-a,0,c,a,0,-a,0,-c,a,0,-c,-a,0,c,a,0,c],g=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(d,g,e,o),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new Ku(e.radius,e.detail)}},xa=class extends Tc{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){let o=[];for(let a=0,c=this.holes.length;a<c;a++)o[a]=this.holes[a].getPoints(e);return o}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let o=0,a=e.holes.length;o<a;o++){let c=e.holes[o];this.holes.push(c.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let o=0,a=this.holes.length;o<a;o++){let c=this.holes[o];e.holes.push(c.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let o=0,a=e.holes.length;o<a;o++){let c=e.holes[o];this.holes.push(new Tc().fromJSON(c))}return this}},o4={triangulate:function(e,o,a=2){let c=o&&o.length,d=c?o[0]*a:e.length,g=tC(e,0,d,a,!0),b=[];if(!g||g.next===g.prev)return b;let j,$,_e,st,rt,ut,gt;if(c&&(g=h4(e,o,g,a)),e.length>80*a){j=_e=e[0],$=st=e[1];for(let yt=a;yt<d;yt+=a)rt=e[yt],ut=e[yt+1],rt<j&&(j=rt),ut<$&&($=ut),rt>_e&&(_e=rt),ut>st&&(st=ut);gt=Math.max(_e-j,st-$),gt=gt!==0?32767/gt:0}return Op(g,b,a,j,$,gt,0),b}};function tC(e,o,a,c,d){let g,b;if(d===w4(e,o,a,c)>0)for(g=o;g<a;g+=c)b=TM(g,e[g],e[g+1],b);else for(g=a-c;g>=o;g-=c)b=TM(g,e[g],e[g+1],b);return b&&Hy(b,b.next)&&(Rp(b),b=b.next),b}function Cc(e,o){if(!e)return e;o||(o=e);let a=e,c;do if(c=!1,!a.steiner&&(Hy(a,a.next)||jr$1(a.prev,a,a.next)===0)){if(Rp(a),a=o=a.prev,a===a.next)break;c=!0}else a=a.next;while(c||a!==o);return o}function Op(e,o,a,c,d,g,b){if(!e)return;!b&&g&&g4(e,c,d,g);let j=e,$,_e;for(;e.prev!==e.next;){if($=e.prev,_e=e.next,g?l4(e,c,d,g):a4(e)){o.push($.i/a|0),o.push(e.i/a|0),o.push(_e.i/a|0),Rp(e),e=_e.next,j=_e.next;continue}if(e=_e,e===j){b?b===1?(e=c4(Cc(e),o,a),Op(e,o,a,c,d,g,2)):b===2&&u4(e,o,a,c,d,g):Op(Cc(e),o,a,c,d,g,1);break}}}function a4(e){let o=e.prev,a=e,c=e.next;if(jr$1(o,a,c)>=0)return!1;let d=o.x,g=a.x,b=c.x,j=o.y,$=a.y,_e=c.y,st=d<g?d<b?d:b:g<b?g:b,rt=j<$?j<_e?j:_e:$<_e?$:_e,ut=d>g?d>b?d:b:g>b?g:b,gt=j>$?j>_e?j:_e:$>_e?$:_e,yt=c.next;for(;yt!==o;){if(yt.x>=st&&yt.x<=ut&&yt.y>=rt&&yt.y<=gt&&Uu(d,j,g,$,b,_e,yt.x,yt.y)&&jr$1(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function l4(e,o,a,c){let d=e.prev,g=e,b=e.next;if(jr$1(d,g,b)>=0)return!1;let j=d.x,$=g.x,_e=b.x,st=d.y,rt=g.y,ut=b.y,gt=j<$?j<_e?j:_e:$<_e?$:_e,yt=st<rt?st<ut?st:ut:rt<ut?rt:ut,wt=j>$?j>_e?j:_e:$>_e?$:_e,Ct=st>rt?st>ut?st:ut:rt>ut?rt:ut,Pt=cw(gt,yt,o,a,c),At=cw(wt,Ct,o,a,c),Tt=e.prevZ,kt=e.nextZ;for(;Tt&&Tt.z>=Pt&&kt&&kt.z<=At;){if(Tt.x>=gt&&Tt.x<=wt&&Tt.y>=yt&&Tt.y<=Ct&&Tt!==d&&Tt!==b&&Uu(j,st,$,rt,_e,ut,Tt.x,Tt.y)&&jr$1(Tt.prev,Tt,Tt.next)>=0||(Tt=Tt.prevZ,kt.x>=gt&&kt.x<=wt&&kt.y>=yt&&kt.y<=Ct&&kt!==d&&kt!==b&&Uu(j,st,$,rt,_e,ut,kt.x,kt.y)&&jr$1(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;Tt&&Tt.z>=Pt;){if(Tt.x>=gt&&Tt.x<=wt&&Tt.y>=yt&&Tt.y<=Ct&&Tt!==d&&Tt!==b&&Uu(j,st,$,rt,_e,ut,Tt.x,Tt.y)&&jr$1(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.prevZ}for(;kt&&kt.z<=At;){if(kt.x>=gt&&kt.x<=wt&&kt.y>=yt&&kt.y<=Ct&&kt!==d&&kt!==b&&Uu(j,st,$,rt,_e,ut,kt.x,kt.y)&&jr$1(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}function c4(e,o,a){let c=e;do{let d=c.prev,g=c.next.next;!Hy(d,g)&&rC(d,c,c.next,g)&&Ip(d,g)&&Ip(g,d)&&(o.push(d.i/a|0),o.push(c.i/a|0),o.push(g.i/a|0),Rp(c),Rp(c.next),c=e=g),c=c.next}while(c!==e);return Cc(c)}function u4(e,o,a,c,d,g){let b=e;do{let j=b.next.next;for(;j!==b.prev;){if(b.i!==j.i&&x4(b,j)){let $=iC(b,j);b=Cc(b,b.next),$=Cc($,$.next),Op(b,o,a,c,d,g,0),Op($,o,a,c,d,g,0);return}j=j.next}b=b.next}while(b!==e)}function h4(e,o,a,c){let d=[],g,b,j,$,_e;for(g=0,b=o.length;g<b;g++)j=o[g]*c,$=g<b-1?o[g+1]*c:e.length,_e=tC(e,j,$,c,!1),_e===_e.next&&(_e.steiner=!0),d.push(v4(_e));for(d.sort(d4),g=0;g<d.length;g++)a=f4(d[g],a);return a}function d4(e,o){return e.x-o.x}function f4(e,o){let a=p4(e,o);if(!a)return o;let c=iC(a,e);return Cc(c,c.next),Cc(a,a.next)}function p4(e,o){let a=o,c=-1/0,d,g=e.x,b=e.y;do{if(b<=a.y&&b>=a.next.y&&a.next.y!==a.y){let ut=a.x+(b-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(ut<=g&&ut>c&&(c=ut,d=a.x<a.next.x?a:a.next,ut===g))return d}a=a.next}while(a!==o);if(!d)return null;let j=d,$=d.x,_e=d.y,st=1/0,rt;a=d;do g>=a.x&&a.x>=$&&g!==a.x&&Uu(b<_e?g:c,b,$,_e,b<_e?c:g,b,a.x,a.y)&&(rt=Math.abs(b-a.y)/(g-a.x),Ip(a,e)&&(rt<st||rt===st&&(a.x>d.x||a.x===d.x&&m4(d,a)))&&(d=a,st=rt)),a=a.next;while(a!==j);return d}function m4(e,o){return jr$1(e.prev,e,o.prev)<0&&jr$1(o.next,e,e.next)<0}function g4(e,o,a,c){let d=e;do d.z===0&&(d.z=cw(d.x,d.y,o,a,c)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next;while(d!==e);d.prevZ.nextZ=null,d.prevZ=null,y4(d)}function y4(e){let o,a,c,d,g,b,j,$,_e=1;do{for(a=e,e=null,g=null,b=0;a;){for(b++,c=a,j=0,o=0;o<_e&&(j++,c=c.nextZ,!!c);o++);for($=_e;j>0||$>0&&c;)j!==0&&($===0||!c||a.z<=c.z)?(d=a,a=a.nextZ,j--):(d=c,c=c.nextZ,$--),g?g.nextZ=d:e=d,d.prevZ=g,g=d;a=c}g.nextZ=null,_e*=2}while(b>1);return e}function cw(e,o,a,c,d){return e=(e-a)*d|0,o=(o-c)*d|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,e|o<<1}function v4(e){let o=e,a=e;do(o.x<a.x||o.x===a.x&&o.y<a.y)&&(a=o),o=o.next;while(o!==e);return a}function Uu(e,o,a,c,d,g,b,j){return(d-b)*(o-j)>=(e-b)*(g-j)&&(e-b)*(c-j)>=(a-b)*(o-j)&&(a-b)*(g-j)>=(d-b)*(c-j)}function x4(e,o){return e.next.i!==o.i&&e.prev.i!==o.i&&!b4$1(e,o)&&(Ip(e,o)&&Ip(o,e)&&S4(e,o)&&(jr$1(e.prev,e,o.prev)||jr$1(e,o.prev,o))||Hy(e,o)&&jr$1(e.prev,e,e.next)>0&&jr$1(o.prev,o,o.next)>0)}function jr$1(e,o,a){return(o.y-e.y)*(a.x-o.x)-(o.x-e.x)*(a.y-o.y)}function Hy(e,o){return e.x===o.x&&e.y===o.y}function rC(e,o,a,c){let d=ay(jr$1(e,o,a)),g=ay(jr$1(e,o,c)),b=ay(jr$1(a,c,e)),j=ay(jr$1(a,c,o));return!!(d!==g&&b!==j||d===0&&oy(e,a,o)||g===0&&oy(e,c,o)||b===0&&oy(a,e,c)||j===0&&oy(a,o,c))}function oy(e,o,a){return o.x<=Math.max(e.x,a.x)&&o.x>=Math.min(e.x,a.x)&&o.y<=Math.max(e.y,a.y)&&o.y>=Math.min(e.y,a.y)}function ay(e){return e>0?1:e<0?-1:0}function b4$1(e,o){let a=e;do{if(a.i!==e.i&&a.next.i!==e.i&&a.i!==o.i&&a.next.i!==o.i&&rC(a,a.next,e,o))return!0;a=a.next}while(a!==e);return!1}function Ip(e,o){return jr$1(e.prev,e,e.next)<0?jr$1(e,o,e.next)>=0&&jr$1(e,e.prev,o)>=0:jr$1(e,o,e.prev)<0||jr$1(e,e.next,o)<0}function S4(e,o){let a=e,c=!1,d=(e.x+o.x)/2,g=(e.y+o.y)/2;do a.y>g!=a.next.y>g&&a.next.y!==a.y&&d<(a.next.x-a.x)*(g-a.y)/(a.next.y-a.y)+a.x&&(c=!c),a=a.next;while(a!==e);return c}function iC(e,o){let a=new uw(e.i,e.x,e.y),c=new uw(o.i,o.x,o.y),d=e.next,g=o.prev;return e.next=o,o.prev=e,a.next=d,d.prev=a,c.next=a,a.prev=c,g.next=c,c.prev=g,c}function TM(e,o,a,c){let d=new uw(e,o,a);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function Rp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uw(e,o,a){this.i=e,this.x=o,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w4(e,o,a,c){let d=0;for(let g=o,b=a-c;g<a;g+=c)d+=(e[b]-e[g])*(e[g+1]+e[b+1]),b=g;return d}var Zu=class{static area(e){let o=e.length,a=0;for(let c=o-1,d=0;d<o;c=d++)a+=e[c].x*e[d].y-e[d].x*e[c].y;return a*.5}static isClockWise(e){return Zu.area(e)<0}static triangulateShape(e,o){let a=[],c=[],d=[];MM(e),CM(a,e);let g=e.length;o.forEach(MM);for(let j=0;j<o.length;j++)c.push(g),g+=o[j].length,CM(a,o[j]);let b=o4.triangulate(a,c);for(let j=0;j<b.length;j+=3)d.push(b.slice(j,j+3));return d}};function MM(e){let o=e.length;o>2&&e[o-1].equals(e[0])&&e.pop()}function CM(e,o){for(let a=0;a<o.length;a++)e.push(o[a].x),e.push(o[a].y)}var Ju=class extends Qu{constructor(e=1,o=0){let a=(1+Math.sqrt(5))/2,c=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(c,d,e,o),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new Ju(e.radius,e.detail)}},Ys=class extends Pe{constructor(e=1,o=32,a=16,c=0,d=Math.PI*2,g=0,b=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:o,heightSegments:a,phiStart:c,phiLength:d,thetaStart:g,thetaLength:b},o=Math.max(3,Math.floor(o)),a=Math.max(2,Math.floor(a));let j=Math.min(g+b,Math.PI),$=0,_e=[],st=new _,rt=new _,ut=[],gt=[],yt=[],wt=[];for(let Ct=0;Ct<=a;Ct++){let Pt=[],At=Ct/a,Tt=0;Ct==0&&g==0?Tt=.5/o:Ct==a&&j==Math.PI&&(Tt=-.5/o);for(let kt=0;kt<=o;kt++){let It=kt/o;st.x=-e*Math.cos(c+It*d)*Math.sin(g+At*b),st.y=e*Math.cos(g+At*b),st.z=e*Math.sin(c+It*d)*Math.sin(g+At*b),gt.push(st.x,st.y,st.z),rt.copy(st).normalize(),yt.push(rt.x,rt.y,rt.z),wt.push(It+Tt,1-At),Pt.push($++)}_e.push(Pt)}for(let Ct=0;Ct<a;Ct++)for(let Pt=0;Pt<o;Pt++){let At=_e[Ct][Pt+1],Tt=_e[Ct][Pt],kt=_e[Ct+1][Pt],It=_e[Ct+1][Pt+1];(Ct!==0||g>0)&&ut.push(At,Tt,It),(Ct!==a-1||j<Math.PI)&&ut.push(Tt,kt,It)}this.setIndex(ut),this.setAttribute("position",new Te(gt,3)),this.setAttribute("normal",new Te(yt,3)),this.setAttribute("uv",new Te(wt,2))}static fromJSON(e){return new Ys(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},$u=class extends Pe{constructor(e=1,o=.4,a=12,c=48,d=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:o,radialSegments:a,tubularSegments:c,arc:d},a=Math.floor(a),c=Math.floor(c);let g=[],b=[],j=[],$=[],_e=new _,st=new _,rt=new _;for(let ut=0;ut<=a;ut++)for(let gt=0;gt<=c;gt++){let yt=gt/c*d,wt=ut/a*Math.PI*2;st.x=(e+o*Math.cos(wt))*Math.cos(yt),st.y=(e+o*Math.cos(wt))*Math.sin(yt),st.z=o*Math.sin(wt),b.push(st.x,st.y,st.z),_e.x=e*Math.cos(yt),_e.y=e*Math.sin(yt),rt.subVectors(st,_e).normalize(),j.push(rt.x,rt.y,rt.z),$.push(gt/c),$.push(ut/a)}for(let ut=1;ut<=a;ut++)for(let gt=1;gt<=c;gt++){let yt=(c+1)*ut+gt-1,wt=(c+1)*(ut-1)+gt-1,Ct=(c+1)*(ut-1)+gt,Pt=(c+1)*ut+gt;g.push(yt,wt,Pt),g.push(wt,Ct,Pt)}this.setIndex(g),this.setAttribute("position",new Te(b,3)),this.setAttribute("normal",new Te(j,3)),this.setAttribute("uv",new Te($,2))}static fromJSON(e){return new $u(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},eh=class extends Pe{constructor(e=1,o=.4,a=64,c=8,d=2,g=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:o,tubularSegments:a,radialSegments:c,p:d,q:g},a=Math.floor(a),c=Math.floor(c);let b=[],j=[],$=[],_e=[],st=new _,rt=new _,ut=new _,gt=new _,yt=new _,wt=new _,Ct=new _;for(let At=0;At<=a;++At){let Tt=At/a*d*Math.PI*2;Pt(Tt,d,g,e,ut),Pt(Tt+.01,d,g,e,gt),wt.subVectors(gt,ut),Ct.addVectors(gt,ut),yt.crossVectors(wt,Ct),Ct.crossVectors(yt,wt),yt.normalize(),Ct.normalize();for(let kt=0;kt<=c;++kt){let It=kt/c*Math.PI*2,Lt=-o*Math.cos(It),Ft=o*Math.sin(It);st.x=ut.x+(Lt*Ct.x+Ft*yt.x),st.y=ut.y+(Lt*Ct.y+Ft*yt.y),st.z=ut.z+(Lt*Ct.z+Ft*yt.z),j.push(st.x,st.y,st.z),rt.subVectors(st,ut).normalize(),$.push(rt.x,rt.y,rt.z),_e.push(At/a),_e.push(kt/c)}}for(let At=1;At<=a;At++)for(let Tt=1;Tt<=c;Tt++){let kt=(c+1)*(At-1)+(Tt-1),It=(c+1)*At+(Tt-1),Lt=(c+1)*At+Tt,Ft=(c+1)*(At-1)+Tt;b.push(kt,It,Ft),b.push(It,Lt,Ft)}this.setIndex(b),this.setAttribute("position",new Te(j,3)),this.setAttribute("normal",new Te($,3)),this.setAttribute("uv",new Te(_e,2));function Pt(At,Tt,kt,It,Lt){let Ft=Math.cos(At),Nt=Math.sin(At),Ht=kt/Tt*At,dr=Math.cos(Ht);Lt.x=It*(2+dr)*.5*Ft,Lt.y=It*(2+dr)*Nt*.5,Lt.z=It*Math.sin(Ht)*.5}}static fromJSON(e){return new eh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function nl(e,o,a){return nC(e)?new e.constructor(e.subarray(o,a!==void 0?a:e.length)):e.slice(o,a)}function ly(e,o,a){return!e||!a&&e.constructor===o?e:typeof o.BYTES_PER_ELEMENT=="number"?new o(e):Array.prototype.slice.call(e)}function nC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A4(e){function o(d,g){return e[d]-e[g]}let a=e.length,c=new Array(a);for(let d=0;d!==a;++d)c[d]=d;return c.sort(o),c}function PM(e,o,a){let c=e.length,d=new e.constructor(c);for(let g=0,b=0;b!==c;++g){let j=a[g]*o;for(let $=0;$!==o;++$)d[b++]=e[j+$]}return d}function sC(e,o,a,c){let d=1,g=e[0];for(;g!==void 0&&g[c]===void 0;)g=e[d++];if(g===void 0)return;let b=g[c];if(b!==void 0)if(Array.isArray(b))do b=g[c],b!==void 0&&(o.push(g.time),a.push.apply(a,b)),g=e[d++];while(g!==void 0);else if(b.toArray!==void 0)do b=g[c],b!==void 0&&(o.push(g.time),b.toArray(a,a.length)),g=e[d++];while(g!==void 0);else do b=g[c],b!==void 0&&(o.push(g.time),a.push(b)),g=e[d++];while(g!==void 0)}var th=class{constructor(e,o,a,c){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=c!==void 0?c:new o.constructor(a),this.sampleValues=o,this.valueSize=a,this.settings=null,this.DefaultSettings_={}}evaluate(e){let o=this.parameterPositions,a=this._cachedIndex,c=o[a],d=o[a-1];e:{t:{let g;i:{r:if(!(e<c)){for(let b=a+2;;){if(c===void 0){if(e<d)break r;return a=o.length,this._cachedIndex=a,this.copySampleValue_(a-1)}if(a===b)break;if(d=c,c=o[++a],e<c)break t}g=o.length;break i}if(!(e>=d)){let b=o[1];e<b&&(a=2,d=b);for(let j=a-2;;){if(d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===j)break;if(c=d,d=o[--a-1],e>=d)break t}g=a,a=0;break i}break e}for(;a<g;){let b=a+g>>>1;e<o[b]?g=b:a=b+1}if(c=o[a],d=o[a-1],d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(c===void 0)return a=o.length,this._cachedIndex=a,this.copySampleValue_(a-1)}this._cachedIndex=a,this.intervalChanged_(a,d,c)}return this.interpolate_(a,d,e,c)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,d=e*c;for(let g=0;g!==c;++g)o[g]=a[d+g];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},hw=class extends th{constructor(e,o,a,c){super(e,o,a,c),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ku,endingEnd:ku}}intervalChanged_(e,o,a){let c=this.parameterPositions,d=e-2,g=e+1,b=c[d],j=c[g];if(b===void 0)switch(this.getSettings_().endingStart){case Vu:d=e,b=2*o-a;break;case my:d=c.length-2,b=o+c[d]-c[d+1];break;default:d=e,b=a}if(j===void 0)switch(this.getSettings_().endingEnd){case Vu:g=e,j=2*a-o;break;case my:g=1,j=a+c[1]-c[0];break;default:g=e-1,j=o}let $=(a-o)*.5,_e=this.valueSize;this._weightPrev=$/(o-b),this._weightNext=$/(j-a),this._offsetPrev=d*_e,this._offsetNext=g*_e}interpolate_(e,o,a,c){let d=this.resultBuffer,g=this.sampleValues,b=this.valueSize,j=e*b,$=j-b,_e=this._offsetPrev,st=this._offsetNext,rt=this._weightPrev,ut=this._weightNext,gt=(a-o)/(c-o),yt=gt*gt,wt=yt*gt,Ct=-rt*wt+2*rt*yt-rt*gt,Pt=(1+rt)*wt+(-1.5-2*rt)*yt+(-.5+rt)*gt+1,At=(-1-ut)*wt+(1.5+ut)*yt+.5*gt,Tt=ut*wt-ut*yt;for(let kt=0;kt!==b;++kt)d[kt]=Ct*g[_e+kt]+Pt*g[$+kt]+At*g[j+kt]+Tt*g[st+kt];return d}},Cy=class extends th{constructor(e,o,a,c){super(e,o,a,c)}interpolate_(e,o,a,c){let d=this.resultBuffer,g=this.sampleValues,b=this.valueSize,j=e*b,$=j-b,_e=(a-o)/(c-o),st=1-_e;for(let rt=0;rt!==b;++rt)d[rt]=g[$+rt]*st+g[j+rt]*_e;return d}},dw=class extends th{constructor(e,o,a,c){super(e,o,a,c)}interpolate_(e){return this.copySampleValue_(e-1)}},xs=class{constructor(e,o,a,c){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(o===void 0||o.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ly(o,this.TimeBufferType),this.values=ly(a,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}static toJSON(e){let o=e.constructor,a;if(o.toJSON!==this.toJSON)a=o.toJSON(e);else{a={name:e.name,times:ly(e.times,Array),values:ly(e.values,Array)};let c=e.getInterpolation();c!==e.DefaultInterpolation&&(a.interpolation=c)}return a.type=e.ValueTypeName,a}InterpolantFactoryMethodDiscrete(e){return new dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let o;switch(e){case fy:o=this.InterpolantFactoryMethodDiscrete;break;case py:o=this.InterpolantFactoryMethodLinear;break;case uS:o=this.InterpolantFactoryMethodSmooth;break}if(o===void 0){let a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(a);return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fy;case this.InterpolantFactoryMethodLinear:return py;case this.InterpolantFactoryMethodSmooth:return uS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let o=this.times;for(let a=0,c=o.length;a!==c;++a)o[a]+=e}return this}scale(e){if(e!==1){let o=this.times;for(let a=0,c=o.length;a!==c;++a)o[a]*=e}return this}trim(e,o){let a=this.times,c=a.length,d=0,g=c-1;for(;d!==c&&a[d]<e;)++d;for(;g!==-1&&a[g]>o;)--g;if(++g,d!==0||g!==c){d>=g&&(g=Math.max(g,1),d=g-1);let b=this.getValueSize();this.times=nl(a,d,g),this.values=nl(this.values,d*b,g*b)}return this}validate(){let e=!0,o=this.getValueSize();o-Math.floor(o)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let a=this.times,c=this.values,d=a.length;d===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let g=null;for(let b=0;b!==d;b++){let j=a[b];if(typeof j=="number"&&isNaN(j)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,b,j),e=!1;break}if(g!==null&&g>j){console.error("THREE.KeyframeTrack: Out of order keys.",this,b,j,g),e=!1;break}g=j}if(c!==void 0&&nC(c))for(let b=0,j=c.length;b!==j;++b){let $=c[b];if(isNaN($)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,b,$),e=!1;break}}return e}optimize(){let e=nl(this.times),o=nl(this.values),a=this.getValueSize(),c=this.getInterpolation()===uS,d=e.length-1,g=1;for(let b=1;b<d;++b){let j=!1,$=e[b],_e=e[b+1];if($!==_e&&(b!==1||$!==e[0]))if(c)j=!0;else{let st=b*a,rt=st-a,ut=st+a;for(let gt=0;gt!==a;++gt){let yt=o[st+gt];if(yt!==o[rt+gt]||yt!==o[ut+gt]){j=!0;break}}}if(j){if(b!==g){e[g]=e[b];let st=b*a,rt=g*a;for(let ut=0;ut!==a;++ut)o[rt+ut]=o[st+ut]}++g}}if(d>0){e[g]=e[d];for(let b=d*a,j=g*a,$=0;$!==a;++$)o[j+$]=o[b+$];++g}return g!==e.length?(this.times=nl(e,0,g),this.values=nl(o,0,g*a)):(this.times=e,this.values=o),this}clone(){let e=nl(this.times,0),o=nl(this.values,0),a=this.constructor,c=new a(this.name,e,o);return c.createInterpolant=this.createInterpolant,c}};xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=py;var fl=class extends xs{};fl.prototype.ValueTypeName="bool";fl.prototype.ValueBufferType=Array;fl.prototype.DefaultInterpolation=fy;fl.prototype.InterpolantFactoryMethodLinear=void 0;fl.prototype.InterpolantFactoryMethodSmooth=void 0;var Py=class extends xs{};Py.prototype.ValueTypeName="color";var rh=class extends xs{};rh.prototype.ValueTypeName="number";var fw=class extends th{constructor(e,o,a,c){super(e,o,a,c)}interpolate_(e,o,a,c){let d=this.resultBuffer,g=this.sampleValues,b=this.valueSize,j=(a-o)/(c-o),$=e*b;for(let _e=$+b;$!==_e;$+=4)Qe.slerpFlat(d,0,g,$-b,g,$,j);return d}},Pc=class extends xs{InterpolantFactoryMethodLinear(e){return new fw(this.times,this.values,this.getValueSize(),e)}};Pc.prototype.ValueTypeName="quaternion";Pc.prototype.DefaultInterpolation=py;Pc.prototype.InterpolantFactoryMethodSmooth=void 0;var pl=class extends xs{};pl.prototype.ValueTypeName="string";pl.prototype.ValueBufferType=Array;pl.prototype.DefaultInterpolation=fy;pl.prototype.InterpolantFactoryMethodLinear=void 0;pl.prototype.InterpolantFactoryMethodSmooth=void 0;var ih=class extends xs{};ih.prototype.ValueTypeName="vector";var nh=class{constructor(e,o=-1,a,c=Tw){this.name=e,this.tracks=a,this.duration=o,this.blendMode=c,this.uuid=ms(),this.duration<0&&this.resetDuration()}static parse(e){let o=[],a=e.tracks,c=1/(e.fps||1);for(let g=0,b=a.length;g!==b;++g)o.push(E4(a[g]).scale(c));let d=new this(e.name,e.duration,o,e.blendMode);return d.uuid=e.uuid,d}static toJSON(e){let o=[],a=e.tracks,c={name:e.name,duration:e.duration,tracks:o,uuid:e.uuid,blendMode:e.blendMode};for(let d=0,g=a.length;d!==g;++d)o.push(xs.toJSON(a[d]));return c}static CreateFromMorphTargetSequence(e,o,a,c){let d=o.length,g=[];for(let b=0;b<d;b++){let j=[],$=[];j.push((b+d-1)%d,b,(b+1)%d),$.push(0,1,0);let _e=A4(j);j=PM(j,1,_e),$=PM($,1,_e),!c&&j[0]===0&&(j.push(d),$.push($[0])),g.push(new rh(".morphTargetInfluences["+o[b].name+"]",j,$).scale(1/a))}return new this(e,-1,g)}static findByName(e,o){let a=e;if(!Array.isArray(e)){let c=e;a=c.geometry&&c.geometry.animations||c.animations}for(let c=0;c<a.length;c++)if(a[c].name===o)return a[c];return null}static CreateClipsFromMorphTargetSequences(e,o,a){let c={},d=/^([\w-]*?)([\d]+)$/;for(let b=0,j=e.length;b<j;b++){let $=e[b],_e=$.name.match(d);if(_e&&_e.length>1){let st=_e[1],rt=c[st];rt||(c[st]=rt=[]),rt.push($)}}let g=[];for(let b in c)g.push(this.CreateFromMorphTargetSequence(b,c[b],o,a));return g}static parseAnimation(e,o){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let a=function(_e,st,rt,ut,gt){if(rt.length!==0){let yt=[],wt=[];sC(rt,yt,wt,ut),yt.length!==0&&gt.push(new _e(st,yt,wt))}},c=[],d=e.name||"default",g=e.fps||30,b=e.blendMode,j=e.length||-1,$=e.hierarchy||[];for(let _e=0;_e<$.length;_e++){let st=$[_e].keys;if(!(!st||st.length===0))if(st[0].morphTargets){let rt={},ut;for(ut=0;ut<st.length;ut++)if(st[ut].morphTargets)for(let gt=0;gt<st[ut].morphTargets.length;gt++)rt[st[ut].morphTargets[gt]]=-1;for(let gt in rt){let yt=[],wt=[];for(let Ct=0;Ct!==st[ut].morphTargets.length;++Ct){let Pt=st[ut];yt.push(Pt.time),wt.push(Pt.morphTarget===gt?1:0)}c.push(new rh(".morphTargetInfluence["+gt+"]",yt,wt))}j=rt.length*g}else{let rt=".bones["+o[_e].name+"]";a(ih,rt+".position",st,"pos",c),a(Pc,rt+".quaternion",st,"rot",c),a(ih,rt+".scale",st,"scl",c)}}return c.length===0?null:new this(d,j,c,b)}resetDuration(){let e=this.tracks,o=0;for(let a=0,c=e.length;a!==c;++a){let d=this.tracks[a];o=Math.max(o,d.times[d.times.length-1])}return this.duration=o,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let o=0;o<this.tracks.length;o++)e=e&&this.tracks[o].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let o=0;o<this.tracks.length;o++)e.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function _4(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rh;case"vector":case"vector2":case"vector3":case"vector4":return ih;case"color":return Py;case"quaternion":return Pc;case"bool":case"boolean":return fl;case"string":return pl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function E4(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let o=_4(e.type);if(e.times===void 0){let a=[],c=[];sC(e.keys,a,c,"value"),e.times=a,e.values=c}return o.parse!==void 0?o.parse(e):new o(e.name,e.times,e.values,e.interpolation)}var Dy={enabled:!1,files:{},add:function(e,o){this.enabled!==!1&&(this.files[e]=o)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Lp=class{constructor(e,o,a){let c=this,d=!1,g=0,b=0,j,$=[];this.onStart=void 0,this.onLoad=e,this.onProgress=o,this.onError=a,this.itemStart=function(_e){b++,d===!1&&c.onStart!==void 0&&c.onStart(_e,g,b),d=!0},this.itemEnd=function(_e){g++,c.onProgress!==void 0&&c.onProgress(_e,g,b),g===b&&(d=!1,c.onLoad!==void 0&&c.onLoad())},this.itemError=function(_e){c.onError!==void 0&&c.onError(_e)},this.resolveURL=function(_e){return j?j(_e):_e},this.setURLModifier=function(_e){return j=_e,this},this.addHandler=function(_e,st){return $.push(_e,st),this},this.removeHandler=function(_e){let st=$.indexOf(_e);return st!==-1&&$.splice(st,2),this},this.getHandler=function(_e){for(let st=0,rt=$.length;st<rt;st+=2){let ut=$[st],gt=$[st+1];if(ut.global&&(ut.lastIndex=0),ut.test(_e))return gt}return null}}},T4=new Lp,ml=class{constructor(e){this.manager=e!==void 0?e:T4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,o){let a=this;return new Promise(function(c,d){a.load(e,c,o,d)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},ma={},pw=class extends Error{constructor(e,o){super(e),this.response=o}},sh=class extends ml{constructor(e){super(e)}load(e,o,a,c){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let d=Dy.get(e);if(d!==void 0)return this.manager.itemStart(e),setTimeout(()=>{o&&o(d),this.manager.itemEnd(e)},0),d;if(ma[e]!==void 0){ma[e].push({onLoad:o,onProgress:a,onError:c});return}ma[e]=[],ma[e].push({onLoad:o,onProgress:a,onError:c});let g=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),b=this.mimeType,j=this.responseType;fetch(g).then($=>{if($.status===200||$.status===0){if($.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||$.body===void 0||$.body.getReader===void 0)return $;let _e=ma[e],st=$.body.getReader(),rt=$.headers.get("Content-Length")||$.headers.get("X-File-Size"),ut=rt?parseInt(rt):0,gt=ut!==0,yt=0,wt=new ReadableStream({start(Ct){Pt();function Pt(){st.read().then(({done:At,value:Tt})=>{if(At)Ct.close();else{yt+=Tt.byteLength;let kt=new ProgressEvent("progress",{lengthComputable:gt,loaded:yt,total:ut});for(let It=0,Lt=_e.length;It<Lt;It++){let Ft=_e[It];Ft.onProgress&&Ft.onProgress(kt)}Ct.enqueue(Tt),Pt()}})}}});return new Response(wt)}else throw new pw(`fetch for "${$.url}" responded with ${$.status}: ${$.statusText}`,$)}).then($=>{switch(j){case"arraybuffer":return $.arrayBuffer();case"blob":return $.blob();case"document":return $.text().then(_e=>new DOMParser().parseFromString(_e,b));case"json":return $.json();default:if(b===void 0)return $.text();{let _e=/charset="?([^;"\s]*)"?/i.exec(b),st=_e&&_e[1]?_e[1].toLowerCase():void 0,rt=new TextDecoder(st);return $.arrayBuffer().then(ut=>rt.decode(ut))}}}).then($=>{Dy.add(e,$);let _e=ma[e];delete ma[e];for(let st=0,rt=_e.length;st<rt;st++){let ut=_e[st];ut.onLoad&&ut.onLoad($)}}).catch($=>{let _e=ma[e];if(_e===void 0)throw this.manager.itemError(e),$;delete ma[e];for(let st=0,rt=_e.length;st<rt;st++){let ut=_e[st];ut.onError&&ut.onError($)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},mw=class extends ml{constructor(e){super(e)}load(e,o,a,c){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let d=this,g=Dy.get(e);if(g!==void 0)return d.manager.itemStart(e),setTimeout(function(){o&&o(g),d.manager.itemEnd(e)},0),g;let b=_p("img");function j(){_e(),Dy.add(e,this),o&&o(this),d.manager.itemEnd(e)}function $(st){_e(),c&&c(st),d.manager.itemError(e),d.manager.itemEnd(e)}function _e(){b.removeEventListener("load",j,!1),b.removeEventListener("error",$,!1)}return b.addEventListener("load",j,!1),b.addEventListener("error",$,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(b.crossOrigin=this.crossOrigin),d.manager.itemStart(e),b.src=e,b}},Oy=class extends ml{constructor(e){super(e)}load(e,o,a,c){let d=new tr,g=new mw(this.manager);return g.setCrossOrigin(this.crossOrigin),g.setPath(this.path),g.load(e,function(b){d.image=b,d.needsUpdate=!0,o!==void 0&&o(d)},a,c),d}},gl=class extends _t{constructor(e,o=1){super(),this.isLight=!0,this.type="Light",this.color=new We(e),this.intensity=o}dispose(){}copy(e,o){return super.copy(e,o),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let o=super.toJSON(e);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,this.groundColor!==void 0&&(o.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(o.object.distance=this.distance),this.angle!==void 0&&(o.object.angle=this.angle),this.decay!==void 0&&(o.object.decay=this.decay),this.penumbra!==void 0&&(o.object.penumbra=this.penumbra),this.shadow!==void 0&&(o.object.shadow=this.shadow.toJSON()),o}},Iy=class extends gl{constructor(e,o,a){super(e,a),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.groundColor=new We(o)}copy(e,o){return super.copy(e,o),this.groundColor.copy(e.groundColor),this}},VS=new ce$1,DM=new _,OM=new _,Bp=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z$2(512,512),this.map=null,this.mapPass=null,this.matrix=new ce$1,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tp,this._frameExtents=new z$2(1,1),this._viewportCount=1,this._viewports=[new Ke(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let o=this.camera,a=this.matrix;DM.setFromMatrixPosition(e.matrixWorld),o.position.copy(DM),OM.setFromMatrixPosition(e.target.matrixWorld),o.lookAt(OM),o.updateMatrixWorld(),VS.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VS),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(VS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},gw=class extends Bp{constructor(){super(new ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let o=this.camera,a=Ap*2*e.angle*this.focus,c=this.mapSize.width/this.mapSize.height,d=e.distance||o.far;(a!==o.fov||c!==o.aspect||d!==o.far)&&(o.fov=a,o.aspect=c,o.far=d,o.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Ry=class extends gl{constructor(e,o,a=0,c=Math.PI/3,d=0,g=2){super(e,o),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.target=new _t,this.distance=a,this.angle=c,this.penumbra=d,this.decay=g,this.map=null,this.shadow=new gw}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,o){return super.copy(e,o),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},IM=new ce$1,pp=new _,zS=new _,yw=class extends Bp{constructor(){super(new ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z$2(4,2),this._viewportCount=6,this._viewports=[new Ke(2,1,1,1),new Ke(0,1,1,1),new Ke(3,1,1,1),new Ke(1,1,1,1),new Ke(3,0,1,1),new Ke(1,0,1,1)],this._cubeDirections=[new _(1,0,0),new _(-1,0,0),new _(0,0,1),new _(0,0,-1),new _(0,1,0),new _(0,-1,0)],this._cubeUps=[new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,0,1),new _(0,0,-1)]}updateMatrices(e,o=0){let a=this.camera,c=this.matrix,d=e.distance||a.far;d!==a.far&&(a.far=d,a.updateProjectionMatrix()),pp.setFromMatrixPosition(e.matrixWorld),a.position.copy(pp),zS.copy(a.position),zS.add(this._cubeDirections[o]),a.up.copy(this._cubeUps[o]),a.lookAt(zS),a.updateMatrixWorld(),c.makeTranslation(-pp.x,-pp.y,-pp.z),IM.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IM)}},Ly=class extends gl{constructor(e,o,a=0,c=2){super(e,o),this.isPointLight=!0,this.type="PointLight",this.distance=a,this.decay=c,this.shadow=new yw}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,o){return super.copy(e,o),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},vw$1=class extends Bp{constructor(){super(new Wu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},By=class extends gl{constructor(e,o){super(e,o),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.target=new _t,this.shadow=new vw$1}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Np=class extends Pe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},oh=class extends ml{constructor(e){super(e)}load(e,o,a,c){let d=this,g=new sh(d.manager);g.setPath(d.path),g.setRequestHeader(d.requestHeader),g.setWithCredentials(d.withCredentials),g.load(e,function(b){try{o(d.parse(JSON.parse(b)))}catch(j){c?c(j):console.error(j),d.manager.itemError(e)}},a,c)}parse(e){let o={},a={};function c(rt,ut){if(o[ut]!==void 0)return o[ut];let gt=rt.interleavedBuffers[ut],yt=d(rt,gt.buffer),wt=kg(gt.type,yt),Ct=new _y(wt,gt.stride);return Ct.uuid=gt.uuid,o[ut]=Ct,Ct}function d(rt,ut){if(a[ut]!==void 0)return a[ut];let gt=rt.arrayBuffers[ut],yt=new Uint32Array(gt).buffer;return a[ut]=yt,yt}let g=e.isInstancedBufferGeometry?new Np:new Pe,b=e.data.index;if(b!==void 0){let rt=kg(b.type,b.array);g.setIndex(new Xe(rt,1))}let j=e.data.attributes;for(let rt in j){let ut=j[rt],gt;if(ut.isInterleavedBufferAttribute){let yt=c(e.data,ut.data);gt=new wc(yt,ut.itemSize,ut.offset,ut.normalized)}else{let yt=kg(ut.type,ut.array),wt=ut.isInstancedBufferAttribute?Eo:Xe;gt=new wt(yt,ut.itemSize,ut.normalized)}ut.name!==void 0&&(gt.name=ut.name),ut.usage!==void 0&&gt.setUsage(ut.usage),ut.updateRange!==void 0&&(gt.updateRange.offset=ut.updateRange.offset,gt.updateRange.count=ut.updateRange.count),g.setAttribute(rt,gt)}let $=e.data.morphAttributes;if($)for(let rt in $){let ut=$[rt],gt=[];for(let yt=0,wt=ut.length;yt<wt;yt++){let Ct=ut[yt],Pt;if(Ct.isInterleavedBufferAttribute){let At=c(e.data,Ct.data);Pt=new wc(At,Ct.itemSize,Ct.offset,Ct.normalized)}else{let At=kg(Ct.type,Ct.array);Pt=new Xe(At,Ct.itemSize,Ct.normalized)}Ct.name!==void 0&&(Pt.name=Ct.name),gt.push(Pt)}g.morphAttributes[rt]=gt}e.data.morphTargetsRelative&&(g.morphTargetsRelative=!0);let _e=e.data.groups||e.data.drawcalls||e.data.offsets;if(_e!==void 0)for(let rt=0,ut=_e.length;rt!==ut;++rt){let gt=_e[rt];g.addGroup(gt.start,gt.count,gt.materialIndex)}let st=e.data.boundingSphere;if(st!==void 0){let rt=new _;st.center!==void 0&&rt.fromArray(st.center),g.boundingSphere=new Br(rt,st.radius)}return e.name&&(g.name=e.name),e.userData&&(g.userData=e.userData),g}},Ny=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=RM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let o=RM();e=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=e}return e}};function RM(){return(typeof performance>"u"?Date:performance).now()}var xw=class{constructor(e,o,a){this.binding=e,this.valueSize=a;let c,d,g;switch(o){case"quaternion":c=this._slerp,d=this._slerpAdditive,g=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(a*6),this._workIndex=5;break;case"string":case"bool":c=this._select,d=this._select,g=this._setAdditiveIdentityOther,this.buffer=new Array(a*5);break;default:c=this._lerp,d=this._lerpAdditive,g=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(a*5)}this._mixBufferRegion=c,this._mixBufferRegionAdditive=d,this._setIdentity=g,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,o){let a=this.buffer,c=this.valueSize,d=e*c+c,g=this.cumulativeWeight;if(g===0){for(let b=0;b!==c;++b)a[d+b]=a[b];g=o}else{g+=o;let b=o/g;this._mixBufferRegion(a,d,0,b,c)}this.cumulativeWeight=g}accumulateAdditive(e){let o=this.buffer,a=this.valueSize,c=a*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(o,c,0,e,a),this.cumulativeWeightAdditive+=e}apply(e){let o=this.valueSize,a=this.buffer,c=e*o+o,d=this.cumulativeWeight,g=this.cumulativeWeightAdditive,b=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,d<1){let j=o*this._origIndex;this._mixBufferRegion(a,c,j,1-d,o)}g>0&&this._mixBufferRegionAdditive(a,c,this._addIndex*o,1,o);for(let j=o,$=o+o;j!==$;++j)if(a[j]!==a[j+o]){b.setValue(a,c);break}}saveOriginalState(){let e=this.binding,o=this.buffer,a=this.valueSize,c=a*this._origIndex;e.getValue(o,c);for(let d=a,g=c;d!==g;++d)o[d]=o[c+d%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,o=e+this.valueSize;for(let a=e;a<o;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let a=0;a<this.valueSize;a++)this.buffer[o+a]=this.buffer[e+a]}_select(e,o,a,c,d){if(c>=.5)for(let g=0;g!==d;++g)e[o+g]=e[a+g]}_slerp(e,o,a,c){Qe.slerpFlat(e,o,e,o,e,a,c)}_slerpAdditive(e,o,a,c,d){let g=this._workIndex*d;Qe.multiplyQuaternionsFlat(e,g,e,o,e,a),Qe.slerpFlat(e,o,e,o,e,g,c)}_lerp(e,o,a,c,d){let g=1-c;for(let b=0;b!==d;++b){let j=o+b;e[j]=e[j]*g+e[a+b]*c}}_lerpAdditive(e,o,a,c,d){for(let g=0;g!==d;++g){let b=o+g;e[b]=e[b]+e[a+g]*c}}},Iw="\\[\\]\\.:\\/",M4=new RegExp("["+Iw+"]","g"),Rw="[^"+Iw+"]",C4="[^"+Iw.replace("\\.","")+"]",P4=/((?:WC+[\/:])*)/.source.replace("WC",Rw),D4=/(WCOD+)?/.source.replace("WCOD",C4),O4=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rw),I4=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rw),R4=new RegExp("^"+P4+D4+O4+I4+"$"),L4=["material","materials","bones","map"],bw=class{constructor(e,o,a){let c=a||$t.parseTrackName(o);this._targetGroup=e,this._bindings=e.subscribe_(o,c)}getValue(e,o){this.bind();let a=this._targetGroup.nCachedObjects_,c=this._bindings[a];c!==void 0&&c.getValue(e,o)}setValue(e,o){let a=this._bindings;for(let c=this._targetGroup.nCachedObjects_,d=a.length;c!==d;++c)a[c].setValue(e,o)}bind(){let e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=e.length;o!==a;++o)e[o].bind()}unbind(){let e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=e.length;o!==a;++o)e[o].unbind()}},$t=class{constructor(e,o,a){this.path=o,this.parsedPath=a||$t.parseTrackName(o),this.node=$t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,o,a){return e&&e.isAnimationObjectGroup?new $t.Composite(e,o,a):new $t(e,o,a)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(M4,"")}static parseTrackName(e){let o=R4.exec(e);if(o===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let a={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},c=a.nodeName&&a.nodeName.lastIndexOf(".");if(c!==void 0&&c!==-1){let d=a.nodeName.substring(c+1);L4.indexOf(d)!==-1&&(a.nodeName=a.nodeName.substring(0,c),a.objectName=d)}if(a.propertyName===null||a.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return a}static findNode(e,o){if(o===void 0||o===""||o==="."||o===-1||o===e.name||o===e.uuid)return e;if(e.skeleton){let a=e.skeleton.getBoneByName(o);if(a!==void 0)return a}if(e.children){let a=function(d){for(let g=0;g<d.length;g++){let b=d[g];if(b.name===o||b.uuid===o)return b;let j=a(b.children);if(j)return j}return null},c=a(e.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,o){e[o]=this.targetObject[this.propertyName]}_getValue_array(e,o){let a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)e[o++]=a[c]}_getValue_arrayElement(e,o){e[o]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,o){this.resolvedProperty.toArray(e,o)}_setValue_direct(e,o){this.targetObject[this.propertyName]=e[o]}_setValue_direct_setNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,o){let a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)a[c]=e[o++]}_setValue_array_setNeedsUpdate(e,o){let a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)a[c]=e[o++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,o){let a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)a[c]=e[o++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,o){this.resolvedProperty[this.propertyIndex]=e[o]}_setValue_arrayElement_setNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,o){this.resolvedProperty.fromArray(e,o)}_setValue_fromArray_setNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,o){this.bind(),this.getValue(e,o)}_setValue_unbound(e,o){this.bind(),this.setValue(e,o)}bind(){let e=this.node,o=this.parsedPath,a=o.objectName,c=o.propertyName,d=o.propertyIndex;if(e||(e=$t.findNode(this.rootNode,o.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(a){let $=o.objectIndex;switch(a){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _e=0;_e<e.length;_e++)if(e[_e].name===$){$=_e;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[a]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[a]}if($!==void 0){if(e[$]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[$]}}let g=e[c];if(g===void 0){let $=o.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+$+"."+c+" but it wasn't found.",e);return}let b=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?b=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(b=this.Versioning.MatrixWorldNeedsUpdate);let j=this.BindingType.Direct;if(d!==void 0){if(c==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[d]!==void 0&&(d=e.morphTargetDictionary[d])}j=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=d}else g.fromArray!==void 0&&g.toArray!==void 0?(j=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(j=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=c;this.getValue=this.GetterByBindingType[j],this.setValue=this.SetterByBindingTypeAndVersioning[j][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};$t.Composite=bw;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Sw=class{constructor(e,o,a=null,c=o.blendMode){this._mixer=e,this._clip=o,this._localRoot=a,this.blendMode=c;let d=o.tracks,g=d.length,b=new Array(g),j={endingStart:ku,endingEnd:ku};for(let $=0;$!==g;++$){let _e=d[$].createInterpolant(null);b[$]=_e,_e.settings=j}this._interpolantSettings=j,this._interpolants=b,this._propertyBindings=new Array(g),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ew,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,o){return this.loop=e,this.repetitions=o,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,o,a){if(e.fadeOut(o),this.fadeIn(o),a){let c=this._clip.duration,d=e._clip.duration,g=d/c,b=c/d;e.warp(1,g,o),this.warp(b,1,o)}return this}crossFadeTo(e,o,a){return e.crossFadeFrom(this,o,a)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,o,a){let c=this._mixer,d=c.time,g=this.timeScale,b=this._timeScaleInterpolant;b===null&&(b=c._lendControlInterpolant(),this._timeScaleInterpolant=b);let j=b.parameterPositions,$=b.sampleValues;return j[0]=d,j[1]=d+a,$[0]=e/g,$[1]=o/g,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,o,a,c){if(!this.enabled){this._updateWeight(e);return}let d=this._startTime;if(d!==null){let j=(e-d)*a;j<0||a===0?o=0:(this._startTime=null,o=a*j)}o*=this._updateTimeScale(e);let g=this._updateTime(o),b=this._updateWeight(e);if(b>0){let j=this._interpolants,$=this._propertyBindings;switch(this.blendMode){case XF:for(let _e=0,st=j.length;_e!==st;++_e)j[_e].evaluate(g),$[_e].accumulateAdditive(b);break;case Tw:default:for(let _e=0,st=j.length;_e!==st;++_e)j[_e].evaluate(g),$[_e].accumulate(c,b)}}}_updateWeight(e){let o=0;if(this.enabled){o=this.weight;let a=this._weightInterpolant;if(a!==null){let c=a.evaluate(e)[0];o*=c,e>a.parameterPositions[1]&&(this.stopFading(),c===0&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(e){let o=0;if(!this.paused){o=this.timeScale;let a=this._timeScaleInterpolant;if(a!==null){let c=a.evaluate(e)[0];o*=c,e>a.parameterPositions[1]&&(this.stopWarping(),o===0?this.paused=!0:this.timeScale=o)}}return this._effectiveTimeScale=o,o}_updateTime(e){let o=this._clip.duration,a=this.loop,c=this.time+e,d=this._loopCount,g=a===kp;if(e===0)return d===-1?c:g&&(d&1)===1?o-c:c;if(a===_w){d===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(c>=o)c=o;else if(c<0)c=0;else{this.time=c;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(d===-1&&(e>=0?(d=0,this._setEndings(!0,this.repetitions===0,g)):this._setEndings(this.repetitions===0,!0,g)),c>=o||c<0){let b=Math.floor(c/o);c-=o*b,d+=Math.abs(b);let j=this.repetitions-d;if(j<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=e>0?o:0,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(j===1){let $=e<0;this._setEndings($,!$,g)}else this._setEndings(!1,!1,g);this._loopCount=d,this.time=c,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:b})}}else this.time=c;if(g&&(d&1)===1)return o-c}return c}_setEndings(e,o,a){let c=this._interpolantSettings;a?(c.endingStart=Vu,c.endingEnd=Vu):(e?c.endingStart=this.zeroSlopeAtStart?Vu:ku:c.endingStart=my,o?c.endingEnd=this.zeroSlopeAtEnd?Vu:ku:c.endingEnd=my)}_scheduleFading(e,o,a){let c=this._mixer,d=c.time,g=this._weightInterpolant;g===null&&(g=c._lendControlInterpolant(),this._weightInterpolant=g);let b=g.parameterPositions,j=g.sampleValues;return b[0]=d,j[0]=o,b[1]=d+e,j[1]=a,this}},B4=new Float32Array(1),Fy=class extends fr$2{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,o){let a=e._localRoot||this._root,c=e._clip.tracks,d=c.length,g=e._propertyBindings,b=e._interpolants,j=a.uuid,$=this._bindingsByRootAndName,_e=$[j];_e===void 0&&(_e={},$[j]=_e);for(let st=0;st!==d;++st){let rt=c[st],ut=rt.name,gt=_e[ut];if(gt!==void 0)++gt.referenceCount,g[st]=gt;else{if(gt=g[st],gt!==void 0){gt._cacheIndex===null&&(++gt.referenceCount,this._addInactiveBinding(gt,j,ut));continue}let yt=o&&o._propertyBindings[st].binding.parsedPath;gt=new xw($t.create(a,ut,yt),rt.ValueTypeName,rt.getValueSize()),++gt.referenceCount,this._addInactiveBinding(gt,j,ut),g[st]=gt}b[st].resultBuffer=gt.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let a=(e._localRoot||this._root).uuid,c=e._clip.uuid,d=this._actionsByClip[c];this._bindAction(e,d&&d.knownActions[0]),this._addInactiveAction(e,c,a)}let o=e._propertyBindings;for(let a=0,c=o.length;a!==c;++a){let d=o[a];d.useCount++===0&&(this._lendBinding(d),d.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let o=e._propertyBindings;for(let a=0,c=o.length;a!==c;++a){let d=o[a];--d.useCount===0&&(d.restoreOriginalState(),this._takeBackBinding(d))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let o=e._cacheIndex;return o!==null&&o<this._nActiveActions}_addInactiveAction(e,o,a){let c=this._actions,d=this._actionsByClip,g=d[o];if(g===void 0)g={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,d[o]=g;else{let b=g.knownActions;e._byClipCacheIndex=b.length,b.push(e)}e._cacheIndex=c.length,c.push(e),g.actionByRoot[a]=e}_removeInactiveAction(e){let o=this._actions,a=o[o.length-1],c=e._cacheIndex;a._cacheIndex=c,o[c]=a,o.pop(),e._cacheIndex=null;let d=e._clip.uuid,g=this._actionsByClip,b=g[d],j=b.knownActions,$=j[j.length-1],_e=e._byClipCacheIndex;$._byClipCacheIndex=_e,j[_e]=$,j.pop(),e._byClipCacheIndex=null;let st=b.actionByRoot,rt=(e._localRoot||this._root).uuid;delete st[rt],j.length===0&&delete g[d],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let o=e._propertyBindings;for(let a=0,c=o.length;a!==c;++a){let d=o[a];--d.referenceCount===0&&this._removeInactiveBinding(d)}}_lendAction(e){let o=this._actions,a=e._cacheIndex,c=this._nActiveActions++,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_takeBackAction(e){let o=this._actions,a=e._cacheIndex,c=--this._nActiveActions,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_addInactiveBinding(e,o,a){let c=this._bindingsByRootAndName,d=this._bindings,g=c[o];g===void 0&&(g={},c[o]=g),g[a]=e,e._cacheIndex=d.length,d.push(e)}_removeInactiveBinding(e){let o=this._bindings,a=e.binding,c=a.rootNode.uuid,d=a.path,g=this._bindingsByRootAndName,b=g[c],j=o[o.length-1],$=e._cacheIndex;j._cacheIndex=$,o[$]=j,o.pop(),delete b[d],Object.keys(b).length===0&&delete g[c]}_lendBinding(e){let o=this._bindings,a=e._cacheIndex,c=this._nActiveBindings++,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_takeBackBinding(e){let o=this._bindings,a=e._cacheIndex,c=--this._nActiveBindings,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_lendControlInterpolant(){let e=this._controlInterpolants,o=this._nActiveControlInterpolants++,a=e[o];return a===void 0&&(a=new Cy(new Float32Array(2),new Float32Array(2),1,B4),a.__cacheIndex=o,e[o]=a),a}_takeBackControlInterpolant(e){let o=this._controlInterpolants,a=e.__cacheIndex,c=--this._nActiveControlInterpolants,d=o[c];e.__cacheIndex=c,o[c]=e,d.__cacheIndex=a,o[a]=d}clipAction(e,o,a){let c=o||this._root,d=c.uuid,g=typeof e=="string"?nh.findByName(c,e):e,b=g!==null?g.uuid:e,j=this._actionsByClip[b],$=null;if(a===void 0&&(g!==null?a=g.blendMode:a=Tw),j!==void 0){let st=j.actionByRoot[d];if(st!==void 0&&st.blendMode===a)return st;$=j.knownActions[0],g===null&&(g=$._clip)}if(g===null)return null;let _e=new Sw(this,g,o,a);return this._bindAction(_e,$),this._addInactiveAction(_e,b,d),_e}existingAction(e,o){let a=o||this._root,c=a.uuid,d=typeof e=="string"?nh.findByName(a,e):e,g=d?d.uuid:e,b=this._actionsByClip[g];return b!==void 0&&b.actionByRoot[c]||null}stopAllAction(){let e=this._actions,o=this._nActiveActions;for(let a=o-1;a>=0;--a)e[a].stop();return this}update(e){e*=this.timeScale;let o=this._actions,a=this._nActiveActions,c=this.time+=e,d=Math.sign(e),g=this._accuIndex^=1;for(let $=0;$!==a;++$)o[$]._update(c,e,d,g);let b=this._bindings,j=this._nActiveBindings;for(let $=0;$!==j;++$)b[$].apply(g);return this}setTime(e){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let o=this._actions,a=e.uuid,c=this._actionsByClip,d=c[a];if(d!==void 0){let g=d.knownActions;for(let b=0,j=g.length;b!==j;++b){let $=g[b];this._deactivateAction($);let _e=$._cacheIndex,st=o[o.length-1];$._cacheIndex=null,$._byClipCacheIndex=null,st._cacheIndex=_e,o[_e]=st,o.pop(),this._removeInactiveBindingsForAction($)}delete c[a]}}uncacheRoot(e){let o=e.uuid,a=this._actionsByClip;for(let g in a){let b=a[g].actionByRoot,j=b[o];j!==void 0&&(this._deactivateAction(j),this._removeInactiveAction(j))}let c=this._bindingsByRootAndName,d=c[o];if(d!==void 0)for(let g in d){let b=d[g];b.restoreOriginalState(),this._removeInactiveBinding(b)}}uncacheAction(e,o){let a=this.existingAction(e,o);a!==null&&(this._deactivateAction(a),this._removeInactiveAction(a))}},he=class{constructor(e){this.value=e}clone(){return new he(this.value.clone===void 0?this.value:this.value.clone())}},ah=class{constructor(e,o,a=0,c=1/0){this.ray=new qs(e,o),this.near=a,this.far=c,this.camera=null,this.layers=new Ep,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,o){this.ray.set(e,o)}setFromCamera(e,o){o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):console.error("THREE.Raycaster: Unsupported camera type: "+o.type)}intersectObject(e,o=!0,a=[]){return ww(e,this,a,o),a.sort(LM),a}intersectObjects(e,o=!0,a=[]){for(let c=0,d=e.length;c<d;c++)ww(e[c],this,a,o);return a.sort(LM),a}};function LM(e,o){return e.distance-o.distance}function ww(e,o,a,c){if(e.layers.test(o.layers)&&e.raycast(o,a),c===!0){let d=e.children;for(let g=0,b=d.length;g<b;g++)ww(d[g],o,a,!0)}}var Fp=class{constructor(e=1,o=0,a=0){return this.radius=e,this.phi=o,this.theta=a,this}set(e,o,a){return this.radius=e,this.phi=o,this.theta=a,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,a){return this.radius=Math.sqrt(e*e+o*o+a*a),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,a),this.phi=Math.acos(gi(o/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},BM=new z$2,lh=class{constructor(e=new z$2(1/0,1/0),o=new z$2(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromPoints(e){this.makeEmpty();for(let o=0,a=e.length;o<a;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){let a=BM.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return BM.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},NM=new _,cy=new _,Di=class{constructor(e=new _,o=new _){this.start=e,this.end=o}set(e,o){return this.start.copy(e),this.end.copy(o),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,o){return this.delta(o).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,o){NM.subVectors(e,this.start),cy.subVectors(this.end,this.start);let a=cy.dot(cy),c=cy.dot(NM)/a;return o&&(c=gi(c,0,1)),c}closestPointToPoint(e,o,a){let c=this.closestPointToPointParameter(e,o);return this.delta(a).multiplyScalar(c).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},FM=new _,ky=class extends _t{constructor(e,o){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,this.type="SpotLightHelper";let a=new Pe,c=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let g=0,b=1,j=32;g<j;g++,b++){let $=g/j*Math.PI*2,_e=b/j*Math.PI*2;c.push(Math.cos($),Math.sin($),1,Math.cos(_e),Math.sin(_e),1)}a.setAttribute("position",new Te(c,3));let d=new ys({fog:!1,toneMapped:!1});this.cone=new hl(a,d),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,o=e*Math.tan(this.light.angle);this.cone.scale.set(o,o,e),FM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(FM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Vy=class extends sr{constructor(e,o,a){let c=new Ys(o,4,2),d=new ts({wireframe:!0,fog:!1,toneMapped:!1});super(c,d),this.light=e,this.color=a,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},kM=new _,uy=new _,VM=new _,zy=class extends _t{constructor(e,o,a){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=a,this.type="DirectionalLightHelper",o===void 0&&(o=1);let c=new Pe;c.setAttribute("position",new Te([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3));let d=new ys({fog:!1,toneMapped:!1});this.lightPlane=new Ac(c,d),this.add(this.lightPlane),c=new Pe,c.setAttribute("position",new Te([0,0,0,0,0,1],3)),this.targetLine=new Ac(c,d),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kM.setFromMatrixPosition(this.light.matrixWorld),uy.setFromMatrixPosition(this.light.target.matrixWorld),VM.subVectors(uy,kM),this.lightPlane.lookAt(uy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(uy),this.targetLine.scale.z=VM.length()}},hy=new _,Xr=new rs,yl=class extends hl{constructor(e){let o=new Pe,a=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),c=[],d=[],g={};b("n1","n2"),b("n2","n4"),b("n4","n3"),b("n3","n1"),b("f1","f2"),b("f2","f4"),b("f4","f3"),b("f3","f1"),b("n1","f1"),b("n2","f2"),b("n3","f3"),b("n4","f4"),b("p","n1"),b("p","n2"),b("p","n3"),b("p","n4"),b("u1","u2"),b("u2","u3"),b("u3","u1"),b("c","t"),b("p","c"),b("cn1","cn2"),b("cn3","cn4"),b("cf1","cf2"),b("cf3","cf4");function b(gt,yt){j(gt),j(yt)}function j(gt){c.push(0,0,0),d.push(0,0,0),g[gt]===void 0&&(g[gt]=[]),g[gt].push(c.length/3-1)}o.setAttribute("position",new Te(c,3)),o.setAttribute("color",new Te(d,3)),super(o,a),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=g,this.update();let $=new We(16755200),_e=new We(16711680),st=new We(43775),rt=new We(16777215),ut=new We(3355443);this.setColors($,_e,st,rt,ut)}setColors(e,o,a,c,d){let g=this.geometry.getAttribute("color");g.setXYZ(0,e.r,e.g,e.b),g.setXYZ(1,e.r,e.g,e.b),g.setXYZ(2,e.r,e.g,e.b),g.setXYZ(3,e.r,e.g,e.b),g.setXYZ(4,e.r,e.g,e.b),g.setXYZ(5,e.r,e.g,e.b),g.setXYZ(6,e.r,e.g,e.b),g.setXYZ(7,e.r,e.g,e.b),g.setXYZ(8,e.r,e.g,e.b),g.setXYZ(9,e.r,e.g,e.b),g.setXYZ(10,e.r,e.g,e.b),g.setXYZ(11,e.r,e.g,e.b),g.setXYZ(12,e.r,e.g,e.b),g.setXYZ(13,e.r,e.g,e.b),g.setXYZ(14,e.r,e.g,e.b),g.setXYZ(15,e.r,e.g,e.b),g.setXYZ(16,e.r,e.g,e.b),g.setXYZ(17,e.r,e.g,e.b),g.setXYZ(18,e.r,e.g,e.b),g.setXYZ(19,e.r,e.g,e.b),g.setXYZ(20,e.r,e.g,e.b),g.setXYZ(21,e.r,e.g,e.b),g.setXYZ(22,e.r,e.g,e.b),g.setXYZ(23,e.r,e.g,e.b),g.setXYZ(24,o.r,o.g,o.b),g.setXYZ(25,o.r,o.g,o.b),g.setXYZ(26,o.r,o.g,o.b),g.setXYZ(27,o.r,o.g,o.b),g.setXYZ(28,o.r,o.g,o.b),g.setXYZ(29,o.r,o.g,o.b),g.setXYZ(30,o.r,o.g,o.b),g.setXYZ(31,o.r,o.g,o.b),g.setXYZ(32,a.r,a.g,a.b),g.setXYZ(33,a.r,a.g,a.b),g.setXYZ(34,a.r,a.g,a.b),g.setXYZ(35,a.r,a.g,a.b),g.setXYZ(36,a.r,a.g,a.b),g.setXYZ(37,a.r,a.g,a.b),g.setXYZ(38,c.r,c.g,c.b),g.setXYZ(39,c.r,c.g,c.b),g.setXYZ(40,d.r,d.g,d.b),g.setXYZ(41,d.r,d.g,d.b),g.setXYZ(42,d.r,d.g,d.b),g.setXYZ(43,d.r,d.g,d.b),g.setXYZ(44,d.r,d.g,d.b),g.setXYZ(45,d.r,d.g,d.b),g.setXYZ(46,d.r,d.g,d.b),g.setXYZ(47,d.r,d.g,d.b),g.setXYZ(48,d.r,d.g,d.b),g.setXYZ(49,d.r,d.g,d.b),g.needsUpdate=!0}update(){let e=this.geometry,o=this.pointMap,a=1,c=1;Xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ti("c",o,e,Xr,0,0,-1),ti("t",o,e,Xr,0,0,1),ti("n1",o,e,Xr,-a,-c,-1),ti("n2",o,e,Xr,a,-c,-1),ti("n3",o,e,Xr,-a,c,-1),ti("n4",o,e,Xr,a,c,-1),ti("f1",o,e,Xr,-a,-c,1),ti("f2",o,e,Xr,a,-c,1),ti("f3",o,e,Xr,-a,c,1),ti("f4",o,e,Xr,a,c,1),ti("u1",o,e,Xr,a*.7,c*1.1,-1),ti("u2",o,e,Xr,-a*.7,c*1.1,-1),ti("u3",o,e,Xr,0,c*2,-1),ti("cf1",o,e,Xr,-a,0,1),ti("cf2",o,e,Xr,a,0,1),ti("cf3",o,e,Xr,0,-c,1),ti("cf4",o,e,Xr,0,c,1),ti("cn1",o,e,Xr,-a,0,-1),ti("cn2",o,e,Xr,a,0,-1),ti("cn3",o,e,Xr,0,-c,-1),ti("cn4",o,e,Xr,0,c,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function ti(e,o,a,c,d,g,b){hy.set(d,g,b).unproject(c);let j=o[e];if(j!==void 0){let $=a.getAttribute("position");for(let _e=0,st=j.length;_e<st;_e++)$.setXYZ(j[_e],hy.x,hy.y,hy.z)}}var vl=class extends hl{constructor(e,o=16776960){let a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],d=new Pe;d.setIndex(new Xe(a,1)),d.setAttribute("position",new Te(c,3)),super(d,new ys({color:o,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},Uy=class extends hl{constructor(e=1){let o=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],c=new Pe;c.setAttribute("position",new Te(o,3)),c.setAttribute("color",new Te(a,3));let d=new ys({vertexColors:!0,toneMapped:!1});super(c,d),this.type="AxesHelper"}setColors(e,o,a){let c=new We,d=this.geometry.attributes.color.array;return c.set(e),c.toArray(d,0),c.toArray(d,3),c.set(o),c.toArray(d,6),c.toArray(d,9),c.set(a),c.toArray(d,12),c.toArray(d,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},ga=N4();function N4(){let e=new ArrayBuffer(4),o=new Float32Array(e),a=new Uint32Array(e),c=new Uint32Array(512),d=new Uint32Array(512);for(let $=0;$<256;++$){let _e=$-127;_e<-27?(c[$]=0,c[$|256]=32768,d[$]=24,d[$|256]=24):_e<-14?(c[$]=1024>>-_e-14,c[$|256]=1024>>-_e-14|32768,d[$]=-_e-1,d[$|256]=-_e-1):_e<=15?(c[$]=_e+15<<10,c[$|256]=_e+15<<10|32768,d[$]=13,d[$|256]=13):_e<128?(c[$]=31744,c[$|256]=64512,d[$]=24,d[$|256]=24):(c[$]=31744,c[$|256]=64512,d[$]=13,d[$|256]=13)}let g=new Uint32Array(2048),b=new Uint32Array(64),j=new Uint32Array(64);for(let $=1;$<1024;++$){let _e=$<<13,st=0;for(;!(_e&8388608);)_e<<=1,st-=8388608;_e&=-8388609,st+=947912704,g[$]=_e|st}for(let $=1024;$<2048;++$)g[$]=939524096+($-1024<<13);for(let $=1;$<31;++$)b[$]=$<<23;b[31]=1199570944,b[32]=2147483648;for(let $=33;$<63;++$)b[$]=2147483648+($-32<<23);b[63]=3347054592;for(let $=1;$<64;++$)$!==32&&(j[$]=1024);return{floatView:o,uint32View:a,baseTable:c,shiftTable:d,mantissaTable:g,exponentTable:b,offsetTable:j}}function F4(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=gi(e,-65504,65504),ga.floatView[0]=e;let o=ga.uint32View[0],a=o>>23&511;return ga.baseTable[a]+((o&8388607)>>ga.shiftTable[a])}function k4(e){let o=e>>10;return ga.uint32View[0]=ga.mantissaTable[ga.offsetTable[o]+(e&1023)]+ga.exponentTable[o],ga.floatView[0]}var oC=Object.freeze({__proto__:null,fromHalfFloat:k4,toHalfFloat:F4});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ba$1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ba$1);var dh=".",Vp=Symbol("target"),Lw=Symbol("unsubscribe");function zp(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function aC(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var ss=Array.isArray;function Dc(e){return typeof e=="symbol"}var V4={after:(e,o)=>ss(e)?e.slice(o.length):o===""?e:e.slice(o.length+1),concat:(e,o)=>ss(e)?(e=[...e],o&&e.push(o),e):o&&o.toString!==void 0?(e!==""&&(e+=dh),Dc(o)?e+o.toString():e+o):e,initial:e=>{if(ss(e))return e.slice(0,-1);if(e==="")return e;let o=e.lastIndexOf(dh);return o===-1?"":e.slice(0,o)},last:e=>{if(ss(e))return e[e.length-1]||"";if(e==="")return e;let o=e.lastIndexOf(dh);return o===-1?e:e.slice(o+1)},walk:(e,o)=>{if(ss(e))for(let a of e)o(a);else if(e!==""){let a=0,c=e.indexOf(dh);if(c===-1)o(e);else for(;a<e.length;)c===-1&&(c=e.length),o(e.slice(a,c)),a=c+1,c=e.indexOf(dh,a)}},get(e,o){return this.walk(o,a=>{e&&(e=e[a])}),e}},An=V4;function Bw(e){return typeof e=="object"&&typeof e.next=="function"}function Nw(e,o,a,c,d){let g=e.next;if(o.name==="entries")e.next=function(){let b=g.call(this);return b.done===!1&&(b.value[0]=d(b.value[0],o,b.value[0],c),b.value[1]=d(b.value[1],o,b.value[0],c)),b};else if(o.name==="values"){let b=a[Vp].keys();e.next=function(){let j=g.call(this);return j.done===!1&&(j.value=d(j.value,o,b.next().value,c)),j}}else e.next=function(){let b=g.call(this);return b.done===!1&&(b.value=d(b.value,o,b.value,c)),b};return e}function Wy(e,o,a){return e.isUnsubscribed||o.ignoreSymbols&&Dc(a)||o.ignoreUnderscores&&a.charAt(0)==="_"||"ignoreKeys"in o&&o.ignoreKeys.includes(a)}var Up=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let o=this._getDescriptorCache(),a=o.get(e);return a===void 0&&(a={},o.set(e,a)),a}_getOwnPropertyDescriptor(e,o){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,o);let a=this._getProperties(e),c=a[o];return c===void 0&&(c=Reflect.getOwnPropertyDescriptor(e,o),a[o]=c),c}getProxy(e,o,a,c){if(this.isUnsubscribed)return e;let d=e[c],g=d||e;this._pathCache.set(g,o);let b=this._proxyCache.get(g);return b===void 0&&(b=d===void 0?new Proxy(e,a):e,this._proxyCache.set(g,b)),b}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,o){return!Object.is(e,An.get(o,this.getPath(e)))}defineProperty(e,o,a){return Reflect.defineProperty(e,o,a)?(this.isUnsubscribed||(this._getProperties(e)[o]=a),!0):!1}setProperty(e,o,a,c,d){if(!this._equals(d,a)||!(o in e)){let g=this._getOwnPropertyDescriptor(e,o);return g!==void 0&&"set"in g?Reflect.set(e,o,a,c):Reflect.set(e,o,a)}return!0}deleteProperty(e,o,a){if(Reflect.deleteProperty(e,o)){if(!this.isUnsubscribed){let c=this._getDescriptorCache().get(e);c&&(delete c[o],this._pathCache.delete(a))}return!0}return!1}isSameDescriptor(e,o,a){let c=this._getOwnPropertyDescriptor(o,a);return e!==void 0&&c!==void 0&&Object.is(e.value,c.value)&&(e.writable||!1)===(c.writable||!1)&&(e.enumerable||!1)===(c.enumerable||!1)&&(e.configurable||!1)===(c.configurable||!1)&&e.get===c.get&&e.set===c.set}isGetInvariant(e,o){let a=this._getOwnPropertyDescriptor(e,o);return a!==void 0&&a.configurable!==!0&&a.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function fh(e){return toString.call(e)==="[object Object]"}function ph(){return!0}function xl(e,o){return e.length!==o.length||e.some((a,c)=>o[c]!==a)}var qy=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),z4=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Fw={push:ph,pop:ph,shift:ph,unshift:ph,copyWithin:xl,reverse:xl,sort:xl,splice:xl,flat:xl,fill:xl},lC=new Set([...qy,...z4,...Object.keys(Fw)]);function mh(e,o){if(e.size!==o.size)return!0;for(let a of e)if(!o.has(a))return!0;return!1}var kw=["keys","values","entries"],Vw=new Set(["has","toString"]),zw={add:mh,clear:mh,delete:mh,forEach:mh},cC=new Set([...Vw,...Object.keys(zw),...kw]);function gh(e,o){if(e.size!==o.size)return!0;let a;for(let[c,d]of e)if(a=o.get(c),a!==d||a===void 0&&!o.has(c))return!0;return!1}var U4=new Set([...Vw,"get"]),Uw={set:gh,clear:gh,delete:gh,forEach:gh},uC=new Set([...U4,...Object.keys(Uw),...kw]),Hi=class{constructor(e,o,a,c){this._path=o,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=c,this._changes=c?[]:null,this.clone=o===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return qy.has(e)}_shallowClone(e){let o=e;if(fh(e))o={...e};else if(ss(e))o=[...e];else if(e instanceof Date)o=new Date(e);else if(e instanceof Set)o=new Set([...e].map(a=>this._shallowClone(a)));else if(e instanceof Map){o=new Map;for(let[a,c]of e.entries())o.set(a,this._shallowClone(c))}return this._clonedCache.add(o),o}preferredThisArg(e,o,a,c){return e?(ss(c)?this._onIsChanged=Fw[o]:c instanceof Set?this._onIsChanged=zw[o]:c instanceof Map&&(this._onIsChanged=Uw[o]),c):a}update(e,o,a){let c=An.after(e,this._path);if(o!=="length"){let d=this.clone;An.walk(c,g=>{d&&d[g]&&(this._clonedCache.has(d[g])||(d[g]=this._shallowClone(d[g])),d=d[g])}),this._hasOnValidate&&this._changes.push({path:c,property:o,previous:a}),d&&d[o]&&(d[o]=a)}this._isChanged=!0}undo(e){let o;for(let a=this._changes.length-1;a!==-1;a--)o=this._changes[a],An.get(e,o.path)[o.property]=o.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},yh=class extends Hi{static isHandledMethod(e){return lC.has(e)}},Gp=class extends Hi{undo(e){e.setTime(this.clone.getTime())}isChanged(e,o){return!o(this.clone.valueOf(),e.valueOf())}},vh$1=class extends Hi{static isHandledMethod(o){return cC.has(o)}undo(o){for(let a of this.clone)o.add(a);for(let a of o)this.clone.has(a)||o.delete(a)}},xh=class extends Hi{static isHandledMethod(e){return uC.has(e)}undo(e){for(let[o,a]of this.clone.entries())e.set(o,a);for(let o of e.keys())this.clone.has(o)||e.delete(o)}},jp=class extends Hi{constructor(e,o,a,c){super(void 0,o,a,c),this._arg1=a[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},Hp=class extends Hi{constructor(e,o,a,c){super(void 0,o,a,c),this._weakKey=a[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let o=e.has(this._weakKey);this._weakHas&&!o?e.set(this._weakKey,this._weakValue):!this._weakHas&&o?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Qs=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return fh(e)||ss(e)||zp(e)}static isHandledMethod(e,o){return fh(e)?Hi.isHandledMethod(o):ss(e)?yh.isHandledMethod(o):e instanceof Set?vh$1.isHandledMethod(o):e instanceof Map?xh.isHandledMethod(o):zp(e)}get isCloning(){return this._stack.length>0}start(e,o,a){let c=Hi;ss(e)?c=yh:e instanceof Date?c=Gp:e instanceof Set?c=vh$1:e instanceof Map?c=xh:e instanceof WeakSet?c=jp:e instanceof WeakMap&&(c=Hp),this._stack.push(new c(e,o,a,this._hasOnValidate))}update(e,o,a){this._stack[this._stack.length-1].update(e,o,a)}preferredThisArg(e,o,a){let{name:c}=e,d=Qs.isHandledMethod(a,c);return this._stack[this._stack.length-1].preferredThisArg(d,c,o,a)}isChanged(e,o,a){return this._stack[this._stack.length-1].isChanged(e,o,a)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},G4={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Gw=(e,o,a={})=>{a={...G4,...a};let c=Symbol("ProxyTarget"),{equals:d,isShallow:g,ignoreDetached:b,details:j}=a,$=new Up(d),_e=typeof a.onValidate=="function",st=new Qs(_e),rt=(At,Tt,kt,It,Lt)=>!_e||st.isCloning||a.onValidate(An.concat($.getPath(At),Tt),kt,It,Lt)===!0,ut=(At,Tt,kt,It)=>{!Wy($,a,Tt)&&!(b&&$.isDetached(At,e))&&gt($.getPath(At),Tt,kt,It)},gt=(At,Tt,kt,It,Lt)=>{st.isCloning?st.update(At,Tt,It):o(An.concat(At,Tt),kt,It,Lt)},yt=At=>At&&(At[c]||At),wt=(At,Tt,kt,It)=>aC(At)||kt==="constructor"||g&&!Qs.isHandledMethod(Tt,kt)||Wy($,a,kt)||$.isGetInvariant(Tt,kt)||b&&$.isDetached(Tt,e)?At:(It===void 0&&(It=$.getPath(Tt)),$.getProxy(At,An.concat(It,kt),Ct,c)),Ct={get(At,Tt,kt){if(Dc(Tt)){if(Tt===c||Tt===Vp)return At;if(Tt===Lw&&!$.isUnsubscribed&&$.getPath(At).length===0)return $.unsubscribe(),At}let It=zp(At)?Reflect.get(At,Tt):Reflect.get(At,Tt,kt);return wt(It,At,Tt)},set(At,Tt,kt,It){kt=yt(kt);let Lt=At[c]||At,Ft=Lt[Tt];if(d(Ft,kt)&&Tt in At)return!0;let Nt=rt(At,Tt,kt,Ft);return Nt&&$.setProperty(Lt,Tt,kt,It,Ft)?(ut(At,Tt,At[Tt],Ft),!0):!Nt},defineProperty(At,Tt,kt){if(!$.isSameDescriptor(kt,At,Tt)){let It=At[Tt];rt(At,Tt,kt.value,It)&&$.defineProperty(At,Tt,kt,It)&&ut(At,Tt,kt.value,It)}return!0},deleteProperty(At,Tt){if(!Reflect.has(At,Tt))return!0;let kt=Reflect.get(At,Tt),It=rt(At,Tt,void 0,kt);return It&&$.deleteProperty(At,Tt,kt)?(ut(At,Tt,void 0,kt),!0):!It},apply(At,Tt,kt){let It=Tt[c]||Tt;if($.isUnsubscribed)return Reflect.apply(At,It,kt);if((j===!1||j!==!0&&!j.includes(At.name))&&Qs.isHandledType(It)){let Lt=An.initial($.getPath(At)),Ft=Qs.isHandledMethod(It,At.name);st.start(It,Lt,kt);let Nt=Reflect.apply(At,st.preferredThisArg(At,Tt,It),Ft?kt.map(hs=>yt(hs)):kt),Ht=st.isChanged(It,d),dr=st.stop();if(Qs.isHandledType(Nt)&&Ft&&(Tt instanceof Map&&At.name==="get"&&(Lt=An.concat(Lt,kt[0])),Nt=$.getProxy(Nt,Lt,Ct)),Ht){let hs={name:At.name,args:kt,result:Nt},us=st.isCloning?An.initial(Lt):Lt,hn=st.isCloning?An.last(Lt):"";rt(An.get(e,us),hn,It,dr,hs)?gt(us,hn,It,dr,hs):st.undo(It)}return(Tt instanceof Map||Tt instanceof Set)&&Bw(Nt)?Nw(Nt,At,Tt,Lt,wt):Nt}return Reflect.apply(At,Tt,kt)}},Pt=$.getProxy(e,a.pathAsArray?[]:"",Ct);return o=o.bind(Pt),_e&&(a.onValidate=a.onValidate.bind(Pt)),Pt};Gw.target=e=>e&&e[Vp]||e;Gw.unsubscribe=e=>e[Lw]||e;var jw=Gw,j4=typeof global=="object"&&global&&global.Object===Object&&global,Yy=j4,H4=typeof self=="object"&&self&&self.Object===Object&&self,W4=Yy||H4||Function("return this")(),Kr=W4,q4=Kr.Symbol,Wi=q4,hC=Object.prototype,Y4=hC.hasOwnProperty,X4=hC.toString,Wp=Wi?Wi.toStringTag:void 0;function Q4(e){var o=Y4.call(e,Wp),a=e[Wp];try{e[Wp]=void 0;var c=!0}catch{}var d=X4.call(e);return c&&(o?e[Wp]=a:delete e[Wp]),d}var dC=Q4,K4=Object.prototype,Z4=K4.toString;function J4(e){return Z4.call(e)}var fC=J4,$4="[object Null]",ej="[object Undefined]",pC=Wi?Wi.toStringTag:void 0;function tj(e){return e==null?e===void 0?ej:$4:pC&&pC in Object(e)?dC(e):fC(e)}var os=tj;function rj(e){return e!=null&&typeof e=="object"}var rn=rj,ij="[object Symbol]";function nj(e){return typeof e=="symbol"||rn(e)&&os(e)==ij}var bl=nj;function sj(e,o){for(var a=-1,c=e==null?0:e.length,d=Array(c);++a<c;)d[a]=o(e[a],a,e);return d}var Xy=sj,oj=Array.isArray,Oi=oj,aj=1/0,mC=Wi?Wi.prototype:void 0,gC=mC?mC.toString:void 0;function yC(e){if(typeof e=="string")return e;if(Oi(e))return Xy(e,yC)+"";if(bl(e))return gC?gC.call(e):"";var o=e+"";return o=="0"&&1/e==-aj?"-0":o}var vC=yC,lj=/\s/;function cj(e){for(var o=e.length;o--&&lj.test(e.charAt(o)););return o}var xC=cj,uj=/^\s+/;function hj(e){return e&&e.slice(0,xC(e)+1).replace(uj,"")}var bC=hj;function dj(e){var o=typeof e;return e!=null&&(o=="object"||o=="function")}var bi=dj,SC=NaN,fj=/^[-+]0x[0-9a-f]+$/i,pj=/^0b[01]+$/i,mj=/^0o[0-7]+$/i,gj=parseInt;function yj(e){if(typeof e=="number")return e;if(bl(e))return SC;if(bi(e)){var o=typeof e.valueOf=="function"?e.valueOf():e;e=bi(o)?o+"":o}if(typeof e!="string")return e===0?e:+e;e=bC(e);var a=pj.test(e);return a||mj.test(e)?gj(e.slice(2),a?2:8):fj.test(e)?SC:+e}var Hw=yj;function vj(e){return e}var wC=vj,xj="[object AsyncFunction]",bj="[object Function]",Sj="[object GeneratorFunction]",wj="[object Proxy]";function Aj(e){if(!bi(e))return!1;var o=os(e);return o==bj||o==Sj||o==xj||o==wj}var Qy=Aj,_j=Kr["__core-js_shared__"],Ky=_j,AC=function(){var e=/[^.]+$/.exec(Ky&&Ky.keys&&Ky.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ej(e){return!!AC&&AC in e}var _C=Ej,Tj=Function.prototype,Mj=Tj.toString;function Cj(e){if(e!=null){try{return Mj.call(e)}catch{}try{return e+""}catch{}}return""}var Sa=Cj,Pj=/[\\^$.*+?()[\]{}|]/g,Dj=/^\[object .+?Constructor\]$/,Oj=Function.prototype,Ij=Object.prototype,Rj=Oj.toString,Lj=Ij.hasOwnProperty,Bj=RegExp("^"+Rj.call(Lj).replace(Pj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nj(e){if(!bi(e)||_C(e))return!1;var o=Qy(e)?Bj:Dj;return o.test(Sa(e))}var EC=Nj;function Fj(e,o){return e==null?void 0:e[o]}var TC=Fj;function kj(e,o){var a=TC(e,o);return EC(a)?a:void 0}var Fn=kj,Vj=Fn(Kr,"WeakMap"),Zy=Vj,MC=Object.create,zj=function(){function e(){}return function(o){if(!bi(o))return{};if(MC)return MC(o);e.prototype=o;var a=new e;return e.prototype=void 0,a}}(),CC=zj;function Uj(e,o,a){switch(a.length){case 0:return e.call(o);case 1:return e.call(o,a[0]);case 2:return e.call(o,a[0],a[1]);case 3:return e.call(o,a[0],a[1],a[2])}return e.apply(o,a)}var PC=Uj;function Gj(e,o){var a=-1,c=e.length;for(o||(o=Array(c));++a<c;)o[a]=e[a];return o}var DC=Gj,jj=800,Hj=16,Wj=Date.now;function qj(e){var o=0,a=0;return function(){var c=Wj(),d=Hj-(c-a);if(a=c,d>0){if(++o>=jj)return arguments[0]}else o=0;return e.apply(void 0,arguments)}}var OC=qj;function Yj(e){return function(){return e}}var IC=Yj,Xj=function(){try{var e=Fn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),bh=Xj,Qj=bh?function(e,o){return bh(e,"toString",{configurable:!0,enumerable:!1,value:IC(o),writable:!0})}:wC,RC=Qj,Kj=OC(RC),LC=Kj;function Zj(e,o){for(var a=-1,c=e==null?0:e.length;++a<c&&o(e[a],a,e)!==!1;);return e}var BC=Zj,Jj=9007199254740991,$j=/^(?:0|[1-9]\d*)$/;function eH(e,o){var a=typeof e;return o=o??Jj,!!o&&(a=="number"||a!="symbol"&&$j.test(e))&&e>-1&&e%1==0&&e<o}var Sh=eH;function tH(e,o,a){o=="__proto__"&&bh?bh(e,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[o]=a}var Jy=tH;function rH(e,o){return e===o||e!==e&&o!==o}var wh=rH,iH=Object.prototype,nH=iH.hasOwnProperty;function sH(e,o,a){var c=e[o];(!(nH.call(e,o)&&wh(c,a))||a===void 0&&!(o in e))&&Jy(e,o,a)}var Ah=sH;function oH(e,o,a,c){var d=!a;a||(a={});for(var g=-1,b=o.length;++g<b;){var j=o[g],$=c?c(a[j],e[j],j,a,e):void 0;$===void 0&&($=e[j]),d?Jy(a,j,$):Ah(a,j,$)}return a}var To=oH,NC=Math.max;function aH(e,o,a){return o=NC(o===void 0?e.length-1:o,0),function(){for(var c=arguments,d=-1,g=NC(c.length-o,0),b=Array(g);++d<g;)b[d]=c[o+d];d=-1;for(var j=Array(o+1);++d<o;)j[d]=c[d];return j[o]=a(b),PC(e,this,j)}}var FC=aH,lH=9007199254740991;function cH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lH}var _h=cH;function uH(e){return e!=null&&_h(e.length)&&!Qy(e)}var $y=uH,hH=Object.prototype;function dH(e){var o=e&&e.constructor,a=typeof o=="function"&&o.prototype||hH;return e===a}var Eh=dH;function fH(e,o){for(var a=-1,c=Array(e);++a<e;)c[a]=o(a);return c}var kC=fH,pH="[object Arguments]";function mH(e){return rn(e)&&os(e)==pH}var Ww=mH,VC=Object.prototype,gH=VC.hasOwnProperty,yH=VC.propertyIsEnumerable,vH=Ww(function(){return arguments}())?Ww:function(e){return rn(e)&&gH.call(e,"callee")&&!yH.call(e,"callee")},Th=vH;function xH(){return!1}var zC=xH,jC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,UC=jC&&typeof module=="object"&&module&&!module.nodeType&&module,bH=UC&&UC.exports===jC,GC=bH?Kr.Buffer:void 0,SH=GC?GC.isBuffer:void 0,wH=SH||zC,Oc=wH,AH="[object Arguments]",_H="[object Array]",EH="[object Boolean]",TH="[object Date]",MH="[object Error]",CH="[object Function]",PH="[object Map]",DH="[object Number]",OH="[object Object]",IH="[object RegExp]",RH="[object Set]",LH="[object String]",BH="[object WeakMap]",NH="[object ArrayBuffer]",FH="[object DataView]",kH="[object Float32Array]",VH="[object Float64Array]",zH="[object Int8Array]",UH="[object Int16Array]",GH="[object Int32Array]",jH="[object Uint8Array]",HH="[object Uint8ClampedArray]",WH="[object Uint16Array]",qH="[object Uint32Array]",Rr$1={};Rr$1[kH]=Rr$1[VH]=Rr$1[zH]=Rr$1[UH]=Rr$1[GH]=Rr$1[jH]=Rr$1[HH]=Rr$1[WH]=Rr$1[qH]=!0;Rr$1[AH]=Rr$1[_H]=Rr$1[NH]=Rr$1[EH]=Rr$1[FH]=Rr$1[TH]=Rr$1[MH]=Rr$1[CH]=Rr$1[PH]=Rr$1[DH]=Rr$1[OH]=Rr$1[IH]=Rr$1[RH]=Rr$1[LH]=Rr$1[BH]=!1;function YH(e){return rn(e)&&_h(e.length)&&!!Rr$1[os(e)]}var HC=YH;function XH(e){return function(o){return e(o)}}var Mh=XH,WC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qp=WC&&typeof module=="object"&&module&&!module.nodeType&&module,QH=qp&&qp.exports===WC,qw=QH&&Yy.process,KH=function(){try{var e=qp&&qp.require&&qp.require("util").types;return e||qw&&qw.binding&&qw.binding("util")}catch{}}(),wa=KH,qC=wa&&wa.isTypedArray,ZH=qC?Mh(qC):HC,ev=ZH,JH=Object.prototype,$H=JH.hasOwnProperty;function e5(e,o){var a=Oi(e),c=!a&&Th(e),d=!a&&!c&&Oc(e),g=!a&&!c&&!d&&ev(e),b=a||c||d||g,j=b?kC(e.length,String):[],$=j.length;for(var _e in e)(o||$H.call(e,_e))&&!(b&&(_e=="length"||d&&(_e=="offset"||_e=="parent")||g&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||Sh(_e,$)))&&j.push(_e);return j}var tv=e5;function t5(e,o){return function(a){return e(o(a))}}var rv=t5,r5=rv(Object.keys,Object),YC=r5,i5=Object.prototype,n5=i5.hasOwnProperty;function s5(e){if(!Eh(e))return YC(e);var o=[];for(var a in Object(e))n5.call(e,a)&&a!="constructor"&&o.push(a);return o}var XC=s5;function o5(e){return $y(e)?tv(e):XC(e)}var Ch=o5;function a5(e){var o=[];if(e!=null)for(var a in Object(e))o.push(a);return o}var QC=a5,l5=Object.prototype,c5=l5.hasOwnProperty;function u5(e){if(!bi(e))return QC(e);var o=Eh(e),a=[];for(var c in e)c=="constructor"&&(o||!c5.call(e,c))||a.push(c);return a}var KC=u5;function h5(e){return $y(e)?tv(e,!0):KC(e)}var bs=h5,d5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f5=/^\w*$/;function p5(e,o){if(Oi(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||bl(e)?!0:f5.test(e)||!d5.test(e)||o!=null&&e in Object(o)}var ZC=p5,m5=Fn(Object,"create"),Aa=m5;function g5(){this.__data__=Aa?Aa(null):{},this.size=0}var JC=g5;function y5(e){var o=this.has(e)&&delete this.__data__[e];return this.size-=o?1:0,o}var $C=y5,v5="__lodash_hash_undefined__",x5=Object.prototype,b5$1=x5.hasOwnProperty;function S5(e){var o=this.__data__;if(Aa){var a=o[e];return a===v5?void 0:a}return b5$1.call(o,e)?o[e]:void 0}var eP=S5,w5=Object.prototype,A5=w5.hasOwnProperty;function _5(e){var o=this.__data__;return Aa?o[e]!==void 0:A5.call(o,e)}var tP=_5,E5="__lodash_hash_undefined__";function T5(e,o){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Aa&&o===void 0?E5:o,this}var rP=T5;function Ph(e){var o=-1,a=e==null?0:e.length;for(this.clear();++o<a;){var c=e[o];this.set(c[0],c[1])}}Ph.prototype.clear=JC;Ph.prototype.delete=$C;Ph.prototype.get=eP;Ph.prototype.has=tP;Ph.prototype.set=rP;var Yw=Ph;function M5(){this.__data__=[],this.size=0}var iP=M5;function C5(e,o){for(var a=e.length;a--;)if(wh(e[a][0],o))return a;return-1}var Sl=C5,P5=Array.prototype,D5=P5.splice;function O5(e){var o=this.__data__,a=Sl(o,e);if(a<0)return!1;var c=o.length-1;return a==c?o.pop():D5.call(o,a,1),--this.size,!0}var nP=O5;function I5(e){var o=this.__data__,a=Sl(o,e);return a<0?void 0:o[a][1]}var sP=I5;function R5(e){return Sl(this.__data__,e)>-1}var oP=R5;function L5(e,o){var a=this.__data__,c=Sl(a,e);return c<0?(++this.size,a.push([e,o])):a[c][1]=o,this}var aP=L5;function Dh(e){var o=-1,a=e==null?0:e.length;for(this.clear();++o<a;){var c=e[o];this.set(c[0],c[1])}}Dh.prototype.clear=iP;Dh.prototype.delete=nP;Dh.prototype.get=sP;Dh.prototype.has=oP;Dh.prototype.set=aP;var wl=Dh,B5=Fn(Kr,"Map"),Al=B5;function N5(){this.size=0,this.__data__={hash:new Yw,map:new(Al||wl),string:new Yw}}var lP=N5;function F5(e){var o=typeof e;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?e!=="__proto__":e===null}var cP=F5;function k5(e,o){var a=e.__data__;return cP(o)?a[typeof o=="string"?"string":"hash"]:a.map}var _l=k5;function V5(e){var o=_l(this,e).delete(e);return this.size-=o?1:0,o}var uP=V5;function z5(e){return _l(this,e).get(e)}var hP=z5;function U5(e){return _l(this,e).has(e)}var dP=U5;function G5(e,o){var a=_l(this,e),c=a.size;return a.set(e,o),this.size+=a.size==c?0:1,this}var fP=G5;function Oh(e){var o=-1,a=e==null?0:e.length;for(this.clear();++o<a;){var c=e[o];this.set(c[0],c[1])}}Oh.prototype.clear=lP;Oh.prototype.delete=uP;Oh.prototype.get=hP;Oh.prototype.has=dP;Oh.prototype.set=fP;var Ic=Oh,j5="Expected a function";function Xw(e,o){if(typeof e!="function"||o!=null&&typeof o!="function")throw new TypeError(j5);var a=function(){var c=arguments,d=o?o.apply(this,c):c[0],g=a.cache;if(g.has(d))return g.get(d);var b=e.apply(this,c);return a.cache=g.set(d,b)||g,b};return a.cache=new(Xw.Cache||Ic),a}Xw.Cache=Ic;var pP=Xw,H5=500;function W5(e){var o=pP(e,function(c){return a.size===H5&&a.clear(),c}),a=o.cache;return o}var mP=W5,q5=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y5=/\\(\\)?/g,X5=mP(function(e){var o=[];return e.charCodeAt(0)===46&&o.push(""),e.replace(q5,function(a,c,d,g){o.push(d?g.replace(Y5,"$1"):c||a)}),o}),gP=X5;function Q5(e){return e==null?"":vC(e)}var yP=Q5;function K5(e,o){return Oi(e)?e:ZC(e,o)?[e]:gP(yP(e))}var Ss=K5,Z5=1/0;function J5(e){if(typeof e=="string"||bl(e))return e;var o=e+"";return o=="0"&&1/e==-Z5?"-0":o}var El=J5;function $5(e,o){o=Ss(o,e);for(var a=0,c=o.length;e!=null&&a<c;)e=e[El(o[a++])];return a&&a==c?e:void 0}var iv=$5;function eW(e,o){for(var a=-1,c=o.length,d=e.length;++a<c;)e[d+a]=o[a];return e}var Ih=eW,vP=Wi?Wi.isConcatSpreadable:void 0;function tW(e){return Oi(e)||Th(e)||!!(vP&&e&&e[vP])}var xP=tW;function bP(e,o,a,c,d){var g=-1,b=e.length;for(a||(a=xP),d||(d=[]);++g<b;){var j=e[g];o>0&&a(j)?o>1?bP(j,o-1,a,c,d):Ih(d,j):c||(d[d.length]=j)}return d}var SP=bP;function rW(e){var o=e==null?0:e.length;return o?SP(e,1):[]}var wP=rW;function iW(e){return LC(FC(e,void 0,wP),e+"")}var nv=iW,nW=rv(Object.getPrototypeOf,Object),Rh=nW,sW="[object Object]",oW=Function.prototype,aW=Object.prototype,AP=oW.toString,lW=aW.hasOwnProperty,cW=AP.call(Object);function uW(e){if(!rn(e)||os(e)!=sW)return!1;var o=Rh(e);if(o===null)return!0;var a=lW.call(o,"constructor")&&o.constructor;return typeof a=="function"&&a instanceof a&&AP.call(a)==cW}var _P=uW;function hW(e,o,a){var c=-1,d=e.length;o<0&&(o=-o>d?0:d+o),a=a>d?d:a,a<0&&(a+=d),d=o>a?0:a-o>>>0,o>>>=0;for(var g=Array(d);++c<d;)g[c]=e[c+o];return g}var EP=hW;function dW(){this.__data__=new wl,this.size=0}var TP=dW;function fW(e){var o=this.__data__,a=o.delete(e);return this.size=o.size,a}var MP=fW;function pW(e){return this.__data__.get(e)}var CP=pW;function mW(e){return this.__data__.has(e)}var PP=mW,gW=200;function yW(e,o){var a=this.__data__;if(a instanceof wl){var c=a.__data__;if(!Al||c.length<gW-1)return c.push([e,o]),this.size=++a.size,this;a=this.__data__=new Ic(c)}return a.set(e,o),this.size=a.size,this}var DP=yW;function Lh(e){var o=this.__data__=new wl(e);this.size=o.size}Lh.prototype.clear=TP;Lh.prototype.delete=MP;Lh.prototype.get=CP;Lh.prototype.has=PP;Lh.prototype.set=DP;var Bh=Lh;function vW(e,o){return e&&To(o,Ch(o),e)}var OP=vW;function xW(e,o){return e&&To(o,bs(o),e)}var IP=xW,NP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RP=NP&&typeof module=="object"&&module&&!module.nodeType&&module,bW=RP&&RP.exports===NP,LP=bW?Kr.Buffer:void 0,BP=LP?LP.allocUnsafe:void 0;function SW(e,o){if(o)return e.slice();var a=e.length,c=BP?BP(a):new e.constructor(a);return e.copy(c),c}var FP=SW;function wW(e,o){for(var a=-1,c=e==null?0:e.length,d=0,g=[];++a<c;){var b=e[a];o(b,a,e)&&(g[d++]=b)}return g}var kP=wW;function AW(){return[]}var sv=AW,_W=Object.prototype,EW=_W.propertyIsEnumerable,VP=Object.getOwnPropertySymbols,TW=VP?function(e){return e==null?[]:(e=Object(e),kP(VP(e),function(o){return EW.call(e,o)}))}:sv,Nh=TW;function MW(e,o){return To(e,Nh(e),o)}var zP=MW,CW=Object.getOwnPropertySymbols,PW=CW?function(e){for(var o=[];e;)Ih(o,Nh(e)),e=Rh(e);return o}:sv,ov=PW;function DW(e,o){return To(e,ov(e),o)}var UP=DW;function OW(e,o,a){var c=o(e);return Oi(e)?c:Ih(c,a(e))}var av=OW;function IW(e){return av(e,Ch,Nh)}var Yp=IW;function RW(e){return av(e,bs,ov)}var lv=RW,LW=Fn(Kr,"DataView"),cv=LW,BW=Fn(Kr,"Promise"),uv=BW,NW=Fn(Kr,"Set"),hv=NW,GP="[object Map]",FW="[object Object]",jP="[object Promise]",HP="[object Set]",WP="[object WeakMap]",qP="[object DataView]",kW=Sa(cv),VW=Sa(Al),zW=Sa(uv),UW=Sa(hv),GW=Sa(Zy),Rc=os;(cv&&Rc(new cv(new ArrayBuffer(1)))!=qP||Al&&Rc(new Al)!=GP||uv&&Rc(uv.resolve())!=jP||hv&&Rc(new hv)!=HP||Zy&&Rc(new Zy)!=WP)&&(Rc=function(e){var o=os(e),a=o==FW?e.constructor:void 0,c=a?Sa(a):"";if(c)switch(c){case kW:return qP;case VW:return GP;case zW:return jP;case UW:return HP;case GW:return WP}return o});var _a=Rc,jW=Object.prototype,HW=jW.hasOwnProperty;function WW(e){var o=e.length,a=new e.constructor(o);return o&&typeof e[0]=="string"&&HW.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var YP=WW,qW=Kr.Uint8Array,Fh=qW;function YW(e){var o=new e.constructor(e.byteLength);return new Fh(o).set(new Fh(e)),o}var kh=YW;function XW(e,o){var a=o?kh(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var XP=XW,QW=/\w*$/;function KW(e){var o=new e.constructor(e.source,QW.exec(e));return o.lastIndex=e.lastIndex,o}var QP=KW,KP=Wi?Wi.prototype:void 0,ZP=KP?KP.valueOf:void 0;function ZW(e){return ZP?Object(ZP.call(e)):{}}var JP=ZW;function JW(e,o){var a=o?kh(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var $P=JW,$W="[object Boolean]",e6="[object Date]",t6="[object Map]",r6="[object Number]",i6="[object RegExp]",n6="[object Set]",s6="[object String]",o6="[object Symbol]",a6="[object ArrayBuffer]",l6="[object DataView]",c6="[object Float32Array]",u6="[object Float64Array]",h6="[object Int8Array]",d6="[object Int16Array]",f6="[object Int32Array]",p6="[object Uint8Array]",m6="[object Uint8ClampedArray]",g6="[object Uint16Array]",y6="[object Uint32Array]";function v6(e,o,a){var c=e.constructor;switch(o){case a6:return kh(e);case $W:case e6:return new c(+e);case l6:return XP(e,a);case c6:case u6:case h6:case d6:case f6:case p6:case m6:case g6:case y6:return $P(e,a);case t6:return new c;case r6:case s6:return new c(e);case i6:return QP(e);case n6:return new c;case o6:return JP(e)}}var e2=v6;function x6(e){return typeof e.constructor=="function"&&!Eh(e)?CC(Rh(e)):{}}var t2=x6,b6$1="[object Map]";function S6(e){return rn(e)&&_a(e)==b6$1}var r2=S6,i2=wa&&wa.isMap,w6=i2?Mh(i2):r2,n2=w6,A6="[object Set]";function _6(e){return rn(e)&&_a(e)==A6}var s2=_6,o2=wa&&wa.isSet,E6=o2?Mh(o2):s2,a2=E6,T6=1,M6=2,C6=4,l2="[object Arguments]",P6="[object Array]",D6="[object Boolean]",O6="[object Date]",I6="[object Error]",c2="[object Function]",R6="[object GeneratorFunction]",L6="[object Map]",B6="[object Number]",u2="[object Object]",N6="[object RegExp]",F6="[object Set]",k6="[object String]",V6="[object Symbol]",z6="[object WeakMap]",U6="[object ArrayBuffer]",G6="[object DataView]",j6="[object Float32Array]",H6="[object Float64Array]",W6="[object Int8Array]",q6="[object Int16Array]",Y6="[object Int32Array]",X6="[object Uint8Array]",Q6="[object Uint8ClampedArray]",K6="[object Uint16Array]",Z6="[object Uint32Array]",Or$1={};Or$1[l2]=Or$1[P6]=Or$1[U6]=Or$1[G6]=Or$1[D6]=Or$1[O6]=Or$1[j6]=Or$1[H6]=Or$1[W6]=Or$1[q6]=Or$1[Y6]=Or$1[L6]=Or$1[B6]=Or$1[u2]=Or$1[N6]=Or$1[F6]=Or$1[k6]=Or$1[V6]=Or$1[X6]=Or$1[Q6]=Or$1[K6]=Or$1[Z6]=!0;Or$1[I6]=Or$1[c2]=Or$1[z6]=!1;function dv(e,o,a,c,d,g){var b,j=o&T6,$=o&M6,_e=o&C6;if(a&&(b=d?a(e,c,d,g):a(e)),b!==void 0)return b;if(!bi(e))return e;var st=Oi(e);if(st){if(b=YP(e),!j)return DC(e,b)}else{var rt=_a(e),ut=rt==c2||rt==R6;if(Oc(e))return FP(e,j);if(rt==u2||rt==l2||ut&&!d){if(b=$||ut?{}:t2(e),!j)return $?UP(e,IP(b,e)):zP(e,OP(b,e))}else{if(!Or$1[rt])return d?e:{};b=e2(e,rt,j)}}g||(g=new Bh);var gt=g.get(e);if(gt)return gt;g.set(e,b),a2(e)?e.forEach(function(Ct){b.add(dv(Ct,o,a,Ct,e,g))}):n2(e)&&e.forEach(function(Ct,Pt){b.set(Pt,dv(Ct,o,a,Pt,e,g))});var yt=_e?$?lv:Yp:$?bs:Ch,wt=st?void 0:yt(e);return BC(wt||e,function(Ct,Pt){wt&&(Pt=Ct,Ct=e[Pt]),Ah(b,Pt,dv(Ct,o,a,Pt,e,g))}),b}var fv=dv,J6=1,$6=4;function e8(e){return fv(e,J6|$6)}var Ea=e8,t8="__lodash_hash_undefined__";function r8(e){return this.__data__.set(e,t8),this}var h2=r8;function i8(e){return this.__data__.has(e)}var d2=i8;function pv(e){var o=-1,a=e==null?0:e.length;for(this.__data__=new Ic;++o<a;)this.add(e[o])}pv.prototype.add=pv.prototype.push=h2;pv.prototype.has=d2;var f2=pv;function n8(e,o){for(var a=-1,c=e==null?0:e.length;++a<c;)if(o(e[a],a,e))return!0;return!1}var p2=n8;function s8(e,o){return e.has(o)}var m2=s8,o8=1,a8=2;function l8(e,o,a,c,d,g){var b=a&o8,j=e.length,$=o.length;if(j!=$&&!(b&&$>j))return!1;var _e=g.get(e),st=g.get(o);if(_e&&st)return _e==o&&st==e;var rt=-1,ut=!0,gt=a&a8?new f2:void 0;for(g.set(e,o),g.set(o,e);++rt<j;){var yt=e[rt],wt=o[rt];if(c)var Ct=b?c(wt,yt,rt,o,e,g):c(yt,wt,rt,e,o,g);if(Ct!==void 0){if(Ct)continue;ut=!1;break}if(gt){if(!p2(o,function(Pt,At){if(!m2(gt,At)&&(yt===Pt||d(yt,Pt,a,c,g)))return gt.push(At)})){ut=!1;break}}else if(!(yt===wt||d(yt,wt,a,c,g))){ut=!1;break}}return g.delete(e),g.delete(o),ut}var mv=l8;function c8(e){var o=-1,a=Array(e.size);return e.forEach(function(c,d){a[++o]=[d,c]}),a}var g2=c8;function u8(e){var o=-1,a=Array(e.size);return e.forEach(function(c){a[++o]=c}),a}var y2=u8,h8=1,d8=2,f8="[object Boolean]",p8="[object Date]",m8="[object Error]",g8="[object Map]",y8="[object Number]",v8="[object RegExp]",x8="[object Set]",b8$1="[object String]",S8="[object Symbol]",w8="[object ArrayBuffer]",A8="[object DataView]",v2=Wi?Wi.prototype:void 0,Qw=v2?v2.valueOf:void 0;function _8(e,o,a,c,d,g,b){switch(a){case A8:if(e.byteLength!=o.byteLength||e.byteOffset!=o.byteOffset)return!1;e=e.buffer,o=o.buffer;case w8:return!(e.byteLength!=o.byteLength||!g(new Fh(e),new Fh(o)));case f8:case p8:case y8:return wh(+e,+o);case m8:return e.name==o.name&&e.message==o.message;case v8:case b8$1:return e==o+"";case g8:var j=g2;case x8:var $=c&h8;if(j||(j=y2),e.size!=o.size&&!$)return!1;var _e=b.get(e);if(_e)return _e==o;c|=d8,b.set(e,o);var st=mv(j(e),j(o),c,d,g,b);return b.delete(e),st;case S8:if(Qw)return Qw.call(e)==Qw.call(o)}return!1}var x2=_8,E8=1,T8=Object.prototype,M8=T8.hasOwnProperty;function C8(e,o,a,c,d,g){var b=a&E8,j=Yp(e),$=j.length,_e=Yp(o),st=_e.length;if($!=st&&!b)return!1;for(var rt=$;rt--;){var ut=j[rt];if(!(b?ut in o:M8.call(o,ut)))return!1}var gt=g.get(e),yt=g.get(o);if(gt&&yt)return gt==o&&yt==e;var wt=!0;g.set(e,o),g.set(o,e);for(var Ct=b;++rt<$;){ut=j[rt];var Pt=e[ut],At=o[ut];if(c)var Tt=b?c(At,Pt,ut,o,e,g):c(Pt,At,ut,e,o,g);if(!(Tt===void 0?Pt===At||d(Pt,At,a,c,g):Tt)){wt=!1;break}Ct||(Ct=ut=="constructor")}if(wt&&!Ct){var kt=e.constructor,It=o.constructor;kt!=It&&"constructor"in e&&"constructor"in o&&!(typeof kt=="function"&&kt instanceof kt&&typeof It=="function"&&It instanceof It)&&(wt=!1)}return g.delete(e),g.delete(o),wt}var b2$1=C8,P8=1,S2="[object Arguments]",w2="[object Array]",gv="[object Object]",D8=Object.prototype,A2=D8.hasOwnProperty;function O8(e,o,a,c,d,g){var b=Oi(e),j=Oi(o),$=b?w2:_a(e),_e=j?w2:_a(o);$=$==S2?gv:$,_e=_e==S2?gv:_e;var st=$==gv,rt=_e==gv,ut=$==_e;if(ut&&Oc(e)){if(!Oc(o))return!1;b=!0,st=!1}if(ut&&!st)return g||(g=new Bh),b||ev(e)?mv(e,o,a,c,d,g):x2(e,o,$,a,c,d,g);if(!(a&P8)){var gt=st&&A2.call(e,"__wrapped__"),yt=rt&&A2.call(o,"__wrapped__");if(gt||yt){var wt=gt?e.value():e,Ct=yt?o.value():o;return g||(g=new Bh),d(wt,Ct,a,c,g)}}return ut?(g||(g=new Bh),b2$1(e,o,a,c,d,g)):!1}var _2=O8;function E2(e,o,a,c,d){return e===o?!0:e==null||o==null||!rn(e)&&!rn(o)?e!==e&&o!==o:_2(e,o,a,c,E2,d)}var T2=E2;function I8(e,o){return e!=null&&o in Object(e)}var M2=I8;function R8(e,o,a){o=Ss(o,e);for(var c=-1,d=o.length,g=!1;++c<d;){var b=El(o[c]);if(!(g=e!=null&&a(e,b)))break;e=e[b]}return g||++c!=d?g:(d=e==null?0:e.length,!!d&&_h(d)&&Sh(b,d)&&(Oi(e)||Th(e)))}var C2=R8;function L8(e,o){return e!=null&&C2(e,o,M2)}var P2=L8,B8=function(){return Kr.Date.now()},yv=B8,N8="Expected a function",F8=Math.max,k8=Math.min;function V8(e,o,a){var c,d,g,b,j,$,_e=0,st=!1,rt=!1,ut=!0;if(typeof e!="function")throw new TypeError(N8);o=Hw(o)||0,bi(a)&&(st=!!a.leading,rt="maxWait"in a,g=rt?F8(Hw(a.maxWait)||0,o):g,ut="trailing"in a?!!a.trailing:ut);function gt(Lt){var Ft=c,Nt=d;return c=d=void 0,_e=Lt,b=e.apply(Nt,Ft),b}function yt(Lt){return _e=Lt,j=setTimeout(Pt,o),st?gt(Lt):b}function wt(Lt){var Ft=Lt-$,Nt=Lt-_e,Ht=o-Ft;return rt?k8(Ht,g-Nt):Ht}function Ct(Lt){var Ft=Lt-$,Nt=Lt-_e;return $===void 0||Ft>=o||Ft<0||rt&&Nt>=g}function Pt(){var Lt=yv();if(Ct(Lt))return At(Lt);j=setTimeout(Pt,wt(Lt))}function At(Lt){return j=void 0,ut&&c?gt(Lt):(c=d=void 0,b)}function Tt(){j!==void 0&&clearTimeout(j),_e=0,c=$=d=j=void 0}function kt(){return j===void 0?b:At(yv())}function It(){var Lt=yv(),Ft=Ct(Lt);if(c=arguments,d=this,$=Lt,Ft){if(j===void 0)return yt($);if(rt)return clearTimeout(j),j=setTimeout(Pt,o),gt($)}return j===void 0&&(j=setTimeout(Pt,o)),b}return It.cancel=Tt,It.flush=kt,It}var Lc=V8;function z8(e){var o=e==null?0:e.length;return o?e[o-1]:void 0}var D2=z8;function U8(e,o){return o.length<2?e:iv(e,EP(o,0,-1))}var O2=U8;function G8(e,o){return T2(e,o)}var Xp=G8;function j8(e,o){return o=Ss(o,e),e=O2(e,o),e==null||delete e[El(D2(o))]}var I2=j8;function H8(e){return _P(e)?void 0:e}var R2=H8,W8=1,q8=2,Y8=4,X8=nv(function(e,o){var a={};if(e==null)return a;var c=!1;o=Xy(o,function(g){return g=Ss(g,e),c||(c=g.length>1),g}),To(e,lv(e),a),c&&(a=fv(a,W8|q8|Y8,R2));for(var d=o.length;d--;)I2(a,o[d]);return a}),Vh=X8;function Q8(e,o,a,c){if(!bi(e))return e;o=Ss(o,e);for(var d=-1,g=o.length,b=g-1,j=e;j!=null&&++d<g;){var $=El(o[d]),_e=a;if($==="__proto__"||$==="constructor"||$==="prototype")return e;if(d!=b){var st=j[$];_e=c?c(st,$,j):void 0,_e===void 0&&(_e=bi(st)?st:Sh(o[d+1])?[]:{})}Ah(j,$,_e),j=j[$]}return e}var L2=Q8;function K8(e,o,a){for(var c=-1,d=o.length,g={};++c<d;){var b=o[c],j=iv(e,b);a(j,b)&&L2(g,Ss(b,e),j)}return g}var B2=K8;function Z8(e,o){return B2(e,o,function(a,c){return P2(e,c)})}var N2=Z8,J8=nv(function(e,o){return e==null?{}:N2(e,o)}),as=J8,$8="Expected a function";function eq(e,o,a){var c=!0,d=!0;if(typeof e!="function")throw new TypeError($8);return bi(a)&&(c="leading"in a?!!a.leading:c,d="trailing"in a?!!a.trailing:d),Lc(e,o,{leading:c,maxWait:o,trailing:d})}var Kw=eq;function vv(e){for(let o of Object.keys(e))e[o]===void 0&&delete e[o];return e}function _n(e,o){return Object.setPrototypeOf(e,o),e}var tq=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),rq=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),iq=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||zh&&"ontouchend"in document,nq=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,sq=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,oq=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,o=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(o)},aq=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},lq=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},cq=tq();cq&&lq();var zh=rq(),Uh=iq(),F2=nq(),Ii=sq(),Zw=oq(),Jw=Number(aq());function xv(e){return Array.isArray(e)?e:[e]}function bv(e,o){let a=0;for(;a<e.length&&a<o.length;){if(e[a]<o[a])return-1;if(e[a]>o[a])return 1;a+=1}return a!==o.length?-1:a!==e.length?1:0}function Qp(e){return zh?e.metaKey:e.ctrlKey}function k2(e){return e.wheelDeltaY===0||e.deltaY===0?zh&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var $e$1=[],wv={},Kp={},Sv={};function V2(e){$e$1.includes(e)||$e$1.push(e)}function Gh(e){delete wv[e.pointerId];for(let o=0;o<$e$1.length;o++)if($e$1[o].pointerId===e.pointerId){$e$1.splice(o,1);break}}function z2(){$e$1.splice(0,$e$1.length)}function Av(e){if(e.pointerType!=="touch")return;let o=wv[e.pointerId];o===void 0&&(o={x:0,y:0},wv[e.pointerId]=o),o.x=e.pageX,o.y=e.pageY}function _v(e){let o=e.pointerId===$e$1[0].pointerId?$e$1[1]:$e$1[0];return wv[o.pointerId]}function U2(e){Kp[e.key]=!0,Sv[e.key]=Sv[e.key]===void 0?1:Sv[e.key]+1}function G2(e){if(zh&&Kp.Meta)for(let o in Kp)Kp[o]=!1;else Kp[e.key]=!1;Sv={}}function j2(e){e.addEventListener("pointerdown",V2,!0),e.addEventListener("pointerdown",Av,!0),e.addEventListener("pointermove",Av,!0),e.addEventListener("pointerup",Gh,!0),e.addEventListener("pointercancel",Gh,!0),e.addEventListener("pointerleave",Gh,!0),window.addEventListener("keydown",U2,!0),window.addEventListener("keyup",G2,!0)}function H2(e){e.removeEventListener("pointerdown",V2,!0),e.removeEventListener("pointerdown",Av,!0),e.removeEventListener("pointermove",Av,!0),e.removeEventListener("pointerup",Gh,!0),e.removeEventListener("pointercancel",Gh,!0),e.removeEventListener("pointerleave",Gh,!0),window.removeEventListener("keydown",U2,!0),window.removeEventListener("keyup",G2,!0)}var W2,q2=new Promise(e=>{W2=e}),Ev;function Y2(){if(Ev)return Ev;async function e(){let o="https://unpkg.com/@splinetool/navmesh-wasm@1.0.26/build",a=__vitePreload(()=>import("./navmesh-QdgGSsus.js"),__vite__mapDeps([])),[c,d]=await Promise.all([a,fetch(`${o}/navmesh.wasm`).then(j=>j.arrayBuffer())]),g=c.default,b=await g({wasmBinary:d});W2(b)}return Ev=e(),Ev}var X2,Q2=new Promise(e=>{X2=e}),Tv;function K2(){if(Tv)return Tv;async function e(){let o=await __vitePreload(()=>import("./physics-XY0FX9ij.js"),__vite__mapDeps([]));await o.init(),X2(o)}return Tv=e(),Tv}var it=class{modifyById(e,o){let a=this;if(a[e]===void 0)throw new Error("not expected");{let c={...a,[e]:o};return Object.setPrototypeOf(c,it.prototype),c}}add(e,o){var a;return((a=this.runOp({type:1,id:e,data:o}))==null?void 0:a.data)??this}runOp(e){let o=this;if(e.type===1){let a=o[e.id],c;a===void 0?c={type:2,id:e.id}:c={type:1,id:e.id,data:a};let{id:d,data:g}=e,b={...o,[d]:g};return Object.setPrototypeOf(b,it.prototype),{data:b,actual:e,reverse:c}}else if(e.type===2){let{id:a}=e,c=o[a];if(c===void 0)return null;{let d={...o};return Object.setPrototypeOf(d,it.prototype),delete d[a],{data:d,actual:e,reverse:{type:1,id:a,data:c}}}}return null}};function Zp(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let o=Object.getOwnPropertyNames(e);for(let a of o){let c=e[a];c&&typeof c=="object"&&Zp(c)}return Object.freeze(e)}function Z2(e,o){let a=0;for(;a<e.length&&a<o.length;){if(e[a]<o[a])return-1;if(e[a]>o[a])return 1;a+=1}return a!==o.length?-1:a!==e.length?1:0}var jh=class extends Error{};function Mv(e){let o={...e};return Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o}function Mo(e,o,a){if(e===void 0?o===void 0?(e=0,o=10):e=o-10:o===void 0&&(o=e+10),e>o){let g=e;e=o,o=g}let c=[],d=1/(a+1);for(let g=0;g<a;g++){let b=e+(o-e)*(g+.75+Math.random()*.5)*d;c.push(b)}return c}function Hh(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function J2(){return typeof process<"u"}function $2(e,o){for(let a of e)o(a.id,a.data)!==!0&&$2(a.children,o)}function eD(e,o){if(o(e.id,e.data)!==!0)for(let a of e.children)eD(a,o)}var yr$1=class extends Array{constructor(...o){super(...o),Object.setPrototypeOf(this,yr$1.prototype)}deepFreeze(){let o=0;for(;o<this.length;)Zp(this[o]),o++}fillCaches0(o,a){this.objCaches.set(o.id,o),this.parentCaches.set(o.id,a);for(let c of o.children)this.fillCaches0(c,o.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let o of this)this.fillCaches0(o,null)}}randomId(){this.fillCaches();let o=Array.from(this.objCaches.keys());if(o.length!==0)return o[Math.max(0,Math.floor(Math.random()*o.length)-1)]}nonExistOrDescendantOf(o,a){if(!this.has(o))return!0;for(;o;){let c=this.parent(o);if(c===a)return!0;o=c}return!1}rootAcestor(o){for(;o;){let a=this.parent(o);if(a)o=a;else return o}return o}isDescendantOf(o,a){for(;o;){let c=this.parent(o);if(c===a)return!0;o=c}return!1}data(o){var a;return(a=this.get(o))==null?void 0:a.data}has(o){return this.childrenOf(o)!==void 0}get(o){return this.fillCaches(),this.objCaches.get(o)}childrenOf(o){var a;return o===null?this:(a=this.get(o))==null?void 0:a.children}traverseFrom(o,a){if(o===null)this.traverse(a);else{let c=this.get(o);c&&eD(c,a)}}traverse(o){$2(this,o)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(o){return this.fillCaches(),this.parentCaches.get(o)}childrenArray(o){return o===null?this:this.get(o).children}modifyById(o,a){if(this.get(o)===void 0)throw new Error("not expected");{let c=this.parent(o),d=this.childrenArray(c),g=d.findIndex(j=>j.id===o);if(g<0)throw new Error("not expected");let b=d[g];return d=[...d],d[g]={...b,data:a},this.modifyArrayBy(c,d)}}modifyArrayBy(o,a){let c=o,d=a;for(;c!==null;){let b=d,j=c;if(c=this.parent(c),c===void 0)throw new Error;d=this.childrenArray(c);let $=d.findIndex(_e=>_e.id===j);if($<0)throw new Error;d=[...d],d[$]={...d[$],children:b}}Object.setPrototypeOf(d,yr$1.prototype);let g=d;return g.fillCaches(),g}runOp(o){switch(o.type){case 7:return this.addOp(o);case 8:return this.deleteOp(o);case 9:return this.moveOp(o)}return null}checkDuplicatedIdRec({id:o,children:a}){if(this.get(o)!==void 0)return!0;for(let c of a)if(this.checkDuplicatedIdRec(c))return!0;return!1}addOp(o){let{parent:a,fi:c,id:d,data:g,children:b}=o;if(a!==null&&this.get(a)===void 0||this.checkDuplicatedIdRec(o))return null;{let j=a,$=this.childrenArray(j),_e={fi:c,id:d,data:g,children:b};return $=[...$,_e],$.sort((st,rt)=>st.fi-rt.fi),o.localIndex=$.indexOf(_e),{data:this.modifyArrayBy(j,$),actual:o,reverse:{type:8,id:d}}}}deleteOp(o){let{id:a}=o;if(this.get(a)===null)return null;{let c=this.parent(a);if(c===void 0)return null;let d=this.childrenArray(c),g=d.findIndex(j=>j.id===a);o.localIndex=g,d=[...d];let b=d.splice(g,1)[0];return{data:this.modifyArrayBy(c,d),actual:o,reverse:{type:7,...b,parent:c}}}}moveOp(o){let{parent:a,fi:c,id:d}=o;if(a!==null&&this.get(a)===void 0)return this.deleteOp({type:8,id:d});if(a!==null){let ut=a;for(;ut!==null;){if(ut===void 0)throw new Error;if(ut===d)throw new jh("cyclic tree");ut=this.parent(ut)}}let g=this.parent(d);if(g===void 0)return null;let b=g,j=this.childrenArray(g),$=j.findIndex(ut=>ut.id===d);j=[...j];let _e=j.splice($,1)[0],st=this.modifyArrayBy(g,j);g=a,j=st.childrenArray(g);let rt=_e.fi;return _e={..._e,fi:c},j=[...j,_e],j.sort((ut,gt)=>ut.fi-gt.fi),o.localIndex=j.indexOf(_e),st=st.modifyArrayBy(g,j),{data:st,actual:o,reverse:{type:9,parent:b,fi:rt,id:d}}}previous(o,a){if(a===null){let d=this.childrenArray(o);return d.length===0?null:d[d.length-1].id}let c=null;for(let d of this.childrenArray(o)){if(d.id===a)return c;c=d.id}return null}traverseSortNext(o){let a=this.parent(o);if(a!==void 0){let c=this.childrenArray(a),d=c.findIndex(g=>g.id===o)+1;if(d<c.length)return c[d].id;if(a)return this.traverseSortNext(a)}}sortNext(o){let a=this.childrenArray(o);return a.length>0?a[0].id:this.traverseSortNext(o)}traverseSortPrevious(o){let a=this.childrenArray(o);return a.length>0?this.traverseSortPrevious(a[a.length-1].id):o}sortPrevious(o){let a=this.parent(o);if(a!==void 0){let c=this.childrenArray(a),d=c.findIndex(g=>g.id===o)-1;return d>=0?this.traverseSortPrevious(c[d].id):a}}getAllSorted(o){let a=[];for(let c of o){let d=this.getWithSortKey(c.id);d!==void 0&&a.push({...c,...d})}a.sort((c,d)=>Z2(c.sortKey,d.sortKey));for(let c of a)delete c.sortKey;return a}getWithSortKey(o){var a=o;let c=[],d=this.get(a),g=d;if(d!==void 0){for(;a;)c.splice(0,0,d.fi),a=this.parent(a),a!==null&&(d=this.get(a));return{...g,sortKey:c}}}insertBeforeHelper(o,a,c){return this.insertAfterHelper(o,this.previous(o,a),c)}insertAfterHelper(o,a,c){let d=this.childrenArray(o);if(a===null){if(d.length===0)return Mo(0,c,c);{let g=d[0].fi;return Mo(g-c,g,c)}}else{let g=this.get(a);if(g===void 0||this.parent(a)!==o)throw new Error("illegal args");let b=d.find(j=>j.fi>g.fi);if(b===void 0){let j=d[d.length-1].fi;return Mo(j,j+c,c)}else return Mo(g.fi,b.fi,c)}}},Wh;(e=>{function o(a,c){if(c.type!==0)return null;if(Array.isArray(a)){let d=c.props,g={},b=[...a],j=!1;if(d)for(let $ of Object.keys(d)){let _e=parseInt($);if(isNaN(_e))throw new Error("wrong index");g[$]=b[_e],b[_e]=d[$],j=!0}return j?{data:b,actual:c,reverse:{type:0,props:g}}:null}else{let d=c.props,g={},b={...a},j=!1;if(d)for(let $ of Object.keys(d)){g[$]=b[$];let _e=d[$];_e===void 0?delete b[$]:b[$]=_e,j=!0}return j?{data:b,actual:c,reverse:{type:0,props:g}}:null}}e.runOp=o})(Wh||(Wh={}));var Ue=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ue.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Zp(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var o;return(o=this.get(e))==null?void 0:o.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,o){if(this.get(e)===void 0)throw new Error("not expected");{let a=this,c=a.findIndex(g=>g.id===e);if(c<0)throw new Error("not expected");let d=a[c];return a=[...a],a[c]={...d,data:o},this.modifyArrayBy(a)}}modifyArrayBy(e){Object.setPrototypeOf(e,Ue.prototype);let o=e;return J2()||o.fillCaches(),o}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:o,id:a,data:c}=e,d=this,g={fi:o,id:a,data:c};return d=[...d,g],d.sort((b,j)=>b.fi-j.fi),e.localIndex=d.indexOf(g),{data:this.modifyArrayBy(d),actual:e,reverse:{type:5,id:a}}}deleteOp(e){let{id:o}=e,a=this,c=a.findIndex(g=>g.id===o);if(c===-1)return null;e.localIndex=c,a=[...a];let d=a.splice(c,1)[0];return{data:this.modifyArrayBy(a),actual:e,reverse:{type:4,...d}}}moveOp(e){let{fi:o,id:a}=e,c=this;c=[...c];let d=c.findIndex(j=>j.id===a);if(d===-1)return null;let g=c[d].fi,b={...c[d],fi:o};return c[d]=b,c.sort((j,$)=>j.fi-$.fi),e.localIndex=c.indexOf(b),{data:this.modifyArrayBy(c),actual:e,reverse:{type:6,fi:g,id:a}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let o=null;for(let a of this){if(a.id===e)return o;o=a.id}return null}insertBeforeHelper(e,o){return this.insertAfterHelper(this.previous(e),o)}insertAfterHelper(e,o){let a=this;if(e===null){if(a.length===0)return Mo(0,o,o);{let c=a[0].fi;return Mo(c-o,c,o)}}else{let c=this.get(e);if(c===void 0)throw new Error("illegal args");let d=a.find(g=>g.fi>c.fi);if(d===void 0){let g=a[a.length-1].fi;return Mo(g,g+o,o)}else return Mo(c.fi,d.fi,o)}}};function qh(e){return e&&typeof e=="object"&&e instanceof vr}var vr=class{unusedFunOverridesTable(e){}runOp(e){let o=[],a=this,c=0,d={};for(;c<e.path.length;){if(o.push(a),a=a===void 0?void 0:a[e.path[c]],a!==void 0&&!qh(a))return null;c+=1}a=a?Mv(a):new vr;for(let[j,$]of Object.entries(e.props)){let _e=a[j];d[j]=_e,$===void 0?delete a[j]:a[j]=$}for(;c>0;){if(Object.keys(a).length===0){let j=o[c-1];j&&(a=Mv(j),delete a[e.path[c-1]])}else{let j=o[c-1];if(j){let $=Mv(j);$[e.path[c-1]]=a,a=$}else{let $=new vr;$[e.path[c-1]]=a,a=$}}c-=1}let g=Object.setPrototypeOf(a,vr.prototype),b={...e,props:d};return{data:g,actual:e,reverse:b}}},Co;(e=>{function o(d,g){return Jp(d,g)??d}e.apply=o;function a(d,g){return e1(d,g)}e.merge=a;function c(d,g){let b=0,j=g.path,$=d;for(;b<j.length&&$!==void 0;){if($=Nr$1.zoomOnce($,j[b]),$===void 0)return g;if(!qh($))return;b+=1}if($===void 0)return g;if(qh($))if(g.type===0){let _e={...g.props};for(let st of Object.keys($))delete _e[st];return{...g,props:_e}}else if(g.type===1||g.type===4||g.type===7){let _e=$w([g],$);return _e?(console.log(_e),_e):g}else return g}e.filterOp=c})(Co||(Co={}));function $w(e,o){if(o===void 0)return;let a=!1,c=e.map(d=>{let g=d.id,b=Jp(d.data,o[g]);if(a=a||b!==void 0,b===void 0&&(b=d.data),d.children){let j=$w(d.children,o);return j!==void 0?a=!0:j=d.children,{...d,id:g,data:b,children:j}}else return{...d,id:g,data:b}});if(a)return c}function uq(e,o){if(o===void 0)return;let a=!1,c=e.map(d=>{let g=d.id,b=Jp(d.data,o[g]);return a=a||b!==void 0,b===void 0&&(b=d.data),{...d,id:g,data:b}});if(a)return Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c}function Jp(e,o){if(!qh(o))return o;if(e instanceof yr$1){let a=$w(e,o);return a!==void 0&&Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a}else{if(e instanceof Ue)return uq(e,o);if(Array.isArray(e)){let a=!1,c=e.map((d,g)=>{let b=Jp(d,o[g]);return a=a||b!==void 0,b===void 0&&(b=d),b});return a?(Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c):void 0}else{if(e instanceof vr)return e1(e,o);if(e&&typeof e=="object"){let a={},c=!1;for(let[d,g]of Object.entries(e)){let b=Jp(g,o[d]);c=c||b!==void 0,b===void 0&&(b=g),a[d]=b}return c?(Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a):void 0}}}}function e1(e,o){if(e===void 0)return o;if(o===void 0)return e;if(!qh(o))return o;if(!qh(e))return Co.apply(e,o);let a=new Set;for(let d of Object.keys(e))a.add(d);for(let d of Object.keys(o))a.add(d);let c=new vr;for(let d of a){let g=e1(e===void 0?void 0:e[d],o===void 0?void 0:o[d]);c[d]=g}return c}function tD(e,o){let a={cur:[],result:[],len:0};return e=$p(e,o,a)??e,[e,a.result]}function Cv(e,o){return e===null?null:(e.cur[e.len]=o,e.len+=1,e)}function Pv(e){e&&(e.len-=1)}function hq(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function rD(e,o,a){let c=!1,d=e.map(g=>{let b=g.id,j=o[b];if(j!==void 0&&typeof j=="string"&&(c=!0,b=j,a!==null))throw new Error("not supported");let $=$p(g.data,o,Cv(a,b));Pv(a),c=c||$!==void 0,$===void 0&&($=g.data);let _e=rD(g.children,o,a);return _e!==void 0?c=!0:_e=g.children,{...g,id:b,data:$,children:_e}});if(c)return d}function dq(e,o,a){let c=!1,d=e.map(g=>{let b=g.id,j=o[b];if(j!==void 0&&typeof j=="string"&&(c=!0,b=j,a!==null))throw new Error("not supported");let $=$p(g.data,o,Cv(a,b));return Pv(a),c=c||$!==void 0,$===void 0&&($=g.data),{...g,id:b,data:$}});if(c)return Object.setPrototypeOf(d,Object.getPrototypeOf(e)),d}function $p(e,o,a){if(e instanceof yr$1){let c=rD(e,o,a);return c!==void 0&&Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c}else{if(e instanceof Ue)return dq(e,o,a);if(Array.isArray(e)){let c=!1,d=e.map((g,b)=>{let j=$p(g,o,Cv(a,b));return Pv(a),c=c||j!==void 0,j===void 0&&(j=g),j});return c?(Object.setPrototypeOf(d,Object.getPrototypeOf(e)),d):void 0}else if(e&&typeof e=="object"&&!Hh(e)){let c={},d=!1;for(let[g,b]of Object.entries(e))if(g!=="name"){let j=o[g];if(typeof j=="string"){if(a!==null)throw new Error("not supported");d=!0,g=j}let $=$p(b,o,Cv(a,g));Pv(a),d=d||$!==void 0,$===void 0&&($=b),c[g]=$}else c[g]=b;return d?(Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c):void 0}else if(typeof e=="string"){let c=o[e];return c!==void 0&&hq(a),c}else return}}var Yh;(e=>{function o(a,c){let d=Nr$1.zoom(c,a.path);if(typeof d=="object"){let g={};for(let b of Object.keys(a.props))g[b]=d[b];return{...a,props:g}}else return{...a,props:{}}}e.replaceProps=o})(Yh||(Yh={}));var Fr$1;(e=>{function o($,_e){return{...$,path:$.path.slice(_e)}}e.drop=o;function a($,_e){var st;return((st=c($,_e))==null?void 0:st.data)??$}e.applySimple=a;function c($,_e){var ut,gt;let st=_e.path;for(var rt=[];;){let yt;if($ instanceof vr&&_e.type===0&&(yt=$.runOp({..._e,path:st.slice(rt.length)}),yt===null&&(yt=void 0)),yt===void 0&&rt.length===st.length&&($ instanceof yr$1||$ instanceof Ue||$ instanceof it?yt=$.runOp(_e):yt=Wh.runOp($,_e)),yt!==void 0)if(yt!==null){let Pt=yt.data;for(let At=rt.length-1;At>=0;At--){let Tt=st[At],kt=rt[At];if(kt instanceof yr$1){if(typeof Tt=="number")throw new Error("illegal arg");Pt=kt.modifyById(Tt,Pt)}else if(kt instanceof Ue){if(typeof Tt=="number")throw new Error("illegal arg");Pt=kt.modifyById(Tt,Pt)}else if(kt instanceof it){if(typeof Tt=="number")throw new Error("illegal arg");Pt=kt.modifyById(Tt,Pt)}else if(kt instanceof vr){let It={...kt,[Tt]:Pt};Pt=Object.setPrototypeOf(It,vr.prototype)}else if(typeof kt=="object")if(Array.isArray(kt)){if(typeof Tt=="string"&&(Tt=parseInt(Tt),isNaN(Tt)))throw new Error("Invalid path");let It=Pt;Pt=[...kt],Pt[Tt]=It}else Pt={...kt,[Tt]:Pt};else return null}return{data:Pt,actual:{...yt.actual,path:st},reverse:{...yt.reverse,path:st}}}else return null;let wt=st[rt.length],Ct;if($ instanceof yr$1){if(typeof wt=="number")throw new Error("");Ct=(ut=$.get(wt))==null?void 0:ut.data}else if($ instanceof Ue){if(typeof wt=="number")throw new Error("");Ct=(gt=$.get(wt))==null?void 0:gt.data}else $!==null&&(Ct=$[wt]);if(Ct!==void 0)rt.push($),$=Ct;else return null}}e.apply=c;function d($,_e){for(let st=0;st<$.length&&st<_e.length;st++)if($[st]!==_e[st])return!0;return!1}e.pathDisjoint=d;function g($,_e){if($.length!==_e.length)return!1;for(let st=0;st<$.length;st++)if($[st]!==_e[st])return!1;return!0}e.pathEq=g;function b($,_e){return d($.path,_e.path)}e.commutative=b;function j($,_e){return $.type===0&&_e.type===0&&g($.path,_e.path)?Object.keys($.props).every(st=>_e.props[st]!==void 0):!1}e.subsumed=j})(Fr$1||(Fr$1={}));var em;(e=>{function o(){return[]}e.empty=o;function a(_e,st){let rt=[];for(let ut of _e){let[gt,...yt]=ut.path;gt===st&&rt.push({...ut,path:yt})}return rt}e.removePrefix=a;function c(_e,st){return _e.map(rt=>({...rt,path:[st,...rt.path]}))}e.addPrefix=c;function d(_e,st){return[..._e,...st]}e.concat=d;function g(_e,st){return[..._e.filter(rt=>!st.some(ut=>Fr$1.subsumed(rt,ut))),...st]}e.compress=g;function b(_e,st){return _e.every(rt=>st.every(ut=>Fr$1.commutative(rt,ut)))}e.commutative=b;function j(_e,st){for(let rt of st){let ut=$(_e,rt);ut!==null&&(_e=ut.data)}return _e}e.applyAll=j;function $(_e,st){var rt=_e;let ut=[],gt=[];for(let yt of st)try{if(yt.type===3||yt.type===5&&yt.path[yt.path.length-1]==="variables"){let wt,Ct,Pt;if(yt.type===3?(wt=Nr$1.zoom(rt,[...yt.path,yt.id]),Pt=Fr$1.apply(rt,{...yt,type:2})):(wt=Nr$1.zoom(rt,[...yt.path,yt.id,"value"]),Pt=Fr$1.apply(rt,yt)),Pt!==null){rt=Pt.data;let[At,Tt]=tD(rt,{[yt.id]:wt});rt=At;for(let kt=0;kt<Tt.length;kt++){let It=Tt[kt],Lt=It.pop();if(typeof Lt=="number"){let Ft=[Lt];for(let Ht=kt+1;Ht<Tt.length;Ht++){let dr=Tt[Ht],hs=dr[dr.length-1];if(typeof hs=="number"&&Nr$1.equal(It,dr.slice(0,dr.length-1)))Ft.push(hs),Tt.splice(Ht,1);else break}let Nt=Nr$1.zoom(rt,It);Ct=Nt.map((Ht,dr)=>Ft.includes(dr)?yt.id:Ht),wt=Nt,Lt=It.pop()}else{if(Lt==="alphaOverride"||Lt==="alpha"){wt/=100;let Ft=wt,Nt=Nr$1.zoom(rt,It.slice(0,It.length-2)),Ht=Nt.layers.map(dr=>dr.id===It[It.length-1]?{...dr,data:{...dr.data,[Lt]:Ft}}:dr);Object.setPrototypeOf(Ht,Object.getPrototypeOf(Nt.layers)),Nt.layers=Ht}Ct=yt.id}ut.push({type:0,path:It,props:{[Lt]:wt}}),gt.push({type:0,path:It,props:{[Lt]:Ct}})}gt.push(Pt.reverse),ut.push(Pt.actual)}}else{let wt=Fr$1.apply(rt,yt);wt!==null&&(ut.push(wt.actual),rt=wt.data,gt.push(wt.reverse))}}catch(wt){if(wt instanceof jh)return null;throw wt}return{data:rt,actual:ut,reverse:gt.reverse()}}e.apply=$})(em||(em={}));var iD=Symbol(),fq=Symbol(),Ov=Symbol(),Bc=class{reportOp(e,o,a=[]){let c=this;if(o===null)return;c._current=o.data;let d=a;for(;!(c instanceof Dv);){let g=c._path,b=c._current;if(g!==""&&d.splice(0,0,g),c=c._parent,c===null)return;c.update(g,b)}c.push(d,e,o.actual,o.reverse)}deleteChildren(e){if(this._children){let o=this._children[e];if(o){let a=o[Ov];a&&a(),delete this._children[e]}}}},r1=class extends Bc{constructor(e,o,a){super(),this._parent=e,this._path=o,this._current=a}update(e,o){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=o}else this._current={...this._current,[e]:o}}runOp(e){this.reportOp(e,Wh.runOp(this._current,e),e.path)}},i1=class extends Bc{constructor(e,o,a){super(),this._parent=e,this._path=o,this._current=a}update(e,o){this._current={...this._current,[e]:o},Object.setPrototypeOf(this._current,it.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},nD={get(e,o){if(o===Ov)return()=>{e._parent=null};if(o===iD)return e._current;if(o===fq)return e;let{_current:a,_children:c}=e;if(o==="push"&&Array.isArray(a))throw new Error("not supported to expand array");let d=c===void 0?void 0:c[o];if(d!==void 0)return d;let g=a[o],b=Iv(e,o,g);return b!==g?(c===void 0&&(c={},e._children=c),c[o]=b,b):g},has(e,o){return o in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,o){let a=e._current,c=Reflect.getOwnPropertyDescriptor(a,o);return c&&{writable:!0,configurable:!0,enumerable:c.enumerable,value:a[o]}}},pq={...nD,set(e,o,a){let c={type:0,props:{[o]:kr$1(a)??a}};return e.deleteChildren(o),e.runOp(c),!0},deleteProperty(e,o){let a={type:0,props:{[o]:void 0}};return e.deleteChildren(o),e.runOp(a),!0}},mq={...nD,set(e,o,a){return a===void 0?this.deleteProperty(e,o):(e.deleteChildren(o),e.runOp({type:1,id:o,data:a})),!0},deleteProperty(e,o){return e.runOp({type:2,id:o}),!0}},Xh=class extends Bc{constructor(e,o,a){super(),this._children={},this._parent=e,this._path=o,this._current=a,this[Ov]=()=>{this._parent=null}}unproxy(){return this._current}update(e,o){this._current=this._current.modifyById(e,o)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,o){return this._current.isDescendantOf(e,o)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((o,a)=>{e(o,this.data(o))})}data(e){var b;let{_current:o,_children:a}=this,c=a===void 0?void 0:a[e];if(c!==void 0)return c;let d=(b=o.get(e))==null?void 0:b.data,g=Iv(this,e,d);return g!==d?(a===void 0&&(a={},this._children=a),a[e]=g,g):d}add(e,o,a,c,d){this.runOp({type:7,parent:e,fi:o,id:a,data:c,children:d})}move(e,o,a){this.runOp({type:9,parent:e,fi:o,id:a})}insertAfter(e,o,a){let c=this._current.insertAfterHelper(e,o,a.length);for(let d=0;d<a.length;d++){let g=a[d];this.add(e,c[d],g.id,g.data,g.children)}}insertBefore(e,o,a){let c=this._current.insertBeforeHelper(e,o,a.length);for(let d=0;d<a.length;d++){let g=a[d];this.add(e,c[d],g.id,g.data,g.children)}}moveAfter(e,o,a){let c=this._current.insertAfterHelper(e,o,a.length);for(let d=0;d<a.length;d++){let g=a[d];this.move(e,c[d],g)}}moveBefore(e,o,a){let c=this._current.insertBeforeHelper(e,o,a.length);for(let d=0;d<a.length;d++){let g=a[d];this.move(e,c[d],g)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},Qh=class extends Bc{constructor(e,o,a){super(),this._children={},this._parent=e,this._path=o,this._current=a,this[Ov]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let o=this.length;for(let a=0;a<o;a++){let c=this._current[a].id,d=this._current[a].fi;e(this.data(this._current[a].id),c,d)}}find(e){let o=this.length;for(let a=0;a<o;a++){let c=this._current[a].id;if(e(this.data(c),c))return this.get(c)}}update(e,o){this._current=this._current.modifyById(e,o)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var b;let{_current:o,_children:a}=this,c=a===void 0?void 0:a[e];if(c!==void 0)return c;let d=(b=o.get(e))==null?void 0:b.data,g=Iv(this,e,d);return g!==d?(a===void 0&&(a={},this._children=a),a[e]=g,g):d}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,o,a){this.runOp({type:4,fi:e,id:o,data:a})}move(e,o){this.runOp({type:6,fi:e,id:o})}insertAfter(e,o){let a=this._current.insertAfterHelper(e,o.length);for(let c=0;c<o.length;c++){let d=o[c];this.add(a[c],d.id,d.data)}}insertBefore(e,o){let a=this._current.insertBeforeHelper(e,o.length);for(let c=0;c<o.length;c++){let d=o[c];this.add(a[c],d.id,d.data)}}moveAfter(e,o){let a=this._current.insertAfterHelper(e,o.length);for(let c=0;c<o.length;c++){let d=o[c];this.move(a[c],d)}}moveBefore(e,o){let a=this._current.insertBeforeHelper(e,o.length);for(let c=0;c<o.length;c++){let d=o[c];this.move(a[c],d)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function t1(e,o,a){if(e.length>0){let c=e[e.length-1];if(c.type===0&&o.type===0&&Nr$1.equal(c.path,a)){Object.assign(c.props,o.props);return}}e.push({...o,path:a})}var Dv=class extends Bc{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,o){if(e!=="")throw new Error("");this._current=o}push(e,o,a,c){t1(this.ts,o,e),t1(this.actual,a,e),t1(this.reverse,c,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Iv(e,o,a){return a instanceof yr$1?new Xh(e,o,a):a instanceof Ue?new Qh(e,o,a):a instanceof it?new Proxy(new i1(e,o,a),mq):a!==null&&typeof a=="object"?Hh(a)?a:new Proxy(new r1(e,o,a),pq):a}function n1(e){let o=new Dv(e);return[Iv(o,"",e),o]}function Tl(e,o){let[a,c]=n1(e);return o(a),c.result()}function kr$1(e){return e instanceof Xh||e instanceof Qh?e._current:e!==null&&typeof e=="object"?e[iD]:e}var Nr$1;(e=>{function o(g,b){if(b.length===g.length)for(var j=0;j<g.length;){if(g[j]!==b[j])return!1;j+=1}else return!1;return!0}e.equal=o;function a(g,b,j){let $=d(j,g);if($!==void 0&&typeof $=="object"&&$!==null){let _e={...b};return Object.keys($).forEach(st=>{delete _e[st]}),_e}else return b}e.removeOverridden=a;function c(g,b){if((g instanceof yr$1||g instanceof Xh)&&typeof b=="string"||(g instanceof Ue||g instanceof Qh)&&typeof b=="string")return g.data(b);if(typeof b=="number"&&Array.isArray(g)||typeof b=="string"&&typeof g=="object"&&g!==null)return g[b]}e.zoomOnce=c;function d(g,b,j=0){for(;j<b.length&&g!==void 0;)g=c(g,b[j]),j+=1;return g}e.zoom=d})(Nr$1||(Nr$1={}));function sD(e,o){let a=[];if(o.length===e.length)for(var c=0;c<e.length;){if(o[c]==="*")a.push(e[c]);else if(e[c]!==o[c])return null;c+=1}else return null;return a}function Rt(e,o){let a=[];if(o.length<=e.length)for(var c=0;c<o.length;){if(o[c]==="*")a.push(e[c]);else if(e[c]!==o[c])return null;c+=1}else return null;return a}var Rv=class{},tm=class extends Rv{constructor(e){super(),this.id=e}},rm=class extends Rv{constructor(e){super(),this.data=e}},o1;try{o1=new TextDecoder}catch{}var qe,Cl,se=0,kn={},Zt,Ml,ws=0,Po=0,ls,Ta,En=[],ar,oD={useRecords:!1,mapsAsObjects:!0},im=class{},u1=new im;u1.name="MessagePack 0xC1";var Kh=!1,Do=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,o){if(qe)return vD(()=>(Bv(),this?this.unpack(e,o):Do.prototype.unpack.call(oD,e,o)));Cl=o>-1?o:e.length,se=0,Po=0,Ml=null,ls=null,qe=e;try{ar=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(a){throw qe=null,e instanceof Uint8Array?a:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Do){if(kn=this,this.structures)return Zt=this.structures,Lv();(!Zt||Zt.length>0)&&(Zt=[])}else kn=oD,(!Zt||Zt.length>0)&&(Zt=[]);return Lv()}unpackMultiple(e,o){let a,c=0;try{Kh=!0;let d=e.length,g=this?this.unpack(e,d):kv.unpack(e,d);if(o){for(o(g);se<d;)if(c=se,o(Lv())===!1)return}else{for(a=[g];se<d;)c=se,a.push(Lv());return a}}catch(d){throw d.lastPosition=c,d.values=a,d}finally{Kh=!1,Bv()}}_mergeStructures(e,o){e=e||[];for(let a=0,c=e.length;a<c;a++){let d=e[a];d&&(d.isShared=!0,a>=32&&(d.highByte=a-32>>5))}e.sharedLength=e.length;for(let a in o||[])if(a>=0){let c=e[a],d=o[a];d&&(c&&((e.restoreStructures||(e.restoreStructures=[]))[a]=c),e[a]=d)}return this.structures=e}decode(e,o){return this.unpack(e,o)}};function Lv(){try{if(!kn.trusted&&!Kh){let o=Zt.sharedLength||0;o<Zt.length&&(Zt.length=o)}let e=Zr();if(se==Cl)Zt.restoreStructures&&aD(),Zt=null,qe=null,Ta&&(Ta=null);else if(se>Cl){let o=new Error("Unexpected end of MessagePack data");throw o.incomplete=!0,o}else if(!Kh)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Zt.restoreStructures&&aD(),Bv(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function aD(){for(let e in Zt.restoreStructures)Zt[e]=Zt.restoreStructures[e];Zt.restoreStructures=null}function Zr(){let e=qe[se++];if(e<160)if(e<128){if(e<64)return e;{let o=Zt[e&63]||kn.getStructures&&pD()[e&63];return o?(o.read||(o.read=h1(o,e&63)),o.read()):e}}else if(e<144)if(e-=128,kn.mapsAsObjects){let o={};for(let a=0;a<e;a++)o[gD()]=Zr();return o}else{let o=new Map;for(let a=0;a<e;a++)o.set(Zr(),Zr());return o}else{e-=144;let o=new Array(e);for(let a=0;a<e;a++)o[a]=Zr();return o}else if(e<192){let o=e-160;if(Po>=se)return Ml.slice(se-ws,(se+=o)-ws);if(Po==0&&Cl<140){let a=o<16?d1(o):mD(o);if(a!=null)return a}return c1(o)}else{let o;switch(e){case 192:return null;case 193:return ls?(o=Zr(),o>0?ls[1].slice(ls.position1,ls.position1+=o):ls[0].slice(ls.position0,ls.position0-=o)):u1;case 194:return!1;case 195:return!0;case 196:return s1(qe[se++]);case 197:return o=ar.getUint16(se),se+=2,s1(o);case 198:return o=ar.getUint32(se),se+=4,s1(o);case 199:return Nc(qe[se++]);case 200:return o=ar.getUint16(se),se+=2,Nc(o);case 201:return o=ar.getUint32(se),se+=4,Nc(o);case 202:if(o=ar.getFloat32(se),kn.useFloat32>2){let a=Fv[(qe[se]&127)<<1|qe[se+1]>>7];return se+=4,(a*o+(o>0?.5:-.5)>>0)/a}return se+=4,o;case 203:return o=ar.getFloat64(se),se+=8,o;case 204:return qe[se++];case 205:return o=ar.getUint16(se),se+=2,o;case 206:return o=ar.getUint32(se),se+=4,o;case 207:return kn.int64AsNumber?(o=ar.getUint32(se)*4294967296,o+=ar.getUint32(se+4)):o=ar.getBigUint64(se),se+=8,o;case 208:return ar.getInt8(se++);case 209:return o=ar.getInt16(se),se+=2,o;case 210:return o=ar.getInt32(se),se+=4,o;case 211:return kn.int64AsNumber?(o=ar.getInt32(se)*4294967296,o+=ar.getUint32(se+4)):o=ar.getBigInt64(se),se+=8,o;case 212:if(o=qe[se++],o==114)return dD(qe[se++]&63);{let a=En[o];if(a)return a.read?(se++,a.read(Zr())):a.noBuffer?(se++,a()):a(qe.subarray(se,++se));throw new Error("Unknown extension "+o)}case 213:return o=qe[se],o==114?(se++,dD(qe[se++]&63,qe[se++])):Nc(2);case 214:return Nc(4);case 215:return Nc(8);case 216:return Nc(16);case 217:return o=qe[se++],Po>=se?Ml.slice(se-ws,(se+=o)-ws):yq(o);case 218:return o=ar.getUint16(se),se+=2,Po>=se?Ml.slice(se-ws,(se+=o)-ws):vq(o);case 219:return o=ar.getUint32(se),se+=4,Po>=se?Ml.slice(se-ws,(se+=o)-ws):xq(o);case 220:return o=ar.getUint16(se),se+=2,cD(o);case 221:return o=ar.getUint32(se),se+=4,cD(o);case 222:return o=ar.getUint16(se),se+=2,uD(o);case 223:return o=ar.getUint32(se),se+=4,uD(o);default:if(e>=224)return e-256;if(e===void 0){let a=new Error("Unexpected end of MessagePack data");throw a.incomplete=!0,a}throw new Error("Unknown MessagePack token "+e)}}}var gq=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function h1(e,o){function a(){if(a.count++>2){let d=e.read=new Function("r","return function(){return {"+e.map(g=>gq.test(g)?g+":r()":"["+JSON.stringify(g)+"]:r()").join(",")+"}}")(Zr);return e.highByte===0&&(e.read=lD(o,e.read)),d()}let c={};for(let d=0,g=e.length;d<g;d++){let b=e[d];c[b]=Zr()}return c}return a.count=0,e.highByte===0?lD(o,a):a}var lD=(e,o)=>function(){let a=qe[se++];if(a===0)return o();let c=e<32?-(e+(a<<5)):e+(a<<5),d=Zt[c]||pD()[c];if(!d)throw new Error("Record id is not defined for "+c);return d.read||(d.read=h1(d,e)),d.read()};function pD(){let e=vD(()=>(qe=null,kn.getStructures()));return Zt=kn._mergeStructures(e,Zt)}var c1=Nv,yq=Nv,vq=Nv,xq=Nv;function Nv(e){let o;if(e<16&&(o=d1(e)))return o;if(e>64&&o1)return o1.decode(qe.subarray(se,se+=e));let a=se+e,c=[];for(o="";se<a;){let d=qe[se++];if(!(d&128))c.push(d);else if((d&224)===192){let g=qe[se++]&63;c.push((d&31)<<6|g)}else if((d&240)===224){let g=qe[se++]&63,b=qe[se++]&63;c.push((d&31)<<12|g<<6|b)}else if((d&248)===240){let g=qe[se++]&63,b=qe[se++]&63,j=qe[se++]&63,$=(d&7)<<18|g<<12|b<<6|j;$>65535&&($-=65536,c.push($>>>10&1023|55296),$=56320|$&1023),c.push($)}else c.push(d);c.length>=4096&&(o+=qi.apply(String,c),c.length=0)}return c.length>0&&(o+=qi.apply(String,c)),o}function cD(e){let o=new Array(e);for(let a=0;a<e;a++)o[a]=Zr();return o}function uD(e){if(kn.mapsAsObjects){let o={};for(let a=0;a<e;a++)o[gD()]=Zr();return o}else{let o=new Map;for(let a=0;a<e;a++)o.set(Zr(),Zr());return o}}var qi=String.fromCharCode;function mD(e){let o=se,a=new Array(e);for(let c=0;c<e;c++){let d=qe[se++];if((d&128)>0){se=o;return}a[c]=d}return qi.apply(String,a)}function d1(e){if(e<4)if(e<2){if(e===0)return"";{let o=qe[se++];if((o&128)>1){se-=1;return}return qi(o)}}else{let o=qe[se++],a=qe[se++];if((o&128)>0||(a&128)>0){se-=2;return}if(e<3)return qi(o,a);let c=qe[se++];if((c&128)>0){se-=3;return}return qi(o,a,c)}else{let o=qe[se++],a=qe[se++],c=qe[se++],d=qe[se++];if((o&128)>0||(a&128)>0||(c&128)>0||(d&128)>0){se-=4;return}if(e<6){if(e===4)return qi(o,a,c,d);{let g=qe[se++];if((g&128)>0){se-=5;return}return qi(o,a,c,d,g)}}else if(e<8){let g=qe[se++],b=qe[se++];if((g&128)>0||(b&128)>0){se-=6;return}if(e<7)return qi(o,a,c,d,g,b);let j=qe[se++];if((j&128)>0){se-=7;return}return qi(o,a,c,d,g,b,j)}else{let g=qe[se++],b=qe[se++],j=qe[se++],$=qe[se++];if((g&128)>0||(b&128)>0||(j&128)>0||($&128)>0){se-=8;return}if(e<10){if(e===8)return qi(o,a,c,d,g,b,j,$);{let _e=qe[se++];if((_e&128)>0){se-=9;return}return qi(o,a,c,d,g,b,j,$,_e)}}else if(e<12){let _e=qe[se++],st=qe[se++];if((_e&128)>0||(st&128)>0){se-=10;return}if(e<11)return qi(o,a,c,d,g,b,j,$,_e,st);let rt=qe[se++];if((rt&128)>0){se-=11;return}return qi(o,a,c,d,g,b,j,$,_e,st,rt)}else{let _e=qe[se++],st=qe[se++],rt=qe[se++],ut=qe[se++];if((_e&128)>0||(st&128)>0||(rt&128)>0||(ut&128)>0){se-=12;return}if(e<14){if(e===12)return qi(o,a,c,d,g,b,j,$,_e,st,rt,ut);{let gt=qe[se++];if((gt&128)>0){se-=13;return}return qi(o,a,c,d,g,b,j,$,_e,st,rt,ut,gt)}}else{let gt=qe[se++],yt=qe[se++];if((gt&128)>0||(yt&128)>0){se-=14;return}if(e<15)return qi(o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt);let wt=qe[se++];if((wt&128)>0){se-=15;return}return qi(o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt)}}}}}function s1(e){return kn.copyBuffers?Uint8Array.prototype.slice.call(qe,se,se+=e):qe.subarray(se,se+=e)}function Nc(e){let o=qe[se++];if(En[o])return En[o](qe.subarray(se,se+=e));throw new Error("Unknown extension type "+o)}var hD=new Array(4096);function gD(){let e=qe[se++];if(e>=160&&e<192){if(e=e-160,Po>=se)return Ml.slice(se-ws,(se+=e)-ws);if(!(Po==0&&Cl<180))return c1(e)}else return se--,Zr();let o=(e<<5^(e>1?ar.getUint16(se):e>0?qe[se]:0))&4095,a=hD[o],c=se,d=se+e-3,g,b=0;if(a&&a.bytes==e){for(;c<d;){if(g=ar.getUint32(c),g!=a[b++]){c=1879048192;break}c+=4}for(d+=3;c<d;)if(g=qe[c++],g!=a[b++]){c=1879048192;break}if(c===d)return se=c,a.string;d-=3,c=se}for(a=[],hD[o]=a,a.bytes=e;c<d;)g=ar.getUint32(c),a.push(g),c+=4;for(d+=3;c<d;)g=qe[c++],a.push(g);let j=e<16?d1(e):mD(e);return j!=null?a.string=j:a.string=c1(e)}var dD=(e,o)=>{var a=Zr();let c=e;o!==void 0&&(e=e<32?-((o<<5)+e):(o<<5)+e,a.highByte=o);let d=Zt[e];return d&&d.isShared&&((Zt.restoreStructures||(Zt.restoreStructures=[]))[e]=d),Zt[e]=a,a.read=h1(a,c),a.read()},yD=typeof self=="object"?self:global;En[0]=()=>{};En[0].noBuffer=!0;En[101]=()=>{let e=Zr();return(yD[e[0]]||Error)(e[1])};En[105]=e=>{let o=ar.getUint32(se-4);Ta||(Ta=new Map);let a=qe[se],c;a>=144&&a<160||a==220||a==221?c=[]:c={};let d={target:c};Ta.set(o,d);let g=Zr();return d.used?Object.assign(c,g):(d.target=g,g)};En[112]=e=>{let o=ar.getUint32(se-4),a=Ta.get(o);return a.used=!0,a.target};En[115]=()=>new Set(Zr());var f1=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");En[116]=e=>{let o=e[0],a=f1[o];if(!a)throw new Error("Could not find typed array for code "+o);return new yD[a](Uint8Array.prototype.slice.call(e,1).buffer)};En[120]=()=>{let e=Zr();return new RegExp(e[0],e[1])};En[98]=e=>{let o=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],a=se;se+=o-4,ls=[Zr(),Zr()],ls.position0=0,ls.position1=0;let c=se;se=a;try{return Zr()}finally{se=c}};En[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function vD(e){let o=Cl,a=se,c=ws,d=Po,g=Ml,b=Ta,j=ls,$=new Uint8Array(qe.slice(0,Cl)),_e=Zt,st=Zt.slice(0,Zt.length),rt=kn,ut=Kh,gt=e();return Cl=o,se=a,ws=c,Po=d,Ml=g,Ta=b,ls=j,qe=$,Kh=ut,Zt=_e,Zt.splice(0,Zt.length,...st),kn=rt,ar=new DataView(qe.buffer,qe.byteOffset,qe.byteLength),gt}function Bv(){qe=null,Ta=null,Zt=null}function xD(e){e.unpack?En[e.type]=e.unpack:En[e.type]=e}var Fv=new Array(147);for(let e=0;e<256;e++)Fv[e]=+("1e"+Math.floor(45.15-e*.30103));var kv=new Do({useRecords:!1});kv.unpack;kv.unpackMultiple;kv.unpack;var Aq=new Float32Array(1);new Uint8Array(Aq.buffer,0,4);var zv;try{zv=new TextEncoder}catch{}var Uv,m1,Gv=typeof Buffer<"u",p1=Gv?Buffer.allocUnsafeSlow:Uint8Array,AD=Gv?Buffer:Uint8Array,bD=Gv?4294967296:2144337920,Se,ni,ue$1=0,Oo,Io=null,_q=/[\u0080-\uFFFF]/,nm$2=Symbol("record-id"),Fc=class extends Do{constructor(e){super(e),this.offset=0;let o,a,c,d,g,b=0,j=AD.prototype.utf8Write?function(Lt,Ft,Nt){return Se.utf8Write(Lt,Ft,Nt)}:zv&&zv.encodeInto?function(Lt,Ft){return zv.encodeInto(Lt,Se.subarray(Ft)).written}:!1,$=this;e||(e={});let _e=e&&e.sequential,st=e.structures||e.saveStructures,rt=e.maxSharedStructures;if(rt==null&&(rt=st?32:0),rt>8160)throw new Error("Maximum maxSharedStructure is 8160");let ut=e.maxOwnStructures;ut==null&&(ut=st?32:64),_e&&!e.saveStructures&&(this.structures=[]);let gt=rt>32||ut+rt>64,yt=rt+64,wt=rt+ut+64;if(wt>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let Ct=[],Pt=0,At=0;this.pack=this.encode=function(Lt,Ft){if(Se||(Se=new p1(8192),ni=new DataView(Se.buffer,0,8192),ue$1=0),Oo=Se.length-10,Oo-ue$1<2048?(Se=new p1(Se.length),ni=new DataView(Se.buffer,0,Se.length),Oo=Se.length-10,ue$1=0):ue$1=ue$1+7&2147483640,o=ue$1,g=$.structuredClone?new Map:null,$.bundleStrings?(Io=["",""],Se[ue$1++]=214,Se[ue$1++]=98,Io.position=ue$1-o,ue$1+=4):Io=null,a=$.structures,a){a.uninitialized&&(a=$._mergeStructures($.getStructures()));let Nt=a.sharedLength||0;if(Nt>rt)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+a.sharedLength);if(!a.transitions){a.transitions=Object.create(null);for(let Ht=0;Ht<Nt;Ht++){let dr=a[Ht];if(!dr)continue;let hs,us=a.transitions;for(let hn=0,un=dr.length;hn<un;hn++){let bo=dr[hn];hs=us[bo],hs||(hs=us[bo]=Object.create(null)),us=hs}us[nm$2]=Ht+64}b=Nt}_e||(a.nextId=Nt+64)}c&&(c=!1),d=a||[];try{if(Tt(Lt),Io){ni.setUint32(Io.position+o,ue$1-Io.position-o);let Nt=Io;Io=null,Tt(Nt[0]),Tt(Nt[1])}if($.offset=ue$1,g&&g.idsToInsert){ue$1+=g.idsToInsert.length*6,ue$1>Oo&&It(ue$1),$.offset=ue$1;let Nt=Tq(Se.subarray(o,ue$1),g.idsToInsert);return g=null,Nt}return Ft&ED?(Se.start=o,Se.end=ue$1,Se):Se.subarray(o,ue$1)}finally{if(a){if(At<10&&At++,Pt>1e4)a.transitions=null,At=0,Pt=0,Ct.length>0&&(Ct=[]);else if(Ct.length>0&&!_e){for(let Nt=0,Ht=Ct.length;Nt<Ht;Nt++)Ct[Nt][nm$2]=0;Ct=[]}if(c&&$.saveStructures){let Nt=a.sharedLength||rt;a.length>Nt&&(a=a.slice(0,Nt));let Ht=Se.subarray(o,ue$1);return $.saveStructures(a,b)===!1?($._mergeStructures($.getStructures()),$.pack(Lt)):(b=Nt,Ht)}}Ft&Rq&&(ue$1=o)}};let Tt=Lt=>{ue$1>Oo&&(Se=It(ue$1));var Ft=typeof Lt,Nt;if(Ft==="string"){let Ht=Lt.length;if(Io&&Ht>=8&&Ht<4096){let us=_q.test(Lt);Io[us?0:1]+=Lt,Se[ue$1++]=193,Tt(us?-Ht:Ht);return}let dr;Ht<32?dr=1:Ht<256?dr=2:Ht<65536?dr=3:dr=5;let hs=Ht*3;if(ue$1+hs>Oo&&(Se=It(ue$1+hs)),Ht<64||!j){let us,hn,un,bo=ue$1+dr;for(us=0;us<Ht;us++)hn=Lt.charCodeAt(us),hn<128?Se[bo++]=hn:hn<2048?(Se[bo++]=hn>>6|192,Se[bo++]=hn&63|128):(hn&64512)===55296&&((un=Lt.charCodeAt(us+1))&64512)===56320?(hn=65536+((hn&1023)<<10)+(un&1023),us++,Se[bo++]=hn>>18|240,Se[bo++]=hn>>12&63|128,Se[bo++]=hn>>6&63|128,Se[bo++]=hn&63|128):(Se[bo++]=hn>>12|224,Se[bo++]=hn>>6&63|128,Se[bo++]=hn&63|128);Nt=bo-ue$1-dr}else Nt=j(Lt,ue$1+dr,hs);Nt<32?Se[ue$1++]=160|Nt:Nt<256?(dr<2&&Se.copyWithin(ue$1+2,ue$1+1,ue$1+1+Nt),Se[ue$1++]=217,Se[ue$1++]=Nt):Nt<65536?(dr<3&&Se.copyWithin(ue$1+3,ue$1+2,ue$1+2+Nt),Se[ue$1++]=218,Se[ue$1++]=Nt>>8,Se[ue$1++]=Nt&255):(dr<5&&Se.copyWithin(ue$1+5,ue$1+3,ue$1+3+Nt),Se[ue$1++]=219,ni.setUint32(ue$1,Nt),ue$1+=4),ue$1+=Nt}else if(Ft==="number")if(Lt>>>0===Lt)Lt<64?Se[ue$1++]=Lt:Lt<256?(Se[ue$1++]=204,Se[ue$1++]=Lt):Lt<65536?(Se[ue$1++]=205,Se[ue$1++]=Lt>>8,Se[ue$1++]=Lt&255):(Se[ue$1++]=206,ni.setUint32(ue$1,Lt),ue$1+=4);else if(Lt>>0===Lt)Lt>=-32?Se[ue$1++]=256+Lt:Lt>=-128?(Se[ue$1++]=208,Se[ue$1++]=Lt+256):Lt>=-32768?(Se[ue$1++]=209,ni.setInt16(ue$1,Lt),ue$1+=2):(Se[ue$1++]=210,ni.setInt32(ue$1,Lt),ue$1+=4);else{let Ht;if((Ht=this.useFloat32)>0&&Lt<4294967296&&Lt>=-2147483648){Se[ue$1++]=202,ni.setFloat32(ue$1,Lt);let dr;if(Ht<4||(dr=Lt*Fv[(Se[ue$1]&127)<<1|Se[ue$1+1]>>7])>>0===dr){ue$1+=4;return}else ue$1--}Se[ue$1++]=203,ni.setFloat64(ue$1,Lt),ue$1+=8}else if(Ft==="object")if(!Lt)Se[ue$1++]=192;else{if(g){let dr=g.get(Lt);if(dr){if(!dr.id){let hs=g.idsToInsert||(g.idsToInsert=[]);dr.id=hs.push(dr)}Se[ue$1++]=214,Se[ue$1++]=112,ni.setUint32(ue$1,dr.id),ue$1+=4;return}else g.set(Lt,{offset:ue$1-o})}let Ht=Lt.constructor;if(Ht===Object)kt(Lt,!0);else if(Ht===Array){Nt=Lt.length,Nt<16?Se[ue$1++]=144|Nt:Nt<65536?(Se[ue$1++]=220,Se[ue$1++]=Nt>>8,Se[ue$1++]=Nt&255):(Se[ue$1++]=221,ni.setUint32(ue$1,Nt),ue$1+=4);for(let dr=0;dr<Nt;dr++)Tt(Lt[dr])}else if(Ht===Map){Nt=Lt.size,Nt<16?Se[ue$1++]=128|Nt:Nt<65536?(Se[ue$1++]=222,Se[ue$1++]=Nt>>8,Se[ue$1++]=Nt&255):(Se[ue$1++]=223,ni.setUint32(ue$1,Nt),ue$1+=4);for(let[dr,hs]of Lt)Tt(dr),Tt(hs)}else{for(let dr=0,hs=Uv.length;dr<hs;dr++){let us=m1[dr];if(Lt instanceof us){let hn=Uv[dr];if(hn.write){hn.type&&(Se[ue$1++]=212,Se[ue$1++]=hn.type,Se[ue$1++]=0),Tt(hn.write.call(this,Lt));return}let un=Se,bo=ni,_s=ue$1;Se=null;let gn;try{gn=hn.pack.call(this,Lt,Gr=>(Se=un,un=null,ue$1+=Gr,ue$1>Oo&&It(ue$1),{target:Se,targetView:ni,position:ue$1-Gr}),Tt)}finally{un&&(Se=un,ni=bo,ue$1=_s,Oo=Se.length-10)}gn&&(gn.length+ue$1>Oo&&It(gn.length+ue$1),ue$1=Eq(gn,Se,ue$1,hn.type));return}}kt(Lt,!Lt.hasOwnProperty)}}else if(Ft==="boolean")Se[ue$1++]=Lt?195:194;else if(Ft==="bigint"){if(Lt<BigInt(1)<<BigInt(63)&&Lt>=-(BigInt(1)<<BigInt(63)))Se[ue$1++]=211,ni.setBigInt64(ue$1,Lt);else if(Lt<BigInt(1)<<BigInt(64)&&Lt>0)Se[ue$1++]=207,ni.setBigUint64(ue$1,Lt);else if(this.largeBigIntToFloat)Se[ue$1++]=203,ni.setFloat64(ue$1,Number(Lt));else throw new RangeError(Lt+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ue$1+=8}else if(Ft==="undefined")this.encodeUndefinedAsNil?Se[ue$1++]=192:(Se[ue$1++]=212,Se[ue$1++]=0,Se[ue$1++]=0);else if(Ft==="function")Tt(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+Ft)},kt=this.useRecords===!1?this.variableMapSize?Lt=>{let Ft=Object.keys(Lt),Nt=Ft.length;Nt<16?Se[ue$1++]=128|Nt:Nt<65536?(Se[ue$1++]=222,Se[ue$1++]=Nt>>8,Se[ue$1++]=Nt&255):(Se[ue$1++]=223,ni.setUint32(ue$1,Nt),ue$1+=4);let Ht;for(let dr=0;dr<Nt;dr++)Tt(Ht=Ft[dr]),Tt(Lt[Ht])}:(Lt,Ft)=>{Se[ue$1++]=222;let Nt=ue$1-o;ue$1+=2;let Ht=0;for(let dr in Lt)(Ft||Lt.hasOwnProperty(dr))&&(Tt(dr),Tt(Lt[dr]),Ht++);Se[Nt+++o]=Ht>>8,Se[Nt+o]=Ht&255}:Lt=>{let Ft=Object.keys(Lt),Nt,Ht=d.transitions||(d.transitions=Object.create(null)),dr=0;for(let us=0,hn=Ft.length;us<hn;us++){let un=Ft[us];Nt=Ht[un],Nt||(Nt=Ht[un]=Object.create(null),dr++),Ht=Nt}let hs=Ht[nm$2];if(hs)hs>=96&&gt?(Se[ue$1++]=((hs-=96)&31)+96,Se[ue$1++]=hs>>5):Se[ue$1++]=hs;else{hs=d.nextId,hs||(hs=64),hs<yt&&this.shouldShareStructure&&!this.shouldShareStructure(Ft)?(hs=d.nextOwnId,hs<wt||(hs=yt),d.nextOwnId=hs+1):(hs>=wt&&(hs=yt),d.nextId=hs+1);let us=Ft.highByte=hs>=96&&gt?hs-96>>5:-1;Ht[nm$2]=hs,d[hs-64]=Ft,hs<yt?(Ft.isShared=!0,d.sharedLength=hs-63,c=!0,us>=0?(Se[ue$1++]=(hs&31)+96,Se[ue$1++]=us):Se[ue$1++]=hs):(us>=0?(Se[ue$1++]=213,Se[ue$1++]=114,Se[ue$1++]=(hs&31)+96,Se[ue$1++]=us):(Se[ue$1++]=212,Se[ue$1++]=114,Se[ue$1++]=hs),dr&&(Pt+=At*dr),Ct.length>=ut&&(Ct.shift()[nm$2]=0),Ct.push(Ht),Tt(Ft))}for(let us=0,hn=Ft.length;us<hn;us++)Tt(Lt[Ft[us]])},It=Lt=>{let Ft;if(Lt>16777216){if(Lt-o>bD)throw new Error("Packed buffer would be larger than maximum buffer size");Ft=Math.min(bD,Math.round(Math.max((Lt-o)*(Lt>67108864?1.25:2),4194304)/4096)*4096)}else Ft=(Math.max(Lt-o<<2,Se.length-1)>>12)+1<<12;let Nt=new p1(Ft);return ni=new DataView(Nt.buffer,0,Ft),Se.copy?Se.copy(Nt,0,o,Lt):Nt.set(Se.slice(o,Lt)),ue$1-=o,o=0,Oo=Nt.length-10,Se=Nt}}useBuffer(e){Se=e,ni=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),ue$1=0}};m1=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,im];Uv=[{pack(e,o,a){let c=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&c>=0&&c<4294967296){let{target:d,targetView:g,position:b}=o(6);d[b++]=214,d[b++]=255,g.setUint32(b,c)}else if(c>0&&c<17179869184){let{target:d,targetView:g,position:b}=o(10);d[b++]=215,d[b++]=255,g.setUint32(b,e.getMilliseconds()*4e6+(c/1e3/4294967296>>0)),g.setUint32(b+4,c)}else if(isNaN(c)){if(this.onInvalidDate)return o(0),a(this.onInvalidDate());let{target:d,targetView:g,position:b}=o(3);d[b++]=212,d[b++]=255,d[b++]=255}else{let{target:d,targetView:g,position:b}=o(15);d[b++]=199,d[b++]=12,d[b++]=255,g.setUint32(b,e.getMilliseconds()*1e6),g.setBigInt64(b+4,BigInt(Math.floor(c)))}}},{pack(e,o,a){let c=Array.from(e),{target:d,position:g}=o(this.structuredClone?3:0);this.structuredClone&&(d[g++]=212,d[g++]=115,d[g++]=0),a(c)}},{pack(e,o,a){let{target:c,position:d}=o(this.structuredClone?3:0);this.structuredClone&&(c[d++]=212,c[d++]=101,c[d++]=0),a([e.name,e.message])}},{pack(e,o,a){let{target:c,position:d}=o(this.structuredClone?3:0);this.structuredClone&&(c[d++]=212,c[d++]=120,c[d++]=0),a([e.source,e.flags])}},{pack(e,o){this.structuredClone?SD(e,16,o):wD(Gv?Buffer.from(e):new Uint8Array(e),o)}},{pack(e,o){let a=e.constructor;a!==AD&&this.structuredClone?SD(e,f1.indexOf(a.name),o):wD(e,o)}},{pack(e,o){let{target:a,position:c}=o(1);a[c]=193}}];function SD(e,o,a,c){let d=e.byteLength;if(d+1<256){var{target:g,position:b}=a(4+d);g[b++]=199,g[b++]=d+1}else if(d+1<65536){var{target:g,position:b}=a(5+d);g[b++]=200,g[b++]=d+1>>8,g[b++]=d+1&255}else{var{target:g,position:b,targetView:j}=a(7+d);g[b++]=201,j.setUint32(b,d+1),b+=4}g[b++]=116,g[b++]=o,g.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),b)}function wD(e,o){let a=e.byteLength;var c,d;if(a<256){var{target:c,position:d}=o(a+2);c[d++]=196,c[d++]=a}else if(a<65536){var{target:c,position:d}=o(a+3);c[d++]=197,c[d++]=a>>8,c[d++]=a&255}else{var{target:c,position:d,targetView:g}=o(a+5);c[d++]=198,g.setUint32(d,a),d+=4}c.set(e,d)}function Eq(e,o,a,c){let d=e.length;switch(d){case 1:o[a++]=212;break;case 2:o[a++]=213;break;case 4:o[a++]=214;break;case 8:o[a++]=215;break;case 16:o[a++]=216;break;default:d<256?(o[a++]=199,o[a++]=d):d<65536?(o[a++]=200,o[a++]=d>>8,o[a++]=d&255):(o[a++]=201,o[a++]=d>>24,o[a++]=d>>16&255,o[a++]=d>>8&255,o[a++]=d&255)}return o[a++]=c,o.set(e,a),a+=d,a}function Tq(e,o){let a,c=o.length*6,d=e.length-c;for(o.sort((g,b)=>g.offset>b.offset?1:-1);a=o.pop();){let g=a.offset,b=a.id;e.copyWithin(g+c,g,d),c-=6;let j=g+c;e[j++]=214,e[j++]=105,e[j++]=b>>24,e[j++]=b>>16&255,e[j++]=b>>8&255,e[j++]=b&255,d=g}return e}function Pl(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");m1.unshift(e.Class),Uv.unshift(e)}xD(e)}var _D=new Fc({useRecords:!1});_D.pack;_D.pack;var ED=512,Rq=1024,TD=new Fc({structuredClone:!0});Pl({Class:it.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,it.prototype),e}});Pl({Class:Ue.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ue.prototype),e}});Pl({Class:yr$1.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,yr$1.prototype),e}});Pl({Class:tm.prototype.constructor,type:4,write(e){return e.id},read(e){return new tm(e)}});Pl({Class:rm.prototype.constructor,type:5,write(e){return e.data},read(e){return new rm(e)}});Pl({Class:vr.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,vr.prototype),e}});function Lq(e){var o=0;if(e.length===0)return o;for(let a=0;a<e.length;a++){let c=e[a];o=(o<<5)-o+c,o=o&o}return o}function g1(e){if(Hh(e))return e;if(Array.isArray(e))return e.map(g1);if(typeof e=="object"&&e!==null){let o={};for(let a of Object.keys(e).sort())o[a]=g1(e[a]);return Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o}else return e}var jv;(e=>{function o(d){return TD.pack(d)}e.serialize=o;function a(d){return TD.unpack(d)}e.deserialize=a;function c(d){return Lq(o(g1(d))).toString()}e.checksum=c})(jv||(jv={}));var MD;(e=>{function o(c){return c.type==="Conditional"?c.condition.type==="Distance"?"Distance":"StateChange":c.type}e.toEventUIType=o;function a(c){return c==="Distance"||c==="StateChange"?"Conditional":c}e.fromEventUIType=a})(MD||(MD={}));var Tn={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]},CD;(e=>{function o(c){return c.type==="MouseDown"||c.type==="MouseUp"||c.type==="MousePress"||c.type==="KeyDown"||c.type==="KeyUp"||c.type==="KeyPress"}e.is=o;function a(c){return c==="MouseDown"||c==="MouseUp"||c==="MousePress"?{type:c,mode:"Object",disabled:!1,runMode:"Once",actions:new Ue}:{type:c,disabled:!1,key:void 0,runMode:"Once",actions:new Ue}}e.defaultData=a})(CD||(CD={}));var Hv;(e=>{function o(a){return{type:"Property",value:[a??null,"position","x"]}}e.propertyDefaultData=o,e.valueDefaultData={type:"Literal",value:0}})(Hv||(Hv={}));var y1;(e=>{function o(d){return{type:"Comparison",operator:"==",lOperand:Hv.propertyDefaultData(d),rOperand:{...Hv.valueDefaultData}}}e.comparisonDefaultData=o;function a(d){return{type:"Distance",toObject:d??null,fromObject:d??null,distance:200}}e.distanceDefaultData=a;function c(d,g){return{type:"State",object:d??null,state:g??null}}e.stateDefaultData=c})(y1||(y1={}));var PD;(e=>{function o(c){return c.type==="Conditional"}e.is=o;function a(c){return{type:"Conditional",disabled:!1,inActions:new Ue,outActions:new Ue,condition:y1.distanceDefaultData(c)}}e.defaultData=a})(PD||(PD={}));var DD;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Ue,drop:new Ue}})(DD||(DD={}));var Wv;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Ue})(Wv||(Wv={}));var qv;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(qv||(qv={}));var OD;(e=>{function o(c){return c.type==="MouseHover"}e.is=o;function a(){return{type:"MouseHover",disabled:!1,actions:new Ue}}e.defaultData=a})(OD||(OD={}));var ID;(e=>{function o(c){return c.type==="Scroll"}e.is=o;function a(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Ue}}e.defaultData=a})(ID||(ID={}));var RD;(e=>{function o(c){return c.type==="Start"}e.is=o;function a(){return{type:"Start",disabled:!1,actions:new Ue}}e.defaultData=a})(RD||(RD={}));var LD;(e=>{function o(c){return c.type==="Collision"}e.is=o;function a(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new Ue}}e.defaultData=a})(LD||(LD={}));var BD;(e=>{function o(c){return c.type==="Trigger"}e.is=o;function a(c,d){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new Ue,triggerZone:"box",position:d.toArray(),rotation:[0,0,0],size:c.toArray(),radius:c.length()/2,helperVisible:!0}}e.defaultData=a})(BD||(BD={}));var Yv;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function o(b){return b.type==="Resize"}e.is=o;function a(b){return typeof b=="string"?b:"custom"}e.sizeToDevice=a;function c(b){return typeof b=="string"?[...e.defaultSizes[b]]:[...b]}e.deviceToSize=c;function d(){let b={size:"mobile",operator:"<",actions:new Ue},j={size:"tablet",operator:"<",actions:new Ue},$={size:[...e.defaultSizes.custom],operator:"<>",actions:new Ue},_e=new Ue;return _e.push({id:Me.generateUUID(),fi:0,data:b},{id:Me.generateUUID(),fi:1,data:j},{id:Me.generateUUID(),fi:2,data:$}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:_e}}e.defaultData=d;function g(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Ue}}e.defaultBreakpointData=g})(Yv||(Yv={}));var Xv;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function o(c){return c.type==="VariableChange"}e.is=o;function a(){return{disabled:!1,type:"VariableChange",actions:new Ue,variableId:"",objectId:null,property:"Position X"}}e.defaultData=a})(Xv||(Xv={}));var As="personal camera",Ol="a218fcc3-276b-49b9-b485-49037fd14f5f",kD=2960946,si=5526619,Ro;(e=>{function o(ut,gt){return ut[0]===gt[0]&&ut[1]===gt[1]}e.isEqual=o;function a(ut,gt,yt){return[ut[0]+(gt[0]-ut[0])*yt,ut[1]+(gt[1]-ut[1])*yt]}e.lerp=a;function c(ut,gt){return[ut[0]+gt[0],ut[1]+gt[1]]}e.add=c;function d(ut,gt){return[ut[0]-gt[0],ut[1]-gt[1]]}e.sub=d;function g(ut,gt){return Math.pow(gt[0]-ut[0],2)+Math.pow(gt[1]-ut[1],2)}e.distanceSquared=g;function b(ut,gt){return Math.sqrt(g(ut,gt))}e.distance=b;function j(ut,gt){return ut[0]*gt[0]+ut[1]*gt[1]}e.dot=j;function $(ut,gt){return[ut[0]*gt,ut[1]*gt]}e.scalarMultiply=$;function _e(ut,gt,yt){let wt=e.sub(gt,ut),Ct=e.sub(yt,ut),Pt=e.dot(wt,Ct)/e.dot(wt,wt),At=e.scalarMultiply(wt,Pt);return e.add(ut,At)}e.projectionOnto=_e;function st(ut,gt,yt){return b(ut,_e(ut,gt,yt))}e.projectionOntoDistance=st;function rt(ut,gt){return[(ut[0]+gt[0])*.5,(ut[1]+gt[1])*.5]}e.center=rt})(Ro||(Ro={}));var Lo;(e=>{function o($,_e){return $[0]===_e[0]&&$[1]===_e[1]&&$[2]===_e[2]}e.isEqual=o;function a($,_e){return[$[0]+_e[0],$[1]+_e[1],$[2]+_e[2]]}e.add=a;function c($,_e){return[$[0]-_e[0],$[1]-_e[1],$[2]-_e[2]]}e.sub=c;function d($,_e){return[$[0]/_e[0],$[1]/_e[1],$[2]/_e[2]]}e.div=d;function g($,_e){return[$[0]*_e[0],$[1]*_e[1],$[2]*_e[2]]}e.mul=g;function b($,_e){return Math.hypot($[0]-_e[0],$[1]-_e[1],$[2]-_e[2])}e.dist=b;function j($,_e,st){return[$[0]+(_e[0]-$[0])*st,$[1]+(_e[1]-$[1])*st,$[2]+(_e[2]-$[2])*st]}e.lerp=j})(Lo||(Lo={}));var sm;(e=>{function o(c,d){return c[0]===d[0]&&c[1]===d[1]&&c[2]===d[2]&&c[3]===d[3]}e.isEqual=o;function a(c,d,g){return[c[0]+(d[0]-c[0])*g,c[1]+(d[1]-c[1])*g,c[2]+(d[2]-c[2])*g,c[3]+(d[3]-c[3])*g]}e.lerp=a})(sm||(sm={}));var Dl;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(d,g){for(let b=0;b<16;b++)if(d[b]!==g[b])return!1;return!0}e.isEqual=o;function a(d){return d??e.identity}e.simplify=a;function c(d,g){let b=g.slice(0);for(var j=0,$=g.length;j<$;j+=3){let _e=d[3]*g[j]+d[7]*g[j+1]+d[11]*g[j+2]+d[15];b[j]=(d[0]*g[j]+d[4]*g[j+1]+d[8]*g[j+2]+d[12])/_e,b[j+1]=(d[1]*g[j]+d[5]*g[j+1]+d[9]*g[j+2]+d[13])/_e,b[j+2]=(d[2]*g[j]+d[6]*g[j+1]+d[10]*g[j+2]+d[14])/_e}return b}e.applyMatrix4=c})(Dl||(Dl={}));var Ri;(e=>{function o(_e){return typeof _e=="object"&&typeof _e.r=="number"&&typeof _e.g=="number"&&typeof _e.b=="number"}e.isRGB=o,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function a(_e){return{r:Math.round(_e.r*255),g:Math.round(_e.g*255),b:Math.round(_e.b*255),a:1}}e.toRgb255a1=a;function c(_e){return{r:_e.r,g:_e.g,b:_e.b}}e.clone=c;function d(_e){return _e=Math.floor(_e),{r:(_e>>16&255)/255,g:(_e>>8&255)/255,b:(_e&255)/255}}e.fromHex=d;function g(_e){return Math.round(_e.r*255)*65536+Math.round(_e.g*255)*256+Math.round(_e.b*255)}e.toHex=g;function b(_e,st){return _e.r===st.r&&_e.g===st.g&&_e.b===st.b}e.equals=b;function j(_e,st){return _e.r.toFixed(2)===st.r.toFixed(2)&&_e.g.toFixed(2)===st.g.toFixed(2)&&_e.b.toFixed(2)===st.b.toFixed(2)}e.equalsFixed=j;function $(_e,st,rt){return{r:_e.r+(st.r-_e.r)*rt,g:_e.g+(st.g-_e.g)*rt,b:_e.b+(st.b-_e.b)*rt}}e.lerp=$})(Ri||(Ri={}));var St;(e=>{e.white={...Ri.white,a:1},e.transparent={...Ri.white,a:0};function o($){return{r:$[0],g:$[1],b:$[2],a:$[3]}}e.from0to1=o;function a($,_e){return{...Ri.fromHex($),a:_e}}e.fromHexAndA=a;function c($){return{r:Math.round($.r*255),g:Math.round($.g*255),b:Math.round($.b*255),a:$.a}}e.toRgb255a1=c;function d($,_e){return Ri.equals($,_e)&&$.a===_e.a}e.equals=d;function g($,_e){return Ri.equalsFixed($,_e)&&$.a.toFixed(2)===_e.a.toFixed(2)}e.equalsFixed=g;function b($,_e,st){return{r:$.r+(_e.r-$.r)*st,g:$.g+(_e.g-$.g)*st,b:$.b+(_e.b-$.b)*st,a:$.a+(_e.a-$.a)*st}}e.lerp=b;function j({r:$,g:_e,b:st,a:rt}=e.white){return`rgba(${$*255}, ${_e*255}, ${st*255}, ${rt})`}e.toStyle=j})(St||(St={}));var Qv;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(Qv||(Qv={}));var ND;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(ND||(ND={}));var FD;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(FD||(FD={}));var Ma;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Ma||(Ma={}));function v1(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Ks;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function o(a){return e.all.includes(a)}e.is=o})(Ks||(Ks={}));var Il;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function o(a){return a.type==="PerspectiveCamera"?a.perspective.zoom:a.orthographic.zoom}e.getZoom=o})(Il||(Il={}));var Bo;(e=>{function o(c,d=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(c[0],c[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[c[0]+c[0]*d,0,0]},grid:{count:[2,2,2],size:c.map(g=>g*(1+d)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=o;function a(c,d){let g={...c};if(x1.forEach(b=>{Object.assign(g,{[b]:d[b]??c[b]})}),g.radial={...c.radial},d.radial){let b=c.radial,j=d.radial;b1$1.forEach($=>{Object.assign(g.radial,{[$]:j[$]??b[$]})})}if(g.linear={...c.linear},d.linear){let b=c.linear,j=d.linear;S1.forEach($=>{Object.assign(g.linear,{[$]:j[$]??b[$]})})}if(g.grid={...c.grid},d.grid){let b=c.grid,j=d.grid;w1.forEach($=>{Object.assign(g.grid,{[$]:j[$]??b[$]})})}if(g.toObject={...c.toObject},d.toObject){let b=c.toObject,j=d.toObject;A1.forEach($=>{Object.assign(g.toObject,{[$]:j[$]??b[$]})})}if(g.randomnessObject={...c.randomnessObject},d.randomnessObject){let b=c.randomnessObject,j=d.randomnessObject;_1.forEach($=>{Object.assign(g.randomnessObject,{[$]:j[$]??b[$]})})}return g}e.merge=a})(Bo||(Bo={}));var Kv;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let o=["radial","linear","grid","toObject","randomnessObject"];function a(c,d){let g=[];c.count!==void 0&&g.push({type:0,path:d,props:{count:c.count}});for(let b of o){let j=c[b];j&&Object.keys(j).length>0&&g.push({type:0,path:[...d,b],props:j})}return g}e.toOps=a})(Kv||(Kv={}));var x1=["count"],b1$1=["radius","start","end","position","scale","rotation"],S1=["position","scale","rotation"],w1=["count","size"],A1=["count","position","scale","rotation"],_1=["strength","scale","rotation","position","movement","seed","freqScale"],Zv;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function o(a){return e.all.includes(a)}e.is=o})(Zv||(Zv={}));var Jv;(e=>{function o(c){return a(c)}e.defaultData=o;function a(c){if(c==="PointLight")return{type:c,color:St.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(c==="SpotLight")return{type:c,color:St.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(c==="DirectionalLight")return{type:c,color:St.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(Jv||(Jv={}));var Zh;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeLoopDelayStart:"end",emitTimeDuration:1,...e.defaultCollisionData}))(Zh||(Zh={}));var Rl;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Rl||(Rl={}));var E1;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function o(a,c){return a.castShadow===c.castShadow&&a.receiveShadow===c.receiveShadow}e.equals=o})(E1||(E1={}));var T1;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function o(a,c){return a.flatShading===c.flatShading&&a.side===c.side&&a.wireframe===c.wireframe}e.equals=o})(T1||(T1={}));var $v;(e=>e.defaultData={...T1.defaultData,...E1.defaultData})($v||($v={}));var VD;(e=>{function o(a,c){var g,b;let d=[];if("material"in a){let j=typeof a.material=="string"?c.materials[a.material]??((g=c.lib.materials[a.material])==null?void 0:g.asset):a.material;j&&d.push(j)}else if("materials"in a)for(let j of a.materials){let $=typeof j=="string"?c.materials[j]??((b=c.lib.materials[j])==null?void 0:b.asset):j;$&&d.push($)}return d}e.getMaterialData=o})(VD||(VD={}));var Jh;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(Jh||(Jh={}));var zD;(e=>{function o(a){return a==="texture"||a==="video"||a==="color"||a==="depth"||a==="normal"||a==="gradient"||a==="noise"||a==="fresnel"||a==="rainbow"||a==="toon"||a==="outline"||a==="particle"||a==="transmission"||a==="matcap"||a==="displace"||a==="pattern"||a==="light"}e.is=o})(zD||(zD={}));function GD(e){return e.type!=="displace"}var UD;(e=>{function o(a){return a==="phong"||a==="toon"||a==="lambert"||a==="physical"}e.is=o})(UD||(UD={}));var e0=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],jD=["wrapping","image","video","name","minFilter"],Hr;(e=>{function o(g,b){let{texture:j,...$}=b;if(Object.assign(g,$),j){let _e=g.texture;_e&&Object.assign(_e,j)}}e.patch=o;function a(g,b){return g==="light"&&b?c(b):d(g)}e.defaultData=a;function c(g){let b={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(g){case"phong":return{...b,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...b,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...b,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...b,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function d(g){let b={alpha:1,mode:0,isMask:!1,visible:!0};switch(g){case"texture":return{...b,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],minFilter:1008},crop:!1};case"video":return{...b,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Jh.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],minFilter:1008},crop:!1};case"color":return{...b,type:"color",color:Ri.fromHex(si)};case"depth":return{...b,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...b,type:"normal",cnormal:[1,1,1]};case"gradient":return{...b,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...b,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Ri.fromHex(6710886),a:1},colorB:{...Ri.fromHex(6710886),a:1},colorC:{...Ri.fromHex(16777215),a:1},colorD:{...Ri.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...b,type:"fresnel",color:St.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...b,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...b,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:St.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...b,type:"outline",outlineColor:St.fromHexAndA(0,1),contourColor:St.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...b,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],minFilter:1008}};case"transmission":return{...b,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...b,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Ri.fromHex(0),a:1},colorB:{...Ri.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Hr||(Hr={}));var oi;(e=>{function o(st){return!st.layers.some(rt=>rt.data.type==="texture"&&rt.data.projection!==0||rt.data.type==="depth"&&!rt.data.isWorldSpace||rt.data.type==="noise"||rt.data.type==="displace")}e.isMergable=o;function a(st){let rt="";return st.layers.forEach(ut=>{Object.entries(ut.data).forEach(([gt,yt])=>{rt+=`${gt}${yt}`,Array.isArray(yt)?yt.forEach(wt=>rt+=`${wt}`):typeof yt=="object"?Object.values(yt).forEach(wt=>{typeof wt=="number"?rt+=`${wt.toFixed(4)}`:rt+=`${wt}`}):rt+=`${yt}`})}),rt}e.getHash=a;function c(){return{layers:new Ue}}e.defaultEmptyData=c;function d(st="layer1",rt="layer2"){return b("phong",st,rt)}e.defaultData=d;function g(st,rt){return{...st,name:rt}}e.withName=g;function b(st,rt="layer1",ut="layer2"){let gt=new Ue;return gt.push({fi:0,data:Hr.defaultData("light",st),id:rt}),gt.push({fi:1,data:Hr.defaultData("color"),id:ut}),{layers:gt}}e.defaultTwoLayerData=b;function j(st){let rt=Hr.defaultData("texture");st&&Object.assign(rt.texture,{image:st});let ut=new Ue;return ut.push({fi:0,data:rt,id:"layer1"}),ut.push({fi:1,data:{...Hr.defaultData("transmission"),alpha:1},id:"layer2"}),ut.push({fi:2,data:{...Hr.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:ut}}e.defaultUIObjectMaterial=j;function $(st,rt="phong",ut="layer1",gt="layer2"){let yt=Hr.defaultData("texture");Object.assign(yt.texture,{image:st});let wt=new Ue;return wt.push({fi:0,data:yt,id:ut}),wt.push({fi:1,data:Hr.defaultData("light",rt),id:gt}),{layers:wt}}e.defaultTwoLayerTextureData=$;function _e(st,rt="phong",ut="layer1",gt="layer2"){let yt=Hr.defaultData("video");Object.assign(yt.texture,{video:st});let wt=new Ue;return wt.push({fi:0,data:yt,id:ut}),wt.push({fi:1,data:Hr.defaultData("light",rt),id:gt}),{layers:wt}}e.defaultTwoLayerVideoTextureData=_e})(oi||(oi={}));var $h;(e=>{function o(){return{points:new Ue,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=o})($h||($h={}));var ed;(e=>{function o(){return{points:new Ue,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=o})(ed||(ed={}));var M1={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},t0;(e=>{function o(a,c){let d={...a};return C1.forEach(g=>{Object.assign(d,{[g]:c[g]??a[g]})}),d}e.merge=o})(t0||(t0={}));var r0={shape:M1,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},C1=["depth","offset","angle","twist","startScale","endScale"],om;(e=>{function o(c){return c==="PolygonGeometry"||c==="RectangleGeometry"||c==="StarGeometry"||c==="TriangleGeometry"||c==="EllipseGeometry"||c==="UIGeometry"}e.is2DParametricMesh=o;function a(c){return c==="PolygonGeometry"||c==="PolygonGeometry"||c==="RectangleGeometry"||c==="StarGeometry"||c==="TriangleGeometry"||c==="EllipseGeometry"||c==="PathGeometry"||c==="VectorGeometry"||c==="ConeGeometry"||c==="CubeGeometry"||c==="CylinderGeometry"||c==="DodecahedronGeometry"||c==="HelixGeometry"||c==="IcosahedronGeometry"||c==="LatheGeometry"||c==="PyramidGeometry"||c==="SphereGeometry"||c==="PlaneGeometry"||c==="BackdropGeometry"||c==="TorusGeometry"||c==="TorusKnotGeometry"||c==="BooleanGeometry"||c==="TextGeometry"}e.isParametricMesh=a})(om||(om={}));var i0;(e=>{function o(a,c){let d={...a};return Object.assign(d,c),d.type==="PathGeometry"&&"extrusion"in c&&c.extrusion&&(d.extrusion={...a.extrusion},Object.assign(d.extrusion,t0.merge(d.extrusion,c.extrusion))),d}e.merge=o})(i0||(i0={}));var Ll;(e=>{function o(a){if(a==="RectangleGeometry")return{width:320,height:320,type:a,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(a==="UIGeometry")return{type:a,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(a==="PathGeometry")return{type:a,width:1,height:1,depth:1,path:ed.defaultData(),extrusion:r0};if(a==="VectorGeometry")return{width:1,height:1,type:a,subdivisions:12,shape:$h.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(a==="BooleanGeometry")return{type:a,operation:2,width:0,height:0,depth:0,phongAngle:35};if(a==="TextGeometry")return{type:a,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(a==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=o})(Ll||(Ll={}));var P1=["width","height","depth"],n0;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Ri.white,near:.1,far:2e3})(n0||(n0={}));var td;(e=>{let o={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...o,blendFunction:16,granularity:15},bloom:{...o,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...o,offset:[2,2]},vignette:{...o,darkness:1,offset:0},hueSaturation:{...o,hue:3,saturation:0},brightnessContrast:{...o,brightness:.25,contrast:0},depthOfField:{...o,focalLength:2,focusDistance:2,bokehScale:2},noise:{...o,blendFunction:16}}})(td||(td={}));var D1;(e=>e.defaultData={softShadowQuality:"low"})(D1||(D1={}));var O1;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(O1||(O1={}));var I1;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(I1||(I1={}));var Bl;(e=>e.defaultData={usePhysics:!1,gravity:-10})(Bl||(Bl={}));var R1;(e=>e.defaultData={playCamera:As,gameControlObject:null})(R1||(R1={}));var s0;(e=>e.defaultData={backgroundColor:St.fromHexAndA(kD,1),postprocessing:td.defaultData,fog:n0.defaultData,globalPhysics:Bl.defaultData,ambient:O1.defaultData,ao:I1.defaultData,shadow:D1.defaultData,publish:R1.defaultData})(s0||(s0={}));var o0;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(o0||(o0={}));var HD;(e=>{function o(c){return c==="Component"||c==="Instance"}e.isComponentRelated=o;function a(c){return c==="Empty"||c==="Instance"}e.isEmptyOrComponent=a})(HD||(HD={}));var rd;(e=>{e.identity={...Qv.identity,hiddenMatrix:Dl.identity};function o(d){return{position:d.position,rotation:d.rotation,scale:d.scale,hiddenMatrix:d.hiddenMatrix}}e.fromObject=o;function a(d,g){return{position:(g==null?void 0:g.position)||d.position,rotation:(g==null?void 0:g.rotation)||d.rotation,scale:(g==null?void 0:g.scale)||d.scale,hiddenMatrix:(g==null?void 0:g.hiddenMatrix)||d.hiddenMatrix}}e.merge=a;function c(d,g){return vv({position:Lo.isEqual(d.position,g.position)?void 0:g.position,rotation:Lo.isEqual(d.rotation,g.rotation)?void 0:g.rotation,scale:Lo.isEqual(d.scale,g.scale)?null:g.scale,hiddenMatrix:Dl.isEqual(d.hiddenMatrix,g.hiddenMatrix)?void 0:g.hiddenMatrix})}e.diff=c})(rd||(rd={}));var Li;(e=>e.defaultData={states:new Ue,events:new Ue,visible:!0,raycastLock:!1,physics:Rl.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...rd.identity,cloner:null})(Li||(Li={}));var a0;(e=>e.defaultData={type:"Empty",...Li.defaultData})(a0||(a0={}));var WD;(e=>e.defaultData={type:"ParticleCollider",...o0.defaultData,...Li.defaultData})(WD||(WD={}));var qD;(e=>e.defaultData={type:"Component",...Li.defaultData})(qD||(qD={}));var YD;(e=>e.defaultData={type:"Particle",...Li.defaultData,...Zh.defaultData})(YD||(YD={}));var kc;(e=>e.defaultData={type:"Mesh",...Li.defaultData,...$v.defaultData})(kc||(kc={}));var Vc;(e=>e.defaultData={...Li.defaultData,...rd.identity,position:[0,0,Il.DefaultTargetOffset],...Il.defaultData})(Vc||(Vc={}));var l0;(e=>{function o(a){return{...Li.defaultData,...Jv.defaultData(a)}}e.defaultData=o,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(l0||(l0={}));var id$2;(e=>{function o(c,d,g=0){for(;g<d.length;){let b=c?c[d[g]]:void 0;if(d.length===g+1)return b;if(b)c=b.descendants,g+=1;else return}}e.resolveWithDes=o;function a(c,d,g=0){let b=o(c,d,g);if(b){let j=Object.keys(b);if(j.length===1&&j[0]==="descendants")return}return b}e.resolve=a})(id$2||(id$2={}));var No;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function o(c,d){return{...Li.defaultData,...d,component:c,overrides:new vr,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=o;function a(c){let d=rd.fromObject(c.data);return o(c.id,d)}e.fromComponentData=a})(No||(No={}));var Ca;(e=>{e.defaultData={type:"Page",...Li.defaultData,physics:{...Rl.defaultData,fusedBody:!1},...s0.defaultData,camera:Vc.defaultData};function o(a){return a.uiScene!==void 0}e.isUIPage=o})(Ca||(Ca={}));var c0;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Dl.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Rl.defaultData,states:new Ue,events:new Ue,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Il.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("RectangleGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("BooleanGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("TextGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")}))(c0||(c0={}));var Pa;(e=>{function o(g,b){let j={name:b};return g.type==="Mesh"?(j.geometry={},"material"in g&&(j.material={layers:new vr}),"materials"in g&&(j.materials=g.materials.map($=>({layers:new vr})))):Ks.is(g.type)&&(j.perspective={},j.orthographic={}),j}e.newEmpty=o;function a(g,b){if(b===void 0)return g;let j={...g};return"material"in j&&"material"in b&&b.material&&(j.material=Tl(j.material,$=>{if(typeof $!="string")for(let[_e,st]of Object.entries(b.material.layers)){let rt=$.layers.data(_e);rt&&Hr.patch(rt,st)}}).data),j.materials&&b.materials&&(j.materials=Tl(j.materials,$=>{var _e,st;for(let rt=0;rt<j.materials.length;rt++){let ut=b.materials[rt];if(typeof ut!="string")for(let[gt,yt]of Object.entries(ut.layers)){let wt=(st=(_e=$[rt])==null?void 0:_e.layers)==null?void 0:st.data(gt);wt&&Hr.patch(wt,yt)}}}).data),j}function c(g,b){let j,$=[],_e={orthographic:0,perspective:0,geometry:0};function st(rt,ut){for(let[gt,yt]of Object.entries(ut.layers)){let{texture:wt,...Ct}=yt;if(wt!==void 0&&Object.keys(wt).length>0){let Pt={path:[...rt,"layers",gt,"texture"],props:wt,type:0};$.push(Pt)}if(Object.keys(Ct).length>0){let Pt={path:[...rt,"layers",gt],props:Ct,type:0};$.push(Pt)}}}for(let[rt,ut]of Object.entries(b))if(rt!=="name")if(rt==="cloner")$.push(...Kv.toOps(ut,["cloner"]));else if(rt==="pathSnapping")$.push({path:[rt],props:{slide:ut.slide,offset:ut.offset},type:0});else if(rt==="material")st(["material"],ut);else if(rt==="materials")for(let[gt,yt]of Object.entries(ut))st(["materials",gt],yt);else if(_e[rt]===0){if(rt==="geometry"&&ut.extrusion!==void 0){let gt={path:[rt,"extrusion"],props:ut.extrusion,type:0};$.push(gt),ut={...ut},delete ut.extrusion}if(Object.keys(ut).length>0){let gt={path:[rt],props:ut,type:0};$.push(gt)}}else j===void 0&&(j={path:[],props:{},type:0},$.push(j)),j.props[rt]=ut;return $}e.toOps=c;function d(g,b){var $,_e,st,rt,ut,gt;if(b===void 0)return g;let j={...g};if(Object.assign(j,rd.merge(j,b)),Object.assign(j,{pathSnapping:Object.assign({},j.pathSnapping,{slide:(($=b.pathSnapping)==null?void 0:$.slide)??((_e=j.pathSnapping)==null?void 0:_e.slide)??0,offset:((st=b.pathSnapping)==null?void 0:st.offset)??((rt=j.pathSnapping)==null?void 0:rt.offset)??0})}),Ks.is(g.type)){j.orthographic={...j.orthographic},j.perspective={...j.perspective};let yt=b;((ut=yt.orthographic)==null?void 0:ut.zoom)!==void 0&&(j.orthographic.zoom=yt.orthographic.zoom),((gt=yt.perspective)==null?void 0:gt.zoom)!==void 0&&(j.perspective.zoom=yt.perspective.zoom),yt.isUpVectorFlipped!==void 0&&(j.isUpVectorFlipped=yt.isUpVectorFlipped),yt.targetOffset!==void 0&&(j.targetOffset=yt.targetOffset)}else if(g.type==="Mesh")"geometry"in b&&Object.assign(j,{geometry:i0.merge(j.geometry,b.geometry)}),(b.material||b.materials)&&(j=a(j,b)),j.cloner&&"cloner"in b&&Object.assign(j,{cloner:Bo.merge(j.cloner,b.cloner)});else if(g.type==="Empty")j.cloner&&"cloner"in b&&Object.assign(j,{cloner:Bo.merge(j.cloner,b.cloner)});else if(Zv.is(g.type)){let yt=b;yt.intensity!==void 0&&(j.intensity=yt.intensity),yt.color!==void 0&&(typeof yt.color=="string"?j.color=yt.color:j.color=Ri.clone(yt.color))}return j}e.patch=d})(Pa||(Pa={}));var nd;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(nd||(nd={}));var Zs;(e=>e.defaultData={orbitControls:nd.defaultData,playPage:Ol,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((o,a)=>{let c=0,d=0;return a<5?d=-30:a<10&&(d=30),a===0||a===10||a===5?c=30:(a===4||a===11||a===9)&&(c=-30),[120,[c,d],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(Zs||(Zs={}));var L1;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(L1||(L1={}));var B1;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(B1||(B1={}));var Da;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...L1.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:B1.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(Da||(Da={}));var Nl;(e=>{function o(c){return c.find(d=>d.data.type==="Page"&&d.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=o;function a(c,d,g){c.scene.objects.traverseFrom(d,(b,j)=>{var $;if(j.type==="Instance"){let _e=($=sd.getComponentData(c,j.component))==null?void 0:$.data;_e&&g(b,j,_e.events)}else g(b,j,j.events)})}e.traverseModuleInstances=a})(Nl||(Nl={}));var Oa;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function o(d={withLight:!0,withSquare:!0}){let g=[],b=c0.defaultMeshObject;d.withLight===!0&&g.push({fi:-1,data:l0.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),d.withSquare===!0&&g.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:b,children:[]});let j=new yr$1;return j.push({fi:1,id:Ol,data:{...Ca.defaultData,name:"Scene 1"},children:g}),j}e.defaultData={objects:o(),publish:Zs.defaultData,styles:Da.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new yr$1,publish:Zs.defaultData,styles:Da.defaultData()}},e.emptyDataWithPage=function(d){return{objects:o(d),publish:Zs.defaultData,styles:Da.defaultData()}},e.emptyData=function(){return{objects:new yr$1,publish:{...Zs.defaultData},styles:Da.defaultData()}};function a(d){return{...e.defaultData,objects:_n(d,yr$1.prototype)}}e.withObjs=a;function c(d,g){return a([{id:d,data:g,children:[],fi:0}])}e.withObj=c})(Oa||(Oa={}));var od;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(od||(od={}));var ad;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(ad||(ad={}));var Yi;(e=>{function o(b){return b.textValue!==void 0}e.isTextValue=o;function a(b){return typeof b=="number"}e.isNumber=a;function c(b){return typeof b=="boolean"}e.isBoolean=c;function d(b){return o(b)?"string":c(b)?"boolean":"number"}e.typeOfVariable=d;function g(b){return e.isTextValue(b)?Array.isArray(b.textValue)?b.textValue.map(j=>j.toString().padStart(b.padding??2,"0")).join(b.deliminator??":")+(b.suffix!==void 0?" "+b.suffix:""):b.textValue.toString():e.isBoolean(b)?b?"True":"False":e.isNumber(b)?parseFloat(b.toFixed(3)).toString():b.toString()}e.getDisplayedValue=g})(Yi||(Yi={}));var N1;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(N1||(N1={}));var XD;(e=>e.all=[...N1.all,"components"])(XD||(XD={}));var QD;(e=>{function o(){return{images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,materials:new it,components:new it,variables:new it}}e.defaultData=o})(QD||(QD={}));var Ia;(e=>{function o(){return{images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,materials:new it,components:new it,variables:new it}}e.defaultData=o})(Ia||(Ia={}));var Mn;(e=>{function o(){let b={};return b["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},_n(b,it.prototype)}e.defaultColors=o;function a(b){let j={};return b!=null&&b.withAITexture&&(j["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...ad.emptyImage,name:"AI generated image"}),_n(j,it.prototype)}e.defaultImages=a;function c(){return{catelogs:new it,materials:new it,images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,variables:new Ue,lib:Ia.defaultData()}}e.emptyData=c;function d(b){switch(b){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let j=[0,0,0];return{name:"Time",value:{textValue:j,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:j,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",b)}}e.defaultVariables=d;function g(b,j){if(j.format==="HH:mm:ss"){let $=Math.floor(b/3600),_e=Math.floor((b-$*3600)/60),st=Math.round(b-$*3600-_e*60);return{textValue:[$,_e,st]}}else if(j.format==="mm:ss"){let $=Math.floor(b/60),_e=Math.round(b-$*60);return{textValue:[$,_e]}}else return j.format==="number"?b=Math.round(b):b=Math.round(b*1e3)/1e3,b}e.getFormattedTimerTime=g})(Mn||(Mn={}));var ld;(e=>e.list=["idle","move","jump","run"])(ld||(ld={}));var cd;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Ue,move:new Ue,jump:new Ue,run:new Ue},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:St.fromHexAndA(3728051,1)}}))(cd||(cd={}));function KD(e){e.layers.forEach(o=>{if(o.type==="depth"&&o.colorA!==void 0){let a=o.colorA,c=o.colorB,d=[[a.r,a.g,a.b,a.a],[c.r,c.g,c.b,c.a]],g=[0,1];for(let j=2;j<10;j++)d.push(d[1]),g.push(1);let b={...as(kr$1(o),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,o.near),far:Math.max(0,o.far),colors:d,steps:g,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(o,b)}else if(o.type==="depth"&&o.gradientType===1&&(o.near<0||o.far<0)){let a={...kr$1(o),near:Math.max(o.near,0),far:Math.max(o.far,0)};Object.assign(o,a)}})}function Ra(e,o){Object.values(e.shared.materials).forEach(a=>o(a))}function La(e,o){e.scene.objects.traverse((a,c)=>{"materials"in c?c.materials.forEach((d,g)=>{d===void 0&&(c.materials[g]=oi.defaultData(),d=c.materials[g]),typeof d!="string"&&o(d)}):"material"in c?typeof c.material!="string"&&(c.material===void 0&&(c.material=oi.defaultData()),o(c.material)):c.type==="Mesh"&&(c.material===void 0&&(c.material=oi.defaultData()),o(c.material)),"overrides"in c&&Object.values(c.overrides).forEach(d=>{d.material&&typeof d.material!="string"&&Object.getPrototypeOf(d.material)!==vr.prototype&&o(d.material)})})}function Nq(e){Object.assign(e.scene.publish,{orbitControls:{...nd.defaultData,...kr$1(e.scene.publish.orbitControls)}})}function Fq(e){Object.assign(e.scene.publish.settings,{video:{...Zs.defaultData.settings.video,...kr$1(e.scene.publish.settings.video)}})}function kq(e){function o(a){if(a.layers){for(let c of Object.values(a.layers))if(c){for(let[d,g]of Object.entries(c))if((e0.includes(d)||typeof g=="boolean")&&delete c[d],d==="texture")for(let[b,j]of Object.entries(g))(jD.includes(b)||typeof j=="boolean")&&delete g[b]}}}e.scene.objects.traverse((a,c)=>{c.states.forEach(d=>{let g=d;g.material?o(g.material):g.materials&&g.materials.forEach(b=>{o(b)})})})}function Vq(e){e.scene.publish.withBackground=!0}function zq(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Uq(e){e.scene.objects.traverse((o,a)=>{let c=a.cloner;c&&(c.radial.scale=c.radial.scale.map(d=>d+1),c.linear.scale=c.linear.scale.map(d=>d+1))})}function Gq(e){e.scene.objects.traverse((o,a)=>{let c=a.geometry;c&&(c.type==="DodecahedronGeometry"||c.type==="IcosahedronGeometry")&&(c.detail=Math.round(c.detail))})}function jq(e){e.scene.objects.traverse((o,a)=>{let c=e.scene.objects.unproxy().parent(o);if(c){let d=kr$1(e.scene.objects.data(c));d&&d.type==="Mesh"&&d.geometry.type==="BooleanGeometry"&&a.type==="Mesh"&&(a.visible=kr$1(a).booleanExclude!==!0)}})}function Hq(e){e.scene.objects.traverse((o,a)=>{if(a.type==="Mesh"){let c=a;a.geometry.type==="NonParametricGeometry"?c.material!==void 0&&delete c.material:c.materials!==void 0&&delete c.materials}})}function Wq(e){function o(c){Object.setPrototypeOf(c,vr.prototype),c.texture&&Object.setPrototypeOf(c.texture,vr.prototype)}function a(c){Object.setPrototypeOf(c,vr.prototype);for(let d in c)o(c[d])}e.scene.objects.traverse((c,d)=>{d.states.forEach(g=>{let b=g;if(b.material){let j=kr$1(b.material).layers;a(j),b.material.layers=j}if(b.materials)for(let j=0;j<b.materials.length;j++){let $=b.materials[j],_e=kr$1($).layers;a(_e),$.layers=_e}})})}function ZD(e){e.layers===void 0&&Object.assign(e,oi.defaultTwoLayerData("lambert"))}function F1(e){!e.layers||e.layers.forEach(o=>{if(o.type==="depth"&&o.colors.length===10){let a=[...o.colors];a.push(o.colors[9]);let c=[...o.steps];c.push(o.steps[9]);let d={...kr$1(o),colors:a,steps:c};Object.assign(o,d)}})}function qq(e){e.scene.objects.traverse((o,a)=>{a.type==="Mesh"&&(a.geometry.type==="BooleanGeometry"||a.geometry.type==="SubdivGeometry")&&(a.geometry.phongAngle=35)})}function JD(e){e.scene.objects.traverse((o,a)=>{"materials"in a?a.materials.forEach(c=>{typeof c!="string"&&F1(c)}):"material"in a&&typeof a.material!="string"&&F1(a.material)}),Object.values(e.shared.materials).forEach(o=>F1(o))}function Yq(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((o,a)=>{(a.type==="DirectionalLight"||a.type==="SpotLight")&&(a.shadowResolution=1024,a.shadowRadius=1,a.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Xq(e){e.shared.audios=_n({},it.prototype)}function Qq(e){e.shared.videos=_n({},it.prototype)}function Kq(e){let o=e.shared.materials;Object.entries(o).forEach(([a,c])=>{if(!c.layers){let d={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(o,{[a]:d})}})}function Zq(e){Object.entries(kr$1(e.shared.images)).filter(o=>o[1].asset===!1).map(o=>o[0]).forEach(o=>{delete e.shared.images[o]}),Object.entries(kr$1(e.shared.audios)).filter(o=>o[1].asset===!1).map(o=>o[0]).forEach(o=>{delete e.shared.audios[o]})}function Jq(e){e.scene.publish.settings.web.preload=!1}function $D(e){e.layers&&e.layers.forEach(o=>{o.type==="depth"&&o.num!==void 0&&(o.colors=o.colors.slice(0,o.num),o.steps=o.steps.slice(0,o.num),delete o.num)})}function eO(e){e.layers&&e.layers.forEach(o=>{GD(o)&&o.isMask===void 0&&(o.isMask=!1),(o.type==="texture"||o.type==="video")&&o.blending===void 0&&(o.blending=0),(o.type==="noise"||o.type==="displace"&&o.displacementType==="noise")&&(o.voronoiStyle===void 0&&(o.voronoiStyle=0),o.highCut===void 0&&(o.highCut=1),o.lowCut===void 0&&(o.lowCut=0),o.smoothness===void 0&&(o.smoothness=.3),o.seed===void 0&&(o.seed=0),o.quality===void 0&&(o.quality=1))})}function $q(e){e.shared.fonts=_n({},it.prototype)}function e9(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}function t9(e){let o=[];e.scene.objects.traverse((a,c)=>{let d=c;if(d.type==="TextFrame"){let g=oi.defaultTwoLayerData("phong"),b=typeof d.color=="string"?e.shared.colors[d.color]:d.color;g.layers[1].data.color={r:b.r,g:b.g,b:b.b},g.layers[1].data.alpha=d.alpha;let j=e9(d.font);e.shared.fonts[j]===void 0&&(e.shared.fonts[j]={name:j});let $={name:d.name,...Li.defaultData,...kc.defaultData,flatShading:!1,wireframe:!1,geometry:{...Ll.defaultData("TextGeometry"),width:d.width,height:d.height,font:j,depth:0,horizontalAlign:d.horizontalAlign,verticalAlign:d.verticalAlign,fontSize:d.fontSize*1.40625,lineHeight:d.lineHeight/1.40625,letterSpacing:d.letterSpacing-1,text:d.text,textTransform:d.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:g,states:kr$1(d.states),events:kr$1(d.events),visible:d.visible,raycastLock:d.raycastLock,position:d.position,rotation:d.rotation,scale:d.scale,hiddenMatrix:d.hiddenMatrix},_e=kr$1(e.scene.objects).parent(a);e.scene.objects.insertAfter(_e??null,a,[{id:a+"new",data:$,children:[]}]),o.push(a)}}),o.forEach(a=>{e.scene.objects.delete(a)})}function r9(e){let o={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((a,c)=>{c.events.forEach(d=>{if(o[Number(d.type)])if(Object.assign(d,{type:o[Number(d.type)]}),d.type==="Audio"&&"audioEvent"in d&&(Object.assign(d,{playAudio:d.audioEvent}),delete d.audioEvent),d.type==="GameControl")Object.assign(d,{gameActions:{idle:new Ue,move:new Ue,jump:new Ue}});else{let g=new Ue;Object.assign(d,{actions:g}),(d.type==="MouseDown"||d.type==="MouseUp"||d.type==="KeyDown"||d.type==="KeyUp")&&"url"in d&&g.push({fi:0,id:Me.generateUUID(),data:{type:"Link",url:d.url,delay:0}}),"targets"in d&&(d.targets.forEach((b,j,$)=>{let _e={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},st={easing:b.easing,duration:b.duration};b.easing===6?Object.assign(st,as(b,"mass","stiffness","damping","velocity")):b.easing===5&&Object.assign(st,{control1:{...b.control1},control2:{...b.control2}});let rt={repeat:b.repeat?-1:0,delay:b.delay,delayDirection:b.delayDirection,direction:b.cycle&&b.rewind?"pingpong-rewind":b.cycle?"pingpong":"normal"},ut={state:b.state,...rt,...st},gt={allowSlerp:!0,type:"Transition",object:b.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Ue({fi:0,id:Me.generateUUID(),data:_e},{fi:1,id:Me.generateUUID(),data:ut})};g.push({fi:$,id:j,data:gt})}),delete d.targets)}})})}function i9(e){e.scene.objects.traverse((o,a)=>{function c(d,g){var $;let b=new Ue,j=[];if(a.events.forEach((_e,st,rt)=>{if(_e.type==="Audio"&&_e.trigger===g){let ut;j.push(st),_e.interaction==="play"?ut={...as(_e,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in _e?_e.after:void 0,toggle:"after"in _e?_e.toggle:void 0,type:"Audio"}:(_e.interaction==="pause"||_e.interaction==="stop")&&(ut={...as(_e,"interaction","delay","object","playAudio"),type:"Audio"}),ut&&b.push({fi:rt,id:st,data:ut})}}),j.forEach(_e=>a.events.delete(_e)),b.length){let _e=($=a.events.find(st=>st.type===d))==null?void 0:$.data;_e?"actions"in _e&&_e.actions.insertBefore(null,b):a.events.insertBefore(null,[{id:Me.generateUUID(),data:{type:d,actions:b}}])}}c("Start","start"),c("MouseDown","mouseDown"),c("MouseUp","mouseUp"),c("KeyDown","keyDown"),c("KeyUp","keyUp")})}function tO(e){var a;let o=(a=e.layers.find(c=>c.type==="light"))==null?void 0:a.data;if((o==null?void 0:o.category)==="basic"){let c=Hr.defaultData("light","phong"),d=o;Object.assign(d,c),d.visible=!1}}function rO(e){Ra(e,tO),La(e,tO)}function n9(e){e.scene.objects.traverse((o,a)=>{a.type==="Mesh"&&a.geometry.type==="SubdivGeometry"&&(a.geometry.scaleBaked||(a.geometry.scaleBaked=[1,1,1]))})}function s9(e){e.scene.objects.traverse((o,a)=>{(a.type==="Empty"||a.type==="Mesh")&&a.cloner&&!a.cloner.randomnessObject&&!a.cloner.toObject&&!a.cloner.randomness&&(a.cloner={...a.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function o9(e){e.scene.objects.traverse((o,a)=>{a.type==="Mesh"&&a.geometry.type==="NonParametricGeometry"&&!("material"in a)&&!("materials"in a)&&(a.material=oi.defaultTwoLayerData("phong"))})}function a9(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((o,a)=>{(a.type==="OrthographicCamera"||a.type==="PerspectiveCamera")&&(a.orthographic.autoZoom===void 0&&(a.orthographic.autoZoom=!1),a.orthographic.autoZoomFrustumSize===void 0&&(a.orthographic.autoZoomFrustumSize=790))})}function l9(e){e.scene.objects.traverse((o,a)=>{a.pathSnapping===void 0&&(a.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),a.pathSnapping.offset===void 0&&(a.pathSnapping.offset=0)})}function c9(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function u9(e){let{video:o}=e.scene.publish.settings;o.format==="gif"&&o.fps>48&&(o.fps=15)}function h9(e){e.scene.objects.traverse((o,a)=>{a.events.forEach(c=>{c.type==="GameControl"&&(c.resetYPosition=Math.abs(c.resetYPosition-a.position[1]))})})}function d9(e){let o=e.scene.environment.usePhysics;e.scene.objects.traverse((a,c)=>{o&&c.physics===null?c.collision=!1:c.collision="visibility"})}function f9(e){e.scene.objects.traverse((o,a)=>{a.events.forEach(c=>{c.type==="GameControl"&&(c.navmesh=cd.defaultDataThirdPerson.navmesh)})})}function p9(e){e.scene.styles||(e.scene.styles=Da.defaultData())}function iO(e){e.layers.forEach(o=>{o.type==="light"&&o.category!=="toon"&&o.occlusion===void 0&&(o.occlusion=!0)})}function m9(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),La(e,iO),Ra(e,iO)}function g9(e){e.scene.objects.traverse((o,a)=>{a.events.forEach(c=>{c.type==="GameControl"&&Object.assign(c.gameActions,{run:new Ue})})})}function y9(e){e.scene.objects.traverse((o,a)=>{a.events.forEach(c=>{c.type==="GameControl"&&(c.keyAssignments=[...c.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function nO(e){e.layers&&e.layers.forEach(o=>{o.type==="light"&&o.bumpMapIntensity===void 0&&(o.bumpMapIntensity=5)})}function sO(e,o){if(o<1&&(La(e,KD),Ra(e,KD),e.schema=1),o<2&&(Nq(e),e.schema=2),o<3&&(kq(e),e.schema=3),o<4&&(Vq(e),e.schema=4),o<5&&(zq(e),e.schema=5),o<6&&(Uq(e),e.schema=6),o<7&&(Gq(e),e.schema=7),o<8&&(e.schema=8),o<9&&(JD(e),e.schema=9),o<10&&(qq(e),e.schema=10),o<11&&(Yq(e),e.schema=11),o<12&&(JD(e),e.schema=12),o<13&&(Xq(e),e.schema=13),o<14&&(Kq(e),e.schema=14),o<15&&(Zq(e),e.schema=15),o<16&&(Jq(e),e.schema=16),o<17&&(La(e,$D),Ra(e,$D),e.schema=17),o<18&&(La(e,ZD),Ra(e,ZD),e.schema=18),o<19&&(Fq(e),e.schema=19),o<20&&($q(e),t9(e),e.schema=20),o<21&&(r9(e),i9(e),e.schema=21),o<22&&(rO(e),e.schema=22),o<23&&(n9(e),e.schema=23),o<24&&(s9(e),e.schema=24),(o<25||e.shared.videos===void 0)&&(Qq(e),o<25&&(e.schema=25)),o<26&&(jq(e),e.schema=26),o<27&&(Hq(e),e.schema=27),o<28&&(rO(e),e.schema=28),o<29&&(Wq(e),e.schema=29),o<30&&(o9(e),e.schema=30),o<31&&(a9(e),e.schema=31),o<33&&(l9(e),e.schema=33),o<34&&(c9(e),e.schema=34),o<35&&(u9(e),e.schema=35),o<36&&(h9(e),e.schema=36),o<37&&(d9(e),e.schema=37),o<38&&(La(e,eO),Ra(e,eO),e.schema=38),o<39&&(f9(e),e.schema=39),o<40&&(p9(e),e.schema=40),o<41&&(m9(e),e.schema=41),o<42&&(g9(e),e.schema=42),o<43&&(y9(e),e.schema=43),o<99){La(e,nO),Ra(e,nO),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=As);let a=kr$1(e.scene.objects),c=e.scene.objects;e.scene.publish.playPage=Ol,c.insertBefore(null,null,[{id:Ol,data:{...Ca.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:as(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:as(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...Bl.defaultData,...as(e.scene.environment,"usePhysics","gravity")},camera:kr$1(e.scene.ownerCamera)??Ca.defaultData.camera,name:"Scene"},children:[]}]);for(let b of a)b.id!==Oa.TRASH_CAN_ID&&c.move(Ol,b.fi,b.id);let d=0,g=0;e.shared.penumbraSize&&e.scene.objects.traverse((b,j)=>{j.type==="DirectionalLight"?(j.penumbraSize=e.shared.penumbraSize[Math.min(d,2)],d+=1):j.type==="SpotLight"&&(j.penumbraSize=e.shared.penumbraSize[3+Math.min(g,1)],g+=1),(j.physics===void 0||j.physics===null)&&j.type!=="Instance"&&(j.physics={},Object.assign(j.physics,Rl.defaultData)),j.physics!==void 0&&j.physics!==null&&(j.physics.enabled=j.collision??"visibility",delete j.collision)}),e.schema=99}}function oO(e){e.layers&&e.layers.forEach(o=>{o.type==="light"&&o.alphaOverride===void 0&&(o.alphaOverride=1)})}function v9(e){e.scene.objects.traverse((o,a)=>{let c=a.geometry;c&&c.type==="PathGeometry"&&(c.extrusion.capType="flat",c.extrusion.bevel=50,c.extrusion.bevelSides=6,c.extrusion.shape.type==="Custom"&&(c.extrusion.shape.shapeQuality="low"))})}function x9(e){var o;Array.isArray(kr$1(e.events))&&((o=e.events)==null||o.forEach(a=>{"disabled"in a||(a.disabled=!1),(a.type==="MouseDown"||a.type==="MouseUp"||a.type==="MousePress")&&(a.mode=a.mode||"Object")}))}var ud=180/Math.PI;function aO(e){e.rotation=e.rotation.slice(0,3).map(o=>o*ud)}function lO(e){var a,c;aO(e),e.type==="Page"&&aO(e.camera),(a=e.states)==null||a.forEach(d=>{d.rotation===void 0||d.rotation===null||(d.rotation=d.rotation.slice(0,3).map(g=>g*ud))});let o=e.geometry;o&&o.type==="SphereGeometry"&&(o.thetaLength=(o.thetaLength??180)*ud),o&&o.type==="TorusGeometry"&&(o.arc=o.arc*ud),o&&o.type==="PathGeometry"&&(o.extrusion.angle*=ud,o.extrusion.twist*=ud),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(kr$1(e.events))&&((c=e.events)==null||c.forEach(d=>{(d.type==="MouseDown"||d.type==="MouseUp"||d.type==="MousePress"||d.type==="KeyDown"||d.type==="KeyUp"||d.type==="KeyPress"||d.type==="Collision"||d.type==="Trigger")&&(d.runMode=d.toggle?"Toggle":"Repeat")}))}function b9$1(e){e.shared.variables=_n({},it.prototype)}function S9(e){let o=kr$1(e.shared.variables);e.shared.variables=_n(Object.entries(o??{}).map(([a,c],d)=>({fi:d,id:a,data:c})),Ue.prototype)}var Fo=111;function cO(e,o){o(e.data);for(let a of e.children)cO(a,o)}function w9(e){let o=e.schema??104;o!==Fo&&o<105&&(cO(e.asset,lO),e.schema=105)}function A9(e){e.shared.particles=_n({},it.prototype),e.shared.lib&&(e.shared.lib.particles=Ia.defaultData().particles)}function _9(e){e.scene.objects.traverse((o,a)=>{a.type==="Particle"&&typeof a.renderMaterial.size=="number"&&Object.assign(a.renderMaterial,{size:[a.renderMaterial.size,a.renderMaterial.size]})})}function u0(e){let o=e.schema??0;if(o!==Fo){console.warn("updating from ",o,"to ",Fo),sO(e,o),o<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Zs.defaultData.joystickSizeAndXYOffset),e.schema=100),o<101&&(La(e,oO),Ra(e,oO),e.schema=101),o<102&&(v9(e),e.schema=102),o<104&&(e.shared.catelogs=new it,e.shared.lib=Ia.defaultData(),e.schema=104),o<105&&(b9$1(e),e.scene.objects.traverse((a,c)=>{lO(c)}),e.schema=105);for(let a of Object.values(e.shared.lib.components))w9(a);o<106&&(S9(e),e.schema=106),o<107&&(e.shared.lib.variables=Ia.defaultData().variables,e.schema=107),o<109&&(A9(e),e.schema=109),o<110&&(_9(e),e.schema=110),o<111&&(e.scene.objects.traverse((a,c)=>{x9(c)}),e.schema=111)}}var sd;(e=>{e.defaultData={schema:Fo,scene:Oa.defaultData,frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:{...Mn.emptyData(),colors:Mn.defaultColors()}},e.emptyDataForImports=function(d){let g=Oa.emptyDataWithPage(d);return{schema:Fo,scene:g,frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:{...Mn.emptyData(),colors:Mn.defaultColors(),images:Mn.defaultImages(d)}}},e.emptyData=function(){return{schema:Fo,scene:Oa.emptyDataWithPage(),frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:Mn.emptyData()}},e.clipboard2dData=function(){return{schema:Fo,scene:Oa.emptyData(),frames:new it,shared:Mn.emptyData()}},e.collabHelper={...em,updateSchema(d){return(d.schema??0)<Fo?Tl(d,u0):(d.schema??0)-Fo}};function o(d){let g=e.collabHelper.updateSchema(d);return typeof g=="number"?g===0?d:null:g.data}e.updateSchemaDirectly=o;function a(d){return{...d,shared:{...d.shared,lib:Ia.defaultData()}}}e.withoutLib=a;function c(d,g){let b=d.scene.objects.get(g);if(b&&b.data.type==="Component")return b;{let j=d.shared.lib.components[g];if(j)return j.asset}}e.getComponentData=c})(sd||(sd={}));var uO;(e=>{function o(a){return!0}e.is=o})(uO||(uO={}));var h0;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0};function o(c,d){return{position:(d==null?void 0:d.position)??c.position,rotation:(d==null?void 0:d.rotation)??c.rotation,scale:(d==null?void 0:d.scale)??c.scale}}e.merge=o;function a(c,d){return vv({position:Ro.isEqual(c.position,d.position)?void 0:d.position,rotation:c.rotation===d.rotation?void 0:d.rotation,scale:Ro.isEqual(c.scale,d.scale)?void 0:d.scale})}e.diff=a})(h0||(h0={}));var k1;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(k1||(k1={}));var d0;(e=>e.defaultData={opacity:1,fill:{color:St.white,enabled:!0},stroke:{color:St.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:St.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:St.from0to1([0,0,0,1]),enabled:!1,spread:0}})(d0||(d0={}));var Ba;(e=>{function o(b,j){return{name:j}}e.newEmpty=o;function a(b,j){if(j===void 0)return b;let $={...b},_e=["width","height","cornerRadius"];for(let st of _e)st in $&&st in j&&j[st]!==void 0&&Object.assign($,{[st]:j[st]});return $}function c(b,j){if(j===void 0)return b;let $={...b};return"fill"in $&&"fill"in j&&j.fill!==void 0&&Object.assign($,{fill:{...$.fill,...j.fill}}),"stroke"in $&&"stroke"in j&&j.stroke!==void 0&&Object.assign($,{stroke:{...$.stroke,...j.stroke}}),"layerBlur"in $&&"layerBlur"in j&&j.layerBlur!==void 0&&Object.assign($,{layerBlur:{...$.layerBlur,...j.layerBlur}}),"backgroundBlur"in $&&"backgroundBlur"in j&&j.backgroundBlur!==void 0&&Object.assign($,{backgroundBlur:{...$.backgroundBlur,...j.backgroundBlur}}),"dropShadow"in $&&"dropShadow"in j&&j.dropShadow!==void 0&&Object.assign($,{dropShadow:{...$.dropShadow,...j.dropShadow}}),"innerShadow"in $&&"innerShadow"in j&&j.innerShadow!==void 0&&Object.assign($,{innerShadow:{...$.innerShadow,...j.innerShadow}}),$}function d(b,j){if(j===void 0)return b;let $={...b};return Object.assign($,h0.merge($,j)),$=a($,j),$=c($,j),$}e.patch=d;function g(b,j){let $,_e=[];for(let[st,rt]of Object.entries(j))st!=="name"&&($===void 0&&($={path:[],props:{},type:0},_e.push($)),$.props[st]=rt);return _e}e.toOps=g})(Ba||(Ba={}));var am;(e=>e.defaultData={...h0.defaultData,...k1.defaultData,states:new Ue,events:new Ue,visible:!0,raycastLock:!1})(am||(am={}));var hd;(e=>e.defaultData={...am.defaultData,...d0.defaultData})(hd||(hd={}));var f0;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(f0||(f0={}));var V1;(e=>e.defaultData={...hd.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(V1||(V1={}));var dd;(e=>e.defaultData={...hd.defaultData,...f0.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(dd||(dd={}));var z1;(e=>e.defaultData={...hd.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(z1||(z1={}));var U1;(e=>e.defaultData={...hd.defaultData,type:"path2d",path:"",name:"Path"})(U1||(U1={}));var hO;(e=>{function o(a){return a.type==="ellipse2d"||a.type==="rectangle2d"||a.type==="text2d"||a.type==="vector2d"||a.type==="path2d"}e.is=o})(hO||(hO={}));var lm;(e=>e.defaultData={...am.defaultData,name:"Group",type:"group2d"})(lm||(lm={}));var G1;(e=>e.defaultData={...am.defaultData,...f0.defaultData,...d0.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:St.fromHexAndA(si,1),enabled:!0},stroke:{color:St.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}})(G1||(G1={}));var Na;(e=>{function o(g){switch(g){case"rectangle2d":return{...dd.defaultData};case"ellipse2d":return{...V1.defaultData};case"text2d":return{...z1.defaultData};case"vector2d":return{...dd.defaultData};case"path2d":return{...U1.defaultData};case"frame2d":return{...G1.defaultData};case"group2d":return{...lm.defaultData}}}e.defaultData=o;function a(g){return"width"in g&&"height"in g?[typeof g.width=="number"?g.width*.5:0,typeof g.height=="number"?g.height*.5:0]:[0,0]}e.getPivot=a;function c(g){return g.type==="rectangle2d"||g.type==="ellipse2d"||g.type==="text2d"||g.type==="frame2d"}e.isResizeable=c;function d(g){return g.type==="rectangle2d"||g.type==="frame2d"}e.hasCorners=d})(Na||(Na={}));var p0;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new yr$1},e.emptyData=function(){return{type:"scene2d",objects:new yr$1}}))(p0||(p0={}));function Js(e,o=!1){let a=e[0].index!==null,c=new Set(Object.keys(e[0].attributes)),d=new Set(Object.keys(e[0].morphAttributes)),g={},b={},j=e[0].morphTargetsRelative,$=new Pe,_e=0;for(let st=0;st<e.length;++st){let rt=e[st],ut=0;if(a!==(rt.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+st+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let gt in rt.attributes){if(!c.has(gt))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+st+'. All geometries must have compatible attributes; make sure "'+gt+'" attribute exists among all geometries, or in none of them.'),null;g[gt]===void 0&&(g[gt]=[]),g[gt].push(rt.attributes[gt]),ut++}if(ut!==c.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+st+". Make sure all geometries have the same number of attributes."),null;if(j!==rt.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+st+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let gt in rt.morphAttributes){if(!d.has(gt))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+st+".  .morphAttributes must be consistent throughout all geometries."),null;b[gt]===void 0&&(b[gt]=[]),b[gt].push(rt.morphAttributes[gt])}if(o){let gt;if(a)gt=rt.index.count;else if(rt.attributes.position!==void 0)gt=rt.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+st+". The geometry must have either an index or a position attribute"),null;$.addGroup(_e,gt,st),_e+=gt}}if(a){let st=0,rt=[];for(let ut=0;ut<e.length;++ut){let gt=e[ut].index;for(let yt=0;yt<gt.count;++yt)rt.push(gt.getX(yt)+st);st+=e[ut].attributes.position.count}$.setIndex(rt)}for(let st in g){let rt=dO(g[st]);if(!rt)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+st+" attribute."),null;$.setAttribute(st,rt)}for(let st in b){let rt=b[st][0].length;if(rt===0)break;$.morphAttributes=$.morphAttributes||{},$.morphAttributes[st]=[];for(let ut=0;ut<rt;++ut){let gt=[];for(let wt=0;wt<b[st].length;++wt)gt.push(b[st][wt][ut]);let yt=dO(gt);if(!yt)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+st+" morphAttribute."),null;$.morphAttributes[st].push(yt)}}return $}function dO(e){let o,a,c,d=0;for(let j=0;j<e.length;++j){let $=e[j];if($.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(o===void 0&&(o=$.array.constructor),o!==$.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(a===void 0&&(a=$.itemSize),a!==$.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(c===void 0&&(c=$.normalized),c!==$.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;d+=$.array.length}let g=new o(d),b=0;for(let j=0;j<e.length;++j)g.set(e[j].array,b),b+=e[j].array.length;return new Xe(g,a,c)}var fO=Math.pow(2,-24),zc=class{constructor(){}};function Es(e,o,a){return a.min.x=o[e],a.min.y=o[e+1],a.min.z=o[e+2],a.max.x=o[e+3],a.max.y=o[e+4],a.max.z=o[e+5],a}function j1(e){let o=-1,a=-1/0;for(let c=0;c<3;c++){let d=e[c+3]-e[c];d>a&&(a=d,o=c)}return o}function H1(e,o){o.set(e)}function W1(e,o,a){let c,d;for(let g=0;g<3;g++){let b=g+3;c=e[g],d=o[g],a[g]=c<d?c:d,c=e[b],d=o[b],a[b]=c>d?c:d}}function cm(e,o,a){for(let c=0;c<3;c++){let d=o[e+2*c],g=o[e+2*c+1],b=d-g,j=d+g;b<a[c]&&(a[c]=b),j>a[c+3]&&(a[c+3]=j)}}function fd(e){let o=e[3]-e[0],a=e[4]-e[1],c=e[5]-e[2];return 2*(o*a+a*c+c*o)}function M9(e,o){if(!e.index){let a=e.attributes.position.count,c=o.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,d;a>65535?d=new Uint32Array(new c(4*a)):d=new Uint16Array(new c(2*a)),e.setIndex(new Xe(d,1));for(let g=0;g<a;g++)d[g]=g}}function C9(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let o=[],a=new Set;for(let d of e.groups)a.add(d.start),a.add(d.start+d.count);let c=Array.from(a.values()).sort((d,g)=>d-g);for(let d=0;d<c.length-1;d++){let g=c[d],b=c[d+1];o.push({offset:g/3,count:(b-g)/3})}return o}function Y1(e,o,a,c,d=null){let g=1/0,b=1/0,j=1/0,$=-1/0,_e=-1/0,st=-1/0,rt=1/0,ut=1/0,gt=1/0,yt=-1/0,wt=-1/0,Ct=-1/0,Pt=d!==null;for(let At=o*6,Tt=(o+a)*6;At<Tt;At+=6){let kt=e[At+0],It=e[At+1],Lt=kt-It,Ft=kt+It;Lt<g&&(g=Lt),Ft>$&&($=Ft),Pt&&kt<rt&&(rt=kt),Pt&&kt>yt&&(yt=kt);let Nt=e[At+2],Ht=e[At+3],dr=Nt-Ht,hs=Nt+Ht;dr<b&&(b=dr),hs>_e&&(_e=hs),Pt&&Nt<ut&&(ut=Nt),Pt&&Nt>wt&&(wt=Nt);let us=e[At+4],hn=e[At+5],un=us-hn,bo=us+hn;un<j&&(j=un),bo>st&&(st=bo),Pt&&us<gt&&(gt=us),Pt&&us>Ct&&(Ct=us)}c[0]=g,c[1]=b,c[2]=j,c[3]=$,c[4]=_e,c[5]=st,Pt&&(d[0]=rt,d[1]=ut,d[2]=gt,d[3]=yt,d[4]=wt,d[5]=Ct)}function P9(e,o,a,c){let d=1/0,g=1/0,b=1/0,j=-1/0,$=-1/0,_e=-1/0;for(let st=o*6,rt=(o+a)*6;st<rt;st+=6){let ut=e[st+0];ut<d&&(d=ut),ut>j&&(j=ut);let gt=e[st+2];gt<g&&(g=gt),gt>$&&($=gt);let yt=e[st+4];yt<b&&(b=yt),yt>_e&&(_e=yt)}c[0]=d,c[1]=g,c[2]=b,c[3]=j,c[4]=$,c[5]=_e}function D9(e,o,a,c,d){let g=a,b=a+c-1,j=d.pos,$=d.axis*2;for(;;){for(;g<=b&&o[g*6+$]<j;)g++;for(;g<=b&&o[b*6+$]>=j;)b--;if(g<b){for(let _e=0;_e<3;_e++){let st=e[g*3+_e];e[g*3+_e]=e[b*3+_e],e[b*3+_e]=st;let rt=o[g*6+_e*2+0];o[g*6+_e*2+0]=o[b*6+_e*2+0],o[b*6+_e*2+0]=rt;let ut=o[g*6+_e*2+1];o[g*6+_e*2+1]=o[b*6+_e*2+1],o[b*6+_e*2+1]=ut}g++,b--}else return g}}var Fa=32,O9=(e,o)=>e.candidate-o.candidate,Fl=new Array(Fa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),m0=new Float32Array(6);function I9(e,o,a,c,d,g){let b=-1,j=0;if(g===0)b=j1(o),b!==-1&&(j=(o[b]+o[b+3])/2);else if(g===1)b=j1(e),b!==-1&&(j=R9(a,c,d,b));else if(g===2){let $=fd(e),_e=1.25*d,st=c*6,rt=(c+d)*6;for(let ut=0;ut<3;ut++){let gt=o[ut],yt=(o[ut+3]-gt)/Fa;if(d<Fa/4){let wt=[...Fl];wt.length=d;let Ct=0;for(let At=st;At<rt;At+=6,Ct++){let Tt=wt[Ct];Tt.candidate=a[At+2*ut],Tt.count=0;let{bounds:kt,leftCacheBounds:It,rightCacheBounds:Lt}=Tt;for(let Ft=0;Ft<3;Ft++)Lt[Ft]=1/0,Lt[Ft+3]=-1/0,It[Ft]=1/0,It[Ft+3]=-1/0,kt[Ft]=1/0,kt[Ft+3]=-1/0;cm(At,a,kt)}wt.sort(O9);let Pt=d;for(let At=0;At<Pt;At++){let Tt=wt[At];for(;At+1<Pt&&wt[At+1].candidate===Tt.candidate;)wt.splice(At+1,1),Pt--}for(let At=st;At<rt;At+=6){let Tt=a[At+2*ut];for(let kt=0;kt<Pt;kt++){let It=wt[kt];Tt>=It.candidate?cm(At,a,It.rightCacheBounds):(cm(At,a,It.leftCacheBounds),It.count++)}}for(let At=0;At<Pt;At++){let Tt=wt[At],kt=Tt.count,It=d-Tt.count,Lt=Tt.leftCacheBounds,Ft=Tt.rightCacheBounds,Nt=0;kt!==0&&(Nt=fd(Lt)/$);let Ht=0;It!==0&&(Ht=fd(Ft)/$);let dr=1+1.25*(Nt*kt+Ht*It);dr<_e&&(b=ut,_e=dr,j=Tt.candidate)}}else{for(let Pt=0;Pt<Fa;Pt++){let At=Fl[Pt];At.count=0,At.candidate=gt+yt+Pt*yt;let Tt=At.bounds;for(let kt=0;kt<3;kt++)Tt[kt]=1/0,Tt[kt+3]=-1/0}for(let Pt=st;Pt<rt;Pt+=6){let At=~~((a[Pt+2*ut]-gt)/yt);At>=Fa&&(At=Fa-1);let Tt=Fl[At];Tt.count++,cm(Pt,a,Tt.bounds)}let wt=Fl[Fa-1];H1(wt.bounds,wt.rightCacheBounds);for(let Pt=Fa-2;Pt>=0;Pt--){let At=Fl[Pt],Tt=Fl[Pt+1];W1(At.bounds,Tt.rightCacheBounds,At.rightCacheBounds)}let Ct=0;for(let Pt=0;Pt<Fa-1;Pt++){let At=Fl[Pt],Tt=At.count,kt=At.bounds,It=Fl[Pt+1].rightCacheBounds;Tt!==0&&(Ct===0?H1(kt,m0):W1(kt,m0,m0)),Ct+=Tt;let Lt=0,Ft=0;Ct!==0&&(Lt=fd(m0)/$);let Nt=d-Ct;Nt!==0&&(Ft=fd(It)/$);let Ht=1+1.25*(Lt*Ct+Ft*Nt);Ht<_e&&(b=ut,_e=Ht,j=At.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${g} used.`);return{axis:b,pos:j}}function R9(e,o,a,c){let d=0;for(let g=o,b=o+a;g<b;g++)d+=e[g*6+c*2];return d/a}function L9(e,o){let a=e.attributes.position,c=e.index.array,d=c.length/3,g=new Float32Array(d*6),b=a.normalized,j=a.array,$=a.offset||0,_e=3;a.isInterleavedBufferAttribute&&(_e=a.data.stride);let st=["getX","getY","getZ"];for(let rt=0;rt<d;rt++){let ut=rt*3,gt=rt*6,yt,wt,Ct;b?(yt=c[ut+0],wt=c[ut+1],Ct=c[ut+2]):(yt=c[ut+0]*_e+$,wt=c[ut+1]*_e+$,Ct=c[ut+2]*_e+$);for(let Pt=0;Pt<3;Pt++){let At,Tt,kt;b?(At=a[st[Pt]](yt),Tt=a[st[Pt]](wt),kt=a[st[Pt]](Ct)):(At=j[yt+Pt],Tt=j[wt+Pt],kt=j[Ct+Pt]);let It=At;Tt<It&&(It=Tt),kt<It&&(It=kt);let Lt=At;Tt>Lt&&(Lt=Tt),kt>Lt&&(Lt=kt);let Ft=(Lt-It)/2,Nt=Pt*2;g[gt+Nt+0]=It+Ft,g[gt+Nt+1]=Ft+(Math.abs(It)+Ft)*fO,It<o[Pt]&&(o[Pt]=It),Lt>o[Pt+3]&&(o[Pt+3]=Lt)}}return g}function B9(e,o){function a(Pt){ut&&ut(Pt/gt)}function c(Pt,At,Tt,kt=null,It=0){if(!yt&&It>=$&&(yt=!0,_e&&(console.warn(`MeshBVH: Max depth of ${$} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),Tt<=st||It>=$)return a(At+Tt),Pt.offset=At,Pt.count=Tt,Pt;let Lt=I9(Pt.boundingData,kt,b,At,Tt,rt);if(Lt.axis===-1)return a(At+Tt),Pt.offset=At,Pt.count=Tt,Pt;let Ft=D9(j,b,At,Tt,Lt);if(Ft===At||Ft===At+Tt)a(At+Tt),Pt.offset=At,Pt.count=Tt;else{Pt.splitAxis=Lt.axis;let Nt=new zc,Ht=At,dr=Ft-At;Pt.left=Nt,Nt.boundingData=new Float32Array(6),Y1(b,Ht,dr,Nt.boundingData,g),c(Nt,Ht,dr,g,It+1);let hs=new zc,us=Ft,hn=Tt-dr;Pt.right=hs,hs.boundingData=new Float32Array(6),Y1(b,us,hn,hs.boundingData,g),c(hs,us,hn,g,It+1)}return Pt}M9(e,o);let d=new Float32Array(6),g=new Float32Array(6),b=L9(e,d),j=e.index.array,$=o.maxDepth,_e=o.verbose,st=o.maxLeafTris,rt=o.strategy,ut=o.onProgress,gt=e.index.count/3,yt=!1,wt=[],Ct=C9(e);if(Ct.length===1){let Pt=Ct[0],At=new zc;At.boundingData=d,P9(b,Pt.offset,Pt.count,g),c(At,Pt.offset,Pt.count,g),wt.push(At)}else for(let Pt of Ct){let At=new zc;At.boundingData=new Float32Array(6),Y1(b,Pt.offset,Pt.count,At.boundingData,g),c(At,Pt.offset,Pt.count,g),wt.push(At)}return wt}function gO(e,o){let a=B9(e,o),c,d,g,b=[],j=o.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let st=0;st<a.length;st++){let rt=a[st],ut=$(rt),gt=new j(32*ut);c=new Float32Array(gt),d=new Uint32Array(gt),g=new Uint16Array(gt),_e(0,rt),b.push(gt)}return b;function $(st){return st.count?1:1+$(st.left)+$(st.right)}function _e(st,rt){let ut=st/4,gt=st/2,yt=!!rt.count,wt=rt.boundingData;for(let Ct=0;Ct<6;Ct++)c[ut+Ct]=wt[Ct];if(yt){let Ct=rt.offset,Pt=rt.count;return d[ut+6]=Ct,g[gt+14]=Pt,g[gt+15]=65535,st+32}else{let Ct=rt.left,Pt=rt.right,At=rt.splitAxis,Tt;if(Tt=_e(st+32,Ct),Tt/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return d[ut+6]=Tt/4,Tt=_e(Tt,Pt),d[ut+7]=At,Tt}}}var Vn=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,o){let a=1/0,c=-1/0;for(let d=0,g=e.length;d<g;d++){let b=e[d][o];a=b<a?b:a,c=b>c?b:c}this.min=a,this.max=c}setFromPoints(e,o){let a=1/0,c=-1/0;for(let d=0,g=o.length;d<g;d++){let b=o[d],j=e.dot(b);a=j<a?j:a,c=j>c?j:c}this.min=a,this.max=c}isSeparated(e){return this.min>e.max||e.min>this.max}};Vn.prototype.setFromBox=function(){let e=new _;return function(o,a){let c=a.min,d=a.max,g=1/0,b=-1/0;for(let j=0;j<=1;j++)for(let $=0;$<=1;$++)for(let _e=0;_e<=1;_e++){e.x=c.x*j+d.x*(1-j),e.y=c.y*$+d.y*(1-$),e.z=c.z*_e+d.z*(1-_e);let st=o.dot(e);g=Math.min(st,g),b=Math.max(st,b)}this.min=g,this.max=b}}();var N9=function(){let e=new _,o=new _,a=new _;return function(c,d,g){let b=c.start,j=e,$=d.start,_e=o;a.subVectors(b,$),e.subVectors(c.end,c.start),o.subVectors(d.end,d.start);let st=a.dot(_e),rt=_e.dot(j),ut=_e.dot(_e),gt=a.dot(j),yt=j.dot(j)*ut-rt*rt,wt,Ct;yt!==0?wt=(st*rt-gt*ut)/yt:wt=0,Ct=(st+wt*rt)/ut,g.x=wt,g.y=Ct}}(),um=function(){let e=new z$2,o=new _,a=new _;return function(c,d,g,b){N9(c,d,e);let j=e.x,$=e.y;if(j>=0&&j<=1&&$>=0&&$<=1){c.at(j,g),d.at($,b);return}else if(j>=0&&j<=1){$<0?d.at(0,b):d.at(1,b),c.closestPointToPoint(b,!0,g);return}else if($>=0&&$<=1){j<0?c.at(0,g):c.at(1,g),d.closestPointToPoint(g,!0,b);return}else{let _e;j<0?_e=c.start:_e=c.end;let st;$<0?st=d.start:st=d.end;let rt=o,ut=a;if(c.closestPointToPoint(st,!0,o),d.closestPointToPoint(_e,!0,a),rt.distanceToSquared(st)<=ut.distanceToSquared(_e)){g.copy(rt),b.copy(st);return}else{g.copy(_e),b.copy(ut);return}}}}(),yO=function(){let e=new _,o=new _,a=new ii,c=new Di;return function(d,g){let{radius:b,center:j}=d,{a:$,b:_e,c:st}=g;if(c.start=$,c.end=_e,c.closestPointToPoint(j,!0,e).distanceTo(j)<=b||(c.start=$,c.end=st,c.closestPointToPoint(j,!0,e).distanceTo(j)<=b)||(c.start=_e,c.end=st,c.closestPointToPoint(j,!0,e).distanceTo(j)<=b))return!0;let rt=g.getPlane(a);if(Math.abs(rt.distanceToPoint(j))<=b){let ut=rt.projectPoint(j,o);if(g.containsPoint(ut))return!0}return!1}}(),F9=1e-15;function pd(e){return Math.abs(e)<F9}var zn=class extends Dr$1{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new _),this.satBounds=new Array(4).fill().map(()=>new Vn),this.points=[this.a,this.b,this.c],this.sphere=new Br,this.plane=new ii,this.needsUpdate=!0}intersectsSphere(e){return yO(e,this)}update(){let e=this.a,o=this.b,a=this.c,c=this.points,d=this.satAxes,g=this.satBounds,b=d[0],j=g[0];this.getNormal(b),j.setFromPoints(b,c);let $=d[1],_e=g[1];$.subVectors(e,o),_e.setFromPoints($,c);let st=d[2],rt=g[2];st.subVectors(o,a),rt.setFromPoints(st,c);let ut=d[3],gt=g[3];ut.subVectors(a,e),gt.setFromPoints(ut,c),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(b,e),this.needsUpdate=!1}};zn.prototype.closestPointToSegment=function(){let e=new _,o=new _,a=new Di;return function(c,d=null,g=null){let{start:b,end:j}=c,$=this.points,_e,st=1/0;for(let rt=0;rt<3;rt++){let ut=(rt+1)%3;a.start.copy($[rt]),a.end.copy($[ut]),um(a,c,e,o),_e=e.distanceToSquared(o),_e<st&&(st=_e,d&&d.copy(e),g&&g.copy(o))}return this.closestPointToPoint(b,e),_e=b.distanceToSquared(e),_e<st&&(st=_e,d&&d.copy(e),g&&g.copy(b)),this.closestPointToPoint(j,e),_e=j.distanceToSquared(e),_e<st&&(st=_e,d&&d.copy(e),g&&g.copy(j)),Math.sqrt(st)}}();zn.prototype.intersectsTriangle=function(){let e=new zn,o=new Array(3),a=new Array(3),c=new Vn,d=new Vn,g=new _,b=new _,j=new _,$=new _,_e=new Di,st=new Di,rt=new Di;return function(ut,gt=null,yt=!1){this.needsUpdate&&this.update(),ut.isExtendedTriangle?ut.needsUpdate&&ut.update():(e.copy(ut),e.update(),ut=e);let wt=this.plane,Ct=ut.plane;if(Math.abs(wt.normal.dot(Ct.normal))>1-1e-10){let Pt=this.satBounds,At=this.satAxes;a[0]=ut.a,a[1]=ut.b,a[2]=ut.c;for(let It=0;It<4;It++){let Lt=Pt[It],Ft=At[It];if(c.setFromPoints(Ft,a),Lt.isSeparated(c))return!1}let Tt=ut.satBounds,kt=ut.satAxes;o[0]=this.a,o[1]=this.b,o[2]=this.c;for(let It=0;It<4;It++){let Lt=Tt[It],Ft=kt[It];if(c.setFromPoints(Ft,o),Lt.isSeparated(c))return!1}for(let It=0;It<4;It++){let Lt=At[It];for(let Ft=0;Ft<4;Ft++){let Nt=kt[Ft];if(g.crossVectors(Lt,Nt),c.setFromPoints(g,o),d.setFromPoints(g,a),c.isSeparated(d))return!1}}return gt&&(yt||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),gt.start.set(0,0,0),gt.end.set(0,0,0)),!0}else{let Pt=this.points,At=!1,Tt=0;for(let hn=0;hn<3;hn++){let un=Pt[hn],bo=Pt[(hn+1)%3];_e.start.copy(un),_e.end.copy(bo),_e.delta(b);let _s=At?st.start:st.end,gn=pd(Ct.distanceToPoint(un));if(pd(Ct.normal.dot(b))&&gn){st.copy(_e),Tt=2;break}if((Ct.intersectLine(_e,_s)||gn)&&!pd(_s.distanceTo(bo))){if(Tt++,At)break;At=!0}}if(Tt===1&&ut.containsPoint(st.end))return gt&&(gt.start.copy(st.end),gt.end.copy(st.end)),!0;if(Tt!==2)return!1;let kt=ut.points,It=!1,Lt=0;for(let hn=0;hn<3;hn++){let un=kt[hn],bo=kt[(hn+1)%3];_e.start.copy(un),_e.end.copy(bo),_e.delta(j);let _s=It?rt.start:rt.end,gn=pd(wt.distanceToPoint(un));if(pd(wt.normal.dot(j))&&gn){rt.copy(_e),Lt=2;break}if((wt.intersectLine(_e,_s)||gn)&&!pd(_s.distanceTo(bo))){if(Lt++,It)break;It=!0}}if(Lt===1&&this.containsPoint(rt.end))return gt&&(gt.start.copy(rt.end),gt.end.copy(rt.end)),!0;if(Lt!==2)return!1;if(st.delta(b),rt.delta(j),b.dot(j)<0){let hn=rt.start;rt.start=rt.end,rt.end=hn}let Ft=st.start.dot(b),Nt=st.end.dot(b),Ht=rt.start.dot(b),dr=rt.end.dot(b),hs=Nt<Ht,us=Ft<dr;return Ft!==dr&&Ht!==Nt&&hs===us?!1:(gt&&($.subVectors(st.start,rt.start),$.dot(b)>0?gt.start.copy(st.start):gt.start.copy(rt.start),$.subVectors(st.end,rt.end),$.dot(b)<0?gt.end.copy(st.end):gt.end.copy(rt.end)),!0)}}}();zn.prototype.distanceToPoint=function(){let e=new _;return function(o){return this.closestPointToPoint(o,e),o.distanceTo(e)}}();zn.prototype.distanceToTriangle=function(){let e=new _,o=new _,a=["a","b","c"],c=new Di,d=new Di;return function(g,b=null,j=null){let $=b||j?c:null;if(this.intersectsTriangle(g,$))return(b||j)&&(b&&$.getCenter(b),j&&$.getCenter(j)),0;let _e=1/0;for(let st=0;st<3;st++){let rt,ut=a[st],gt=g[ut];this.closestPointToPoint(gt,e),rt=gt.distanceToSquared(e),rt<_e&&(_e=rt,b&&b.copy(e),j&&j.copy(gt));let yt=this[ut];g.closestPointToPoint(yt,e),rt=yt.distanceToSquared(e),rt<_e&&(_e=rt,b&&b.copy(yt),j&&j.copy(e))}for(let st=0;st<3;st++){let rt=a[st],ut=a[(st+1)%3];c.set(this[rt],this[ut]);for(let gt=0;gt<3;gt++){let yt=a[gt],wt=a[(gt+1)%3];d.set(g[yt],g[wt]),um(c,d,e,o);let Ct=e.distanceToSquared(o);Ct<_e&&(_e=Ct,b&&b.copy(e),j&&j.copy(o))}}return Math.sqrt(_e)}}();var Un=class{constructor(e,o,a){this.isOrientedBox=!0,this.min=new _,this.max=new _,this.matrix=new ce$1,this.invMatrix=new ce$1,this.points=new Array(8).fill().map(()=>new _),this.satAxes=new Array(3).fill().map(()=>new _),this.satBounds=new Array(3).fill().map(()=>new Vn),this.alignedSatBounds=new Array(3).fill().map(()=>new Vn),this.needsUpdate=!1,e&&this.min.copy(e),o&&this.max.copy(o),a&&this.matrix.copy(a)}set(e,o,a){this.min.copy(e),this.max.copy(o),this.matrix.copy(a),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Un.prototype.update=function(){return function(){let e=this.matrix,o=this.min,a=this.max,c=this.points;for(let $=0;$<=1;$++)for(let _e=0;_e<=1;_e++)for(let st=0;st<=1;st++){let rt=1*$|2*_e|4*st,ut=c[rt];ut.x=$?a.x:o.x,ut.y=_e?a.y:o.y,ut.z=st?a.z:o.z,ut.applyMatrix4(e)}let d=this.satBounds,g=this.satAxes,b=c[0];for(let $=0;$<3;$++){let _e=g[$],st=d[$],rt=1<<$,ut=c[rt];_e.subVectors(b,ut),st.setFromPoints(_e,c)}let j=this.alignedSatBounds;j[0].setFromPointsField(c,"x"),j[1].setFromPointsField(c,"y"),j[2].setFromPointsField(c,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Un.prototype.intersectsBox=function(){let e=new Vn;return function(o){this.needsUpdate&&this.update();let a=o.min,c=o.max,d=this.satBounds,g=this.satAxes,b=this.alignedSatBounds;if(e.min=a.x,e.max=c.x,b[0].isSeparated(e)||(e.min=a.y,e.max=c.y,b[1].isSeparated(e))||(e.min=a.z,e.max=c.z,b[2].isSeparated(e)))return!1;for(let j=0;j<3;j++){let $=g[j],_e=d[j];if(e.setFromBox($,o),_e.isSeparated(e))return!1}return!0}}();Un.prototype.intersectsTriangle=function(){let e=new zn,o=new Array(3),a=new Vn,c=new Vn,d=new _;return function(g){this.needsUpdate&&this.update(),g.isExtendedTriangle?g.needsUpdate&&g.update():(e.copy(g),e.update(),g=e);let b=this.satBounds,j=this.satAxes;o[0]=g.a,o[1]=g.b,o[2]=g.c;for(let rt=0;rt<3;rt++){let ut=b[rt],gt=j[rt];if(a.setFromPoints(gt,o),ut.isSeparated(a))return!1}let $=g.satBounds,_e=g.satAxes,st=this.points;for(let rt=0;rt<3;rt++){let ut=$[rt],gt=_e[rt];if(a.setFromPoints(gt,st),ut.isSeparated(a))return!1}for(let rt=0;rt<3;rt++){let ut=j[rt];for(let gt=0;gt<4;gt++){let yt=_e[gt];if(d.crossVectors(ut,yt),a.setFromPoints(d,o),c.setFromPoints(d,st),a.isSeparated(c))return!1}}return!0}}();Un.prototype.closestPointToPoint=function(){return function(e,o){return this.needsUpdate&&this.update(),o.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),o}}();Un.prototype.distanceToPoint=function(){let e=new _;return function(o){return this.closestPointToPoint(o,e),o.distanceTo(e)}}();Un.prototype.distanceToBox=function(){let e=["x","y","z"],o=new Array(12).fill().map(()=>new Di),a=new Array(12).fill().map(()=>new Di),c=new _,d=new _;return function(g,b=0,j=null,$=null){if(this.needsUpdate&&this.update(),this.intersectsBox(g))return(j||$)&&(g.getCenter(d),this.closestPointToPoint(d,c),g.closestPointToPoint(c,d),j&&j.copy(c),$&&$.copy(d)),0;let _e=b*b,st=g.min,rt=g.max,ut=this.points,gt=1/0;for(let wt=0;wt<8;wt++){let Ct=ut[wt];d.copy(Ct).clamp(st,rt);let Pt=Ct.distanceToSquared(d);if(Pt<gt&&(gt=Pt,j&&j.copy(Ct),$&&$.copy(d),Pt<_e))return Math.sqrt(Pt)}let yt=0;for(let wt=0;wt<3;wt++)for(let Ct=0;Ct<=1;Ct++)for(let Pt=0;Pt<=1;Pt++){let At=(wt+1)%3,Tt=(wt+2)%3,kt=Ct<<At|Pt<<Tt,It=1<<wt|Ct<<At|Pt<<Tt,Lt=ut[kt],Ft=ut[It];o[yt].set(Lt,Ft);let Nt=e[wt],Ht=e[At],dr=e[Tt],hs=a[yt],us=hs.start,hn=hs.end;us[Nt]=st[Nt],us[Ht]=Ct?st[Ht]:rt[Ht],us[dr]=Pt?st[dr]:rt[Ht],hn[Nt]=rt[Nt],hn[Ht]=Ct?st[Ht]:rt[Ht],hn[dr]=Pt?st[dr]:rt[Ht],yt++}for(let wt=0;wt<=1;wt++)for(let Ct=0;Ct<=1;Ct++)for(let Pt=0;Pt<=1;Pt++){d.x=wt?rt.x:st.x,d.y=Ct?rt.y:st.y,d.z=Pt?rt.z:st.z,this.closestPointToPoint(d,c);let At=d.distanceToSquared(c);if(At<gt&&(gt=At,j&&j.copy(c),$&&$.copy(d),At<_e))return Math.sqrt(At)}for(let wt=0;wt<12;wt++){let Ct=o[wt];for(let Pt=0;Pt<12;Pt++){let At=a[Pt];um(Ct,At,c,d);let Tt=c.distanceToSquared(d);if(Tt<gt&&(gt=Tt,j&&j.copy(c),$&&$.copy(d),Tt<_e))return Math.sqrt(Tt)}}return Math.sqrt(gt)}}();var md=new _,gd=new _,yd=new _,y0=new z$2,v0=new z$2,x0=new z$2,vO=new _,xO=new _,bO=new _,b0$1=new _;function k9(e,o,a,c,d,g){let b;return g===yi?b=e.intersectTriangle(c,a,o,!0,d):b=e.intersectTriangle(o,a,c,g!==tn,d),b===null?null:{distance:e.origin.distanceTo(d),point:d.clone()}}function V9(e,o,a,c,d,g,b,j,$){md.fromBufferAttribute(o,g),gd.fromBufferAttribute(o,b),yd.fromBufferAttribute(o,j);let _e=k9(e,md,gd,yd,b0$1,$);if(_e){c&&(y0.fromBufferAttribute(c,g),v0.fromBufferAttribute(c,b),x0.fromBufferAttribute(c,j),_e.uv=Dr$1.getInterpolation(b0$1,md,gd,yd,y0,v0,x0,new z$2)),d&&(y0.fromBufferAttribute(d,g),v0.fromBufferAttribute(d,b),x0.fromBufferAttribute(d,j),_e.uv1=Dr$1.getInterpolation(b0$1,md,gd,yd,y0,v0,x0,new z$2)),a&&(vO.fromBufferAttribute(a,g),xO.fromBufferAttribute(a,b),bO.fromBufferAttribute(a,j),_e.normal=Dr$1.getInterpolation(b0$1,md,gd,yd,vO,xO,bO,new _),_e.normal.dot(e.direction)>0&&_e.normal.multiplyScalar(-1));let st={a:g,b,c:j,normal:new _,materialIndex:0};Dr$1.getNormal(md,gd,yd,st.normal),_e.face=st,_e.faceIndex=g}return _e}function Q1(e,o,a,c,d){let g=c*3,b=e.index.getX(g),j=e.index.getX(g+1),$=e.index.getX(g+2),{position:_e,normal:st,uv:rt,uv1:ut}=e.attributes,gt=V9(a,_e,st,rt,ut,b,j,$,o);return gt?(gt.faceIndex=c,d&&d.push(gt),gt):null}function SO(e,o,a,c,d,g){for(let b=c,j=c+d;b<j;b++)Q1(e,o,a,b,g)}function wO(e,o,a,c,d){let g=1/0,b=null;for(let j=c,$=c+d;j<$;j++){let _e=Q1(e,o,a,j);_e&&_e.distance<g&&(b=_e,g=_e.distance)}return b}function Ts(e,o,a,c){let d=e.a,g=e.b,b=e.c,j=o,$=o+1,_e=o+2;a&&(j=a.getX(o),$=a.getX(o+1),_e=a.getX(o+2)),d.x=c.getX(j),d.y=c.getY(j),d.z=c.getZ(j),g.x=c.getX($),g.y=c.getY($),g.z=c.getZ($),b.x=c.getX(_e),b.y=c.getY(_e),b.z=c.getZ(_e)}function K1(e,o,a,c,d,g,b){let j=a.index,$=a.attributes.position;for(let _e=e,st=o+e;_e<st;_e++)if(Ts(b,_e*3,j,$),b.needsUpdate=!0,c(b,_e,d,g))return!0;return!1}var vd=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function ka(e,o){return o[e+15]===65535}function Uc(e,o){return o[e+6]}function xd(e,o){return o[e+14]}function bd(e){return e+8}function Sd(e,o){return o[e+6]}function AO(e,o){return o[e+7]}var wd=new Wt,w0=new _,U9=["x","y","z"];function A0(e,o,a,c,d){let g=e*2,b=Ad,j=kl,$=Vl;if(ka(g,j)){let _e=Uc(e,$),st=xd(g,j);SO(o,a,c,_e,st,d)}else{let _e=bd(e);E0(_e,b,c,w0)&&A0(_e,o,a,c,d);let st=Sd(e,$);E0(st,b,c,w0)&&A0(st,o,a,c,d)}}function _0(e,o,a,c){let d=e*2,g=Ad,b=kl,j=Vl;if(ka(d,b)){let $=Uc(e,j),_e=xd(d,b);return wO(o,a,c,$,_e)}else{let $=AO(e,j),_e=U9[$],st=c.direction[_e]>=0,rt,ut;st?(rt=bd(e),ut=Sd(e,j)):(rt=Sd(e,j),ut=bd(e));let gt=E0(rt,g,c,w0)?_0(rt,o,a,c):null;if(gt){let wt=gt.point[_e];if(st?wt<=g[ut+$]:wt>=g[ut+$+3])return gt}let yt=E0(ut,g,c,w0)?_0(ut,o,a,c):null;return gt&&yt?gt.distance<=yt.distance?gt:yt:gt||yt||null}}var _O=function(){let e,o,a=[],c=new vd(()=>new Wt);return function(...g){e=c.getPrimitive(),o=c.getPrimitive(),a.push(e,o);let b=d(...g);c.releasePrimitive(e),c.releasePrimitive(o),a.pop(),a.pop();let j=a.length;return j>0&&(o=a[j-1],e=a[j-2]),b};function d(g,b,j,$,_e=null,st=0,rt=0){function ut(At){let Tt=At*2,kt=kl,It=Vl;for(;!ka(Tt,kt);)At=bd(At),Tt=At*2;return Uc(At,It)}function gt(At){let Tt=At*2,kt=kl,It=Vl;for(;!ka(Tt,kt);)At=Sd(At,It),Tt=At*2;return Uc(At,It)+xd(Tt,kt)}let yt=g*2,wt=Ad,Ct=kl,Pt=Vl;if(ka(yt,Ct)){let At=Uc(g,Pt),Tt=xd(yt,Ct);return Es(g,wt,e),$(At,Tt,!1,rt,st+g,e)}else{let At=bd(g),Tt=Sd(g,Pt),kt=At,It=Tt,Lt,Ft,Nt,Ht;if(_e&&(Nt=e,Ht=o,Es(kt,wt,Nt),Es(It,wt,Ht),Lt=_e(Nt),Ft=_e(Ht),Ft<Lt)){kt=Tt,It=At;let _s=Lt;Lt=Ft,Ft=_s,Nt=Ht}Nt||(Nt=e,Es(kt,wt,Nt));let dr=ka(kt*2,Ct),hs=j(Nt,dr,Lt,rt+1,st+kt),us;if(hs===2){let _s=ut(kt),gn=gt(kt)-_s;us=$(_s,gn,!0,rt+1,st+kt,Nt)}else us=hs&&d(kt,b,j,$,_e,st,rt+1);if(us)return!0;Ht=o,Es(It,wt,Ht);let hn=ka(It*2,Ct),un=j(Ht,hn,Ft,rt+1,st+It),bo;if(un===2){let _s=ut(It),gn=gt(It)-_s;bo=$(_s,gn,!0,rt+1,st+It,Ht)}else bo=un&&d(It,b,j,$,_e,st,rt+1);return!!bo}}}(),EO=function(){let e=new zn,o=new zn,a=new ce$1,c=new Un,d=new Un;return function g(b,j,$,_e,st=null){let rt=b*2,ut=Ad,gt=kl,yt=Vl;if(st===null&&($.boundingBox||$.computeBoundingBox(),c.set($.boundingBox.min,$.boundingBox.max,_e),st=c),ka(rt,gt)){let wt=j,Ct=wt.index,Pt=wt.attributes.position,At=$.index,Tt=$.attributes.position,kt=Uc(b,yt),It=xd(rt,gt);if(a.copy(_e).invert(),$.boundsTree)return Es(b,ut,d),d.matrix.copy(a),d.needsUpdate=!0,$.boundsTree.shapecast({intersectsBounds:Lt=>d.intersectsBox(Lt),intersectsTriangle:Lt=>{Lt.a.applyMatrix4(_e),Lt.b.applyMatrix4(_e),Lt.c.applyMatrix4(_e),Lt.needsUpdate=!0;for(let Ft=kt*3,Nt=(It+kt)*3;Ft<Nt;Ft+=3)if(Ts(o,Ft,Ct,Pt),o.needsUpdate=!0,Lt.intersectsTriangle(o))return!0;return!1}});for(let Lt=kt*3,Ft=It+kt*3;Lt<Ft;Lt+=3){Ts(e,Lt,Ct,Pt),e.a.applyMatrix4(a),e.b.applyMatrix4(a),e.c.applyMatrix4(a),e.needsUpdate=!0;for(let Nt=0,Ht=At.count;Nt<Ht;Nt+=3)if(Ts(o,Nt,At,Tt),o.needsUpdate=!0,e.intersectsTriangle(o))return!0}}else{let wt=b+8,Ct=yt[b+6];return Es(wt,ut,wd),!!(st.intersectsBox(wd)&&g(wt,j,$,_e,st)||(Es(Ct,ut,wd),st.intersectsBox(wd)&&g(Ct,j,$,_e,st)))}}}();function E0(e,o,a,c){return Es(e,o,wd),a.intersectBox(wd,c)}var Z1=[],S0,Ad,kl,Vl;function _d(e){S0&&Z1.push(S0),S0=e,Ad=new Float32Array(e),kl=new Uint16Array(e),Vl=new Uint32Array(e)}function hm(){S0=null,Ad=null,kl=null,Vl=null,Z1.length&&_d(Z1.pop())}var J1=Symbol("skip tree generation"),$1=new Wt,eA=new Wt,Ed=new ce$1,Gc=new Un,dm=new Un,fm=new _,T0=new _,G9=new _,j9=new _,H9=new _,TO=new Wt,ko=new vd(()=>new zn),Vo=class{static serialize(e,o={}){if(o.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Vo.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});o={cloneBuffers:!0,...o};let a=e.geometry,c=e._roots,d=a.getIndex(),g;return o.cloneBuffers?g={roots:c.map(b=>b.slice()),index:d.array.slice()}:g={roots:c,index:d.array},g}static deserialize(e,o,a={}){if(typeof a=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Vo.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});a={setIndex:!0,...a};let{index:c,roots:d}=e,g=new Vo(o,{...a,[J1]:!0});if(g._roots=d,a.setIndex){let b=o.getIndex();if(b===null){let j=new Xe(e.index,1,!1);o.setIndex(j)}else b.array!==c&&(b.array.set(c),b.needsUpdate=!0)}return g}constructor(e,o={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(o=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[J1]:!1},o),o.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,o[J1]||(this._roots=gO(e,o),!e.boundingBox&&o.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Wt))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let o=this.geometry,a=o.index.array,c=o.attributes.position,d,g,b,j,$=0,_e=this._roots;for(let rt=0,ut=_e.length;rt<ut;rt++)d=_e[rt],g=new Uint32Array(d),b=new Uint16Array(d),j=new Float32Array(d),st(0,$),$+=d.byteLength;function st(rt,ut,gt=!1){let yt=rt*2;if(b[yt+15]===65535){let wt=g[rt+6],Ct=b[yt+14],Pt=1/0,At=1/0,Tt=1/0,kt=-1/0,It=-1/0,Lt=-1/0;for(let Ft=3*wt,Nt=3*(wt+Ct);Ft<Nt;Ft++){let Ht=a[Ft],dr=c.getX(Ht),hs=c.getY(Ht),us=c.getZ(Ht);dr<Pt&&(Pt=dr),dr>kt&&(kt=dr),hs<At&&(At=hs),hs>It&&(It=hs),us<Tt&&(Tt=us),us>Lt&&(Lt=us)}return j[rt+0]!==Pt||j[rt+1]!==At||j[rt+2]!==Tt||j[rt+3]!==kt||j[rt+4]!==It||j[rt+5]!==Lt?(j[rt+0]=Pt,j[rt+1]=At,j[rt+2]=Tt,j[rt+3]=kt,j[rt+4]=It,j[rt+5]=Lt,!0):!1}else{let wt=rt+8,Ct=g[rt+6],Pt=wt+ut,At=Ct+ut,Tt=gt,kt=!1,It=!1;e?Tt||(kt=e.has(Pt),It=e.has(At),Tt=!kt&&!It):(kt=!0,It=!0);let Lt=Tt||kt,Ft=Tt||It,Nt=!1;Lt&&(Nt=st(wt,ut,Tt));let Ht=!1;Ft&&(Ht=st(Ct,ut,Tt));let dr=Nt||Ht;if(dr)for(let hs=0;hs<3;hs++){let us=wt+hs,hn=Ct+hs,un=j[us],bo=j[us+3],_s=j[hn],gn=j[hn+3];j[rt+hs]=un<_s?un:_s,j[rt+hs+3]=bo>gn?bo:gn}return dr}}}traverse(e,o=0){let a=this._roots[o],c=new Uint32Array(a),d=new Uint16Array(a);g(0);function g(b,j=0){let $=b*2,_e=d[$+15]===65535;if(_e){let st=c[b+6],rt=d[$+14];e(j,_e,new Float32Array(a,b*4,6),st,rt)}else{let st=b+8,rt=c[b+6],ut=c[b+7];e(j,_e,new Float32Array(a,b*4,6),ut)||(g(st,j+1),g(rt,j+1))}}}raycast(e,o=es){let a=this._roots,c=this.geometry,d=[],g=o.isMaterial,b=Array.isArray(o),j=c.groups,$=g?o.side:o;for(let _e=0,st=a.length;_e<st;_e++){let rt=b?o[j[_e].materialIndex].side:$,ut=d.length;if(_d(a[_e]),A0(0,c,rt,e,d),hm(),b){let gt=j[_e].materialIndex;for(let yt=ut,wt=d.length;yt<wt;yt++)d[yt].face.materialIndex=gt}}return d}raycastFirst(e,o=es){let a=this._roots,c=this.geometry,d=o.isMaterial,g=Array.isArray(o),b=null,j=c.groups,$=d?o.side:o;for(let _e=0,st=a.length;_e<st;_e++){let rt=g?o[j[_e].materialIndex].side:$;_d(a[_e]);let ut=_0(0,c,rt,e);hm(),ut!=null&&(b==null||ut.distance<b.distance)&&(b=ut,g&&(ut.face.materialIndex=j[_e].materialIndex))}return b}intersectsGeometry(e,o){let a=this.geometry,c=!1;for(let d of this._roots)if(_d(d),c=EO(0,a,e,o),hm(),c)break;return c}shapecast(e,o,a){let c=this.geometry;if(e instanceof Function){if(o){let rt=o;o=(ut,gt,yt,wt)=>{let Ct=gt*3;return rt(ut,Ct,Ct+1,Ct+2,yt,wt)}}e={boundsTraverseOrder:a,intersectsBounds:e,intersectsTriangle:o,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let d=ko.getPrimitive(),{boundsTraverseOrder:g,intersectsBounds:b,intersectsRange:j,intersectsTriangle:$}=e;if(j&&$){let rt=j;j=(ut,gt,yt,wt,Ct)=>rt(ut,gt,yt,wt,Ct)?!0:K1(ut,gt,c,$,yt,wt,d)}else j||($?j=(rt,ut,gt,yt)=>K1(rt,ut,c,$,gt,yt,d):j=(rt,ut,gt)=>gt);let _e=!1,st=0;for(let rt of this._roots){if(_d(rt),_e=_O(0,c,b,j,g,st),hm(),_e)break;st+=rt.byteLength}return ko.releasePrimitive(d),_e}bvhcast(e,o,a){let{intersectsRanges:c,intersectsTriangles:d}=a,g=this.geometry.index,b=this.geometry.attributes.position,j=e.geometry.index,$=e.geometry.attributes.position;Ed.copy(o).invert();let _e=ko.getPrimitive(),st=ko.getPrimitive();if(d){let ut=function(gt,yt,wt,Ct,Pt,At,Tt,kt){for(let It=wt,Lt=wt+Ct;It<Lt;It++){Ts(st,It*3,j,$),st.a.applyMatrix4(o),st.b.applyMatrix4(o),st.c.applyMatrix4(o),st.needsUpdate=!0;for(let Ft=gt,Nt=gt+yt;Ft<Nt;Ft++)if(Ts(_e,Ft*3,g,b),_e.needsUpdate=!0,d(_e,st,Ft,It,Pt,At,Tt,kt))return!0}return!1};if(c){let gt=c;c=function(yt,wt,Ct,Pt,At,Tt,kt,It){return gt(yt,wt,Ct,Pt,At,Tt,kt,It)?!0:ut(yt,wt,Ct,Pt,At,Tt,kt,It)}}else c=ut}e.getBoundingBox(eA),eA.applyMatrix4(o);let rt=this.shapecast({intersectsBounds:ut=>eA.intersectsBox(ut),intersectsRange:(ut,gt,yt,wt,Ct,Pt)=>($1.copy(Pt),$1.applyMatrix4(Ed),e.shapecast({intersectsBounds:At=>$1.intersectsBox(At),intersectsRange:(At,Tt,kt,It,Lt)=>c(ut,gt,At,Tt,wt,Ct,It,Lt)}))});return ko.releasePrimitive(_e),ko.releasePrimitive(st),rt}intersectsBox(e,o){return Gc.set(e.min,e.max,o),Gc.needsUpdate=!0,this.shapecast({intersectsBounds:a=>Gc.intersectsBox(a),intersectsTriangle:a=>Gc.intersectsTriangle(a)})}intersectsSphere(e){return this.shapecast({intersectsBounds:o=>e.intersectsBox(o),intersectsTriangle:o=>o.intersectsSphere(e)})}closestPointToGeometry(e,o,a={},c={},d=0,g=1/0){e.boundingBox||e.computeBoundingBox(),Gc.set(e.boundingBox.min,e.boundingBox.max,o),Gc.needsUpdate=!0;let b=this.geometry,j=b.attributes.position,$=b.index,_e=e.attributes.position,st=e.index,rt=ko.getPrimitive(),ut=ko.getPrimitive(),gt=T0,yt=G9,wt=null,Ct=null;c&&(wt=j9,Ct=H9);let Pt=1/0,At=null,Tt=null;return Ed.copy(o).invert(),dm.matrix.copy(Ed),this.shapecast({boundsTraverseOrder:kt=>Gc.distanceToBox(kt),intersectsBounds:(kt,It,Lt)=>Lt<Pt&&Lt<g?(It&&(dm.min.copy(kt.min),dm.max.copy(kt.max),dm.needsUpdate=!0),!0):!1,intersectsRange:(kt,It)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:Lt=>dm.distanceToBox(Lt),intersectsBounds:(Lt,Ft,Nt)=>Nt<Pt&&Nt<g,intersectsRange:(Lt,Ft)=>{for(let Nt=Lt*3,Ht=(Lt+Ft)*3;Nt<Ht;Nt+=3){Ts(ut,Nt,st,_e),ut.a.applyMatrix4(o),ut.b.applyMatrix4(o),ut.c.applyMatrix4(o),ut.needsUpdate=!0;for(let dr=kt*3,hs=(kt+It)*3;dr<hs;dr+=3){Ts(rt,dr,$,j),rt.needsUpdate=!0;let us=rt.distanceToTriangle(ut,gt,wt);if(us<Pt&&(yt.copy(gt),Ct&&Ct.copy(wt),Pt=us,At=dr/3,Tt=Nt/3),us<d)return!0}}}});{let Lt=st?st.count:_e.count;for(let Ft=0,Nt=Lt;Ft<Nt;Ft+=3){Ts(ut,Ft,st,_e),ut.a.applyMatrix4(o),ut.b.applyMatrix4(o),ut.c.applyMatrix4(o),ut.needsUpdate=!0;for(let Ht=kt*3,dr=(kt+It)*3;Ht<dr;Ht+=3){Ts(rt,Ht,$,j),rt.needsUpdate=!0;let hs=rt.distanceToTriangle(ut,gt,wt);if(hs<Pt&&(yt.copy(gt),Ct&&Ct.copy(wt),Pt=hs,At=Ht/3,Tt=Ft/3),hs<d)return!0}}}}}),ko.releasePrimitive(rt),ko.releasePrimitive(ut),Pt===1/0?null:(a.point?a.point.copy(yt):a.point=yt.clone(),a.distance=Pt,a.faceIndex=At,c&&(c.point?c.point.copy(Ct):c.point=Ct.clone(),c.point.applyMatrix4(Ed),yt.applyMatrix4(Ed),c.distance=yt.sub(c.point).length(),c.faceIndex=Tt),a)}closestPointToPoint(e,o={},a=0,c=1/0){let d=a*a,g=c*c,b=1/0,j=null;if(this.shapecast({boundsTraverseOrder:_e=>(fm.copy(e).clamp(_e.min,_e.max),fm.distanceToSquared(e)),intersectsBounds:(_e,st,rt)=>rt<b&&rt<g,intersectsTriangle:(_e,st)=>{_e.closestPointToPoint(e,fm);let rt=e.distanceToSquared(fm);return rt<b&&(T0.copy(fm),b=rt,j=st),rt<d}}),b===1/0)return null;let $=Math.sqrt(b);return o.point?o.point.copy(T0):o.point=T0.clone(),o.distance=$,o.faceIndex=j,o}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(o=>{Es(0,new Float32Array(o),TO),e.union(TO)}),e}},vf=pi(CO()),W9=.5*(Math.sqrt(3)-1),pm=(3-Math.sqrt(3))/6,q9=1/3,zo=1/6,mm=e=>Math.floor(e)|0,PO=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),rA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function M0(e=Math.random){let o=OO(e),a=new Float64Array(o).map(d=>PO[d%12*2]),c=new Float64Array(o).map(d=>PO[d%12*2+1]);return function(d,g){let b=0,j=0,$=0,_e=(d+g)*W9,st=mm(d+_e),rt=mm(g+_e),ut=(st+rt)*pm,gt=st-ut,yt=rt-ut,wt=d-gt,Ct=g-yt,Pt,At;wt>Ct?(Pt=1,At=0):(Pt=0,At=1);let Tt=wt-Pt+pm,kt=Ct-At+pm,It=wt-1+2*pm,Lt=Ct-1+2*pm,Ft=st&255,Nt=rt&255,Ht=.5-wt*wt-Ct*Ct;if(Ht>=0){let us=Ft+o[Nt],hn=a[us],un=c[us];Ht*=Ht,b=Ht*Ht*(hn*wt+un*Ct)}let dr=.5-Tt*Tt-kt*kt;if(dr>=0){let us=Ft+Pt+o[Nt+At],hn=a[us],un=c[us];dr*=dr,j=dr*dr*(hn*Tt+un*kt)}let hs=.5-It*It-Lt*Lt;if(hs>=0){let us=Ft+1+o[Nt+1],hn=a[us],un=c[us];hs*=hs,$=hs*hs*(hn*It+un*Lt)}return 70*(b+j+$)}}function DO(e=Math.random){let o=OO(e),a=new Float64Array(o).map(g=>rA[g%12*3]),c=new Float64Array(o).map(g=>rA[g%12*3+1]),d=new Float64Array(o).map(g=>rA[g%12*3+2]);return function(g,b,j){let $,_e,st,rt,ut=(g+b+j)*q9,gt=mm(g+ut),yt=mm(b+ut),wt=mm(j+ut),Ct=(gt+yt+wt)*zo,Pt=gt-Ct,At=yt-Ct,Tt=wt-Ct,kt=g-Pt,It=b-At,Lt=j-Tt,Ft,Nt,Ht,dr,hs,us;kt>=It?It>=Lt?(Ft=1,Nt=0,Ht=0,dr=1,hs=1,us=0):kt>=Lt?(Ft=1,Nt=0,Ht=0,dr=1,hs=0,us=1):(Ft=0,Nt=0,Ht=1,dr=1,hs=0,us=1):It<Lt?(Ft=0,Nt=0,Ht=1,dr=0,hs=1,us=1):kt<Lt?(Ft=0,Nt=1,Ht=0,dr=0,hs=1,us=1):(Ft=0,Nt=1,Ht=0,dr=1,hs=1,us=0);let hn=kt-Ft+zo,un=It-Nt+zo,bo=Lt-Ht+zo,_s=kt-dr+2*zo,gn=It-hs+2*zo,Gr=Lt-us+2*zo,ds=kt-1+3*zo,Zn=It-1+3*zo,Nn=Lt-1+3*zo,Qn=gt&255,bu=yt&255,ou=wt&255,g0=.6-kt*kt-It*It-Lt*Lt;if(g0<0)$=0;else{let a1=Qn+o[bu+o[ou]];g0*=g0,$=g0*g0*(a[a1]*kt+c[a1]*It+d[a1]*Lt)}let Su=.6-hn*hn-un*un-bo*bo;if(Su<0)_e=0;else{let a1=Qn+Ft+o[bu+Nt+o[ou+Ht]];Su*=Su,_e=Su*Su*(a[a1]*hn+c[a1]*un+d[a1]*bo)}let l1=.6-_s*_s-gn*gn-Gr*Gr;if(l1<0)st=0;else{let a1=Qn+dr+o[bu+hs+o[ou+us]];l1*=l1,st=l1*l1*(a[a1]*_s+c[a1]*gn+d[a1]*Gr)}let B0=.6-ds*ds-Zn*Zn-Nn*Nn;if(B0<0)rt=0;else{let a1=Qn+1+o[bu+1+o[ou+1]];B0*=B0,rt=B0*B0*(a[a1]*ds+c[a1]*Zn+d[a1]*Nn)}return 32*($+_e+st+rt)}}function OO(e){let o=new Uint8Array(512);for(let a=0;a<512/2;a++)o[a]=a;for(let a=0;a<512/2-1;a++){let c=a+~~(e()*(256-a)),d=o[a];o[a]=o[c],o[c]=d}for(let a=256;a<512;a++)o[a]=o[a-256];return o}var $s=new Dr$1,C0=class{constructor(e){this.weightAttribute=null;let o=e.geometry;if(!o.isBufferGeometry||o.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");o.index&&(o=o.toNonIndexed()),this.geometry=o,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,o=new Float32Array(e.count/3);for(let c=0;c<e.count;c+=3){let d=1;$s.a.fromBufferAttribute(e,c),$s.b.fromBufferAttribute(e,c+1),$s.c.fromBufferAttribute(e,c+2),d*=$s.getArea(),o[c/3]=d}this.distribution=new Float32Array(e.count/3);let a=0;for(let c=0;c<o.length;c++)a+=o[c],this.distribution[c]=a;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,o){if(this.distribution){let a=this.distribution[this.distribution.length-1],c=this.binarySearch(this.randomFunction()*a);return this.sampleFace(c,e,o)}}binarySearch(e){if(!this.distribution)return 0;let o=this.distribution,a=0,c=o.length-1,d=-1;for(;a<=c;){let g=Math.ceil((a+c)/2);if(g===0||o[g-1]<=e&&o[g]>e){d=g;break}else e<o[g]?c=g-1:a=g+1}return d}sampleFace(e,o,a){let c=this.randomFunction(),d=this.randomFunction();return c+d>1&&(c=1-c,d=1-d),$s.a.fromBufferAttribute(this.positionAttribute,e*3),$s.b.fromBufferAttribute(this.positionAttribute,e*3+1),$s.c.fromBufferAttribute(this.positionAttribute,e*3+2),o.set(0,0,0).addScaledVector($s.a,c).addScaledVector($s.b,d).addScaledVector($s.c,1-(c+d)),$s.getNormal(a),this}},RO=pi(iA()),Y9=new ce$1,X9=new ce$1,Q9=new ce$1,Td;(e=>{function o(a){return a&&a.__isSPEObject}e.is=o})(Td||(Td={}));var Md=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new ce$1,this.copyPreviousMatrix=!0,this.hiddenMatrix=new ce$1,this.matrixWorldRigid=new ce$1,this.shearScale=new ce$1,this.shearScaleInv=new ce$1}get __isSPEObject(){return!0}isDescendantOf(o){o instanceof _t&&(o=o.uuid);let a=this;for(;a.parent;){if(a.parent.uuid===o)return!0;a=a.parent}return!1}updateMatrixWorld(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,o=!0);for(let a of this.children)a.updateMatrixWorld(o)}updateWorldMatrix(o,a){let c=this.parent;if(o&&c!==null&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),a)for(let d of this.children)d.updateWorldMatrix(!1,!0)}traverseChildren(o,a=0){for(let c of this.children)Td.is(c)&&c.traverseObject(o,a+1)}traverseObject(o,a=0){if(o(this,a)!==!0)for(let c of this.children)Td.is(c)&&c.traverseObject(o,a+1)}updateMatrixWorldSVD(){let o=this.matrixWorld.elements,a=[[o[0],o[4],o[8]],[o[1],o[5],o[9]],[o[2],o[6],o[10]]],{u:c,v:d,q:g}=(0,RO.SVD)(a),b=Y9.set(c[0][0],c[0][1],c[0][2],0,c[1][0],c[1][1],c[1][2],0,c[2][0],c[2][1],c[2][2],0,0,0,0,1),j=X9.set(d[0][0],d[0][1],d[0][2],0,d[1][0],d[1][1],d[1][2],0,d[2][0],d[2][1],d[2][2],0,0,0,0,1),$=Q9.copy(j).transpose();this.shearScale.makeScale(g[0],g[1],g[2]).multiply($).premultiply(j),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(b,$).copyPosition(this.matrixWorld),g.every(_e=>Math.abs(g[0]-_e)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(o,a){this.updateWorldMatrix(!0,!1);let c=new ce$1().copy(this.matrixWorld).invert();return o.parent!==null&&(o.parent.updateWorldMatrix(!0,!1),c.multiply(o.parent.matrixWorld)),"hiddenMatrix"in o&&o.hiddenMatrix instanceof ce$1?o.hiddenMatrix.premultiply(c):o.applyMatrix4(c),o.updateWorldMatrix(!1,!1),this.add(o),a!==void 0&&(this.children.pop(),this.children.splice(a,0,o)),this}copy(o,a=!1){return super.copy(o,a),this.hasNonUniformScale=o.hasNonUniformScale,this}onAfterRender(o,a,c,d,g,b){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},nA=class extends Md(_t){},K9=e=>e.type==="Mesh",Vr=class extends nA{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,o){}expand(){let e=0,o=this.object.entityChildren(e);for(;o;){let a=this.children[e];(a==null?void 0:a.object)!==o&&(a&&this.remove(a),a=new Vr(o),this.add(a),this.children.splice(e,0,this.children.pop()),a.matrixWorldNeedsUpdate=!0,a.matrixAutoUpdate=!1,a.matrix=o.matrix,a.hiddenMatrix=o.hiddenMatrix),a.expand(),e+=1,o=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return K9(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},jc=new _,Hc=new _,Cd=new ce$1,BO=[new _(-1,1,1),new _(-1,-1,1),new _(1,-1,1),new _(1,1,1),new _(-1,1,-1),new _(-1,-1,-1),new _(1,-1,-1),new _(1,1,-1)],Z9=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],J9=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],LO=(e,o,a)=>{e.updateEntityBoxSize(jc,Hc),Cd.copy(o).multiply(e.matrixWorld),Hc.x===0&&Hc.y===0&&Hc.z===0?a.push(new _(jc.x,jc.y,jc.z).applyMatrix4(Cd)):BO.forEach(c=>{a.push(c.clone().multiply(Hc).add(jc).applyMatrix4(Cd))})},gm=class extends Wt{constructor(){super(...arguments),this.matrix=new ce$1,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(o=>o.clone()),this.faces=e.faces.map(o=>o.clone()),this.edges=e.edges.map(o=>o.clone()),this.centerEdges=e.centerEdges.map(o=>o.clone()),this}setFromObjectSize(e,o=!1){e.updateWorldMatrix(!1,o),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let a=new ce$1().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,a,o)}expandByObjectSize(e,o,a=!1){let c=[];return a===!0?e.traverseEntity(d=>{if(d.visible||d.cloner&&d.data.visible){if(!("geometry"in d)){c.push(new _);return}LO(d,o,c)}}):LO(e,o,c),this.setFromPoints(c)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Cd.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Hc).multiplyScalar(.5),this.getCenter(jc),Cd.copy(this.matrix).setPosition(jc),this.vertices=BO.map(e=>e.clone().multiply(Hc).applyMatrix4(Cd))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Z9.map(([e,o])=>new Di(this.vertices[e],this.vertices[o])),this.centerEdges=this.edges.map(e=>e.getCenter(new _))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=J9.map(([e,o])=>this.vertices[e].clone().add(this.vertices[o]).multiplyScalar(.5))}},eo={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},oA=class extends Dp{constructor(){super()}getPoints(e=12){let o=[],a,c=this.getCurveLengths(),d=c[c.length-1]/c.length;for(let g=0,b=this.curves;g<b.length;g++){let j=b[g],$=g===0?c[g]:c[g]-c[g-1],_e=Math.ceil(e*$/d),st=j.getPoints(_e);for(let rt=0;rt<st.length;rt++){let ut=st[rt];a&&a.equals(ut)||(o.push(ut),a=ut)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}},aA=.001;function lA(e,o,a){return o.clone().sub(e).cross(o.clone().sub(a)).length()<=aA}function sA(e,o){let a=new _(...e.position),c=new _(...e.controlNext.position),d=new _(...o.controlPrevious.position),g=new _(...o.position);return lA(a,c,g)&&lA(a,d,g)}function D0(e){let o=e.points.map(st=>new _(...st.data.position)),a=[e.points[0]],c=new _(...a[0].data.position);for(let st=0;st<e.points.length-1;st++)lA(c,o[st],o[st+1])||(a.push(e.points[st]),c=o[st]);a.push(e.points[e.points.length-1]);let d=e.isClosed,g=a.length-(d?0:1),b=a.length,j=[];for(let st=0;st<b;st++){let rt=a[st].data,ut=new _(...rt.position),gt=new _(...rt.controlPrevious.position),yt=new _(...rt.controlNext.position),wt={position:ut,baseRoundness:rt.roundness,controlPrevious:gt,controlNext:yt};if(rt.roundness===0||!e.isClosed&&(st===0||st===b-1)){j[st]={...wt,removedLength:0};continue}let Ct=d&&st==0?b-1:st-1,Pt=d&&st==b-1?0:st+1,At=a[Ct].data,Tt=a[Pt].data,kt=new _(...At.position),It=new _(...Tt.position),Lt=kt.clone().sub(ut).normalize(),Ft=It.clone().sub(ut).normalize();Object.assign(wt,{prevDir:Lt,nextDir:Ft});let Nt=sA(At,rt),Ht=sA(rt,Tt);if(!Nt||!Ht)j[st]={...wt,removedLength:0};else{let dr=Lt.clone().add(Ft).normalize(),hs=dr.clone().cross(Lt).length()/Lt.dot(dr);j[st]={...wt,tan:hs,removedLength:rt.roundness/hs}}}for(let st=0;st<g;st++){let rt=st,ut=d&&st===b-1?0:st+1,gt=j[rt],yt=j[ut];if(gt.removedLength!==0||yt.removedLength!==0){let wt=gt.position.distanceTo(yt.position);gt.removedLength=Math.min(gt.removedLength,wt/2),yt.removedLength=Math.min(yt.removedLength,wt/2)}}let $=[];for(let st=0;st<g;st++){let rt=st,ut=d&&st===b-1?0:st+1,gt=j[rt],yt=j[ut],wt=null;if(!sA(a[rt].data,a[ut].data))gt.position.distanceTo(yt.position)>aA&&(wt=new Ec(gt.position,gt.controlNext,yt.controlPrevious,yt.position));else{let Ct=gt.position.clone(),Pt=yt.position.clone();(gt.removedLength!==0||yt.removedLength!==0)&&(gt.nextDir&&Ct.add(gt.nextDir.clone().setLength(gt.removedLength)),yt.prevDir&&Pt.add(yt.prevDir.clone().setLength(yt.removedLength))),Ct.distanceTo(Pt)>aA&&(wt=new Ec(Ct,Ct.clone().lerp(Pt,.3),Pt.clone().lerp(Ct,.3),Pt))}$[2*st+1]=wt}for(let st=0;st<b;st++){let rt=j[st];if(rt.removedLength===0){$[2*st]=null;continue}let ut=rt.position,gt=rt.prevDir.clone().multiplyScalar(rt.removedLength).add(ut),yt=rt.nextDir.clone().multiplyScalar(rt.removedLength).add(ut),wt=rt.tan*rt.removedLength,Ct=rt.prevDir.clone().add(rt.nextDir).normalize(),Pt=gt.clone().lerp(yt,.5),At=gt.distanceTo(yt)/2,Tt=Ct.clone().multiplyScalar(Math.sqrt(Math.pow(wt,2)-Math.pow(At,2))).add(Pt),kt=Ct.clone().multiplyScalar(-wt).add(Tt),It=ut.distanceTo(kt)/ut.distanceTo(Pt),Lt=rt.prevDir.clone().multiplyScalar(It*ut.distanceTo(gt)).add(ut),Ft=Lt.clone().lerp(kt,2),Nt=gt.clone().lerp(Lt,4/3),Ht=yt.clone().lerp(Ft,4/3);$[2*st]=new Ec(gt,Nt,Ht,yt)}let _e=new oA;return $.forEach(st=>{st&&_e.add(st)}),_e}var vt;(e=>{function o(a){return a&&a.__isEntity}e.is=o})(vt||(vt={}));var Uo=e=>vt.is(e),$9={type:"completeState",isfromEntity:!0},e7=["x","y","z"],cA=new _,t7=new _().set(0,1,0),Pd=e=>class extends Md(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new gm,this._recursiveBBox=new gm,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(o){let a=this.children[o];if(vt.is(a))return a}entityChildrenCount(){let o=this.children.length;for(;o--;)if(vt.is(this.children[o]))return o+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let o=this;for(;o.data.type!=="Instance";){let a=o.parent;if(vt.is(a))o=a;else return}return o}forInstancesRec(o){this.instances.forEach(a=>{a.disposed||o(a),a.forInstancesRec(o)})}super_Entity(o,a){typeof o=="string"&&(this.uuid=o),this.identity=o,this.data=a,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(o,a,c=!1){if(!(this.data.states.length===0&&!c)){for(let d of this.data.states)Pa.toOps(this.data,d.data).forEach(g=>{let b=Yh.replaceProps(g,this.data);this.dataPatched=this.data,this.updateByPatchedOp(b,this.data,a)});if(o!==null){let d=this.data.states.data(o);d&&(this.dataPatched=Pa.patch(this.data,d),Pa.toOps(this.data,d).forEach(g=>{this.updateByPatchedOp(g,this.dataPatched,a)}))}c&&this.updateTransformState(this.dataPatched,a),this.stateSelection=o,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(o,a){o.setScalar(0),a.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(o=>{Uo(o)&&o.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(o=>{o.resetBBoxNeedsUpdateSelf()})}find(o){let a;return this.traverseEntity(c=>{c.uuid===o&&(a=c)}),a}traverseSortNextHelper(){let o=this.parent;if(o){let a=o.children,c=a.indexOf(this)+1;if(vt.is(a[c]))return a[c];if(vt.is(o))return o.traverseSortNextHelper()}}sortNext(){let o=this.children;return this.children.length>0&&vt.is(this.children[0])?o[0]:this.traverseSortNextHelper()}goUp(o){let a=this;for(;o>0&&a!==null;)a=a.parent,o-=1;return a}hasAnccestorOrSelf(o){return this===o||this.hasAnccestor(o)}hasAnccestor(o){let a=this.parent;for(;a;){if(o===a)return!0;a=a.parent}return!1}countToAccestor(o){let a=0,c=this;for(;c!==o;){if(c===null)return-1;c=c.parent,a+=1}return a}forEachEntity(o){for(let a of this.children)Uo(a)&&o(a)}traverseEntityAncestors(o){this.traverseAncestors(a=>{vt.is(a)&&o(a)})}traverseConcreteEntity(o,a=0){if(o(this,a)!==!0)for(let c of this.children)Uo(c)&&c.isConcreteEntity&&c.traverseEntity(o,a+1)}traverseEntity(o,a=0){if(o(this,a)!==!0)for(let c of this.children)Uo(c)&&c.traverseEntity(o,a+1)}traverseVisibleEntity(o){o(this);for(let a of this.children)Uo(a)&&a.visible&&a.traverseVisibleEntity(o)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(o){super.updateMatrixWorld(o),this.dispatchEvent({type:"updateMatrixWorld"})}copy(o,a=!1){return super.copy(o,a),this.dataPatched=o.dataPatched,this.raycastLock=o.raycastLock,this.scaleLock=o.scaleLock,this.hiddenMatrix.copy(o.hiddenMatrix),this}hasEntityChild(){return this.children.some(o=>Uo(o))}isAncestorOf(o){if(this.uuid===o)return!1;let a=!1;return this.traverseEntity(c=>{c.uuid===o&&(a=!0)}),a}toObjectTransformState(o=[]){this.updateWorldMatrix(!0,!1);let a={position:this.position.toArray(),rotation:[this.rotation.x*Me.RAD2DEG,this.rotation.y*Me.RAD2DEG,this.rotation.z*Me.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return Vh(a,o)}getTransformValues(o,a,c){return a[o].map((d,g)=>(c==null?void 0:c.shared.getVariable(d,[this.uuid,o,e7[g]]))??d)}updateTransformState(o,a){let c=!1;return o.position&&(this.position.fromArray(this.getTransformValues("position",o,a)),c=!0),o.rotation&&(cA.fromArray(this.getTransformValues("rotation",o,a)).multiplyScalar(Me.DEG2RAD),this.rotation.setFromVector3(cA),c=!0),o.scale&&(this.scale.fromArray(this.getTransformValues("scale",o,a)),c=!0),o.hiddenMatrix!==void 0&&(c=!0,this.hiddenMatrix.fromArray(o.hiddenMatrix??Dl.identity)),c&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(d=>{d.invalidateClonerTransform(this)})),o.position&&o.rotation&&o.scale&&o.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),c}onVariableUpdate(o=!1){if(o){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(a=>{a.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let o of this.children)vt.is(o)&&o.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(o=>{vt.is(o)&&o.disposeRecursively()})}toState(o=[]){let a={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(o)};return Vh(a,o)}updateByObjUpdateOp(o,a){o!==void 0&&this.updateByOp({type:0,props:o,path:[]},{...this.data,...o},a,!1)}updateByOp(o,a,c,d){let g=this.data;this.data=a;let b=o,j=Rt(o.path,["states","*"]);if(j!==null){if(o.type===0){let[$]=j;if((this==null?void 0:this.stateSelection)===$){let _e={...o.props};if(delete _e.name,Object.values(o.props).some(st=>st===void 0)){let st=this.data;if(st!==void 0){let rt=Nr$1.zoom(st,o.path.slice(2));if(rt)for(let ut in o.props)o.props[ut]===void 0&&ut in rt&&(_e[ut]=rt[ut])}}b={...o,props:_e,path:o.path.slice(2)}}}}else if(o.type===0){let $=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if($!==void 0){if(o.props.name!==void 0&&$.name){let{name:st,...rt}=$;$=rt}if(o.props.material!==void 0&&"material"in $){let{material:st,...rt}=$;$=rt}let _e=Nr$1.removeOverridden(o.path,o.props,$);b={...o,props:_e}}}if(this.updateByPatchedOpBase(b,Pa.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),c),Rt(o.path,["overrides"])){let $=[],_e=[...o.path];for($.push(_e[1]),_e.splice(0,2);_e.length>0&&_e[0]==="descendants";)$.push(_e[1]),_e.splice(0,2);if($[$.length-1]===void 0){if(o.type===0)for(let st of Object.keys(o.props)){$[$.length-1]=st;let rt=c.scene.findInstance([this.uuid,...$]);rt&&(rt.overrideData=o.props[st],rt.updateState(Co.apply(rt.component.data,rt.overrideData),c))}}else{let st=c.scene.findInstance([this.uuid,...$]);if(st){let rt=Nr$1.zoom(st.component.data,_e);if(o={...o,path:_e},o.type===0){let ut=o.props;if(rt)for(let[gt,yt]of Object.entries(o.props))yt===void 0&&(ut===o.props&&(ut={...o.props}),ut[gt]=rt[gt]);o={...o,props:ut}}st.overrideData=id$2.resolve(a.overrides,$),st.updateByOp(o,Fr$1.applySimple(st.data,o),c,!1)}}}else if(this.instances.length>0){let $;if(o.path.length===0&&o.type===0){let _e;for(let st of No.rootOverrideProps)st in o.props&&(_e===void 0&&(_e={}),_e[st]=o.props[st]);_e&&($={...o,props:_e})}else for(let _e of No.rootOverrideProps)if(Rt(o.path,[_e])){$=o;break}$!==void 0&&this.instances.forEach(_e=>{if(_e.isInstanceRoot){let st=Co.filterOp(_e.overrideData,$);st&&_e.updateByOp(st,Fr$1.applySimple(_e.data,st),c,!0)}}),this.instances.forEach(_e=>{if(!_e.isInstanceRoot){let st=Co.filterOp(_e.overrideData,o);if(st){let rt;g===_e.data&&o===st?rt=a:rt=Fr$1.applySimple(_e.data,st),_e.updateByOp(st,rt,c,!0)}}})}}updateByPatchedOpBase(o,a,c){if(this.dataPatched=a,o.path.length===0&&o.type===0)o.props.type!==void 0&&!Ks.is(o.props.type)&&eo.changeEntityProptotype(this,a,c);else if(o.path.length===1&&o.path[0]==="geometry"&&o.type===0&&"type"in o.props){eo.changeEntityProptotype(this,a,c);for(let d of this.children)vt.is(d)&&d.updateVisible(c.scene)}this.updateByPatchedOp(o,a,c)}updateByPatchedOp(o,a,c){if(o.path.length===0&&o.type===0&&this.updateState(o.props,c),Rt(o.path,["pathSnapping"])!==null&&this.updatePathSnapping(a.pathSnapping),Rt(o.path,["cloner"])!==null){let d=Fr$1.drop(o,1);d.path.length===0&&d.type===0&&d.props.disabled===!0?this.setFromClonerState(null,c):this.cloner?this.cloner.updateState(a.cloner,c.scene):(this.setFromClonerState(a.cloner,c),this.expandCloner(c.scene)),this.updateVisible(c.scene)}}updatePathSnapping(o=this.dataPatched.pathSnapping){this._updatedPathSnapping=o,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(o){var yt,wt,Ct,Pt,At;let a=((yt=this._updatedPathSnapping)==null?void 0:yt.pathId)??this.dataPatched.pathSnapping.pathId,c=((wt=this._updatedPathSnapping)==null?void 0:wt.slide)??this.dataPatched.pathSnapping.slide??0,d=((Ct=this._updatedPathSnapping)==null?void 0:Ct.offset)??this.dataPatched.pathSnapping.offset??0,g=((Pt=this._updatedPathSnapping)==null?void 0:Pt.orientation)??this.dataPatched.pathSnapping.orientation;if(a===null)return;let b=o.find(a);if(!b||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let j=b.data;if(j.geometry.path.points.length<=1)return;let $=D0(j.geometry.path),_e=(c+d)%1;c+d===1&&_e===0&&(_e=1);let st=$.getPointAt(_e);if(st===null)return;let rt=this.parent?(At=this.parent)==null?void 0:At.matrixWorld:new ce$1;b.updateMatrixWorld();let ut=new ce$1().multiplyMatrices(rt.clone().invert(),b.matrixWorld);st.applyMatrix4(ut);let gt={position:st.toArray(),rotation:j.rotation};if(g==="tangential"){let Tt=new ce$1().extractRotation(b.matrixWorld),kt=$.getTangentAt(_e).applyMatrix4(Tt).add(st),It=new ce$1().lookAt(st,kt,t7),Lt=cA.setFromEuler(new or$1().setFromRotationMatrix(It)).multiplyScalar(Me.RAD2DEG);gt={...gt,rotation:Lt.toArray()}}this.updateTransformState(gt),this.traverseEntity(Tt=>{Tt._cameraType&&Tt.dispatchEvent($9)})}updateVisible(o){var c;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((c=this.dataPatched.cloner)==null?void 0:c.hideBase)!==!0),!o)return;let a=!1;this.traverseEntity(d=>{if(d.data.type==="Splat")return a=!0,!0}),a&&o.reloadSplats()}updateState_Entity(o,a){o.name!==void 0&&(this.name=o.name),o.raycastLock!==void 0&&(this.raycastLock=o.raycastLock),o.visible!==void 0&&(this.updateVisible(a==null?void 0:a.scene),this.resetBBoxNeedsUpdate()),a&&"cloner"in o&&o.cloner!==void 0&&(this.setFromClonerState(o.cloner,a),this.updateVisible(a.scene)),this.updateTransformState(o,a)}get attachedSurfaceCloners(){return this.children.filter(o=>o instanceof eo.Cloner&&o.parameters.type==="toObject")}setFromClonerState(o,a){this.disposed||(o===null||o.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new eo.Cloner(this,o),a.scene.addPendingExpandCloner(this)):this.cloner.updateState(o,a.scene))}expandCloner(o){!this.disposed&&this.cloner&&this.cloner.expandClones(o)}invalidateClonerTransform(o){this.cloner&&this.cloner.invalidateTransform(o)}requestRender(){this.dispatchEvent({type:"requestRender"})}},O0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);a.thetaLength=Me.clamp(a.thetaLength,0,360);let c=a.width/2,d=a.radiusTop??c,g=a.radiusBottom??c;return d===g?(d=c,g=c):d>g?(d=c,g=g*c/d):(d=d*c/g,g=c),{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width),radiusTop:d,radiusBottom:g})}}static build(e){let{width:o,depth:a,height:c,radialSegments:d,heightSegments:g,openEnded:b,thetaStart:j,thetaLength:$,radiusTop:_e,radiusBottom:st,cornerRadius:rt,cornerSegments:ut,hollow:gt}=e.parameters,yt;return $===0?(yt=new Pe,yt.setAttribute("position",new Te([],3))):rt||gt?yt=new ym(_e,st,c,d,g,b,j,$*Math.PI/180,rt,rt,ut,gt):yt=new Mc(_e,st,c,d,g,b,j,$*Math.PI/180),yt.scale(1,1,a/o),Object.assign(yt,{userData:{...e,type:"CylinderGeometry"}})}};function zl(e,o,a){a.x=e.x*o.x,a.y=e.y,a.z=e.x*o.y}function NO(e){return new z$2(e.y,-e.x)}var ym=class extends Pe{constructor(e,o,a,c,d,g,b,j,$,_e,st,rt,ut=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,o=o!==void 0?o:1,a=a||1,c=Math.floor(c)||8,d=Math.floor(d)||1,g=g!==void 0?g:!1,b=b!==void 0?b:0,j=j!==void 0?j:Math.PI*2,g&&($=0,_e=0);let gt=[],yt=[],wt=[],Ct=[],Pt=0,At=a/2,Tt=new _,kt=new _;ut&&e==0&&(e=$),ut&&o==0&&(o=_e);let It=new z$2(e,At),Lt=new z$2(o,-At),Ft=null,Nt=null,Ht=null,dr=null,hs=It.clone().sub(Lt),us=0,hn=0,un=0;rt>0&&(us=Math.min(e,o)*(1-rt),hn=e-us,un=o-us);let bo=It.clone();bo.x-=us;let _s=Math.PI-hs.angle(),gn=hs.angle(),Gr=Math.tan(gn/2),ds=Math.tan(_s/2),Zn=Gr+ds,Nn=rt?Zn:ds,Qn=rt?Zn:Gr;if($=Math.min($,(e-hn)/Nn,hs.length()/Zn),_e=Math.min(_e,(o-un)/Qn,hs.length()/Zn),$>0){let B0=$/Gr;Ft=It.clone().sub(new z$2(B0,$)),rt&&(Ht=Ft.clone(),Ht.x-=us-Zn*$),It.sub(hs.clone().setLength(B0))}if(_e>0){let B0=_e/ds;Nt=Lt.clone().sub(new z$2(B0,-_e)),Lt.add(hs.clone().setLength(B0)),rt&&(dr=Nt.clone(),dr.x-=us-Zn*_e,bo.sub(hs.clone().setLength(B0)))}hs=It.clone().sub(Lt);let bu=hs.length()<.5,ou=[];for(let B0=0;B0<=c;B0++){let a1=[],q1=B0/c,ox=q1*j+b,U_=new z$2(Math.sin(ox),Math.cos(ox));dr&&Nt?(g0(a1,q1,U_,_s,_e,dr,-1,!0),g0(a1,q1,U_,gn,_e,Nt,-1,!1)):Nt?(Su(a1,U_,Nt.x,0,-1),g0(a1,q1,U_,gn,_e,Nt,-1,!1)):g||Su(a1,U_,o,un,-1);let tS=NO(hs).normalize();if(zl(tS,U_,Tt),!bu)for(let iS=0;iS<=d;iS++){let wA=iS/d,pO=hs.clone().multiplyScalar(wA).add(Lt);zl(pO,U_,kt),yt.push(kt.x,kt.y,kt.z),wt.push(Tt.x,Tt.y,Tt.z),Ct.push(q1,.5+kt.y/a),a1.push(Pt++)}if(Ht&&Ft?(g0(a1,q1,U_,_s,$,Ft,1,!1),g0(a1,q1,U_,gn,$,Ht,1,!0)):Ft?(g0(a1,q1,U_,_s,$,Ft,1,!1),Su(a1,U_,Ft.x,0,1)):g||Su(a1,U_,e,hn,1),rt&&!bu){let iS=NO(hs).multiplyScalar(-1).normalize();zl(iS,U_,Tt);for(let wA=0;wA<=d;wA++){let pO=wA/d,aR=hs.clone().multiplyScalar(-pO).add(bo);zl(aR,U_,kt),yt.push(kt.x,kt.y,kt.z),wt.push(Tt.x,Tt.y,Tt.z),Ct.push(q1,.5+kt.y/a),a1.push(Pt++)}}rt&&!g&&a1.push(a1[0]),ou.push(a1)}for(let B0=0;B0<ou.length-1;B0++)for(let a1=0;a1<ou[0].length-1;a1++){if(g&&rt&&a1==d)continue;let q1=ou[B0][a1],ox=ou[B0+1][a1],U_=ou[B0+1][a1+1],tS=ou[B0][a1+1],iS=yt[U_*3+0],wA=yt[U_*3+2];gt.push(q1,ox,tS),(iS!=0||wA!=0)&&gt.push(ox,U_,tS)}j<Math.PI*2&&(l1(-1,ou[0],b),l1(1,ou[ou.length-1],b+j)),this.setIndex(gt),this.setAttribute("position",new Te(yt,3)),this.setAttribute("normal",new Te(wt,3)),this.setAttribute("uv",new Te(Ct,2));function g0(B0,a1,q1,ox,U_,tS,iS,wA){for(let pO=0;pO<st+1;pO++){let aR=pO/st,fD=iS<0?aR:1-aR;wA&&(fD-=1),fD*=ox;let AA=new z$2(Math.sin(fD),Math.cos(fD)*iS),oI=AA.clone().multiplyScalar(U_).add(tS);zl(oI,q1,kt),yt.push(kt.x,kt.y,kt.z),zl(AA,q1,Tt),wt.push(Tt.x,Tt.y,Tt.z),Ct.push(a1,.5+kt.y/a),B0.push(Pt++)}}function Su(B0,a1,q1,ox,U_){let tS=new _,iS=new z$2,wA=[q1,ox];U_<0&&wA.reverse();for(let pO of wA)iS.set(pO,At*U_),zl(iS,a1,tS),yt.push(tS.x,tS.y,tS.z),wt.push(0,U_,0),Ct.push(.5,.5),B0.push(Pt++)}function l1(B0,a1,q1){let ox=new z$2(Math.sin(q1),Math.cos(q1)),U_=new z$2(-Math.cos(q1),Math.sin(q1)),tS=new _,iS=B0<0?(aR,fD,AA)=>gt.push(aR,fD,AA):(aR,fD,AA)=>gt.push(aR,AA,fD),wA=new z$2((e+o+hn+un)/4,0);zl(wA,ox,tS),yt.push(tS.x,tS.y,tS.z),wt.push(U_.x,0,U_.y),Ct.push(.5,.5);let pO=Pt++;for(let aR of a1){let fD=yt.slice(aR*3,aR*3+3);yt.push(...fD),wt.push(U_.x,0,U_.y);let AA=Ct.slice(aR*2,aR*2+2);Ct.push(...AA),Pt++}for(let aR=pO+1;aR<Pt-1;aR++)iS(pO,aR,aR+1);iS(pO,Pt-1,pO+1)}}},FO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return a.thetaLength=Me.clamp(a.thetaLength,0,360),{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o,depth:a,height:c,radialSegments:d,heightSegments:g,openEnded:b,thetaStart:j,thetaLength:$,cornerRadiusTop:_e,cornerRadiusBottom:st,cornerSegments:rt}=e.parameters,ut;return $===0?(ut=new Pe,ut.setAttribute("position",new Te([],3))):_e>0||st>0||$<360?ut=new ym(0,o/2,c,d,g,b,j,$*Math.PI/180,_e,st,rt,0,!0):ut=new dl(o/2,c,d,g,b),ut.scale(1,1,a/o),Object.assign(ut,{userData:{...e,type:"ConeGeometry"}})}},kO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o,height:a,depth:c,widthSegments:d,heightSegments:g,depthSegments:b,cornerRadius:j,cornerSegments:$}=e.parameters,_e;return j==0?_e=new vi(o,a,c,d,g,b):_e=new hA(o,a,c,d,g,b,j,$),Object.assign(_e,{userData:{...e,type:"CubeGeometry"}})}},uA=Math.PI/2,hA=class extends Pe{constructor(e=1,o=1,a=1,c=1,d=1,g=1,b=0,j=4){super(),this.type="BoxGeometry";let $=this;c=Math.floor(c),d=Math.floor(d),g=Math.floor(g),j=Math.floor(j),b=Math.min(b,e/2,o/2,a/2);let _e=[],st=[],rt=[],ut=[],gt=0,yt=0;wt("z","y","x",-1,-1,a,o,e,g,d,0),wt("z","y","x",1,-1,a,o,-e,g,d,1),wt("x","z","y",1,1,e,a,o,c,g,2),wt("x","z","y",1,-1,e,a,-o,c,g,3),wt("x","y","z",1,-1,e,o,a,c,d,4),wt("x","y","z",-1,-1,e,o,-a,c,d,5),b>0&&(Ct("z","y","x",-1,-1,1,a,o,e,g,0),Ct("z","y","x",1,-1,-1,a,o,e,g,1),Ct("z","y","x",-1,1,-1,a,o,e,g,1),Ct("z","y","x",1,1,1,a,o,e,g,0),Ct("x","y","z",-1,-1,-1,e,o,a,c,0),Ct("x","y","z",1,-1,1,e,o,a,c,1),Ct("x","y","z",-1,1,1,e,o,a,c,0),Ct("x","y","z",1,1,-1,e,o,a,c,1),Ct("y","x","z",-1,-1,1,o,e,a,d,0),Ct("y","x","z",1,-1,-1,o,e,a,d,1),Ct("y","x","z",1,1,1,o,e,a,d,1),Ct("y","x","z",-1,1,-1,o,e,a,d,0),Pt(1,1,1),Pt(-1,1,1),Pt(1,-1,1),Pt(-1,-1,1),Pt(1,1,-1),Pt(-1,1,-1),Pt(1,-1,-1),Pt(-1,-1,-1)),this.setIndex(_e),this.setAttribute("position",new Te(st,3)),this.setAttribute("normal",new Te(rt,3)),this.setAttribute("uv",new Te(ut,2));function wt(At,Tt,kt,It,Lt,Ft,Nt,Ht,dr,hs,us){let hn=(Ft-2*b)/dr,un=(Nt-2*b)/hs,bo=Ft/2-b,_s=Nt/2-b,gn=Ht/2,Gr=dr+1,ds=hs+1,Zn=0,Nn=0,Qn=new _;for(let bu=0;bu<ds;bu++){let ou=bu*un-_s;for(let g0=0;g0<Gr;g0++){let Su=g0*hn-bo;Qn[At]=Su*It,Qn[Tt]=ou*Lt,Qn[kt]=gn,st.push(Qn.x,Qn.y,Qn.z),Qn[At]=0,Qn[Tt]=0,Qn[kt]=Ht>0?1:-1,rt.push(Qn.x,Qn.y,Qn.z),ut.push(g0/dr),ut.push(1-bu/hs),Zn+=1}}for(let bu=0;bu<hs;bu++)for(let ou=0;ou<dr;ou++){let g0=gt+ou+Gr*bu,Su=gt+ou+Gr*(bu+1),l1=gt+(ou+1)+Gr*(bu+1),B0=gt+(ou+1)+Gr*bu;_e.push(g0,Su,B0),_e.push(Su,l1,B0),Nn+=6}$.addGroup(yt,Nn,us),yt+=Nn,gt+=Zn}function Ct(At,Tt,kt,It,Lt,Ft,Nt,Ht,dr,hs,us){let hn=(Nt-2*b)/hs,un=Nt/2-b,bo=Ht/2-b,_s=dr/2,gn=hs+1,Gr=0,ds=0,Zn=new _,Nn=new _;for(let Qn=0;Qn<j+1;Qn++){let bu=Qn/j*uA,ou=Math.sin(bu)*b,g0=(1-Math.cos(bu))*b,Su=Math.sin(bu),l1=Math.cos(bu);Zn[Tt]=(bo+ou)*Lt,Zn[kt]=(_s-g0)*Ft,Nn[At]=0,Nn[Tt]=Su*Math.sign(Zn[Tt]),Nn[kt]=l1*Math.sign(Zn[kt]);for(let B0=0;B0<gn;B0++){let a1=B0*hn-un;Zn[At]=a1*It,st.push(Zn.x,Zn.y,Zn.z),rt.push(Nn.x,Nn.y,Nn.z),ut.push(B0/hs),ut.push(0),Gr+=1}}for(let Qn=0;Qn<j;Qn++)for(let bu=0;bu<hs;bu++){let ou=gt+bu+gn*Qn,g0=gt+bu+gn*(Qn+1),Su=gt+(bu+1)+gn*(Qn+1),l1=gt+(bu+1)+gn*Qn;_e.push(ou,g0,l1),_e.push(g0,Su,l1),ds+=6}$.addGroup(yt,ds,us),yt+=ds,gt+=Gr}function Pt(At,Tt,kt){let It=new _,Lt=new _(e/2,o/2,a/2);Lt.subScalar(b);let Ft=[],Nt=At*Tt*kt>0?(dr,hs,us)=>_e.push(dr,hs,us):(dr,hs,us)=>_e.push(dr,us,hs);for(let dr=0;dr<=j;dr++){let hs=[],us=uA*(1-dr/j),hn=Math.cos(us),un=Math.sin(us),bo=0;for(let _s=0;_s<=dr;_s++){let gn=Math.cos(bo),Gr=Math.sin(bo);It.x=hn*gn,It.y=un,It.z=hn*Gr;let ds=Lt.clone().addScaledVector(It,b);st.push(At*ds.x,Tt*ds.y,kt*ds.z),rt.push(At*It.x,Tt*It.y,kt*It.z),ut.push(0,0),hs.push(gt++),bo+=uA/dr}Ft.push(hs)}let Ht=Ft.length-1;for(let dr=0;dr<Ht;dr++){let hs=Ft[dr],us=Ft[dr+1],hn=hs.length-1;Nt(hs[0],us[1],us[0]);for(let un=1;un<=hn;un++)Nt(hs[un-1],hs[un],us[un]),Nt(hs[un],us[un+1],us[un])}}}},Ul=class extends Pe{constructor(e=[],o=[],a="",c=1,d=.2,g=4){super(),this.type="PolyhedronGeometryRound";let b=[],j=[],$=[];_e(),st(),this.setAttribute("position",new Te(b,3)),this.setAttribute("normal",new Te($,3)),this.setAttribute("uv",new Te(j,2));return;function _e(){var gn;d=Math.min(1-1e-5,d),d==0&&(g=0);let rt={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[a],ut=new _,gt=ut.clone(),yt=new Dr$1,wt=d*c,Ct=c-wt,Pt=g+1,At=new _,Tt=(Gr,ds)=>At.subVectors(Gr,ds).normalize(),kt=(Gr,ds)=>Array(Gr).fill(void 0).map(ds),It=kt(e.length/3,(Gr,ds)=>new _().fromArray(e,ds*3).setLength(c)),Lt=[],Ft=1e6;for(let Gr=0;Gr<It.length;Gr++){let ds=It[Gr],Zn=[],Nn,Qn,bu,ou=1e10,g0=-1;for(;(g0=o.indexOf(Gr,g0+1))!=-1;){let a1=g0-g0%3;Nn=o[a1+(g0+1)%3],Qn=o[a1+(g0+2)%3],bu=ds.distanceToSquared(It[Nn]),ou=Math.min(ou,bu),Zn.push([Nn,Qn,bu])}ou+=1e-6;let Su=[],l1=0,B0=Zn.length;for(let a1=0;a1<B0;a1++){[Nn,Qn,bu]=Zn[l1];let q1=((gn=Lt[Nn])==null?void 0:gn.includes(Gr))==!0;bu<=ou&&Su.push(Nn+ +q1*Ft),l1=Zn.findIndex(ox=>ox[0]==Qn)}Lt.push(Su)}let Nt=[];{let Gr=0,ds=0,Zn,Nn,Qn=rt==3;for(let bu=0;bu<=g;bu++){Zn=bu*(bu+1)/2,Nn=(bu+1)*(bu+2)/2;for(let ou=0;ou<g-bu;ou++)[Gr,ds]=[Zn+ou+bu+2,Nn+ou+bu+3],Nt.push(Zn,Nn,...Qn?[ds,Zn]:[Gr,Nn],ds,Gr),[Zn,Nn]=[Gr,ds];Nt.push(Zn,Nn,Zn+g+2)}}let Ht=ut.clone(),dr=ut.clone(),hs=ut.clone(),us=ut.clone(),hn=ut.clone(),un=[],bo=kt(It.length,()=>kt(rt,()=>ut.clone()));for(let Gr=0;Gr<It.length;Gr++){ut.copy(It[Gr]).normalize(),Ht.copy(ut).multiplyScalar(Ct);let ds=Lt[Gr];for(let Su=0;Su<ds.length;Su++){let l1=ds[Su],B0=ds[(Su+1)%rt];yt.setFromPointsAndIndices(It,Gr,l1%Ft,B0%Ft),yt.b.sub(yt.a).setLength(1e10).add(yt.a),yt.c.sub(yt.a).setLength(1e10).add(yt.a),yt.closestPointToPoint(Ht,bo[Gr][Su])}let Zn=[],Nn=[],Qn=[],bu=new _;g==0&&[...bo[Gr]].reduce((Su,l1)=>Su.add(l1),bu).multiplyScalar(1/rt);for(let Su=0;Su<rt;Su++){let l1=[],B0=(Su-1+rt)%rt,a1=bo[Gr][B0],q1=bo[Gr][Su];ut.copy(a1).sub(Ht),gt.copy(q1).sub(Ht);let ox=Ht.angleTo(ut),U_=ut.angleTo(gt),tS=Math.cos(ox)*wt;g==0?dr.copy(bu):dr.copy(Ht).setLength(Ct+tS),Nn.push(tS);let iS=[dr,a1,q1];for(let wA=0;wA<2;wA++){let pO=iS[wA],aR=iS[wA+1];us.subVectors(pO,Ht),hn.subVectors(aR,Ht),hs.crossVectors(us,hn).normalize();for(let fD=0;fD<Pt;fD++){let AA=[ox,U_][wA]*fD/Pt;ut.copy(us).applyAxisAngle(hs,AA).add(Ht),Zn.push(ut.clone()),wA&&(Tt(ut,Ht),l1.push([fD==0?pO:ut.clone(),At.clone()]))}wA&&(Tt(aR,Ht),l1.push([aR,At.clone()]))}Qn.push(l1)}un.push(Qn);let ou=2*Pt,g0=2;for(let Su=0;Su<rt;Su++){let l1=ou*Su,B0=ou*((Su+1)%rt),a1=[Zn[l1]];for(let ox=1;ox<Pt;ox++){us=Zn[l1+ox],hn=Zn[B0+ox],a1.push(us);for(let U_=1,tS=ox-g0+1;U_<=tS;U_++)ut.lerpVectors(us,hn,U_/(tS+1)),ut.sub(Ht).setLength(Nn[Su]).add(Ht),a1.push(ut.clone());a1.push(hn)}for(let ox=0;ox<Pt;ox++)a1.push(Zn[ox+Pt+l1]);a1.push(Zn[B0+Pt]);let q1=Nt.map(ox=>a1[ox]);b.push(...q1.map(ox=>[ox.x,ox.y,ox.z]).flat()),$.push(...q1.map(ox=>(Tt(ox,Ht),[At.x,At.y,At.z])).flat())}}let _s=[];for(let Gr=0;Gr<Lt.length;Gr++)for(let ds=0;ds<rt;ds++){let Zn=Lt[Gr][ds];if(Zn<Ft){let Nn=Lt[Zn].findIndex(ou=>ou%Ft==Gr),Qn=un[Gr][ds],bu=un[Zn][Nn];for(let ou=0;ou<Pt;ou++){let g0=Qn[ou],Su=bu[Pt-ou],l1=Qn[ou+1],B0=bu[Pt-(ou+1)];[g0,Su,l1,l1,Su,B0].forEach(a1=>{b.push(a1[0].x,a1[0].y,a1[0].z),$.push(a1[1].x,a1[1].y,a1[1].z)})}_s.push(Qn[0][0],bu[Pt][0],Qn[Pt][0],bu[0][0])}}for(;_s.length;){let Gr,ds,Zn,Nn;[Gr,ds]=_s.splice(0,2);let Qn=[Gr];for(;Gr!=ds;)Qn.push(ds),Zn=_s.indexOf(ds),Nn=Zn%2,ds=_s.splice(Zn-Nn,2)[1-Nn];At.subVectors(Qn[0],Qn[1]).cross(ut.subVectors(Qn[0],Qn[2])).normalize();let bu=At.dot(Qn[0])<0;bu&&At.negate();for(let ou=1;ou<=Qn.length-2;ou++)[Qn[ou+ +bu],Qn[ou+1-+bu],Qn[0]].forEach(g0=>{b.push(g0.x,g0.y,g0.z),$.push(At.x,At.y,At.z)})}}function st(){let rt=new _;for(let Lt=0;Lt<b.length;Lt+=3){rt.x=b[Lt+0],rt.y=b[Lt+1],rt.z=b[Lt+2];let Ft=kt(rt)/2/Math.PI+.5,Nt=It(rt)/Math.PI+.5;j.push(Ft,1-Nt)}let ut=new _,gt=new _,yt=new _,wt=new _,Ct=new z$2,Pt=new z$2,At=new z$2,Tt=(Lt,Ft,Nt,Ht)=>{Ht<0&&Lt.x===1&&(j[Ft]=Lt.x-1),Nt.x===0&&Nt.z===0&&(j[Ft]=Ht/2/Math.PI+.5)};for(let Lt=0,Ft=0;Lt<b.length;Lt+=9,Ft+=6){ut.set(b[Lt+0],b[Lt+1],b[Lt+2]),gt.set(b[Lt+3],b[Lt+4],b[Lt+5]),yt.set(b[Lt+6],b[Lt+7],b[Lt+8]),Ct.set(j[Ft+0],j[Ft+1]),Pt.set(j[Ft+2],j[Ft+3]),At.set(j[Ft+4],j[Ft+5]),wt.copy(ut).add(gt).add(yt).divideScalar(3);let Nt=kt(wt);Tt(Ct,Ft+0,ut,Nt),Tt(Pt,Ft+2,gt,Nt),Tt(At,Ft+4,yt,Nt)}for(let Lt=0;Lt<j.length;Lt+=6){let Ft=j[Lt+0],Nt=j[Lt+2],Ht=j[Lt+4],dr=Math.max(Ft,Nt,Ht),hs=Math.min(Ft,Nt,Ht);dr>.9&&hs<.1&&(Ft<.2&&(j[Lt+0]+=1),Nt<.2&&(j[Lt+2]+=1),Ht<.2&&(j[Lt+4]+=1))}function kt(Lt){return Math.atan2(Lt.z,-Lt.x)}function It(Lt){return Math.atan2(-Lt.y,Math.sqrt(Lt.x*Lt.x+Lt.z*Lt.z))}}}static fromJSON(e){return new Ul(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},VO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o,height:a,depth:c,detail:d,corner:g,cornerSides:b}=e.parameters,j=d===0&&g!==0?new vm(o*.5,g,b):new Ku(o*.5,d);return j.scale(1,a/o,c/o),Object.assign(j,{userData:{...e,type:"DodecahedronGeometry"}})}},vm=class extends Ul{constructor(e=1,o=.2,a=4){let c=(1+Math.sqrt(5))/2,d=1/c,g=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],b=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],j="DodecahedronGeometry";super(g,b,j,e,o,a),this.type=j}static fromJSON(e){return new vm(e.radius,e.corner,e.cornerSides)}},xm=1e-12,Dd=class{constructor(e){this.position=new z$2,this.startPosition=new z$2,this.uuid=Me.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Dd(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Od=class extends Dd{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Od(this.parent).copy(this)}},to=class extends Dd{constructor(e,o){super(o),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Od(this),new Od(this))}static create(e,o){let a=new to(e,new z$2(...o.position));return a.controls[0].position.set(...o.controlPrevious.position),a.controls[1].position.set(...o.controlNext.position),a.roundness=o.roundness,a.areControlsDirectionsMirrored=o.areControlsDirectionsMirrored,a}getOppositeControl(e){let o=this.controls.indexOf(e);return o===0?this.controls[1]:o===1?this.controls[0]:null}applyOffsetToControls(e,o=1){for(let a=0,c=this.controls.length;a<c;a++){let d=this.controls[a];this.position.distanceTo(d.position)<=o?d.position.copy(this.position):d.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new to(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var a,c;let e=(a=this.curveBefore)==null?void 0:a.getTangentAt(1),o=(c=this.curveAfter)==null?void 0:c.getTangentAt(0);return[e,o]}computeNormals(e=new z$2,o=new z$2){let[a,c]=this.computeTangents();return a&&c&&(zO(a,e),zO(c,o)),[e,o]}computeTangent(e=new z$2){let[o,a]=this.computeTangents();return o&&a&&e.copy(o).add(a).normalize(),e}computeNormal(e=new z$2){let[o,a]=this.computeNormals();return e.copy(o).add(a).normalize(),e}};function zO(e,o=new z$2){let a=e.length();return o.set(-e.y/a,e.x/a)}var fA=e=>e,Id=new z$2,I0=new z$2,r7=new z$2,i7=new z$2,n7=new z$2,s7=new z$2,GO=new _,jO=new _;function HO(e){let o=new z$2;o.addVectors(e.v0,Id.subVectors(e.v1,e.v0).multiplyScalar(2/3));let a=new z$2;return a.addVectors(e.v2,I0.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new fn(e.v0,o,a,e.v2)}function bm(e,o,a=Number.EPSILON){return Math.abs(e-o)<a}function o7(e,o,a=Number.EPSILON){return e.distanceTo(o)<a}function a7(e,o,a=Number.EPSILON){return e.distanceTo(o)<a}function pA(e,o,a){let c=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2)),d=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),g=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2));return Math.acos((d*d+c*c-g*g)/(2*d*c))}function WO(e,o,a){return UO(e,o)&&UO(o,a)&&dA(e.position,o.position,a.position)}function dA(e,o,a){return Id.copy(o).sub(e).cross(I0.copy(a).sub(e))===0}function qO(e,o,a,c,d){let g=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2)),b=(e.y+o.y)/2,j=(e.x+o.x)/2,$=Math.sqrt(Math.pow(a,2)-Math.pow(g/2,2))*(e.y-o.y)/g,_e=Math.sqrt(Math.pow(a,2)-Math.pow(g/2,2))*(o.x-e.x)/g;return c.set(j+$,b+_e),d.set(j-$,b-_e),[c,d]}function YO(e,o,a){let c=e.distanceTo(a),d=o.distanceTo(a);return c<d?o:e}function XO(e,o,a,c,d,g){let b=o.x-e.x,j=o.y-e.y,$=a.x-e.x,_e=a.y-e.y,st=Math.sqrt((b+$)*(b+$)+(j+_e)*(j+_e)),rt;return pA(o,e,a)>Math.PI&&(st*=-1),bm(_e,j)?rt=(j+_e)*(c/st-.5)*8/3/(b-$):rt=(b+$)*(c/st-.5)*8/3/(_e-j),d.set(o.x-rt*j,o.y+rt*b),g.set(a.x+rt*_e,a.y-rt*$),[d,g]}function mA(e,o){return e.position.equals(e.controls[1].position)&&o.position.equals(o.controls[0].position)}function UO(e,o){return dA(e.position,e.controls[1].position,o.position)&&dA(e.position,o.controls[0].position,o.position)}function QO(e,o,a,c,d=.5){let g=Id.subVectors(o,e).multiplyScalar(d).add(e),b=I0.subVectors(a,o).multiplyScalar(d).add(o),j=r7.subVectors(c,a).multiplyScalar(d).add(a),$=g,_e=i7.subVectors(b,g).multiplyScalar(d).add(g),st=n7.subVectors(j,b).multiplyScalar(d).add(b),rt=j,ut=s7.subVectors(st,_e).multiplyScalar(d).add(_e);return[e.x,e.y,$.x,$.y,_e.x,_e.y,ut.x,ut.y,st.x,st.y,rt.x,rt.y,c.x,c.y]}function KO(e,o,a=12,c=!0){let d=jO.set(0,0,0),g,b=0;for(let j=0;j<o.length;j++){let $=fA(o[j]),_e=Id,st=Gl($,a);for(let rt=0;rt<=st;rt++)if($ instanceof fn||$ instanceof is$1||$ instanceof pn){if($.getPoint(rt/st,_e),d.set(_e.x,_e.y,0),g!==void 0&&a7(g,d))continue;g===void 0&&(g=GO),g.copy(d),e.setXYZ(b,d.x,d.y,d.z),b++}}return c&&b>1&&!(e.getX(b-1)===e.getX(0)&&e.getY(b-1)===e.getY(0)&&e.getZ(b-1)===e.getZ(0))&&(e.setXYZ(b,e.getX(0),e.getY(0),e.getZ(0)),b++),e}function ZO(e,o,a,c=12,d=!0){let g=jO.set(0,0,0),b=0,j=[];for(let $=0;$<o.length;$++){if(a[$]===!1)continue;let _e,st=fA(o[$]),rt=Id,ut=Gl(st,c);j.push(ut);for(let gt=0;gt<=ut;gt++)if(st instanceof fn||st instanceof is$1||st instanceof pn){if(st.getPoint(gt/ut,rt),g.set(rt.x,rt.y,0),_e==null?void 0:_e.equals(g))continue;_e===void 0?_e=GO:(e.setXYZ(b,_e.x,_e.y,_e.z),b++,e.setXYZ(b,g.x,g.y,g.z),b++),_e.copy(g)}}return d&&b>1&&!(e.getX(b-1)===e.getX(0)&&e.getY(b-1)===e.getY(0)&&e.getZ(b-1)===e.getZ(0))&&(e.setXYZ(b,e.getX(0),e.getY(0),e.getZ(0)),b++),j}function gA(e,o=12,a=!1){let c=[];for(let d=0,g=e.length;d<g;d++){let b=e[d],j=0;if(a&&b.roundedCurveCorner!==void 0){let $=Gl(b.roundedCurveCorner,o)*.5;d>0&&(c[d-1]+=$),j+=$}b.curveAfter!==void 0&&(j+=Gl(b.curveAfter,o)),c.push(j)}return e.length>0&&a&&e[0].roundedCurveCorner!==void 0&&(c[e.length-1]+=Gl(e[0].roundedCurveCorner,o)*.5),c}function Gl(e,o=12){return e&&e instanceof _c?o*2:e&&(e instanceof pn||e instanceof Pp)?1:e&&e instanceof Yu?o*e.points.length:o}function JO(e,o,a=12,c=!0){let d,g=0;for(let b=0;b<o.length;b++){let j=fA(o[b]),$=Gl(j,a),_e=Id;for(let st=0;st<=$;st++)if(j instanceof fn||j instanceof is$1||j instanceof pn){if(j.getPoint(st/$,_e),d!==void 0&&o7(d,_e,xm))continue;d===void 0&&(d=I0),d.copy(_e),e.push(_e.x,_e.y),g++}}return bm(e[0],e[e.length-2],xm)&&bm(e[1],e[e.length-1],xm)&&(e.pop(),e.pop()),c&&g>1&&!(bm(e[g-1],e[1],xm)&&bm(e[g-2],e[0],xm))&&(e.push(e[0],e[1]),g++),e}var yA=new z$2,l7=new z$2,c7=new z$2,u7=new z$2,h7=new z$2,d7=new z$2,Xt=class extends xa{constructor(e=100,o=100){super(),this.points=[],this.shapeHoles=[],this.plane=new ii(new _(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Me.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=o}static createFromState(e,o,a){let c=new Xt;return c.isClosed=e.isClosed,c.points=e.points.map(d=>to.create(d.id,d.data)),typeof e.roundness=="number"&&(c.roundness=e.roundness),c.shapeHoles=e.shapeHoles.map(d=>Xt.createFromState(d)),o!==void 0&&a!==void 0&&c.applySize(o,a),c.update(),c}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let o=0,a=this.points.length;o<a;o++)this.points[o].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(o=>this.getPointIndexById(o)).filter(o=>o>=0)}getPointIndexById(e){let o=this.points.length,a=this.points.findIndex(c=>c.uuid===e);if(a<0){let c=o;for(let d=0,g=this.shapeHoles.length;d<g;d++){let b=this.shapeHoles[d],j=b.points.length,$=b.getPointIndexById(e);if($<0)c+=j;else return $+c}}return a}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let o=this.points.length;for(let a=0,c=this.shapeHoles.length;a<c;a++){let d=this.shapeHoles[a],g=e-o;if(g<=d.points.length-1)return d.points[g];o+=d.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let o=this.points.indexOf(e);if(o>=0)return o;if(o=this.points.length,this.shapeHoles.length>0)for(let a=0,c=this.shapeHoles.length;a<c;a++){let d=this.shapeHoles[a],g=d.points.indexOf(e);if(g>=0)return o+g;o+=d.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(o=>o.points));return[...this.points,...e]}applySize(e,o){e===0&&(e=.001),o===0&&(o=.001),this._width=e,this._height=o}applyScale(e,o){let a=yA.set(e,o);for(let c=0,d=this.points.length;c<d;c++){let g=this.points[c];g.position.multiply(a),g.controls[0].position.multiply(a),g.controls[1].position.multiply(a)}for(let c=0,d=this.shapeHoles.length;c<d;c++)this.shapeHoles[c].applyScale(e,o);this._update()}createPoint(e,o=0,a=Me.generateUUID()){let c;e instanceof z$2?c=e:c=new z$2(e,o);let d=new to(a,c);return d.roundness=this.roundness,d}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,o){this.points.splice(o,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let o=0,a=this.points.length;o<a;o++){let c=this.points[o];if(c.uuid===e)return c}for(let o=0,a=this.shapeHoles.length;o<a;o++){let c=this.shapeHoles[o].getPointByUuid(e);if(c)return c}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let o=this.points.indexOf(e);o>=0&&this.points.splice(o,1),this.needsUpdate=!0}removePointById(e){let o=this.points.find(a=>a.uuid===e);o&&this.removePoint(o)}update(){for(let e=0,o=this.shapeHoles.length;e<o;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,o=12,a=!1){this.subdivision=o,this.curveDivisions===void 0&&this.computeCurveDivisions(o);let c=a?this.roundedCurveDivisions:this.curveDivisions;return KO(e,a?this.roundedCurves:this.curves,o,this.autoClose),c.reduce((d,g)=>d+g,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=gA(this.points,e,!1),this.roundedCurveDivisions=gA(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,o,a=12){return ZO(e,this.curves,o,a,this.autoClose).reduce((c,d)=>c+d,0)*2}extractShapePointsToFlatArray(e,o=12){return this.subdivision=o,this.curveDivisions===void 0&&this.computeCurveDivisions(o),JO(e,this.roundedCurves,o,this.autoClose)}getCurveIndexFromVertexId(e,o=!1){let a=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let c=o?this.roundedCurveDivisions:this.curveDivisions,d=0;o&&this.points[0].roundedCurveCorner!==void 0&&(d=Gl(this.points[0].roundedCurveCorner,this.subdivision)*.5);let g=e-d;g<0&&(g+=c.reduce((b,j)=>b+j,0));for(let b=0,j=c.length;b<j;b++){let $=c[b];if(g<a+$)return[b,(g-a+1)/$];a+=$}return[0,1]}getCurveT(e,o,a){let c=this.points[e],d=this.points[e>=this.points.length-1?0:e+1],g=this.curveDivisions,b=g[e];if(mA(c,d)){let $=c.position.distanceTo(d.position);return c.position.distanceTo(yA.set(a.x,a.y))/$}let j=0;for(let $=0;$<e;$++)j+=g[$];return(o-j)/b}dispose(){}_applyCurveForPoint(e,o){mA(o,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(o.controls[1].position.x,o.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let a=this.curves[this.curves.length-1];e.curveBefore=a,o.curveAfter=a;let c=a.clone();e.roundedCurveBefore=c,o.roundedCurveAfter=c,e.roundedCurveCorner=void 0,this.roundedCurves.push(c)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let o=0,a=this.points.length;o<a;o++){let c=this.points[o];if(o===0)this.moveTo(c.position.x,c.position.y);else{let d=this.points[o-1];this._applyCurveForPoint(c,d)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let o=this.points[0],a=this.points[this.points.length-1];this._applyCurveForPoint(o,a)}if(this.points.length>2){let o=0;for(let a=0,c=this.points.length;a<c;a++){let d=this.points[a],g=this.points[a-1]??this.points[this.points.length-1],b=this.points[a+1]??this.points[0],j=d.roundness,$=g&&b&&WO(g,d,b);if(!d.controlsMoved()&&j>0&&!$){let _e=d.curveBefore,st=d.curveAfter;if(_e===void 0||st===void 0)continue;let rt=d.roundedCurveBefore,ut=d.roundedCurveAfter,gt=_e.getLength(),yt=st.getLength(),wt=Math.min(j,gt*.499),Ct=Math.min(j,yt*.499),Pt=Math.min(wt,Ct),At=1-Pt/gt,Tt=Pt/yt,kt=_e.getPointAt(At,yA),It=st.getPointAt(Tt,l7);this._subSplitCurve(_e,rt,At,kt,void 0),this._subSplitCurve(st,ut,Tt,void 0,It);let Lt;if(this.useCubicForRoundedCorners){let Ft=pA(kt,d.position,It)/2,Nt=Math.tan(Ft)*kt.distanceTo(d.position),[Ht,dr]=qO(kt,It,Nt,c7,u7),hs=YO(Ht,dr,d.position),[us,hn]=XO(hs,kt,It,Nt,h7,d7);Lt=new fn(kt.clone(),us.clone(),hn.clone(),It.clone())}else Lt=new is$1(kt.clone(),d.position.clone(),It.clone());d.roundedCurveCorner=Lt,this.roundedCurves.splice(a+o,0,Lt),o++}}}}_subSplitCurve(e,o,a,c,d){if(e instanceof pn)c!==void 0&&o.v2.copy(c),d!==void 0&&o.v1.copy(d);else{let g=e,b=o,j=g.getUtoTmapping(a,0),$=QO(g.v0,g.v1,g.v2,g.v3,j);return c!==void 0&&(b.v0.set($[0],$[1]),b.v1.set($[2],$[3]),b.v2.set($[4],$[5]),b.v3.set($[6],$[7])),d!==void 0&&(b.v0.set($[6],$[7]),b.v1.set($[8],$[9]),b.v2.set($[10],$[11]),b.v3.set($[12],$[13])),b}return o}clone(){let e=new Xt(this._width,this._height);return e.points=this.points.map(o=>o.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(o=>o.clone()),e}toJSON(){return{points:this.points.reduce((e,o)=>e.concat(o.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var a;this.points=[],this.pointIDs=0;let o=e.points.length/7;for(let c=0;c<o;c++){let d=c*7,g=e.points[d+0],b=e.points[d+1],j=e.points[d+2],$=e.points[d+3],_e=e.points[d+4],st=e.points[d+5],rt=e.points[d+6],ut=new to(Me.generateUUID(),new z$2(g,b));ut.controls[0].position.set(j,$),ut.controls[1].position.set(_e,st),ut.roundness=rt,this.points.push(ut)}return this.shapeHoles=(a=e.shapeHoles)!=null&&a.length?e.shapeHoles.map(c=>{let d=new Xt;return d.fromJSON(c),d}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,o=!1){this.isText=o;let a=(d,g)=>{g instanceof fn&&g.v3.equals(d.position)&&d.controls[0].position.copy(g.v2)},c=d=>{let g=[],b,j;for(b=0,j=d.length;b<j;b++)d[b]instanceof is$1&&(d[b]=HO(d[b]));for(b=0,j=d.length;b<j;b++){let st=d[b],rt=b>0?d[b-1]:null,ut;st instanceof fn?(ut=this.createPoint(st.v0),ut.controls[1].position.copy(st.v1)):st instanceof pn&&(ut=this.createPoint(st.v1)),ut!==void 0&&(rt!==null&&a(ut,rt),g.push(ut))}let $=d[d.length-1],_e=!1;return $ instanceof fn?$.v3.equals(g[0].position)&&(g[0].controls[0].position.copy($.v2),_e=!0):$ instanceof pn&&$.v2.equals(g[0].position)&&(_e=!0),this.isClosed=_e,g};return this.points=c(e.curves),e instanceof xa&&(this.shapeHoles=e.holes.map(d=>{let g=new Xt;return g.fromShape(d),g})),this.update(),this}updatePoint(e,o){let a=this.getPointByUuid(e);a&&(o.position!==void 0&&a.position.fromArray(o.position),o.roundness!==void 0&&(a.roundness=o.roundness),o.areControlsDirectionsMirrored!==void 0&&(a.areControlsDirectionsMirrored=o.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,o){var c;let a=(c=this.getPointByUuid(e))==null?void 0:c.controls[0];a&&(o.position&&a.position.fromArray(o.position),this.needsUpdate=!0)}updateNextControl(e,o){var c;let a=(c=this.getPointByUuid(e))==null?void 0:c.controls[1];a&&(o.position&&a.position.fromArray(o.position),this.needsUpdate=!0)}},xA=Math.PI*2;function vA({x:e,y:o},a,c,d,g){return{x:e*a+d,y:o*c+g}}function f7(e,o){let a=o===1.5707963267948966?.551915024494:o===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(o/4),c=Math.cos(e),d=Math.sin(e),g=Math.cos(e+o),b=Math.sin(e+o);return[{x:c-d*a,y:d+c*a},{x:g+b*a,y:b-g*a},{x:g,y:b}]}function $O(e,o,a,c){let d=e*c-o*a<0?-1:1,g=Math.min(1,Math.max(-1,e*a+o*c));return d*Math.acos(g)}function p7(e,o,a,c,d,g,b,j,$,_e){let st=Math.pow(d,2),rt=Math.pow(g,2),ut=Math.pow(b,2),gt=Math.pow(j,2),yt=st*rt-st*gt-rt*ut;yt<0&&(yt=0),yt/=st*gt+rt*ut,yt=Math.sqrt(yt)*($===_e?-1:1);let wt=yt*d/g*j,Ct=yt*-g/d*b,Pt=wt+(e+a)/2,At=Ct+(o+c)/2,Tt=(b-wt)/d,kt=(j-Ct)/g,It=(-b-wt)/d,Lt=(-j-Ct)/g,Ft=$O(1,0,Tt,kt),Nt=$O(Tt,kt,It,Lt);return!_e&&Nt>0&&(Nt-=xA),_e&&Nt<0&&(Nt+=xA),{centerx:Pt,centery:At,ang1:Ft,ang2:Nt}}function eI({px:e,py:o,cx:a,cy:c,rx:d,ry:g,largeArcFlag:b,sweepFlag:j}){let $=[];if(d===0||g===0)return[];let _e=(e-a)/2,st=(o-c)/2;if(_e===0&&st===0)return[];d=Math.abs(d),g=Math.abs(g);let rt=Math.pow(_e,2)/Math.pow(d,2)+Math.pow(st,2)/Math.pow(g,2);rt>1&&(d*=Math.sqrt(rt),g*=Math.sqrt(rt));let ut=p7(e,o,a,c,d,g,_e,st,b,j),{ang1:gt,ang2:yt}=ut,{centerx:wt,centery:Ct}=ut,Pt=Math.abs(yt)/(xA/4);Math.abs(1-Pt)<1e-7&&(Pt=1);let At=Math.max(Math.ceil(Pt),1);yt/=At;for(let Tt=0;Tt<At;Tt++)$.push(f7(gt,yt)),gt+=yt;return $.map(Tt=>{let{x:kt,y:It}=vA(Tt[0],d,g,wt,Ct),{x:Lt,y:Ft}=vA(Tt[1],d,g,wt,Ct),{x:Nt,y:Ht}=vA(Tt[2],d,g,wt,Ct);return{x1:kt,y1:It,x2:Lt,y2:Ft,x:Nt,y:Ht}})}var Gt;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Gt||(Gt={}));var Wr$1;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Wr$1||(Wr$1={}));function ht(e,o){if(!e)throw o||"Assertion Failed!"}var ot=function(){function e(){}return e.vertEq=function(o,a){return o.s===a.s&&o.t===a.t},e.vertLeq=function(o,a){return o.s<a.s||o.s===a.s&&o.t<=a.t},e.transLeq=function(o,a){return o.t<a.t||o.t===a.t&&o.s<=a.s},e.edgeGoesLeft=function(o){return e.vertLeq(o.Dst,o.Org)},e.edgeGoesRight=function(o){return e.vertLeq(o.Org,o.Dst)},e.vertL1dist=function(o,a){return Math.abs(o.s-a.s)+Math.abs(o.t-a.t)},e.edgeEval=function(o,a,c){ht(e.vertLeq(o,a)&&e.vertLeq(a,c));var d=a.s-o.s,g=c.s-a.s;return d+g>0?d<g?a.t-o.t+(o.t-c.t)*(d/(d+g)):a.t-c.t+(c.t-o.t)*(g/(d+g)):0},e.edgeSign=function(o,a,c){ht(e.vertLeq(o,a)&&e.vertLeq(a,c));var d=a.s-o.s,g=c.s-a.s;return d+g>0?(a.t-c.t)*d+(a.t-o.t)*g:0},e.transEval=function(o,a,c){ht(e.transLeq(o,a)&&e.transLeq(a,c));var d=a.t-o.t,g=c.t-a.t;return d+g>0?d<g?a.s-o.s+(o.s-c.s)*(d/(d+g)):a.s-c.s+(c.s-o.s)*(g/(d+g)):0},e.transSign=function(o,a,c){ht(e.transLeq(o,a)&&e.transLeq(a,c));var d=a.t-o.t,g=c.t-a.t;return d+g>0?(a.s-c.s)*d+(a.s-o.s)*g:0},e.vertCCW=function(o,a,c){return o.s*(a.t-c.t)+a.s*(c.t-o.t)+c.s*(o.t-a.t)>=0},e.interpolate=function(o,a,c,d){return o=o<0?0:o,c=c<0?0:c,o<=c?c===0?(a+d)/2:a+(d-a)*(o/(o+c)):d+(a-d)*(c/(o+c))},e.intersect=function(o,a,c,d,g){var b,j,$;e.vertLeq(o,a)||($=o,o=a,a=$),e.vertLeq(c,d)||($=c,c=d,d=$),e.vertLeq(o,c)||($=o,o=c,c=$,$=a,a=d,d=$),e.vertLeq(c,a)?e.vertLeq(a,d)?(b=e.edgeEval(o,c,a),j=e.edgeEval(c,a,d),b+j<0&&(b=-b,j=-j),g.s=e.interpolate(b,c.s,j,a.s)):(b=e.edgeSign(o,c,a),j=-e.edgeSign(o,d,a),b+j<0&&(b=-b,j=-j),g.s=e.interpolate(b,c.s,j,d.s)):g.s=(c.s+a.s)/2,e.transLeq(o,a)||($=o,o=a,a=$),e.transLeq(c,d)||($=c,c=d,d=$),e.transLeq(o,c)||($=o,o=c,c=$,$=a,a=d,d=$),e.transLeq(c,a)?e.transLeq(a,d)?(b=e.transEval(o,c,a),j=e.transEval(c,a,d),b+j<0&&(b=-b,j=-j),g.t=e.interpolate(b,c.t,j,a.t)):(b=e.transSign(o,c,a),j=-e.transSign(o,d,a),b+j<0&&(b=-b,j=-j),g.t=e.interpolate(b,c.t,j,d.t)):g.t=(c.t+a.t)/2},e}(),Sm=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),R0=function(){function e(o){this.side=o,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(o){this.Sym.Lface=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(o){this.Sym.Org=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(o){this.Sym.Lnext=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(o){this.Onext.Sym=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(o){this.Lnext.Sym=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(o){this.Sym.Onext=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(o){this.Sym.Onext.Sym=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(o){this.Sym.Lnext.Sym=o},enumerable:!0,configurable:!0}),e}(),Rd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),tI=function(){function e(){var o=new Rd,a=new Sm,c=new R0(0),d=new R0(1);o.next=o.prev=o,o.anEdge=null,a.next=a.prev=a,c.next=c,c.Sym=d,d.next=d,d.Sym=c,this.vHead=o,this.fHead=a,this.eHead=c,this.eHeadSym=d}return e.prototype.makeEdge_=function(o){var a=new R0(0),c=new R0(1);o.Sym.side<o.side&&(o=o.Sym);var d=o.Sym.next;return c.next=d,d.Sym.next=a,a.next=o,o.Sym.next=c,a.Sym=c,a.Onext=a,a.Lnext=c,a.Org=null,a.Lface=null,a.winding=0,a.activeRegion=null,c.Sym=a,c.Onext=c,c.Lnext=a,c.Org=null,c.Lface=null,c.winding=0,c.activeRegion=null,a},e.prototype.splice_=function(o,a){var c=o.Onext,d=a.Onext;c.Sym.Lnext=a,d.Sym.Lnext=o,o.Onext=d,a.Onext=c},e.prototype.makeVertex_=function(o,a,c){var d=o;ht(d,"Vertex can't be null!");var g=c.prev;d.prev=g,g.next=d,d.next=c,c.prev=d,d.anEdge=a;var b=a;do b.Org=d,b=b.Onext;while(b!==a)},e.prototype.makeFace_=function(o,a,c){var d=o;ht(d,"Face can't be null");var g=c.prev;d.prev=g,g.next=d,d.next=c,c.prev=d,d.anEdge=a,d.trail=null,d.marked=!1,d.inside=c.inside;var b=a;do b.Lface=d,b=b.Lnext;while(b!==a)},e.prototype.killEdge_=function(o){o.Sym.side<o.side&&(o=o.Sym);var a=o.next,c=o.Sym.next;a.Sym.next=c,c.Sym.next=a},e.prototype.killVertex_=function(o,a){var c=o.anEdge,d=c;do d.Org=a,d=d.Onext;while(d!==c);var g=o.prev,b=o.next;b.prev=g,g.next=b},e.prototype.killFace_=function(o,a){var c=o.anEdge,d=c;do d.Lface=a,d=d.Lnext;while(d!==c);var g=o.prev,b=o.next;b.prev=g,g.next=b},e.prototype.makeEdge=function(){var o=new Rd,a=new Rd,c=new Sm,d=this.makeEdge_(this.eHead);return this.makeVertex_(o,d,this.vHead),this.makeVertex_(a,d.Sym,this.vHead),this.makeFace_(c,d,this.fHead),d},e.prototype.splice=function(o,a){var c=!1,d=!1;if(o!==a){if(a.Org!==o.Org&&(d=!0,this.killVertex_(a.Org,o.Org)),a.Lface!==o.Lface&&(c=!0,this.killFace_(a.Lface,o.Lface)),this.splice_(a,o),!d){var g=new Rd;this.makeVertex_(g,a,o.Org),o.Org.anEdge=o}if(!c){var b=new Sm;this.makeFace_(b,a,o.Lface),o.Lface.anEdge=o}}},e.prototype.delete=function(o){var a=o.Sym,c=!1;if(o.Lface!==o.Rface&&(c=!0,this.killFace_(o.Lface,o.Rface)),o.Onext===o)this.killVertex_(o.Org,null);else if(o.Rface.anEdge=o.Oprev,o.Org.anEdge=o.Onext,this.splice_(o,o.Oprev),!c){var d=new Sm;this.makeFace_(d,o,o.Lface)}a.Onext===a?(this.killVertex_(a.Org,null),this.killFace_(a.Lface,null)):(o.Lface.anEdge=a.Oprev,a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(o)},e.prototype.addEdgeVertex=function(o){var a=this.makeEdge_(o),c=a.Sym;this.splice_(a,o.Lnext),a.Org=o.Dst;var d=new Rd;return this.makeVertex_(d,c,a.Org),a.Lface=c.Lface=o.Lface,a},e.prototype.splitEdge=function(o){var a=this.addEdgeVertex(o),c=a.Sym;return this.splice_(o.Sym,o.Sym.Oprev),this.splice_(o.Sym,c),o.Dst=c.Org,c.Dst.anEdge=c.Sym,c.Rface=o.Rface,c.winding=o.winding,c.Sym.winding=o.Sym.winding,c.idx=o.idx,c.Sym.idx=o.Sym.idx,c},e.prototype.connect=function(o,a){var c=!1,d=this.makeEdge_(o),g=d.Sym;if(a.Lface!==o.Lface&&(c=!0,this.killFace_(a.Lface,o.Lface)),this.splice_(d,o.Lnext),this.splice_(g,a),d.Org=o.Dst,g.Org=a.Org,d.Lface=g.Lface=o.Lface,o.Lface.anEdge=g,!c){var b=new Sm;this.makeFace_(b,d,o.Lface)}return d},e.prototype.zapFace=function(o){var a=o.anEdge,c,d,g,b,j;d=a.Lnext;do c=d,d=c.Lnext,c.Lface=null,c.Rface===null&&(c.Onext===c?this.killVertex_(c.Org,null):(c.Org.anEdge=c.Onext,this.splice_(c,c.Oprev)),g=c.Sym,g.Onext===g?this.killVertex_(g.Org,null):(g.Org.anEdge=g.Onext,this.splice_(g,g.Oprev)),this.killEdge_(c));while(c!=a);b=o.prev,j=o.next,j.prev=b,b.next=j},e.prototype.countFaceVerts_=function(o){var a=o.anEdge,c=0;do c++,a=a.Lnext;while(a!==o.anEdge);return c},e.prototype.mergeConvexFaces=function(o){var a,c,d,g,b,j,$;for(a=this.fHead.next;a!==this.fHead;a=a.next)if(a.inside)for(c=a.anEdge,b=c.Org;d=c.Lnext,g=c.Sym,g&&g.Lface&&g.Lface.inside&&(j=this.countFaceVerts_(a),$=this.countFaceVerts_(g.Lface),j+$-2<=o&&ot.vertCCW(c.Lprev.Org,c.Org,g.Lnext.Lnext.Org)&&ot.vertCCW(g.Lprev.Org,g.Org,c.Lnext.Lnext.Org)&&(d=g.Lnext,this.delete(g),c=null,g=null)),!(c&&c.Lnext.Org===b);)c=d;return!0},e.prototype.check=function(){var o=this.fHead,a=this.vHead,c=this.eHead,d,g,b,j,$,_e;for(g=o,g=o;(d=g.next)!==o;g=d){ht(d.prev===g),$=d.anEdge;do ht($.Sym!==$),ht($.Sym.Sym===$),ht($.Lnext.Onext.Sym===$),ht($.Onext.Sym.Lnext===$),ht($.Lface===d),$=$.Lnext;while($!==d.anEdge)}for(ht(d.prev===g&&d.anEdge===null),j=a,j=a;(b=j.next)!==a;j=b){ht(b.prev===j),$=b.anEdge;do ht($.Sym!==$),ht($.Sym.Sym===$),ht($.Lnext.Onext.Sym===$),ht($.Onext.Sym.Lnext===$),ht($.Org===b),$=$.Onext;while($!==b.anEdge)}for(ht(b.prev===j&&b.anEdge===null),_e=c,_e=c;($=_e.next)!==c;_e=$)ht($.Sym.next===_e.Sym),ht($.Sym!==$),ht($.Sym.Sym===$),ht($.Org!==null),ht($.Dst!==null),ht($.Lnext.Onext.Sym===$),ht($.Onext.Sym.Lnext===$);ht($.Sym.next===_e.Sym&&$.Sym===this.eHeadSym&&$.Sym.Sym===$&&$.Org===null&&$.Dst===null&&$.Lface===null&&$.Rface===null)},e}(),rI=function(){function e(){this.handle=null}return e}(),iI=function(){function e(){this.key=null,this.node=0}return e}(),m7=function(){function e(o,a){this.leq=a,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=o,this.nodes=[],this.handles=[];for(var c=0;c<o+1;c++)this.nodes[c]=new rI,this.handles[c]=new iI;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(o){var a=this.nodes,c=this.handles,d,g,b;for(d=a[o].handle;;){if(b=o<<1,b<this.size&&this.leq(c[a[b+1].handle].key,c[a[b].handle].key)&&++b,ht(b<=this.max),g=a[b].handle,b>this.size||this.leq(c[d].key,c[g].key)){a[o].handle=d,c[d].node=o;break}a[o].handle=g,c[g].node=o,o=b}},e.prototype.floatUp_=function(o){var a=this.nodes,c=this.handles,d,g,b;for(d=a[o].handle;;){if(b=o>>1,g=a[b].handle,b===0||this.leq(c[g].key,c[d].key)){a[o].handle=d,c[d].node=o;break}a[o].handle=g,c[g].node=o,o=b}},e.prototype.init=function(){for(var o=this.size;o>=1;--o)this.floatDown_(o);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(o){var a,c;if(a=++this.size,a*2>this.max){this.max*=2;var d,g;for(g=this.nodes.length,this.nodes.length=this.max+1,d=g;d<this.nodes.length;d++)this.nodes[d]=new rI;for(g=this.handles.length,this.handles.length=this.max+1,d=g;d<this.handles.length;d++)this.handles[d]=new iI}return this.freeList===0?c=a:(c=this.freeList,this.freeList=this.handles[c].node),this.nodes[a].handle=c,this.handles[c].node=a,this.handles[c].key=o,this.initialized&&this.floatUp_(a),c},e.prototype.extractMin=function(){var o=this.nodes,a=this.handles,c=o[1].handle,d=a[c].key;return this.size>0&&(o[1].handle=o[this.size].handle,a[o[1].handle].node=1,a[c].key=null,a[c].node=this.freeList,this.freeList=c,--this.size,this.size>0&&this.floatDown_(1)),d},e.prototype.delete=function(o){var a=this.nodes,c=this.handles,d;ht(o>=1&&o<=this.max&&c[o].key!==null),d=c[o].node,a[d].handle=a[this.size].handle,c[a[d].handle].node=d,--this.size,d<=this.size&&(d<=1||this.leq(c[a[d>>1].handle].key,c[a[d].handle].key)?this.floatDown_(d):this.floatUp_(d)),c[o].key=null,c[o].node=this.freeList,this.freeList=o},e}(),bA=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),nI=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),g7=function(){function e(o,a){this.frame=o,this.leq=a,this.head=new nI,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(o){return this.insertBefore(this.head,o)},e.prototype.search=function(o){var a=this.head;do a=a.next;while(a.key!==null&&!this.leq(this.frame,o,a.key));return a},e.prototype.insertBefore=function(o,a){do o=o.prev;while(o.key!==null&&!this.leq(this.frame,o.key,a));var c=new nI;return c.key=a,c.next=o.next,o.next.prev=c,c.prev=o,o.next=c,c},e.prototype.delete=function(o){o.next.prev=o.prev,o.prev.next=o.next},e}(),y7=function(){function e(){}return e.regionBelow=function(o){return o.nodeUp.prev.key},e.regionAbove=function(o){return o.nodeUp.next.key},e.debugEvent=function(o){},e.addWinding=function(o,a){o.winding+=a.winding,o.Sym.winding+=a.Sym.winding},e.edgeLeq=function(o,a,c){var d=o.event,g=a.eUp,b=c.eUp;if(g.Dst===d)return b.Dst===d?ot.vertLeq(g.Org,b.Org)?ot.edgeSign(b.Dst,g.Org,b.Org)<=0:ot.edgeSign(g.Dst,b.Org,g.Org)>=0:ot.edgeSign(b.Dst,d,b.Org)<=0;if(b.Dst===d)return ot.edgeSign(g.Dst,d,g.Org)>=0;var j=ot.edgeEval(g.Dst,d,g.Org),$=ot.edgeEval(b.Dst,d,b.Org);return j>=$},e.deleteRegion=function(o,a){a.fixUpperEdge&&ht(a.eUp.winding===0),a.eUp.activeRegion=null,o.dict.delete(a.nodeUp)},e.fixUpperEdge=function(o,a,c){ht(a.fixUpperEdge),o.mesh.delete(a.eUp),a.fixUpperEdge=!1,a.eUp=c,c.activeRegion=a},e.topLeftRegion=function(o,a){var c=a.eUp.Org,d;do a=e.regionAbove(a);while(a.eUp.Org===c);if(a.fixUpperEdge){if(d=o.mesh.connect(e.regionBelow(a).eUp.Sym,a.eUp.Lnext),d===null)return null;e.fixUpperEdge(o,a,d),a=e.regionAbove(a)}return a},e.topRightRegion=function(o){var a=o.eUp.Dst;do o=e.regionAbove(o);while(o.eUp.Dst===a);return o},e.addRegionBelow=function(o,a,c){var d=new bA;return d.eUp=c,d.nodeUp=o.dict.insertBefore(a.nodeUp,d),d.fixUpperEdge=!1,d.sentinel=!1,d.dirty=!1,c.activeRegion=d,d},e.isWindingInside=function(o,a){switch(o.windingRule){case Gt.ODD:return(a&1)!==0;case Gt.NONZERO:return a!==0;case Gt.POSITIVE:return a>0;case Gt.NEGATIVE:return a<0;case Gt.ABS_GEQ_TWO:return a>=2||a<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(o,a){a.windingNumber=e.regionAbove(a).windingNumber+a.eUp.winding,a.inside=e.isWindingInside(o,a.windingNumber)},e.finishRegion=function(o,a){var c=a.eUp,d=c.Lface;d.inside=a.inside,d.anEdge=c,e.deleteRegion(o,a)},e.finishLeftRegions=function(o,a,c){for(var d,g=null,b=a,j=a.eUp;b!==c;){if(b.fixUpperEdge=!1,g=e.regionBelow(b),d=g.eUp,d.Org!=j.Org){if(!g.fixUpperEdge){e.finishRegion(o,b);break}d=o.mesh.connect(j.Lprev,d.Sym),e.fixUpperEdge(o,g,d)}j.Onext!==d&&(o.mesh.splice(d.Oprev,d),o.mesh.splice(j,d)),e.finishRegion(o,b),j=g.eUp,b=g}return j},e.addRightEdges=function(o,a,c,d,g,b){var j,$,_e,st,rt=!0;_e=c;do ht(ot.vertLeq(_e.Org,_e.Dst)),e.addRegionBelow(o,a,_e.Sym),_e=_e.Onext;while(_e!==d);for(g===null&&(g=e.regionBelow(a).eUp.Rprev),$=a,st=g;j=e.regionBelow($),_e=j.eUp.Sym,_e.Org===st.Org;)_e.Onext!==st&&(o.mesh.splice(_e.Oprev,_e),o.mesh.splice(st.Oprev,_e)),j.windingNumber=$.windingNumber-_e.winding,j.inside=e.isWindingInside(o,j.windingNumber),$.dirty=!0,!rt&&e.checkForRightSplice(o,$)&&(e.addWinding(_e,st),e.deleteRegion(o,$),o.mesh.delete(st)),rt=!1,$=j,st=_e;$.dirty=!0,ht($.windingNumber-_e.winding===j.windingNumber),b&&e.walkDirtyRegions(o,$)},e.spliceMergeVertices=function(o,a,c){o.mesh.splice(a,c)},e.vertexWeights=function(o,a,c){var d=ot.vertL1dist(a,o),g=ot.vertL1dist(c,o),b=.5*g/(d+g),j=.5*d/(d+g);o.coords[0]+=b*a.coords[0]+j*c.coords[0],o.coords[1]+=b*a.coords[1]+j*c.coords[1],o.coords[2]+=b*a.coords[2]+j*c.coords[2]},e.getIntersectData=function(o,a,c,d,g,b){a.coords[0]=a.coords[1]=a.coords[2]=0,a.idx=-1,e.vertexWeights(a,c,d),e.vertexWeights(a,g,b)},e.checkForRightSplice=function(o,a){var c=e.regionBelow(a),d=a.eUp,g=c.eUp;if(ot.vertLeq(d.Org,g.Org)){if(ot.edgeSign(g.Dst,d.Org,g.Org)>0)return!1;ot.vertEq(d.Org,g.Org)?d.Org!==g.Org&&(o.pq.delete(d.Org.pqHandle),e.spliceMergeVertices(o,g.Oprev,d)):(o.mesh.splitEdge(g.Sym),o.mesh.splice(d,g.Oprev),a.dirty=c.dirty=!0)}else{if(ot.edgeSign(d.Dst,g.Org,d.Org)<0)return!1;e.regionAbove(a).dirty=a.dirty=!0,o.mesh.splitEdge(d.Sym),o.mesh.splice(g.Oprev,d)}return!0},e.checkForLeftSplice=function(o,a){var c=e.regionBelow(a),d=a.eUp,g=c.eUp,b;if(ht(!ot.vertEq(d.Dst,g.Dst)),ot.vertLeq(d.Dst,g.Dst)){if(ot.edgeSign(d.Dst,g.Dst,d.Org)<0)return!1;e.regionAbove(a).dirty=a.dirty=!0,b=o.mesh.splitEdge(d),o.mesh.splice(g.Sym,b),b.Lface.inside=a.inside}else{if(ot.edgeSign(g.Dst,d.Dst,g.Org)>0)return!1;a.dirty=c.dirty=!0,b=o.mesh.splitEdge(g),o.mesh.splice(d.Lnext,g.Sym),b.Rface.inside=a.inside}return!0},e.checkForIntersect=function(o,a){var c=e.regionBelow(a),d=a.eUp,g=c.eUp,b=d.Org,j=g.Org,$=d.Dst,_e=g.Dst,st,rt,ut=new Rd,gt,yt;if(ht(!ot.vertEq(_e,$)),ht(ot.edgeSign($,o.event,b)<=0),ht(ot.edgeSign(_e,o.event,j)>=0),ht(b!==o.event&&j!==o.event),ht(!a.fixUpperEdge&&!c.fixUpperEdge),b===j||(st=Math.min(b.t,$.t),rt=Math.max(j.t,_e.t),st>rt))return!1;if(ot.vertLeq(b,j)){if(ot.edgeSign(_e,b,j)>0)return!1}else if(ot.edgeSign($,j,b)<0)return!1;return e.debugEvent(o),ot.intersect($,b,_e,j,ut),ht(Math.min(b.t,$.t)<=ut.t),ht(ut.t<=Math.max(j.t,_e.t)),ht(Math.min(_e.s,$.s)<=ut.s),ht(ut.s<=Math.max(j.s,b.s)),ot.vertLeq(ut,o.event)&&(ut.s=o.event.s,ut.t=o.event.t),gt=ot.vertLeq(b,j)?b:j,ot.vertLeq(gt,ut)&&(ut.s=gt.s,ut.t=gt.t),ot.vertEq(ut,b)||ot.vertEq(ut,j)?(e.checkForRightSplice(o,a),!1):!ot.vertEq($,o.event)&&ot.edgeSign($,o.event,ut)>=0||!ot.vertEq(_e,o.event)&&ot.edgeSign(_e,o.event,ut)<=0?_e===o.event?(o.mesh.splitEdge(d.Sym),o.mesh.splice(g.Sym,d),a=e.topLeftRegion(o,a),d=e.regionBelow(a).eUp,e.finishLeftRegions(o,e.regionBelow(a),c),e.addRightEdges(o,a,d.Oprev,d,d,!0),!0):$===o.event?(o.mesh.splitEdge(g.Sym),o.mesh.splice(d.Lnext,g.Oprev),c=a,a=e.topRightRegion(a),yt=e.regionBelow(a).eUp.Rprev,c.eUp=g.Oprev,g=e.finishLeftRegions(o,c,null),e.addRightEdges(o,a,g.Onext,d.Rprev,yt,!0),!0):(ot.edgeSign($,o.event,ut)>=0&&(e.regionAbove(a).dirty=a.dirty=!0,o.mesh.splitEdge(d.Sym),d.Org.s=o.event.s,d.Org.t=o.event.t),ot.edgeSign(_e,o.event,ut)<=0&&(a.dirty=c.dirty=!0,o.mesh.splitEdge(g.Sym),g.Org.s=o.event.s,g.Org.t=o.event.t),!1):(o.mesh.splitEdge(d.Sym),o.mesh.splitEdge(g.Sym),o.mesh.splice(g.Oprev,d),d.Org.s=ut.s,d.Org.t=ut.t,d.Org.pqHandle=o.pq.insert(d.Org),e.getIntersectData(o,d.Org,b,$,j,_e),e.regionAbove(a).dirty=a.dirty=c.dirty=!0,!1)},e.walkDirtyRegions=function(o,a){for(var c=e.regionBelow(a),d,g;;){for(;c.dirty;)a=c,c=e.regionBelow(c);if(!a.dirty&&(c=a,a=e.regionAbove(a),a===null||!a.dirty))return;if(a.dirty=!1,d=a.eUp,g=c.eUp,d.Dst!==g.Dst&&e.checkForLeftSplice(o,a)&&(c.fixUpperEdge?(e.deleteRegion(o,c),o.mesh.delete(g),c=e.regionBelow(a),g=c.eUp):a.fixUpperEdge&&(e.deleteRegion(o,a),o.mesh.delete(d),a=e.regionAbove(c),d=a.eUp)),d.Org!==g.Org)if(d.Dst!==g.Dst&&!a.fixUpperEdge&&!c.fixUpperEdge&&(d.Dst===o.event||g.Dst===o.event)){if(e.checkForIntersect(o,a))return}else e.checkForRightSplice(o,a);d.Org===g.Org&&d.Dst===g.Dst&&(e.addWinding(g,d),e.deleteRegion(o,a),o.mesh.delete(d),a=e.regionAbove(c))}},e.connectRightVertex=function(o,a,c){var d,g=c.Onext,b=e.regionBelow(a),j=a.eUp,$=b.eUp,_e=!1;if(j.Dst!==$.Dst&&e.checkForIntersect(o,a),ot.vertEq(j.Org,o.event)&&(o.mesh.splice(g.Oprev,j),a=e.topLeftRegion(o,a),g=e.regionBelow(a).eUp,e.finishLeftRegions(o,e.regionBelow(a),b),_e=!0),ot.vertEq($.Org,o.event)&&(o.mesh.splice(c,$.Oprev),c=e.finishLeftRegions(o,b,null),_e=!0),_e){e.addRightEdges(o,a,c.Onext,g,g,!0);return}ot.vertLeq($.Org,j.Org)?d=$.Oprev:d=j,d=o.mesh.connect(c.Lprev,d),e.addRightEdges(o,a,d,d.Onext,d.Onext,!1),d.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(o,a)},e.connectLeftDegenerate=function(o,a,c){var d,g,b,j,$;if(d=a.eUp,ot.vertEq(d.Org,c)){ht(!1),e.spliceMergeVertices(o,d,c.anEdge);return}if(!ot.vertEq(d.Dst,c)){o.mesh.splitEdge(d.Sym),a.fixUpperEdge&&(o.mesh.delete(d.Onext),a.fixUpperEdge=!1),o.mesh.splice(c.anEdge,d),e.sweepEvent(o,c);return}ht(!1),a=e.topRightRegion(a),$=e.regionBelow(a),b=$.eUp.Sym,g=j=b.Onext,$.fixUpperEdge&&(ht(g!==b),e.deleteRegion(o,$),o.mesh.delete(b),b=g.Oprev),o.mesh.splice(c.anEdge,b),ot.edgeGoesLeft(g)||(g=null),e.addRightEdges(o,a,b.Onext,j,g,!0)},e.connectLeftVertex=function(o,a){var c,d,g,b,j,$,_e=new bA;if(_e.eUp=a.anEdge.Sym,c=o.dict.search(_e).key,d=e.regionBelow(c),!!d){if(b=c.eUp,j=d.eUp,ot.edgeSign(b.Dst,a,b.Org)===0){e.connectLeftDegenerate(o,c,a);return}if(g=ot.vertLeq(j.Dst,b.Dst)?c:d,c.inside||g.fixUpperEdge){if(g===c)$=o.mesh.connect(a.anEdge.Sym,b.Lnext);else{var st=o.mesh.connect(j.Dnext,a.anEdge);$=st.Sym}g.fixUpperEdge?e.fixUpperEdge(o,g,$):e.computeWinding(o,e.addRegionBelow(o,c,$)),e.sweepEvent(o,a)}else e.addRightEdges(o,c,a.anEdge,a.anEdge,null,!0)}},e.sweepEvent=function(o,a){o.event=a,e.debugEvent(o);for(var c=a.anEdge;c.activeRegion===null;)if(c=c.Onext,c===a.anEdge){e.connectLeftVertex(o,a);return}var d=e.topLeftRegion(o,c.activeRegion);ht(d!==null);var g=e.regionBelow(d),b=g.eUp,j=e.finishLeftRegions(o,g,null);j.Onext===b?e.connectRightVertex(o,d,j):e.addRightEdges(o,d,j.Onext,b,b,!0)},e.addSentinel=function(o,a,c,d){var g=new bA,b=o.mesh.makeEdge();b.Org.s=c,b.Org.t=d,b.Dst.s=a,b.Dst.t=d,o.event=b.Dst,g.eUp=b,g.windingNumber=0,g.inside=!1,g.fixUpperEdge=!1,g.sentinel=!0,g.dirty=!1,g.nodeUp=o.dict.insert(g)},e.initEdgeDict=function(o){o.dict=new g7(o,e.edgeLeq);var a=o.bmax[0]-o.bmin[0],c=o.bmax[1]-o.bmin[1],d=o.bmin[0]-a,g=o.bmax[0]+a,b=o.bmin[1]-c,j=o.bmax[1]+c;e.addSentinel(o,d,g,b),e.addSentinel(o,d,g,j)},e.doneEdgeDict=function(o){for(var a,c=0;(a=o.dict.min().key)!==null;)a.sentinel||(ht(a.fixUpperEdge),ht(++c===1)),ht(a.windingNumber===0),e.deleteRegion(o,a)},e.removeDegenerateEdges=function(o){var a,c,d,g=o.mesh.eHead;for(a=g.next;a!==g;a=c)c=a.next,d=a.Lnext,ot.vertEq(a.Org,a.Dst)&&a.Lnext.Lnext!==a&&(e.spliceMergeVertices(o,d,a),o.mesh.delete(a),a=d,d=a.Lnext),d.Lnext===a&&(d!==a&&((d===c||d===c.Sym)&&(c=c.next),o.mesh.delete(d)),(a===c||a===c.Sym)&&(c=c.next),o.mesh.delete(a))},e.initPriorityQ=function(o){var a,c,d,g=0;for(d=o.mesh.vHead,c=d.next;c!==d;c=c.next)g++;for(g+=8,a=o.pq=new m7(g,ot.vertLeq),d=o.mesh.vHead,c=d.next;c!==d;c=c.next)c.pqHandle=a.insert(c);return c!==d?!1:(a.init(),!0)},e.donePriorityQ=function(o){o.pq=null},e.removeDegenerateFaces=function(o,a){var c,d,g;for(c=a.fHead.next;c!==a.fHead;c=d)d=c.next,g=c.anEdge,ht(g.Lnext!==g),g.Lnext.Lnext===g&&(e.addWinding(g.Onext,g),o.mesh.delete(g));return!0},e.computeInterior=function(o,a){a===void 0&&(a=!0);var c,d;if(e.removeDegenerateEdges(o),!e.initPriorityQ(o))return!1;for(e.initEdgeDict(o);(c=o.pq.extractMin())!==null;){for(;d=o.pq.min(),!(d===null||!ot.vertEq(d,c));)d=o.pq.extractMin(),e.spliceMergeVertices(o,c.anEdge,d.anEdge);e.sweepEvent(o,c)}return o.event=o.dict.min().key.eUp.Org,e.debugEvent(o),e.doneEdgeDict(o),e.donePriorityQ(o),e.removeDegenerateFaces(o,o.mesh)?(a&&o.mesh.check(),!0):!1},e}(),v7=function(){function e(){this.mesh=new tI,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Gt.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]},e.prototype.normalize_=function(o){var a=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(!a)throw"Zero-size vector!";a=Math.sqrt(a),o[0]/=a,o[1]/=a,o[2]/=a},e.prototype.longAxis_=function(o){var a=0;return Math.abs(o[1])>Math.abs(o[0])&&(a=1),Math.abs(o[2])>Math.abs(o[a])&&(a=2),a},e.prototype.computeNormal_=function(o){var a,c,d,g,b,j,$=[0,0,0],_e=[0,0,0],st=[0,0,0],rt=[0,0,0],ut=[0,0,0],gt=[null,null,null],yt=[null,null,null],wt=this.mesh.vHead;a=wt.next;for(var Ct=0;Ct<3;++Ct)g=a.coords[Ct],_e[Ct]=g,yt[Ct]=a,$[Ct]=g,gt[Ct]=a;for(a=wt.next;a!==wt;a=a.next)for(var Pt=0;Pt<3;++Pt)g=a.coords[Pt],g<_e[Pt]&&(_e[Pt]=g,yt[Pt]=a),g>$[Pt]&&($[Pt]=g,gt[Pt]=a);var At=0;if($[1]-_e[1]>$[0]-_e[0]&&(At=1),$[2]-_e[2]>$[At]-_e[At]&&(At=2),_e[At]>=$[At]){o[0]=0,o[1]=0,o[2]=1;return}for(j=0,c=yt[At],d=gt[At],st[0]=c.coords[0]-d.coords[0],st[1]=c.coords[1]-d.coords[1],st[2]=c.coords[2]-d.coords[2],a=wt.next;a!==wt;a=a.next)rt[0]=a.coords[0]-d.coords[0],rt[1]=a.coords[1]-d.coords[1],rt[2]=a.coords[2]-d.coords[2],ut[0]=st[1]*rt[2]-st[2]*rt[1],ut[1]=st[2]*rt[0]-st[0]*rt[2],ut[2]=st[0]*rt[1]-st[1]*rt[0],b=ut[0]*ut[0]+ut[1]*ut[1]+ut[2]*ut[2],b>j&&(j=b,o[0]=ut[0],o[1]=ut[1],o[2]=ut[2]);j<=0&&(o[0]=o[1]=o[2]=0,o[this.longAxis_(st)]=1)},e.prototype.checkOrientation_=function(){for(var o=this.mesh.fHead,a,c=this.mesh.vHead,d,g=0,b=o.next;b!==o;b=b.next)if(d=b.anEdge,!(d.winding<=0))do g+=(d.Org.s-d.Dst.s)*(d.Org.t+d.Dst.t),d=d.Lnext;while(d!==b.anEdge);if(g<0){for(a=c.next;a!==c;a=a.next)a.t=-a.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var o=this.mesh.vHead,a=[0,0,0],c,d,g=!1;a[0]=this.normal[0],a[1]=this.normal[1],a[2]=this.normal[2],!a[0]&&!a[1]&&!a[2]&&(this.computeNormal_(a),g=!0),c=this.sUnit,d=this.tUnit;var b=this.longAxis_(a);c[b]=0,c[(b+1)%3]=1,c[(b+2)%3]=0,d[b]=0,d[(b+1)%3]=0,d[(b+2)%3]=a[b]>0?1:-1;for(var j=o.next;j!==o;j=j.next)j.s=this.dot_(j.coords,c),j.t=this.dot_(j.coords,d);g&&this.checkOrientation_();for(var $=!0,_e=o.next;_e!==o;_e=_e.next)$?(this.bmin[0]=this.bmax[0]=_e.s,this.bmin[1]=this.bmax[1]=_e.t,$=!1):(_e.s<this.bmin[0]&&(this.bmin[0]=_e.s),_e.s>this.bmax[0]&&(this.bmax[0]=_e.s),_e.t<this.bmin[1]&&(this.bmin[1]=_e.t),_e.t>this.bmax[1]&&(this.bmax[1]=_e.t))},e.prototype.addWinding_=function(o,a){o.winding+=a.winding,o.Sym.winding+=a.Sym.winding},e.prototype.tessellateMonoRegion_=function(o,a){var c,d;if(c=a.anEdge,!(c.Lnext!==c&&c.Lnext.Lnext!==c))throw"Mono region invalid";for(;ot.vertLeq(c.Dst,c.Org);c=c.Lprev);for(;ot.vertLeq(c.Org,c.Dst);c=c.Lnext);d=c.Lprev;for(var g=void 0;c.Lnext!==d;)if(ot.vertLeq(c.Dst,d.Org)){for(;d.Lnext!==c&&(ot.edgeGoesLeft(d.Lnext)||ot.edgeSign(d.Org,d.Dst,d.Lnext.Dst)<=0);)g=o.connect(d.Lnext,d),d=g.Sym;d=d.Lprev}else{for(;d.Lnext!==c&&(ot.edgeGoesRight(c.Lprev)||ot.edgeSign(c.Dst,c.Org,c.Lprev.Org)>=0);)g=o.connect(c,c.Lprev),c=g.Sym;c=c.Lnext}if(d.Lnext===c)throw"Mono region invalid";for(;d.Lnext.Lnext!==c;)g=o.connect(d.Lnext,d),d=g.Sym;return!0},e.prototype.tessellateInterior_=function(o){for(var a,c=o.fHead.next;c!==o.fHead;c=a)if(a=c.next,c.inside&&!this.tessellateMonoRegion_(o,c))return!1;return!0},e.prototype.discardExterior_=function(o){for(var a,c=o.fHead.next;c!==o.fHead;c=a)a=c.next,c.inside||o.zapFace(c)},e.prototype.setWindingNumber_=function(o,a,c){for(var d,g=o.eHead.next;g!==o.eHead;g=d)d=g.next,g.Rface.inside!==g.Lface.inside?g.winding=g.Lface.inside?a:-a:c?o.delete(g):g.winding=0},e.prototype.getNeighbourFace_=function(o){return!o.Rface||!o.Rface.inside?-1:o.Rface.n},e.prototype.outputPolymesh_=function(o,a,c,d){var g,b=0,j=0,$;c>3&&o.mergeConvexFaces(c);for(var _e=o.vHead.next;_e!==o.vHead;_e=_e.next)_e.n=-1;for(var st=o.fHead.next;st!==o.fHead;st=st.next)if(st.n=-1,!!st.inside){g=st.anEdge,$=0;do{var _e=g.Org;_e.n===-1&&(_e.n=j,j++),$++,g=g.Lnext}while(g!==st.anEdge);if($>c)throw"Face vertex greater that support polygon";st.n=b,++b}this.elementCount=b,a===Wr$1.CONNECTED_POLYGONS&&(b*=2),this.elements=[],this.elements.length=b*c,this.vertexCount=j,this.vertices=[],this.vertices.length=j*d,this.vertexIndices=[],this.vertexIndices.length=j;for(var _e=o.vHead.next;_e!==o.vHead;_e=_e.next)if(_e.n!==-1){var rt=_e.n*d;this.vertices[rt+0]=_e.coords[0],this.vertices[rt+1]=_e.coords[1],d>2&&(this.vertices[rt+2]=_e.coords[2]),this.vertexIndices[_e.n]=_e.idx}for(var ut=0,st=o.fHead.next;st!==o.fHead;st=st.next)if(st.inside){g=st.anEdge,$=0;do{var _e=g.Org;this.elements[ut++]=_e.n,$++,g=g.Lnext}while(g!==st.anEdge);for(var gt=$;gt<c;++gt)this.elements[ut++]=-1;if(a===Wr$1.CONNECTED_POLYGONS){g=st.anEdge;do this.elements[ut++]=this.getNeighbourFace_(g),g=g.Lnext;while(g!==st.anEdge);for(var yt=$;yt<c;++yt)this.elements[ut++]=-1}}},e.prototype.outputContours_=function(o,a){var c,d,g=0,b=0;this.vertexCount=0,this.elementCount=0;for(var j=o.fHead.next;j!==o.fHead;j=j.next)if(j.inside){d=c=j.anEdge;do this.vertexCount++,c=c.Lnext;while(c!==d);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*a,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var $=0,_e=0,st=0;g=0;for(var j=o.fHead.next;j!==o.fHead;j=j.next)if(j.inside){b=0,d=c=j.anEdge;do this.vertices[$++]=c.Org.coords[0],this.vertices[$++]=c.Org.coords[1],a>2&&(this.vertices[$++]=c.Org.coords[2]),this.vertexIndices[_e++]=this.vertexIdCallback?this.vertexIdCallback(c):c.Org.idx,b++,c=c.Lnext;while(c!==d);this.elements[st++]=g,this.elements[st++]=b,g+=b}},e.prototype.addContour=function(o,a){this.mesh===null&&(this.mesh=new tI),o<2&&(o=2),o>3&&(o=3);for(var c=null,d=0;d<a.length;d+=o)c===null?(c=this.mesh.makeEdge(),this.mesh.splice(c,c.Sym)):(this.mesh.splitEdge(c),c=c.Lnext),c.Org.coords[0]=a[d+0],c.Org.coords[1]=a[d+1],o>2?c.Org.coords[2]=a[d+2]:c.Org.coords[2]=0,c.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(c),c.winding=1,c.Sym.winding=-1},e.prototype.tesselate=function(o,a,c,d,g,b){if(o===void 0&&(o=Gt.ODD),a===void 0&&(a=Wr$1.POLYGONS),b===void 0&&(b=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,g&&(this.normal[0]=g[0],this.normal[1]=g[1],this.normal[2]=g[2]),this.windingRule=o,d<2&&(d=2),d>3&&(d=3),!this.mesh)return!1;this.projectPolygon_(),y7.computeInterior(this,b);var j=this.mesh;return a===Wr$1.BOUNDARY_CONTOURS?this.setWindingNumber_(j,1,!0):this.tessellateInterior_(j),b&&j.check(),a===Wr$1.BOUNDARY_CONTOURS?this.outputContours_(j,d):this.outputPolymesh_(j,a,c,d),!0},e}();function ro(e){var o=e.windingRule,a=o===void 0?Gt.ODD:o,c=e.elementType,d=c===void 0?Wr$1.POLYGONS:c,g=e.polySize,b=g===void 0?3:g,j=e.vertexSize,$=j===void 0?2:j,_e=e.normal,st=_e===void 0?[0,0,1]:_e,rt=e.contours,ut=rt===void 0?[]:rt,gt=e.strict,yt=gt===void 0?!0:gt,wt=e.debug,Ct=wt===void 0?!1:wt;if(!ut&&yt)throw new Error("Contours can't be empty");if(ut){var Pt=new v7;e.edgeCreateCallback&&(Pt.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(Pt.vertexIdCallback=e.vertexIdCallback);for(var At=0;At<ut.length;At++)Pt.addContour($||2,ut[At]);return Pt.tesselate(a,d,b,$,st,yt),{vertices:Pt.vertices,vertexIndices:Pt.vertexIndices,vertexCount:Pt.vertexCount,elements:Pt.elements,elementCount:Pt.elementCount,mesh:Ct?Pt.mesh:void 0}}}Gt.ODD;Gt.NONZERO;Gt.POSITIVE;Gt.NEGATIVE;Gt.ABS_GEQ_TWO;Wr$1.POLYGONS;Wr$1.CONNECTED_POLYGONS;Wr$1.BOUNDARY_CONTOURS;var L0=class{constructor(e=256,o=!1){this.capacity=e,this.size=0,this.debug=o,this.debug&&console.log(`allocating with cap ${e}`);let a=e*L0.eSize;this.buffer=new ArrayBuffer(a);let c=Float32Array.BYTES_PER_ELEMENT,d=0;this.positions=new Float32Array(this.buffer,d*c,3*e),d+=3*e,this.normals=new Float32Array(this.buffer,d*c,3*e),d+=3*e,this.uvs=new Float32Array(this.buffer,d*c,2*e)}realloc(e,o=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!o)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let a=e*L0.eSize,c=new ArrayBuffer(a),d=Float32Array.BYTES_PER_ELEMENT,g=0,b=new Float32Array(c,g*d,3*e);g+=3*e;let j=new Float32Array(c,g*d,3*e);g+=3*e;let $=new Float32Array(c,g*d,2*e);o?(b.set(this.positions.subarray(0,this.size*3)),j.set(this.normals.subarray(0,this.size*3)),$.set(this.uvs.subarray(0,this.size*2))):(b.set(this.positions),j.set(this.normals),$.set(this.uvs)),this.buffer=c,this.positions=b,this.normals=j,this.uvs=$,this.capacity=e}get(e=1){let o=this.size+e;if(o>this.capacity){let c=this.capacity;for(;o>c;)c*=2;this.realloc(c)}let a=this.size;return this.size=o,a}reserve(e){let o=this.size+e;o>this.capacity&&this.realloc(o)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},wm=L0;wm.eSize=8*Float32Array.BYTES_PER_ELEMENT;var lI=pi(aI()),Am={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},EA={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},TA={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},_A=(e,o)=>([a,c])=>(c<a&&(c+=o),(e>=a?e:e+o)<=c),Hl=class extends Pe{constructor(e,o,a=0,c=12,d=3,g=Gt.ODD,b=!1){super(),this.forPathBevel=b,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=o,this._curveSegments=c,this._bevelSegmentsInput=d;let j=this._shape.extractShapePointsToFlatArray([],c),$=this._shape.shapeHoles.map(Ht=>{let dr=Ht.extractShapePointsToFlatArray([],c),hs=[];for(let us=dr.length-1;us>=1;us-=2){let hn=dr[us-1],un=dr[us-0];hs.push(hn,un)}return hs}),_e=[],st=[];for(let Ht=0;Ht<j.length;Ht+=2)st.push([j[Ht],j[Ht+1]]);_e.push(st);for(let Ht=0;Ht<$.length;Ht++){let dr=$[Ht],hs=[];for(let us=0;us<dr.length;us+=2)hs.push([dr[us],dr[us+1]]);_e.push(hs)}let rt;e.isText?rt=new lh().setFromPoints(e.points.map(Ht=>Ht.position)).getSize(new z$2).length()*.1:_e[0].length===0?rt=a:rt=(0,lI.default)(_e).distance,a<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(a,rt,o/2),this._bevelSegments=Math.floor(d));let ut;try{ut=ro({windingRule:g,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[j]})}catch{ut=Am}let gt;try{gt=ro({windingRule:Gt.ODD,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...$]})}catch{gt=EA}if(!ut)throw new Error("error generating geometry");let yt=ut.elementCount;if(gt){ut.elementCount+=gt.elementCount;for(let Ht=0;Ht<gt.elements.length;Ht++){let dr=gt.elements[Ht],hs=Ht%2===0?ut.vertexCount:0;ut.elements.push(dr+hs)}for(let Ht=0;Ht<gt.vertexIndices.length;Ht++){let dr=gt.vertexIndices[Ht],hs=ut.vertexCount;ut.vertexIndices.push(dr+hs)}for(let Ht=0;Ht<gt.vertices.length;Ht++){let dr=gt.vertices[Ht];ut.vertices.push(dr)}}let wt=1/0,Ct=-1/0,Pt=1/0,At=-1/0;for(let Ht=0,dr=ut.vertexCount;Ht<dr;Ht++){let hs=Ht*2,us=ut.vertices[hs+0],hn=ut.vertices[hs+1];us<wt&&(wt=us),us>Ct&&(Ct=us),hn<Pt&&(Pt=hn),hn>At&&(At=hn)}this._minX=wt,this._minY=Pt,this._width=Ct-wt,this._height=At-Pt,this._buffer=new wm(this._computeBufferEstimatedSize(ut));let Tt=[],kt=[];for(let Ht=ut.elementCount-1;Ht>=0;Ht--){let dr=Ht>=yt,hs=Ht*2,us=ut.elements[hs+0],hn=ut.elements[hs+1],un=us+hn,bo={start:us,count:hn,normals:[],continuous:[],concave:[]},_s=us,gn=un-1,Gr=us+1,ds=this._shape.roundedCurves.length;do{let ou=_s-us,g0=ut.vertices[gn*2+0],Su=ut.vertices[gn*2+1],l1=ut.vertices[_s*2+0],B0=ut.vertices[_s*2+1],a1=ut.vertices[Gr*2+0],q1=ut.vertices[Gr*2+1],ox=l1-g0,U_=B0-Su,tS=Math.sqrt(ox*ox+U_*U_);ox/=tS,U_/=tS;let iS=l1-a1,wA=B0-q1,pO=Math.sqrt(iS*iS+wA*wA);iS/=pO,wA/=pO,bo.normals[ou*2+0]=-wA,bo.normals[ou*2+1]=iS,bo.concave[ou]=ox*wA-U_*iS>0;let aR=ut.vertexIndices[_s];if(Array.isArray(aR))bo.continuous[ou]=!1;else{let[fD,AA]=this._shape.getCurveIndexFromVertexId(aR-1,!0);if(AA>0&&AA<1)bo.continuous[ou]=!0;else{let oI=AA===1?fD+1:fD-1;oI=(oI+ds)%ds;let mO=AA===1?0:1,sp=this._shape.roundedCurves[fD].getTangent(AA),xu=this._shape.roundedCurves[oI].getTangent(mO);bo.continuous[ou]=sp.dot(xu)>.95}}dr&&(bo.normals[ou*2+0]*=-1,bo.normals[ou*2+1]*=-1),[gn,_s,Gr]=[_s,Gr,Gr+1],Gr>=un&&(Gr-=hn)}while(Gr!==us+1);let Zn=[];Zn.push({bevelI:0,angle:0,size:0,boundary:{vertices:ut.vertices.slice(us*2,un*2),vertexCount:hn,vertexIndices:new Array(hn).fill(!0).map((ou,g0)=>[g0,g0]),elements:[0,hn],elementCount:1,mesh:null},reverseMap:[],insetPoints:ut.vertices.slice(us*2,un*2)});let Nn=0;for(let ou=1;ou<=this._bevelSegments;ou++){let g0=ou/this._bevelSegments*Math.PI/2,Su=(1-Math.cos(g0))*this._bevel,l1=[],B0=[],a1=0;for(let ox=0;ox<hn;ox++){let U_=ox*2,tS=(ox-1+hn)%hn*2,iS=ut.vertices[bo.start*2+U_+0],wA=ut.vertices[bo.start*2+U_+1],pO=-bo.normals[tS+0]*Su,aR=-bo.normals[tS+1]*Su,fD=-bo.normals[U_+0]*Su,AA=-bo.normals[U_+1]*Su;if(bo.concave[ox]||!bo.concave[ox]&&dr){let oI=Math.atan2(aR,pO),mO=Math.atan2(AA,fD);mO>oI&&(mO-=Math.PI*2);let sp=mO-oI;if(bo.continuous[ox]||dr){let xu=oI+sp/2,ux=Math.cos(xu)*Su,tA=Math.sin(xu)*Su;l1[2*a1+0]=iS+ux*(dr?-1:1),l1[2*a1+1]=wA+tA*(dr?-1:1),B0[a1]=ox,a1++}else{let xu=Math.max(1,Math.floor(c/4*Math.abs(sp)/Math.PI));for(let ux=0;ux<=xu;ux++){let tA=oI+sp*(ux/xu),au=Math.cos(tA)*Su,C3=Math.sin(tA)*Su;l1[2*a1+0]=iS+au,l1[2*a1+1]=wA+C3,B0[a1]=ox,a1++}}}else l1[2*a1+0]=iS+pO,l1[2*a1+1]=wA+aR,B0[a1]=ox,a1++,l1[2*a1+0]=iS,l1[2*a1+1]=wA,B0[a1]=ox,a1++,l1[2*a1+0]=iS+fD,l1[2*a1+1]=wA+AA,B0[a1]=ox,a1++}let q1=ro({windingRule:Gt.POSITIVE,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[l1],edgeCreateCallback:ox=>{let U_=ox.Org.idx,tS=B0[U_],iS=B0[(U_+1)%B0.length];ox.idx=[tS,iS],ox.Sym.idx=[iS,tS]},vertexIdCallback:ox=>{let U_=ox.Lprev.idx;return[U_?U_[1]:0,ox.idx?ox.idx[0]:0]}});if(!q1)throw console.log("Error"),new Error(`error generating bevel geometry for ${ou}'th loop`);if(!q1.vertexCount){let ox=(ou-1)/this._bevelSegments*Math.PI/2;Nn=(1-Math.sin(ox))*this._bevel;break}for(let ox=0;ox<q1.vertexIndices.length;ox++){let[U_,tS]=q1.vertexIndices[ox];if(U_===tS)continue;let iS=tS;tS<U_&&(iS+=hn);for(let wA=U_;wA<iS;wA++){let pO=wA%hn,aR=(wA+1)%hn;if(!bo.continuous[pO]||!bo.continuous[aR]){q1.vertexIndices[ox]=[U_,pO],q1.vertexIndices.splice(ox+1,0,[aR,tS]),q1.vertices.splice((ox+1)*2,0,q1.vertices[ox*2],q1.vertices[ox*2+1]);break}}}Zn.push({bevelI:ou,angle:g0,size:Su,boundary:q1,reverseMap:B0,insetPoints:l1})}let Qn=(ou,g0,Su)=>{let l1=0,B0=ou.boundary.vertexIndices.length;for(;l1<B0&&Su(ou.boundary.vertexIndices[g0]);)g0=(g0+1)%B0,l1++;return l1},bu=Tt.length;for(let ou=1;ou<Zn.length;ou++){let g0=Zn[ou-1],Su=Zn[ou],l1=g0.boundary.vertexIndices.length,B0=Su.boundary.vertexIndices.length;if(!l1||!B0)break;let a1=bo.concave.length,q1=0,ox=_A(q1,hn);for(;!g0.boundary.vertexIndices.filter(ox).length||!Su.boundary.vertexIndices.filter(ox).length;)q1++,ox=_A(q1,hn);let U_=g0.boundary.vertexIndices.findIndex(ox),tS=Su.boundary.vertexIndices.findIndex(ox);do U_=(U_+1)%l1;while(ox(g0.boundary.vertexIndices[U_]));do tS=(tS+1)%B0;while(ox(Su.boundary.vertexIndices[tS]));q1=(q1+1)%hn;let iS=q1,wA=0,pO=this._buildBevelVert(bo,g0,(U_-1+l1)%l1,void 0,wA),aR=this._buildBevelVert(bo,Su,(tS-1+B0)%B0,void 0,wA),fD=pO,AA=aR,oI,mO,sp=!1;do{wA=(q1||a1)/a1,ox=_A(q1,hn);let xu=Qn(g0,U_,ox),ux=Qn(Su,tS,ox),tA=sp;if(sp=!1,xu&&!ux){for(let au=0;au<xu;au++)oI=this._buildBevelVert(bo,g0,(U_+au)%l1,au/(xu-1),wA),Tt.push(fD.topN,oI.topP,AA.topN),b===!1&&Tt.push(oI.bottomP,fD.bottomN,AA.bottomN),fD=oI;sp=!0}else if(!xu&&ux)for(let au=0;au<ux;au++)mO=this._buildBevelVert(bo,Su,(tS+au)%B0,au/(ux-1),wA),Tt.push(AA.topN,fD.topP,mO.topP),b===!1&&Tt.push(fD.bottomP,AA.bottomN,mO.bottomP),AA=mO;else if(xu&&ux)if(oI=this._buildBevelVert(bo,g0,U_,0,wA),mO=this._buildBevelVert(bo,Su,tS,0,wA),tA?(Tt.push(fD.topN,mO.topP,AA.topN),Tt.push(fD.topN,oI.topP,mO.topP),b===!1&&(Tt.push(mO.bottomP,fD.bottomN,AA.bottomN),Tt.push(mO.bottomP,oI.bottomP,fD.bottomN))):(Tt.push(AA.topN,fD.topN,oI.topP),Tt.push(AA.topN,oI.topP,mO.topP),b===!1&&(Tt.push(oI.bottomP,fD.bottomN,AA.bottomN),Tt.push(oI.bottomP,AA.bottomN,mO.bottomP))),fD=oI,AA=mO,xu===ux)for(let au=1;au<xu;au++)oI=this._buildBevelVert(bo,g0,(U_+au)%l1,au/(xu-1),wA),mO=this._buildBevelVert(bo,Su,(tS+au)%B0,au/(ux-1),wA),Tt.push(fD.topN,oI.topP,AA.topN),Tt.push(AA.topN,oI.topP,mO.topP),b===!1&&(Tt.push(oI.bottomP,fD.bottomN,AA.bottomN),Tt.push(oI.bottomP,AA.bottomN,mO.bottomP)),fD=oI,AA=mO;else if(xu>ux){let au=xu/ux,C3=0;for(let X3=1;X3<xu;X3++)oI=this._buildBevelVert(bo,g0,(U_+X3)%l1,X3/(xu-1),wA),Tt.push(fD.topN,oI.topP,AA.topN),b===!1&&Tt.push(oI.bottomP,fD.bottomN,AA.bottomN),fD=oI,X3>(C3+1)*au&&(C3++,mO=this._buildBevelVert(bo,Su,(tS+C3)%B0,C3/(ux-1),wA),Tt.push(AA.topN,oI.topP,mO.topP),b===!1&&Tt.push(oI.bottomP,AA.bottomN,mO.bottomP),AA=mO)}else{let au=ux/xu,C3=0;for(let X3=1;X3<ux;X3++)mO=this._buildBevelVert(bo,Su,(tS+X3)%B0,X3/(ux-1),wA),Tt.push(AA.topN,oI.topP,mO.topP),b===!1&&Tt.push(oI.bottomP,AA.bottomN,mO.bottomP),AA=mO,X3>(C3+1)*au&&(C3++,oI=this._buildBevelVert(bo,g0,(U_+C3)%l1,C3/(xu-1),wA),Tt.push(fD.topN,oI.topP,AA.topN),b===!1&&Tt.push(oI.bottomP,fD.bottomN,AA.bottomN),fD=oI)}U_=(U_+xu)%l1,tS=(tS+ux)%B0,q1=(q1+1)%a1}while(q1!==iS)}if(b===!1&&this._depth>this._bevel*2&&this._buildWall(Zn,bo,Tt),dr){let ou=[];for(let g0=Tt.length-1;g0>=bu+2;g0-=3){let Su=Tt[g0-2],l1=Tt[g0-1],B0=Tt[g0-0];ou.push(B0,l1,Su)}Tt.splice(bu,Tt.length-bu,...ou)}if(dr){let ou=[];for(let g0=Zn[Zn.length-1].boundary.vertices.length-1;g0>=1;g0-=2){let Su=Zn[Zn.length-1].boundary.vertices[g0-1],l1=Zn[Zn.length-1].boundary.vertices[g0-0];ou.push(Su,l1)}kt.push(ou)}if(!dr){let ou=Zn[Zn.length-1],g0;try{g0=ro({windingRule:Zn.length>1?Gt.POSITIVE:Gt.ODD,elementType:Wr$1.POLYGONS,vertexSize:2,strict:!0,contours:[ou.insetPoints,...kt]})}catch{g0=TA}if(!g0)throw new Error("Error generating geometry for surface");$.length===0&&this._bevel<rt&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let Su=0;Su<g0.elementCount*3;Su+=3){let l1=this._buildSurfaceVert(g0,g0.elements[Su+0],Nn),B0=this._buildSurfaceVert(g0,g0.elements[Su+1],Nn),a1=this._buildSurfaceVert(g0,g0.elements[Su+2],Nn);Tt.push(l1.top,B0.top,a1.top),b===!1&&Tt.push(a1.bottom,B0.bottom,l1.bottom)}}this.vertexCache={}}this._buffer.shrink();let It=new Xe(Uint32Array.from(Tt),1),Lt=new Xe(this._buffer.positions,3),Ft=new Xe(this._buffer.normals,3),Nt=new Xe(this._buffer.uvs,2);Lt.needsUpdate=!0,Ft.needsUpdate=!0,Nt.needsUpdate=!0,It.needsUpdate=!0,this.setAttribute("position",Lt),this.setAttribute("normal",Ft),this.setAttribute("uv",Nt),this.setIndex(It)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,o,a){let c=e[0];for(let d=0,g=c.boundary.vertexCount;d<g;d++){let b=this._buildBevelVert(o,c,d),j=this._buildBevelVert(o,c,(d+1)%g);a.push(j.topP,b.topN,b.bottomN),a.push(j.topP,b.bottomN,j.bottomP)}}_buildSurfaceVert(e,o,a){let c=o.toString();if(c in this.vertexCache)return this.vertexCache[c];let d=e.vertices[o*2+0],g=e.vertices[o*2+1],b=(d-this._minX)/this._width,j=(g-this._minY)/this._height;this.forPathBevel&&(j=1);let $=this._buffer.get(this.forPathBevel?1:2),_e=$*3,st=$*2,rt={top:$+0,bottom:$+1};return this._buffer.positions[_e+0]=d,this._buffer.positions[_e+1]=g,this._buffer.positions[_e+2]=this.forPathBevel?this._bevel:this._depth-a,this._buffer.normals[_e+0]=0,this._buffer.normals[_e+1]=0,this._buffer.normals[_e+2]=1,this._buffer.uvs[st+0]=b,this._buffer.uvs[st+1]=j,this.forPathBevel===!1&&(this._buffer.positions[_e+3]=d,this._buffer.positions[_e+4]=g,this._buffer.positions[_e+5]=a,this._buffer.normals[_e+3]=0,this._buffer.normals[_e+4]=0,this._buffer.normals[_e+5]=-1,this._buffer.uvs[st+2]=b,this._buffer.uvs[st+3]=j),this.vertexCache[c]=rt,rt}_buildBevelVert(e,o,a,c=1,d){let g=`${o.bevelI}:${a}`;if(g in this.vertexCache&&d!==0&&d!==1&&(!d||d===this.vertexCache[g].pathBevelUCoord))return this.vertexCache[g];let[b,j]=o.boundary.vertexIndices[a],$,_e,st,rt;b!==j?(_e=b,$=j,rt=!1,st=e.continuous[_e]&&e.continuous[$]):($=b,_e=($-1+e.count)%e.count,rt=e.concave[$]&&o.bevelI>0,st=e.continuous[$]||rt);let ut=Math.cos(o.angle),gt=Math.sin(o.angle),yt=a*2,wt=$*2,Ct=_e*2,Pt=o.boundary.vertices[yt+0],At=o.boundary.vertices[yt+1],Tt=(1-gt)*this._bevel,kt=(Pt-this._minX)/this._width,It=(At-this._minY)/this._height;this.forPathBevel&&(d!==void 0&&(kt=d),It=1);let Lt=e.normals[wt+0],Ft=e.normals[wt+1],Nt=e.normals[Ct+0],Ht=e.normals[Ct+1];if(rt){let un=Nt-Lt,bo=Ht-Ft;Lt=Lt+un*(1-c),Ft=Ft+bo*(1-c);let _s=Math.sqrt(Lt*Lt+Ft*Ft);Lt/=_s,Ft/=_s}let dr=this.forPathBevel?this._buffer.get(st?1:2):this._buffer.get(st?2:4),hs=dr*3,us=dr*2,hn={i:a,fi:$,topP:dr+0,topN:dr+0,bottomP:dr+1,bottomN:dr+1,pathBevelUCoord:d};return this._buffer.positions[hs+0]=Pt,this._buffer.positions[hs+1]=At,this._buffer.positions[hs+2]=(this.forPathBevel?this._bevel:this._depth)-Tt,this._buffer.normals[hs+0]=Lt*ut,this._buffer.normals[hs+1]=Ft*ut,this._buffer.normals[hs+2]=gt,this._buffer.uvs[us+0]=kt,this._buffer.uvs[us+1]=It,this.forPathBevel===!1&&(this._buffer.positions[hs+3]=Pt,this._buffer.positions[hs+4]=At,this._buffer.positions[hs+5]=Tt,this._buffer.normals[hs+3]=Lt*ut,this._buffer.normals[hs+4]=Ft*ut,this._buffer.normals[hs+5]=-gt,this._buffer.uvs[us+2]=It,this._buffer.uvs[us+3]=kt),st||(this.forPathBevel?(dr+=1,hs+=3,us+=2):(dr+=2,hs+=6,us+=4),hn.topP=dr+0,hn.bottomP=dr+1,this._buffer.positions[hs+0]=Pt,this._buffer.positions[hs+1]=At,this._buffer.positions[hs+2]=(this.forPathBevel?this._bevel:this._depth)-Tt,this._buffer.normals[hs+0]=Nt*ut,this._buffer.normals[hs+1]=Ht*ut,this._buffer.normals[hs+2]=gt,this._buffer.uvs[us+0]=kt,this._buffer.uvs[us+1]=It,this.forPathBevel===!1&&(this._buffer.positions[hs+3]=Pt,this._buffer.positions[hs+4]=At,this._buffer.positions[hs+5]=Tt,this._buffer.normals[hs+3]=Nt*ut,this._buffer.normals[hs+4]=Ht*ut,this._buffer.normals[hs+5]=-gt,this._buffer.uvs[us+2]=It,this._buffer.uvs[us+3]=kt)),this.vertexCache[g]=hn,hn}clone(){let e=new Hl(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Ea(this.userData),e}},Ld=class extends Pe{constructor(e,o=12,a={}){super(),this.type="ShapeGeometry",this.windingRule=Gt.ODD,this.elementType=Wr$1.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=o,this._triangulationOptions=Object.assign({windingRule:Gt.ODD,elementType:Wr$1.POLYGONS,polySize:3,vertexSize:2,strict:!0},a);let c=this._shape.extractShapePointsToFlatArray([],this._curveSegments),d=this._shape.shapeHoles.map(ut=>ut.extractShapePointsToFlatArray([],this._curveSegments)),g,b=!0,j=!0,$,_e;for(let ut=0,gt=c.length/2;ut<gt;ut++){let yt=ut*2,wt=c[yt+0],Ct=c[yt+1];if($!==void 0&&wt!==$&&(b=!1),_e!==void 0&&Ct!==_e&&(j=!1),$=wt,_e=Ct,!b&&!j)break}if(!b&&!j)try{g=ro({contours:[c,...d],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{g=Am}let st=(g==null?void 0:g.vertexCount)??1,rt=(g==null?void 0:g.elementCount)??1;if(this._positionAttribute=new Xe(new Float32Array(st*3),3),this._normalAttribute=new Xe(new Float32Array(st*3),3),this._uvAttribute=new Xe(new Float32Array(st*2),2),this._indexAttribute=new Xe(new Uint32Array(rt*3),1),g){let ut=1/0,gt=-1/0,yt=1/0,wt=-1/0;for(let At=0,Tt=st;At<Tt;At++){let kt=At*2,It=g.vertices[kt+0],Lt=g.vertices[kt+1];It<ut&&(ut=It),It>gt&&(gt=It),Lt<yt&&(yt=Lt),Lt>wt&&(wt=Lt)}let Ct=gt-ut,Pt=wt-yt;for(let At=0,Tt=st;At<Tt;At++){let kt=At*2,It=g.vertices[kt+0],Lt=g.vertices[kt+1],Ft=(It-ut)/Ct,Nt=(Lt-yt)/Pt;this._positionAttribute.setXYZ(At,It,Lt,0),this._normalAttribute.setXYZ(At,0,0,1),this._uvAttribute.setXY(At,Ft,Nt)}for(let At=0,Tt=rt;At<Tt;At++){let kt=At*3,It=g.elements[kt+0],Lt=g.elements[kt+1],Ft=g.elements[kt+2];this._indexAttribute.setX(kt+0,It),this._indexAttribute.setX(kt+1,Lt),this._indexAttribute.setX(kt+2,Ft)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((g==null?void 0:g.elementCount)??1)*3)}clone(){let e=new Ld(this._shape,this._curveSegments);return e.userData=Ea(this.userData),e}},Bd=class extends Hl{constructor(e,o,a=0,c=12,d=3,g=Gt.ODD){super(e,o,a,c,d,g),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,o,a){let c=e[0];for(let d=0,g=c.boundary.vertexCount;d<g;d++){let b=this._buildBevelVert(o,c,d),j=this._buildBevelVert(o,c,(d+1)%g);a.push(j.topP,b.topN,b.bottomN),a.push(j.topP,b.bottomN,j.bottomP)}}clone(){let e=new Bd(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Ea(this.userData),e}},Gn=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){var _e,st;let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Gt.ODD},e.parameters),c=Math.abs(a.width),d=Math.abs(a.height??a.width),g=Math.abs(a.depth??0),b=e.shape??(o==null?void 0:o.shape),j=(b==null?void 0:b.roundness)??a.roundness;b!==void 0&&(b instanceof Xt?(b.width!==c||b.height!==d)&&b.applySize(c,d):b=new Xt(c,d).fromJSON(b),((_e=e.parameters)==null?void 0:_e.roundness)!==void 0&&((st=e.parameters)==null?void 0:st.roundness)>0&&b.update());let $=b??new Xt(c,d);return{parameters:Object.assign(a,{width:c,height:d,depth:g,roundness:j}),shape:$}}static build(e){let{depth:o,extrudeBevelSize:a,extrudeBevelSegments:c,subdivisions:d,roundness:g,windingRule:b}=e.parameters;e.shape.roundness=g;let j;return o<=0?j=new Ld(e.shape,d,{windingRule:b}):j=new Bd(e.shape,o,a,d,c,b),Object.assign(j,{userData:{...e,type:"VectorGeometry"}})}},uI=Math.PI*2,Fd=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return a.angle=Me.clamp(a.angle,0,360),{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??0)})}}static build(e){let{width:o,height:a,spikes:c,angle:d,innerRadius:g,depth:b,extrudeBevelSize:j,extrudeBevelSegments:$}=e.parameters,_e=e.shape,st=o*.5,rt=a*.5,ut=A7(_e,st,rt,d*Math.PI/180,c,g);_e.isClosed=!0,_e.update();let gt;return d===0?(gt=new Pe,gt.setAttribute("position",new Te([],3))):gt=Gn.create({shape:_e,parameters:{subdivisions:ut,depth:b,extrudeBevelSize:j,extrudeBevelSegments:$}}),Object.assign(gt,{userData:{...e,type:"EllipseGeometry"}})}};function A7(e,o,a,c,d,g){if(c>=uI)return d>30||d%4===0?(E7(e,o,a,g),Math.round(d/4)):cI(e,c,d,o,a,g);c=Math.max(c,.001);let b={x:0,y:a},j=c+Math.PI*.5,$={x:Math.cos(j)*o,y:Math.sin(j)*a},_e=eI({px:b.x,py:b.y,cx:$.x,cy:$.y,rx:o,ry:a,largeArcFlag:c>Math.PI,sweepFlag:!0});return d>30||d%_e.length===0?_7(e,b.x,b.y,_e,d,o,a,g):cI(e,c,d,o,a,g)}function _7(e,o,a,c,d,g,b,j){let $=Math.round(d/c.length);e.addPoint(Nd(o,a));for(let _e=0,st=c.length;_e<st;_e++){let rt=c[_e],ut=e.points[_e],gt=Nd(rt.x,rt.y);ut.controls[1].position.set(rt.x1,rt.y1),gt.controls[0].position.set(rt.x2,rt.y2),e.addPoint(gt)}return j>0?hI(e,g,b,j):e.addPoint(Nd(0,0)),$}function cI(e,o,a,c,d,g){let b=-o/a;for(let j=0;j<=a;j++){let $=b*j,_e=Math.sin($)*c,st=Math.cos($)*d;e.addPoint(Nd(_e,st))}return o<uI?g>0?hI(e,c,d,g):e.addPoint(Nd(0,0)):(e.removePoint(e.points[e.points.length-1]),g>0&&dI(e,c,d,g)),1}function E7(e,o,a,c=0,d=0,g=0){let b=.5522847498,j=o*b,$=a*b;e.addPoint(N0(d-o,g,d-o,g-$,d-o,g+$)),e.addPoint(N0(d,g+a,d-j,g+a,d+j,g+a)),e.addPoint(N0(d+o,g,d+o,g+$,d+o,g-$)),e.addPoint(N0(d,g-a,d+j,g-a,d-j,g-a)),c>0&&dI(e,o,a,c)}function Nd(e,o){return new to(Me.generateUUID(),new z$2(e,o))}function N0(e,o,a,c,d,g){let b=Nd(e,o);return b.controls[0].position.set(a,c),b.controls[1].position.set(d,g),b}function hI(e,o,a,c){fI(e,o,a,c).forEach(d=>e.addPoint(d))}function dI(e,o,a,c){let d=fI(e,o,a,c),g=new Xt;d.forEach(b=>g.addPoint(b)),g.isClosed=!0,e.shapeHoles.push(g)}function fI(e,o,a,c){let d=c*o/100,g=d*(Math.abs(a)/Math.abs(o)),b=new z$2(d/o,g/a),j=e.points.map($=>{let _e=$.clone();return _e.uuid=Me.generateUUID(),_e}).reverse();return j.forEach($=>{$.position.multiply(b);let _e=$.controls[0].position.clone().multiply(b),st=$.controls[1].position.clone().multiply(b);$.controls[0].position.copy(st),$.controls[1].position.copy(_e)}),j}var pI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),c=Math.abs(a.width),d=Math.abs(a.height??c),g=Math.abs(a.depth??c),b=Math.abs(Math.min(c,g))/2;return{parameters:Object.assign(a,{width:c,height:d,depth:g,radius:b,segments:Math.round(a.segments),pathSegments:Math.round(a.pathSegments),cornerSegments:Math.round(a.cornerSegments)})}}static build(e){let{width:o,height:a,depth:c,radius:d,revolutions:g,segments:b,pathRadius:j,pathType:$,pathSegments:_e,cornerRadius:st,cornerSegments:rt}=e.parameters,ut=new _m(!1,o,a,c,d,g,b,j,$,_e,st,rt);return Object.assign(ut,{userData:{...e,type:"HelixGeometry"}})}},MA=new _o([0,0,0],1),_m=class extends Pe{constructor(e=!0,o=1,a=1,c=1,d=1,g=1,b=1,j=1,$=1,_e=1,st=1,rt=1){if(super(),g===0)return;let ut=e&&g===1;ut&&(rt=0),st>100&&(st=100),st===0&&(rt=0);let gt=()=>new _,yt=new _,wt=gt(),Ct=gt(),Pt=gt(),At,Tt,kt,It,Lt,Ft,Nt,Ht,dr=gt(),hs=gt(),us=gt(),hn=gt(),un=gt(),bo=gt(),_s=gt(),gn=gt(),Gr=a-2*j+.001,ds=Gr/g,Zn=Math.ceil(b*g),Nn=Zn+1,Qn=Gr/Zn,bu=-Gr/2,ou=_e+1,g0=2*Math.PI/_e,Su=Math.PI/2/rt,l1=.01,B0=Math.min((1-st/100)*j,j-l1),a1=j-B0,q1=0,ox=2,U_=rt*ox+ox,tS=ou*U_/ox,iS=tS+ou*Nn,wA=Math.max(0,ou*(Nn+U_)),[pO,aR,fD]=[3,3,2].map(N_=>Array(wA*N_).fill(0)),AA=[],oI=d-j;function mO(N_,bL){let MO=Math.PI/2;Ft=bL*Qn,Ht=2*Math.PI*(Ft%ds)/ds+MO,Ft+=bu,Nt=Math.sin(Ht)*oI,Lt=Math.cos(Ht)*oI,e?N_.set(Lt,Nt,Ft):N_.set(Lt,Ft,Nt)}mO(yt,-1e-10),mO(wt,0),dr.copy(yt),mO(yt,1);let sp=yt.distanceTo(wt),xu=ut?0:a1+B0,ux=sp*Zn+2*xu,tA=B0,au=ux-xu;for(let N_=0;N_<=Zn;N_++){mO(Ct,N_),gn.subVectors(Ct,dr).normalize(),dr.copy(Ct),bo.copy(Ct).setComponent(+e+1,0).normalize(),_s.crossVectors(gn,bo).normalize();let bL=N_===0,MO=N_===Zn,PL=bL?3*Math.PI/2:Su,jL=bL?tA:au,TL=bL?ou:iS,OL=bL?0:wA-ou,t$=gn.clone().multiplyScalar(bL?-a1:a1).add(Ct),r$=gn.clone().multiplyScalar(bL?-1:1).normalize();for(let X1=0;X1<ou;X1++){let rS=X1*g0;if(hs.addVectors(yt.copy(bo).multiplyScalar(j*Math.cos(rS)),wt.copy(_s).multiplyScalar(j*Math.sin(rS))),us.copy(hs).normalize(),bL||MO){ut||(q1=OL+X1,[0,1,2].forEach(SA=>{pO[q1*3+SA]=t$.getComponent(SA),aR[q1*3+SA]=r$.getComponent(SA)}),fD[q1*2]=+MO,fD[q1*2+1]=X1/_e),wt.copy(us).multiplyScalar(B0),Pt.addVectors(Ct,wt);for(let SA=0;SA<rt;SA++){let IO=SA*Su+PL;hn.addVectors(yt.copy(gn).multiplyScalar(a1*Math.sin(IO)),wt.copy(us).multiplyScalar(a1*Math.cos(IO))),un.copy(hn).normalize(),wt.addVectors(Pt,hn),hn.normalize(),q1=TL+SA*ou+X1,[0,1,2].forEach(WL=>{pO[q1*3+WL]=wt.getComponent(WL),aR[q1*3+WL]=un.getComponent(WL)});let IL=+bL+Math.sin(IO);fD[q1*2]=(jL+a1*IL)/ux,fD[q1*2+1]=X1/_e}}wt.addVectors(Ct,hs),q1=tS+N_*ou+X1,[0,1,2].forEach(SA=>{pO[q1*3+SA]=wt.getComponent(SA),aR[q1*3+SA]=us.getComponent(SA)}),fD[q1*2]=(xu+N_*sp)/ux,fD[q1*2+1]=X1/_e}}let C3=Nn+2*rt+ox,[X3,sR]=[+ut,C3-1];for(let N_=X3;N_<=sR-1;N_++){let bL=ut&&N_===sR-1;for(let MO=0;MO<ou-1;MO++)At=N_*ou+MO,Tt=At+1,kt=(bL?MO:At)+ou,It=(bL?MO+1:Tt)+ou,N_===0?AA.push(Tt,It,kt):N_===C3-2?AA.push(At,Tt,kt):AA.push(At,Tt,kt,Tt,It,kt)}this.setIndex(AA),this.setAttribute("position",new Te(pO,3)),this.setAttribute("normal",new Te(aR,3)),this.setAttribute("uv",new Te(fD,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,o=Math.ceil(e.tubularSegments),a=e.radialSegments+1,c=Array.from(this.getIndex().array),d,g,b,j,$=6*(o-1)*e.radialSegments,_e=o,st=_e===o;for(let rt=0;rt<e.radialSegments;rt++)d=_e*a+rt,g=d+1,b=(st?rt:d)+a,j=(st?rt+1:g)+a,c[$++]=d,c[$++]=g,c[$++]=b,c[$++]=g,c[$++]=j,c[$++]=b;return c.length=$,MA.array=c,MA.count=c.length,MA}},mI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o,height:a,depth:c,detail:d,corner:g,cornerSides:b}=e.parameters,j=d===0&&g!==0?new Em(o*.5,g,b):new Ju(o*.5,d);return j.scale(1,a/o,c/o),Object.assign(j,{userData:{...e,type:"IcosahedronGeometry"}})}},Em=class extends Ul{constructor(e=1,o=.2,a=4){let c=(1+Math.sqrt(5))/2,d=[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],g=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],b="IcosahedronGeometry";super(d,g,b,e,o,a),this.type=b}static fromJSON(e){return new Em(e.radius,e.corner,e.cornerSides)}},gI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){var c;(((c=e.parameters)==null?void 0:c.points)??[]).forEach(d=>{Array.isArray(d)&&(d.x=d[0],d.y=d[1])});let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{points:o,segments:a,verticalSegments:c}=e.parameters,d=new xa;d.moveTo(o[0].x,o[0].y),d.bezierCurveTo(o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y);let g=new Xu(d.extractPoints(c).shape,a);return g.rotateZ(Math.PI),Object.assign(g,{userData:{...e,type:"LatheGeometry"}})}},Go=new ce$1,CA=new _t,F0=new _,Wl=class extends fr$2{constructor(){super(),this.uuid=Me.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let o=new nr().getNormalMatrix(e);for(let a=0,c=this.vertices.length;a<c;a++)this.vertices[a].applyMatrix4(e);for(let a=0,c=this.faces.length;a<c;a++){let d=this.faces[a];d.normal.applyMatrix3(o).normalize();for(let g=0,b=d.vertexNormals.length;g<b;g++)d.vertexNormals[g].applyMatrix3(o).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Go.makeRotationX(e),this.applyMatrix4(Go),this}rotateY(e){return Go.makeRotationY(e),this.applyMatrix4(Go),this}rotateZ(e){return Go.makeRotationZ(e),this.applyMatrix4(Go),this}translate(e,o,a){return Go.makeTranslation(e,o,a),this.applyMatrix4(Go),this}scale(e,o,a){return Go.makeScale(e,o,a),this.applyMatrix4(Go),this}lookAt(e){return CA.lookAt(e),CA.updateMatrix(),this.applyMatrix4(CA.matrix),this}fromBufferGeometry(e){let o=this,a=e.index!==null?e.index:void 0,c=e.attributes;if(c.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let d=c.position,g=c.normal,b=c.color,j=c.uv,$=c.uv2;$!==void 0&&(this.faceVertexUvs[1]=[]);for(let rt=0;rt<d.count;rt++)o.vertices.push(new _().fromBufferAttribute(d,rt)),b!==void 0&&o.colors.push(new We().fromBufferAttribute(b,rt));function _e(rt,ut,gt,yt){let wt=b===void 0?[]:[o.colors[rt].clone(),o.colors[ut].clone(),o.colors[gt].clone()],Ct=g===void 0?[]:[new _().fromBufferAttribute(g,rt),new _().fromBufferAttribute(g,ut),new _().fromBufferAttribute(g,gt)],Pt=new kd(rt,ut,gt,Ct,wt,yt);o.faces.push(Pt),j!==void 0&&o.faceVertexUvs[0].push([new z$2().fromBufferAttribute(j,rt),new z$2().fromBufferAttribute(j,ut),new z$2().fromBufferAttribute(j,gt)]),$!==void 0&&o.faceVertexUvs[1].push([new z$2().fromBufferAttribute($,rt),new z$2().fromBufferAttribute($,ut),new z$2().fromBufferAttribute($,gt)])}let st=e.groups;if(st.length>0)for(let rt=0;rt<st.length;rt++){let ut=st[rt],gt=ut.start,yt=ut.count;for(let wt=gt,Ct=gt+yt;wt<Ct;wt+=3)a!==void 0?_e(a.getX(wt),a.getX(wt+1),a.getX(wt+2),ut.materialIndex):_e(wt,wt+1,wt+2,ut.materialIndex)}else if(a!==void 0)for(let rt=0;rt<a.count;rt+=3)_e(a.getX(rt),a.getX(rt+1),a.getX(rt+2));else for(let rt=0;rt<d.count;rt+=3)_e(rt,rt+1,rt+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(F0).negate(),this.translate(F0.x,F0.y,F0.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,o=this.boundingSphere.radius,a=o===0?1:1/o,c=new ce$1;return c.set(a,0,0,-a*e.x,0,a,0,-a*e.y,0,0,a,-a*e.z,0,0,0,1),this.applyMatrix4(c),this}computeFaceNormals(){let e=new _,o=new _;for(let a=0,c=this.faces.length;a<c;a++){let d=this.faces[a],g=this.vertices[d.a],b=this.vertices[d.b],j=this.vertices[d.c];e.subVectors(j,b),o.subVectors(g,b),e.cross(o),e.normalize(),d.normal.copy(e)}}computeVertexNormals(e=!0){let o=new Array(this.vertices.length);for(let a=0,c=this.vertices.length;a<c;a++)o[a]=new _;if(e){let a=new _,c=new _;for(let d=0,g=this.faces.length;d<g;d++){let b=this.faces[d],j=this.vertices[b.a],$=this.vertices[b.b],_e=this.vertices[b.c];a.subVectors(_e,$),c.subVectors(j,$),a.cross(c),o[b.a].add(a),o[b.b].add(a),o[b.c].add(a)}}else{this.computeFaceNormals();for(let a=0,c=this.faces.length;a<c;a++){let d=this.faces[a];o[d.a].add(d.normal),o[d.b].add(d.normal),o[d.c].add(d.normal)}}for(let a=0,c=this.vertices.length;a<c;a++)o[a].normalize();for(let a=0,c=this.faces.length;a<c;a++){let d=this.faces[a],g=d.vertexNormals;g.length===3?(g[0].copy(o[d.a]),g[1].copy(o[d.b]),g[2].copy(o[d.c])):(g[0]=o[d.a].clone(),g[1]=o[d.b].clone(),g[2]=o[d.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,o=this.faces.length;e<o;e++){let a=this.faces[e],c=a.vertexNormals;c.length===3?(c[0].copy(a.normal),c[1].copy(a.normal),c[2].copy(a.normal)):(c[0]=a.normal.clone(),c[1]=a.normal.clone(),c[2]=a.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let o=0,a=this.faces.length;o<a;o++){let c=this.faces[o];c.__originalFaceNormal?c.__originalFaceNormal.copy(c.normal):c.__originalFaceNormal=c.normal.clone(),c.__originalVertexNormals||(c.__originalVertexNormals=[]);for(let d=0,g=c.vertexNormals.length;d<g;d++)c.__originalVertexNormals[d]?c.__originalVertexNormals[d].copy(c.vertexNormals[d]):c.__originalVertexNormals[d]=c.vertexNormals[d].clone()}let e=new Wl;e.faces=this.faces;for(let o=0,a=this.morphTargets.length;o<a;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];let d=this.morphNormals[o].faceNormals,g=this.morphNormals[o].vertexNormals;for(let b=0,j=this.faces.length;b<j;b++){let $=new _,_e={a:new _,b:new _,c:new _};d.push($),g.push(_e)}}let c=this.morphNormals[o];e.vertices=this.morphTargets[o].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let d=0,g=this.faces.length;d<g;d++){let b=this.faces[d],j=c.faceNormals[d],$=c.vertexNormals[d];j.copy(b.normal),$.a.copy(b.vertexNormals[0]),$.b.copy(b.vertexNormals[1]),$.c.copy(b.vertexNormals[2])}}for(let o=0,a=this.faces.length;o<a;o++){let c=this.faces[o];c.normal=c.__originalFaceNormal,c.vertexNormals=c.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wt),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Br),this.boundingSphere.setFromPoints(this.vertices)}merge(e,o,a=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let c,d=this.vertices.length,g=this.vertices,b=e.vertices,j=this.faces,$=e.faces,_e=this.colors,st=e.colors;o!==void 0&&(c=new nr().getNormalMatrix(o));for(let rt=0,ut=b.length;rt<ut;rt++){let gt=b[rt].clone();o!==void 0&&gt.applyMatrix4(o),g.push(gt)}for(let rt=0,ut=st.length;rt<ut;rt++)_e.push(st[rt].clone());for(let rt=0,ut=$.length;rt<ut;rt++){let gt=$[rt],yt,wt,Ct=gt.vertexNormals,Pt=gt.vertexColors,At=new kd(gt.a+d,gt.b+d,gt.c+d);At.normal.copy(gt.normal),c!==void 0&&At.normal.applyMatrix3(c).normalize();for(let Tt=0,kt=Ct.length;Tt<kt;Tt++)yt=Ct[Tt].clone(),c!==void 0&&yt.applyMatrix3(c).normalize(),At.vertexNormals.push(yt);At.color.copy(gt.color);for(let Tt=0,kt=Pt.length;Tt<kt;Tt++)wt=Pt[Tt],At.vertexColors.push(wt.clone());At.materialIndex=gt.materialIndex+a,j.push(At)}for(let rt=0,ut=e.faceVertexUvs.length;rt<ut;rt++){let gt=e.faceVertexUvs[rt];this.faceVertexUvs[rt]===void 0&&(this.faceVertexUvs[rt]=[]);for(let yt=0,wt=gt.length;yt<wt;yt++){let Ct=gt[yt],Pt=[];for(let At=0,Tt=Ct.length;At<Tt;At++)Pt.push(Ct[At].clone());this.faceVertexUvs[rt].push(Pt)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let o={},a=[],c=[],d=Math.pow(10,e);for(let j=0,$=this.vertices.length;j<$;j++){let _e=this.vertices[j],st=Math.round(_e.x*d)+"_"+Math.round(_e.y*d)+"_"+Math.round(_e.z*d);o[st]===void 0?(o[st]=j,a.push(this.vertices[j]),c[j]=a.length-1):c[j]=c[o[st]]}let g=[];for(let j=0,$=this.faces.length;j<$;j++){let _e=this.faces[j];_e.a=c[_e.a],_e.b=c[_e.b],_e.c=c[_e.c];let st=[_e.a,_e.b,_e.c];for(let rt=0;rt<3;rt++)if(st[rt]===st[(rt+1)%3]){g.push(j);break}}for(let j=g.length-1;j>=0;j--){let $=g[j];this.faces.splice($,1);for(let _e=0,st=this.faceVertexUvs.length;_e<st;_e++)this.faceVertexUvs[_e].splice($,1)}let b=this.vertices.length-a.length;return this.vertices=a,b}setFromPoints(e){this.vertices=[];for(let o=0,a=e.length;o<a;o++){let c=e[o];this.vertices.push(new _(c.x,c.y,c.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,o=e.length;for(let j=0;j<o;j++)e[j]._id=j;function a(j,$){return j.materialIndex-$.materialIndex}e.sort(a);let c=this.faceVertexUvs[0],d=this.faceVertexUvs[1],g,b;c&&c.length===o&&(g=[]),d&&d.length===o&&(b=[]);for(let j=0;j<o;j++){let $=e[j]._id;g&&g.push(c[$]),b&&b.push(d[$])}g&&(this.faceVertexUvs[0]=g),b&&(this.faceVertexUvs[1]=b)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let gt=this.parameters;for(let yt in gt)gt[yt]!==void 0&&(e[yt]=gt[yt]);return e}let o=[];for(let gt=0;gt<this.vertices.length;gt++){let yt=this.vertices[gt];o.push(yt.x,yt.y,yt.z)}let a=[],c=[],d={},g=[],b={},j=[],$={};for(let gt=0;gt<this.faces.length;gt++){let yt=this.faces[gt],wt=!0,Ct=!1,Pt=this.faceVertexUvs[0][gt]!==void 0,At=yt.normal.length()>0,Tt=yt.vertexNormals.length>0,kt=yt.color.r!==1||yt.color.g!==1||yt.color.b!==1,It=yt.vertexColors.length>0,Lt=0;if(Lt=_e(Lt,0,0),Lt=_e(Lt,1,wt),Lt=_e(Lt,2,Ct),Lt=_e(Lt,3,Pt),Lt=_e(Lt,4,At),Lt=_e(Lt,5,Tt),Lt=_e(Lt,6,kt),Lt=_e(Lt,7,It),a.push(Lt),a.push(yt.a,yt.b,yt.c),a.push(yt.materialIndex),Pt){let Ft=this.faceVertexUvs[0][gt];a.push(ut(Ft[0]),ut(Ft[1]),ut(Ft[2]))}if(At&&a.push(st(yt.normal)),Tt){let Ft=yt.vertexNormals;a.push(st(Ft[0]),st(Ft[1]),st(Ft[2]))}if(kt&&a.push(rt(yt.color)),It){let Ft=yt.vertexColors;a.push(rt(Ft[0]),rt(Ft[1]),rt(Ft[2]))}}function _e(gt,yt,wt){return wt?gt|1<<yt:gt&~(1<<yt)}function st(gt){let yt=gt.x.toString()+gt.y.toString()+gt.z.toString();return d[yt]!==void 0||(d[yt]=c.length/3,c.push(gt.x,gt.y,gt.z)),d[yt]}function rt(gt){let yt=gt.r.toString()+gt.g.toString()+gt.b.toString();return b[yt]!==void 0||(b[yt]=g.length,g.push(gt.getHex())),b[yt]}function ut(gt){let yt=gt.x.toString()+gt.y.toString();return $[yt]!==void 0||($[yt]=j.length/2,j.push(gt.x,gt.y)),$[yt]}return e.data={},e.data.vertices=o,e.data.normals=c,g.length>0&&(e.data.colors=g),j.length>0&&(e.data.uvs=[j]),e.data.faces=a,e}clone(){return new Wl().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let o=e.vertices;for(let rt=0,ut=o.length;rt<ut;rt++)this.vertices.push(o[rt].clone());let a=e.colors;for(let rt=0,ut=a.length;rt<ut;rt++)this.colors.push(a[rt].clone());let c=e.faces;for(let rt=0,ut=c.length;rt<ut;rt++)this.faces.push(c[rt].clone());for(let rt=0,ut=e.faceVertexUvs.length;rt<ut;rt++){let gt=e.faceVertexUvs[rt];this.faceVertexUvs[rt]===void 0&&(this.faceVertexUvs[rt]=[]);for(let yt=0,wt=gt.length;yt<wt;yt++){let Ct=gt[yt],Pt=[];for(let At=0,Tt=Ct.length;At<Tt;At++){let kt=Ct[At];Pt.push(kt.clone())}this.faceVertexUvs[rt].push(Pt)}}let d=e.morphTargets;for(let rt=0,ut=d.length;rt<ut;rt++){let gt={};if(gt.name=d[rt].name,d[rt].vertices!==void 0){gt.vertices=[];for(let yt=0,wt=d[rt].vertices.length;yt<wt;yt++)gt.vertices.push(d[rt].vertices[yt].clone())}if(d[rt].normals!==void 0){gt.normals=[];for(let yt=0,wt=d[rt].normals.length;yt<wt;yt++)gt.normals.push(d[rt].normals[yt].clone())}this.morphTargets.push(gt)}let g=e.morphNormals;for(let rt=0,ut=g.length;rt<ut;rt++){let gt={};if(g[rt].vertexNormals!==void 0){gt.vertexNormals=[];for(let yt=0,wt=g[rt].vertexNormals.length;yt<wt;yt++){let Ct=g[rt].vertexNormals[yt],Pt={};Pt.a=Ct.a.clone(),Pt.b=Ct.b.clone(),Pt.c=Ct.c.clone(),gt.vertexNormals.push(Pt)}}if(g[rt].faceNormals!==void 0){gt.faceNormals=[];for(let yt=0,wt=g[rt].faceNormals.length;yt<wt;yt++)gt.faceNormals.push(g[rt].faceNormals[yt].clone())}this.morphNormals.push(gt)}let b=e.skinWeights;for(let rt=0,ut=b.length;rt<ut;rt++)this.skinWeights.push(b[rt].clone());let j=e.skinIndices;for(let rt=0,ut=j.length;rt<ut;rt++)this.skinIndices.push(j[rt].clone());let $=e.lineDistances;for(let rt=0,ut=$.length;rt<ut;rt++)this.lineDistances.push($[rt]);let _e=e.boundingBox;_e!==null&&(this.boundingBox=_e.clone());let st=e.boundingSphere;return st!==null&&(this.boundingSphere=st.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new PA().fromGeometry(this),o=new Pe,a=new Float32Array(e.vertices.length*3);if(o.setAttribute("position",k0.call(new Xe(a,3),e.vertices)),e.normals.length>0){let c=new Float32Array(e.normals.length*3);o.setAttribute("normal",k0.call(new Xe(c,3),e.normals))}if(e.colors.length>0){let c=new Float32Array(e.colors.length*3);o.setAttribute("color",yI.call(new Xe(c,3),e.colors))}if(e.uvs.length>0){let c=new Float32Array(e.uvs.length*2);o.setAttribute("uv",vI.call(new Xe(c,2),e.uvs))}if(e.uvs2.length>0){let c=new Float32Array(e.uvs2.length*2);o.setAttribute("uv2",vI.call(new Xe(c,2),e.uvs2))}o.groups=e.groups;for(let c in e.morphTargets){let d=[],g=e.morphTargets[c];for(let b=0,j=g.length;b<j;b++){let $=g[b],_e=new Te($.data.length*3,3);_e.name=$.name,d.push(k0.call(_e,$.data))}o.morphAttributes[c]=d}if(e.skinIndices.length>0){let c=new Te(e.skinIndices.length*4,4);o.setAttribute("skinIndex",xI.call(c,e.skinIndices))}if(e.skinWeights.length>0){let c=new Te(e.skinWeights.length*4,4);o.setAttribute("skinWeight",xI.call(c,e.skinWeights))}return e.boundingSphere!==null&&(o.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(o.boundingBox=e.boundingBox.clone()),o}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let o=new Pe,a=e.geometry;if(e.isPoints||e.isLine){let c=new Te(a.vertices.length*3,3),d=new Te(a.colors.length*3,3);if(o.setAttribute("position",k0.call(c,a.vertices)),o.setAttribute("color",yI.call(d,a.colors)),a.lineDistances&&a.lineDistances.length===a.vertices.length){let g=new Te(a.lineDistances.length,1);o.setAttribute("lineDistance",T7.call(g,a.lineDistances))}a.boundingSphere!==null&&(o.boundingSphere=a.boundingSphere.clone()),a.boundingBox!==null&&(o.boundingBox=a.boundingBox.clone())}else e.isMesh&&(o=a.toBufferGeometry());return o}};Wl.prototype.isGeometry=!0;var PA=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let o=[],a,c,d,g=e.faces;for(c=0;c<g.length;c++){let b=g[c];b.materialIndex!==d&&(d=b.materialIndex,a!==void 0&&(a.count=c*3-a.start,o.push(a)),a={start:c*3,materialIndex:d})}a!==void 0&&(a.count=c*3-a.start,o.push(a)),this.groups=o}fromGeometry(e){let o=e.faces,a=e.vertices,c=e.faceVertexUvs,d=c[0]&&c[0].length>0,g=c[1]&&c[1].length>0,b=e.morphTargets,j=b.length,$;if(j>0){$=[];for(let Ct=0;Ct<j;Ct++)$[Ct]={name:b[Ct].name,data:[]};this.morphTargets.position=$}let _e=e.morphNormals,st=_e.length,rt;if(st>0){rt=[];for(let Ct=0;Ct<st;Ct++)rt[Ct]={name:_e[Ct].name,data:[]};this.morphTargets.normal=rt}let ut=e.skinIndices,gt=e.skinWeights,yt=ut.length===a.length,wt=gt.length===a.length;a.length>0&&o.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let Ct=0;Ct<o.length;Ct++){let Pt=o[Ct];this.vertices.push(a[Pt.a],a[Pt.b],a[Pt.c]);let At=Pt.vertexNormals;if(At.length===3)this.normals.push(At[0],At[1],At[2]);else{let kt=Pt.normal;this.normals.push(kt,kt,kt)}let Tt=Pt.vertexColors;if(Tt.length===3)this.colors.push(Tt[0],Tt[1],Tt[2]);else{let kt=Pt.color;this.colors.push(kt,kt,kt)}if(d===!0){let kt=c[0][Ct];kt!==void 0?this.uvs.push(kt[0],kt[1],kt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Ct),this.uvs.push(new z$2,new z$2,new z$2))}if(g===!0){let kt=c[1][Ct];kt!==void 0?this.uvs2.push(kt[0],kt[1],kt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Ct),this.uvs2.push(new z$2,new z$2,new z$2))}for(let kt=0;kt<j;kt++){let It=b[kt].vertices;$[kt].data.push(It[Pt.a],It[Pt.b],It[Pt.c])}for(let kt=0;kt<st;kt++){let It=_e[kt].vertexNormals[Ct];rt[kt].data.push(It.a,It.b,It.c)}yt&&this.skinIndices.push(ut[Pt.a],ut[Pt.b],ut[Pt.c]),wt&&this.skinWeights.push(gt[Pt.a],gt[Pt.b],gt[Pt.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},kd=class{constructor(e,o,a,c,d,g=0){this.a=e,this.b=o,this.c=a,this.normal=c&&c.isVector3?c:new _,this.vertexNormals=Array.isArray(c)?c:[],this.color=d&&d.isColor?d:new We,this.vertexColors=Array.isArray(d)?d:[],this.materialIndex=g}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let o=0,a=e.vertexNormals.length;o<a;o++)this.vertexNormals[o]=e.vertexNormals[o].clone();for(let o=0,a=e.vertexColors.length;o<a;o++)this.vertexColors[o]=e.vertexColors[o].clone();return this}};function T7(e){return this.array.set(e),this}function yI(e){let o=this.array,a=0;for(let c=0,d=e.length;c<d;c++){let g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),g=new We),o[a++]=g.r,o[a++]=g.g,o[a++]=g.b}return this}function vI(e){let o=this.array,a=0;for(let c=0,d=e.length;c<d;c++){let g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),g=new z$2),o[a++]=g.x,o[a++]=g.y}return this}function k0(e){let o=this.array,a=0;for(let c=0,d=e.length;c<d;c++){let g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),g=new _),o[a++]=g.x,o[a++]=g.y,o[a++]=g.z}return this}function xI(e){let o=this.array,a=0;for(let c=0,d=e.length;c<d;c++){let g=e[c];g===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),g=new Ke),o[a++]=g.x,o[a++]=g.y,o[a++]=g.z,o[a++]=g.w}return this}var M7=["a","b","c"];function C7(e,o){switch(o){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function DA(e,o,a){let c=Math.min(e,o),d=Math.max(e,o),g=c+"_"+d;return a.get(g)}function OA(e,o,a,c,d,g){let b=Math.min(e,o),j=Math.max(e,o),$=b+"_"+j,_e;if(c.has($))_e=c.get($);else{let st=a[b],rt=a[j];_e={a:st,b:rt,newEdge:null,faces:[]},c.set($,_e)}_e.faces.push(d),g[e].edges.push(_e),g[o].edges.push(_e)}function P7(e,o,a,c){let d,g,b;for(d=0,g=e.length;d<g;d++)a[d]={edges:[]};for(d=0,g=o.length;d<g;d++)b=o[d],OA(b.a,b.b,e,c,b,a),OA(b.b,b.c,e,c,b,a),OA(b.c,b.a,e,c,b,a)}function V0(e,o,a,c,d){e.push(new kd(o,a,c,void 0,void 0,d))}function Vd(e,o){return Math.abs(o-e)/2+Math.min(e,o)}function z0(e,o,a,c){e.push([o.clone(),a.clone(),c.clone()])}var U0=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Pe?e=new Wl().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let o=this.subdivisions;for(;o-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let o=new _,a,c,d,g,b,j=e.vertices,$=e.faces,_e=e.faceVertexUvs[0],st=_e!==void 0&&_e.length>0,rt=[],ut=new Map;P7(j,$,rt,ut);let gt=[],yt,wt,Ct,Pt,At,Tt,kt;for(let l1 of Array.from(ut.keys())){for(wt=ut.get(l1),Ct=new _,At=3/8,Tt=1/8,kt=wt.faces.length,kt!=2&&(At=.5,Tt=0,kt!=1),Ct.addVectors(wt.a,wt.b).multiplyScalar(At),o.set(0,0,0),g=0;g<kt;g++){for(Pt=wt.faces[g],b=0;b<3&&(yt=j[C7(Pt,M7[b])],!(yt!==wt.a&&yt!==wt.b));b++);yt&&o.add(yt)}o.multiplyScalar(Tt),Ct.add(o),wt.newEdge=gt.length,gt.push(Ct)}let It,Lt,Ft,Nt,Ht,dr,hs,us=[];for(c=0,d=j.length;c<d;c++){for(dr=j[c],Ht=rt[c].edges,a=Ht.length,a==3?It=3/16:a>3&&(It=3/(8*a)),Lt=1-a*Number(It),Ft=It,a<=2&&(a==2?(Lt=3/4,Ft=1/8):a==1||a==0),hs=dr.clone().multiplyScalar(Lt),o.set(0,0,0),g=0;g<a;g++)Nt=Ht[g],yt=Nt.a!==dr?Nt.a:Nt.b,o.add(yt);o.multiplyScalar(Number(Ft)),hs.add(o),us.push(hs)}let hn=us.concat(gt),un=us.length,bo,_s,gn,Gr=[],ds=[],Zn,Nn,Qn,bu,ou=new z$2,g0=new z$2,Su=new z$2;for(c=0,d=$.length;c<d;c++)Pt=$[c],bo=Number(DA(Pt.a,Pt.b,ut).newEdge)+un,_s=Number(DA(Pt.b,Pt.c,ut).newEdge)+un,gn=Number(DA(Pt.c,Pt.a,ut).newEdge)+un,V0(Gr,bo,_s,gn,Pt.materialIndex),V0(Gr,Pt.a,bo,gn,Pt.materialIndex),V0(Gr,Pt.b,_s,bo,Pt.materialIndex),V0(Gr,Pt.c,gn,_s,Pt.materialIndex),st&&(Zn=_e[c],Nn=Zn[0],Qn=Zn[1],bu=Zn[2],ou.set(Vd(Nn.x,Qn.x),Vd(Nn.y,Qn.y)),g0.set(Vd(Qn.x,bu.x),Vd(Qn.y,bu.y)),Su.set(Vd(Nn.x,bu.x),Vd(Nn.y,bu.y)),z0(ds,ou,g0,Su),z0(ds,Nn,ou,Su),z0(ds,Qn,g0,ou),z0(ds,bu,Su,g0));e.vertices=hn,e.faces=Gr,st&&(e.faceVertexUvs[0]=ds)}},Bi=new _,bI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=e.geometry??(o==null?void 0:o.geometry)??new Pe().copy(new vi(100,100,100)),c;o===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(Bi),c={width:Bi.x,height:Bi.y,depth:Bi.z,subdivisions:0}):c=o.parameters;let d={...c,...e.parameters};return{parameters:{width:Math.abs(d.width),height:Math.abs(d.height),depth:Math.abs(d.depth),subdivisions:Math.abs(d.subdivisions)},geometry:a}}static build(e){let{width:o,height:a,depth:c,subdivisions:d}=e.parameters,g=e.geometry??new Pe().copy(new vi(100,100,100)),b=g.userData.parameters;b===void 0?(g.computeBoundingBox(),g.boundingBox.getSize(Bi)):Bi.set(b.width,b.height,b.depth),(o!==Bi.x||a!==Bi.y||c!==Bi.z)&&g.scale(Bi.x===0?1:o/Bi.x,Bi.y===0?1:a/Bi.y,Bi.z===0?1:c/Bi.z);let j=g.originalGeometry;try{d>0?(j===void 0||(b==null?void 0:b.subdivisions)!==d)&&(j===void 0&&(j=g),g=new U0(d).modify(j).toBufferGeometry()):(j!==void 0&&(g=j),j=void 0,g.getAttribute("normal")===void 0&&g.computeVertexNormals())}catch{j!==void 0&&(g=j),j=void 0,g.getAttribute("normal")===void 0&&g.computeVertexNormals()}return j!==void 0&&Object.assign(g,{originalGeometry:j}),delete e.geometry,Object.assign(g,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,o,a){new oh(a).load(e,c=>{let d=this.normalizeInputs({geometry:c});c.boundingBox.getSize(Bi);let g=100/Bi.x;Object.assign(d.parameters,{width:100,height:Bi.y*g,depth:Bi.z*g}),o(this.build(d))})}},G0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??0)})}}static build(e){let{width:o,height:a,spikes:c,cornerRadius:d,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}=e.parameters,$=e.shape,_e=o*.5,st=a*.5,rt=0,ut=0,gt=2*Math.PI/c;for(let wt=0;wt<c;wt++){let Ct=gt*wt,Pt=rt+Math.sin(Ct)*_e,At=ut+Math.cos(Ct)*st;$.addPoint($.createPoint(Pt,At))}$.isClosed=!0;for(let wt=0,Ct=$.points.length;wt<Ct;wt++)$.points[wt].roundness=d;$.roundness=d,$.update();let yt=Gn.create({shape:$,parameters:{roundness:d,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}});return Object.assign(yt,{userData:{...e,type:"PolygonGeometry"}})}},SI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o,height:a,depth:c,radialSegments:d,heightSegments:g,openEnded:b,cornerRadius:j,cornerSegments:$}=e.parameters,_e=new RA(o*.5,a,d,g,b,j,$);return _e.scale(1,1,c/o),Object.assign(_e,{userData:{...e,type:"PyramidGeometry"}})}};function Tm(e,o,a){a.x=e.x*o.x,a.y=e.y,a.z=e.x*o.y}function IA(e,o,a,c,d,g){let b=o.clone().sub(e),j=a.clone().sub(e),$=b.angleTo(j);if(b.normalize(),j.normalize(),c===d){let _e=b.add(j).normalize();g.copy(e).addScaledVector(_e,c/Math.sin($/2))}else{let _e=b.angleTo(j);g.copy(e),g.addScaledVector(b,d/Math.sin(_e)),g.addScaledVector(j,c/Math.sin(_e))}}function D7(e,o,a){let c=e.clone().sub(o),d=a.clone().sub(o);return c.projectOnVector(d),c.add(o)}var RA=class extends Pe{constructor(e=.5,o=1,a=4,c=1,d=!1,g=0,b=4){super(),a=Math.floor(Math.max(3,a)),c=Math.floor(c),b=Math.floor(b);let j=[],$=[],_e=[],st=[],rt=0,ut=o/2,gt=Math.PI/a,yt=e*Math.cos(Math.PI/a),wt=2*Math.PI/a,Ct=(a-2)*Math.PI/a,Pt=Math.PI-Ct,At=new _(0,-ut,0),Tt=new _(0,ut,0),kt=new z$2(e,-ut),It=new z$2(yt,-ut),Lt=new z$2(0,Tt.y).sub(It),Ft=new z$2(0,Tt.y).sub(kt),Nt=new z$2(Lt.y,-Lt.x).normalize(),Ht=new z$2(Ft.y,-Ft.x).normalize(),dr=e*Math.cos(Math.PI/a)*Math.tan((Math.PI-Lt.angle())/2)-1e-8;g=Math.min(g,dr);let hs;{let gn=new _(Nt.x,Nt.y,0),Gr=new _(Math.cos(wt)*gn.x,gn.y,Math.sin(wt)*gn.x);hs=gn.angleTo(Gr)}let us=g/Math.tan((Math.PI-Lt.angle())/2),hn=g/Math.tan((Math.PI-hs)/2),un=new _;if(!d){$.push(At.x,At.y,At.z),_e.push(0,-1,0),st.push(0,0);let gn=rt++,Gr=[],ds=kt.clone(),Zn=us/Math.cos(Math.PI/a);ds.x-=Zn;for(let Nn=0;Nn<a;Nn++){let Qn=Nn/a*Math.PI*2+gt,bu=new z$2(Math.sin(Qn),Math.cos(Qn));Tm(ds,bu,un),$.push(un.x,un.y,un.z),_e.push(0,-1,0),st.push(0,0),Gr.push(rt++)}for(let Nn=0;Nn<Gr.length;Nn++)j.push(Gr[Nn],gn,Gr[(Nn+1)%Gr.length])}{let gn=new _,Gr=new _,ds=new _,Zn=new _,Nn=new _,Qn=new _;for(let bu=0;bu<a;bu++){let ou=bu/a*Math.PI*2+gt,g0=(bu+.5)/a*Math.PI*2+gt,Su=(bu+1)/a*Math.PI*2+gt,l1=new z$2(Math.sin(ou),Math.cos(ou)),B0=new z$2(Math.sin(g0),Math.cos(g0)),a1=new z$2(Math.sin(Su),Math.cos(Su));Tm(kt,l1,Gr),Tm(kt,a1,ds),Tm(Nt,B0,gn),IA(Tt,Gr,ds,hn,hn,Zn),$.push(Zn.x,Zn.y,Zn.z),IA(Gr,Tt,ds,hn,us,Nn),$.push(Nn.x,Nn.y,Nn.z),IA(ds,Gr,Tt,us,hn,Qn),$.push(Qn.x,Qn.y,Qn.z),_e.push(gn.x,gn.y,gn.z),_e.push(gn.x,gn.y,gn.z),_e.push(gn.x,gn.y,gn.z),st.push(0,0),st.push(0,0),st.push(0,0);let q1=rt++,ox=rt++,U_=rt++;if(j.push(q1,ox,U_),g>0){{let wA=Gr.clone().add(ds).multiplyScalar(.5),pO=Tt.clone().sub(wA).normalize(),aR=At.clone().sub(wA).normalize().add(pO).normalize().multiplyScalar(-1),fD=Qn.clone().sub(Nn);bo(wA,fD,aR,Lt.angle())}let tS,iS;{let wA=new _;Tm(Ht,a1,wA);let pO=Qn.clone().add(Zn).multiplyScalar(.5);pO=D7(pO,ds,Tt);let aR=Qn.clone().sub(Zn);[tS,iS]=bo(pO,aR,wA,hs,Zn.y)}{let wA=tS,pO=wA.clone().setY(0).normalize(),aR=new _(0,-1,0),fD=pO.clone().cross(aR);_s(wA,pO,aR,fD)}{let wA=Lt.angle(),pO=Math.PI-wA,aR=Tt.clone();aR.y-=g/Math.sin(wA-Math.PI/2);let fD=new _,AA=[];for(let mO=0;mO<b;mO++){let sp=[],xu=Math.PI/2-pO*mO/b,ux=Math.cos(xu),tA=Math.sin(xu),au=g0;for(let C3=0;C3<=mO;C3++){let X3=Math.cos(au),sR=Math.sin(au);gn.x=ux*sR,gn.y=tA,gn.z=ux*X3,fD.copy(aR).addScaledVector(gn,g),$.push(fD.x,fD.y,fD.z),_e.push(gn.x,gn.y,gn.z),st.push(0,0),sp.push(rt++),au+=Math.PI*2/mO/a}AA.push(sp)}iS.reverse(),AA.push(iS);let oI=AA.length-1;for(let mO=0;mO<oI;mO++){let sp=AA[mO],xu=AA[mO+1],ux=sp.length-1;j.push(xu[1],sp[0],xu[0]);for(let tA=1;tA<=ux;tA++)j.push(sp[tA],sp[tA-1],xu[tA]),j.push(xu[tA+1],sp[tA],xu[tA])}}}}}this.setIndex(j),this.setAttribute("position",new Te($,3)),this.setAttribute("normal",new Te(_e,3)),this.setAttribute("uv",new Te(st,2));function bo(gn,Gr,ds,Zn,Nn){let Qn=-Zn/2,bu=(Math.PI-Zn)/2,ou=Gr.clone().normalize().cross(ds);gn.addScaledVector(ds,-g/Math.sin(bu));let g0=new _,Su=new _,l1=1,B0=rt,a1=[];for(let q1=0;q1<=b;q1++){let ox=Qn+q1/b*Zn;Su.set(0,0,0),Su.addScaledVector(ou,Math.sin(ox)),Su.addScaledVector(ds,Math.cos(ox));for(let U_=0;U_<=l1;U_++){let tS=U_/l1-.5;if(g0.copy(gn),g0.addScaledVector(Gr,tS),g0.addScaledVector(Su,g),Nn!=null){let iS=Math.max(0,g0.y-Nn);g0.addScaledVector(Gr,-iS/Gr.y)}$.push(g0.x,g0.y,g0.z),_e.push(Su.x,Su.y,Su.z),st.push(0,0),U_===0&&a1.push(rt),rt++}}for(let q1=0;q1<b;q1++)for(let ox=0;ox<l1;ox++){let U_=B0+ox+(l1+1)*q1,tS=U_+(l1+1),iS=tS+1,wA=U_+1;j.push(U_,tS,wA),j.push(tS,iS,wA)}return[gn.clone().addScaledVector(Gr,.5),a1]}function _s(gn,Gr,ds,Zn){let Nn=Math.PI/2,Qn=Ft.angle()-Nn,bu=[],ou=new _,g0=new _;for(let l1=0;l1<=b;l1++){let B0=[],a1=l1/b;for(let q1=0;q1<=l1;q1++){let ox=((l1?q1/l1:0)-.5)*Pt,U_=Math.cos(ox),tS=Math.sin(ox),iS=Math.atan(Math.tan(Qn)*U_),wA=(Nn+iS)*a1,pO=Math.cos(wA),aR=Math.sin(wA);ou.set(0,0,0),ou.addScaledVector(Gr,aR*U_),ou.addScaledVector(ds,pO),ou.addScaledVector(Zn,aR*tS),g0.copy(gn).addScaledVector(ou,g),$.push(g0.x,g0.y,g0.z),_e.push(ou.x,ou.y,ou.z),st.push(0,0),B0.push(rt++)}bu.push(B0)}let Su=bu.length-1;for(let l1=0;l1<Su;l1++){let B0=bu[l1],a1=bu[l1+1],q1=B0.length-1;j.push(B0[0],a1[1],a1[0]);for(let ox=1;ox<=q1;ox++)j.push(B0[ox-1],B0[ox],a1[ox]),j.push(B0[ox],a1[ox+1],a1[ox])}}}},zd=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),c=Object.assign((o==null?void 0:o.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??0)}),ui:c}}static build(e){let o=e.shape,{width:a,height:c,cornerRadius:d,cornerType:g,depth:b,extrudeBevelSize:j,extrudeBevelSegments:$}=e.parameters,_e={x:a*.5,y:c*.5},st={x:-_e.x,y:-_e.y},rt={x:_e.x,y:_e.y};function ut(kt,It,Lt){return It>a&&Lt>c?Math.min(kt*a/It,kt*c/Lt):It>a?kt*a/It:Lt>c?kt*c/Lt:kt}let gt=[];gt[0]=d[0]===0?0:ut(d[0],d[0]+d[3],d[0]+d[1]),gt[1]=d[1]===0?0:ut(d[1],d[1]+d[2],d[1]+d[0]),gt[2]=d[2]===0?0:ut(d[2],d[2]+d[1],d[2]+d[3]),gt[3]=d[3]===0?0:ut(d[3],d[3]+d[0],d[3]+d[2]);let yt=st.x,wt=rt.x,Ct=rt.y,Pt=st.y;o.addPoint(o.createPoint(yt,Ct)),o.addPoint(o.createPoint(wt,Ct)),o.addPoint(o.createPoint(wt,Pt)),o.addPoint(o.createPoint(yt,Pt)),o.isClosed=!0;let At=!0;for(let kt=0,It=o.points.length;kt<It;kt++)o.points[kt].roundness=gt[kt],kt>0&&gt[kt]!==gt[kt-1]&&(At=!1);At&&(o.roundness=gt[0]),o.useCubicForRoundedCorners=g!==1,o.update();let Tt=Gn.create({shape:o,parameters:{depth:b,extrudeBevelSize:j,extrudeBevelSegments:$}});return Object.assign(Tt,{userData:{...e,type:"RectangleGeometry"}})}},wI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return a.thetaLength=Me.clamp(a.thetaLength,0,180),{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o=100,height:a=o,depth:c=o,widthSegments:d=64,heightSegments:g=64,phiStart:b,phiLength:j,thetaStart:$,thetaLength:_e}=e.parameters,st;return _e===0?(st=new Pe,st.setAttribute("position",new Te([],3))):st=new Ys(.5*o,d,g,b,j,$,_e*Me.DEG2RAD),st.scale(1,a/o,c/o),Object.assign(st,{userData:{...e,type:"SphereGeometry"}})}},AI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:0})}}static build(e){let{width:o=100,height:a=o,widthSegments:c=8,heightSegments:d=8}=e.parameters,g=new wn(o,a,c,d);return g.scale(1,1,1),Object.assign(g,{userData:{...e,type:"PlaneGeometry"}})}},_I=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width)})}}static build(e){let{width:o,height:a,depth:c,angle:d,cornerRadius:g,cornerSegments:b}=e.parameters,j=new LA(o,a,c,d,g,b);return Object.assign(j,{userData:{...e,type:"BackdropGeometry"}})}},LA=class extends Pe{constructor(e=1,o=1,a=1,c=90,d=10,g=24){super(),this.type="BackdropGeometry";let b=[],j=[],$=[],_e=.001;d==0&&(g=1),g=Math.max(1,Math.floor(g)),d=Math.min(d,100),c=Math.min(180-_e,c),c*=Math.PI/180;let st=[],rt=Math.PI/2,ut=(l1=0,B0=0,a1=0)=>new _(l1,B0,a1),gt=ut(),yt=ut(),[wt,Ct,Pt]=[o/2,e/2,a/2],At=-Ct,Tt=+Ct,[kt,It,Lt]=[ut(At,-wt,+Pt),ut(At,-wt,-Pt),ut(At,+wt,-Pt)],Ft=(l1,B0=!1)=>Math.sin(l1-Math.PI/(1+ +B0)),Nt=(l1,B0=!1)=>Math.cos(l1-Math.PI/(1+ +B0));Lt.y=Math.sin(c)*o-wt;let Ht=Math.cos(c)*o-Pt,dr=kt.z-_e;c<=rt?(Lt.z=Math.min(Ht,dr),Lt.z==dr&&(Lt.y-=(Ht-dr)/Math.tan(rt-c))):It.z=Math.min(It.z-Ht-Pt,kt.z-_e),gt.subVectors(kt,It),yt.subVectors(Lt,It);let hs=Math.min(gt.length(),yt.length())*d/100,us=hs*Math.tan(c/2),hn=hs/Math.cos(c/2),un=gt.clone().normalize().add(yt.normalize()).setLength(hn).add(It);gt.set(0,Ft(c,!0),Nt(c,!0)),st.push([Lt,gt.clone()]);let bo=(Math.PI-c)/g;for(let l1=0;l1<=g;l1++){let B0=rt+c+l1*bo;gt.set(0,Math.sin(B0)*us,Math.cos(B0)*us),gt.add(un),yt.set(0,Ft(B0),Nt(B0)),st.push([gt.clone(),yt.clone()])}st.push([kt,ut(0,1,0)]);let _s=Math.sin(bo/2)*us*2,gn=st.length-1,Gr=st[0][0].distanceTo(st[1][0]),ds=st[gn-1][0].distanceTo(st[gn][0]),Zn=Gr+_s*g+ds;st[0].push(1);for(let l1=0;l1<=g;l1++)st[l1+1].push(1-(Gr+l1*_s)/Zn);st[gn].push(0);let[Nn,Qn,bu]=st[0],ou,g0,Su;for(let l1=1;l1<st.length;l1++)[ou,g0,Su]=st[l1],b.push(At,Nn.y,Nn.z,At,ou.y,ou.z,Tt,Nn.y,Nn.z,Tt,Nn.y,Nn.z,At,ou.y,ou.z,Tt,ou.y,ou.z),j.push(0,Qn.y,Qn.z,0,g0.y,g0.z,0,Qn.y,Qn.z,0,Qn.y,Qn.z,0,g0.y,g0.z,0,g0.y,g0.z),$.push(0,bu,0,Su,1,bu,1,bu,0,Su,1,Su),[Nn,Qn,bu]=[ou,g0,Su];this.setAttribute("position",new Te(b,3)),this.setAttribute("normal",new Te(j,3)),this.setAttribute("uv",new Te($,2))}},j0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??0)})}}static build(e){let{width:o,height:a,innerRadiusPercent:c,spikes:d,cornerRadius:g,angle:b,depth:j,extrudeBevelSize:$,extrudeBevelSegments:_e}=e.parameters,st=e.shape,rt=o*.5,ut=a*.5,gt=0,yt=0,wt=b*Math.PI/360/d,Ct=Math.PI/2*3*-1,Pt=rt*c/100,At=ut*c/100;if(d===3&&c===50){wt=2*Math.PI/d;for(let kt=0;kt<d;kt++){let It=wt*kt,Lt=gt+Math.sin(It)*rt,Ft=yt+Math.cos(It)*ut;st.addPoint(st.createPoint(Lt,Ft))}}else for(let kt=0;kt<d;kt++){let It=gt+Math.cos(Ct)*rt,Lt=yt+Math.sin(Ct)*ut;st.addPoint(st.createPoint(It,Lt)),Ct+=wt,It=gt+Math.cos(Ct)*Pt,Lt=yt+Math.sin(Ct)*At,st.addPoint(st.createPoint(It,Lt)),Ct+=wt}st.isClosed=!0;for(let kt=0,It=st.points.length;kt<It;kt++)st.points[kt].roundness=g;st.roundness=g,st.update();let Tt=Gn.create({shape:st,parameters:{roundness:g,depth:j,extrudeBevelSize:$,extrudeBevelSegments:_e}});return Object.assign(Tt,{userData:{...e,type:"StarGeometry"}})}},EI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??0)})}}static build(e){let{width:o,height:a}=e.parameters,c=new wn(o,a);return Object.assign(c,{userData:{...e,type:"TextFrameGeometry"}})}},TI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),c=Math.abs(a.width),d=Math.abs(a.height??a.width),g=Math.round(Math.abs(a.depth??a.width*.25));return{parameters:Object.assign(a,{width:c,height:d,depth:g})}}static build(e){let{width:o,height:a,depth:c,radialSegments:d,tubularSegments:g,arc:b,cornerRadius:j,cornerSegments:$}=e.parameters,_e=O7(o,a,c,o*.5,b,g,0,0,d,j,$);return _e.scale(1,a/o,1),Object.assign(_e,{userData:{...e,type:"TorusGeometry"}})}};function O7(e,o,a,c,d,g,b,j,$,_e,st){[o,a]=[a,o],b=o/2;let rt=Me.clamp(d/360,0,1);if(rt===0){let ut=new Pe;return ut.setAttribute("position",new Te([],3)),ut}return rt===1&&(_e=0),new _m(!0,e,o,a,c,rt,g,b,j,$,_e,st)}var MI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width),depth:Math.abs(a.depth??a.width),tube:a.tube??a.width*.125})}}static build(e){let{width:o,tube:a,tubularSegments:c,radialSegments:d,p:g,q:b}=e.parameters,j=o*.5;j!==a&&(j-=a);let $=new eh(j,a,c,d,g,b);return Object.assign($,{userData:{...e,type:"TorusKnotGeometry"}})}},CI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(a.height??a.width*(a.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(a.depth??0)})}}static build(e){let{width:o=100,height:a,cornerRadius:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b,isRect:j}=e.parameters,$=e.shape,_e=o*.5,st=a*.5;j?($.addPoint($.createPoint(-_e,st)),$.addPoint($.createPoint(_e,-st)),$.addPoint($.createPoint(-_e,-st))):($.addPoint($.createPoint(0,st)),$.addPoint($.createPoint(_e,-st)),$.addPoint($.createPoint(-_e,-st))),$.isClosed=!0;for(let ut=0,gt=$.points.length;ut<gt;ut++)$.points[ut].roundness=c;$.roundness=c,$.update();let rt=Gn.create({shape:$,parameters:{roundness:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}});return Object.assign(rt,{userData:{...e,type:"TriangleGeometry"}})}};function PI$1(e,o){let a=2*Math.PI;return(e%a+a)%a===(o%a+a)%a}var BA=class{add(e,o,a){if(typeof arguments[0]!="string")for(let c in arguments[0])this.add(c,arguments[0][c],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(c){this[c]=this[c]||[],o&&this[c][a?"unshift":"push"](o)},this)}run(e,o){this[e]=this[e]||[],this[e].forEach(function(a){a.call(o&&o.context?o.context:o,o)})}},NA=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(o=>{if(typeof o!="object"||!o.name||!o.init)throw new Error("Invalid JSEP plugin format");this.registered[o.name]||(o.init(this.jsep),this.registered[o.name]=o)})}},fe$1=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+fe$1.version}static addUnaryOp(o){return fe$1.max_unop_len=Math.max(o.length,fe$1.max_unop_len),fe$1.unary_ops[o]=1,fe$1}static addBinaryOp(o,a,c){return fe$1.max_binop_len=Math.max(o.length,fe$1.max_binop_len),fe$1.binary_ops[o]=a,c?fe$1.right_associative.add(o):fe$1.right_associative.delete(o),fe$1}static addIdentifierChar(o){return fe$1.additional_identifier_chars.add(o),fe$1}static addLiteral(o,a){return fe$1.literals[o]=a,fe$1}static removeUnaryOp(o){return delete fe$1.unary_ops[o],o.length===fe$1.max_unop_len&&(fe$1.max_unop_len=fe$1.getMaxKeyLen(fe$1.unary_ops)),fe$1}static removeAllUnaryOps(){return fe$1.unary_ops={},fe$1.max_unop_len=0,fe$1}static removeIdentifierChar(o){return fe$1.additional_identifier_chars.delete(o),fe$1}static removeBinaryOp(o){return delete fe$1.binary_ops[o],o.length===fe$1.max_binop_len&&(fe$1.max_binop_len=fe$1.getMaxKeyLen(fe$1.binary_ops)),fe$1.right_associative.delete(o),fe$1}static removeAllBinaryOps(){return fe$1.binary_ops={},fe$1.max_binop_len=0,fe$1}static removeLiteral(o){return delete fe$1.literals[o],fe$1}static removeAllLiterals(){return fe$1.literals={},fe$1}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(o){this.expr=o,this.index=0}static parse(o){return new fe$1(o).parse()}static getMaxKeyLen(o){return Math.max(0,...Object.keys(o).map(a=>a.length))}static isDecimalDigit(o){return o>=48&&o<=57}static binaryPrecedence(o){return fe$1.binary_ops[o]||0}static isIdentifierStart(o){return o>=65&&o<=90||o>=97&&o<=122||o>=128&&!fe$1.binary_ops[String.fromCharCode(o)]||fe$1.additional_identifier_chars.has(String.fromCharCode(o))}static isIdentifierPart(o){return fe$1.isIdentifierStart(o)||fe$1.isDecimalDigit(o)}throwError(o){let a=new Error(o+" at character "+this.index);throw a.index=this.index,a.description=o,a}runHook(o,a){if(fe$1.hooks[o]){let c={context:this,node:a};return fe$1.hooks.run(o,c),c.node}return a}searchHook(o){if(fe$1.hooks[o]){let a={context:this};return fe$1.hooks[o].find(function(c){return c.call(a.context,a),a.node}),a.node}}gobbleSpaces(){let o=this.code;for(;o===fe$1.SPACE_CODE||o===fe$1.TAB_CODE||o===fe$1.LF_CODE||o===fe$1.CR_CODE;)o=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let o=this.gobbleExpressions(),a=o.length===1?o[0]:{type:fe$1.COMPOUND,body:o};return this.runHook("after-all",a)}gobbleExpressions(o){let a=[],c,d;for(;this.index<this.expr.length;)if(c=this.code,c===fe$1.SEMCOL_CODE||c===fe$1.COMMA_CODE)this.index++;else if(d=this.gobbleExpression())a.push(d);else if(this.index<this.expr.length){if(c===o)break;this.throwError('Unexpected "'+this.char+'"')}return a}gobbleExpression(){let o=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",o)}gobbleBinaryOp(){this.gobbleSpaces();let o=this.expr.substr(this.index,fe$1.max_binop_len),a=o.length;for(;a>0;){if(fe$1.binary_ops.hasOwnProperty(o)&&(!fe$1.isIdentifierStart(this.code)||this.index+o.length<this.expr.length&&!fe$1.isIdentifierPart(this.expr.charCodeAt(this.index+o.length))))return this.index+=a,o;o=o.substr(0,--a)}return!1}gobbleBinaryExpression(){let o,a,c,d,g,b,j,$,_e;if(b=this.gobbleToken(),!b||(a=this.gobbleBinaryOp(),!a))return b;for(g={value:a,prec:fe$1.binaryPrecedence(a),right_a:fe$1.right_associative.has(a)},j=this.gobbleToken(),j||this.throwError("Expected expression after "+a),d=[b,g,j];a=this.gobbleBinaryOp();){if(c=fe$1.binaryPrecedence(a),c===0){this.index-=a.length;break}g={value:a,prec:c,right_a:fe$1.right_associative.has(a)},_e=a;let st=rt=>g.right_a&&rt.right_a?c>rt.prec:c<=rt.prec;for(;d.length>2&&st(d[d.length-2]);)j=d.pop(),a=d.pop().value,b=d.pop(),o={type:fe$1.BINARY_EXP,operator:a,left:b,right:j},d.push(o);o=this.gobbleToken(),o||this.throwError("Expected expression after "+_e),d.push(g,o)}for($=d.length-1,o=d[$];$>1;)o={type:fe$1.BINARY_EXP,operator:d[$-1].value,left:d[$-2],right:o},$-=2;return o}gobbleToken(){let o,a,c,d;if(this.gobbleSpaces(),d=this.searchHook("gobble-token"),d)return this.runHook("after-token",d);if(o=this.code,fe$1.isDecimalDigit(o)||o===fe$1.PERIOD_CODE)return this.gobbleNumericLiteral();if(o===fe$1.SQUOTE_CODE||o===fe$1.DQUOTE_CODE)d=this.gobbleStringLiteral();else if(o===fe$1.OBRACK_CODE)d=this.gobbleArray();else{for(a=this.expr.substr(this.index,fe$1.max_unop_len),c=a.length;c>0;){if(fe$1.unary_ops.hasOwnProperty(a)&&(!fe$1.isIdentifierStart(this.code)||this.index+a.length<this.expr.length&&!fe$1.isIdentifierPart(this.expr.charCodeAt(this.index+a.length)))){this.index+=c;let g=this.gobbleToken();return g||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:fe$1.UNARY_EXP,operator:a,argument:g,prefix:!0})}a=a.substr(0,--c)}fe$1.isIdentifierStart(o)?(d=this.gobbleIdentifier(),fe$1.literals.hasOwnProperty(d.name)?d={type:fe$1.LITERAL,value:fe$1.literals[d.name],raw:d.name}:d.name===fe$1.this_str&&(d={type:fe$1.THIS_EXP})):o===fe$1.OPAREN_CODE&&(d=this.gobbleGroup())}return d?(d=this.gobbleTokenProperty(d),this.runHook("after-token",d)):this.runHook("after-token",!1)}gobbleTokenProperty(o){this.gobbleSpaces();let a=this.code;for(;a===fe$1.PERIOD_CODE||a===fe$1.OBRACK_CODE||a===fe$1.OPAREN_CODE||a===fe$1.QUMARK_CODE;){let c;if(a===fe$1.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==fe$1.PERIOD_CODE)break;c=!0,this.index+=2,this.gobbleSpaces(),a=this.code}this.index++,a===fe$1.OBRACK_CODE?(o={type:fe$1.MEMBER_EXP,computed:!0,object:o,property:this.gobbleExpression()},this.gobbleSpaces(),a=this.code,a!==fe$1.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):a===fe$1.OPAREN_CODE?o={type:fe$1.CALL_EXP,arguments:this.gobbleArguments(fe$1.CPAREN_CODE),callee:o}:(a===fe$1.PERIOD_CODE||c)&&(c&&this.index--,this.gobbleSpaces(),o={type:fe$1.MEMBER_EXP,computed:!1,object:o,property:this.gobbleIdentifier()}),c&&(o.optional=!0),this.gobbleSpaces(),a=this.code}return o}gobbleNumericLiteral(){let o="",a,c;for(;fe$1.isDecimalDigit(this.code);)o+=this.expr.charAt(this.index++);if(this.code===fe$1.PERIOD_CODE)for(o+=this.expr.charAt(this.index++);fe$1.isDecimalDigit(this.code);)o+=this.expr.charAt(this.index++);if(a=this.char,a==="e"||a==="E"){for(o+=this.expr.charAt(this.index++),a=this.char,(a==="+"||a==="-")&&(o+=this.expr.charAt(this.index++));fe$1.isDecimalDigit(this.code);)o+=this.expr.charAt(this.index++);fe$1.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+o+this.char+")")}return c=this.code,fe$1.isIdentifierStart(c)?this.throwError("Variable names cannot start with a number ("+o+this.char+")"):(c===fe$1.PERIOD_CODE||o.length===1&&o.charCodeAt(0)===fe$1.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:fe$1.LITERAL,value:parseFloat(o),raw:o}}gobbleStringLiteral(){let o="",a=this.index,c=this.expr.charAt(this.index++),d=!1;for(;this.index<this.expr.length;){let g=this.expr.charAt(this.index++);if(g===c){d=!0;break}else if(g==="\\")switch(g=this.expr.charAt(this.index++),g){case"n":o+=`
`;break;case"r":o+="\r";break;case"t":o+="	";break;case"b":o+="\b";break;case"f":o+="\f";break;case"v":o+="\v";break;default:o+=g}else o+=g}return d||this.throwError('Unclosed quote after "'+o+'"'),{type:fe$1.LITERAL,value:o,raw:this.expr.substring(a,this.index)}}gobbleIdentifier(){let o=this.code,a=this.index;for(fe$1.isIdentifierStart(o)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(o=this.code,fe$1.isIdentifierPart(o));)this.index++;return{type:fe$1.IDENTIFIER,name:this.expr.slice(a,this.index)}}gobbleArguments(o){let a=[],c=!1,d=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let g=this.code;if(g===o){c=!0,this.index++,o===fe$1.CPAREN_CODE&&d&&d>=a.length&&this.throwError("Unexpected token "+String.fromCharCode(o));break}else if(g===fe$1.COMMA_CODE){if(this.index++,d++,d!==a.length){if(o===fe$1.CPAREN_CODE)this.throwError("Unexpected token ,");else if(o===fe$1.CBRACK_CODE)for(let b=a.length;b<d;b++)a.push(null)}}else if(a.length!==d&&d!==0)this.throwError("Expected comma");else{let b=this.gobbleExpression();(!b||b.type===fe$1.COMPOUND)&&this.throwError("Expected comma"),a.push(b)}}return c||this.throwError("Expected "+String.fromCharCode(o)),a}gobbleGroup(){this.index++;let o=this.gobbleExpressions(fe$1.CPAREN_CODE);if(this.code===fe$1.CPAREN_CODE)return this.index++,o.length===1?o[0]:o.length?{type:fe$1.SEQUENCE_EXP,expressions:o}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:fe$1.ARRAY_EXP,elements:this.gobbleArguments(fe$1.CBRACK_CODE)}}},I7=new BA;Object.assign(fe$1,{hooks:I7,plugins:new NA(fe$1),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});fe$1.max_unop_len=fe$1.getMaxKeyLen(fe$1.unary_ops);fe$1.max_binop_len=fe$1.getMaxKeyLen(fe$1.binary_ops);var Wc=e=>new fe$1(e).parse(),R7=Object.getOwnPropertyNames(fe$1);R7.forEach(e=>{Wc[e]===void 0&&e!=="prototype"&&(Wc[e]=fe$1[e])});Wc.Jsep=fe$1;var L7="ConditionalExpression",B7={name:"ternary",init(e){e.hooks.add("after-expression",function(o){if(o.node&&this.code===e.QUMARK_CODE){this.index++;let a=o.node,c=this.gobbleExpression();if(c||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let d=this.gobbleExpression();if(d||this.throwError("Expected expression"),o.node={type:L7,test:a,consequent:c,alternate:d},a.operator&&e.binary_ops[a.operator]<=.9){let g=a;for(;g.right.operator&&e.binary_ops[g.right.operator]<=.9;)g=g.right;o.node.test=g.right,g.right=o.node,o.node=a}}else this.throwError("Expected :")}})}};Wc.plugins.register(B7);var N7=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],F7=["0","1","2","3","4","5","6","7","8","9","."],k7=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function V7(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Wc.addBinaryOp("^",11,!0);function H0(e,o,a="number"){let c="";for(let b=0;b<e.length;b++){let j=e[b];if("id"in j){let $=e[b-1];if(b>0&&"id"in $){console.error("Two variables in a row",e);return}let _e=o.getVariable(j.id),st=Yi.getDisplayedValue(_e);a==="number"&&Yi.isTextValue(_e)&&Array.isArray(_e.textValue)&&_e.textValue.length===1?st=parseFloat(st).toString():a==="boolean"&&Yi.isBoolean(_e)?st=_e?"true":"false":a==="boolean"&&Yi.isTextValue(_e)&&!Array.isArray(_e.textValue)&&(st='"'+st+'"'),c+=st;continue}else if(a==="string"){j.name!=='"'&&j.name!=="+"&&(c+=j.name),j.name==="+"&&c[c.length-1]==="\\"&&(c=c.slice(0,-1)+j.name);continue}if(j.name==="and"){c+="&&";continue}if(j.name==="or"){c+="||";continue}if(j.name==="True"){c+="true";continue}if(j.name==="False"){c+="false";continue}if(a==="boolean"&&!V7(j.name)&&!F7.includes(j.name)&&!N7.includes(j.name)&&!k7.includes(j.name.replace(/\($/g,""))){c+='"'+j.name+'"';continue}c+=j.name}if(a==="string")return c;if(e.length===0){if(a==="number")return 0;if(a==="boolean")return!1}let d;try{d=Wc(c)}catch(b){console.error(c,b);return}let g;try{g=qt(d)}catch(b){console.error(c,d,b)}return g}function qt(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(qt(e.left)===qt(e.right));case"!=":return+(qt(e.left)!==qt(e.right));case">":return+(qt(e.left)>qt(e.right));case">=":return+(qt(e.left)>=qt(e.right));case"<":return+(qt(e.left)<qt(e.right));case"<=":return+(qt(e.left)<=qt(e.right));case"+":return qt(e.left)+qt(e.right);case"-":return qt(e.left)-qt(e.right);case"*":return qt(e.left)*qt(e.right);case"/":return qt(e.left)/qt(e.right);case"%":return qt(e.left)%qt(e.right);case"&&":return qt(e.left)&&qt(e.right);case"||":return qt(e.left)||qt(e.right);case"^":return Math.pow(qt(e.left),qt(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-qt(e.argument);case"!":return+!qt(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let o=0,a=1;if(e.arguments.length>=1)try{o=qt(e.arguments[0])}catch(c){console.warn(c)}if(e.arguments.length>=2)try{a=qt(e.arguments[1])}catch(c){console.warn(c)}return o=Math.min(a,o),a=Math.max(a,o),o+Math.random()*(a-o)}return Math[e.callee.name].apply(null,e.arguments.map(qt))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var z7=new ce$1,U7=new ce$1;function G7(e,o,a){let c=[new _,new _,new _],d=[new _,new _,new _];return e.extractBasis(c[0],c[1],c[2]),o.extractBasis(d[0],d[1],d[2]),c.forEach((g,b)=>{let j=d[b],$=Me.lerp(g.length(),j.length(),a);g.lerp(j,a).setLength($)}),new ce$1().makeBasis(c[0],c[1],c[2])}var DI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,o){let a=Object.assign({},(o==null?void 0:o.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),c=Math.abs(a.width),d=Math.abs(a.height??a.width),g=Math.abs(a.depth??0),b=(o==null?void 0:o.shapeData)??Fd.create({parameters:M1}).userData.shape;return{path:e.path??ed.defaultData(),parameters:Object.assign(a,{width:c,height:d,depth:g,extrusion:{...r0,...a.extrusion}}),shapeData:b}}static build(e){if(e.path.points.length>=2){let o=new FA(e);return Object.assign(o,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Pe,{userData:{...e,type:"PathGeometry"}})}},FA=class extends Pe{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!PI$1(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let o=this._computeBasisMatrices(e),{depth:a,offset:c}=this.inputs.parameters.extrusion;a=Math.max(0,Math.min(a,1)),c=Math.max(0,Math.min(c,1));let d=this.inputs.path.isClosed?e.length:e.length-1,g=Math.floor(c*d),b=this.inputs.path.isClosed?Math.ceil((a+c)*d):Math.ceil(Math.min(1,a+c)*d),j=Math.min(Math.max(2,b-g+1),d+2),$=[],_e=[];for(let gn=0;gn<j;gn++){let Gr=this.inputs.path.isClosed?(gn+g)%e.length:Math.min(gn+g,e.length-1);$.push(e[Gr].clone()),_e.push(o[Gr].clone())}let st=(gn,Gr,ds)=>{$[gn]=$[gn].clone().lerp($[Gr],ds),_e[gn]=G7(_e[gn],_e[Gr],ds)},rt=0,ut=c*d%1;(!this.inputs.path.isClosed||a<=1)&&(ut||c===0)&&(rt=ut,st(0,1,rt));let gt=0,yt=(c+a)*d%1;if((this.inputs.path.isClosed&&a<=1||!this.inputs.path.isClosed&&c+a<1)&&yt&&(gt=yt,st($.length-1,$.length-2,1-gt)),a===0){let gn=$.length-1;$[gn].copy($[0]),_e[gn].copy(_e[0])}this._applyPathModifiers(_e,rt,gt);let{bevel:wt,bevelSides:Ct}=this.inputs.parameters.extrusion,Pt=wt>0?this.inputs.parameters.extrusion.capType:"flat",At=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(At=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:Tt,infos:kt,vertices:It}=this._computeShapePoints(At),Lt=0,Ft;Pt==="round"&&(Ft=new Hl(this.inputs.shapeData,2*wt,wt,At,Ct,void 0,!0),Lt=Ft.getAttribute("position").count);let Nt=0,Ht=0;kt.sort((gn,Gr)=>gn.start-Gr.start),kt.forEach(gn=>{gn.verticesStart=Nt,gn.verticesCount=gn.continuous.reduce((Gr,ds,Zn)=>Gr+(Zn===0||!ds?2:1),0),Ht+=gn.verticesCount,Nt=Ht});let dr=Ht*j,hs,us=0;if(this._isOpenEnded()&&Pt==="flat"){try{hs=ro({windingRule:Gt.ODD,elementType:Wr$1.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:Tt})}catch{hs=TA}us=hs.vertexCount}let hn=dr+2*us+Lt*2,un=dr+2*us,bo={positions:new Float32Array(hn*3),normals:new Float32Array(hn*3),uvs:new Float32Array(hn*2)},_s=[];if(kt.forEach(gn=>{this._extrudeRegion(gn,It,_e,$,bo,_s,this._isGeometryClosed()&&!this._isOpenEnded())}),hs&&(this._closeEnd(hs,dr,_s,bo,_e[0],$[0],!1),this._closeEnd(hs,dr+us,_s,bo,_e[_e.length-1],$[$.length-1],!0)),Ft){bo.positions.set(Ft.getAttribute("position").array,un*3),bo.normals.set(Ft.getAttribute("normal").array,un*3),bo.uvs.set(Ft.getAttribute("uv").array,un*2);let gn=_s.length;_s.push(...Ft.getIndex().array.map(Zn=>Zn+un)),un+=Lt,bo.positions.set(Ft.getAttribute("position").array,un*3),bo.normals.set(Ft.getAttribute("normal").array,un*3),bo.uvs.set(Ft.getAttribute("uv").array,un*2);let Gr=_s.length;_s.push(...Ft.getIndex().array.map(Zn=>Zn+un)),this.setAttribute("position",new Xe(bo.positions,3)),this.setAttribute("normal",new Xe(bo.normals,3)),this.setAttribute("uv",new Xe(bo.uvs,2)),this.setIndex(_s);let ds=z7;ds.copy(_e[_e.length-1]).setPosition($[$.length-1]),this.applyMatrix4OnRange(ds,un,hn),ds.copy(_e[0]).setPosition($[0]).multiply(U7.makeScale(1,1,-1)),this.applyMatrix4OnRange(ds,un-Lt,un),this.reverseIndicesOnRange(gn,Gr)}else this.setAttribute("position",new Xe(bo.positions,3)),this.setAttribute("normal",new Xe(bo.normals,3)),this.setAttribute("uv",new Xe(bo.uvs,2)),this.setIndex(_s)}_extractPathPoints(){let e=D0(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let o=[e[0]];return e.forEach(a=>{o[o.length-1].distanceToSquared(a)>.001&&o.push(a)}),this.inputs.path.isClosed&&o[o.length-1].distanceTo(o[0])<.001&&o.pop(),o}_computeBasisMatrices(e){let o=[],a=e.length,c=this.inputs.path.isClosed,d=new _,g=new _,b=new _,j=new _,$=new _(0,1,0);for(let yt=0;yt<a;yt++){let wt=e[yt],Ct;yt===0?Ct=c?e[e.length-2]:wt.clone().multiplyScalar(2).sub(e[1]):Ct=e[yt-1];let Pt;yt===a-1?Pt=c?e[1]:wt.clone().multiplyScalar(2).sub(e[yt-1]):Pt=e[yt+1];let At=wt.clone().sub(Ct).normalize(),Tt=Pt.clone().sub(wt).normalize(),kt=At.clone().add(Tt).normalize();b.copy(kt),yt===0&&(kt.equals($)||kt.clone().negate().equals($))&&$.set(0,0,1);let It=$.clone().cross(kt).normalize(),Lt=kt.clone().cross(It).normalize();$.copy(Lt),j.copy(It),yt===0&&(d.copy(Lt),g.copy(kt));let Ft=new ce$1().makeBasis(It,Lt,kt);o.push(Ft)}let _e=c?g:b,st=c?d:new _(0,1,0),rt=_e.clone().cross(j).normalize(),ut=Math.acos(st.dot(rt));if(isNaN(ut))return o;let gt=st.clone().cross(rt);_e.dot(gt)>0&&(ut*=-1);for(let yt=1;yt<o.length;yt++){let wt=new ce$1().makeRotationZ(ut*yt/o.length);o[yt].multiply(wt)}return o}_applyPathModifiers(e,o,a){let c=e.length,{angle:d,twist:g,startScale:b,endScale:j}=this.inputs.parameters.extrusion,$=new ce$1,_e=new ce$1;return e.forEach((st,rt)=>{let ut=rt===0?0:rt===c-1?1:(rt-o)/(c-(a===0?0:1)-(o+(1-a)));$.makeRotationZ(Me.lerp(d,d+g,ut)*Me.DEG2RAD);let gt=Me.lerp(b,j,ut);_e.makeScale(gt,gt,gt),st.multiply($).multiply(_e)}),e}_computeShapePoints(e=12,o=Gt.ODD){let a=this.inputs.shapeData,c=a.extractShapePointsToFlatArray([],e),d=a.shapeHoles.map(_e=>{let st=_e.extractShapePointsToFlatArray([],e),rt=[];for(let ut=st.length-1;ut>=1;ut-=2){let gt=st[ut-1],yt=st[ut-0];rt.push(gt,yt)}return rt}),g;try{g=ro({windingRule:o,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[c]})}catch{g=Am}let b;try{b=ro({windingRule:Gt.ODD,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...d]})}catch{b=EA}if(!g)throw new Error("error generating geometry");let j=g.elementCount;if(b){g.elementCount+=b.elementCount;for(let _e=0;_e<b.elements.length;_e++){let st=b.elements[_e],rt=_e%2===0?g.vertexCount:0;g.elements.push(st+rt)}for(let _e=0;_e<b.vertexIndices.length;_e++){let st=b.vertexIndices[_e],rt=g.vertexCount;g.vertexIndices.push(st+rt)}for(let _e=0;_e<b.vertices.length;_e++){let st=b.vertices[_e];g.vertices.push(st)}}for(let _e=0,st=g.vertexCount;_e<st;_e++){let rt=_e*2;g.vertices[rt+0],g.vertices[rt+1]}let $=[];for(let _e=g.elementCount-1;_e>=0;_e--){let st=_e>=j,rt=_e*2,ut=g.elements[rt+0],gt=g.elements[rt+1],yt=ut+gt,wt={start:ut,count:gt,normals:[],isHole:st,continuous:[],verticesStart:0,verticesCount:0};$.push(wt);let Ct=ut,Pt=yt-1,At=ut+1,Tt=a.roundedCurves.length;do{let kt=Ct-ut;g.vertices[Pt*2+0],g.vertices[Pt*2+1];let It=g.vertices[Ct*2+0],Lt=g.vertices[Ct*2+1],Ft=g.vertices[At*2+0],Nt=g.vertices[At*2+1],Ht=It-Ft,dr=Lt-Nt,hs=Math.sqrt(Ht*Ht+dr*dr);Ht/=hs,dr/=hs,wt.normals[kt*2+0]=-dr,wt.normals[kt*2+1]=Ht;let us=g.vertexIndices[Ct];if(Array.isArray(us))wt.continuous[kt]=!1;else{let[hn,un]=a.getCurveIndexFromVertexId(us-1,!0);if(un>0&&un<1)wt.continuous[kt]=!0;else{let bo=un===1?hn+1:hn-1;bo=(bo+Tt)%Tt;let _s=un===1?0:1,gn=a.roundedCurves[hn].getTangent(un),Gr=a.roundedCurves[bo].getTangent(_s);wt.continuous[kt]=gn.dot(Gr)>.95}}st&&(wt.normals[kt*2+0]*=-1,wt.normals[kt*2+1]*=-1),[Pt,Ct,At]=[Ct,At,At+1],At>=yt&&(At-=gt)}while(At!==ut+1)}return{regions:[c,...d],infos:$,vertices:g.vertices}}_insertVertex(e,o,a,c,d){let g=o*2,b=o*3;e.positions[b+0]=a.x,e.positions[b+1]=a.y,e.positions[b+2]=a.z,e.normals[b+0]=c.x,e.normals[b+1]=c.y,e.normals[b+2]=c.z,e.uvs[g+0]=d.x,e.uvs[g+1]=d.y}_extrudeRegion(e,o,a,c,d,g,b){let j=new _,$=new _,_e=new _,st=new _,rt=new z$2;a.forEach((gt,yt)=>{let wt=c[yt],Ct=e.verticesStart*a.length+e.verticesCount*yt;for(let Pt=0;Pt<e.count;Pt++){let At=(e.start+Pt)*2;if(j.set(o[At+0],o[At+1],0),_e.copy(j).applyMatrix4(gt).add(wt),e.continuous[Pt])st.set(e.normals[Pt*2+0],e.normals[Pt*2+1],0);else{let Tt=Pt===0?(e.start+e.count-1)*2:At-2;$.set(o[Tt+0],o[Tt+1],0),st.copy(j).sub($),st.set(-st.y,st.x,0),e.isHole||st.negate()}if(st.applyMatrix4(gt).normalize(),rt.set(Pt===0?1:Pt/e.count,yt/(a.length-1)),this._insertVertex(d,Ct,_e,st,rt),Ct++,!e.continuous[Pt]||Pt===0){if(Pt===0)st.set(e.normals[Pt*2+0],e.normals[Pt*2+1],0),rt.set(0,yt/(a.length-1));else{let Tt=Pt===e.count-1?e.start*2:At+2;$.set(o[Tt+0],o[Tt+1],0),st.copy($).sub(j),st.set(-st.y,st.x,0),e.isHole||st.negate()}st.applyMatrix4(gt).normalize(),this._insertVertex(d,Ct,_e,st,rt),Ct++}}});let ut=a.length-1;for(let gt=0;gt<ut;gt++){let yt=e.verticesStart*a.length+e.verticesCount*gt,wt=e.verticesStart*a.length+e.verticesCount*(gt+1),Ct=0;for(let Pt=0;Pt<e.count;Pt++){(!e.continuous[Pt]||Pt===0)&&Ct++;let At=Pt===e.count-1?0:Ct+1,Tt=yt+Ct,kt=yt+At,It=wt+At,Lt=wt+Ct;e.isHole?g.push(Tt,It,kt,Tt,Lt,It):g.push(Tt,kt,It,Tt,It,Lt),Ct++}}}_closeEnd(e,o,a,c,d,g,b){let j=e.vertexCount,$=new _(0,0,b?-1:1).applyMatrix4(d),_e=new _,st=new z$2;for(let ut=0;ut<j;ut++){let gt=2*ut;_e.set(e.vertices[gt+0],e.vertices[gt+1],0).applyMatrix4(d).add(g),this._insertVertex(c,o+ut,_e,$,st)}let rt=e.elements;for(let ut=0;ut<e.elementCount;ut++){let gt=3*ut,yt=rt[gt+0]+o,wt=rt[gt+(b?1:2)]+o,Ct=rt[gt+(b?2:1)]+o;a.push(yt,wt,Ct)}}applyMatrix4OnRange(e,o,a){let c=e.elements,d=new nr().getNormalMatrix(e).elements,g,b,j,$,_e=this.attributes.position,st=this.attributes.normal;if(!_e||!st)return;let rt=_e.array,ut=st.array,gt=_e.itemSize;for(let yt=o*gt,wt=a*gt;yt<wt;yt+=gt){if(yt===o)debugger;g=rt[yt+0],b=rt[yt+1],j=rt[yt+2],$=1/(c[3]*g+c[7]*b+c[11]*j+c[15]),rt[yt+0]=(c[0]*g+c[4]*b+c[8]*j+c[12])*$,rt[yt+1]=(c[1]*g+c[5]*b+c[9]*j+c[13])*$,rt[yt+2]=(c[2]*g+c[6]*b+c[10]*j+c[14])*$,g=ut[yt+0],b=ut[yt+1],j=ut[yt+2],ut[yt+0]=d[0]*g+d[3]*b+d[6]*j,ut[yt+1]=d[1]*g+d[4]*b+d[7]*j,ut[yt+2]=d[2]*g+d[5]*b+d[8]*j}_e.needsUpdate=!0,st.needsUpdate=!0}reverseIndicesOnRange(e,o){let a=this.index;if(a){for(let c=e;c<o;c+=3){let d=a.getX(c),g=a.getX(c+1),b=a.getX(c+2);a.setXYZ(c,b,g,d)}a.needsUpdate=!0}}};function OI(){let e=new Pe;return e.setAttribute("position",new Xe(new Float32Array([]),3)),e.setIndex(new Xe(new Uint16Array([]),1)),e}var H7=OI().attributes,W7=12,q7=1,Ud=class extends Pe{constructor(e,o){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,H7),this.userData={parameters:e,type:"TextGeometry"};let a=o.getFont(e.font);a!=null&&a.isLoaded?(this.font=a,this.update(e)):this.updateFont(e.font,o).then(()=>{this.update(e),o==null||o.requestRender()})}async updateFont(e,o){let a=o.getFont(e);a&&(this.font=a,await a.loadingPromise)}update(e){let o=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(o!=null&&o.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:a,height:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b,text:j,textTransform:$}=e,_e=Yi.getDisplayedValue(j),st=$===2?_e.toUpperCase():$===3?_e.toLowerCase():_e,rt=Y7(e,o,st),{shapes:ut,charWidths:gt,charCoords:yt}=o.generateShapes(rt,e),wt=(typeof a=="number"?a:1)*.5,Ct=(typeof c=="number"?c:1)*.5,Pt=ut.map(kt=>new Xt().fromShape(kt,!0));this.vectorShapes=Pt;let At=Pt.map(kt=>Gn.create({shape:kt,parameters:{depth:d,extrudeBevelSegments:b,extrudeBevelSize:g,windingRule:d<=0?Gt.NONZERO:Gt.ODD,subdivisions:this.isLowResolution&&d>0?q7:W7}})),Tt=At.length?Js(At):OI();Tt.translate(-wt,Ct,0),this.dispose(),this.wrappedText=rt,this.charCoords=yt,this.charWidths=gt,this.deleteAttribute("extrudeNormal"),Object.entries(Tt.attributes).forEach(([kt,It])=>{this.setAttribute(kt,It)}),this.setIndex(Tt.index),this.computeBoundingSphere()}clone(){let e=_n(new Pe,Ud.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([o,a])=>{this.setAttribute(o,a)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function Y7(e,o,a){let c=[""],d="";for(let g of a)d+=g,g===" "||g===`
`?(c[c.length-1]+=d,d="",g===`
`&&c.push("")):o.getTextWidth(c[c.length-1]+d,e)>e.width&&(c[c.length-1].length&&c.push(""),o.getTextWidth(c[c.length-1]+d,e)>e.width&&(d.length===1?(c[c.length-1]+=d,d=""):(c[c.length-1]+=d.slice(0,-1),d=d[d.length-1],c.push(""))));return c[c.length-1]+=d,c}var RI,q0=new Promise(e=>{RI=e}),II=!1,W0;function LI(){if(II)return;if(W0)return W0;async function e(){let o="https://unpkg.com/@splinetool/modelling-wasm@1.0.26/build",a=__vitePreload(()=>import("./process-BcW0pGnR.js"),__vite__mapDeps([])),[c,d]=await Promise.all([a,fetch(`${o}/process.wasm`).then(j=>j.arrayBuffer())]),g=c.default,b=await g({wasmBinary:d});RI(b),II=!0}return W0=e(),W0}var X7=["font"];function Va(e,o,a,c){var _e;let d,g,b;e.type==="PathGeometry"?(g=JSON.parse(JSON.stringify(e)),b=[[],["extrusion"]]):(g={...e},b=[[]]);for(let st of b){let rt=g;for(let ut of st)rt=rt[ut];for(d in rt){let ut=rt[d];v1(ut)&&!X7.includes(d)&&(rt[d]=o.getVariable(ut,[c.uuid,"geometry",...st,d]),v1(rt[d])&&(rt[d]=1))}}let j={parameters:g,type:g.type};if(g.type==="PathGeometry")j.path=g.path;else if(g.type==="VectorGeometry"){let st=Xt.createFromState(g.shape,g.width,g.height);j.shape=st}else if(g.type==="NonParametricGeometry")g.data.groups&&((_e=g.data.groups)==null||_e.forEach(st=>st.materialIndex=Math.max(st.materialIndex??0,0))),j.geometry=new oh().parse(g);else if(g.type==="SubdivGeometry"){let st=new ai(g,a);return st.data=e,st}else{if(g.type==="TextGeometry")return new Ud(g,o);if(g.type==="UIGeometry")return zd.create({parameters:{width:g.width,height:g.height,cornerRadius:g.cornerRadius,cornerType:g.cornerType}})}let $;try{$=kA(j)}catch(st){console.error(st)}if(!$){let st=Xt.createFromState($h.defaultData(),100,100);j.shape=st,$=kA(j)}return $}var Q7=new ce$1;function Mm(e,o,a,c){let d=e.position.array,g=e.normal.array,b=Q7.makeScale(o,a,c).invert().elements,j,$,_e;for(var st=0,rt=d.length;st<rt;st+=3)d[st]*=o,d[st+1]*=a,d[st+2]*=c,j=g[st],$=g[st+1],_e=g[st+2],g[st]=b[0]*j+b[4]*$+b[8]*_e,g[st+1]=b[1]*j+b[5]*$+b[9]*_e,g[st+2]=b[2]*j+b[6]*$+b[10]*_e;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Y0=new Wt,Gd=new _,ct;q0.then(e=>{ct=e});var BI=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),NI=new Uint32Array([0,1,2,3]),FI=new Uint8Array([4]),ai=class extends Pe{constructor(e,o){super(),this.data=e,this.flatShading=o,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,o){this.freeSubdivPointer();let a=this.data.scaleBaked,c=Lo.div(o,a);this.subdividedGeometry&&Mm(this.subdividedGeometry.attributes,...c),this.originalGeometry&&Mm(this.originalGeometry.attributes,...c),this.data=e;let d=this.userData.parameters;this.userData.parameters={width:d.width*c[0],height:d.height*c[1],depth:d.depth*c[2]},this.originalGeometry.boundingSphere.center.multiply(Gd.fromArray(c));let g=Gd.set(d.width,d.height,d.depth).length();this.originalGeometry.boundingSphere.radius=g/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,o,a;try{({originalGeometry:e,subdividedGeometry:o,subdivPointer:a}=ai.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new vi(100,100,100),a=0}this.subdivPointer=a,this.originalGeometry=e,this.subdividedGeometry=o??void 0;let c=this.subdividedGeometry??this.originalGeometry;Object.assign(this,c),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(ai.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Br,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let o=e.attributes.position,a=e.boundingSphere.center;Y0.setFromBufferAttribute(o),Y0.getCenter(a),e.boundingSphere.radius=a.distanceTo(Y0.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Y0.getSize(Gd);let c={width:Gd.x,height:Gd.y,depth:Gd.z};return this.userData.parameters=c,c}static build(e,o,a,c){let d,g,b,j=(e==null?void 0:e.phongAngle)??35;a===!1&&(j=-1),o&&(ct.free_bvh(o),ct.free_subdivision_surface(o));try{d=ai.allocate(e,c)}catch($){console.error($,e),d=ai.allocate({positionWASM:BI,indexWASM:NI,verticesPerFaceWASM:FI},c)}if(ct.set_destination_refinement_level(d,0),g=ai.buildLevel(d,!0,j),e.subdivisions>0)try{ct.set_destination_refinement_level(d,e.subdivisions),b=ai.buildLevel(d,!1,j)}catch{try{ct.set_destination_refinement_level(d,e.subdivisions-1),b=ai.buildLevel(d,!1,j)}catch{b=null}}else b=null;return{subdivPointer:d,originalGeometry:g,subdividedGeometry:b}}static primitiveToQuads(e,o,a){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let c=e.shape!==void 0||e.path!==void 0?o.geometry:Va(e,a,!1),d;e.type==="TorusGeometry"&&e.arc===Math.PI*2?d=c.getClosedTorusIndicesForBooleanOrSubdiv():d=c.getIndex();let g,b,j,$;({positions:g,triIndices:$}=qc(c.getAttribute("position"),d));let _e;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let st=e.radialSegments*e.heightSegments*3*2,rt=st+e.radialSegments*3;_e=[st,rt]}return{indices:b,verticesPerFace:j}=GA(g,$,c,_e),{positions:g,indices:b,verticesPerFace:j}}static allocate(e,o){var Tt;let a,c,d,g=[],b=[];e.positionWASM&&e.positionWASM.length>0?(a=e.positionWASM,c=e.indexWASM,d=e.verticesPerFaceWASM):(a=BI,c=NI,d=FI);let j=a.length,$=c.length,_e=d.length,st=a.length+g.length+b.length,rt=c.length+d.length,ut=st*Float32Array.BYTES_PER_ELEMENT+rt*Uint32Array.BYTES_PER_ELEMENT,gt=st*Float32Array.BYTES_PER_ELEMENT,yt=ct._malloc(ut),wt=new Float32Array(ct.HEAPF32.buffer,yt,st),Ct=new Uint32Array(ct.HEAPU32.buffer,yt+gt,rt);wt.set(a,0),wt.set(g,a.length),wt.set(b,a.length+g.length),Ct.set(c,0),Ct.set(d,c.length);let Pt;(Tt=e==null?void 0:e.scaleBaked)!=null&&Tt.some(kt=>kt!==1)&&(Pt=new ce$1().makeScale(...e.scaleBaked)),o&&(Pt?Pt.premultiply(o):Pt=o);let At=Pt?ct.alloc_subdivision_surface2(yt,j,yt+gt,$,yt+gt+c.length*Uint32Array.BYTES_PER_ELEMENT,_e,Pt.elements):ct.alloc_subdivision_surface(yt,j,yt+gt,$,yt+gt+c.length*Uint32Array.BYTES_PER_ELEMENT,_e);return ct._free(yt),At}static buildLevel(e,o,a,c,d){let g=d?ct.get_mesh_data2(e,o?ct.Level.CONTROL:ct.Level.REFINED,a,d.elements):ct.get_mesh_data(e,o?ct.Level.CONTROL:ct.Level.REFINED,a),b=8,j=ct.HEAPU32.subarray(g>>2,(g>>2)+b),$=j.subarray(4,8),_e=0,st=ct.HEAPU32[j[_e]>>2],rt=ct.HEAPF32.subarray(st>>2,(st>>2)+$[_e]);_e++;let ut=ct.HEAPU32[j[_e]>>2],gt=ct.HEAPF32.subarray(ut>>2,(ut>>2)+$[_e]);_e++;let yt=ct.HEAPU32[j[_e]>>2],wt=ct.HEAPU32.subarray(yt>>2,(yt>>2)+$[_e]);_e++;let Ct=ct.HEAPU32[j[_e]>>2],Pt=ct.HEAPU32.subarray(Ct>>2,(Ct>>2)+$[_e]);if(_e++,c===void 0){let At=new Pe;if(At.setIndex(new _o(Pt,1)),At.setAttribute("position",new Te(rt,3)),At.setAttribute("normal",new Te(gt,3)),o){At.setAttribute("faceMap",new _o(wt,1));let Tt=new Float32Array(gt.length/3*4).fill(0);At.setAttribute("color",new Xe(Tt,4))}return ct.free_mesh_data(g),At.userData.type="SubdivGeometry",At}c.getAttribute("position").copyArray(rt),c.getAttribute("normal").copyArray(gt),c.attributes.position.needsUpdate=!0,c.attributes.normal.needsUpdate=!0,ct.free_mesh_data(g)}static freeSubdivPointer(e){ct.free_bvh(e),ct.free_subdivision_surface(e)}static buildControlCageWireframe(e,o,a){let c=ct.get_wireframe_data_for_base_level(e),d=4,g=ct.HEAPU32.subarray(c>>2,(c>>2)+d),b=g.subarray(2,4),j=0,$=ct.HEAPU32[g[j]>>2],_e=ct.HEAPF32.subarray($>>2,($>>2)+b[j]);j++;let st=ct.HEAPU32[g[j]>>2],rt=ct.HEAPU32.subarray(st>>2,(st>>2)+b[j]);if(o===void 0){let ut=new Pe;ut.setAttribute("position",new Te(_e,3));let gt=new Float32Array(_e.length);for(let yt=0,wt=_e.length;yt<wt;)gt[yt++]=a.r,gt[yt++]=a.g,gt[yt++]=a.b;return ut.setAttribute("color",new Xe(gt,3)),ut.setIndex(new _o(rt,1)),ct.free_wireframe_data_for_base_level(c),ut}o.getAttribute("position").copyArray(_e),o.attributes.position.needsUpdate=!0,ct.free_wireframe_data_for_base_level(c)}static updateCollabMesh(e,o,a){let c=o===0;c||ct.set_destination_refinement_level(e,o);let d=a?ct.get_topological_data2(e,c?ct.Level.CONTROL:ct.Level.REFINED,a.elements):ct.get_topological_data(e,c?ct.Level.CONTROL:ct.Level.REFINED),g=6,b=ct.HEAPU32.subarray(d>>2,(d>>2)+g),j=b.subarray(3,6),$=0,_e=ct.HEAPU32[b[$]>>2],st=new Float32Array(ct.HEAPF32.subarray(_e>>2,(_e>>2)+j[$]));$++;let rt=ct.HEAPU32[b[$]>>2],ut=new Uint32Array(ct.HEAPU32.subarray(rt>>2,(rt>>2)+j[$]));$++;let gt=ct.HEAPU32[b[$]>>2],yt=new Uint8Array(ct.HEAPU32.subarray(gt>>2,(gt>>2)+j[$]));return ct.free_topological_data(d),{positions:st,indices:ut,verticesPerFace:yt}}},kI=["getX","getY","getZ"];function qc(e,o){let a={},c=o?o.count:e.count,d=0,g=[],b=[],j=1e4;for(let _e=0;_e<c;_e++){let st=o?o.getX(_e):_e,rt="";for(let ut=0;ut<3;ut++)rt+=`${~~(e[kI[ut]](st)*j)},`;if(rt in a)g.push(a[rt]);else{for(let ut=0;ut<3;ut++)b.push(e[kI[ut]](st));a[rt]=d,g.push(d),d++}}let $=[];for(let _e=0;_e<g.length;_e+=3)g[_e]===g[_e+1]||g[_e]===g[_e+2]||g[_e+1]===g[_e+2]||$.push(g[_e],g[_e+1],g[_e+2]);return{positions:b,triIndices:$}}var X0=new _,VA=new _,zA=new _,UA=new _;function GA(e,o,a,c){let d=[],g=[];if(a.userData.shape!==void 0&&a.userData.parameters.depth===0&&a.userData.shape.shapeHoles.length===0){let $=a.userData.shape.extractShapePointsToFlatArray([]),_e=a.userData.parameters.spikes;if(a.userData.type==="EllipseGeometry"&&_e<=24&&_e%4===0&&a.userData.parameters.angle>=360){let ut=$.length/2/_e;$=$.filter((gt,yt)=>Math.floor(yt/2)%ut===0)}let st=0;for(let ut=0;ut<$.length;ut+=2)st+=($[ut]-$[(ut===0?$.length:ut)-2])*($[ut+1]+$[(ut===0?$.length:ut)-1]);e.length=0;let rt=0;if(st<0)for(let ut=0;ut<$.length;ut+=2)e.push($[ut],$[ut+1],0),d.push(rt++);else for(let ut=$.length-2;ut>=0;ut-=2)e.push($[ut],$[ut+1],0),d.push(rt++);return g.push(rt),{indices:d,verticesPerFace:g}}let b=new Float32Array([a.userData.parameters.depth])[0],j=0;for(;j<o.length;){if(a.useNgonForTopBottomFaceDuringBake){let $=0;if((e[o[j]*3+2]===b||e[o[j]*3+2]===0)&&$++,(e[o[j+1]*3+2]===b||e[o[j+1]*3+2]===0)&&$++,(e[o[j+2]*3+2]===b||e[o[j+2]*3+2]===0)&&$++,$===3)break}if(o[j+1]===o[j+3]&&o[j+2]===o[j+5]||o[j+0]===o[j+3]&&o[j+2]===o[j+4]){X0.set(e[o[j]*3],e[o[j]*3+1],e[o[j]*3+2]),VA.set(e[o[j+1]*3],e[o[j+1]*3+1],e[o[j+1]*3+2]),zA.set(e[o[j+4]*3],e[o[j+4]*3+1],e[o[j+4]*3+2]),UA.set(e[o[j+5]*3],e[o[j+5]*3+1],e[o[j+5]*3+2]),VA.sub(X0).normalize(),zA.sub(X0).normalize(),UA.sub(X0).normalize();let $=VA.cross(zA).dot(UA);Math.abs($)>.005||c&&c.some((_e,st)=>st%2===1?!1:j>=c[st]&&j<c[st+1])?(d.push(o[j],o[j+1],o[j+2]),g.push(3),j+=3):(d.push(o[j],o[j+1],o[j+4],o[j+5]),g.push(4),j+=6)}else d.push(o[j],o[j+1],o[j+2]),g.push(3),j+=3}if(a.useNgonForTopBottomFaceDuringBake){let $=[],_e=[],st=0;for(let rt=0,ut=0;rt<e.length;rt+=3,ut++)e[rt+2]===0&&($.push(ut),st++),e[rt+2]===b&&_e.push(ut);if(a.userData.parameters.extrudeBevelSize===0){let rt=_e[0];_e[0]=_e[1],_e[1]=rt}$.reverse(),d.push(...$,..._e),g.push(st,st)}return{indices:d,verticesPerFace:g}}var Ms={};iF(Ms,{calcBoolean:()=>J7,calcBooleanTopological:()=>Z7,freeMeshSet:()=>rY,getMeshSet:()=>$7,hasOpenEdges:()=>eY,transformMeshSet:()=>tY});var VI,zI=new Promise(e=>{VI=e}),Q0;function UI(){if(Q0)return Q0;async function e(){let o="https://unpkg.com/@splinetool/boolean-wasm@1.0.26/build",a=__vitePreload(()=>import("./boolean-w3KXAzn1.js"),__vite__mapDeps([])),[c,d]=await Promise.all([a,fetch(`${o}/boolean.wasm`).then(j=>j.arrayBuffer())]),g=c.default,b=await g({wasmBinary:d});VI(b)}return Q0=e(),Q0}var Et,jd;zI.then(e=>Et=e);function K7(e,o,a){let c,d;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?d=e.getClosedTorusIndicesForBooleanOrSubdiv():d=e.getIndex();let{positions:g,triIndices:b}=qc(e.getAttribute("position"),d),j;if(o&&a){let{indices:$,verticesPerFace:_e}=GA(g,b,e);j=_e.length,c=[];for(let st=0,rt=0;st<j;st++){c.push(_e[st]);for(let ut=0;ut<_e[st];ut++)c.push($[rt++])}}else{let $=b.length;c=Array($+$/3),j=0;for(let _e=0,st=0;st<c.length;)c[st++]=3,j++,c[st++]=b[_e++],c[st++]=b[_e++],c[st++]=b[_e++]}return{positions:g,faceIndices:c,nFaces:j}}function GI(e){let o=e.length,a=o*Uint32Array.BYTES_PER_ELEMENT,c=o*Float32Array.BYTES_PER_ELEMENT,d=Number.isInteger(e[0])?a:c,g=Et._malloc(d);return(Number.isInteger(e[0])?new Uint32Array(Et.HEAPU32.buffer,g,o):new Float32Array(Et.HEAPF32.buffer,g,o)).set(e,0),g}function jI(e){switch(e){case 0:return Et.OP.UNION;case 1:return Et.OP.INTERSECTION;case 2:return Et.OP.A_MINUS_B;case 3:return Et.OP.B_MINUS_A;case 4:return Et.OP.SYMMETRIC_DIFFERENCE;case 5:return Et.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Z7(e,o){jd===void 0&&(jd=Et.init_csg());let a=GI(e),c=Et.csg_calc_topological(jd,a,e.length,jI(o));Et._free(a);let d=6,g=Et.HEAPU32.subarray(c>>2,(c>>2)+d),b=g.subarray(3,6),j=0,$=Et.HEAPU32[g[j]>>2],_e=new Float32Array(Et.HEAPF32.subarray($>>2,($>>2)+b[j]));j++;let st=Et.HEAPU32[g[j]>>2],rt=new Uint32Array(Et.HEAPU32.subarray(st>>2,(st>>2)+b[j]));j++;let ut=Et.HEAPU32[g[j]>>2],gt=new Uint8Array(Et.HEAPU32.subarray(ut>>2,(ut>>2)+b[j]));return Et.free_mesh_data(c),{positions:_e,indices:rt,verticesPerFace:gt}}function J7(e,o,a,c){jd===void 0&&(jd=Et.init_csg());let d=GI(e),g=Et.csg_calc(jd,d,e.length,c,jI(o));Et._free(d);let b=5,j=Et.HEAPU32.subarray(g>>2,(g>>2)+b),$=j.subarray(2,5),_e=0,st=Et.HEAPU32[j[_e]>>2],rt=Et.HEAPF32.subarray(st>>2,(st>>2)+$[_e]);_e++;let ut=Et.HEAPU32[j[_e]>>2],gt=Et.HEAPF32.subarray(ut>>2,(ut>>2)+$[_e]);_e++;let yt=$[_e];a.setAttribute("position",new Te(rt,3)),a.setAttribute("normal",new Te(gt,3));let wt=Et.HEAPF32.subarray((g>>2)+5,(g>>2)+5+6);return a.boundingSphere===null&&(a.boundingSphere=new Br),a.boundingSphere.radius=-1,a.userData.parameters={width:wt[3]*2,height:wt[4]*2,depth:wt[5]*2},Et.free_mesh_data(g),yt}function $7(e,o,a){if(Et===void 0)return-1;let c,d,g;if(o&&e.userData.positions!==void 0){let Ct=e.userData;g=Ct.verticesPerFace.length,c=Ct.positions,d=Array(Ct.verticesPerFace.reduce((Pt,At)=>Pt+At,0)+g);for(let Pt=0,At=0,Tt=0;Pt<Ct.verticesPerFace.length;Pt++){d[Tt++]=Ct.verticesPerFace[Pt];for(let kt=0;kt<Ct.verticesPerFace[Pt];kt++)d[Tt++]=Ct.indices[At++]}}else({positions:c,faceIndices:d,nFaces:g}=K7(e,o,a));let b=c.length,j=d.length,$=c.length,_e=d.length,st=$*Float32Array.BYTES_PER_ELEMENT+_e*Uint32Array.BYTES_PER_ELEMENT,rt=$*Float32Array.BYTES_PER_ELEMENT,ut=Et._malloc(st),gt=new Float32Array(Et.HEAPF32.buffer,ut,$),yt=new Uint32Array(Et.HEAPU32.buffer,ut+rt,_e);gt.set(c,0),yt.set(d,0);let wt=Et.get_csg_mesh(ut,b,ut+rt,j,g);return Et._free(ut),wt}function eY(e){return Et.has_open_edges(e)}function tY(e,o){Et.transform_csg_mesh(e,o.elements)}function rY(e){Et.free_csg_mesh(e)}var iY={ConeGeometry:FO,CubeGeometry:kO,CylinderGeometry:O0,DodecahedronGeometry:VO,EllipseGeometry:Fd,HelixGeometry:pI,IcosahedronGeometry:mI,LatheGeometry:gI,NonParametricGeometry:bI,PolygonGeometry:G0,PyramidGeometry:SI,RectangleGeometry:zd,SphereGeometry:wI,PlaneGeometry:AI,BackdropGeometry:_I,StarGeometry:j0,TextFrameGeometry:EI,TorusGeometry:TI,TorusKnotGeometry:MI,TriangleGeometry:CI,PathGeometry:DI,VectorGeometry:Gn},kA=e=>iY[e.type].create(e);function Hd(e){return e!==null&&"booleanOp"in e}var Wd=class extends Pd(sr){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new ce$1}updateVisible(e){super.updateVisible(e),this.visible=!Hd(this.parent)&&this.visible,Hd(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ms.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Hd(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Wd&&(e.freeBooleanPointer(),Hd(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,o){let a=super.updateTransformState(e,o);return a&&Hd(this.parent)&&this.invalidateDownstreamBooleanData(!0),a}onVariableUpdate(e=!1){super.onVariableUpdate(e),Hd(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},K0=new Wt;function Cm(e,o=0,a=e.count,c,d){let g=1/0,b=1/0,j=1/0,$=-1/0,_e=-1/0,st=-1/0;for(let rt=o;rt<a;rt++){let ut=e.getX(rt),gt=e.getY(rt),yt=e.getZ(rt);ut<g&&(g=ut),gt<b&&(b=gt),yt<j&&(j=yt),ut>$&&($=ut),gt>_e&&(_e=gt),yt>st&&(st=yt)}K0.min.set(g,b,j),K0.max.set($,_e,st),K0.getCenter(c),K0.getSize(d).multiplyScalar(.5)}var nY=new Pe,sY=new ts,pr=class extends Wd{constructor(e,o){super(nY,sY),this.super_Entity(e,o)}updateState(e,o){this.updateState_Entity(e,o)}updateEntityBoxSize(e,o){let a=this.geometry.getAttribute("position");a!==void 0?Cm(a,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:a.count,e,o):super.updateEntityBoxSize(e,o)}},Pm=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Xi=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Me.generateUUID(),this.type=e,this.name=""}analyze(e,o){o=o??{},e.analyzing=!0,this.build(e.addFlow(o.slot,o.cache,o.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,o,a){return a=a??{},this.analyze(e,a),this.flow(e,o,a)}flow(e,o,a){a=a??{},e.addFlow(a.slot,a.cache,a.context);let c={result:this.build(e,o),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),c}build(e,o,a){o=o??this.getType(e,o);let c=e.getNodeData(a??this);return e.analyzing&&this.appendDepsNode(e,c,o),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,o,a)}updateFrame(e){}generateReadonly(e,o,a,c,d,g){return""}generate(e,o,a,c,d){return""}parse(e,o,a,c){}appendDepsNode(e,o,a){o.deps=(o.deps||0)+1;let c=e.getTypeLength(a);(c>(o.outputMax||0)||this.getType(e,a))&&(o.outputMax=c,o.output=a)}setName(e){this.name=e}getName(){return this.name}getType(e,o){return o==="sampler2D"||o==="samplerCube"?o:this.type}getHash(){let e="{",o,a;for(o in this)a=this[o],a instanceof Xi&&(e+='"'+o+'":'+a.getHash()+",");if(this.hashProperties)for(let c=0;c<this.hashProperties.length;c++)o=this.hashProperties[c],a=this[o],e+='"'+o+'":"'+String(a)+'",';return e+='"id":"'+this.uuid+'"}',e}},jA=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,o,a){a=a!==void 0?a:!0,this.keywords[e]={callback:o,cache:a}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,o){return this.keywords[e].callback(o)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Ni=new jA,et=class extends Xi{constructor(e,o){super(e),this.scope="",o=o??{},this.shared=o.shared!==void 0?o.shared:!0,this.unique=o.unique!==void 0?o.unique:!1}build(e,o,a,c){if(o=o??this.getType(e),this.getShared(e,o)){let d=this.getUnique(e,o);d&&this.uuid===void 0&&(this.uuid=Me.generateUUID()),a=e.getUUID(a??this.getUUID(),!d);let g=e.getNodeData(a),b=g.output||this.getType(e);if(e.analyzing)return(g.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,g,o),this.generate(e,o,a)):super.build(e,o,a);if(d)return g.name=g.name||super.build(e,o,a),g.name;if(!this.getLabel()&&(!this.getShared(e,b)||e.context.ignoreCache||g.deps===1))return super.build(e,o,a);a=this.getUUID(!1);let j=this.getTemp(e,a);if(j)return e.format(j,b,o);{j=super.generate(e,o,a,g.output,c);let $=this.generate(e,b,a);return e.addNodeCode(j+" = "+$+";"),e.format(j,b,o)}}return super.build(e,o,a)}getShared(e,o){return o!=="sampler2D"&&o!=="samplerCube"&&this.shared}getUnique(e,o){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let o=this.uuid;return typeof this.scope=="string"&&(o=this.scope+"-"+o),o}getTemp(e,o){o=o||this.uuid;let a=e.getVars()[o];return a?a.name:void 0}generate(e,o,a,c,d){return this.getShared(e,o)||console.error("TempNode is not shared"),a=a??this.uuid,e.getTempVar(a,c??this.getType(e),d,this.getLabel()).name}},lr=class extends et{constructor(e,o){o=o??{},o.shared=o.shared!==void 0?o.shared:!1,super(e,o),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,o,a,c,d,g){a=e.getUUID(a??this.getUUID()),c=c??this.getType(e);let b=e.getNodeData(a);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,o,a,c,d,g):e.isShader("vertex")?(b.vertex||(b.vertex=e.createVertexUniform(c,this,d,g,this.getLabel())),e.format(b.vertex.name,c,o)):(b.fragment||(b.fragment=e.createFragmentUniform(c,this,d,g,this.getLabel())),e.format(b.fragment.name,c,o))}},qr=class extends lr{constructor(e=0,o){super("v2"),this.nodeType="Vector2",this.value=e instanceof z$2?e:new z$2(e,o)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,o,a,c,d,g){return e.format("vec2("+this.value.x+", "+this.value.y+")",c,o)}},nn=class extends lr{constructor(e=0,o,a){super("v3"),this.nodeType="Vector3",this.value=e instanceof _?e:new _(e,o,a)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,o,a,c,d,g){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",c,o)}},xr$1=class extends We{constructor(o,a,c,d){super(o,a,c),this.isColorA=!0,this.a=d}setRGBA(o,a,c,d){super.setRGB(o,a,c),this.a=d}copy(o){return super.copy(o),this.a="a"in o?o.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(o){return super.equals(o)&&this.a===o.a}setStyle(o,a="srgb"){let c;if(o==="transparent")return this.setRGBA(0,0,0,0),this;if(c=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(o)){let d,g=c[1],b=c[2];switch(g){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.a=g==="rgba"?parseFloat(d[4]):1,super.setStyle(o,a);break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return this.a=g==="hsla"?parseFloat(d[4]):1,super.setStyle(o,a);break}}return super.setStyle(o,a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(o){this.r=o}set y(o){this.g=o}set z(o){this.b=o}set w(o){this.a=o}},jn=class extends lr{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof xr$1?e:new xr$1(e.r,e.g,e.b,e.a)}generateReadonly(e,o,a,c,d,g){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",c,o)}},oY=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,HI=/[a-z_0-9]+/gi,Ae=class extends et{constructor(e,o,a,c,d){super(d),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=d===void 0,this.isInterface=!1,this.parse(e,o,a,c)}getShared(e,o){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let o=this.inputs.length;for(;o--;)if(this.inputs[o].name===e)return this.inputs[o]}}getIncludeByName(e){if(this.includes){let o=this.includes.length;for(;o--;)if(this.includes[o].name===e)return this.includes[o]}}generate(e,o,a,c,d){let g,b=0,j=this.src;if(this.includes)for(let _e=0;_e<this.includes.length;_e++)e.include(this.includes[_e],this);for(let _e in this.extensions)e.extensions[_e]=!0;let $=[];for(;g=HI.exec(this.src);)$.push(g);for(let _e=0;_e<$.length;_e++){let st=$[_e],rt=st[0],ut=this.isMethod?!this.getInputByName(rt):!0,gt=rt;if(this.keywords[rt]||this.useKeywords&&ut&&Ni.containsKeyword(rt)){let yt=this.keywords[rt];if(!yt){let wt=Ni.getKeywordData(rt);wt.cache&&(yt=e.keywords[rt]),yt=yt||Ni.getKeyword(rt,e),wt.cache&&(e.keywords[rt]=yt)}gt=yt.build(e)}rt!==gt&&j[st.index+b-1]!=="."&&(j=j.substring(0,st.index+b)+gt+j.substring(st.index+rt.length+b),b+=gt.length-rt.length),this.getIncludeByName(gt)===void 0&&Ni.contains(gt)&&e.include(Ni.get(gt))}return o==="source"?j:this.isMethod?(this.isInterface||e.include(this,void 0,j),this.name):e.format("( "+j+" )",this.getType(e),o)}parse(e,o,a,c){if(this.src=e||"",this.includes=o??[],this.extensions=a??{},this.keywords=c??{},this.isMethod){let d=oY.exec(this.src);if(this.inputs=[],d&&d.length==4){this.type=d[1],this.name=d[2];let g=d[3].match(HI);if(g){let b=0;for(;b<g.length;){let j=g[b++],$;j==="in"||j==="out"||j==="inout"?$=g[b++]:($=j,j="");let _e=g[b++];this.inputs.push({name:_e,type:$,qualifier:j})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},aY=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,HA=class extends et{constructor(e="",o){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||HA.PI,void 0,void 0,void 0,o)}getType(e){return e.getTypeByFormat(this.type)}parse(e,o,a,c,d){this.src=e||"";let g,b,j="",$=aY.exec(e);this.useDefine=d??this.src.charAt(0)==="#",$&&$.length>1?(b=$[1],g=$[2],j=$[3]):(g=this.src,b="f"),this.name=g,this.type=b,this.value=j}build(e,o){if(o==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),o)}generate(e,o,a,c,d){return e.format(this.name,this.getType(e),o)}},Yt=HA;Yt.PI="PI",Yt.PI2="PI2",Yt.RECIPROCAL_PI="RECIPROCAL_PI",Yt.RECIPROCAL_PI2="RECIPROCAL_PI2",Yt.LOG2="LOG2",Yt.EPSILON="EPSILON";var lY=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),cY=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),qd=class extends et{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let o=this.inputs.length;for(;o--;)if(this.inputs[o].name===e)return this.inputs[o]}generate(e,o,a,c,d){return o==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),o)}parse(e=""){this.src=e,this.inputs=[];let o=lY.exec(e);if(o){let a=o[2],c;for(;c=cY.exec(a);)this.inputs.push({type:c[1],name:c[2]});this.name=o[1]}else this.name="";this.type=this.name}},Yd=class extends et{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,o){e.requires.uv[this.index]=!0;let a=this.index>0?this.index+1:"",c=e.isShader("vertex")?"uv"+a:"vUv"+a;return e.format(c,this.getType(e),o)}};Ni.addKeyword("uv",function(){return new Yd});Ni.addKeyword("uv2",function(){return new Yd(1)});var Yc=class extends et{constructor(e,o){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=o??Yc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Sn:return["Linear"];case at:return["sRGB"];default:return[]}}generate(e,o){var b;let a=this.input.build(e,"v4"),c=this.getType(e),d=Yc.Nodes[this.method],g=e.include(d);if(g===Yc.LINEAR_TO_LINEAR)return e.format(a,c,o);if(((b=d.inputs)==null?void 0:b.length)===2){let j=this.factor.build(e,"f");return e.format(g+"( "+a+", "+j+" )",c,o)}else return e.format(g+"( "+a+" )",c,o)}fromEncoding(e){let o=Yc.getEncodingComponents(e);this.method="LinearTo"+o[0],this.factor=o[1]}fromDecoding(e){let o=Yc.getEncodingComponents(e);this.method=o[0]+"ToLinear",this.factor=o[1]}},Cn=Yc;Cn.Nodes={LinearToLinear:new Ae(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Ae(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Ae(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Cn.LINEAR_TO_LINEAR="LinearToLinear",Cn.SRGB_TO_LINEAR="sRGBToLinear",Cn.LINEAR_TO_SRGB="LinearTosRGB";var Qt=class extends Ae{constructor(e="",o,a,c,d){super(e,d,c,a,o),this.nodeType="Expression"}},Pn=class extends lr{constructor(e=new tr,o,a,c){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=o??new Yd,this.bias=a,this.project=c!==void 0?c:!1}getTexture(e,o){return super.generate(e,o,this.value.uuid,"t")}generate(e,o){if(o==="sampler2D")return this.getTexture(e,o);let a=this.getTexture(e,o),c=this.uv.build(e,this.project?"v4":"v2"),d=this.bias?this.bias.build(e,"f"):void 0;d===void 0&&e.context.bias&&(d=e.context.bias.setTexture(this).build(e,"f"));let g,b;this.project?g="texture2DProj":g=d?"tex2DBias":"tex2D",d?b=g+"( "+a+", "+c+", "+d+" )":b=g+"( "+a+", "+c+" )";let j={include:e.isShader("vertex"),ignoreCache:!0},$=this.getType(e);return e.addContext(j),this.colorSpace=this.colorSpace??new Cn(new Qt("",$)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(b),b=this.colorSpace.build(e,$),e.removeContext(),e.format(b,$,o)}},ke=class extends lr{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,o,a,c,d,g){return e.format(this.value+(this.value%1?"":".0"),c,o)}},Dm=class extends et{constructor(e,o){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=o??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,o,a,c,d){c=this.getType(e);let g=this.value,b=g.build(e,o)+"( ",j=[];if(g.inputs){for(let $=0;$<g.inputs.length;$++){let _e=g.inputs[$],st=this.inputs[$]||this.inputs[_e.name];j.push(st.build(e,e.getTypeByFormat(_e.type)))}b+=j.join(", ")+" )"}return e.format(b,c,o)}},WA=class extends et{constructor(e,o,a=WA.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=o,this.op=a}getType(e){let o=this.a.getType(e),a=this.b.getType(e);return e.isTypeMatrix(o)?"v4":e.getTypeLength(a)>e.getTypeLength(o)?a:o}generate(e,o){let a=this.getType(e);this.type=a;let c=this.a.build(e,a),d=this.b.build(e,a);return e.format("( "+c+" "+this.op+" "+d+" )",a,o)}},Qi=WA;Qi.ADD="+",Qi.SUB="-",Qi.MUL="*",Qi.DIV="/";var cr=class extends et{constructor(e,o=cr.ABS,a,c){super(),this.nodeType="Math",this.a=e,typeof o!="string"?this.b=o:c=o,typeof a!="string"?this.c=a:c=a,this.method=c,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case cr.MIX:case cr.CLAMP:case cr.REFRACT:case cr.SMOOTHSTEP:case cr.FACEFORWARD:return 3;case cr.MIN:case cr.MAX:case cr.MOD:case cr.STEP:case cr.REFLECT:case cr.DISTANCE:case cr.DOT:case cr.CROSS:case cr.POW:return 2;default:return 1}}getInputType(e){let o=e.getTypeLength(this.a.getType(e)),a=this.b?e.getTypeLength(this.b.getType(e)):0,c=this.c?e.getTypeLength(this.c.getType(e)):0;return o>a&&o>c?this.a.getType(e):a>c?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case cr.LENGTH:case cr.DISTANCE:case cr.DOT:return"f";case cr.CROSS:return"v3"}return this.getInputType(e)}generate(e,o){let a,c,d,g=this.a?e.getTypeLength(this.a.getType(e)):0,b=this.b?e.getTypeLength(this.b.getType(e)):0,j=this.c?e.getTypeLength(this.c.getType(e)):0,$=this.getInputType(e),_e=this.getType(e);switch(this.type=_e,this.method){case cr.NEGATE:return e.format("( -"+this.a.build(e,$)+" )",$,o);case cr.INVERT:return e.format("( 1.0 - "+this.a.build(e,$)+" )",$,o);case cr.CROSS:a=this.a.build(e,"v3"),c=this.b.build(e,"v3");break;case cr.STEP:a=this.a.build(e,g===1?"f":$),c=this.b.build(e,$);break;case cr.MIN:case cr.MAX:case cr.MOD:a=this.a.build(e,$),c=this.b.build(e,b===1?"f":$);break;case cr.REFRACT:a=this.a.build(e,$),c=this.b.build(e,$),d=this.c.build(e,"f");break;case cr.MIX:a=this.a.build(e,$),c=this.b.build(e,$),d=this.c.build(e,j===1?"f":$);break;default:a=this.a.build(e,$),this.b&&(c=this.b.build(e,$)),this.c&&(d=this.c.build(e,$));break}let st=[];st.push(a),c&&st.push(c),d&&st.push(d);let rt=this.getNumInputs(e);if(st.length!==rt)throw Error(`Arguments not match used in "${this.method}". Require ${rt}, currently ${st.length}.`);return e.format(this.method+"( "+st.join(", ")+" )",_e,o)}},pt=cr;pt.RAD="radians",pt.DEG="degrees",pt.EXP="exp",pt.EXP2="exp2",pt.LOG="log",pt.LOG2="log2",pt.SQRT="sqrt",pt.INV_SQRT="inversesqrt",pt.FLOOR="floor",pt.CEIL="ceil",pt.NORMALIZE="normalize",pt.FRACT="fract",pt.SATURATE="saturate",pt.SIN="sin",pt.COS="cos",pt.TAN="tan",pt.ASIN="asin",pt.ACOS="acos",pt.ARCTAN="atan",pt.ABS="abs",pt.SIGN="sign",pt.LENGTH="length",pt.NEGATE="negate",pt.INVERT="invert",pt.MIN="min",pt.MAX="max",pt.MOD="mod",pt.STEP="step",pt.REFLECT="reflect",pt.DISTANCE="distance",pt.DOT="dot",pt.CROSS="cross",pt.POW="pow",pt.MIX="mix",pt.CLAMP="clamp",pt.REFRACT="refract",pt.SMOOTHSTEP="smoothstep",pt.FACEFORWARD="faceforward";var Xd=class extends et{constructor(e,o,a){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=o,this.bias=a}bilinearCubeUV(e,o,a,c){let d=new Dm(Xd.Nodes.bilinearCubeUV,[o,a,c]);this.colorSpaceTL=this.colorSpaceTL??new Cn(new Qt("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(d.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Cn(new Qt("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(d.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Cn(new Qt("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(d.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Cn(new Qt("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(d.build(e)+".br");let g={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(g),this.colorSpaceTLExp=new Qt(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Qt(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Qt(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Qt(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let b=new Qt("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return b.keywords.cubeUV_TL=this.colorSpaceTLExp,b.keywords.cubeUV_TR=this.colorSpaceTRExp,b.keywords.cubeUV_BL=this.colorSpaceBLExp,b.keywords.cubeUV_BR=this.colorSpaceBRExp,b.keywords.cubeUV=d,b}generate(e,o){if(e.isShader("fragment")){let a=this.uv,c=this.bias||e.context.roughness,d=new Dm(Xd.Nodes.roughnessToMip,[c]),g=new pt(d,Xd.Nodes.m0,Xd.Nodes.cubeUV_maxMipLevel,pt.CLAMP),b=new pt(g,pt.FLOOR),j=new pt(g,pt.FRACT),$=this.bilinearCubeUV(e,this.value,a,b),_e=this.bilinearCubeUV(e,this.value,a,new Qi(b,new ke(1).setReadonly(!0),Qi.ADD)),st=new pt($,_e,j,pt.MIX);return e.format(st.build(e),"v4",o)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),o)}},Qd=Xd;Qd.Nodes=function(){let e=new qd(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),o=new Yt("float cubeUV_maxMipLevel 8.0",!0),a=new Yt("float cubeUV_minMipLevel 4.0",!0),c=new Yt("float cubeUV_maxTileSize 256.0",!0),d=new Yt("float cubeUV_minTileSize 16.0",!0),g=new Ae(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);g.useKeywords=!1;let b=new Ae(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);b.useKeywords=!1;let j=new Ae(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,g,b,o,a,c,d]);j.useKeywords=!1;let $=new Yt("float r0 1.0",!0),_e=new Yt("float v0 0.339",!0),st=new Yt("float m0 -2.0",!0),rt=new Yt("float r1 0.8",!0),ut=new Yt("float v1 0.276",!0),gt=new Yt("float m1 -1.0",!0),yt=new Yt("float r4 0.4",!0),wt=new Yt("float v4 0.046",!0),Ct=new Yt("float m4 2.0",!0),Pt=new Yt("float r5 0.305",!0),At=new Yt("float v5 0.016",!0),Tt=new Yt("float m5 3.0",!0),kt=new Yt("float r6 0.21",!0),It=new Yt("float v6 0.0038",!0),Lt=new Yt("float m6 4.0",!0),Ft=[$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt,kt,It,Lt],Nt=new Ae(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,Ft);return{bilinearCubeUV:j,roughnessToMip:Nt,m0:st,cubeUV_maxMipLevel:o}}();var Xc=class extends et{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Xc.VIEW}getShared(){return this.scope===Xc.WORLD}build(e,o,a,c){let d=e.context[this.scope+"Normal"];return d?d.build(e,o,a,c):super.build(e,o,a)}generate(e,o,a,c,d){let g;switch(this.scope){case Xc.VIEW:e.isShader("vertex")?g="transformedNormal":g="geometryNormal";break;case Xc.LOCAL:e.isShader("vertex")?g="objectNormal":(e.requires.normal=!0,g="vObjectNormal");break;case Xc.WORLD:e.isShader("vertex")?g="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,g="vWNormal");break}return e.format(g,this.getType(e),o)}},Ki=Xc;Ki.LOCAL="local",Ki.WORLD="world",Ki.VIEW="view",Ki.NORMAL="normal";Ni.addKeyword("viewNormal",function(){return new Ki(Ki.VIEW)});Ni.addKeyword("localNormal",function(){return new Ki(Ki.NORMAL)});Ni.addKeyword("worldNormal",function(){return new Ki(Ki.WORLD)});var jo=class extends et{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??jo.LOCAL}getType(){switch(this.scope){case jo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case jo.LOCAL:case jo.WORLD:return!1}return!0}generate(e,o,a,c,d){let g;switch(this.scope){case jo.LOCAL:e.isShader("vertex")?g="transformed":(e.requires.position=!0,g="vPosition");break;case jo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,g="vWPosition";break;case jo.VIEW:g=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case jo.PROJECTION:g=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(g,this.getType(),o)}},Hn=jo;Hn.LOCAL="local",Hn.WORLD="world",Hn.VIEW="view",Hn.PROJECTION="projection";Ni.addKeyword("position",function(){return new Hn});Ni.addKeyword("worldPosition",function(){return new Hn(Hn.WORLD)});Ni.addKeyword("viewPosition",function(){return new Hn(Hn.VIEW)});var io=class extends et{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??io.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case io.SPHERE:return"v2"}return this.type}generate(e,o){let a=this.getUnique(e);if(e.isShader("fragment")){let c;switch(this.scope){case io.VECTOR:{let d=new Ki(Ki.VIEW),g=e.context.roughness,b=d.build(e,"v3"),j=new Hn(Hn.VIEW).build(e,"v3"),$=g?g.build(e,"f"):void 0,_e=`reflect( -normalize( ${j} ), ${b} )`;$&&(_e=`normalize( mix( ${_e}, ${b}, ${$} * ${$} ) )`);let st=`inverseTransformDirection( ${_e}, viewMatrix )`;a?(e.addNodeCode(`vec3 reflectVec = ${st};`),c="reflectVec"):c=st;break}case io.CUBE:{let d=new io(io.VECTOR).build(e,"v3"),g="vec3( -"+d+".x, "+d+".yz )";a?(e.addNodeCode(`vec3 reflectCubeVec = ${g};`),c="reflectCubeVec"):c=g;break}case io.SPHERE:{let d="normalize( ( viewMatrix * vec4( "+new io(io.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";a?(e.addNodeCode(`vec2 reflectSphereVec = ${d};`),c="reflectSphereVec"):c=d;break}}return e.format(c,this.getType(),o)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,o)}},Ho=io;Ho.CUBE="cube",Ho.SPHERE="sphere",Ho.VECTOR="vector";var Z0=class extends et{constructor(e=new Pn,o,a){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Qd(this.value,o??new Ho(Ho.VECTOR),a),this.irradianceNode=new Qd(this.value,new Ki(Ki.WORLD),new ke(1).setReadonly(!0))}generate(e,o){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,o)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),o))}},J0=class extends lr{constructor(e=new Hu,o,a){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=o??new Ho,this.bias=a}getTexture(e,o){return super.generate(e,o,this.value.uuid,"tc")}generate(e,o){var $;if(o==="samplerCube")return this.getTexture(e,o);let a=this.getTexture(e,o),c=($=this.uv)==null?void 0:$.build(e,"v3"),d=this.bias?this.bias.build(e,"f"):void 0;d===void 0&&e.context.bias&&(d=e.context.bias.setTexture(this).build(e,"f"));let g;d?g="texCubeBias( "+a+", "+c+", "+d+" )":g="texCube( "+a+", "+c+" )";let b={include:e.isShader("vertex"),ignoreCache:!0},j=this.getType(e);return e.addContext(b),this.colorSpace=this.colorSpace??new Cn(new Qt("",j)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(g),g=this.colorSpace.build(e,j),e.removeContext(),e.format(g,j,o)}},WI=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,qI=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,YI=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,XI=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,QI=`
layout(location = 1) out vec4 gVelocity;
`,KI=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,ZI=["x","y","z","w"],uY=["float","vec2","vec3","vec4"],hY={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},dY={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Kd=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(o,a){return o.deps.length-a.deps.length}return function(o,a){let c=this.getIncludes(o,a);if(!c)return"";let d="";c=c.sort(e);for(let g=0;g<c.length;g++)c[g].src&&(d+=c[g].src+`
`);return d}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,o){this.addVertexParsCode(WI),this.addFragmentParsCode(qI),this.buildShader("vertex",e),this.buildShader("fragment",o);for(let a=0;a<this.requires.uv.length;a++)if(this.requires.uv[a]){let c=a>0?a+1:"";this.addVaryCode("varying vec2 vUv"+c+";"),a>0&&this.addVertexParsCode("attribute vec2 uv"+c+";"),this.addVertexFinalCode("vUv"+c+" = uv"+c+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(YI),this.addFragmentFinalCode(XI)),this}buildShader(e,o){this.resultCode[e]=o.build(this.setShader(e),"v4")}setMaterial(e,o){return this.defines={},this}addFlow(e,o,a){return this.addSlot(e).addCache(o).addContext(a)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,o){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${o} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,o){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${o} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,o){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${o} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,o){this.code[o??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,o){this.nodeCode[o??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let o=this.nodeCode[e];return this.nodeCode[e]="",o}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,o){this.finalCode[o??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,o){this.parsCode[o??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,o){this.defines[e]=o===void 0?1:o}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,o,a,c="varying",d="V",g=""){let b=this.getVars(c),j=b[e];if(!j){let $=b.length;j={name:a||"node"+d+$+(g?"_"+g:""),type:o},b.push(j),b[e]=j}return j}getTempVar(e,o,a,c){return this.getVar(e,o,a,this.shader,"T",c)}getAttribute(e,o){if(!this.attributes[e]){let a=this.getVar(e,o);this.addVertexParsCode("attribute "+o+" "+e+";"),this.addVertexFinalCode(a.name+" = "+e+";"),this.attributes[e]={varying:a,name:e,type:o}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,o){o=o??"";let a="";for(let c=0,d=e.length;c<d;++c){let g=e[c],b=g.type,j=g.name,$=g.size,_e=this.getFormatByType(b);if(_e===void 0)throw new Error("Node pars "+_e+" not found.");_e.includes("[]")?a+=o+" "+_e.substring(0,_e.length-2)+" "+j+`[${$}];
`:a+=o+" "+_e+" "+j+`;
`}return a}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let o=e instanceof Xi?e.uuid:e;return this.nodeData[o]=this.nodeData[o]||{}}createUniform(e,o,a,c,d,g){if(o.includes("[]")){let b=this.inputs.arrayUniforms,j=b.list.length,$=new Pm({type:o,size:a.size,name:c||"nodeUA"+j+(g?"_"+g:""),node:a,needsUpdate:d});return b.list.push($),b[e].push($),b[e][$.name]=$,this.uniforms[$.name]=$,$}else{let b=this.inputs.uniforms,j=b.list.length,$=new Pm({type:o,name:c||"nodeU"+j+(g?"_"+g:""),node:a,needsUpdate:d});return b.list.push($),b[e].push($),b[e][$.name]=$,this.uniforms[$.name]=$,$}}createVertexUniform(e,o,a,c,d){return this.createUniform("vertex",e,o,a,c,d)}createFragmentUniform(e,o,a,c,d){return this.createUniform("fragment",e,o,a,c,d)}include(e,o,a){var g;let c;if(e=typeof e=="string"?Ni.get(e):e,this.context.include===!1)return e.name;e instanceof Ae?c=this.includes.functions:e instanceof Yt?c=this.includes.consts:e instanceof qd&&(c=this.includes.structs);let d=c[this.shader]=c[this.shader]||[];if(e){let b=d[e.name];if(b||(b=d[e.name]={node:e,deps:[]},d.push(b),b.src=e.build(this,"source")),e instanceof Ae&&o&&d[o.name]&&d[o.name].deps.indexOf(e)===-1&&(d[o.name].deps.push(e),(g=e.includes)==null?void 0:g.length)){let j=0;do this.include(e.includes[j++],o);while(j<e.includes.length)}return a&&(b.src=a),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,o){return this.includes[e][o||this.shader]}getConstructorFromLength(e){return uY[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let o=0;o<arguments.length;o++){let a=e[o];if(a!=null&&a.isNode)return a}}resolve(...e){for(let o=0;o<arguments.length;o++){let a=e[o];if(a!==void 0){if(a.isNode)return a;if(a.isTexture)switch(a.mapping){case al:case ll:return new J0(a);case ch:return new Z0(new Pn(a));default:return new Pn(a)}else{if(a.isVector2)return new qr(a);if(a.isVector3)return new nn(a);if(a.isVector4)return new jn(a)}}}}format(e,o,a){switch(this.colorToVector(a+" <- "+o)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return hY[e]||e}getFormatByType(e){return dY[e]||e}getUUID(e,o){return o=o!==void 0?o:!0,o&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return ZI[e]}getIndexByElement(e){return ZI.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let o in e)this.defines[o]=e[o];return this.defines}mergeUniform(e){for(let o in e)this.uniforms[o]=e[o];return this.uniforms}getTextureEncodingFromMap(e){let o;return e?e.isTexture&&(o=e.encoding):o=Sn,o===Sn&&this.context.gamma&&(o=at),o}},rr=class extends lr{constructor(e=0,o,a,c){super("c"),this.nodeType="Color",this.value=e instanceof xr$1?e:new xr$1(e||0,o,a,c)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,o,a,c,d,g){a=e.getUUID(a??this.getUUID()),c=c??this.getType(e);let b=e.getNodeData(a),j=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let $=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${$};`)}return j?this.generateReadonly(e,o,a,c,d,g):e.isShader("vertex")?(b.vertex||(b.vertex=e.createVertexUniform(c,this,d,g,this.getLabel())),e.format(b.vertex.name,c,o)):(b.fragment||(b.fragment=e.createFragmentUniform(c,this,d,g,this.getLabel())),e.format(b.fragment.name,c,o))}generateReadonly(e,o,a,c,d,g){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",c,o)}},Dt=class extends lr{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,o,a,c,d,g){return e.format(this.value.toString(),c,o)}},Jr=class extends lr{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,o,a,c){return e.format(this.value?"true":"false",c,o)}},no=class extends lr{constructor(e=1,o){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(o)?o:typeof o=="number"?new Array(e).fill(o):new Array(e).fill(0)}},ql=class extends lr{},$0=class extends ql{constructor(e){super("v3"),this.image=e,this._value=new _}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Qc=class extends ql{constructor(e,o,a=1008){super("t"),this.image=e,this.wrap=o,this.minFilter=a}get value(){return this.image.getTexture(this.wrap,this.minFilter)}},Zd=class extends lr{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new nr}generateReadonly(e,o,a,c,d,g){return e.format("mat3("+this.value.elements.join(", ")+")",c,o)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},sn=class extends lr{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new ce$1}generateReadonly(e,o,a,c,d,g){return e.format("mat4("+this.value.elements.join(", ")+")",c,o)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function JI(e,o,a){e.setUvTransform(a[0],a[1],o[0],o[1],0,0,0)}var ex=class extends Zd{constructor(e,o){super(new nr),this.repeat=e,this.offset=o,JI(this.value,e,o)}updateMatrix(){JI(this.value,this.repeat,this.offset)}},so=class extends lr{constructor(e=1,o){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(o)?o:o instanceof Ke?new Array(e).fill(o):new Array(e).fill(new Ke(0))}},Jd=class extends et{constructor(e,o,a,c){super("v3"),this.nodeType="Blend",this.a=e,this.b=o,this.alpha=a,this.mode=c}generate(e,o){if(e.isShader("fragment")){let a=[];return a.push(this.a.build(e,"c")),a.push(this.b.build(e,"c")),a.push(this.alpha.build(e,"f")),a.push(this.mode.build(e,"i")),e.format("spe_blend("+a.join(",")+")",this.getType(e),o)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},qA=class extends et{constructor(e,o){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.isShader("fragment")){let a=e.include(qA.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let c=[];return c.push(this.color.build(e,"v3")),c.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},Kc=qA;Kc.Nodes=function(){return{customColor:new Ae(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var YA=class extends et{constructor(e,o){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.isShader("fragment")){let a=e.include(YA.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let c=[];return c.push(this.cnormal.build(e,"v3")),c.push("normal"),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},$d=YA;$d.Nodes=function(){return{customNormal:new Ae(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var ef=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e,st,rt){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=o,this.crop=a,this.projection=c,this.axis=d,this.side=g,this.size=b,this.blending=j,this.mat=$,this.isMask=rt,this.alpha=_e,this.mode=st,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let a=`g${this.uuid.toString().replace(/-/g,"")}`,c;switch(this.projection.value){case 3:c=e.include(ef.Nodes.cylindrical);break;case 2:c=e.include(ef.Nodes.spherical);break;case 1:let g=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],b=["zy","xz","xy"][this.axis.value],j=new Ae(`
		vec3 ${a}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${b})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${g}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);c=e.include(j);break;case 4:c=e.include(ef.Nodes.triplanar);break;default:c=e.include(ef.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let d=[];if(d.push("normal"),d.push(this.texture.generate(e,"t")),d.push(this.textureSize.build(e,"v2")),d.push(this.crop.build(e,"f")),d.push(this.mat.build(e,"mat3")),d.push(this.size.build(e,"v2")),d.push(this.blending.build(e,"f")),d.push(this.isMask.build(e,"b")),d.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),d.push(this.alpha.build(e,"f")),d.push(this.mode.build(e,"i")),d.push(this.calpha),this.projection.value===4){let g=`${a}_writeUvs`,b=g+"0",j=g+"1",$=g+"2",_e=`${a}_triplanarWeights`;e.addFragmentVariable(b,"vec2"),e.addFragmentVariable(j,"vec2"),e.addFragmentVariable($,"vec2"),e.addFragmentVariable(_e,"vec3"),d.push(b),d.push(j),d.push($),d.push(_e)}else{let g=`${a}_writeUvs`;e.addFragmentVariable(g,"vec2"),d.push(g)}return e.format(c+"("+d.join(",")+")",this.getType(e),o)}},Yl=ef;Yl.Nodes=function(){let e=new Ae(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),o=new Ae(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),a=new Ae(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),c=new Ae(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:o,uv:a,triplanar:c}}();var tf=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e,st,rt){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=o,this.near=a,this.far=c,this.isVector=d,this.isWorldSpace=g,this.origin=b,this.direction=j,this.colors=$,this.steps=_e,this.isMask=rt,this.alpha=st,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){let a=`g${this.uuid.toString().replace(/-/g,"")}`,c=new Ae(`vec3 ${a}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${a}_MAX_COLORS], float steps[${a}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${a}_IS_VECTOR
                   #ifdef ${a}_LINEAR
                       #ifdef ${a}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${a}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${a}_SMOOTH
				for ( int i = 1; i < ${a}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${a}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[tf.Nodes.vectorLinearWorldSpaceDepth,tf.Nodes.vectorLinearObjectSpaceDepth,tf.Nodes.vectorSphericalObjectSpaceDepth,tf.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${a}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${a}_SMOOTH`),this.isVector.value>.5&&e.define(`${a}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${a}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${a}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let d=e.include(c),g=[];return g.push(this.near.build(e,"f")),g.push(this.far.build(e,"f")),g.push(this.origin.build(e,"v3")),g.push(this.direction.build(e,"v3")),g.push(this.colors.build(e,"v4[]")),g.push(this.steps.build(e,"f[]")),g.push(this.isMask.build(e,"b")),g.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),g.push(this.alpha.build(e,"f")),g.push(this.calpha),e.format(d+"("+g.join(",")+")",this.getType(e),o)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},rf=tf;rf.Nodes=function(){let e=new Ae(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),o=new Ae(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),a=new Ae(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),c=new Ae(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:o,vectorSphericalWorldSpaceDepth:a,vectorSphericalObjectSpaceDepth:c}}();var Om=class extends et{constructor(e,o,a,c,d,g,b,j){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=o,this.scale=a,this.intensity=c,this.factor=d,this.isMask=j,this.alpha=g,this.mode=b,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let a=new Ae(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),c=e.include(a),d=[];return d.push(this.color.build(e,"c")),d.push(this.bias.build(e,"f")),d.push(this.scale.build(e,"f")),d.push(this.intensity.build(e,"f")),d.push(this.factor.build(e,"f")),d.push(this.isMask.build(e,"b")),d.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),d.push(this.alpha.build(e,"f")),d.push(this.mode.build(e,"i")),d.push(this.calpha),e.format(c+"("+d.join(",")+")",this.getType(e),o)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},XA=class extends et{constructor(e,o,a,c,d,g,b,j,$){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=o,this.colors=a,this.steps=c,this.offset=d,this.morph=g,this.angle=b,this.isMask=$,this.alpha=j,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=e.include(XA.Nodes.gradient),c=[];return c.push(this.gradientType.build(e,"i")),c.push(this.smooth.build(e,"b")),c.push(this.colors.build(e,"v4[]")),c.push(this.steps.build(e,"f[]")),c.push(this.offset.build(e,"v2")),c.push(this.morph.build(e,"v2")),c.push(this.angle.build(e,"f")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},nf=XA;nf.Nodes=function(){return{gradient:new Ae(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var QA=class extends et{constructor(e,o,a,c){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=c,this.alpha=o,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let a=e.include(QA.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let c=[];return c.push(this.texture.generate(e,"t")),c.push("normal"),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.mode.build(e,"i")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},sf=QA;sf.Nodes=function(){return{matcap:new Ae(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var Im=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(Im||{}),Zi=function(){let e=new Ae(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),o=new Ae(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);o.keywords.F3=new Yt("float F3 0.3333333"),o.keywords.G3=new Yt("float G3 0.1666667");let a=new Ae(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[o]),c=new Ae("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),d=new Ae("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),g=new Ae(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[c,d]),b=new Ae("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),j=new Ae("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[b]),$=new Ae(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[j]),_e=new Ae(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[$]);_e.keywords.NUM_OCTAVES=new Yt("int NUM_OCTAVES 5");let st=new Ae("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),rt=new Ae(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[c,d,st]),ut=new Ae(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),gt=new Ae(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),yt=new Ae(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),wt=new Ae(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),Ct=new Ae(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),Pt=new Ae(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),At=new Ae(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[ut,gt,yt,wt,Ct,Pt]);return{simplex:o,simplexFractal:a,simplexAshima:g,fbm:_e,perlin:rt,voronoi:At}}(),of=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At){super("v3"),this.nodeType="Noise",this.scale=e,this.size=o,this.move=a,this.fA=c,this.fB=d,this.distortion=g,this.colorA=b,this.colorB=j,this.colorC=$,this.colorD=_e,this.noiseType=rt,this.voronoiStyle=gt,this.highCut=yt,this.lowCut=wt,this.smoothness=Ct,this.seed=Pt,this.quality=At,this.isMask=ut,this.alpha=st,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o,a,c,d){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let g=Object.values(Im)[this.noiseType.value],b=g=="voronoi"?`
		float v = ${g}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${g}(st),
					   ${g}(st + vec3(1.0)),
					   ${g}(st + vec3(1.0)));
		vec3 r = vec3(${g}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${g}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${g}(st * q));
		float f = ${g}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,j=new Ae(`vec3 ${g}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${b}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[Zi.simplex,Zi.simplexFractal,Zi.simplexAshima,Zi.fbm,Zi.perlin,Zi.voronoi]),$=e.include(j),_e=[];return _e.push(this.scale.build(e,"f")),_e.push(this.size.build(e,"v3")),_e.push(this.move.build(e,"f")),_e.push(this.fA.build(e,"v2")),_e.push(this.fB.build(e,"v2")),_e.push(this.distortion.build(e,"v2")),_e.push(this.colorA.build(e,"v4")),_e.push(this.colorB.build(e,"v4")),_e.push(this.colorC.build(e,"v4")),_e.push(this.colorD.build(e,"v4")),_e.push(this.voronoiStyle.build(e,"i")),_e.push(this.highCut.build(e,"f")),_e.push(this.lowCut.build(e,"f")),_e.push(this.smoothness.build(e,"f")),_e.push(this.seed.build(e,"f")),_e.push(this.quality.build(e,"i")),_e.push(this.isMask.build(e,"b")),_e.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),_e.push(this.alpha.build(e,"f")),_e.push(this.calpha),e.format($+"("+_e.join(",")+")",this.getType(e),o)}};of.numOctaves=5;var KA=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=o,this.outlineWidth=a,this.contourWidth=c,this.contourThreshold=d,this.outlineThreshold=g,this.contourFrequency=b,this.outlineSmoothing=j,this.contourDirection=$,this.positionalLines=_e,this.compensation=st,this.resolution=rt,this.normalMap=ut,this.depthMap=gt,this.pixelRatio=yt,this.alpha=wt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){let a=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${a}_offset`),this.firstTime){let c=this.outlineWidth.build(e,"f"),d=this.resolution.build(e,"v2"),g=this.compensation.build(e,"b"),b=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(c,"uniform float"),e.addVertexParsVariable(d,"uniform vec2"),e.addVertexParsVariable(g,"uniform bool"),e.addVertexParsVariable(b,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${a}_offset = vec2(0.0);
                if (${g}) {
                    vec4 ${a}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${a}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${a}_offset = normalize(${a}_clipNormal.xy) / ${d} * (${c} / 2.0) * ${a}_clipPosition.w * 2.0 * ${b};
                    ${a}_clipPosition.xy += ${a}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${a}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let c=e.include(KA.Nodes.outline),d=[];return d.push(this.outlineColor.build(e,"c")),d.push(this.contourColor.build(e,"c")),d.push(this.outlineWidth.build(e,"f")),d.push(this.contourWidth.build(e,"f")),d.push(this.contourThreshold.build(e,"f")),d.push(this.outlineThreshold.build(e,"f")),d.push(this.contourFrequency.build(e,"f")),d.push(this.outlineSmoothing.build(e,"f")),d.push(this.contourDirection.build(e,"v3")),d.push(this.positionalLines.build(e,"b")),d.push(this.resolution.build(e,"v2")),d.push(this.normalMap.getTexture(e,"t")),d.push(this.depthMap.getTexture(e,"t")),d.push(this.pixelRatio.build(e,"f")),d.push(this.compensation.build(e,"b")),d.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),d.push(this.alpha.build(e,"f")),d.push(this.calpha),this.firstTime=!this.firstTime,e.format(c+"("+d.join(",")+")",this.getType(e),o)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},af=KA;af.Nodes=function(){let e=new Ae(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Ae(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Wo=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=o,this.axis=a,this.blending=c,this.offset=d,this.colorA=g,this.colorB=b,this.frequency=j,this.size=$,this.variation=_e,this.smoothness=st,this.zigzag=rt,this.rotation=ut,this.vertical=gt,this.horizontal=yt,this.sides=wt,this.isMask=Pt,this.alpha=Ct,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let a;switch(this.style.value){case 0:a="circle";break;case 1:a="ring";break;case 2:a="polygon";break;case 3:a="xcross";break;case 4:a="diamond";break;case 5:a="checkerboard";break;case 6:a="line";break;case 7:a="wave";break;default:a="circle";break}let c=`g${this.uuid.toString().replace(/-/g,"")}`,d=new Ae(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),g=new Ae(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),b="";if(this.projection.value===4){let st=this.style.value===2?`${a}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${a}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,rt=this.style.value===2?`${a}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${a}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,ut=this.style.value===2?`${a}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${a}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;b=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${st};
				float d1 = ${rt};
				float d2 = ${ut};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let st=this.style.value===2?`${a}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${a}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,rt="";this.axis.value===0?rt=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?rt=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,rt=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let ut="";switch(this.projection.value){case 0:ut="custom_uv = vUv.st;";break;case 1:break;case 2:ut=`
							vec3 p = position;
							${rt}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}b=`
				vec2 custom_uv;
				${ut}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${st};
				`}let j=new Ae(`vec3 ${c}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${b}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[g,d,Wo.DrawFunctions.circle,Wo.DrawFunctions.ring,Wo.DrawFunctions.polygon,Wo.DrawFunctions.cross,Wo.DrawFunctions.diamond,Wo.DrawFunctions.checkerboard,Wo.DrawFunctions.line,Wo.DrawFunctions.wave]),$=e.include(j),_e=[];return _e.push("normal"),_e.push(this.blending.build(e,"f")),_e.push(this.style.build(e,"i")),_e.push(this.offset.build(e,"v2")),_e.push(this.colorA.build(e,"v4")),_e.push(this.colorB.build(e,"v4")),_e.push(this.frequency.build(e,"v2")),_e.push(this.size.build(e,"f")),_e.push(this.variation.build(e,"f")),_e.push(this.smoothness.build(e,"f")),_e.push(this.zigzag.build(e,"f")),_e.push(this.rotation.build(e,"f")),_e.push(this.vertical.build(e,"v2")),_e.push(this.horizontal.build(e,"v2")),_e.push(this.sides.build(e,"i")),_e.push(this.isMask.build(e,"b")),_e.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),_e.push(this.alpha.build(e,"f")),_e.push(this.calpha),e.format($+"("+_e.join(",")+")",this.getType(e),o)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),o)}},lf=Wo;lf.DrawFunctions=function(){let e=new Ae(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),o=new Ae(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),a=new Ae(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[o]),c=new Ae(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[o]),d=new Ae(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[o]),g=new Ae(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[o]),b=new Ae(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[o]),j=new Ae(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),$=new Ae(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[o]),_e=new Ae(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:o,circle:a,ring:c,polygon:d,cross:g,diamond:b,checkerboard:j,line:$,wave:_e}}();var ZA=class extends et{constructor(e,o,a,c,d,g,b,j){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=o,this.wavelengths=a,this.noiseStrength=c,this.noiseScale=d,this.offset=g,this.isMask=j,this.alpha=b,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=e.include(ZA.Nodes.rainbow),c=[];return c.push(this.filmThickness.build(e,"f")),c.push(this.movement.build(e,"f")),c.push(this.wavelengths.build(e,"v3")),c.push(this.noiseStrength.build(e,"f")),c.push(this.noiseScale.build(e,"f")),c.push(this.offset.build(e,"v3")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},cf=ZA;cf.Nodes=function(){let e=new Ae(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Zi.simplex]);return{rainbow:new Ae(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var JA=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=o,this.steps=a,this.source=c,this.isWorldSpace=d,this.noiseStrength=g,this.noiseScale=b,this.shadowColor=j,this.offset=$,this.alpha=_e,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let a=e.include(JA.Nodes.toon),c=[];return c.push(this.positioning.build(e,"i")),c.push(this.colors.build(e,"v4[]")),c.push(this.steps.build(e,"f[]")),c.push(this.source.build(e,"v3")),c.push(this.isWorldSpace.build(e,"b")),c.push(this.noiseStrength.build(e,"f")),c.push(this.noiseScale.build(e,"f")),c.push(this.shadowColor.build(e,"v4")),c.push(this.offset.build(e,"v3")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},uf=JA;uf.Nodes=function(){let e=new Ae(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),o=new Ae(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),a=new Ae(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[o]),c=new Ae(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),d=new Ae(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[c]);return{toon:new Ae(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Zi.simplex,e,a,d])}}();var $I=function(){return{textureBicubic:new Ae(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function eR(e,o){return e>=o?new z$2(o/e,1):new z$2(1,e/o)}var $A=class extends et{constructor(e,o,a,c,d,g,b,j){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=o,this.roughness=a,this.transmissionSamplerSize=c,this.transmissionSamplerMap=d,this.transmissionDepthMap=g,this.aspectRatio=b,this.alpha=j,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,o){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ze.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let a=e.include($A.Nodes.transmission),c=[];return c.push(this.thickness.build(e,"f")),c.push(this.ior.build(e,"f")),c.push(this.roughness.build(e,"f")),c.push(this.transmissionSamplerSize.build(e,"v2")),c.push(this.transmissionSamplerMap.getTexture(e,"t")),c.push(this.transmissionDepthMap.getTexture(e,"t")),c.push(this.aspectRatio.build(e,"v2")),c.push("normal"),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},hf=$A;hf.Nodes=function(){let e=new Ae(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),o=new Ae(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),a=new Ae(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),c=new Ae(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[$I.textureBicubic,a,e]),d=new Ae(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[c,o]);return{transmission:new Ae(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[d])}}();var e_=(e=>(e.NOISE="noise",e.MAP="map",e))(e_||{}),t_=class extends et{constructor(e,o,a,c,d,g,b,j,$,_e,st){super("v3"),this.displacementTypeIndex=new Dt(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=o,Object.values(e_)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Zd(this.movementOrTexture.value.matrix)),this.cropOrOffset=a,this.scale=_e,this.noiseFunctionIndex=st,this.voronoiStyle=c,this.smoothness=d,this.seed=g,this.highCut=b,this.lowCut=j,this.quality=$}generate(e,o){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let a,c=[];switch(c.push("displaced_position"),c.push("displaced_normal"),Object.values(e_)[this.displacementTypeIndex.value]){case"map":{a=e.include(t_.Nodes.map),c.push(this.movementOrTexture.getTexture(e,"t")),c.push("uv"),c.push(this.cropOrOffset.build(e,"f")),this.mat&&c.push(this.mat.build(e,"mat3"));break}case"noise":{let d=Object.values(Im)[this.noiseFunctionIndex.value],g=new Ae(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),b=d=="voronoi"?`
					float v = ${d}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${d}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,j=new Ae(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${b}
						}`,[Zi.simplex,Zi.simplexFractal,Zi.simplexAshima,Zi.fbm,Zi.perlin,Zi.voronoi]),$=new Ae(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[j,g]);a=e.include($),c.push(this.scale.build(e,"f")),c.push(this.cropOrOffset.build(e,"v3")),c.push(this.movementOrTexture.build(e,"f")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.quality.build(e,"i"));break}}return c.push(this.intensity.build(e,"f")),c.push("displaced_normal"),e.format(a+"("+c.join(",")+")",this.getType(e),o)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),o)}},df=t_;df.Nodes=function(){let e=new Ae(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),o=new Ae(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Ae(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,o])}}();var Ze={normalRenderTarget:new Pn,normalRenderTargetDepth:new Pn,transmissionRenderTarget:new Pn,aspectRatio:new qr,transmissionSize:new qr(2048,2048),transmissionRenderTargetDepth:new Pn,aoRenderTarget:new Pn,aoEnabled:new Jr,pixelRatioNode:new ke(1),resolution:new qr,penumbraSize:new no(5,.5),frameIndex:new Dt(0),transmissionLod:new Dt(2)};for(let e of Object.values(Ze))e.isRenderGlobal=!0;var tx={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.0.26/build/ui.wasm"},za=class extends Xi{constructor(){super("basic"),this.nodeType="Basic",this.color=new rr(si),this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn}get category(){return"phong"}generate(e){let o;if(e.isShader("vertex")){let a=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let c=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];a&&c.push(a.code,a.result?"displaced_position = "+a.result+";":""),c.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),c.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),c.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),o=c.join(`
`)}else{this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let a=this.color.flow(e,"c",{slot:"color"}),c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,g=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let b=["#include <normal_fragment_begin>",a.code];c&&b.push(c.code,"#ifdef ALPHATEST"," if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),g?b.push(g.code,`vec3 outgoingLight = ${a.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${g.result}, 1.0, SPE_BLENDING_NORMAL);`):b.push(`vec3 finalColor = ${a.result};`);let j="1.0";this.mask&&(this.mask.analyze(e),j=`luminance(${this.mask.flow(e,"v3").result})`),c?b.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${c.result} * ${j} );`):b.push("gl_FragColor = vec4("+a.result+", 1.0 );"),d&&b.push(`gl_FragColor.a *= ${d.result};`),b.push("#include <fog_fragment>","#include <dithering_fragment>"),o=b.join(`
`)}return o}},Rm=class extends Xi{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new rr(si),this.emissive=new rr(0),this.emissiveIntensity=new ke(1),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"lambert"}build(e){let o;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let a=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let c=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];a&&c.push(a.code,a.result?"displaced_position = "+a.result+";":""),c.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),c.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),c.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),c.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),o=c.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let a=this.color.flow(e,"c",{slot:"color"}),c=this.emissive.flow(e,"c",{slot:"emissive"}),d=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),g=this.occlusion.flow(e,"b",{slot:"occlusion"}),b=this.shadingAlpha.flow(e,"f"),j=this.shadingBlend.flow(e,"i"),$=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,_e=this.alpha?this.alpha.flow(e,"f"):void 0,st=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=_e!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let rt=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];rt.push(a.code,"vec3 diffuseColor = "+a.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),_e&&rt.push(_e.code,"#ifdef ALPHATEST","if ( "+_e.result+" <= ALPHATEST ) discard;","#endif"),rt.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),c&&rt.push(c.code,"reflectedLight.directDiffuse += "+c.result+" * "+d.result+";"),rt.push("vec3 ao = aoEnabled && "+g.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let ut="1.0";this.mask&&(this.mask.analyze(e),ut=`luminance(${this.mask.flow(e,"v3").result})`),rt.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${b.result} * ${ut} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${b.result} * ${ut}, ${j.result} );

					outgoingLight *= ao;
				}
				`),$&&rt.push($.code,`outgoingLight = spe_blend(outgoingLight, ${$.result}, 1.0, SPE_BLENDING_NORMAL);`),_e?rt.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${_e.result} );`):rt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),st&&rt.push(`gl_FragColor.a *= ${st.result};`),rt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),o=rt.join(`
`)}return o}},Ua=function(){let e=new Ae(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),o=new Ae(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:o}}(),Lm=class extends Xi{constructor(){super("phong"),this.nodeType="Phong",this.color=new rr(si),this.specular=new rr(1118481),this.shininess=new ke(30),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"phong"}build(e){let o;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let a=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let c=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];a&&c.push(a.code,a.result?"displaced_position = "+a.result+";":""),c.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),c.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),c.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),o=c.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let a=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let c=this.color.flow(e,"c",{slot:"color"}),d=this.specular.flow(e,"c"),g=this.shininess.flow(e,"f"),b=this.shadingAlpha.flow(e,"f"),j=this.shadingBlend.flow(e,"i"),$=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,_e=this.alpha?this.alpha.flow(e,"f"):void 0,st=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=_e!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let rt=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let gt=this.bumpMap.texture.flow(e,"t"),yt=this.bumpMap.flow(e,"v3"),wt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",Ct="";this.bumpMap.projection.value===4?Ct=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${gt.result}, uv0, ${wt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${gt.result}, uv1, ${wt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${gt.result}, uv2, ${wt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:Ct=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${gt.result}, bumpMapCachedUv, ${wt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,rt.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${yt.result};
					${Ct}
					`)}rt.push(c.code,"	vec3 diffuseColor = "+c.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",d.code,"	vec3 specular = "+d.result+";",g.code,"	float shininess = max( 0.0001, "+g.result+" );","	float specularStrength = 1.0;"),_e&&rt.push(_e.code,"#ifdef ALPHATEST","if ( "+_e.result+" <= ALPHATEST ) discard;","#endif"),rt.push("material.diffuseColor = diffuseColor;"),rt.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),rt.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let ut="1.0";this.mask&&(this.mask.analyze(e),ut=`luminance(${this.mask.flow(e,"v3").result})`),rt.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${b.result} * ${ut} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${b.result} * ${ut}, ${j.result} );
					
					outgoingLight *= ao;
				}
				`),$&&rt.push($.code,`outgoingLight = spe_blend(outgoingLight, ${$.result}, 1.0, SPE_BLENDING_NORMAL);`),_e?rt.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${_e.result});`):rt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),st&&rt.push(`gl_FragColor.a *= ${st.result};`),rt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),o=rt.join(`
`)}return o}},Bm=class extends Xi{constructor(){super("standard"),this.nodeType="Standard",this.color=new rr(si),this.roughness=new ke(.3),this.metalness=new ke(0),this.reflectivity=new ke(.5),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"physical"}build(e){let o;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let a=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),De$1.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let c=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];a&&c.push(a.code,a.result?"displaced_position = "+a.result+";":""),c.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),c.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),c.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),o=c.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled});let a={gamma:!0};this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color",context:a}),this.roughness.analyze(e),this.metalness.analyze(e);let c=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let d=this.color.flow(e,"c",{slot:"color",context:a}),g=this.roughness.flow(e,"f"),b=this.metalness.flow(e,"f"),j=this.shadingAlpha.flow(e,"f"),$=this.shadingBlend.flow(e,"i"),_e=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,st=this.alpha?this.alpha.flow(e,"f"):void 0,rt=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,ut=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=st!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let gt=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let wt=this.bumpMap.texture.flow(e,"t"),Ct=this.bumpMap.flow(e,"v3"),Pt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",At="";this.bumpMap.projection.value===4?At=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${wt.result}, uv0, ${Pt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${wt.result}, uv1, ${Pt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${wt.result}, uv2, ${Pt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:At=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${wt.result}, bumpMapCachedUv, ${Pt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,gt.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${Ct.result};
					${At}
					`)}if(gt.push(d.code,"	vec3 diffuseColor = "+d.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",b.code,"	float metalnessFactor = "+b.result+";"),this.roughnessMap){let wt=this.roughnessMap.texture.flow(e,"t"),Ct=this.roughnessMap.flow(e,"v3"),Pt="";this.roughnessMap.projection.value===4?Pt=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${wt.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${wt.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${wt.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${g.result};
					`:Pt=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${wt.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${g.result};
					`,gt.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${Ct.result};

					const float roughnessScale = 1.0;

					${Pt}
				`)}else gt.push(g.code,"	float roughnessFactor = "+g.result+";");st&&gt.push(st.code,"#ifdef ALPHATEST","	if ( "+st.result+" <= ALPHATEST ) discard;","#endif"),gt.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),gt.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),ut?gt.push(ut.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+ut.result+" ) ), diffuseColor, metalnessFactor );"):gt.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),gt.push("#include <lights_fragment_begin>"),gt.push("#include <lights_fragment_end>"),gt.push("vec3 ao = aoEnabled && "+c.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let yt="1.0";this.mask&&(this.mask.analyze(e),yt=`luminance(${this.mask.flow(e,"v3").result})`),gt.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${j.result} * ${yt} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${j.result} * ${yt}, ${$.result} );
					
					outgoingLight *= ao;
				}
				`),_e&&gt.push(_e.code,`outgoingLight = spe_blend(outgoingLight, ${_e.result}, 1.0, SPE_BLENDING_NORMAL);`),st?gt.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${st.result} );`):gt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),rt&&gt.push(`gl_FragColor.a *= ${rt.result};`),gt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),o=gt.join(`
`)}return o}},Nm=class extends Xi{constructor(){super("toon"),this.nodeType="Toon",this.color=new rr(si),this.specular=new rr(1118481),this.shininess=new ke(30),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0)}get category(){return"toon"}build(e){let o;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let a=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let c=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];a&&c.push(a.code,a.result?"displaced_position = "+a.result+";":""),c.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),c.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),c.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),o=c.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let a=this.color.flow(e,"c",{slot:"color"}),c=this.specular.flow(e,"c"),d=this.shininess.flow(e,"f"),g=this.shadingAlpha.flow(e,"f"),b=this.shadingBlend.flow(e,"i"),j=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,$=this.alpha?this.alpha.flow(e,"f"):void 0,_e=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=$!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let st=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let ut=this.bumpMap.texture.flow(e,"t"),gt=this.bumpMap.flow(e,"v3"),yt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",wt="";this.bumpMap.projection.value===4?wt=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${ut.result}, uv0, ${yt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${ut.result}, uv1, ${yt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${ut.result}, uv2, ${yt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:wt=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${ut.result}, bumpMapCachedUv, ${yt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,st.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${gt.result};
					${wt}
					`)}st.push(a.code,"	vec3 diffuseColor = "+a.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",c.code,"	vec3 specular = "+c.result+";",d.code,"	float shininess = max( 0.0001, "+d.result+" );","	float specularStrength = 1.0;"),$&&st.push($.code,"#ifdef ALPHATEST","if ( "+$.result+" <= ALPHATEST ) discard;","#endif"),st.push("material.diffuseColor = diffuseColor;"),st.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),st.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let rt="1.0";this.mask&&(this.mask.analyze(e),rt=`luminance(${this.mask.flow(e,"v3").result})`),st.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${g.result} * ${rt} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${g.result} * ${rt}, ${b.result} );
				}
				`),j&&st.push(j.code,`outgoingLight = spe_blend(outgoingLight, ${j.result}, 1.0, SPE_BLENDING_NORMAL);`),$?st.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${$.result} );`):st.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),_e&&st.push(`gl_FragColor.a *= ${_e.result};`),st.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),o=st.join(`
`)}return o}},rx=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let o=this.cache.get(e);o&&(this.dispose(e,o.data),this.cache.delete(e),o.prev.next=o.next,o.next.prev=o.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),o=this.head.next;for(;o.time<e-this.timeout;)this.dispose(o.src,o.data),this.cache.delete(o.src),o=o.next,o.prev=this.head,this.head.next=o;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var o;return(o=this.cache.get(e))==null?void 0:o.data}load(e){let o=Date.now(),a=this.cache.get(e);return a===void 0?(a={data:this.create(e),src:e,time:o,next:null,prev:null},this.cache.set(e,a)):(a.time=o,a.prev.next=a.next,a.next.prev=a.prev),a.prev=this.tail.prev,a.next=this.tail,this.tail.prev.next=a,this.tail.prev=a,this.scheduleCleanup(),a.data}},i_=class extends rx{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,o){URL.revokeObjectURL(o)}},r_;function tR(e){return typeof e=="string"?e:(r_||(r_=new i_),r_.load(e))}var ix=class{constructor(e,o){this.data=e,this.cache=o,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},nx=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let o=this.cache.get(e);return o===void 0&&(o=this.create(e),this.cache.set(e,o)),o.refCount+=1,o}},ff=class extends ix{constructor(e,o){super(e,o.imageHolderCache),this.data=e,this.shared=o,this.loaded=!1,this.isVideo=!1,this.isCanvas=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isCanvas=e.nodeName==="CANVAS",this.updateSrc(this.isCanvas?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let o=()=>{this.loaded=!0;for(let c of Object.values(this._cache))for(let d of Object.values(c))d&&(d.image=this.img,d.needsUpdate=!0);this.shared.requestRender()};if(this.isCanvas)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var a=new FileReader;a.readAsDataURL(new Blob([e],{type:"video/mp4"}));let c;await new Promise(d=>{a.onloadend=g=>{var b;c=(b=g.target)==null?void 0:b.result,d(null)}}),this.img.src=c}else this.img.src=e;this.img.onloadeddata=()=>{o()}}else this.img=new Image,this.img.src=tR(e),this.img.onload=o}getTexture(e,o=1008){let a=this._cache[e][o];if(a)return a;{let c;return this.isCanvas&&(c=new My(this.img,void 0,e,e,void 0,o)),this.isVideo?c=new Ty(this.img,void 0,e,e):c=new tr(this.img,void 0,e,e,void 0,o),this.loaded&&(c.needsUpdate=!0),this._cache[e][o]=c,c}}setNeedsUpdate(e){for(let o of Object.values(this._cache))for(let a of Object.values(o))a&&(a.needsUpdate=e)}disposeTextures(){for(let[e,o]of Object.entries(this._cache))for(let[a,c]of Object.entries(o))c==null||c.dispose(),this._cache[e][a]=void 0}dispose(){super.dispose(),this.disposeTextures()}},cs=class extends ff{};function s_(e,o){var a=gY(o);return a.formatToParts?pY(a,e):mY(a,e)}var fY={year:0,month:1,day:2,hour:3,minute:4,second:5};function pY(e,o){try{for(var a=e.formatToParts(o),c=[],d=0;d<a.length;d++){var g=fY[a[d].type];g>=0&&(c[g]=parseInt(a[d].value,10))}return c}catch(b){if(b instanceof RangeError)return[NaN];throw b}}function mY(e,o){var a=e.format(o).replace(/\u200E/g,""),c=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[c[3],c[1],c[2],c[4],c[5],c[6]]}var n_={};function gY(e){if(!n_[e]){var o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),a=o==="06/25/2014, 00:00:00"||o==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";n_[e]=a?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return n_[e]}function sx(e,o,a,c,d,g,b){var j=new Date(0);return j.setUTCFullYear(e,o,a),j.setUTCHours(c,d,g,b),j}var rR=36e5,yY=6e4,o_={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Fm(e,o,a){var c,d;if(!e||(c=o_.timezoneZ.exec(e),c))return 0;var g;if(c=o_.timezoneHH.exec(e),c)return g=parseInt(c[1],10),iR(g)?-(g*rR):NaN;if(c=o_.timezoneHHMM.exec(e),c){g=parseInt(c[1],10);var b=parseInt(c[2],10);return iR(g,b)?(d=Math.abs(g)*rR+b*yY,g>0?-d:d):NaN}if(bY(e)){o=new Date(o||Date.now());var j=a?o:vY(o),$=a_(j,e),_e=a?$:xY(o,$,e);return-_e}return NaN}function vY(e){return sx(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function a_(e,o){var a=s_(e,o),c=sx(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime(),d=e.getTime(),g=d%1e3;return d-=g>=0?g:1e3+g,c-d}function xY(e,o,a){var c=e.getTime(),d=c-o,g=a_(new Date(d),a);if(o===g)return o;d-=g-o;var b=a_(new Date(d),a);return g===b?g:Math.max(g,b)}function iR(e,o){return-23<=e&&e<=23&&(o==null||0<=o&&o<=59)}var nR={};function bY(e){if(nR[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),nR[e]=!0,!0}catch{return!1}}var pR=pi(oR(),1),u_=pi(lR(),1),AY=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,cR=AY,l_=36e5,uR=6e4,_Y=2,Dn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:cR};function h_(e,o){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var a=o||{},c=a.additionalDigits==null?_Y:(0,pR.default)(a.additionalDigits);if(c!==2&&c!==1&&c!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var d=EY(e),g=TY(d.date,c),b=g.year,j=g.restDateString,$=MY(j,b);if(isNaN($))return new Date(NaN);if($){var _e=$.getTime(),st=0,rt;if(d.time&&(st=CY(d.time),isNaN(st)))return new Date(NaN);if(d.timeZone||a.timeZone){if(rt=Fm(d.timeZone||a.timeZone,new Date(_e+st)),isNaN(rt))return new Date(NaN)}else rt=(0,u_.default)(new Date(_e+st)),rt=(0,u_.default)(new Date(_e+st+rt));return new Date(_e+st+rt)}else return new Date(NaN)}function EY(e){var o={},a=Dn.dateTimePattern.exec(e),c;if(a?(o.date=a[1],c=a[3]):(a=Dn.datePattern.exec(e),a?(o.date=a[1],c=a[2]):(o.date=null,c=e)),c){var d=Dn.timeZone.exec(c);d?(o.time=c.replace(d[1],""),o.timeZone=d[1].trim()):o.time=c}return o}function TY(e,o){var a=Dn.YYY[o],c=Dn.YYYYY[o],d;if(d=Dn.YYYY.exec(e)||c.exec(e),d){var g=d[1];return{year:parseInt(g,10),restDateString:e.slice(g.length)}}if(d=Dn.YY.exec(e)||a.exec(e),d){var b=d[1];return{year:parseInt(b,10)*100,restDateString:e.slice(b.length)}}return{year:null}}function MY(e,o){if(o===null)return null;var a,c,d,g;if(e.length===0)return c=new Date(0),c.setUTCFullYear(o),c;if(a=Dn.MM.exec(e),a)return c=new Date(0),d=parseInt(a[1],10)-1,dR(o,d)?(c.setUTCFullYear(o,d),c):new Date(NaN);if(a=Dn.DDD.exec(e),a){c=new Date(0);var b=parseInt(a[1],10);return OY(o,b)?(c.setUTCFullYear(o,0,b),c):new Date(NaN)}if(a=Dn.MMDD.exec(e),a){c=new Date(0),d=parseInt(a[1],10)-1;var j=parseInt(a[2],10);return dR(o,d,j)?(c.setUTCFullYear(o,d,j),c):new Date(NaN)}if(a=Dn.Www.exec(e),a)return g=parseInt(a[1],10)-1,fR(o,g)?hR(o,g):new Date(NaN);if(a=Dn.WwwD.exec(e),a){g=parseInt(a[1],10)-1;var $=parseInt(a[2],10)-1;return fR(o,g,$)?hR(o,g,$):new Date(NaN)}return null}function CY(e){var o,a,c;if(o=Dn.HH.exec(e),o)return a=parseFloat(o[1].replace(",",".")),c_(a)?a%24*l_:NaN;if(o=Dn.HHMM.exec(e),o)return a=parseInt(o[1],10),c=parseFloat(o[2].replace(",",".")),c_(a,c)?a%24*l_+c*uR:NaN;if(o=Dn.HHMMSS.exec(e),o){a=parseInt(o[1],10),c=parseInt(o[2],10);var d=parseFloat(o[3].replace(",","."));return c_(a,c,d)?a%24*l_+c*uR+d*1e3:NaN}return null}function hR(e,o,a){o=o||0,a=a||0;var c=new Date(0);c.setUTCFullYear(e,0,4);var d=c.getUTCDay()||7,g=o*7+a+1-d;return c.setUTCDate(c.getUTCDate()+g),c}var PY=[31,28,31,30,31,30,31,31,30,31,30,31],DY=[31,29,31,30,31,30,31,31,30,31,30,31];function mR(e){return e%400===0||e%4===0&&e%100!==0}function dR(e,o,a){if(o<0||o>11)return!1;if(a!=null){if(a<1)return!1;var c=mR(e);if(c&&a>DY[o]||!c&&a>PY[o])return!1}return!0}function OY(e,o){if(o<1)return!1;var a=mR(e);return!(a&&o>366||!a&&o>365)}function fR(e,o,a){return!(o<0||o>52||a!=null&&(a<0||a>6))}function c_(e,o,a){return!(e!=null&&(e<0||e>=25)||o!=null&&(o<0||o>=60)||a!=null&&(a<0||a>=60))}function lx(e,o,a){var c=h_(e,a),d=Fm(o,c,!0),g=new Date(c.getTime()-d),b=new Date(0);return b.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),b.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),b}function on(e,o){return o.color(e)}function d_(e=new Date,o){let a=o.format,c=e.getSeconds(),d=e;o&&o.timeZone!==null&&(d=lx(new Date,o.timeZone));let g=d.getHours(),b=d.getMinutes(),j;o.format12h24h==="12ampm"&&(j=g>=12?"PM":"AM");let $=g;o.format12h24h!=="24"&&($=g%12,$===0&&($=12));let _e,st;switch(a){case"HH:mm:ss":_e=[$,b,c];break;case"HH:mm":_e=[$,b];break;case"HH":_e=[$],j=void 0;break;case"mm":_e=[b],j=void 0;break;case"ss":_e=[c],j=void 0;break;case"year":st=d.getFullYear();break;case"month":st=d.getMonth()+1;break;case"dayOfYear":st=Math.floor((d.getTime()-new Date(d.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":st=d.getDate();break;case"secondOfDay":st=g*60*60+b*60+c;break;default:console.error("Unknown time format",a),st=0;break}return _e!==void 0?{textValue:_e,suffix:j}:st}function gR(e,o){switch(e.type){case"fresnel":return LY(e,o);case"gradient":return BY(e,o);case"depth":return NY(e,o);case"normal":return FY(e,o);case"noise":return kY(e,o);case"rainbow":return VY(e,o);case"toon":return zY(e,o);case"outline":return UY(e,o);case"transmission":return GY(e,o);case"color":return RY(e,o);case"pattern":return jY(e,o)}}function IY(e){return{type:e.type}}function oo(e,o){let{alpha:a,mode:c,isMask:d}=e,g=typeof a=="string"?(Number(o.getVariable(a))??100)/100:a;return{...IY(e),alpha:g,mode:c,isMask:d}}function RY(e,o){return{...oo(e,o),color:on(e.color,o)}}function LY(e,o){let{bias:a,scale:c,intensity:d,factor:g,color:b}=e;return{...oo(e,o),color:on(b,o),bias:a,scale:c,intensity:d,factor:g}}function BY(e,o){let{gradientType:a,smooth:c,colors:d,steps:g,angle:b,offset:j,morph:$}=e;return{...oo(e,o),gradientType:a,smooth:c,colors:d.map(_e=>new Ke(_e[0],_e[1],_e[2],_e[3])),num:d.length,steps:g,offset:new z$2(...j),morph:new z$2(...$),angle:b}}function NY(e,o){let{gradientType:a,near:c,far:d,isVector:g,isWorldSpace:b,origin:j,direction:$,colors:_e,steps:st,smooth:rt}=e;return{...oo(e,o),gradientType:a,near:c,far:d,isVector:g,isWorldSpace:b,origin:new _(...j),direction:$?new _(...$):new _(1,0,0),colors:_e.map(ut=>ut!==void 0?new Ke(ut[0],ut[1],ut[2],ut[3]):new Ke(0,0,0,0)),steps:st.slice(0,_e.length),smooth:rt}}function FY(e,o){let{cnormal:a}=e;return{...oo(e,o),cnormal:new _(a[0],a[1],a[2])}}function kY(e,o){return{...oo(e,o),scale:e.scale,move:e.move,fA:new z$2(...e.fA),fB:new z$2(...e.fB),size:new _(...e.size),distortion:new z$2(...e.distortion),colorA:on(e.colorA,o),colorB:on(e.colorB,o),colorC:on(e.colorC,o),colorD:on(e.colorD,o),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function VY(e,o){return{...oo(e,o),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new _(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new _(...e.offset)}}function zY(e,o){return{...oo(e,o),positioning:e.positioning,colors:e.colors.map(a=>new Ke(a[0],a[1],a[2],a[3])),num:e.colors.length,steps:e.steps,source:new _(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:on(e.shadowColor,o),offset:new _(...e.offset)}}function UY(e,o){return{...oo(e,o),outlineColor:on(e.outlineColor,o),contourColor:on(e.contourColor,o),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new _(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function GY(e,o){return{...oo(e,o),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function jY(e,o){return{...oo(e,o),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new z$2(...e.offset),colorA:on(e.colorA,o),colorB:on(e.colorB,o),frequency:new z$2(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new z$2(...e.vertical),horizontal:new z$2(...e.horizontal),sides:e.sides}}var Xl=class extends xr$1{},f_={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},p_={depth:["colors"]};function HY(e,o,a){var g,b;if(o==="isMask")return!0;let c=f_[e.type],d=p_[e.type];if(d!==void 0){let j=e.color;if(d.includes(o)){let $=(b=(g=j[o])==null?void 0:g.value)==null?void 0:b.length;if($!==void 0&&$!==a.length)return!0}}return c!==void 0?c.includes(o):!1}function m_(e,o,a){let c=a.uniforms[`f${a.id}_texture`];if(!c)return!1;let d=!1,g=e;if("image"in g){let b=g.image,j=o.image(b),$=c;$.image instanceof cs||$.image.deref(),$.image=j}if("video"in g){let b=g.video,j=o.video(b),$=c;$.image instanceof cs||$.image.deref(),$.image=j}if("wrapping"in g){let b=c;b.wrap=g.wrapping}if("minFilter"in g){let b=c;b.minFilter=g.minFilter}if("repeat"in g||"offset"in g){let b="mat",j=a.uniforms[`f${a.id}_${b}`];"repeat"in g&&(j.repeat=g.repeat),"offset"in g&&(j.offset=g.offset),j.updateMatrix()}return d}function yR(e,o,a,c){let d=!1;for(let[g,b]of Object.entries(e)){if(g==="bumpMap"||g==="roughnessMap"){d=!0;continue}if(!g||b===void 0)continue;if(g_(g,a,c,o)){g==="visible"&&a.type==="light"&&(d=!0);continue}a.visible=c.visible;let j=a.uniforms[`f${a.id}_${g}`];if(j&&!(j instanceof ql))switch(d=d||HY(a,g,b),j.constructor){case rr:if(typeof b=="string"){let $=o.getColor(b);$&&(j.value=$);break}else{let $=b;j.value instanceof Xl?j.value=new xr$1($.r,$.g,$.b,$.a):j.setRGBA($);break}case jn:if(typeof b=="string"){let $=o.getColor(b);$&&(j.value=$);break}else{let $=b;j.value instanceof Xl?j.value=new xr$1($.r,$.g,$.b,$.a):j.value.setRGBA($.r,$.g,$.b,$.a);break}case qr:{let $=b;j.value.setX($[0]),j.value.setY($[1]);break}case nn:{let $=b;j.value.setX($[0]),j.value.setY($[1]),j.value.setZ($[2]);break}case Pn:{m_(b,o,a);break}case so:{j.value=b.map($=>new Ke(...$));break}default:{j.value=b;break}}}return d}var Ql=(e,o,a)=>Math.max(0,Math.min(1,Number(o.getVariable(typeof e=="number"?e*100:e,a)??100)/100))??1,qo=class{constructor(e,o,a,c,d){this.id=e,this.uuid=o,this.data=a,this.uniforms={};for(let g in c)this.uniforms[`f${this.id}_${g}`]=c[g];for(let g in a)g_(g,this,a,d)}get type(){return this.data.type}static create(e,o,a,c){if(a.type==="light")return On.createLigherLayer(e,o,a,c);if(a.type==="texture"||a.type==="video"){let d=a.type==="texture"?c.canvas(a.texture.image)??c.image(a.texture.image):c.video(a.texture.video),g=new Qc(d,a.texture.wrapping,a.texture.minFilter??1008),b=new $0(d),j=new ex(a.texture.repeat,a.texture.offset),$=new ke(a.crop?1:0),_e=new Dt(a.projection??0),st=new Dt(["x","y","z"].indexOf(a.axis)??0),rt=new Dt(a.side??0),ut=new qr(a.size?new z$2(a.size[0],a.size[1]):new z$2(100,100)),gt=new ke(a.blending??0),yt=new ke(Ql(a.alpha,c)),wt=new Dt(a.mode??0),Ct=new Jr(a.isMask??!1),Pt=new Yl(g,b,$,_e,st,rt,ut,gt,j,yt,wt,Ct),At=new Qt(Pt.calpha,"f");return new Lr$1(e,o,a,{texture:g,textureSize:b,crop:$,projection:_e,axis:st,side:rt,size:ut,blending:gt,mat:j,alpha:yt,mode:wt,isMask:Ct},Pt,wt,At,Ct,c)}else if(a.type==="matcap"){let d=c.image(a.texture.image),g=new Qc(d,a.texture.wrapping,a.texture.minFilter??1008),b=new ke(Ql(a.alpha,c)),j=new Dt(a.mode??0),$=new Jr(a.isMask??!1),_e=new sf(g,b,j,$),st=new Qt(_e.calpha,"f");return new Lr$1(e,o,a,{texture:g,alpha:b,mode:j,isMask:$},_e,j,st,$,c)}else if(a.type==="displace")if(a.displacementType==="noise"){let d=new nn(new _(...a.offset)),g=new ke(a.scale??10),b=new ke(a.intensity??8),j=new ke(a.movement??1),$=new Dt(a.noiseType??0),_e=new Dt(a.voronoiStyle??0),st=new ke(a.smoothness??.5),rt=new ke(a.seed??0),ut=new ke(a.highCut??1),gt=new ke(a.lowCut??0),yt=new Dt(a.quality??1),wt=new df(b,j,d,_e,st,rt,ut,gt,yt,g,$);return new km(e,o,a,{offset:d,scale:g,intensity:b,movement:j,noiseType:$,voronoiStyle:_e,smoothness:st,seed:rt,highCut:ut,lowCut:gt,quality:yt},wt,c)}else throw new Error;else return YY(e,o,a,c)}updateByOp(e,o,a){let c=e;if(c.path[0]===void 0){if(c.type===0)return"type"in c.props||"category"in c.props||"visible"in c.props?(a.scene.markNeedsUpdateRendererDirty(),!0):yR(c.props,a.shared,this,o)}else if(c.path[0]==="texture")return"texture"in o||"video"in o?m_(c.props,a.shared,this):!0;return!1}dispose(){if(WY(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let o=e;o.image instanceof cs||o.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,o){let a=`f${this.id}_${e}`;this.hasValueByKey(a)&&o!==void 0&&(this.uniforms[a].value=o)}getNode(e){let o=`f${this.id}_${e}`;if(this.hasValueByKey(o))return this.uniforms[o]}getValue(e){let o=`f${this.id}_${e}`;if(this.hasValueByKey(o))return this.uniforms[o].value}getName(e){let o=/f\d+_(.*)/.exec(e);if(o&&o.length>1)return o[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let o in this.uniforms){let a=this.getName(o);a&&e.push(a)}return e}},Lr$1=class extends qo{constructor(o,a,c,d,g,b,j,$,_e){super(o,a,c,d,_e),this.params=d,this.color=g,this.mode=b,this.alpha=j,this.isMask=$}},km=class extends qo{constructor(e,o,a,c,d,g){super(e,o,a,c,g),this.position=d}},On=class extends qo{constructor(e,o,a,c,d,g){super(e,o,a,d,g),this.node=c}static createLigherLayer(e,o,a,c){let d,g=new ke(Ql(a.alpha,c)),b=new Dt(a.mode),j=new ke(a.bumpMapIntensity),$=new ke(Ql(a.alphaOverride,c)),_e;if(!a.visible)d=new za,_e={};else if(a.category==="lambert"){d=new Rm;let st=new rr(c.color(a.emissive)??0),rt=new Jr(a.occlusion??!0);_e={emissive:st,occlusion:rt},d.emissive=st,d.occlusion=rt}else if(a.category==="toon"){d=new Nm;let st=new ke(a.shininess??30),rt=new rr(c.color(a.specular)??1118481);_e={shininess:st,specular:rt},d.shininess=st,d.specular=rt}else if(a.category==="physical"){d=new Bm;let st=new ke(a.roughness??.3),rt=new ke(a.metalness??0),ut=new ke(a.reflectivity??.5),gt=new Jr(a.occlusion??!0);_e={roughness:st,metalness:rt,reflectivity:ut,occlusion:gt},d.roughness=st,d.metalness=rt,d.reflectivity=ut,d.occlusion=gt}else{d=new Lm;let st=new ke(a.shininess??30),rt=new rr(a.specular!==void 0?c.color(a.specular)??1118481:1118481),ut=new Jr(a.occlusion??!0);_e={shininess:st,specular:rt,occlusion:ut},d.shininess=st,d.specular=rt,d.occlusion=ut}return d.alpha=new ke(1),d.shadingAlpha=g,d.shadingBlend=b,d.bumpMapIntensity=j,d.alphaOverride=$,_e.alpha=d.shadingAlpha,_e.mode=d.shadingBlend,_e.bumpMapIntensity=d.bumpMapIntensity,_e.alphaOverride=d.alphaOverride,new On(e,o,a,d,_e,c)}get category(){return this.node.category}};function WY(e){let o=e instanceof qo?e.type:e;return o==="texture"||o==="video"||o==="displace_map"||o==="matcap"}function Cs(e){return{alpha:new ke(e.alpha??1),mode:new Dt(e.mode??0),isMask:new Jr(e.isMask??!1)}}function qY(e,o,a,c,d){switch(e.type){case"color":{let g=new rr(c.color??si),b=Cs(c),j=new Kc(g,b.alpha),$=new Qt(j.calpha,"f");return new Lr$1(o,a,e,{color:g,...b},j,b.mode,$,b.isMask,d)}case"fresnel":{let g=new rr(c.color??16777215),b=new ke(c.bias??.1),j=new ke(c.scale??1),$=new ke(c.intensity??2),_e=new ke(c.factor??1),st=Cs(c),rt=new Om(g,b,j,$,_e,st.alpha,st.mode,st.isMask),ut=new Qt(rt.calpha,"f");return new Lr$1(o,a,e,{color:g,bias:b,scale:j,intensity:$,factor:_e,...st},rt,st.mode,ut,st.isMask,d)}case"rainbow":{let g=new ke(c.filmThickness??30),b=new ke(c.movement??0),j=new nn(c.wavelengths??new _(0,0,0)),$=new ke(c.noiseStrength??0),_e=new ke(c.noiseScale??1),st=new nn(c.offset??new _(0,0,0)),rt=Cs(c),ut=new cf(g,b,j,$,_e,st,rt.alpha,rt.isMask),gt=new Qt(ut.calpha,"f");return new Lr$1(o,a,e,{filmThickness:g,movement:b,wavelengths:j,noiseStrength:$,noiseScale:_e,offset:st,...rt},ut,rt.mode,gt,rt.isMask,d)}case"transmission":{let g=new ke(c.thickness??10),b=new ke(c.ior??1.5),j=new ke(c.roughness??.5),$=Ze.transmissionSize,_e=Ze.transmissionRenderTarget,st=Ze.transmissionRenderTargetDepth,rt=window.innerWidth,ut=window.innerHeight,gt=rt>=ut?new qr(ut/rt,1):new qr(1,rt/ut),yt=Cs(c),wt=new hf(g,b,j,$,_e,st,gt,yt.alpha),Ct=new Qt(wt.calpha,"f");return new Lr$1(o,a,e,{thickness:g,ior:b,roughness:j,aspectRatio:gt,...yt},wt,yt.mode,Ct,yt.isMask,d)}case"toon":{let g=new Dt(c.positioning??0),b;c.colors?b=new so(c.colors.length,c.colors):(b=new so(10,new Ke(0,0,0,1)),b.value[1]=new Ke(1,1,1,1));let j;c.steps?j=new no(c.steps.length,c.steps):(j=new no(10,1),j.value[0]=0);let $=new nn(c.source??new _(0,0,0)),_e=new Jr(c.isWorldSpace??!0),st=new ke(c.noiseStrength??0),rt=new ke(c.noiseScale??1),ut=new jn(c.shadowColor),gt=new nn(c.offset??new _(0,0,0)),yt=Cs(c),wt=new uf(g,b,j,$,_e,st,rt,ut,gt,yt.alpha),Ct=new Qt(wt.calpha,"f");return new Lr$1(o,a,e,{positioning:g,colors:b,steps:j,source:$,isWorldSpace:_e,noiseStrength:st,noiseScale:rt,shadowColor:ut,offset:gt,...yt},wt,yt.mode,Ct,yt.isMask,d)}case"outline":{let g=new rr(c.outlineColor??16777215),b=new rr(c.contourColor??16777215),j=new ke(c.outlineWidth??.1),$=new ke(c.contourWidth??.1),_e=new ke(c.outlineThreshold??.1),st=new ke(c.contourThreshold??.1),rt=new ke(c.outlineSmoothing??.1),ut=new ke(c.contourFrequency??.1),gt=new nn(c.contourDirection??new _(0,1,0)),yt=new Jr(c.positionalLines??!1),wt=new Jr(c.compensation??!0),Ct=Ze.normalRenderTarget,Pt=Ze.normalRenderTargetDepth,At=Ze.pixelRatioNode,Tt=Ze.resolution,kt=Cs(c),It=new af(g,b,j,$,_e,st,rt,ut,gt,yt,wt,Tt,Ct,Pt,At,kt.alpha),Lt=new Qt(It.calpha,"f");return new Lr$1(o,a,e,{outlineColor:g,contourColor:b,outlineWidth:j,contourWidth:$,outlineThreshold:_e,contourThreshold:st,outlineSmoothing:rt,contourFrequency:ut,contourDirection:gt,positionalLines:yt,compensation:wt,...kt},It,kt.mode,Lt,kt.isMask,d)}case"depth":{let g=new Dt(c.gradientType??0),b=new Jr(c.smooth??!1),j=new ke(c.near??50),$=new ke(c.far??200),_e=new ke(c.isVector??1),st=new ke(c.isWorldSpace??0),rt=new nn(c.origin??new _),ut=new nn(c.direction??new _),gt;c.colors?gt=new so(c.colors.length,c.colors):(gt=new so(2,new Ke(0,0,0,1)),gt.value[1]=new Ke(1,1,1,1));let yt;c.steps?yt=new no(c.steps.length,c.steps):(yt=new no(2,1),yt.value[0]=0);let wt=Cs(c),Ct=new rf(g,b,j,$,_e,st,rt,ut,gt,yt,wt.alpha,wt.isMask),Pt=new Qt(Ct.calpha,"f");return new Lr$1(o,a,e,{gradientType:g,smooth:b,near:j,far:$,isVector:_e,isWorldSpace:st,origin:rt,direction:ut,colors:gt,steps:yt,...wt},Ct,wt.mode,Pt,wt.isMask,d)}case"noise":{let g=new ke(c.scale??1),b=new nn(c.size??new _(100,100,100)),j=new ke(c.move??1),$=new qr(c.fA??new z$2(1.7,9.2)),_e=new qr(c.fB??new z$2(8.3,2.8)),st=new qr(c.distortion??new z$2(1,1)),rt=new jn(c.colorA),ut=new jn(c.colorB),gt=new jn(c.colorC),yt=new jn(c.colorD),wt=new Dt(c.noiseType??0),Ct=new Dt(c.voronoiStyle??0),Pt=new ke(c.highCut??1),At=new ke(c.lowCut??0),Tt=new ke(c.smoothness??.5),kt=new ke(c.seed??.5),It=new Dt(c.quality??1),Lt=Cs(c),Ft=new of(g,b,j,$,_e,st,rt,ut,gt,yt,Lt.alpha,wt,Lt.isMask,Ct,Pt,At,Tt,kt,It),Nt=new Qt(Ft.calpha,"f");return new Lr$1(o,a,e,{scale:g,size:b,move:j,fA:$,fB:_e,distortion:st,colorA:rt,colorB:ut,colorC:gt,colorD:yt,noiseType:wt,...Lt,voronoiStyle:Ct,highCut:Pt,lowCut:At,smoothness:Tt,seed:kt,quality:It},Ft,Lt.mode,Nt,Lt.isMask,d)}case"normal":{let g=new nn(c.cnormal??new _(1,1,1)),b=Cs(c),j=new $d(g,b.alpha),$=new Qt(j.calpha,"f");return new Lr$1(o,a,e,{cnormal:g,...b},j,b.mode,$,b.isMask,d)}case"gradient":{let g=new Dt(c.gradientType??0),b=new Jr(c.smooth??!1),j;c.colors?j=new so(c.colors.length,c.colors):(j=new so(10,new Ke(0,0,0,1)),j.value[1]=new Ke(1,1,1,1));let $;c.steps?$=new no(c.steps.length,c.steps):($=new no(10,1),$.value[0]=0);let _e=new qr(c.offset??new z$2(0,0)),st=new qr(c.morph??new z$2(0,0)),rt=new ke(c.angle??0),ut=Cs(c),gt=new nf(g,b,j,$,_e,st,rt,ut.alpha,ut.isMask),yt=new Qt(gt.calpha,"f");return new Lr$1(o,a,e,{gradientType:g,smooth:b,colors:j,steps:$,offset:_e,morph:st,angle:rt,...ut},gt,ut.mode,yt,ut.isMask,d)}case"pattern":{let g=new Dt(c.style??0),b=new Dt(c.projection??0),j=new Dt(["x","y","z"].indexOf(c.axis)??0),$=new ke(c.blending??0),_e=new qr(c.offset??new z$2(0,0)),st=new jn(c.colorA),rt=new jn(c.colorB),ut=new qr(c.frequency??new z$2(10,10)),gt=new ke(c.size??.5),yt=new ke(c.variation??0),wt=new ke(c.smoothness??.5),Ct=new ke(c.zigzag??0),Pt=new ke(c.rotation??0),At=new qr(c.vertical??new z$2(0,1)),Tt=new qr(c.horizontal??new z$2(0,1)),kt=new Dt(c.sides??6),It=Cs(c),Lt=new lf(g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt,kt,It.alpha,It.isMask),Ft=new Qt(Lt.calpha,"f");return new Lr$1(o,a,e,{style:g,projection:b,axis:j,blending:$,offset:_e,colorA:st,colorB:rt,frequency:ut,size:gt,variation:yt,smoothness:wt,zigzag:Ct,rotation:Pt,vertical:At,horizontal:Tt,sides:kt,...It},Lt,It.mode,Ft,It.isMask,d)}default:{let g=new rr(1,0,0,1),b=Cs(c),j=new Kc(g,b.alpha),$=new Qt(j.calpha,"f");return new Lr$1(o,a,e,{color:g,...b},j,b.mode,$,b.isMask,d)}}}function YY(e,o,a,c){let d=gR(a,c);return qY(a,e,o,d,c)}function g_(e,o,a,c){if(a.type==="displace"&&(e==="intensity"||e==="visible")){let d=o.uniforms[`f${o.id}_intensity`];return d?(d.value=a.intensity*(a.visible?1:0),d):void 0}if(a.type!=="displace"&&(e==="alpha"||e==="visible")){let d=o.uniforms[`f${o.id}_alpha`];if(!d)return;if(d.value=Ql(a.alpha,c)*(a.visible?1:0),a.type==="outline"&&e==="visible"){let g=o.uniforms[`f${o.id}_compensation`];g&&(g.value=a.compensation&&a.visible)}return d}}function Jc(e,o){let a=0,c=e.layers.find(d=>d.data.type==="light");if(c){let d=c.data,g=Number(o.getVariable(d.alphaOverride));if((typeof d.alphaOverride=="string"?g/100:d.alphaOverride)<1)return!0}for(let d of e.layers){if(d.data.type!=="displace"&&d.data.isMask)return!0;if(d.data.type!=="displace"&&"alpha"in d.data&&d.data.type!=="light"&&d.data.type!=="fresnel"&&d.data.type!=="texture"&&d.data.type!=="matcap"&&d.data.type!=="rainbow"&&d.data.type!=="outline"&&d.data.type!=="pattern"){let g=d.data.visible?d.data.alpha:0;if(typeof g=="string"&&(g=Math.max(0,Math.min(1,Number(o.getVariable(g)??100)/100))),g===1&&d.data.type==="depth"||d.data.type==="gradient"){for(let b of d.data.colors)if(b[3]<1){g=b[3];break}}else if(g===1&&d.data.type==="noise"){let b=o.color(d.data.colorA).a,j=o.color(d.data.colorB).a,$=o.color(d.data.colorC).a,_e=o.color(d.data.colorD).a,st=Math.min(b,Math.min(j,Math.min($,_e)));st<1&&(g=st)}a+=(1-a)*g}}return a<1}var Wn=class extends lt{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},cx=class extends Wn{constructor(e,o,a,c){super(),this.flatShading=e,this.side=o,this.wireframe=a,this.root=c}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,o){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,o,a){return this.root.getFlavor(e,o,a)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,o,a){this.root.updateByOp(e,o,a)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Ga=class extends Wn{constructor(e,o,a=!0){super(),this.data=e,this.allowVariableSaves=a,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,o)}get nodeMaterial(){return this}getFlavor(e,o,a){let c=a?6:(e?3:0)+o;if(c===0)return this;this.flavors===void 0&&(this.flavors=[]),c-=1;let d=this.flavors[c];return d===void 0&&(d=new cx(e,o,a,this),this.flavors[c]=d,d.flatShading=e,d.side=o,d.updateAfterBuild()),d}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,o,a=!1){(this.data!==e||a)&&this.reset0(e,o)}reset0(e,o){this.data=e;let a=e.layers??oi.defaultTwoLayerData("phong").layers;try{this.layers=a.map(c=>qo.create(this.layerIdGen++,c.id,c.data,o.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(o.shared),this.transparent=Jc(e,o.shared),this.saveVariableLocations(o)}onVariableUpdate(e,o,a){if(e[0]==="alphaOverride")this.transparent=Jc(this.data,a.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(o)/100,1)));else if(e[0]==="layer"){let c=e[1],d=e[2];if(c&&d){let g=this.layers.find(b=>b.uuid===c);g!=null&&g.hasValue(d)&&(d==="alpha"?(this.transparent=Jc(this.data,a.shared),g.setValue(d,Math.max(0,Math.min(Number(o)/100,1)))):g.setValue(d,o))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let o=this.data.layers.find(a=>a.data.type==="light");o&&e.shared.getVariable(o.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(a=>{"alpha"in a.data&&typeof a.data.alpha=="string"&&e.shared.getVariable(a.data.alpha,["material",this.uuid,"layer",a.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(o=>o.type===e)}getLayerByUuid(e){return this.layers.find(o=>o.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(o=>o instanceof On),this.lightLayer===void 0&&(this.lightLayer=new On(0,"",{...Hr.defaultData("light","phong"),visible:!1},new za,{},e)),this.dispose();for(let o of this.flavors)o&&o.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(d=>d instanceof On);if(!e)return;let o=e.data,a=o.bumpMap,c=o.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let d=0;d<this.layers.length;++d){let g=this.layers[d];g instanceof Lr$1&&g.color instanceof Yl&&(g.uuid===a&&(e.node.bumpMap=g.color),g.uuid===c&&(e.node.roughnessMap=g.color))}}updateByOp(e,o,a){if(o!==void 0?this.data=o:o=this.data,this.transparent=Jc(o,a.shared),e.path[0]==="layers"){this.data=o;let c=a.shared,d=e.path[1];if(d===void 0){if(this.layers.reverse(),e.type===4){let g=qo.create(this.layerIdGen++,e.id,e.data,a.shared);this.layers.splice(e.localIndex,0,g),a.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),a.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let g=this.layers.findIndex(j=>j.uuid===e.id),b=this.layers[g];this.layers.splice(g,1),this.layers.splice(e.localIndex,0,b),a.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(a.shared)}else{e.type===0&&e.props.occlusion!==void 0&&a.scene.markNeedsUpdateRendererDirty();let g=this.layers.find(b=>b.uuid===d);if(g){let b=o.layers.data(d),j;if(e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?j={...e.props,alpha:Ql(e.props.alpha,c,["material",this.uuid,"layer",d,"alpha"])}:j={...e.props,alphaOverride:Ql(e.props.alphaOverride,c,["material",this.uuid,"alphaOverride"])}),g.updateByOp({...e,...j?{props:j}:{},path:e.path.slice(2)},b,a)){let $=qo.create(this.layerIdGen++,d,b,c);this.layers.splice(this.layers.findIndex(_e=>_e.uuid===d),1,$),this.onUpdate(a.shared)}}}}else this.reset(o,a)}applyMasks(){for(let e=0;e<this.layers.length;++e){let o=this.layers[e];o instanceof Lr$1?o.color.mask=void 0:o instanceof On&&(o.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let o=this.layers[e];if(o instanceof Lr$1&&o.isMask.value&&o.data.visible&&e>0){let a=e-1,c=this.layers[a];c instanceof On?c.node.mask=new Qi(o.color,o.alpha,Qi.MUL):c instanceof Lr$1&&(c.isMask.value||(c.color.mask=new Qi(o.color,o.alpha,Qi.MUL)))}}}blendColors(){let e=this.layers.findIndex(a=>a instanceof Lr$1),o=this.layers.findIndex(a=>a instanceof On);if(e!==-1&&e<o){let a=this.layers[e].color;for(let c=e+1;c<o;++c){let d=this.layers[c];if(d instanceof Lr$1){if(d.isMask.value)continue;a=new Jd(a,d.color,d.alpha,d.mode)}}this.fragment.color=a}else this.fragment.color=void 0}blendAfterColors(){let e=new Qt("outgoingLight","f"),o=this.layers.findIndex(a=>a instanceof On);if(this.layers.length>o+1){for(let a=o+1;a<this.layers.length;++a){let c=this.layers[a];if(c instanceof Lr$1){if(c.isMask.value)continue;e=new Jd(e,c.color,c.alpha,c.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(o=>o instanceof km);if(e.length>0){let o=e[0].position;for(let a=1;a<e.length;++a)e[a]&&(o=new Qi(o,e[a].position,Qi.ADD),o=new Qi(o,new ke(.5).setReadonly(!0),Qi.MUL));this.fragment.position=o}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,o){let a=(c,d,g)=>Math.min(Math.max(c,d),g);for(let c of this.layers)if(c.type==="displace"){let d=a(c.uniforms[`f${c.id}_intensity`].value,e,o);c.uniforms[`f${c.id}_intensity`].value=d}}computeCacheKey(){let e="[";for(let{data:o}of this.data.layers)if(o.type==="light")e+=`"${o.visible?o.category.toUpperCase():"Basic"}"`;else{let a=(f_[o.type]??[]).map(j=>o[j]),c=(p_[o.type]??[]).map(j=>{var $;return(($=o[j])==null?void 0:$.length)??0}),d=[...a,...c],g="isMask"in o&&o.isMask,b=`"${o.type}-${o.visible}-${g}"`;d.length?e+=`[${b}, "${d.join('","')}"],`:e+=b}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let o=0;o<this.updaters.length;++o)e.updateNode(this.updaters[o])}build(){let e=new Kd;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let o of this.flavors)o&&o.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Lr$1){let o=e.params.texture;if(o instanceof Qc&&!o.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Wn.prototype,{properties:{get:function(){return this.fragment.properties}}});var $c=class extends Ga{constructor(e,o,a){super(e,o,!1),this.uuid=a,this.allowVariableSaves=!0,this.saveVariableLocations(o)}},SR=pi(vR()),xR=new Map;function bR(e){if(typeof e=="string")return e;let o=xR.get(e);return o||(o={url:URL.createObjectURL(new Blob([e]))},xR.set(e,o)),o.url}var ja=class{constructor({src:e,volume:o,delay:a,loop:c}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let d;typeof e=="string"?d={src:e}:d={src:bR(e),format:"wav"},this.sound=new SR.Howl(d),this.sound.on("end",this.onEnd),this.src=e,o!==void 0&&(this.volume=o),a!==void 0&&(this.delay=a),c!==void 0&&(this.loop=c)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,o=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,o),this.clearFade()},e)):this.sound.fade(this._volume,0,o)}on(e,o,a){this.sound.on(e,o,a)}off(e,o,a){this.sound.off(e,o,a)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},hx=class{constructor(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}moveTo(e,o){return this.currentPath=new Tc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,o),this}lineTo(e,o){var a;return(a=this.currentPath)==null||a.lineTo(e,o),this}quadraticCurveTo(e,o,a,c){var d;return(d=this.currentPath)==null||d.quadraticCurveTo(e,o,a,c),this}bezierCurveTo(e,o,a,c,d,g){var b;return(b=this.currentPath)==null||b.bezierCurveTo(e,o,a,c,d,g),this}splineThru(e){var o;return(o=this.currentPath)==null||o.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:e.ORIGIN,t:0};function a(gt,yt,wt,Ct){let Pt=gt.x,At=yt.x,Tt=wt.x,kt=Ct.x,It=gt.y,Lt=yt.y,Ft=wt.y,Nt=Ct.y,Ht=(kt-Tt)*(It-Ft)-(Nt-Ft)*(Pt-Tt),dr=(At-Pt)*(It-Ft)-(Lt-It)*(Pt-Tt),hs=(Nt-Ft)*(At-Pt)-(kt-Tt)*(Lt-It),us=Ht/hs,hn=dr/hs;if(hs===0&&Ht!==0||us<=0||us>=1||hn<0||hn>1)return null;if(Ht===0&&hs===0){for(let un=0;un<2;un++)if(c(un===0?wt:Ct,gt,yt),o.loc===e.ORIGIN){let bo=un===0?wt:Ct;return{x:bo.x,y:bo.y,t:o.t}}else if(o.loc===e.BETWEEN){let bo=+(Pt+o.t*(At-Pt)).toPrecision(10),_s=+(It+o.t*(Lt-It)).toPrecision(10);return{x:bo,y:_s,t:o.t}}return null}else{for(let _s=0;_s<2;_s++)if(c(_s===0?wt:Ct,gt,yt),o.loc===e.ORIGIN){let gn=_s===0?wt:Ct;return{x:gn.x,y:gn.y,t:o.t}}let un=+(Pt+us*(At-Pt)).toPrecision(10),bo=+(It+us*(Lt-It)).toPrecision(10);return{x:un,y:bo,t:us}}}function c(gt,yt,wt){let Ct=wt.x-yt.x,Pt=wt.y-yt.y,At=gt.x-yt.x,Tt=gt.y-yt.y,kt=Ct*Tt-At*Pt;if(gt.x===yt.x&&gt.y===yt.y){o.loc=e.ORIGIN,o.t=0;return}if(gt.x===wt.x&&gt.y===wt.y){o.loc=e.DESTINATION,o.t=1;return}if(kt<-Number.EPSILON){o.loc=e.LEFT;return}if(kt>Number.EPSILON){o.loc=e.RIGHT;return}if(Ct*At<0||Pt*Tt<0){o.loc=e.BEHIND;return}if(Math.sqrt(Ct*Ct+Pt*Pt)<Math.sqrt(At*At+Tt*Tt)){o.loc=e.BEYOND;return}let It;Ct!==0?It=At/Ct:It=Tt/Pt,o.loc=e.BETWEEN,o.t=It}function d(gt,yt){let wt=[],Ct=[];for(let Pt=1;Pt<gt.length;Pt++){let At=gt[Pt-1],Tt=gt[Pt];for(let kt=1;kt<yt.length;kt++){let It=yt[kt-1],Lt=yt[kt],Ft=a(At,Tt,It,Lt);Ft!==null&&wt.find(Nt=>Nt.t<=Ft.t+Number.EPSILON&&Nt.t>=Ft.t-Number.EPSILON)===void 0&&(wt.push(Ft),Ct.push(new z$2(Ft.x,Ft.y)))}}return Ct}function g(gt,yt,wt){let Ct=new z$2;yt.getCenter(Ct);let Pt=[];return wt.forEach(At=>{At.boundingBox.containsPoint(Ct)&&d(gt,At.points).forEach(Tt=>{Pt.push({identifier:At.identifier,isCW:At.isCW,point:Tt})})}),Pt.sort((At,Tt)=>At.point.x-Tt.point.x),Pt}function b(gt,yt,wt,Ct,Pt){(Pt==null||Pt==="")&&(Pt="nonzero");let At=new z$2;gt.boundingBox.getCenter(At);let Tt=[new z$2(wt,At.y),new z$2(Ct,At.y)],kt=g(Tt,gt.boundingBox,yt);kt.sort((dr,hs)=>dr.point.x-hs.point.x);let It=[],Lt=[];kt.forEach(dr=>{dr.identifier===gt.identifier?It.push(dr):Lt.push(dr)});let Ft=It[0].point.x,Nt=[],Ht=0;for(;Ht<Lt.length&&Lt[Ht].point.x<Ft;)Nt.length>0&&Nt[Nt.length-1]===Lt[Ht].identifier?Nt.pop():Nt.push(Lt[Ht].identifier),Ht++;if(Nt.push(gt.identifier),Pt==="evenodd"){let dr=Nt.length%2===0,hs=Nt[Nt.length-2];return{identifier:gt.identifier,isHole:dr,for:hs}}else if(Pt==="nonzero"){let dr=!0,hs=null,us=null;for(let hn=0;hn<Nt.length;hn++){let un=Nt[hn];yt[un]&&(dr?(us=yt[un].isCW,dr=!1,hs=un):us!==yt[un].isCW&&(us=yt[un].isCW,dr=!0))}return{identifier:gt.identifier,isHole:dr,for:hs}}else console.warn('fill-rule: "'+Pt+'" is currently not implemented.')}let j=0,$=999999999,_e=-999999999,st=[];this.subPaths.forEach(gt=>{let yt=gt.getPoints(),wt=-999999999,Ct=999999999,Pt=-999999999,At=999999999;for(let Tt=0;Tt<yt.length;Tt++){let kt=yt[Tt];kt.y>wt&&(wt=kt.y),kt.y<Ct&&(Ct=kt.y),kt.x>Pt&&(Pt=kt.x),kt.x<At&&(At=kt.x)}_e<=Pt&&(_e=Pt+1),$>=At&&($=At-1),yt.length&&st.push({curves:gt.curves,points:yt,isCW:Zu.isClockWise(yt),identifier:j++,boundingBox:new lh(new z$2(At,Ct),new z$2(Pt,wt))})});let rt=st.map(gt=>{var yt;return b(gt,st,$,_e,(yt=this.userData)==null?void 0:yt.style.fillRule)}),ut=[];return st.forEach(gt=>{let yt=rt[gt.identifier];if(yt&&!yt.isHole){let wt=new xa;wt.curves=gt.curves,rt.filter(Ct=>(Ct==null?void 0:Ct.isHole)&&Ct.for===gt.identifier).forEach(Ct=>{if(Ct){let Pt=st[Ct.identifier],At=new Tc;At.curves=Pt.curves,wt.holes.push(At)}}),ut.push(wt)}}),ut}},y_=!1,AR,v_=new Promise(e=>{AR=e}),wR=!1,dx;function _R(){if(y_=!0,wR)return;if(dx)return dx;async function e(){let o=await __vitePreload(()=>import("./opentype-BktxL4Qf.js"),__vite__mapDeps([]));AR(o),wR=!0}return dx=e(),dx}var Vm=class{async load(e,o,a=()=>{}){let{load:c}=await v_;c(e,(d,g)=>{d||!g?a(d??"Something went wrong"):o(g)})}async parse(e){let{parse:o,Bidi:a}=await v_;try{let c=o(e),d=new a,g=b=>c.charToGlyphIndex(b.char);return d.registerModifier("glyphIndex",null,g),d.applyFeatures(c,c.defaultRenderOptions.features),{font:c,bidi:d}}catch(c){console.error(c)}}};async function XY(e){return await(await fetch(e)).arrayBuffer()}var QY=new Vm;async function x_(e){let o,a,c=!1;if(e.url?(o=await XY(e.url),a=e.url,c=e.url.startsWith("/")):e.data&&(o=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),o)if(y_){let d=await QY.parse(o);if(d)return{font:d.font,url:a,intercepted:c,arr:o,bidi:d.bidi}}else return{font:void 0,url:a,intercepted:c,arr:o,bidi:null}}function KY(e,o){return o.state.glyphIndex===e||o.state.fina===e||o.state.medi===e||o.state.init===e}var fx=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=x_(e).then(o=>{o&&(this._arrayBuffer=o.arr,this._url=o.url,this.font=o.font,this._intercepted=o.intercepted,this._isLoaded=!0,this._bidi=o.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=x_(e).then(o=>{o&&(this._arrayBuffer=o.arr,this._url=o.url,this.font=o.font,this._intercepted=o.intercepted,this._isLoaded=!0,this._bidi=o.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,o,a){if(!this._bidi)return[];let c=this._bidi;c.getTextGlyphs(o);let d=c.tokenizer.tokens,g=[],b=0,j=a.length===d.length;for(let $=0;$<a.length;$++){let _e=a[$].index,st=String.fromCharCode(a[$].unicode),rt=d[b];if(KY(_e,rt)||j)g.push({char:st,index:_e,replacements:[rt.state.glyphIndex],replacementChars:[rt.char]}),b++;else{let ut=rt.char,gt="",yt=[rt.state.glyphIndex],wt=[],Ct=!1;for(;!Ct;)b++,gt=o.charAt(b),ut+=gt,yt.push(e.charToGlyphIndex(gt)),wt=e.stringToGlyphs(ut),wt.length===1&&wt[0].index===_e&&(Ct=!0),b>o.length&&(Ct=!0);g.push({char:st,index:_e,replacements:yt,replacementChars:Array.from(ut)}),b++}}return g}generateShapes(e,o){if(!this._isLoaded)return;let a=this.font,c=o.fontSize/this.unitsPerEm,d=o.fontSize*o.lineHeight,g=e.map(Pt=>this.getTextWidth(Pt,o)),b=o.width,j=this.getCharWidth(`
`,o),$=o.horizontalAlign===1?j:0,_e=this.computeSpaceWidthForLine(e,0,o),st=this.getLineInitialOffsetX(g[0],b,o.horizontalAlign,e[0],j),rt=this.getLineInitialOffsetY(d,e.length,o.height,c,o.verticalAlign),ut=[],gt=e.map(Pt=>[]),yt=e.map(Pt=>[]),wt;for(let Pt=0;Pt<e.length;Pt++){let At=e[Pt],Tt={features:{liga:!0}},kt=[];try{kt=a.stringToGlyphs(At,Tt)}catch(Lt){console.warn(Lt)}st=this.getLineInitialOffsetX(g[Pt],b,o.horizontalAlign,At,j);let It=[];try{It=this.reverseLigaturesTable(a,At,kt)}catch(Lt){console.warn(Lt)}_e=this.computeSpaceWidthForLine(e,Pt,o);for(let Lt=0;Lt<kt.length;Lt++){let Ft=kt[Lt],Nt=Ft.index===0?`
`:Ft.unicode?String.fromCharCode(Ft.unicode):void 0,Ht=It[Lt],dr=0,hs=0;Lt===0&&o.horizontalAlign===2&&Ft.leftSideBearing!==void 0&&(hs=-Ft.leftSideBearing*c),wt&&(dr=a.getKerningValue(Ft,wt)*c),st+=hs+dr;let us=0;if(Nt===`
`)us=$;else if(Nt===" ")us=_e;else{let hn=this.createPath(Ft,c,st,rt,o);hn&&(us=hn.offsetX-(dr+hs),ut.push(hn.path))}if(Ht.replacements.length===1)yt[Pt].push([st,rt]),gt[Pt].push(us);else{let hn=Ht.replacements.map(gn=>(a.glyphs.get(gn).advanceWidth??0)*c),un=hn.reduce((gn,Gr)=>gn+=Gr,0),bo=hn.map(gn=>gn/un),_s=st;for(let gn=0;gn<bo.length;gn++){let Gr=us*bo[gn];yt[Pt].push([_s,rt]),gt[Pt].push(Gr),_s+=Gr}}st+=us,wt=Ft}rt-=d}let Ct=[];for(let Pt=0,At=ut.length;Pt<At;Pt++)Ct.push(...ut[Pt].toShapes());return{shapes:Ct,charWidths:gt,lineWidths:g,charCoords:yt}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,o,a,c,d){return(a===3||a===2)&&c.indexOf(`
`)>=0&&(e-=d),a===3?o*.5-e*.5:a===2?o-e:0}getLineInitialOffsetY(e,o,a,c,d){let g=o*e,b=Math.abs(this.ascender-this.descender)*c,j=e-b,$=-this.ascender*c-j/2;return d===3?-(a-g-$):d===2?-(a*.5-g*.5-$):$}createPath(e,o,a,c,d){var $;let g=e.getPath(a,-c,d.fontSize,{kerning:!1,letterSpacing:d.letterSpacing});if(!g){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let b=new hx,j=(e.advanceWidth??1)*o;if(e)for(let _e of g.commands){let st=($=b.currentPath)==null?void 0:$.currentPoint;if(!(st&&_e.type!=="Z"&&st.x===_e.x&&-st.y===_e.y))switch(_e.type){case"M":b.moveTo(_e.x,-_e.y);break;case"L":b.lineTo(_e.x,-_e.y);break;case"Q":b.quadraticCurveTo(_e.x1,-_e.y1,_e.x,-_e.y);break;case"C":b.bezierCurveTo(_e.x1,-_e.y1,_e.x2,-_e.y2,_e.x,-_e.y);break}}return b.subPaths.forEach(_e=>{let st=ZY(_e.curves);st!==void 0&&_e.currentPoint.distanceTo(st)>0&&_e.lineTo(st.x,st.y)}),{offsetX:j+d.fontSize*d.letterSpacing,path:b}}getCharWidth(e,o){var a;return((a=this.font)==null?void 0:a.getAdvanceWidth(e,o.fontSize,{kerning:!0,letterSpacing:o.letterSpacing}))??0}getTextWidth(e,o){var a;return((a=this.font)==null?void 0:a.getAdvanceWidth(e,o.fontSize,{kerning:!0,letterSpacing:o.letterSpacing}))??0}computeSpaceWidthForLine(e,o,a){let c=this.getCharWidth(" ",a),d=e[o];if(d){let g=this.countSpaces(d.trimEnd());if(a.horizontalAlign===4&&o<e.length-1&&g){let b=a.width,j=this.getTextWidth(d,a);return(b-(j-g*c))/g}}return c}countSpaces(e){return(e.match(/ /g)||[]).length}};function ZY(e){if(e.length){let o=e[0];if(o instanceof pn)return o.v1;if(o instanceof fn||o instanceof is$1)return o.v0}}var b_=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,o,a){let c=this.objects.get(e);return c===void 0?(c=this.createObject(e,o,a),this.objects.set(e,c)):c.isShared=!0,c}forceDelete(e){let o=this.objects.get(e);o&&(this.disposeObject(o),this.objects.delete(e))}mutateIfUnique(e,o){let a=this.objects.get(e);if(a&&a.isShared!==!0)return this.objects.delete(e),this.objects.set(o,a),a}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,o){let a=this.objects.get(e);o===a&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},zm=class extends b_{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,o,a){let c=Va(e,o,this.flatShading,a);return c.computeBoundingSphere(),c}},ER={markNeedsUpdateRendererDirty:()=>{}},S_=class extends nx{constructor(e){super(),this.shared=e}create(e){return new ff(e,this.shared)}},eu=class{constructor(e,o={}){if(this.data=e,this.geometryCache=new zm(!0),this.geometryCache2=new zm(!1),this.imageHolderCache=new S_(this),this.thisContext={scene:ER,shared:this},this.deletedMaterial=new $c(oi.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new cs(ad.emptyImage,this),this.deletedVideo=new cs(Jh.defaultVideo,this),this.materials={},this.images={},this.canvases={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},o.images)for(let[a,c]of Object.entries(o.images))this.addImage(a,c);if(o.videos)for(let[a,c]of Object.entries(o.videos))this.addVideo(a,c);if(o.audios)for(let[a,c]of Object.entries(o.audios))this.addAudio(a,c);if(o.particles)for(let[a,c]of Object.entries(o.particles))this.addParticle(a,c);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,o=!1){this.resetLib(e.lib);for(let{id:a,data:c}of e.variables)this.addVariableHolder(a,c),o&&this.updateVariableHolder(a,c);for(let[a,c]of Object.entries(e.images))this.addImage(a,c);for(let[a,c]of Object.entries(e.videos))this.addVideo(a,c);for(let[a,c]of Object.entries(e.colors))this.addColor(a,c);for(let[a,c]of Object.entries(e.materials))this.addMaterial(a,c);for(let[a,c]of Object.entries(e.audios))this.addAudio(a,c);for(let[a,c]of Object.entries(e.particles))this.addParticle(a,c);for(let[a,c]of Object.entries(e.fonts))this.addFont(a,c)}addMaterial(e,o){if(this.materials[e]){let a=this.materials[e];a.reset(o,this.thisContext),a.dispose()}else{let a=new $c(o,this.thisContext,e);this.materials[e]=a}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new Ga(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,o){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(o.data),!0):(this.images[e]=new cs(o,this),!1)}deleteImage(e){let o=this.images[e];o&&(o.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addCanvas(e,o){return this.canvases[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.canvases[e].updateSrc(o),!0):(this.canvases[e]=new cs(o,this),!1)}canvas(e){return this.canvases[e]}addVideo(e,o){return this.videos[e]?(this.videos[e].updateSrc(o.data),!0):(this.videos[e]=new cs(o,this),!1)}deleteVideo(e){let o=this.videos[e];o&&(o.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,o){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in o?this.colors[e].setRGBA(o.r,o.g,o.b,o.a):this.colors[e].setRGBA(o.r,o.g,o.b,1),!0):("a"in o?this.colors[e]=new Xl(o.r,o.g,o.b,o.a):this.colors[e]=new Xl(o.r,o.g,o.b,1),!1)}updateColor(e,o){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let a=this.colors[e];return this.colors[e].r=o.r??a.r,this.colors[e].g=o.g??a.g,this.colors[e].b=o.b??a.b,this.colors[e].a=o.a??a.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let o;if(typeof e=="string"){let a=this.getColor(e);a?o=a:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),o=new xr$1(0,0,0,0))}else return"a"in e?new xr$1(e.r,e.g,e.b,e.a):new xr$1(e.r,e.g,e.b,1);return o}addAudio(e,o){this.audios[e]=o}getAudio(e){let o=this.audios[e];if(o instanceof ja)return o;{let a=new ja({src:o.data});return this.audios[e]=a,a}}addParticle(e,o){this.particles[e]=o}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let o=this.audios[e];o&&(o instanceof ja&&o.dispose(),delete this.audios[e])}addFont(e,o){this.fonts[e]=new fx(o),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof ja&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,o){return this.variables[e]===void 0?(this.variables[e]={value:o.value,locations:[]},"dynamicVariableType"in o&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0):(this.variables[e].value=o.value,!1)}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,o){this.updateVariable(e,o.value)}updateVariable(e,o){if(this.variables[e]===void 0)return!1;this.variables[e].value=o;let a=o;for(;typeof a=="string";)a=this.variables[a].value;let c=this.entityOpContext.scene;for(let d=this.variables[e].locations.length-1;d>=0;d--){let g=this.variables[e].locations[d];if(g[0]==="material"){let b=g[1],j=a,$={scene:c,shared:this},_e=g.slice(2);c.traverseMaterial(rt=>{let ut=rt.root??rt;ut.uuid===b&&ut.onVariableUpdate(_e,j,$)});let st=this.materials[b];st&&st.onVariableUpdate(_e,j,$)}else{let b=c.find(g[0]);if(b===void 0){this.variables[e].locations.splice(d,1);continue}if(g[1]!=="geometry"&&g[1]!=="particles"){for(let j=1;j<g.length-1;j++)b=b[g[j]];g[1]==="rotation"?b[g[g.length-1]]=a*Me.DEG2RAD:b[g[g.length-1]]=a}if(b=c.find(g[0]),b.type==="ParticleEmitter"&&b.updateVariableState(a,g),vt.is(b)){if(g[1]==="position"||g[1]==="rotation"||g[1]==="scale")b.onVariableUpdate();else if(g[1]==="geometry"){let j=b;b.component&&(j=b.component);let $=j.dataPatched;j.chooseGeoemtryCache(this).forceDelete($.geometry),j.createGeometryDelayed(this.entityOpContext),j.onVariableUpdate(!0),j.instances.forEach(_e=>{let st=_e.dataPatched;_e.chooseGeoemtryCache(this).forceDelete(st.geometry),_e.createGeometryDelayed(this.entityOpContext),_e.onVariableUpdate(!0)})}}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,o){var a,c,d;if(Array.isArray(e)){if(e[0]==="mouse")return((a=this.mouseProperty)==null?void 0:a[e[1]])??0;if(e[0]==="raycast")return((c=this.raycastProperty)==null?void 0:c[e[1]])??0;let g=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return g.geometry.userData.parameters[e[1]];for(let b=1;b<e.length;b++)g=g[e[b]];return e[1]==="rotation"&&(g*=Me.RAD2DEG),g}for(let g in this.variables){if(o===void 0)break;let b=this.variables[g],j=(d=b.locations)==null?void 0:d.findIndex($=>Nr$1.equal($,o));j!==void 0&&j!==-1&&b.locations.splice(j,1)}if(typeof e=="string"){let g=e,b=e;do{if(b=g,this.variables[g]===void 0)break;g=this.variables[g].value}while(typeof g=="string");return o&&this.variables[b]!==void 0&&this.variables[b].locations.push(o),g}else return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var o;return(o=this.variables[e])==null?void 0:o.dynamicVariablePlayState}setDynamicVariablePlayState(e,o){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=o)}getDynamicVariableToggleIsForward(e){var o;return(o=this.variables[e])==null?void 0:o.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,o){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=o)}resetLib(e){for(let[o,a]of Object.entries(e.images))this.addImage(o,a.asset);for(let[o,a]of Object.entries(e.audios))this.addAudio(o,a.asset);for(let[o,a]of Object.entries(e.particles))this.addParticle(o,a.asset);for(let[o,a]of Object.entries(e.colors))this.addColor(o,a.asset);for(let[o,a]of Object.entries(e.fonts))this.addFont(o,a.asset);for(let[o,a]of Object.entries(e.materials))this.addMaterial(o,a.asset);for(let[o,a]of Object.entries(e.videos))this.addVideo(o,a.asset);for(let[o,a]of Object.entries(e.variables))this.addVariableHolder(o,a.asset)}updateLibByOp(e,o){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&o.updateByLibOp(e,this)}updateByOp(e,o,a){this.data=o,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],o.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],o.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(Fr$1.drop(e,2),o.materials[e.path[1]],{shared:this,scene:a}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,a):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===2&&e.type===0&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id):e.path[0]==="lib"&&this.updateLibByOp(Fr$1.drop(e,1),a)}updateFont(e,o,a){if(o.props.url){let c=this.getFont(e),d={...this.data.fonts[e],url:o.props.url};c.update(d),c.loadingPromise.then(()=>this.requestRender()),a.updateFont(e,this)}}};new eu(Mn.emptyData());var Ps=class extends pr{updateByPatchedOp(e,o,a){if(super.updateByPatchedOp(e,o,a),sD(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[c,d]of Object.entries(e.props)){let g=a.shared.material(d);this.material[Number(c)]=g}else if(Rt(e.path,["material"])&&this.material instanceof Wn)"material"in o&&typeof o.material!="string"&&this.material.updateByOp(Fr$1.drop(e,1),o.material,a);else if(Rt(e.path,["materials","*"])&&Array.isArray(this.material)){let c=e.path[1];if("materials"in o&&c<this.material.length){let d=o.materials[c];typeof d!="string"&&this.material[c].updateByOp(Fr$1.drop(e,2),d,a)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,o){var c,d;super.updateState(e,o),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let a=this.dataPatched;if(((c=e.geometry)==null?void 0:c.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=o.shared.material(e.material).getFlavor(a.flatShading,a.side,a.wireframe),o.scene.markNeedsUpdateRendererDirty()),(((d=e.geometry)==null?void 0:d.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(g=>o.shared.material(g).getFlavor(a.flatShading,a.side,a.wireframe)),o.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[o.shared.material(e.material).getFlavor(a.flatShading,a.side,a.wireframe)],o.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let g=0;g<this.material.length;g++)this.material[g]=this.material[g].getFlavor(a.flatShading,a.side,a.wireframe);else this.material=this.material.getFlavor(a.flatShading,a.side,a.wireframe)}disposeMaterial(){this.material&&xv(this.material).forEach(e=>{e instanceof Wn&&(e instanceof $c||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},TR=new _,MR=new Ke,CR=new Ke,$Y=new _,PR=new ce$1,ur=class extends Ps{constructor(e,o,a){super(e,o),this.data=o,this.isSkinnedMesh=!1,this.localGeometry=void 0,o.bindMode&&o.bindMatrix&&(this.bindMode=o.bindMode,this.bindMatrix=new ce$1().fromArray(o.bindMatrix),this.bindMatrixInverse=new ce$1)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Pe&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof eu){let e=this.geometryCreateDeleyed,o=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=o.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return om.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return om.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,o,a){super.updateByPatchedOp(e,o,a),Rt(e.path,["geometry"])&&this.updateByPatchedOpGeometry(Fr$1.drop(e,1),o.geometry,a)}removeInteractionGeometry(e){var o;(o=this.localGeometry)==null||o.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,o){var c;this.invalidateDownstreamBooleanData();let a=this.data.geometry.type;if(a==="NonParametricGeometry"||a==="SubdivGeometry"){let d=e;if(this.localGeometry===void 0){let _e={...this.data.geometry,...d};this.localGeometry=Va(_e,o,this.data.flatShading,this)}let g,b,j;d.scaleBaked?[g,b,j]=d.scaleBaked:{width:g,height:b,depth:j}=d;let $=this.localGeometry.userData;$.sxPrev!==void 0&&Mm(this.localGeometry.attributes,g/$.sxPrev,b/$.syPrev,j/$.szPrev),$.sxPrev=g,$.syPrev=b,$.szPrev=j}else{let d={...this.data.geometry,...e};(c=this.localGeometry)==null||c.dispose(),this.localGeometry=Va(d,o,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let o of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(o.object)}refreshAttachedPaths(e){for(let o of this.attachedPaths)e.scene.addPendingCommand(()=>o.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,o,a){var d;let c=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof ai&&this.chooseGeoemtryCache(a.shared).mutateIfUnique(this.geometryCreateDeleyed.data,o)===this.geometryCreateDeleyed&&(c=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(o,e.props.scaleBaked),this.refreshAttachedCloners(a),this.refreshAttachedPaths(a)),c||((d=a.scene)==null||d.markGeometryCacheDirty(),this.createGeometryDelayed(a)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,o){this.createGeometryDelayed(o)}updateState(e,o){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,o),super.updateState(e,o)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,o){let a=this.geometry.userData.parameters;this.is2DType?e.set(0,0,a.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),o.set(a.width,a.height,a.depth??0).multiplyScalar(.5)):e.setScalar(0),o.set(a.width,a.height,a.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,o){this.skeleton=e,this.isSkinnedMesh=!0,o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let o=new Ke,a=this.geometry.attributes.skinWeight;for(let c=0,d=a.count;c<d;c++){o.fromBufferAttribute(a,c);let g=1/o.manhattanLength();g!==1/0?o.multiplyScalar(g):o.set(1,0,0,0),a.setXYZW(c,o.x,o.y,o.z,o.w)}}boneTransform(e,o){let a=this.skeleton;if(a===void 0)return;let c=this.geometry;MR.fromBufferAttribute(c.attributes.skinIndex,e),CR.fromBufferAttribute(c.attributes.skinWeight,e),TR.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let d=0;d<4;d++){let g=CR.getComponent(d);if(g!==0){let b=MR.getComponent(d);PR.multiplyMatrices(a.bones[b].matrixWorld,a.boneInverses[b]),o.addScaledVector($Y.copy(TR).applyMatrix4(PR),g)}}return o.applyMatrix4(this.bindMatrixInverse)}};function eX(e){var b,j;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let o=new Map,a=e.geometry.attributes,c=a.position.array,d=a.normal.array,g=new Float32Array(c.length);for(let $=0;$<c.length;$+=3){let _e=`${c[$]}_${c[$+1]}_${c[$+2]}`,st=new _(d[$],d[$+1],d[$+2]);o.has(_e)?(b=o.get(_e))==null||b.normals.push(st):o.set(_e,{normals:[st],result:new _})}o.forEach(($,_e)=>{for(let st of $.normals)$.result.add(st);$.result.divideScalar($.normals.length)});for(let $=0;$<c.length;$+=3){let _e=`${c[$]}_${c[$+1]}_${c[$+2]}`,st=(j=o.get(_e))==null?void 0:j.result;st&&(g[$]=st.x,g[$+1]=st.y,g[$+2]=st.z)}e.geometry.setAttribute("extrudeNormal",new Te(g,3))}function tX(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let o=e.geometry.attributes.position.array,a=new Float32Array(o.length),c=new _;for(let d=0;d<o.length;d+=3)c.set(o[d],o[d+1],o[d+2]).normalize(),a[d]=c.x,a[d+1]=c.y,a[d+2]=c.z;e.geometry.setAttribute("extrudeNormal",new Te(a,3))}function pf(e){if(Array.isArray(e.material)){for(let o of e.material)if(o.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Wn)||e.material.getLayersOfType("outline").length===0)return;e instanceof ur&&e.is2DAndNoDepth?tX(e):eX(e)}function mf(e){if(!e.geometry.attributes.position)return;let o=e.geometry.attributes.position.array,a=new Float32Array(o.length),c=parseInt(e.uuid.replace(/\D/g,"")),d=[Me.seededRandom(c),Me.seededRandom(c+1e4),Me.seededRandom(c+2e4)];for(let g=0;g<o.length;g++)a[g]=d[g%3];e.geometry.setAttribute("randomColor",new Xe(a,3))}var Yo=new Wt,Um=new _;function DR(e){let o=!1;return e.scene.objects.traverse((a,c)=>{c.type==="Mesh"&&c.geometry.type==="SubdivGeometry"&&(o=!0)}),o}var ao=class extends ur{constructor(e,o,a){super(e,o,a),this.data=o,this.hiddenMatrixOld=new ce$1,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,o){let a=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),o.set(a.width,a.height,a.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var g,b,j;if(this.skipReactionUpdate===!0)return;let o=(g=this.localGeometry)==null?void 0:g.uuid,{originalGeometry:a,subdividedGeometry:c,subdivPointer:d}=ai.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=d,a!==void 0&&((b=this.originalGeometry)==null||b.dispose(),this.originalGeometry=a),c!==void 0&&((j=this.subdividedGeometry)==null||j.dispose(),this.subdividedGeometry=c??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,pf(this),mf(this),this.calcBoundingBox(),o&&(this.localGeometry.uuid=o)}updateState(e,o){if(super.updateState(e,o),e.flatShading!==void 0){let a=this.material;this.material=Array.isArray(a)?a.map(c=>c.getFlavor(!1,c.side,c.wireframe)):a.getFlavor(!1,a.side,a.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(o)}}updateMesh(e=!1){ai.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&ai.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=ai.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ai.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,o){let a=this.localGeometry;this.localGeometry=this.originalGeometryNew,pr.prototype.raycast.call(this,e,o),this.localGeometry=a}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Br,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let o=e.attributes.position,a=e.boundingSphere.center;Yo.setFromBufferAttribute(o),Yo.getCenter(a),e.boundingSphere.radius=a.distanceTo(Yo.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Yo.getSize(Um),this.hasNonUniformScale&&Um.divide(this.scale);let c={width:Um.x,height:Um.y,depth:Um.z};return this.geometry.userData.parameters=c,c}updateBoundingSphere(e){let o=this.originalGeometry;Yo.min.set(e[0],e[2],e[4]),Yo.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Yo.min.applyMatrix4(this.shearScaleInv),Yo.max.applyMatrix4(this.shearScaleInv)),o.boundingSphere===null&&(o.boundingSphere=new Br);let a=o.boundingSphere.center;Yo.getCenter(a),o.boundingSphere.radius=a.distanceTo(Yo.max)}freeSubdivPointer(){var e,o;this.subdivPointer&&(ai.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(o=this.subdividedGeometry)==null||o.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,o,a){super.updateByPatchedOpGeometry(e,o,a),this.localGeometry&&this.createGeometryByControls(o)}},OR=-1,rX=1,IR={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},RR={polygon_center:0,edge:1,vertex:2},Gm=(e,o)=>(a,c)=>!o||a===0||e===0?0:e*c/100,xt=(e,o)=>{let a=Math.abs(o),c=a*-1;return(e-OR)*(a-c)/(rX-OR)+c};function LR(e){let o=[],a={};for(var c=0,d=e.length;c<d;c++){var g=JSON.stringify(e[c].pos.map(b=>Math.round(b*1e4)/1e4));a[g]||(o.push(e[c]),a[g]=!0)}return o}var iX=new _,px$1=new _,nX=new _,sX=new _;function gf(e,o){let a=nX.fromArray(e),c=sX.fromArray(o);px$1.copy(c).sub(a);let d=px$1.length();return px$1.normalize().multiplyScalar(d*.5),iX.copy(a).add(px$1).toArray()}var Ds=new Dr$1,mx=new _,gx=new _,tu=new _;function BR(e){let o=[];for(let a=0;a<=e.index.count;a++)if(mx.fromArray(e.index.array,a*3),Ds.setFromAttributeAndIndices(e.attributes.position,mx.x,mx.y,mx.z),Ds.getNormal(gx),Ds.getMidpoint(tu),!(isNaN(tu.x)||isNaN(tu.y)||isNaN(tu.z))){let{a:c,b:d,c:g}=Ds,b=c.toArray(),j=d.toArray(),$=g.toArray(),_e=c.distanceTo(d),st=d.distanceTo(g),rt=g.distanceTo(c),ut=gf(b,j),gt=gf(j,$),yt=gf($,b),wt=[_e,st,rt],Ct=Math.max(...wt),Pt=wt.filter(kt=>Math.round(kt)===Math.round(Ct)).length>1,At=[],Tt=Ds.getMidpoint(tu).toArray();Ct===_e&&!Pt&&(At=[gt,yt,yt],Tt=ut),Ct===st&&!Pt&&(At=[ut,yt,yt],Tt=gt),Ct===rt&&!Pt&&(At=[ut,gt,gt],Tt=yt),Pt&&(At=[ut,gt,yt]),o.push({vertices:[b,j,$],faceCenters:At,midpoint:Tt,norm:Ds.getNormal(gx).toArray()})}return o}function NR(e){let o=[],{position:a}=e.attributes;for(let c=0;c<a.count;c++){Ds.setFromAttributeAndIndices(a,c*3,c*3+1,c*3+2),Ds.getNormal(gx),Ds.getMidpoint(tu);let d=Ds.a.toArray(),g=Ds.b.toArray(),b=Ds.c.toArray();o.push({vertices:[d,g,b],faceCenters:[gf(d,g),gf(g,b),gf(b,d)],midpoint:tu.toArray(),norm:gx.toArray()})}return o}var oX=4,aX=.5,w_=e=>.5*(1-Math.cos(e*Math.PI)),A_=class{constructor(){this.perlin=new Array(4096)}noise(e,o=0,a=0){if(this.perlin==null){this.perlin=new Array(4096);for(let Ct=0;Ct<4096;Ct++)this.perlin[Ct]=Math.random()}e<0&&(e=-e),o<0&&(o=-o),a<0&&(a=-a);let c=Math.floor(e),d=Math.floor(o),g=Math.floor(a),b=e-c,j=o-d,$=a-g,_e,st,rt=0,ut=.5,gt,yt,wt;for(let Ct=0;Ct<oX;Ct++){let Pt=c+(d<<4)+(g<<8);_e=w_(b),st=w_(j),gt=this.perlin[Pt&4095],gt+=_e*(this.perlin[Pt+1&4095]-gt),yt=this.perlin[Pt+16&4095],yt+=_e*(this.perlin[Pt+16+1&4095]-yt),gt+=st*(yt-gt),Pt+=256,yt=this.perlin[Pt&4095],yt+=_e*(this.perlin[Pt+1&4095]-yt),wt=this.perlin[Pt+16&4095],wt+=_e*(this.perlin[Pt+16+1&4095]-wt),yt+=st*(wt-yt),gt+=w_($)*(yt-gt),rt+=gt*ut,ut*=aX,c<<=1,b*=2,d<<=1,j*=2,g<<=1,$*=2,b>=1&&(c++,b--),j>=1&&(d++,j--),$>=1&&(g++,$--)}return rt}noiseSeed(e){let o=(()=>{let a,c;return{setSeed(d){c=a=(d??Math.random()*4294967296)>>>0},getSeed(){return a},rand(){return c=(1664525*c+1013904223)%4294967296,c/4294967296}}})();o.setSeed(e),this.perlin=new Array(4096);for(let a=0;a<4096;a++)this.perlin[a]=o.rand()}},FR=A_,kR=new _,VR=new ce$1,zR=new qs;function __(e){let o=!1;return e.scene.objects.traverse((a,c)=>{c.type==="Mesh"&&c.geometry.type==="TextGeometry"&&(o=!0)}),o}var yf=class extends ur{constructor(e,o,a){super(e,o,a),this.data=o}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var o;let e=this.dataPatched;return((o=this.font)==null?void 0:o.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,o){let{matrixWorld:a}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(VR.copy(a).invert(),zR.copy(e.ray).applyMatrix4(VR),zR.intersectBox(this.singleBBox,kR))){let c=kR.applyMatrix4(a),d=e.ray.origin.distanceTo(c);o.push({distance:d,point:c.clone(),object:this})}}},In=1e-4,Xo,jR,HR,WR,UR=new _,GR=new _;q0.then(e=>{Xo=e,jR=[Xo.get_face_center,Xo.get_edge_midpoint,Xo.get_vertex_position],HR=[Xo.get_face_normal,Xo.get_edge_normal,Xo.get_vertex_normal],WR=[Xo.face_count,Xo.edge_count,Xo.vertex_count]});var lX=new ce$1,cX=new ce$1,Kl=new _,ru=new _,jm=new _,E_=new _,uX=new _,hX=new _,Ha=new FR,Ji=class extends Md(_t){constructor(e,o){super(),this.parameters=o,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let o of this.children)o instanceof Vr&&o.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(o=>{o instanceof Vr&&o.object===e&&(o.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let o;if(e!==void 0?o=e:o=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(o=0),this.parameters.type==="toObject"&&this.objectForSample){for(let c=0,d=this.children.length;c<d;++c)this.remove(this.children[0]);let a=this.children;if(a.length===o)return;if(a.length<o)for(let c=0,d=o-a.length;c<d;++c){let g=new Vr(this.object);g.expand(),this.add(g)}else for(let c=0,d=a.length-o;c<d;++c)this.remove(a[c])}else{if(this.children.length===o)return;if(this.children.length<o)for(let a=0,c=o-this.children.length;a<c;++a){let d=new Vr(this.object);d.expand(),this.add(d)}else for(let a=0,c=this.children.length-o;a<c;++a)this.remove(this.children[0])}}_updateRadial(e){let o=e.radial,a=o.start*Me.DEG2RAD,c=o.end*Me.DEG2RAD,d=a-c,g=new or$1(o.rotation[0],o.rotation[1],o.rotation[2]),b;switch(o.axis){case"z":b=new _(0,0,1);break;case"y":b=new _(0,1,0);break;default:case"x":b=new _(1,0,0);break}let j=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,$=j.noiseType==="perlin";Ha.noiseSeed(j.seed);let _e=M0((0,vf.default)(j.seed)),st=Gm(j.strength,this.parameters.randomness);for(let[rt,ut]of this.children.entries()){let gt=rt*(j.freqScale/10)+j.movement,yt=$?Ha.noise(gt):_e(gt,gt),wt=rt+1;ut.scale.x=o.scale[0]+st(wt,xt(yt,j.scale[0]))||In,ut.scale.y=o.scale[1]+st(wt,xt(yt,j.scale[1]))||In,ut.scale.z=o.scale[2]+st(wt,xt(yt,j.scale[2]))||In,ut.position.setScalar(0);let Ct=d/e.count*rt-a;switch(o.axis){case"x":ut.rotation.set(0,Ct,0);break;case"y":ut.rotation.set(0,0,Ct);break;case"z":ut.rotation.set(Ct,0,0);break}ut.translateOnAxis(b,o.radius),ut.position.x+=o.position[0]+st(wt,xt(yt,j.position[0])),ut.position.y+=o.position[1]+st(wt,xt(yt,j.position[1])),ut.position.z+=o.position[2]+st(wt,xt(yt,j.position[2]));let Pt=st(wt,xt(yt,j.rotation[0])),At=st(wt,xt(yt,j.rotation[1])),Tt=st(wt,xt(yt,j.rotation[2]));o.alignment===!0?(ut.rotation.x+=g.x+Pt,ut.rotation.y+=g.y+At,ut.rotation.z+=g.z+Tt):ut.rotation.set(g.x+Pt,g.y+At,g.z+Tt)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let o=e.linear,a=new or$1(o.rotation[0],o.rotation[1],o.rotation[2]),c=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,d=c.noiseType==="perlin";Ha.noiseSeed(c.seed);let g=M0((0,vf.default)(c.seed)),b=Gm(c.strength,this.parameters.randomness);for(let[j,$]of this.children.entries()){let _e=j*(c.freqScale/10)+c.movement,st=d?Ha.noise(_e):g(_e,_e),rt=j+1,ut=b(rt,xt(st,c.rotation[0])),gt=b(rt,xt(st,c.rotation[1])),yt=b(rt,xt(st,c.rotation[2]));$.scale.x=1+(o.scale[0]-1)*j+b(rt,xt(st,c.scale[0]))||In,$.scale.y=1+(o.scale[1]-1)*j+b(rt,xt(st,c.scale[1]))||In,$.scale.z=1+(o.scale[2]-1)*j+b(rt,xt(st,c.scale[2]))||In,$.rotation.x=a.x*j+ut,$.rotation.y=a.y*j+gt,$.rotation.z=a.z*j+yt,$.position.x=o.position[0]*j+b(rt,xt(st,c.position[0])),$.position.y=o.position[1]*j+b(rt,xt(st,c.position[1])),$.position.z=o.position[2]*j+b(rt,xt(st,c.position[2]))}}_updateGrid(e){let o=0,a=e.grid,c=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,d=Gm(c.strength,this.parameters.randomness),g=c.noiseType==="perlin";Ha.noiseSeed(c.seed);let b=DO((0,vf.default)(c.seed));if(a.useCenter===!0){let j={x:a.count[0]%2===0?2:1,y:a.count[1]%2===0?2:1,z:a.count[2]%2===0?2:1},$=new _(a.size[0]*(a.count[0]-j.x)*.5,a.size[1]*(a.count[1]-j.y)*.5,a.size[2]*(a.count[2]-j.z)*.5);for(let _e=0;_e<a.count[0];_e++)for(let st=0;st<a.count[1];st++)for(let rt=0;rt<a.count[2];rt++){let ut=[(_e+1)*(c.freqScale/10)+c.movement,(st+1)*(c.freqScale/10)+c.movement,(rt+1)*(c.freqScale/10)+c.movement],gt=g?Ha.noise(...ut):b(...ut),yt=this.children[o++];yt.scale.x=1+d(o,xt(gt,c.scale[0]))||In,yt.scale.y=1+d(o,xt(gt,c.scale[1]))||In,yt.scale.z=1+d(o,xt(gt,c.scale[2]))||In;let wt=d(o,xt(gt,c.rotation[0])),Ct=d(o,xt(gt,c.rotation[1])),Pt=d(o,xt(gt,c.rotation[2]));yt.rotation.set(wt,Ct,Pt),yt.position.x=a.size[0]*_e-$.x+d(o,xt(gt,c.position[0])),yt.position.y=a.size[1]*st-$.y+d(o,xt(gt,c.position[1])),yt.position.z=a.size[2]*rt-$.z+d(o,xt(gt,c.position[2]))}}else for(let j=0;j<a.count[0];j++)for(let $=0;$<a.count[1];$++)for(let _e=0;_e<a.count[2];_e++){let st=[(j+1)*(c.freqScale/10)+c.movement,($+1)*(c.freqScale/10)+c.movement,(_e+1)*(c.freqScale/10)+c.movement],rt=g?Ha.noise(...st):b(...st),ut=this.children[o++];ut.scale.x=1+d(o,xt(rt,c.scale[0]))||In,ut.scale.y=1+d(o,xt(rt,c.scale[1]))||In,ut.scale.z=1+d(o,xt(rt,c.scale[2]))||In;let gt=d(o,xt(rt,c.rotation[0])),yt=d(o,xt(rt,c.rotation[1])),wt=d(o,xt(rt,c.rotation[2]));ut.rotation.set(gt,yt,wt),ut.position.x=a.size[0]*j+d(o,xt(rt,c.position[0])),ut.position.y=-a.size[1]*$+d(o,xt(rt,c.position[1])),ut.position.z=-a.size[2]*_e+d(o,xt(rt,c.position[2]))}}_updateToObject(e){var wt;if(e.type!=="toObject")throw new Error;let{toObject:o}=e,a=new or$1(o.rotation[0],o.rotation[1],o.rotation[2]),c=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,d=c.noiseType==="perlin";Ha.noiseSeed(c.seed);let g=M0((0,vf.default)(c.seed)),b=Gm(c.strength,this.parameters.randomness);if(!o.object){for(let[,Ct]of this.children.entries())Ct.position.set(0,0,0),Ct.scale.setScalar(1),Ct.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof yf)if(!((wt=this.objectForSample.font)!=null&&wt.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let j=this.getSubdivData(),$=[],_e=Ct=>{let Pt=Ct.length,At=Ct.map(It=>It[0]).reduce((It,Lt)=>It+Lt,0),Tt=Ct.map(It=>It[1]).reduce((It,Lt)=>It+Lt,0),kt=Ct.map(It=>It[2]).reduce((It,Lt)=>It+Lt,0);return[At/Pt,Tt/Pt,kt/Pt]},st=Ct=>Math.round(Ct*1e6)/1e6;j.forEach(Ct=>{let Pt=j.filter(At=>st(Ct.pos[0])===st(At.pos[0])&&st(Ct.pos[1])===st(At.pos[1])&&st(Ct.pos[2])===st(At.pos[2]));Pt.length>1?$.push({pos:Ct.pos,norm:_e(Pt.map(At=>At.norm))}):$.push(Ct)});let rt=LR($);if(rt.length>0){let Ct=Math.round(rt.length*o.count/100);this._updateCount(Ct)}else{let Ct=this.objectForSample.geometry.getAttribute("position");if(!Ct||isNaN(Ct.count)||Ct.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let ut=new C0(this.objectForSample).build(),gt=IR[o.axis],yt=this.children;ut.setRandomGenerator((0,vf.default)(this.object.uuid+o.seed));for(let[Ct,Pt]of yt.entries()){let At=Ct*(c.freqScale/10)+c.movement,Tt=d?Ha.noise(At):g(At,At),kt=Ct+1,It=b(kt,xt(Tt,c.rotation[0])),Lt=b(kt,xt(Tt,c.rotation[1])),Ft=b(kt,xt(Tt,c.rotation[2]));o.spreadType==="random"?ut.sample(jm,E_):(rt.length&&(jm.fromArray(rt[Ct].pos),E_.fromArray(rt[Ct].norm)),this.objectForSample instanceof ao&&jm.applyMatrix4(lX.copy(this.objectForSample.matrixWorld).invert())),jm.applyMatrix4(this.object.hiddenMatrix.clone().invert()),Pt.position.copy(jm),Kl.fromArray(gt);let Nt=o.align==="normal"?E_:this.object.getWorldDirection(hX),Ht=ru.fromArray(o.position);ru.x+=ru.x+b(kt,xt(Tt,c.position[0])),ru.y+=ru.y+b(kt,xt(Tt,c.position[1])),ru.z+=ru.z+b(kt,xt(Tt,c.position[2]));let dr=Math.acos(Nt.dot(Kl)),hs=uX.crossVectors(Kl,Nt).normalize(),us=cX.makeRotationAxis(hs,dr),hn=Nt.clone().cross(this.object.up).normalize(),un=hn.clone().cross(Nt).normalize(),bo=new ce$1().makeBasis(hn,Nt,un),_s=new _(Kl.y,Kl.z,Kl.x).normalize(),gn=_s.clone().cross(Kl).normalize(),Gr=new ce$1().makeBasis(_s,Kl,gn).invert(),ds=new ce$1().multiplyMatrices(bo,Gr);Pt.rotation.setFromRotationMatrix(ds),Ht.applyMatrix4(us),Pt.position.add(Ht),Pt.rotation.x=Pt.rotation.x+a.x+It,Pt.rotation.y=Pt.rotation.y+a.y+Lt,Pt.rotation.z=Pt.rotation.z+a.z+Ft,Pt.scale.setScalar(1),Pt.scale.x=Pt.scale.x+o.scale[0]+b(kt,xt(Tt,c.scale[0]))||In,Pt.scale.y=Pt.scale.y+o.scale[1]+b(kt,xt(Tt,c.scale[1]))||In,Pt.scale.z=Pt.scale.z+o.scale[2]+b(kt,xt(Tt,c.scale[2]))||In,Pt.scale.multiply(this.object.scale),Pt.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof ao){let o=this.objectForSample,a=RR[e],c=WR[a],d=jR[a],g=HR[a],b=[],j=c(o.subdivPointerNew);for(let $=0;$<=j-1;$++){let _e=d(o.subdivPointerNew,$),st=g(o.subdivPointerNew,$);UR.fromArray(_e).applyMatrix4(o.matrixWorld),GR.fromArray(st),b.push({pos:UR.toArray(),norm:GR.toArray()})}return b}else return(this.objectForSample.geometry.index?BR(this.objectForSample.geometry):NR(this.objectForSample.geometry)).map((o,a)=>e==="polygon_center"?{pos:o.midpoint,norm:o.norm}:e==="vertex"?[{pos:o.vertices[0],norm:o.norm},{pos:o.vertices[1],norm:o.norm},{pos:o.vertices[2],norm:o.norm}]:e==="edge"?[{pos:o.faceCenters[0],norm:o.norm},{pos:o.faceCenters[1],norm:o.norm},{pos:o.faceCenters[2],norm:o.norm}]:[]).flat()}updateState(e,o){var a;if(this.parameters=Ea(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(a=this.object.parent)==null||a.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let c=o.find(this.parameters.toObject.object);c instanceof pr?this.objectForSample=c:this.objectForSample=void 0,this.matrix=new ce$1,this.hiddenMatrix=new ce$1,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,c&&c.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Qo=e=>{var o;return o=class extends e{},o.geometryHelper=new vi(30,30,30),o},yx=new qs,T_=new Br,qR=new ce$1,Ko=(e,o,a,c,d=!1)=>{let g=o,b=e.matrixWorld;if(g.boundingSphere===null&&g.computeBoundingSphere(),T_.copy(g.boundingSphere),T_.applyMatrix4(b),a.ray.intersectsSphere(T_)===!1||(qR.copy(b).invert(),yx.copy(a.ray).applyMatrix4(qR),g.boundingBox!==null&&yx.intersectsBox(g.boundingBox)===!1))return;let j,$,_e,st,rt=g.index,ut=g.attributes.position,gt=g.drawRange,yt,wt;if(d===!1){let Pt=Math.max(0,gt.start),At=Math.min(rt.count,gt.start+gt.count);for(yt=Pt,wt=At;yt<wt;yt+=3)if($=rt.getX(yt),_e=rt.getX(yt+1),st=rt.getX(yt+2),j=Ct(e,a,yx,ut,$,_e,st),j){j.faceIndex=Math.floor(yt/3),c.push(j);return}}else{let Pt=g.attributes.position,At=new _,Tt=new _,kt=new _,It=new _,Lt=2,Ft=1/((e.scale.x+e.scale.y+e.scale.z)/3),Nt=Ft*Ft,Ht=Math.max(0,gt.start),dr=Math.min(Pt.count,gt.start+gt.count);for(let hs=Ht,us=dr-1;hs<us;hs+=Lt){if(At.fromBufferAttribute(Pt,hs),Tt.fromBufferAttribute(Pt,hs+1),yx.distanceSqToSegment(At,Tt,It,kt)>Nt)continue;It.applyMatrix4(e.matrixWorld);let hn=a.ray.origin.distanceTo(It);hn<a.near||hn>a.far||c.push({distance:hn,point:kt.clone().applyMatrix4(e.matrixWorld),object:e})}}function Ct(Pt,At,Tt,kt,It,Lt,Ft){let Nt=new _,Ht=new _,dr=new _,hs=new _,us=new _;if(Nt.fromBufferAttribute(kt,It),Ht.fromBufferAttribute(kt,Lt),dr.fromBufferAttribute(kt,Ft),Tt.intersectTriangle(Nt,Ht,dr,!1,hs)===null)return null;us.copy(hs),us.applyMatrix4(Pt.matrixWorld);let hn=At.ray.origin.distanceTo(us);return hn<At.near||hn>At.far?null:{faceIndex:1,distance:hn,point:us.clone(),object:Pt}}},vx=new _,Os=new rs,M_=class extends hl{constructor(e){let o=new Pe,a=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),c=[],d=[],g={},b=new We(15711266),j=new We(15711266),$=new We(2857471);_e("n1","n2",b),_e("n2","n4",b),_e("n4","n3",b),_e("n3","n1",b),_e("f1","f2",b),_e("f2","f4",b),_e("f4","f3",b),_e("f3","f1",b),_e("n1","f1",b),_e("n2","f2",b),_e("n3","f3",b),_e("n4","f4",b),_e("p","n1",j),_e("p","n2",j),_e("p","n3",j),_e("p","n4",j),_e("u1","u2",$),_e("u2","u3",$),_e("u3","u1",$);function _e(rt,ut,gt){st(rt,gt),st(ut,gt)}function st(rt,ut){c.push(0,0,0),d.push(ut.r,ut.g,ut.b),g[rt]===void 0&&(g[rt]=[]),g[rt].push(c.length/3-1)}o.setAttribute("position",new Te(c,3)),o.setAttribute("color",new Te(d,3)),super(o,a),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=g,this.update()}update(){let e=this.geometry,o=this.pointMap;Os.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let a=1,c=1,d=.8;lo("n1",o,e,Os,-a,-c,d),lo("n2",o,e,Os,a,-c,d),lo("n3",o,e,Os,-a,c,d),lo("n4",o,e,Os,a,c,d);let g=d;lo("f1",o,e,Os,-a,-c,g),lo("f2",o,e,Os,a,-c,g),lo("f3",o,e,Os,-a,c,g),lo("f4",o,e,Os,a,c,g);let b=g,j=.5;lo("u1",o,e,Os,a*.7*j,c*1.1,b),lo("u2",o,e,Os,-a*.7*j,c*1.1,b),lo("u3",o,e,Os,0,c*(1.1+.9*j),b),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function lo(e,o,a,c,d,g,b){vx.set(d,g,b).unproject(c);let j=o[e];if(j!==void 0){let $=a.getAttribute("position");for(let _e=0,st=j.length;_e<st;_e++)$.setXYZ(j[_e],vx.x,vx.y,vx.z)}}var xx=class extends Qo(M_){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,o){Ko(this.object,this.geometry,e,o,!0)}},bx;(e=>e.is=o=>"objectHelper"in o)(bx||(bx={}));var Is=(e,o)=>class extends Pd(e){constructor(){super(...arguments),this.objectHelper=new o(this),this.gizmos={}}get geometryHelper(){return o.geometryHelper}raycast(a,c){this.objectHelper.raycast(a,c)}showGizmos(){for(let a in this.gizmos){let c=this.gizmos[a];c instanceof vl&&(c.visible=!0)}}updateEntityBoxSize(a,c){this.objectHelper.visible&&this.geometryHelper instanceof vi?(a.setScalar(0),c.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(a,c)}hideGizmos(){for(let a in this.gizmos){let c=this.gizmos[a];c instanceof vl&&(c.visible=!1)}}},Sx=790,xf=new _,C_=new _,P_=new Qe,D_=new _,Hm=new _,O_=new _,wr$1=class extends Is(rs,xx){constructor(o="",a={...Vc.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Il.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(o,a),this.previousProjectionMatrix=new ce$1,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let c=this.width,d=this.height;this.orthoCamera=new Wu(c*-.5,c*.5,d*.5,d*-.5,-5e4,1e4),this.perspCamera=new ri(45,c/d,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(o){this.perspCamera.fov=o}get fov(){return this.perspCamera.fov}setNear(o,a){o==="PerspectiveCamera"?this.perspCamera.near=a:this.orthoCamera.near=a}setZoom(o,a){a>=0&&(o==="PerspectiveCamera"?this.perspCamera.zoom=a:this.orthoCamera.zoom=a)}set cameraType(o){o==="PerspectiveCamera"?this.toPerspective():o==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(o){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=o:this.orthoCamera.near=o}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(o){o>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=o:this.orthoCamera.zoom=o)}lookAt(o,a,c){typeof o=="number"&&(o=new _(o,a,c)),super.lookAt(o),this.getWorldPosition(xf),this.targetOffset=xf.distanceTo(o)}getTarget(o=new _){return this.getWorldDirection(C_),this.getWorldPosition(xf),C_.multiplyScalar(this.targetOffset),o.copy(xf).add(C_),o}getDistanceToTarget(){let o=this.getTarget();return this.getWorldPosition(xf),xf.distanceTo(o)}updateUp(){this.getWorldQuaternion(P_),D_.set(0,0,1).applyQuaternion(P_),Hm.copy(_t.DEFAULT_UP),this.isUpVectorFlipped&&Hm.negate(),Hm.applyQuaternion(P_),O_.copy(_t.DEFAULT_UP).projectOnPlane(D_),this.angleOffsetFromUp=O_.angleTo(Hm),this.angleOffsetFromUp*=O_.cross(Hm).dot(D_)>=0?1:-1}updateTransformState(o,a){let c=super.updateTransformState(o,a);return o.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=o.isUpVectorFlipped),this.updateUp(),c}getViewFrontToObject(o){let a=o.getWorldPosition(new _),c=o.getWorldDirection(new _).multiplyScalar(this.targetOffset);return{position:a.clone().add(c),target:a}}getViewToTarget(o){let a=this.getWorldDirection(new _).multiplyScalar(this.targetOffset);return{position:o.clone().sub(a),target:o}}getViewToObject(o){let a=new _;return o.getWorldPosition(a),this.getViewToTarget(a)}setViewplaneSize(o,a,c=!1){if(this.aspect=o/a,c){let d=o>a?this.aspect:1,g=o>a?1:this.aspect;this.left=-Sx*.5*d,this.right=Sx*.5*d,this.top=Sx*.5*(1/g),this.bottom=-Sx*.5*(1/g)}else this.left=-o*.5,this.right=o*.5,this.top=a*.5,this.bottom=-a*.5;this.updateProjectionMatrix()}copyViewPlaneSize(o){this.aspect=o.aspect,this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(o){this.perspCamera.setFocalLength(o),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(o,a,c,d,g,b){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(o,a,c,d,g,b):this.orthoCamera.setViewOffset(o,a,c,d,g,b)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(o){super.updateMatrixWorld(o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(o,a){super.updateWorldMatrix(o,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(o,a){return super.copy(o,a),this.parent=o.parent,this.orthoCamera.copy(o.orthoCamera),this.perspCamera.copy(o.perspCamera),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.far=o.far,this.view=o.view===null?null:Object.assign({},o.view),this._cameraType=o._cameraType,this.aspect=o.aspect,this.fov=o.fov,this.focus=o.focus,this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this.targetOffset=o.targetOffset,this.updateProjectionMatrix(),this}toCameraState(o=[]){let a={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return Vh(a,o)}updateCameraSubtype(o,a){let c=o==="perspective"?"PerspectiveCamera":"OrthographicCamera";a.zoom!==void 0&&this.setZoom(c,a.zoom),a.near!==void 0&&this.setNear(c,a.near),a.fov!==void 0&&c==="PerspectiveCamera"&&(this.fov=a.fov)}updateState(o,a){this.updateCameraState(o,a)}updateCameraState(o,a){this.updateState_Entity(o,a),o.far!==void 0&&(this.far=o.far),o.orthographic!==void 0&&this.updateCameraSubtype("orthographic",o.orthographic),o.perspective!==void 0&&this.updateCameraSubtype("perspective",o.perspective),o.type!==void 0&&(this.cameraType=o.type),o.up!==void 0&&this.up.fromArray(o.up),o.targetOffset!==void 0&&(this.targetOffset=o.targetOffset),o.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=o.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(o,a,c){super.updateByPatchedOp(o,a,c),o.path.length===1&&o.type===0&&this.updateCameraSubtype(o.path[0],o.props)}toState(o){return{...super.toState(o),...this.toCameraState(o),type:this.cameraType}}},bf=new ce$1,fX=new ce$1,wx=new ce$1,YR=new _,XR=new _;function I_(e){let o=!1;return e.scene.objects.traverse((a,c)=>{var d;((d=c.geometry)==null?void 0:d.type)==="BooleanGeometry"&&(o=!0)}),o}var qn=class extends Ps{constructor(e,o,a){super(e,o),this.data=o,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Pe,this.onAfterRender=(c,d,g,b,j,$)=>{super.onAfterRender(c,d,g,b,j,$),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,o,a){super.updateByPatchedOp(e,o,a),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,o=!0){var c;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let d=0;d<this.children.length;d++){let g=this.children[d];g instanceof qn&&g.dataPatched.visible===!0&&g.recomputeBoolean(e===!0,o)}this.meshSetAddresses=[];for(let d=0;d<this.children.length;d++){let g=this.children[d];if(g instanceof pr&&g.dataPatched.visible===!0&&((c=g.geometry.attributes.position)==null?void 0:c.count)>0&&g.geometry.drawRange.count>0&&g.booleanMeshSetAddress!==0){bf.multiplyMatrices(g.hiddenMatrix,g.matrix);try{if(g.booleanMeshSetAddress===-1){if((g.geometry.index??g.geometry.getAttribute("position")).count/3<15e5&&(g.booleanMeshSetAddress=Ms.getMeshSet(g.geometry,e===!0,o)),g.booleanMeshSetAddress===-1)return;Ms.transformMeshSet(g.booleanMeshSetAddress,bf),g.booleanMatrixInvOld.copy(bf).invert(),g.booleanWasTransformed=!1}else g instanceof qn&&g.needsTransformForDownstream===!0?(Ms.transformMeshSet(g.booleanMeshSetAddress,bf),g.needsTransformForDownstream=!1):g.booleanWasTransformed===!0&&(Ms.transformMeshSet(g.booleanMeshSetAddress,fX.multiplyMatrices(bf,g.booleanMatrixInvOld)),g.booleanMatrixInvOld.copy(bf).invert(),g.booleanWasTransformed=!1)}catch(b){console.error(b),g.booleanMeshSetAddress=0,g.geometry.userData.booleanOperationDidFail=!0;continue}Ms.hasOpenEdges(g.booleanMeshSetAddress)===!1||d===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(g.booleanMeshSetAddress),g.geometry.userData.booleanOperationDidFail=!1):g.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Te([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Ms.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let a=this.geometry;a.dispose(),this.geometry=new Pe,this.geometry.userData=a.userData,this.geometry.boundingSphere=a.boundingSphere;try{this.booleanMeshSetAddress=Ms.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(d){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(d)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,pf(this),mf(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){var o;let e=super.recursiveBBox;return((o=this.geometry.boundingSphere)==null?void 0:o.radius)===-1&&(e.getCenter(this.geometry.boundingSphere.center),wx.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(wx),YR.copy(e.max).applyMatrix4(wx),XR.copy(e.min).applyMatrix4(wx),this.geometry.boundingSphere.radius=YR.distanceTo(XR)/2),e}},Ax;(e=>{function o(a){return vt.is(a)&&a instanceof gl}e.is=o})(Ax||(Ax={}));var Sf=(e,o)=>class extends Is(e,o){updateState_Light(a,c){this.updateState_Entity(a,c),a.color!==void 0&&(this.color=c.shared.color(a.color)),a.intensity!==void 0&&(this.intensity=a.intensity),a.depth!==void 0&&(this.shadow.camera.far=a.depth,this.shadow.needsUpdate=!0),a.shadows!==void 0&&(this.castShadow=a.shadows)}},mn=e=>e instanceof pr,Rn=e=>e!==null&&e instanceof qn,QR=e=>e instanceof wr$1,KR=e=>Ax.is(e),Wm=e=>bx.is(e),Rs=class extends Qo(Uy){constructor(e,o=15){super(o),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,o){Ko(this.object,Rs.geometryHelper,e,o)}update(){}},Ls=class extends Is(ps,Rs){constructor(e,o){super(),this.super_Entity(e,o),this.objectHelper.update()}updateState(e,o){this.updateState_Entity(e,o),"buffer"in e&&Object.keys(e).length===1&&o.scene.reloadSplats()}},iu=class extends Is(ps,Rs){constructor(e,o,a){super(),this.super_Entity(e,o),this.context=a,this.objectHelper.update()}updateState(e,o){this.updateState_Entity(e,o)}},i3={RED:0,GREEN:1,BLUE:2,ALPHA:3},qm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",pX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,_x=class extends lt{constructor(e=!1,o=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new he(null),kernel16:new he(null),inputBuffer:new he(null),cocBuffer:new he(null),texelSize:new he(new z$2),scale:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:pX,vertexShader:qm}),this.toneMapped=!1,o&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,o=new Float32Array(128),a=new Float32Array(32),c=0,d=0;for(let j=0;j<80;++j){let $=j*e,_e=Math.sqrt(j)/Math.sqrt(80),st=_e*Math.cos($),rt=_e*Math.sin($);j%5===0?(a[d++]=st,a[d++]=rt):(o[c++]=st,o[c++]=rt)}let g=[],b=[];for(let j=0;j<128;)g.push(new Ke(o[j++],o[j++],o[j++],o[j++]));for(let j=0;j<32;)b.push(new Ke(a[j++],a[j++],a[j++],a[j++]));this.uniforms.kernel64.value=g,this.uniforms.kernel16.value=b}setTexelSize(e,o){this.uniforms.texelSize.value.set(e,o)}setSize(e,o){this.uniforms.texelSize.value.set(1/e,1/o)}};function ZR(e,o,a){return e*(o-a)-o}function F_(e,o,a){return Math.min(Math.max((e+o)/(o-a),0),1)}var mX=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,gX=class extends lt{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),focusDistance:new he(0),focusRange:new he(0),cameraNear:new he(.3),cameraFar:new he(1e3)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:mX,vertexShader:qm}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,o=ji){this.depthBuffer=e,this.depthPacking=o}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-ZR(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=F_(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-ZR(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=F_(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ri?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},yX=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,vX="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",JR=class extends lt{constructor(e=new z$2){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new he(null),texelSize:new he(new z$2),halfTexelSize:new he(new z$2),kernel:new he(0),scale:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:yX,vertexShader:vX}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,o){this.uniforms.texelSize.value.set(e,o),this.uniforms.halfTexelSize.value.set(e,o).multiplyScalar(.5)}setSize(e,o){let a=this.uniforms;a.texelSize.value.set(1/e,1/o),a.halfTexelSize.value.copy(a.texelSize.value).multiplyScalar(.5)}},xX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,bX=class extends lt{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new he(null),opacity:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:xX,vertexShader:qm}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},SX=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,wX=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,wf={DEPTH:0,LUMA:1,COLOR:2},AX={DISABLED:0,DEPTH:1,CUSTOM:2},_X=class extends lt{constructor(e=new z$2,o=wf.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:ba$1.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),predicationBuffer:new he(null),texelSize:new he(e)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:SX,vertexShader:wX}),this.toneMapped=!1,this.edgeDetectionMode=o}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,o=ji){this.depthBuffer=e,this.depthPacking=o}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,o){this.uniforms.texelSize.value.set(1/e,1/o)}},EX=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,TX="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",co={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},k_=class extends lt{constructor(e,o,a,c,d=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ba$1.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new z$2),texelSize:new he(new z$2),cameraNear:new he(.3),cameraFar:new he(1e3),aspect:new he(1),time:new he(0)},blending:er,depthWrite:!1,depthTest:!1,dithering:d}),this.toneMapped=!1,e&&this.setShaderParts(e),o&&this.setDefines(o),a&&this.setUniforms(a),this.adoptCameraSettings(c)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,o=ji){this.depthBuffer=e,this.depthPacking=o}setShaderParts(e){return this.fragmentShader=EX.replace(co.FRAGMENT_HEAD,e.get(co.FRAGMENT_HEAD)).replace(co.FRAGMENT_MAIN_UV,e.get(co.FRAGMENT_MAIN_UV)).replace(co.FRAGMENT_MAIN_IMAGE,e.get(co.FRAGMENT_MAIN_IMAGE)),this.vertexShader=TX.replace(co.VERTEX_HEAD,e.get(co.VERTEX_HEAD)).replace(co.VERTEX_MAIN_SUPPORT,e.get(co.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let o of e.entries())this.defines[o[0]]=o[1];return this.needsUpdate=!0,this}setUniforms(e){for(let o of e.entries())this.uniforms[o[0]]=o[1];return this}setExtensions(e){this.extensions={};for(let o of e)this.extensions[o]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ri?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,o){let a=this.uniforms;a.resolution.value.set(e,o),a.texelSize.value.set(1/e,1/o),a.aspect.value=e/o}static get Section(){return co}},MX=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,CX=class extends lt{constructor(e=!1,o=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ba$1.replace(/\D+/g,"")},uniforms:{inputBuffer:new he(null),threshold:new he(0),smoothing:new he(1),range:new he(null)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:MX,vertexShader:qm}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=o}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},PX$1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,n3={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},DX=class extends lt{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new he(e),inputBuffer:new he(null),strength:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:PX$1,vertexShader:qm}),this.toneMapped=!1,this.setColorChannel(i3.RED),this.setMaskFunction(n3.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ir$1&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},OX=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,IX="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",RX=class extends lt{constructor(e=new z$2,o=new z$2){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new he(null),searchTexture:new he(null),areaTexture:new he(null),resolution:new he(o),texelSize:new he(e)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:OX,vertexShader:IX}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,o){this.searchTexture=e,this.areaTexture=o}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let o=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=o.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=o.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let o=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=o.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=o.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let o=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=o.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(o/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,o){let a=this.uniforms;a.texelSize.value.set(1/e,1/o),a.resolution.value.set(e,o)}},LX=new rs,Zl=null;function BX(){if(Zl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),o=new Float32Array([0,0,2,0,0,2]);Zl=new Pe,Zl.setAttribute!==void 0?(Zl.setAttribute("position",new Xe(e,3)),Zl.setAttribute("uv",new Xe(o,2))):(Zl.addAttribute("position",new Xe(e,3)),Zl.addAttribute("uv",new Xe(o,2)))}return Zl}var wi=class{constructor(e="Pass",o=new Pi,a=LX){this.name=e,this.renderer=null,this.scene=o,this.camera=a,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let o=this.getFullscreenMaterial();o!==null&&(o.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let o=this.screen;o!==null?o.material=e:(o=new sr(BX(),e),o.frustumCulled=!1,this.scene===null&&(this.scene=new Pi),this.scene.add(o),this.screen=o)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,o=ji){}render(e,o,a,c,d){throw new Error("Render method not implemented!")}setSize(e,o){}initialize(e,o,a){}dispose(){for(let e of Object.keys(this)){let o=this[e];if(o!==null&&typeof o.dispose=="function"){if(o instanceof Pi||o===this.renderer)continue;this[e].dispose()}}}},Ym=class extends wi{constructor(e,o=!0){super("CopyPass"),this.fullscreenMaterial=new bX,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=o}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,o,a,c,d){this.fullscreenMaterial.inputBuffer=o.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,o){this.autoResize&&this.renderTarget.setSize(e,o)}initialize(e,o,a){a!==void 0&&(this.renderTarget.texture.type=a,a!==Ir$1?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===at&&(this.renderTarget.texture.encoding=at))}},s3=class extends wi{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,o,a,c,d){let g=e.state.buffers.stencil;g.setLocked(!1),g.setTest(!1)}},R_=new We,V_=class extends wi{constructor(e=!0,o=!0,a=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=o,this.stencil=a,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,o,a){this.color=e,this.depth=o,this.stencil=a}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,o,a,c,d){let g=this.overrideClearColor,b=this.overrideClearAlpha,j=e.getClearAlpha(),$=g!==null,_e=b>=0;$?(R_.copy(e.getClearColor(R_)),e.setClearColor(g,_e?b:j)):_e&&e.setClearAlpha(b),e.setRenderTarget(this.renderToScreen?null:o),e.clear(this.color,this.depth,this.stencil),$?e.setClearColor(R_,j):_e&&e.setClearAlpha(j)}},Jl=-1,Xn=class extends fr$2{constructor(e,o=Jl,a=Jl,c=1){super(),this.resizable=e,this.base=new z$2(1,1),this.preferred=new z$2(o,a),this.target=this.preferred,this.s=c}get width(){let{base:e,preferred:o,scale:a}=this,c;return o.width!==Jl?c=o.width:o.height!==Jl?c=Math.round(o.height*(e.width/Math.max(e.height,1))):c=Math.round(e.width*a),c}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:o,scale:a}=this,c;return o.height!==Jl?c=o.height:o.width!==Jl?c=Math.round(o.width/Math.max(e.width/Math.max(e.height,1),1)):c=Math.round(e.height*a),c}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Jl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,o){(this.base.width!==e||this.base.height!==o)&&(this.base.set(e,o),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,o){(this.preferred.width!==e||this.preferred.height!==o)&&(this.preferred.set(e,o),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Jl}},L_=!1,$R=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=o=>{if(o.isMesh){let a;if(o.material.flatShading)switch(o.material.side){case tn:a=this.materialsFlatShadedDoubleSide;break;case yi:a=this.materialsFlatShadedBackSide;break;default:a=this.materialsFlatShaded;break}else switch(o.material.side){case tn:a=this.materialsDoubleSide;break;case yi:a=this.materialsBackSide;break;default:a=this.materials;break}this.originalMaterials.set(o,o.material),o.isSkinnedMesh?o.material=a[2]:o.isInstancedMesh?o.material=a[1]:o.material=a[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let o=this.materials=[e.clone(),e.clone(),e.clone()];for(let a of o)a.uniforms=Object.assign({},e.uniforms),a.side=es;o[2].skinning=!0,this.materialsBackSide=o.map(a=>{let c=a.clone();return c.uniforms=Object.assign({},e.uniforms),c.side=yi,c}),this.materialsDoubleSide=o.map(a=>{let c=a.clone();return c.uniforms=Object.assign({},e.uniforms),c.side=tn,c}),this.materialsFlatShaded=o.map(a=>{let c=a.clone();return c.uniforms=Object.assign({},e.uniforms),c.flatShading=!0,c}),this.materialsFlatShadedBackSide=o.map(a=>{let c=a.clone();return c.uniforms=Object.assign({},e.uniforms),c.flatShading=!0,c.side=yi,c}),this.materialsFlatShadedDoubleSide=o.map(a=>{let c=a.clone();return c.uniforms=Object.assign({},e.uniforms),c.flatShading=!0,c.side=tn,c})}}render(e,o,a){let c=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,L_){let d=this.originalMaterials;this.meshCount=0,o.traverse(this.replaceMaterial),e.render(o,a);for(let g of d)g[0].material=g[1];this.meshCount!==d.size&&d.clear()}else{let d=o.overrideMaterial;o.overrideMaterial=this.material,e.render(o,a),o.overrideMaterial=d}e.shadowMap.enabled=c}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let o of e)o.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return L_}static set workaroundEnabled(e){L_=e}},NX=class extends wi{constructor(e,o,a=null){super("RenderPass",e,o),this.needsSwap=!1,this.clearPass=new V_,this.overrideMaterialManager=a===null?null:new $R(a),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let o=this.overrideMaterialManager;e!==null?o!==null?o.setMaterial(e):this.overrideMaterialManager=new $R(e):o!==null&&(o.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,o,a,c,d){let g=this.scene,b=this.camera,j=this.selection,$=b.layers.mask,_e=g.background,st=e.shadowMap.autoUpdate,rt=this.renderToScreen?null:o;j!==null&&b.layers.set(j.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(g.background=null),this.clearPass.enabled&&this.clearPass.render(e,o),e.setRenderTarget(rt),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,g,b):e.render(g,b),b.layers.mask=$,g.background=_e,e.shadowMap.autoUpdate=st}},z_=class extends wi{constructor(e,o,{resolutionScale:a=1,width:c=Xn.AUTO_SIZE,height:d=Xn.AUTO_SIZE,renderTarget:g}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new NX(e,o,new Mp({depthPacking:Mw}));let b=this.renderPass;b.skipShadowMapUpdate=!0,b.ignoreBackground=!0;let j=b.getClearPass();j.overrideClearColor=new We(16777215),j.overrideClearAlpha=1,this.renderTarget=g,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:Vt,magFilter:Vt,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let $=this.resolution=new Xn(this,c,d,a);$.addEventListener("change",_e=>this.setSize($.baseWidth,$.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,o,a,c,d){let g=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,g)}setSize(e,o){let a=this.resolution;a.setBaseSize(e,o),this.renderTarget.setSize(a.width,a.height)}},Mt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},FX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",kX="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",VX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",zX="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",UX="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",GX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",jX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",HX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",WX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",qX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",YX="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",XX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",QX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",KX="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",ZX="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",JX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",$X="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",eQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",tQ=new Map([[Mt.SKIP,null],[Mt.ADD,FX],[Mt.ALPHA,kX],[Mt.AVERAGE,VX],[Mt.COLOR_BURN,zX],[Mt.COLOR_DODGE,UX],[Mt.DARKEN,GX],[Mt.DIFFERENCE,jX],[Mt.EXCLUSION,HX],[Mt.LIGHTEN,WX],[Mt.MULTIPLY,qX],[Mt.DIVIDE,YX],[Mt.NEGATION,XX],[Mt.NORMAL,QX],[Mt.OVERLAY,KX],[Mt.REFLECT,ZX],[Mt.SCREEN,JX],[Mt.SOFT_LIGHT,$X],[Mt.SUBTRACT,eQ]]),rQ=class extends fr$2{constructor(e,o=1){super(),this.f=e,this.opacity=new he(o)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return tQ.get(this.blendFunction)}},Zo={NONE:0,DEPTH:1,CONVOLUTION:2},Jo=class extends fr$2{constructor(e,o,{attributes:a=Zo.NONE,blendFunction:c=Mt.SCREEN,defines:d=new Map,uniforms:g=new Map,extensions:b=null,vertexShader:j=null}={}){super(),this.name=e,this.renderer=null,this.attributes=a,this.fragmentShader=o,this.vertexShader=j,this.defines=d,this.uniforms=g,this.extensions=b,this.blendMode=new rQ(c),this.blendMode.addEventListener("change",$=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,o=ji){}update(e,o,a){}setSize(e,o){}initialize(e,o,a){}dispose(){for(let e of Object.keys(this)){let o=this[e];if(o!==null&&typeof o.dispose=="function"){if(o instanceof Pi||o===this.renderer)continue;this[e].dispose()}}}};function e3(e,o,a){for(let c of o){let d="$1"+e+c.charAt(0).toUpperCase()+c.slice(1),g=new RegExp("([^\\.])(\\b"+c+"\\b)","g");for(let b of a.entries())b[1]!==null&&a.set(b[0],b[1].replace(g,d))}}function iQ(e,o,a,c,d,g,b){let j=new Map([["fragment",o.getFragmentShader()],["vertex",o.getVertexShader()]]),$=j.get("fragment")!==void 0&&/mainImage/.test(j.get("fragment")),_e=j.get("fragment")!==void 0&&/mainUv/.test(j.get("fragment")),st=[],rt=[],ut=!1,gt=!1;if(j.get("fragment")===void 0)console.error("Missing fragment shader",o);else if(_e&&b&Zo.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",o);else if(!$&&!_e)console.error("The fragment shader contains neither a mainImage nor a mainUv function",o);else{let yt=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,wt=k_.Section;if(_e){let Pt=`	${e}MainUv(UV);
`;a.set(wt.FRAGMENT_MAIN_UV,a.get(wt.FRAGMENT_MAIN_UV)+Pt),ut=!0}if(j.get("vertex")!==null&&/mainSupport/.test(j.get("vertex"))){let Pt=`	${e}MainSupport(`;Pt+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(j.get("vertex"))?`vUv);
`:`);
`,a.set(wt.VERTEX_MAIN_SUPPORT,a.get(wt.VERTEX_MAIN_SUPPORT)+Pt),st=st.concat([...j.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(At=>At[1])),rt=rt.concat(st).concat([...j.get("vertex").matchAll(yt)].map(At=>At[1]))}rt=rt.concat([...j.get("fragment").matchAll(yt)].map(Pt=>Pt[1])),rt=rt.concat([...o.defines.keys()].map(Pt=>Pt.replace(/\([\w\s,]*\)/g,""))),rt=rt.concat([...o.uniforms.keys()]),o.uniforms.forEach((Pt,At)=>g.set(e+At.charAt(0).toUpperCase()+At.slice(1),Pt)),o.defines.forEach((Pt,At)=>d.set(e+At.charAt(0).toUpperCase()+At.slice(1),Pt)),e3(e,rt,d),e3(e,rt,j);let Ct=o.blendMode;if(c.set(Ct.blendFunction,Ct),$){let Pt=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,At=`${e}MainImage(color0, UV, `;b&Zo.DEPTH&&Pt.test(j.get("fragment"))&&(At+="depth, ",gt=!0),At+=`color1);
	`;let Tt=e+"BlendOpacity";g.set(Tt,Ct.opacity),At+=`color0 = blend${Ct.blendFunction}(color0, color1, ${Tt});

	`,a.set(wt.FRAGMENT_MAIN_IMAGE,a.get(wt.FRAGMENT_MAIN_IMAGE)+At),At=`uniform float ${Tt};

`,a.set(wt.FRAGMENT_HEAD,a.get(wt.FRAGMENT_HEAD)+At)}a.set(wt.FRAGMENT_HEAD,a.get(wt.FRAGMENT_HEAD)+j.get("fragment")+`
`),j.get("vertex")!==null&&a.set(wt.VERTEX_HEAD,a.get(wt.VERTEX_HEAD)+j.get("vertex")+`
`)}return{varyings:st,transformedUv:ut,readDepth:gt}}var nu=class extends wi{constructor(e,...o){super("EffectPass"),this.fullscreenMaterial=new k_(null,null,null,e),this.effects=o.sort((a,c)=>c.attributes-a.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let o=this.fullscreenMaterial;o.dithering=e,o.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,o=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>o&&console.warn("The current rendering context doesn't support more than "+o+" uniforms, but "+this.uniformCount+" were defined"),o=e.maxVaryings,this.varyingCount>o&&console.warn("The current rendering context doesn't support more than "+o+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=k_.Section,o=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),a=new Map,c=new Map,d=new Map,g=new Set,b=0,j=0,$=0,_e=!1,st=!1;for(let ut of this.effects)if(ut.blendMode.blendFunction===Mt.SKIP)$|=ut.getAttributes()&Zo.DEPTH;else if($&ut.getAttributes()&Zo.CONVOLUTION)console.error("Convolution effects cannot be merged",ut);else{$|=ut.getAttributes();let gt="e"+b++,yt=iQ(gt,ut,o,a,c,d,$);if(j+=yt.varyings.length,_e=_e||yt.transformedUv,st=st||yt.readDepth,ut.extensions!==null)for(let wt of ut.extensions)g.add(wt)}let rt=/\bblend\b/g;for(let ut of a.values()){let gt=ut.getShaderCode().replace(rt,`blend${ut.blendFunction}`);o.set(e.FRAGMENT_HEAD,o.get(e.FRAGMENT_HEAD)+gt+`
`)}$&Zo.DEPTH?(st&&o.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+o.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,_e?(o.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+o.get(e.FRAGMENT_MAIN_UV)),c.set("UV","transformedUv")):c.set("UV","vUv"),o.forEach((ut,gt,yt)=>yt.set(gt,ut.trim().replace(/^#/,`
#`))),this.uniformCount=d.size,this.varyingCount=j,this.skipRendering=b===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(o).setExtensions(g).setUniforms(d).setDefines(c)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,o=ji){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=o;for(let a of this.effects)a.setDepthTexture(e,o)}render(e,o,a,c,d){for(let g of this.effects)g.update(e,o,c);if(!this.skipRendering||this.renderToScreen){let g=this.fullscreenMaterial;g.inputBuffer=o.texture,g.time+=c,e.setRenderTarget(this.renderToScreen?null:a),e.render(this.scene,this.camera)}}setSize(e,o){this.fullscreenMaterial.setSize(e,o);for(let a of this.effects)a.setSize(e,o)}initialize(e,o,a){this.renderer=e;for(let c of this.effects)c.initialize(e,o,a),c.addEventListener("change",d=>this.handleEvent(d));this.updateMaterial(),this.verifyResources(),a!==void 0&&a!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},nQ=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Tx=class extends wi{constructor({resolutionScale:e=.5,width:o=Xn.AUTO_SIZE,height:a=Xn.AUTO_SIZE,kernelSize:c=Xm.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let d=this.resolution=new Xn(this,o,a,e);d.addEventListener("change",g=>this.setSize(d.baseWidth,d.baseHeight)),this.blurMaterial=new JR,this.ditheredBlurMaterial=new JR,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=c}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,o,a,c,d){let g=this.scene,b=this.camera,j=this.renderTargetA,$=this.renderTargetB,_e=nQ[this.kernelSize],st=this.blurMaterial,rt=o,ut,gt;for(this.fullscreenMaterial=st,ut=0,gt=_e.length-1;ut<gt;++ut){let yt=ut&1?$:j;st.kernel=_e[ut],st.inputBuffer=rt.texture,e.setRenderTarget(yt),e.render(g,b),rt=yt}this.dithering&&(st=this.ditheredBlurMaterial,this.fullscreenMaterial=st),st.kernel=_e[ut],st.inputBuffer=rt.texture,e.setRenderTarget(this.renderToScreen?null:a),e.render(g,b)}setSize(e,o){let a=this.resolution;a.setBaseSize(e,o);let c=a.width,d=a.height;this.renderTargetA.setSize(c,d),this.renderTargetB.setSize(c,d),this.blurMaterial.setSize(c,d),this.ditheredBlurMaterial.setSize(c,d)}initialize(e,o,a){a!==void 0&&(this.renderTargetA.texture.type=a,this.renderTargetB.texture.type=a,a!==Ir$1?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===at&&(this.renderTargetA.texture.encoding=at,this.renderTargetB.texture.encoding=at))}static get AUTO_SIZE(){return Xn.AUTO_SIZE}},sQ=class extends wi{constructor({width:e=Xn.AUTO_SIZE,height:o=Xn.AUTO_SIZE,renderTarget:a,luminanceRange:c,colorOutput:d}={}){super("LuminancePass"),this.fullscreenMaterial=new CX(d,c),this.needsSwap=!1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let g=this.resolution=new Xn(this,e,o);g.addEventListener("change",b=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,o,a,c,d){let g=this.fullscreenMaterial;g.inputBuffer=o.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,o){let a=this.resolution;a.setBaseSize(e,o),this.renderTarget.setSize(a.width,a.height)}initialize(e,o,a){a!==void 0&&a!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},o3=class extends wi{constructor(e,o){super("MaskPass",e,o),this.needsSwap=!1,this.clearPass=new V_(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,o,a,c,d){let g=e.getContext(),b=e.state.buffers,j=this.scene,$=this.camera,_e=this.clearPass,st=this.inverted?0:1,rt=1-st;b.color.setMask(!1),b.depth.setMask(!1),b.color.setLocked(!0),b.depth.setLocked(!0),b.stencil.setTest(!0),b.stencil.setOp(g.REPLACE,g.REPLACE,g.REPLACE),b.stencil.setFunc(g.ALWAYS,st,4294967295),b.stencil.setClear(rt),b.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?_e.render(e,null):(_e.render(e,o),_e.render(e,a))),this.renderToScreen?(e.setRenderTarget(null),e.render(j,$)):(e.setRenderTarget(o),e.render(j,$),e.setRenderTarget(a),e.render(j,$)),b.color.setLocked(!1),b.depth.setLocked(!1),b.stencil.setLocked(!1),b.stencil.setFunc(g.EQUAL,1,4294967295),b.stencil.setOp(g.KEEP,g.KEEP,g.KEEP),b.stencil.setLocked(!0)}},Yn=class extends wi{constructor(e,o="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(o)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let o=this.fullscreenMaterial.uniforms;o!==void 0&&o[e]!==void 0&&(this.inputBufferUniform=o[e])}}render(e,o,a,c,d){this.inputBufferUniform!==null&&o!==null&&(this.inputBufferUniform.value=o.texture),e.setRenderTarget(this.renderToScreen?null:a),e.render(this.scene,this.camera)}initialize(e,o,a){a!==void 0&&a!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},B_=1/1e3,oQ=1e3,a3=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*B_}getFixedDelta(){return this.fixedDelta*B_}setFixedDelta(e){return this.fixedDelta=e*oQ,this}getElapsed(){return this.elapsed*B_}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Xm={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},aQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,l3=class extends Jo{constructor({blendFunction:e=Mt.SCREEN,luminanceThreshold:o=.9,luminanceSmoothing:a=.025,resolutionScale:c=.5,intensity:d=1,width:g=Xn.AUTO_SIZE,height:b=Xn.AUTO_SIZE,kernelSize:j=Xm.LARGE}={}){super("BloomEffect",aQ,{blendFunction:e,uniforms:new Map([["map",new he(null)],["intensity",new he(d)]])}),this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new sQ({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=o,this.luminanceMaterial.smoothingFactor=a,this.blurPass=new Tx({resolutionScale:c,width:g,height:b,kernelSize:j});let $=this.blurPass.getResolution();$.addEventListener("change",_e=>this.setSize($.baseWidth,$.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,o,a){let c=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,o,c),this.blurPass.render(e,c,c)):this.blurPass.render(e,o,c)}setSize(e,o){let a=this.resolution;a.setBaseSize(e,o),this.renderTarget.setSize(a.width,a.height),this.luminancePass.resolution.copy(a)}initialize(e,o,a){this.blurPass.initialize(e,o,a),a!==void 0&&(this.renderTarget.texture.type=a,e.outputEncoding===at&&(this.renderTarget.texture.encoding=at))}},lQ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",c3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,brightness:o=0,contrast:a=0}={}){super("BrightnessContrastEffect",lQ,{blendFunction:e,uniforms:new Map([["brightness",new he(o)],["contrast",new he(a)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},cQ="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",u3=class extends Jo{constructor(e=Mt.NORMAL){super("ColorAverageEffect",cQ,{blendFunction:e})}},uQ="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",hQ="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",h3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,offset:o=new z$2(.001,5e-4)}={}){super("ChromaticAberrationEffect",uQ,{vertexShader:hQ,blendFunction:e,attributes:Zo.CONVOLUTION,uniforms:new Map([["offset",new he(o)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},dQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,d3=class extends Jo{constructor(e,{blendFunction:o=Mt.NORMAL,worldFocusDistance:a,worldFocusRange:c,focusDistance:d=0,focalLength:g=.1,focusRange:b=g,bokehScale:j=1,width:$=Xn.AUTO_SIZE,height:_e=Xn.AUTO_SIZE}={}){super("DepthOfFieldEffect",dQ,{blendFunction:o,attributes:Zo.DEPTH,uniforms:new Map([["nearColorBuffer",new he(null)],["farColorBuffer",new he(null)],["nearCoCBuffer",new he(null)],["scale",new he(1)]])}),this.camera=e,this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Yn(new gX(e));let st=this.cocMaterial;st.focusDistance=d,st.focusRange=b,a!==void 0&&(st.worldFocusDistance=a),c!==void 0&&(st.worldFocusRange=c),this.blurPass=new Tx({kernelSize:Xm.MEDIUM,width:$,height:_e});let rt=this.blurPass.getResolution();rt.addEventListener("change",gt=>this.setSize(rt.getBaseWidth(),rt.getBaseHeight())),this.maskPass=new Yn(new DX(this.renderTargetCoC.texture));let ut=this.maskPass.fullscreenMaterial;ut.maskFunction=n3.MULTIPLY,ut.colorChannel=i3.GREEN,this.bokehNearBasePass=new Yn(new _x(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Yn(new _x(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Yn(new _x(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Yn(new _x(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=j}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let o=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let a of o)a.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let o=this.camera,a=o.position.distanceTo(e);return F_(-a,o.near,o.far)}setDepthTexture(e,o=ji){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=o}update(e,o,a){let c=this.renderTarget,d=this.renderTargetCoC,g=this.renderTargetCoCBlurred,b=this.renderTargetMasked;if(this.target!==null){let j=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=j}this.cocPass.render(e,null,d),this.blurPass.render(e,d,g),this.maskPass.render(e,o,b),this.bokehFarBasePass.render(e,b,c),this.bokehFarFillPass.render(e,c,this.renderTargetFar),this.bokehNearBasePass.render(e,o,c),this.bokehNearFillPass.render(e,c,this.renderTargetNear)}setSize(e,o){let a=this.resolution;a.setBaseSize(e,o);let c=a.width,d=a.height,g=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];g.push(this.renderTargetCoC,this.renderTargetMasked),g.forEach(b=>b.setSize(e,o)),g=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],g.forEach(b=>b.setSize(c,d)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(b=>b.fullscreenMaterial.setSize(c,d))}initialize(e,o,a){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(c=>c.initialize(e,o,a)),this.blurPass.initialize(e,o,Ir$1),a!==void 0&&(this.renderTarget.texture.type=a,this.renderTargetNear.texture.type=a,this.renderTargetFar.texture.type=a,this.renderTargetMasked.texture.type=a,e.outputEncoding===at&&(this.renderTarget.texture.encoding=at,this.renderTargetNear.texture.encoding=at,this.renderTargetFar.texture.encoding=at,this.renderTargetMasked.texture.encoding=at))}};new _;new ce$1;var fQ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",f3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,hue:o=0,saturation:a=0}={}){super("HueSaturationEffect",fQ,{blendFunction:e,uniforms:new Map([["hue",new he(new _)],["saturation",new he(a)]])}),this.hue=o}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let o=Math.sin(e),a=Math.cos(e);this.uniforms.get("hue").value.set((2*a+1)/3,(-Math.sqrt(3)*o-a+1)/3,(Math.sqrt(3)*o-a+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new We;var pQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,p3=class extends Jo{constructor({blendFunction:e=Mt.SCREEN,premultiply:o=!1}={}){super("NoiseEffect",pQ,{blendFunction:e}),this.premultiply=o}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},mQ="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",m3=class extends Jo{constructor(e=30){super("PixelationEffect",mQ,{uniforms:new Map([["active",new he(!1)],["d",new he(new z$2)]])}),this.resolution=new z$2,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let o=Math.floor(e);o%2>0&&(o+=1),this.d=o,this.uniforms.get("active").value=o>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,o){this.resolution.set(e,o),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new _;new _;var t3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",r3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",gQ="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",yQ="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Wa={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Mx=class extends Jo{constructor({preset:e=Wa.MEDIUM,edgeDetectionMode:o=wf.COLOR,predicationMode:a=AX.DISABLED}={}){super("SMAAEffect",gQ,{vertexShader:yQ,blendFunction:Mt.NORMAL,attributes:Zo.CONVOLUTION|Zo.DEPTH,uniforms:new Map([["weightMap",new he(null)]])});let c,d;arguments.length>1&&(c=arguments[0],d=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(o=arguments[3])),this.renderTargetEdges=new ft(1,1,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new V_(!0,!1,!1),this.clearPass.overrideClearColor=new We(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Yn(new _X),this.edgeDetectionMaterial.edgeDetectionMode=o,this.edgeDetectionMaterial.predicationMode=a,this.weightsPass=new Yn(new RX);let g=new Lp;g.onLoad=()=>{let b=new tr(c);b.name="SMAA.Search",b.magFilter=Vt,b.minFilter=Vt,b.generateMipmaps=!1,b.needsUpdate=!0,b.flipY=!0,this.weightsMaterial.searchTexture=b;let j=new tr(d);j.name="SMAA.Area",j.magFilter=tt,j.minFilter=tt,j.generateMipmaps=!1,j.needsUpdate=!0,j.flipY=!1,this.weightsMaterial.areaTexture=j,this.dispatchEvent({type:"load"})},g.itemStart("search"),g.itemStart("area"),c!==void 0&&d!==void 0?(g.itemEnd("search"),g.itemEnd("area")):typeof Image<"u"&&(c=new Image,d=new Image,c.addEventListener("load",()=>g.itemEnd("search")),d.addEventListener("load",()=>g.itemEnd("area")),c.src=t3,d.src=r3),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let o=this.edgeDetectionMaterial,a=this.weightsMaterial;switch(e){case Wa.LOW:o.edgeDetectionThreshold=.15,a.orthogonalSearchSteps=4,a.diagonalDetection=!1,a.cornerDetection=!1;break;case Wa.MEDIUM:o.edgeDetectionThreshold=.1,a.orthogonalSearchSteps=8,a.diagonalDetection=!1,a.cornerDetection=!1;break;case Wa.HIGH:o.edgeDetectionThreshold=.1,a.orthogonalSearchSteps=16,a.diagonalSearchSteps=8,a.cornerRounding=25,a.diagonalDetection=!0,a.cornerDetection=!0;break;case Wa.ULTRA:o.edgeDetectionThreshold=.05,a.orthogonalSearchSteps=32,a.diagonalSearchSteps=16,a.cornerRounding=25,a.diagonalDetection=!0,a.cornerDetection=!0;break}}setDepthTexture(e,o=ji){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=o}update(e,o,a){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,o,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,o){this.edgeDetectionMaterial.setSize(e,o),this.weightsMaterial.setSize(e,o),this.renderTargetEdges.setSize(e,o),this.renderTargetWeights.setSize(e,o)}dispose(){let{searchTexture:e,areaTexture:o}=this.weightsMaterial;e!==null&&o!==null&&(e.dispose(),o.dispose()),super.dispose()}static get searchImageDataURL(){return t3}static get areaImageDataURL(){return r3}},vQ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Ex={DEFAULT:0,ESKIL:1},g3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,technique:o=Ex.DEFAULT,eskil:a=!1,offset:c=.5,darkness:d=.5}={}){super("VignetteEffect",vQ,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",o.toFixed(0)]]),uniforms:new Map([["offset",new he(c)],["darkness",new he(d)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ex.ESKIL}set eskil(e){this.technique=e?Ex.ESKIL:Ex.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},li=class{constructor(e,o){this.enabled=!1,this.effect=new e(o),Object.defineProperty(this,"opacity",{enumerable:!0,set(a){this.effect.blendMode.opacity.value=a},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(a){this.effect.blendMode.setBlendFunction(Number(a))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Mt.NORMAL}},Af=class extends li{constructor(){super(l3),this.blendFunction=Mt.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},_f=class extends li{constructor(){super(c3)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},Ef=class extends li{constructor(){super(h3),this.effect.offset=new z$2(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Tf=class extends li{constructor(){super(u3)}},Mf=class extends li{constructor(){super(f3),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},Cf=class extends li{constructor(){super(p3),this.blendFunction=Mt.OVERLAY}},Pf=class extends li{constructor(){super(g3)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Df=class extends li{constructor(e){super(d3,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},Of=class extends li{constructor(){super(m3)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},y3=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,v3=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,x3=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,b3$1=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,If=class extends lt{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new he(null)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:x3,fragmentShader:b3$1})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},Cx=class extends wi{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new If,this.resolutionVector=new z$2,this.resolveMaterial=new lt({name:"TAAResolveMaterial",uniforms:{inputBuffer:new he(null),historyBuffer:new he(null),velocityBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new z$2)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:y3,fragmentShader:v3}),this.historyRenderTarget=new ft(1024,1024,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new ft(1024,1024,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,o){this.historyRenderTarget.setSize(e,o),this.resultRenderTarget.setSize(e,o)}render(e,o){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=o.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=o.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=o.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(o.width,o.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let a=this.renderToScreen?null:o;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(a),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},Px=class extends wi{constructor(e,o,a){super("TransmissionPass",void 0,o),this.MRTCompatible=!0,this.depthPass=new z_(e,o,{renderTarget:a.transmissionDepthTarget}),this.passThroughMaterial=new If,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new If,this.depthPass=new z_(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,o,a){let c=this.camera.layers.mask,d=e;d.setRenderTarget(d.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=o.texture[0],d.clear(),d.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,o,a),d.shadowMap.needsUpdate=!1,d.shadowMap.autoUpdate=!1;let g=this.renderToScreen?null:o;this.camera.layers.set(3),e.setRenderTarget(g),e.render(this.splineScene,this.camera),this.camera.layers.mask=c}},S3=new Pi,_Q=new lt({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),su=class extends wi{constructor(e,o,a){super("OpaquePass",o??S3,a),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}set splatViewer(e){this._splatViewer=e}get splatViewer(){return this._splatViewer}setCamera(e){this.camera=e}setScene(e){this.scene=e??S3}getScene(){return this.scene}render(e,o){var c;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(d=>{d.layers.isEnabled(3)&&d instanceof pr&&(this.originalMaterials.set(d.id,d.material),d.material=_Q)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let a=this.renderToScreen?null:o;if(e.setRenderTarget(a),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),((c=this._splatViewer)==null?void 0:c.splatRenderingInitialized)===!0){let d=e.autoClear;e.autoClear=!1,e.render(this.scene,this.camera),this._splatViewer.update(),e.render(this._splatViewer.splatMesh,this.camera),e.autoClear=d}else e.render(this.scene,this.camera);this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((d,g)=>{let b=this.scene.getObjectById(g);b&&(b.material=d)})}},Dx=class{constructor(e,{depthBuffer:o=!0,stencilBuffer:a=!1,multisampling:c=0,frameBufferType:d=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Ym,this.depthTexture=null,this.timer=new a3,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(o,a,d,c,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(o,a,d,c,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(o,a,d,c,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let o=this.inputBuffer,a=this.multisampling;a>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):a!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(o.depthBuffer,o.stencilBuffer,o.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var o;if(this.renderer=e,e!==null){let a=e.getSize(new z$2),c=((o=e.getContext().getContextAttributes())==null?void 0:o.alpha)??!1,d=this.inputBuffer.texture[0].type;d===Ir$1&&e.outputEncoding===at&&(this.inputBuffer.texture[0].encoding=at,this.outputBuffer.texture[0].encoding=at,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(a.width,a.height,!1);for(let g of this.passes)g.initialize(e,c,d)}}replaceRenderer(e,o=!0){let a=this.renderer,c=a.domElement.parentNode;return this.setRenderer(e),o&&c!==null&&(c.removeChild(a.domElement),c.appendChild(e.domElement)),a}createDepthTexture(){let e=this.depthTexture=new gs(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=cl,e.type=ol):e.type=js,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,o,a,c,d,g){let b=this.renderer,j=b===null?new z$2:b.getDrawingBufferSize(new z$2),$={minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,stencilBuffer:o,depthBuffer:e},_e;return c>0?(_e=new ft(j.width,j.height,$),_e.samples=c):(d?(_e=new Sy(j.width,j.height,2,$),_e.texture[1].type=va):_e=new ft(j.width,j.height,$),_e.depthTexture=new gs(2048,2048),_e.depthTexture.type=Sr$1),a===Ir$1&&b!==null&&b.outputEncoding===at&&(Array.isArray(_e.texture)?_e.texture.forEach(st=>st.encoding=at):_e.texture.encoding=at),Array.isArray(_e.texture)?_e.texture.forEach((st,rt)=>{st.name=`EffectComposer.Buffer ${d} ${rt}`,st.generateMipmaps=!1}):(_e.texture.name=`EffectComposer.Buffer ${d}`,_e.texture.generateMipmaps=!1),_e.name=g,_e}addPass(e,o){var j;let a=this.passes,c=this.renderer,d=c.getDrawingBufferSize(new z$2),g=((j=c.getContext().getContextAttributes())==null?void 0:j.alpha)??!1,b;if(e.MRTCompatible&&(b=this.inputBuffer.texture[0].type),e.MRTCompatible||(b=this.inputBuffer.texture.type),e.setRenderer(c),e.setSize(d.width,d.height),e.initialize(c,g,b),this.autoRenderToScreen&&(a.length>0&&(a[a.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),o!==void 0?a.splice(o,0,e):a.push(e),this.autoRenderToScreen&&(a[a.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let $=this.createDepthTexture();for(e of a)e.setDepthTexture($)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let o=this.passes,a=o.indexOf(e);if(a!==-1&&o.splice(a,1).length>0){if(this.depthTexture!==null){let c=(d,g)=>d||g.needsDepthTexture;o.reduce(c,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&a===o.length&&(e.renderToScreen=!1,o.length>0&&(o[o.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let o=this.renderer,a=this.copyPass,c=this.inputBuffer,d=this.outputBuffer,g=this.inputBufferSingle,b=this.outputBufferSingle,j=!1,$,_e,st,rt;e===void 0&&(e=this.timer.update().getDelta());for(let ut of this.passes)ut.enabled&&(ut.MRTCompatible?ut.render(o,c,d,e,j):ut.render(o,g,b,e,j),ut.needsSwap&&(j&&(a.renderToScreen=ut.renderToScreen,$=o.getContext(),_e=o.state.buffers.stencil,_e.setFunc($.NOTEQUAL,1,4294967295),a.render(o,c,d,e,j),_e.setFunc($.EQUAL,1,4294967295)),st=c,rt=g,c=d,g=b,d=st,b=rt),ut instanceof o3?j=!0:ut instanceof s3&&(j=!1))}setSize(e,o,a){let c=this.renderer;if(this._width=e,this._height=o,e===void 0||o===void 0){let g=c.getSize(new z$2);e=g.width,o=g.height}c.setSize(e,o,a);let d=c.getDrawingBufferSize(new z$2);this.inputBuffer.setSize(d.width,d.height),this.outputBuffer.setSize(d.width,d.height),this.inputBufferSingle.setSize(d.width,d.height),this.outputBufferSingle.setSize(d.width,d.height);for(let g of this.passes)g.setSize(d.width,d.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},EQ=new lt({name:"CombineMaterial",uniforms:{inputBufferA:new he(null),inputBufferB:new he(null)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),Ox=class extends wi{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=EQ,this.helperPass=new su(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new su(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let o=new Mx({preset:Wa.LOW,edgeDetectionMode:wf.COLOR});this.effectPass=new nu(this.camera,o),this.rt=new ft(10,10,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!0})}setSize(e,o){this.rt.setSize(e,o),this.effectPass.setSize(e,o)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,o,a){super.initialize(e,o,a),this.effectPass.initialize(e,o,a)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,o,a){this.rt.depthTexture=o.depthTexture;let c=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,a),this.fullscreenMaterial.uniforms.inputBufferA.value=a.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=o.texture,e.setClearAlpha(c),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},w3=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,A3=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,_3=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,E3=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,T3=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,M3=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,Rf=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],IQ=new lt({vertexShader:w3,fragmentShader:A3}),Ix=new lt({vertexShader:T3,fragmentShader:M3,uniforms:{texture_ao_lrez:new he(null),texture_depth_lrez:new he(null),texture_depth_hrez:new he(null),near:new he(null),far:new he(null)}}),Rx=class extends wi{constructor(e,o){super("AmbientOcclusionPass",void 0,o),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let a=1024,c=1024;this.gBuffer=new ft(a,c,{type:Sr$1,depthTexture:new gs(a,c),minFilter:tt,magFilter:tt}),this.depthBufferHighRes=new ft(a,c,{depthTexture:new gs(a,c)}),this.aoBuffer=new ft(a,c,{minFilter:tt,magFilter:tt}),this.splineScene=e,this.splineCamera=o;let d=new Float32Array(Rf.length*2);for(let b=0;b<Rf.length;b++){let j=b*2;d[j+0]=Rf[b][0],d[j+1]=Rf[b][1]}this.blueNoiseInDiskTexture=new xi(d,Rf.length,1,uh,Sr$1),this.blueNoiseInDiskTexture.wrapS=Ws,this.blueNoiseInDiskTexture.wrapT=Ws,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new lt({vertexShader:_3,fragmentShader:E3,uniforms:{near:new he(null),far:new he(null),fov:new he(null),proj_info:new he(new Ke),is_ortho:new he(!1),resolution:new he(new z$2),radius_of_influence:new he(8),radius_in_screen_space:new he(1),exponent:new he(1),ao_color:new he(new _),bias:new he(.5),texture_depth:new he(null),texture_normals:new he(null),texture_blue_noise:new he(null),texture_blue_noise_in_disk:new he(this.blueNoiseInDiskTexture),frame_index:new he(0),fog_enabled:new he(!1),fog_near:new he(1),fog_far:new he(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new ft(a,c,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1,type:Sr$1});let g=new Mx({preset:Wa.ULTRA,edgeDetectionMode:wf.COLOR});this.effectPass=new nu(this.camera,g)}initialize(e,o,a){super.initialize(e,o,a),this.effectPass.initialize(e,o,a)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,o){this._width=e,this._height=o,this.depthBufferHighRes.setSize(e,o);let a=this._runHalfRes?.5:1,c=e*a,d=o*a;this.gBuffer.setSize(c,d),this.aoBuffer.setSize(c,d),this.hbaoMaterial.uniforms.resolution.value.set(c,d),this.aaBuffer.setSize(c,d),this.effectPass.setSize(c,d)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,o,a){this.splineScene.overrideMaterial=IQ;let c=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=c,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let d=this.splineCamera.perspCamera.projectionMatrix.elements,g=2/d[0],b=2/d[5],j=-(1-d[8])/d[0],$=-(1+d[9])/d[5];this.hbaoMaterial.uniforms.proj_info.value.set(g,b,j,$);let _e=this.splineCamera.perspCamera.fov*(Math.PI/180),st=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(_e*.5)*2),rt=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*st;this.hbaoMaterial.uniforms.radius_in_screen_space.value=rt,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let d=this.splineCamera.orthoCamera.projectionMatrix.elements,g=2/d[0],b=2/d[5],j=-(1+d[12])/d[0],$=-(1-d[13])/d[5];this.hbaoMaterial.uniforms.proj_info.value.set(g,b,j,$);let _e=.5*(this.hbaoMaterial.uniforms.resolution.value.y/b),st=this.hbaoMaterial.uniforms.radius_of_influence.value*_e;this.hbaoMaterial.uniforms.radius_in_screen_space.value=st,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=Ix,Ix.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,Ix.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,Ix.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},RQ=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,LQ=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,Lx=class extends Yn{constructor(){super(new lt({vertexShader:RQ,fragmentShader:LQ,uniforms:{tInput:new he(null),tMap:new he(null),uResolution:new he(new z$2),uSize:new he(new z$2),uCoords:new he(new z$2),uScale:new he(1),uSceneColor:new he(new We(16711680)),uDPR:new he(1),uCurrent:new he(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},BQ=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,NQ=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,FQ=[],Bx=class extends Yn{constructor(){super(new lt({vertexShader:BQ,fragmentShader:NQ,uniforms:{toScene:new he(null),fromScene:new he(null),uResolution:new he(new z$2),uDPR:new he(1),mixRatio:new he(0),threshold:new he(.1),useTexture:new he(0),tMixTexture:{value:FQ[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},kQ=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VQ=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
	gl_FragColor.a = 1.0;
}
`,Nx=class extends Yn{constructor(){super(new lt({vertexShader:kQ,fragmentShader:VQ,uniforms:{inputBuffer:new he(null),blurredInputBuffer:new he(null),overlay:new he(null),uResolution:new he(new z$2),uDPR:new he(1),blurIntensity:new he(0)}})),this._blurEnabled=!1,this.blurTarget=new ft(1,1,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt}),this.blurPass=new Tx({width:window.innerWidth,height:window.innerHeight,kernelSize:Xm.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,o,a=1){this.uniforms.uResolution.value.set(e,o).divideScalar(a),this.uniforms.uDPR.value=a,this.blurPass.setSize(e,o),this.blurTarget.setSize(e,o),this.blurPass.setSize(e,o)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let o=e.frame;if(o){let a=o.data.backgroundBlur,c=a.radius;this._blurEnabled=a.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=c/3}}render(e,o,a,c,d){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,o,this.blurTarget,c,d)),super.render(e,o,a,c,d)}};function P3(e,o){return o&&o.enabled&&e.push(o.effect),e}var zQ=e=>Object.values(Mt).includes(e)?e:Mt.NORMAL,Qm=class extends fr$2{constructor(e){super(),this.postprocessingState=td.defaultData,this._scene=new Pi,this._camera=new wr$1,this.effects=new Map,this.blueNoiseTexture=new xi,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new Ny,this.renderer=e,this.debug=!1,this.effects.set("bloom",new Af),this.effects.set("chromaticAberration",new Ef),this.effects.set("vignette",new Pf),this.effects.set("noise",new Cf),this.effects.set("colorAverage",new Tf),this.effects.set("hueSaturation",new Mf),this.effects.set("brightnessContrast",new _f),this.effects.set("depthOfField",new Df),this.effects.set("pixelation",new Of),this.effectComposer=new Dx(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new su(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new Px(this.scene,this.camera,this.renderer),this.aoPass=new Rx(this.scene,this.camera),this.taaPass=new Cx,this.taaPass.renderToScreen=!1,this.helperPass=new Ox(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new Lx,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new Nx,this.uiOverlayPass.enabled=!1,this.sceneTransitionPass=new Bx,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let o=this.effectComposer.passes.length-1;o>=0;o--){let a=this.effectComposer.passes[o];if(a.enabled===!0&&!e&&this._renderToScreen){a.renderToScreen=!0,e=!0;continue}a.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new xi(e,128,128),this.blueNoiseTexture.wrapS=Ws,this.blueNoiseTexture.wrapT=Ws,this.blueNoiseTexture.minFilter=Vt,this.blueNoiseTexture.magFilter=Vt,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,o,a,c,d,g,b,j){this.aoPass.enabled=e,this.aoPass.radius=o,this.aoPass.bias=a,this.aoPass.aoColor=c,this.aoPass.fogEnabled=d,this.aoPass.fogNear=g,this.aoPass.fogFar=b,this.aoPass.runHalfRes!==!j&&(this.aoPass.runHalfRes=!j)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,o;if((e=this.uvEffectPass)==null||e.dispose(),(o=this.effectPass)==null||o.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let a=[this.effects.get("pixelation")].reduce(P3,[]);a.length>0&&(this.uvEffectPass=new nu(this.camera,...a),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let c=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(P3,[]);c.length>0&&(this.effectPass=new nu(this.camera,...c),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new z$2;this.renderer.getDrawingBufferSize(e),this._rt=new ft(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Ws,wrapT:Ws}),this._rt.samples=0,this._savePass=new Ym(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Ym(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let o=this.effectComposer;!o||(e===!0?o.removePass(this._savePass):o.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:o,...a}=e,c=!1;o!==this.postprocessingState.enabled&&(c=!0);for(let d of Object.entries(a)){let g=d[1],b=this.effects.get(d[0]);if(b){b.enabled!==g.enabled&&(c=!0),b.enabled=g.enabled;for(let[j,$]of Object.entries(g))j==="blendFunction"?b.blendFunction=zQ($):b[j]=$}}this.postprocessingState=e,c&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,o,a,c){e instanceof Ke?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,o,a,c),this.effectComposer.outputBuffer.scissor.set(e,o,a,c));let d=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(d),this.effectComposer.outputBuffer.scissor.multiplyScalar(d),this.renderer.setScissor(e,o,a,c)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,o,a,c){e instanceof Ke?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,o,a,c),this.effectComposer.outputBuffer.viewport.set(e,o,a,c))}resize(e,o,a){if(this.effectComposer.setSize(e,o,a),this._rt){let c=this.renderer.getPixelRatio();this._rt.setSize(e*c,o*c)}}dispose(){var e,o;(e=this.uvEffectPass)==null||e.dispose(),(o=this.effectPass)==null||o.dispose(),this.effectComposer.dispose()}},UQ=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,GQ=bt.lights_fragment_begin,jQ=bt.shadowmask_pars_fragment,D3=null,HQ=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},O3=(e="medium")=>{if(D3===e)return!1;D3=e;let o=HQ(e);bt.shadowmap_pars_fragment=UQ(o);let a=GQ.slice();a=a.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),a=a.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),bt.lights_fragment_begin=a;let c=jQ.slice();return c=c.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),bt.shadowmask_pars_fragment=c,!0},WQ=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,qQ=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,Fx=new lt({vertexShader:WQ,fragmentShader:qQ,uniforms:{depthContrast:{value:1}}}),I3=new tr,kx=class extends Dw{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new z$2,this.pipeline=new Qm(this),this.dummyCamera=new wr$1,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(d=!0,g=!0,b=!0)=>{let j=this.getContext(),$=0;d&&($|=j.COLOR_BUFFER_BIT),g&&($|=j.DEPTH_BUFFER_BIT),b&&($|=j.STENCIL_BUFFER_BIT),j.clear($),j.clearBufferfv(j.COLOR,1,[0,0,0,1])},this.autoClear=!1;let o=this.setPixelRatio.bind(this),a=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=Gy,this.dummyCamera.matrixAutoUpdate=!1;let c=this.getContext();if(c&&"drawingBufferColorSpace"in c)try{c.drawingBufferColorSpace="display-p3"}catch(d){console.warn(d)}this.setPixelRatio=d=>{this._pixelRatio!==d&&(this._pixelRatio=d,o(d))},this.setSize=(d,g,b=!0)=>{var j,$;(this.viewportWidth!==d||this.viewportHeight!==g)&&(this.viewportWidth=d,this.viewportHeight=g,a(d,g,b),(j=this.normalRenderTarget)==null||j.setSize(d*this._pixelRatio,g*this._pixelRatio),this._resizeTransmission(d,g),($=this.transmissionDepthTarget)==null||$.setSize(d*this._pixelRatio/2,g*this._pixelRatio/2),this.pipeline.resize(d,g,b))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new ft(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1}))}_resizeTransmission(e,o){var a,c;(a=this.transmissionRenderTarget)==null||a.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),o*this._pixelRatio/(this.hdTransmission?1:2)),(c=this.aoRenderTarget)==null||c.setSize(e*this._pixelRatio/1,o*this._pixelRatio/1)}get hdTransmission(){return Ze.transmissionLod.value===1}set hdTransmission(e){Ze.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new ft(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:bc,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1}),this.transmissionDepthTarget=new ft(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Vt,magFilter:Vt,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new ft(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Vt,magFilter:Vt,type:Sr$1,depthTexture:new gs(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,o,a){this.normalRenderTarget&&(this.setClearColor(0),a.layers.enable(8),a.layers.disable(0),a.layers.disable(3),o.traverseEntity(c=>{c.layers.isEnabled(8)&&(c.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),a instanceof wr$1?Fx.uniforms.depthContrast.value=(a.far-a.near)/1e4:Fx.uniforms.depthContrast.value=1,o.overrideMaterial=Fx,this.render(o,a),this.setClearColor(o.bgColor,o.bgColor.a),this.setRenderTarget(null),o.overrideMaterial=e.wireframeState?Vx:null,a.layers.enable(0),a.layers.enable(3),o.traverseEntity(c=>{c.layers.isEnabled(8)&&(c.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,o,a=1){this.dummyCamera.updateCameraState(o.dataPatched),this.dummyCamera.matrix.copy(o.matrixWorld);let c=o.height,d=o.width,g=this.viewportWidth/this.viewportHeight;d<c?d=c*g:c=d/g,this.dummyCamera.setViewplaneSize(d,c);for(let b=0;b<a;b++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,o,{sceneHelpers:a=void 0,sceneHelpersOnTop:c=void 0,overrideTransmission:d=void 0,overrideNormal:g=void 0}={}){var ut;let b=e instanceof $l?e.activePage:e,j=b.visible;b.visible=!0;let $=b.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(o)),this.setClearColor(b.bgColor,b.bgColor.a),b.penumbraSizeArray.forEach((gt,yt)=>{Ze.penumbraSize.value[yt]=gt}),Ze.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ze.resolution.value.set(this.resolution.x,this.resolution.y):Ze.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),g!==void 0?(Ze.normalRenderTarget.value=g,Ze.normalRenderTargetDepth.value=I3):$.needsNormal()&&(this.createNormalRenderTarget(),Ze.normalRenderTarget.value=this.normalRenderTarget.texture,Ze.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal($,b,o));let _e=b.data.ao,st=_e.occlusion;st&&(this.createAORenderTarget(),Ze.aoRenderTarget.value=this.aoRenderTarget.texture),Ze.aoEnabled.value=st,this.pipeline.setAmbientOcclusionParams(_e.occlusion,_e.radius,_e.bias,b.aoColor,b.fog!==null,b.backupFog.near,b.backupFog.far,_e.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((ut=b.uiCanvas)!=null&&ut.enabled)&&b.uiCanvas.texture&&b.uiCanvas.texture.image.width>0?((b.uiCanvas.width!==this.viewportWidth||b.uiCanvas.height!==this.viewportHeight)&&b.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight}),b.uiCanvas.render(),this.pipeline.uiOverlayPass.uiCanvas=b.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(this.domElement.width,this.domElement.height,window.devicePixelRatio),this.pipeline.updateRenderToScreen()):(this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen());let rt=!1;if(d!==void 0)Ze.transmissionRenderTarget.value=d,Ze.transmissionRenderTargetDepth.value=I3,this.pipeline.setTransmissionPassEnabled(!1);else{let gt=$.needsTransmission();gt&&(this.transmissionRenderTarget===void 0&&(rt=!0),this.createTransmissionRenderTarget(),Ze.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ze.aspectRatio.value=eR(this.viewportWidth,this.viewportHeight),Ze.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(gt)}o.layers.enable(3),o.layers.enable(8),this.pipeline.sceneHelpers=a,this.pipeline.sceneHelpersOnTop=c,this.pipeline.scene=b,this.pipeline.camera=o,rt&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==b.postprocessing&&(this.pipeline.updatePostprocessing(b.postprocessing),!a&&!c&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),b.overrideMaterial=$.wireframeState?Vx:null,this.pipeline.render(),Ze.frameIndex.value=(Ze.frameIndex.value+1)%16,o instanceof wr$1&&o.copyHistory(),b.visible=j}renderFromSceneForSceneTransitionPass(e,o,a){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,o),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=a,this.sceneTransitionTimeRemaining=a,this.pipeline.renderToScreen=!0;let c=this.pipeline.sceneTransitionPass.uniforms;c.uDPR.value=window.devicePixelRatio,c.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,o,a,c,d,g;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(o=this.transmissionRenderTarget)==null||o.dispose(),(a=this.transmissionDepthTarget)==null||a.dispose(),(c=this.normalRenderTarget)==null||c.dispose(),(g=(d=this.normalRenderTarget)==null?void 0:d.depthTexture)==null||g.dispose()}},Lf=class extends Qo(zy){constructor(e,o=15,a=10066329){super(e,o,a),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,o){Ko(this.object,Lf.geometryHelper,e,o)}},Bf=class extends Qo(Vy){constructor(e,o=15,a=6710886){super(e,o,a),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,o){Ko(this.object,Bf.geometryHelper,e,o)}},zx=class extends Qo(ky){constructor(e,o=6710886){super(e,o),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,o){Ko(this.object,zx.geometryHelper,e,o)}update(){if(this.object!==void 0){let e=zx._vector,o=this.object.distance?this.object.distance:1e3,a=o*Math.tan(this.object.angle);this.cone.scale.set(a,a,o),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let c=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let d=0,g=this.cone.material.length;d<g;d++)this.cone.material[d].color.set(c);else this.cone.material.color.set(c)}}},Km=zx;Km._vector=new _;function YQ(e,o){e.shadow.camera.right=o/2,e.shadow.camera.left=-o/2,e.shadow.camera.top=o/2,e.shadow.camera.bottom=-o/2,e.shadow.needsUpdate=!0}var Nf=class extends Sf(By,Lf){constructor(e,o,a){super(),this.super_Entity(e,o),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let c=this.shadow.camera;c.top=1250,c.bottom=-1250,c.right=1250,c.left=-1250,c.near=-1e4,c.far=2500;let d=new yl(this.shadow.camera);d.visible=!1,this.gizmos.shadowmap=d}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let o=this.gizmos[e];o instanceof yl&&o.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,o){this.updateState_Light(e,o);let a=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&YQ(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&o.scene.markPenumbraSizeDirty(),a&&this.update()}},R3=new _,L3=new _,B3=new Qe,Ff=class extends Sf(Ry,Km){constructor(e,o,a){super(),this.super_Entity(e,o),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let c=this.shadow.camera;c.fov=Me.RAD2DEG*2*this.angle,c.aspect=1,c.near=100,c.far=2500;let d=new yl(this.shadow.camera);d.visible=!1,this.gizmos.shadowmap=d,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let o=this.gizmos[e];o instanceof yl&&o.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),L3.setFromMatrixPosition(this.matrixWorld),B3.setFromRotationMatrix(this.matrixWorld),R3.copy(this.up).applyQuaternion(B3).negate().multiplyScalar(this.distance),this.target.position.copy(L3).add(R3),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,o){this.updateState_Light(e,o),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&o.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},zt;(e=>{function o(){return[1,0,0,0,1,0,0,0,1]}e.identity=o;function a(Lt,Ft=e.identity()){for(let Nt=0,Ht=Lt.length;Nt<Ht;Nt++)Ft[Nt]=Lt[Nt];return Ft}e.copy=a;function c(Lt,Ft,Nt,Ht,dr,hs){return e.setAbcdef(e.identity(),Lt,Ft,Nt,Ht,dr,hs)}e.create=c;function d(Lt,Ft,Nt,Ht,dr,hs,us){return Lt[0]=Ft,Lt[1]=Ht,Lt[2]=hs,Lt[3]=Nt,Lt[4]=dr,Lt[5]=us,Lt}e.setAbcdef=d;function g(Lt,Ft){let[Nt,Ht,dr,hs,us,hn]=j(Lt),[un,bo,_s,gn,Gr,ds]=j(Ft),Zn=un*Nt+bo*dr,Nn=un*Ht+bo*hs,Qn=_s*Nt+gn*dr,bu=_s*Ht+gn*hs,ou=Gr*Nt+ds*dr+us,g0=Gr*Ht+ds*hs+hn;return e.create(Zn,Nn,Qn,bu,ou,g0)}e.append=g;function b(Lt,Ft){let[Nt,Ht,dr,hs,us,hn]=j(Lt),[un,bo,_s,gn,Gr,ds]=j(Ft),Zn=Nt,Nn=Ht,Qn=dr,bu=hs;(un!==1||bo!==0||_s!==0||gn!==1)&&(Zn=Nt*un+Ht*_s,Nn=Nt*bo+Ht*gn,Qn=dr*un+hs*_s,bu=dr*bo+hs*gn);let ou=us*un+hn*_s+Gr,g0=us*bo+hn*gn+ds;return e.create(Zn,Nn,Qn,bu,ou,g0)}e.prepend=b;function j(Lt){return[Lt[0],Lt[3],Lt[1],Lt[4],Lt[2],Lt[5]]}e.getAbcdef=j;function $(Lt){let[Ft,Nt,Ht,dr,hs,us]=e.getAbcdef(Lt),hn=Ft*dr-Nt*Ht,un=dr/hn,bo=-Nt/hn,_s=-Ht/hn,gn=Ft/hn,Gr=(Ht*us-dr*hs)/hn,ds=-(Ft*us-Nt*hs)/hn;return e.create(un,bo,_s,gn,Gr,ds)}e.invert=$;function _e([Lt,Ft],Nt){let[Ht,dr,hs,us,hn,un]=e.getAbcdef(Nt);return[Ht*Lt+hs*Ft+hn,dr*Lt+us*Ft+un]}e.apply=_e;function st(Lt,Ft){let[Nt,Ht,dr,hs,us,hn]=e.getAbcdef(Ft),un=1/(Nt*hs+dr*-Ht),[bo,_s]=Lt;return[hs*un*bo+-dr*un*_s+(hn*dr-us*hs)*un,Nt*un*_s+-Ht*un*bo+(-hn*Nt+us*Ht)*un]}e.applyInverse=st;function rt(Lt,Ft,Nt=Ft){let[Ht,dr,hs,us,hn,un]=e.getAbcdef(Lt);return e.setAbcdef(Lt,Ht*Ft,dr*Nt,hs*Ft,us*Nt,hn*Ft,un*Nt),Lt}e.scale=rt;function ut(Lt,Ft){let Nt=Math.cos(Ft),Ht=Math.sin(Ft),[dr,hs,us,hn,un,bo]=e.getAbcdef(Lt);return e.setAbcdef(Lt,dr*Nt-hs*Ht,dr*Ht+hs*Nt,us*Nt-hn*Ht,us*Ht+hn*Nt,un*Nt-bo*Ht,un*Ht+bo*Nt),Lt}e.rotate=ut;function gt(Lt,Ft,Nt){let[Ht,dr]=Nt,hs=e.translate(Lt,-Ht,-dr);return hs=e.rotate(hs,Ft),hs=e.translate(hs,Ht,dr),hs}e.rotateAround=gt;function yt(Lt,Ft,Nt){let[Ht,dr,hs,us,hn,un]=e.getAbcdef(Lt);return e.setAbcdef(Lt,Ht,dr,hs,us,hn+Ft,un+Nt),Lt}e.translate=yt;function wt(Lt,Ft,Nt){let[Ht,dr,hs,us]=e.getAbcdef(Lt);return e.setAbcdef(Lt,Ht,dr,hs,us,Ft,Nt),Lt}e.setTranslate=wt;function Ct(Lt,Ft,Nt){let[Ht,dr,hs,us]=e.getAbcdef(Lt);return e.setAbcdef(Lt,Ht,dr,hs,us,Ft,Nt),Lt}e.setPosition=Ct;function Pt(Lt){let[Ft,Nt,Ht,dr]=e.getAbcdef(Lt),hs=Math.sqrt(Ft*Ft+Nt*Nt),us=Math.sqrt(Ht*Ht+dr*dr);return[hs,us]}e.getScale=Pt;function At(Lt){let[,,,,Ft,Nt]=e.getAbcdef(Lt);return[Ft,Nt]}e.getPosition=At;function Tt(Lt,Ft){return e.decompose(Lt,Ft).rotation}e.getRotation=Tt;function kt(Lt,Ft){let[Nt,Ht,dr,hs,us,hn]=e.getAbcdef(Lt),un=-Math.atan2(-dr,hs),bo=Math.atan2(Ht,Nt),_s=Math.abs(un+bo),gn=0,Gr=[0,0];_s<1e-5||Math.abs(Math.PI*2-_s)<1e-5?(gn=bo,Gr[0]=Gr[1]=0):(gn=0,Gr[0]=un,Gr[1]=bo);let ds=[Math.sqrt(Nt*Nt+Ht*Ht),Math.sqrt(dr*dr+hs*hs)];return{position:[us+(Ft[0]*Nt+Ft[1]*dr)-Ft[0],hn+(Ft[0]*Ht+Ft[1]*hs)-Ft[1]],scale:ds,rotation:gn,skew:Gr,pivot:Ft}}e.decompose=kt;function It(Lt,Ft,Nt,Ht,dr=[0,0]){let[hs,us]=Lt,[hn,un]=Ft,[bo,_s]=Ht,[gn,Gr]=dr,ds=Math.cos(Nt+Gr)*hn,Zn=Math.sin(Nt+Gr)*hn,Nn=-Math.sin(Nt-gn)*un,Qn=Math.cos(Nt-gn)*un,bu=hs-(bo*ds+_s*Nn)+bo,ou=us-(bo*Zn+_s*Qn)+_s;return e.create(ds,Zn,Nn,Qn,bu,ou)}e.compose=It})(zt||(zt={}));var XQ=Math.PI/180;function N3(e,o,a,c,d,g){let b=e-a,j=o-c;return b*b/(d*d)+j*j/(g*g)<=1}function F3(e){return e*XQ}function G_(e){return{all:e=e||new Map,on:function(o,a){var c=e.get(o);c?c.push(a):e.set(o,[a])},off:function(o,a){var c=e.get(o);c&&(a?c.splice(c.indexOf(a)>>>0,1):e.set(o,[]))},emit:function(o,a){var c=e.get(o);c&&c.slice().map(function(d){d(a)}),(c=e.get("*"))&&c.slice().map(function(d){d(o,a)})}}}var Jt=class{constructor(e,o,a){this.uuid=e,this.data=o,this.localMatrix=zt.identity(),this.worldMatrix=zt.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new ec,this._recursiveBBox=new ec,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.emitter=G_(),this.dpr=a.dpr??1,this.dataPatched=o}project(e,o){let a=this.worldMatrix;return o&&(a=zt.append(o.worldMatrix,a)),zt.applyInverse(e,a)}intersects(e,o,a,c=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,o],a),c)}intersectsInLocalSpace(e,o,a=!1){let{min:c,max:d}=a?this.recursiveBBox:this.singleBBox;return e>=c[0]&&e<=d[0]&&o>=c[1]&&o<=d[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=zt.compose(this.position,this.scale,F3(this.rotation),Na.getPivot(this.dataPatched))}updateWorldMatrix(e,o,a){let c=this.parent;o&&c!==null&&c!==void 0&&c.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=zt.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=zt.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Na.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let o=!1;e.position!==void 0&&(o=!0,this.position=e.position),e.rotation!==void 0&&(o=!0,this.rotation=e.rotation),e.scale!==void 0&&(o=!0,this.scale=e.scale),o&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,o,a){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=o,this.data=o;let c=e,d=Rt(e.path,["states","*"]);if(d!==null){if(e.type===0){let[g]=d;if((this==null?void 0:this.stateSelection)===g){let b={...e.props};if(delete b.name,Object.values(e.props).some(j=>j===void 0)){let j=this.data;if(j!==void 0){let $=Nr$1.zoom(j,e.path.slice(2));if($)for(let _e in e.props)e.props[_e]===void 0&&_e in $&&(b[_e]=$[_e])}}c={...e,props:b,path:e.path.slice(2)}}}}else if(e.type===0){let g=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(g!==void 0){if(e.props.name!==void 0&&g.name){let{name:j,...$}=g;g=$}let b=Nr$1.removeOverridden(e.path,e.props,g);c={...e,props:b}}}this.updateByPatchedOpBase(c,Ba.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),a)}changeSelectedState(e,o,a=!1){if(!(this.data.states.length===0&&!a)){for(let c of this.data.states)Ba.toOps(this.data,c.data).forEach(d=>{let g=Yh.replaceProps(d,this.data);this.dataPatched=this.data,this.updateByPatchedOp(g,this.data,o)});if(e!==null){let c=this.data.states.data(e);c&&(this.dataPatched=Ba.patch(this.data,c),Ba.toOps(this.data,c).forEach(d=>{this.updateByPatchedOp(d,this.dataPatched,o)}))}a&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,o){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,o,a){this.dataPatched=o,this.updateByPatchedOp(e,o,a)}updateByPatchedOp(e,o,a){e.path.length===0&&e.type===0&&this.updateState(e.props,a),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(o=>{o.data.type==="frame2d"&&e(o)})}traverseAncestors(e){let o=this.parent;for(;o;)e(o),o=o.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let o=new Jt(this.uuid,this.data,e);return o.parent=void 0,o}addEventListener(e,o){this.emitter.on(e,o)}removeEventListener(e,o){this.emitter.off(e,o)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let o=e.children;if(o){let a=o.indexOf(this)+1;return o[a]?o[a]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof Jt&&(e=e.uuid);let o=this;for(;o.parent;){if(o.parent.uuid===e)return!0;o=o.parent}return!1}},yn=class extends Jt{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this.context=a,this.children=[]}add(e){e.parent&&e.parent instanceof yn&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let o=this.children.indexOf(e);o>=0&&(this.children.splice(o,1),e.parent=void 0)}traverse(e){let o=e(this);if(o!==!0)for(let a of this.children)a instanceof yn?a.traverse(e):o=e(a)}intersectsChildren(e,o,a,c=!1,d=[],g=!1){for(let b of this.children){let j=b instanceof Ln;if(b instanceof yn&&!j&&g&&b.intersectsChildren(e,o,a,c,d,!1),b.intersects(e,o,a,j)&&(d.push(b),c))break}return d}updateWorldMatrix(e,o,a){if(super.updateWorldMatrix(e,o,a),a&&this.children)for(let c of this.children)c.updateWorldMatrix(e,!1,!0)}find(e){let o;return this.traverse(a=>{a.uuid===e&&(o=a)}),o}innerDrawChildren(e){for(let o=this.children.length-1;o>=0;o--)this.children[o].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let o=new yn(this.uuid,this.data,e);o.parent=void 0;for(let a of this.children)o.add(a.clone(e));return o}},Ln=class extends yn{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this.updateState(o,a)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let o=new Ln(this.uuid,this.data,e);o.parent=void 0;for(let a of this.children)o.add(a.clone(e));return o}};function QQ(e,o){let[[a,c],[d,g]]=e,[[b,j],[$,_e]]=o,st=(a-d)*(j-_e)-(c-g)*(b-$);if(st===0)return!1;let rt=((a-b)*(j-_e)-(c-j)*(b-$))/st,ut=-((a-d)*(c-j)-(c-g)*(a-b))/st;return rt>=0&&rt<=1&&ut>=0&&ut<=1}var V3=[[-1,1],[-1,-1],[1,-1],[1,1]],k3=(e,o,a)=>{let c=e.getCenter(),d=e.getHalfSize(),g=zt.append(o,e.worldMatrix);d[0]===0&&d[1]===0?a.push(zt.apply(c,g)):V3.forEach(b=>{let j=[b[0]*d[0]+c[0],b[1]*d[1]+c[1]];a.push(zt.apply(j,g))})},ec=class{constructor(){this.matrix=zt.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,o=!1){e.updateWorldMatrix(),this.makeEmpty(),zt.copy(e.worldMatrix,this.matrix);let a=zt.invert(e.worldMatrix);this.expandByObjectSize(e,a,o)}expandByObjectSize(e,o,a=!1){let c=[];a===!0&&e instanceof yn?e.traverse(d=>{d.visible&&k3(d,o,c)}):k3(e,o,c),this.setFromPoints(c)}getCenter(){let[e,o]=this.min,[a,c]=this.getHalfSize();return zt.apply([e+a,o+c],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let o of e)this.expandByPoint(o)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,o]=this.getHalfSize(),a=this.getCenter(),[c,d,g,b]=zt.getAbcdef(this.matrix),j=zt.create(c,d,g,b,a[0],a[1]);this.vertices=V3.map(([$,_e])=>zt.apply([$*e,_e*o],j))}computeEdges(){this.edges=[];for(let e=0,o=this.vertices.length;e<o;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%o]])}project(e,o){let a=this.matrix;return o&&(a=zt.append(o.worldMatrix,a)),zt.applyInverse(e,a)}intersects(e,o,a){return this.intersectsInLocalSpace(...this.project([e,o],a))}intersectsInLocalSpace(e,o){let{min:a,max:c}=this;return e>=a[0]&&e<=c[0]&&o>=a[1]&&o<=c[1]}containsPoint(e){let[o,a]=e,[c,d]=this.min,[g,b]=this.max;return o>=c&&o<=g&&a>=d&&a<=b}intersectsBBox2D(e){for(let o=0,a=this.edges.length;o<a;o++){let c=this.edges[o];for(let d=0,g=e.edges.length;d<g;d++){let b=e.edges[d];if(QQ(c,b))return!0}}for(let o=0,a=e.vertices.length;o<a;o++){let c=e.vertices[o];if(this.containsPoint(c))return!0}return!1}ensureMinMax(){let e=this.min,o=this.max;this.min=[Math.min(e[0],o[0]),Math.min(e[1],o[1])],this.max=[Math.max(e[0],o[0]),Math.max(e[1],o[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],zt.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new ec;return e.copy(this),e}},U3,G3=new Promise(e=>{U3=e}),z3=!1,Ux;function j3(){if(z3)return;if(Ux)return Ux;async function e(){let o=await __vitePreload(()=>import("./ui-8DWtXw2q.js"),__vite__mapDeps([]));U3(o.default??o),z3=!0}return Ux=e(),Ux}function H_(e){let o=!1;return e.scene.objects.traverse((a,c)=>{(c.type==="Mesh"&&c.geometry.type==="UIGeometry"||c.type==="Page"&&c.uiFrame!==void 0)&&(o=!0)}),o}var mt,j_;async function KQ(e){let o=await G3;mt||(j_||(j_=o({locateFile:()=>e})),mt=await j_)}var H3=zt.identity(),Zm=class{constructor(e,o=1){this.canvas=e,this.dpr=o,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=St.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=St.transparent,this._fonts=new Map;try{let a=e.getBoundingClientRect();e.width=a.width*o,e.height=a.height*o}catch{console.log(e.width,o)}this._currentM3Transform=H3,this._currentTransform=new Float32Array(H3)}async init(){var e,o;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await KQ(this.wasmURL),this._surface=mt.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new mt.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(mt.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(mt.PaintStyle.Stroke),(o=this.ctx)==null||o.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,o){let a=await(await fetch(e)).arrayBuffer();this.registerFont(a,o)}registerFont(e,o){if(this._fonts.has(o))return;let a=mt.FontMgr.FromData(e);if(a)this._fonts.set(o,a);else throw new Error("Invalid font data for "+o)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(Gx(e),mt.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(Gx(e),mt.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(mt.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new mt.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let o=e.getBounds();(o[3]-o[1]||o[2]-o[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,o,a,c,d=0,g=0,b=0,j=0){var _e,st;let $=mt.XYWHRect(e,o,a,c);if(d===0&&g===0&&j===0&&b===0)(_e=this.ctx)==null||_e.clipRect($,mt.ClipOp.Intersect,!0);else{let rt=mt.RRectXY($,d,d);rt[4]=rt[5]=d,rt[6]=rt[7]=g,rt[8]=rt[9]=b,rt[10]=rt[11]=j,(st=this.ctx)==null||st.clipRRect(rt,mt.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=zt.invert(this.currentTransform);this.ctx.concat(e);let o=zt.translate(zt.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(o),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,o,a=!0){var c,d,g,b;if(this.ctx&&this._currentPath){let j,$=!1;if(a&&this._hasDropShadow()){let _e=e.copy();_e.setColor(Gx(this._dropShadowColor));let st;this._dropShadowBlur>0&&(st=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((c=this.camera)==null?void 0:c.scale)??1),!1),_e.setMaskFilter(st)),this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),o(_e),this.ctx.restore(),_e.delete(),st==null||st.delete()}if(this._backgroundBlur>0&&a){this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Intersect,!0);let _e=mt.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,mt.TileMode.Clamp,null),st=e.copy();st.setImageFilter(_e),st.setAlphaf(1);let rt=this._currentPath.computeTightBounds();this.ctx.saveLayer(st,rt,null,mt.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),st.delete(),_e.delete(),$=!0}if(this._layerBlur>0){let _e=e.copy();j=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._layerBlur*this.dpr*(((d=this.camera)==null?void 0:d.scale)??1),!1),_e.setMaskFilter(j),o(_e),_e.delete(),j.delete(),$=!0}if($||o(e),a&&this._hasInnerShadow()){let _e=new mt.Paint;_e.setAntiAlias(!0),_e.setStyle(mt.PaintStyle.Fill),_e.setColor(Gx(this._innerShadowColor));let st;this._innerShadowBlur>0&&(st=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((g=this.camera)==null?void 0:g.scale)??1),!1),_e.setMaskFilter(st));let rt=this._currentPath.computeTightBounds(),[ut,gt,yt,wt]=rt,Ct=yt-ut,Pt=wt-gt;this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Intersect,!0),this.ctx.saveLayer(_e,rt,null,mt.SaveLayerInitWithPrevious),(b=this.ctx)==null||b.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(mt.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+Ct+Math.abs(this._innerShadowOffsetX*2),2e3+Pt+Math.abs(this._innerShadowOffsetY*2)),_e),_e.setBlendMode(mt.BlendMode.Clear),this.ctx.drawPath(this._currentPath,_e),this.ctx.restore(),this.ctx.restore(),_e.delete(),st==null||st.delete()}}}_paintInner(e,o=!0){if(this.ctx&&this._currentPath&&e){let a=this.ctx,c=this._currentPath;this._applyEffectsToPaint(e,d=>{let g=!1;!o&&this._strokeMode!=="center"&&(a.save(),a.clipPath(c,this._strokeMode==="outside"?mt.ClipOp.Difference:mt.ClipOp.Intersect,!0),g=!0),a.drawPath(c,d),g&&a.restore()},o)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var o;(o=this._currentPath)==null||o.addPath(mt.Path.MakeFromSVGString(e))}ellipse(e,o,a,c,d,g,b,j){var _e;if(!W3([e,o,a,c])||!this._currentPath)return;if(a<0||c<0)throw Error("radii cannot be negative");let $=mt.XYWHRect(e-a,o-c,a*2,c*2);(_e=this._currentPath)==null||_e.addOval($)}rect(e,o,a,c,d=0,g=0,b=0,j=0){var _e,st;let $=mt.XYWHRect(e,o,a,c);if(W3($))if(d===0&&g===0&&j===0&&b===0)(_e=this._currentPath)==null||_e.addRect($);else{let rt=mt.RRectXY($,d,d);rt[4]=rt[5]=d,rt[6]=rt[7]=g,rt[8]=rt[9]=b,rt[10]=rt[11]=j,(st=this._currentPath)==null||st.addRRect(rt)}}getHorizontalAlign(e){switch(e){case 2:return mt.TextAlign.Right;case 3:return mt.TextAlign.Center;case 4:return mt.TextAlign.Justify;case 1:default:return mt.TextAlign.Left}}drawTextInner(e,o,a,[c,d,g,b],j,$,_e=!0){let st=0,{ctx:rt}=this;if(!rt)return st;let ut=$.copy(),gt=$.copy();return gt.setAlphaf(0),this._applyEffectsToPaint(ut,yt=>{o.pushPaintStyle(a,yt,gt),o.addText(e);let wt=o.build();wt.layout(g);let Ct=d;j===2?Ct+=(b-wt.getHeight())/2:j===3&&(Ct+=b-wt.getHeight()),rt.drawParagraph(wt,c,Ct),st=wt.getHeight(),o.reset(),wt.delete()},_e),ut.delete(),gt.delete(),st}drawText(e,o){let a=0,c=this._fonts.get(o.font),{ctx:d,_paintFill:g,_paintStroke:b}=this;if(c&&d){let j=new mt.TextStyle({fontFamilies:[o.font],fontSize:o.fontSize,heightMultiplier:o.lineHeight,letterSpacing:o.letterSpacing}),$=new mt.ParagraphStyle({textStyle:j,textAlign:this.getHorizontalAlign(o.horizontalAlign)}),_e=mt.XYWHRect(o.x,o.y,o.width,o.height),st=mt.ParagraphBuilder.Make($,c);g&&(a=this.drawTextInner(e,st,j,_e,o.verticalAlign,g,!0)),b&&(a=this.drawTextInner(e,st,j,_e,o.verticalAlign,b,!1)),st.delete()}return{height:a}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,o){var a;(a=this._currentPath)==null||a.moveTo(e,o)}lineTo(e,o){var a;(a=this._currentPath)==null||a.lineTo(e,o)}bezierCurveTo(e,o,a,c,d,g){var b;(b=this._currentPath)==null||b.cubicTo(e,o,a,c,d,g)}quadraticCurveTo(e,o,a,c){var d;(d=this._currentPath)==null||d.quadTo(e,o,a,c)}setTransform(e,o=!1){var d,g,b,j,$;if(!this.ctx)return;let a=this.ctx.getTotalMatrix(),c=zt.invert(a);if(c&&this.ctx.concat(c),(d=this.ctx)==null||d.scale(this.dpr,this.dpr),((g=this.camera)==null?void 0:g.enabled)&&((b=this.ctx)==null||b.concat(this.camera.worldMatrix),o)){let _e=zt.getScale(this.camera.worldMatrix);(j=this.ctx)==null||j.scale(1/_e[0],1/_e[1])}($=this.ctx)==null||$.concat(e),this.currentTransform=e}transform(e){var o;(o=this.ctx)==null||o.concat(e)}setSize(e,o){var a;e===this._width&&o===this._height||(this._width=e,this._height=o,this.canvas.style.width=e+"px",this.canvas.style.height=o+"px",this.canvas.width=e*this.dpr,this.canvas.height=o*this.dpr,this._surface&&(this._surface=mt.MakeWebGLCanvasSurface(this.canvas),this.ctx=(a=this._surface)==null?void 0:a.getCanvas()))}};function W3(e){for(let o=0;o<e.length;o++)if(e[o]!==void 0&&!Number.isFinite(e[o]))return!1;return!0}function Gx({r:e,g:o,b:a,a:c}){return mt.Color4f(e,o,a,c)}var Jm=class{constructor(e,o,a){this.uuid=e,this.data=o,this.enabled=!1,this.color=St.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(o)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},$m=class{constructor(e,o,a){this.uuid=e,this.data=o,this.enabled=!1,this.radius=0,this.update(o)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},jx=class{constructor(e,o,a){this.uuid=e,this.data=o,this.enabled=!1,this.color=St.transparent,this.update(o)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},Hx=class{constructor(e,o,a){this.uuid=e,this.data=o,this.enabled=!1,this.color=St.transparent,this.thickness=0,this.mode="inside",this.update(o)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},Ar$1=class extends Jt{constructor(o,a,c){super(o,a,c),this.uuid=o,this.data=a,this.autoClose=!0,this.fill=new jx(o+"-fill",a.fill,c),this.stroke=new Hx(o+"-stroke",a.stroke,c),this.dropShadow=new Jm(o+"-dropShadow",a.dropShadow,c),this.innerShadow=new Jm(o+"-innerShadow",a.innerShadow,c),this.backgroundBlur=new $m(o+"-backgroundBlur",a.backgroundBlur,c),this.layerBlur=new $m(o+"-layerBlur",a.layerBlur,c)}applyFillStroke(o){o.fillColor=this.fill.enabled?this.fill.color:St.transparent,o.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:St.transparent,o.strokeMode=this.stroke.mode,o.lineWidth=this.stroke.thickness}applyFilters(o){this.layerBlur.enabled?o.layerBlur=this.layerBlur.radius*5:o.layerBlur=0,this.backgroundBlur.enabled?o.backgroundBlur=this.backgroundBlur.radius*5:o.backgroundBlur=0,this.dropShadow.enabled?(o.dropShadowBlur=this.dropShadow.blurRadius*5,o.dropShadowColor=this.dropShadow.color,o.dropShadowOffsetX=this.dropShadow.offset[0],o.dropShadowOffsetY=this.dropShadow.offset[1]):o.dropShadowColor=St.transparent,this.innerShadow.enabled?(o.innerShadowSpread=this.innerShadow.spread,o.innerShadowBlur=this.innerShadow.blurRadius*5,o.innerShadowColor=this.innerShadow.color,o.innerShadowOffsetX=this.innerShadow.offset[0],o.innerShadowOffsetY=this.innerShadow.offset[1]):o.innerShadowColor=St.transparent}innerDraw(o){}draw(o){!this.visible||(o.save(),this.applyTransforms(o),this.applyFilters(o),this.applyFillStroke(o),o.beginPath(),this.innerDraw(o),this.autoClose&&o.closePath(),this.fill.enabled&&o.fill(),this.stroke.enabled&&o.stroke(),o.restore())}updateByPatchedOp(o,a,c){super.updateByPatchedOp(o,a,c),o.type===0&&(Rt(o.path,["fill"])?this.fill.update(o.props):Rt(o.path,["stroke"])?this.stroke.update(o.props):Rt(o.path,["dropShadow"])?this.dropShadow.update(o.props):Rt(o.path,["innerShadow"])?this.innerShadow.update(o.props):Rt(o.path,["layerBlur"])?this.layerBlur.update(o.props):Rt(o.path,["backgroundBlur"])?this.backgroundBlur.update(o.props):this.resetBBoxNeedsUpdate())}updateState(o,a){super.updateState(o,a),o.fill!==void 0&&this.fill.update(o.fill),o.stroke!==void 0&&this.stroke.update(o.stroke),o.dropShadow!==void 0&&this.dropShadow.update(o.dropShadow),o.innerShadow!==void 0&&this.innerShadow.update(o.innerShadow),o.layerBlur!==void 0&&this.layerBlur.update(o.layerBlur),o.backgroundBlur!==void 0&&this.backgroundBlur.update(o.backgroundBlur)}clone(o){let a=new Ar$1(this.uuid,this.data,o);return a.parent=void 0,a}},tc=class extends Ar$1{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this.width=0,this.height=0,this.updateState(o,a)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,o){return N3(e,o,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let o=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,o=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,o=!0),o&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,o){super.updateState(e,o),this.updateSizeState(e)}clone(e){let o=new tc(this.uuid,this.data,e);return o.parent=void 0,o}},Bs=class extends Ar$1{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(o,a)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let o=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,o=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,o=!0),o&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,o){super.updateState(e,o),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let o=new Bs(this.uuid,this.data,e);return o.parent=void 0,o}},rc=class extends Ar$1{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(o,a)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:St.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:St.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var g;(g=this._fontHolder)!=null&&g.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let o=this.data.textTransform,a=this.data.text.textValue.toString(),c=o===2?a.toUpperCase():o===3?a.toLowerCase():a,{height:d}=e.drawText(c,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=d}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let o=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,o=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,o=!0),o&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:o}){e.font!==void 0&&(this._fontHolder=o.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,o){super.updateState(e,o),this.updateSizeState(e),this.updateFontState(e,o)}clone(e){let o=new rc(this.uuid,this.data,e);return o.parent=void 0,o}},kf=class extends Ar$1{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(o,a)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(c=>Wx.extremas(c)),o=[1/0,1/0],a=[-1/0,-1/0];for(let c=0,d=e.length;c<d;c++){let g=e[c];g[0][0]<o[0]&&(o[0]=g[0][0]),g[0][1]<o[1]&&(o[1]=g[0][1]),g[1][0]>a[0]&&(a[0]=g[1][0]),g[1][1]>a[1]&&(a[1]=g[1][1])}return this.extremasBBox.min=[o[0],o[1]],this.extremasBBox.max=[a[0],a[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let a=1,c=this.data.points.length;a<c;a++){let d=this.data.points[a].data,g=this.data.points[a-1].data,b={start:g.position,cp1:g.controlNext.position,cp2:d.controlPrevious.position,end:d.position};this.curves.push(b)}let e=this.data.points[0].data,o=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let a={start:o.position,cp1:o.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(a)}}getCenter(){let[e,o]=this.extremasBBox.min,[a,c]=this.getHalfSize();return[e+a,o+c]}getHalfSize(){let{min:e,max:o}=this.extremasBBox;return[(o[0]-e[0])*.5,(o[1]-e[1])*.5]}innerDraw(e){for(let c=0,d=this.data.points.length;c<d;c++){let g=this.data.points[c].data;if(c===0){let[b,j]=g.position;e.moveTo(b,j)}else{let b=this.data.points[c-1].data,[j,$]=b.controlNext.position,[_e,st]=g.controlPrevious.position,[rt,ut]=g.position,gt={start:b.position,cp1:b.controlNext.position,cp2:g.controlPrevious.position,end:g.position};Wx.derive(gt),e.bezierCurveTo(j,$,_e,st,rt,ut)}}let o=this.data.points[0].data,a=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[c,d]=a.controlNext.position,[g,b]=o.controlPrevious.position,[j,$]=o.position;e.bezierCurveTo(c,d,g,b,j,$)}}updateState(e,o){super.updateState(e,o),this.computeExtremas()}clone(e){let o=new kf(this.uuid,this.data,e);return o.parent=void 0,o}},Wx;(e=>{function o(b){let j=b.start,$=b.cp1,_e=b.cp2,st=b.end,rt=[3*($[0]-j[0]),3*($[1]-j[1])],ut=[3*(_e[0]-$[0]),3*(_e[1]-$[1])],gt=[3*(st[0]-_e[0]),3*(st[1]-_e[1])],yt={start:rt,cp:ut,end:gt};return b.derivative=yt,yt.derivative=W_.derive(yt),yt}e.derive=o;function a(b,j,$,_e=!1){let st=b-2*j+$;if(st!==0){let rt=-Math.sqrt(Math.abs(j*j-b*$)),ut=-b+j,gt=-(rt+ut)/st,yt=-(-rt+ut)/st;return[gt,yt]}else if(j!==$&&st===0)return[(2*j-$)/(2*(j-$))];return[]}function c(b){let j=b.derivative??e.derive(b),$=j.start,_e=j.cp,st=j.end;return[a($[0],_e[0],st[0]),a($[1],_e[1],st[1])]}e.droot=c;function d(b){let[j,$]=e.droot(b),_e=[b.start[0],b.end[0]],st=[b.start[1],b.end[1]];for(let rt of j)_e.push(e.compute(b,Math.min(1,Math.max(0,rt)))[0]);for(let rt of $)st.push(e.compute(b,Math.min(1,Math.max(0,rt)))[1]);return _e.sort((rt,ut)=>rt-ut),st.sort((rt,ut)=>rt-ut),[[_e[0],st[0]],[_e[_e.length-1],st[st.length-1]]]}e.extremas=d;function g(b,j){if(j===0)return[...b.start];if(j===1)return[...b.end];let $=1-j,_e=$*$,st=j*j,rt=_e*$,ut=_e*j*3,gt=$*st*3,yt=j*st;return[rt*b.start[0]+ut*b.cp1[0]+gt*b.cp2[0]+yt*b.end[0],rt*b.start[1]+ut*b.cp1[1]+gt*b.cp2[1]+yt*b.end[1]]}e.compute=g})(Wx||(Wx={}));var W_;(e=>{function o(d){let g=d.start,b=d.cp,j=d.end,$=[2*(b[0]-g[0]),2*(b[1]-g[1])],_e=[2*(j[0]-b[0]),2*(j[1]-b[1])],st={start:$,end:_e};return st.derivative=q_.derive(st),d.derivative=st,st}e.derive=o;function a(d){let g=d.derivative??e.derive(d),b=g.start,j=g.end;return[b[0]!==j[0]?b[0]/(b[0]-j[0]):0,b[1]!==j[1]?b[1]/(b[1]-j[1]):0]}e.droot=a;function c(d,g){if(g===0)return[...d.start];if(g===1)return[...d.end];let b=1-g,j=b*b,$=g*g,_e=j,st=b*g*2,rt=$;return[_e*d.start[0]+st*d.cp[0]+rt*d.end[0],_e*d.start[1]+st*d.cp[1]+rt*d.end[1]]}e.compute=c})(W_||(W_={}));var q_;(e=>{function o(c){let d=c.start,g=c.end,b=[g[0]-d[0],g[1]-d[1]];return c.derivative=b,c.derivative}e.derive=o;function a(c,d){if(d===0)return[...c.start];if(d===1)return[...c.end];let g=c.start,b=c.end;return[g[0]+(b[0]-g[0])*d,g[1]+(b[1]-g[1])*d]}e.compute=a})(q_||(q_={}));var an=class extends yn{constructor(e,o,a){super(e,o,a),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Bs(e+"-background",dd.defaultData,a),this.background.parent=this,this.updateState(o,a)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,o,a){var c;super.updateWorldMatrix(e,o,a),(c=this.background)==null||c.updateWorldMatrix(e,o,a)}draw(e){if(!this.visible)return;e.save();let o=this.width,a=this.height;this.applyTransforms(e),this.background.width=o,this.background.height=a,this.background.draw(e),this.clipped&&e.clipRect(0,0,o,a,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let o=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,o=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,o=!0),o&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,o){super.updateState(e,o),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,o,a){super.updateByPatchedOp(e,o,a),e.type===0&&(Rt(e.path,["fill"])?this.fill.update(e.props):Rt(e.path,["stroke"])?this.stroke.update(e.props):Rt(e.path,["dropShadow"])?this.dropShadow.update(e.props):Rt(e.path,["innerShadow"])?this.innerShadow.update(e.props):Rt(e.path,["layerBlur"])?this.layerBlur.update(e.props):Rt(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let o=new an(this.uuid,this.data,e);o.parent=void 0;for(let a of this.children)o.add(a.clone(e));return o}},Q3=pi(Y_(),1),qa=class extends Ar$1{constructor(e,o,a){super(e,o,a),this.uuid=e,this.data=o,this._pathBBox=new DOMRect,this.path="",this.updateState(o,a),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),o.setAttribute("d",this.path),e.appendChild(o),this._pathBBox=o.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,o){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&o>=this._pathBBox.y&&o<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,o){super.updateState(e,o),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let o=new qa(this.uuid,this.data,e);return o.parent=void 0,o}};function K3(e,o=1,a=1){if(o<=0||a<=0)return e;let c=(0,Q3.parseSVG)(e).map(d=>{let g={...d};return"x"in g&&(g.x=g.x*o),"y"in g&&(g.y=g.y*a),"x1"in g&&(g.x1=g.x1*o),"x2"in g&&(g.x2=g.x2*o),"y1"in g&&(g.y1=g.y1*a),"y2"in g&&(g.y2=g.y2*a),"rx"in g&&(g.rx=g.rx*o),"ry"in g&&(g.ry=g.ry*a),g});return Z3(c)}function Z3(e){let o=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],a;return e.map(c=>{let d=[];o.forEach(b=>{if(b in c){let j=c[b]*1;d.length&&j>=0&&d.push(","),d.push(j)}});let g=(a===c.code?d[0]<0?"":",":c.code)+d.join("");return a=c.code,g}).join("")}function J3(e,o,a){switch(o.type){case"ellipse2d":return new tc(e,o,a);case"rectangle2d":return new Bs(e,o,a);case"text2d":return new rc(e,o,a);case"vector2d":return new kf(e,o,a);case"path2d":return new qa(e,o,a);case"frame2d":return new an(e,o,a);case"group2d":default:return new Ln(e,o,a)}}var X_=class{constructor(e,o,a){this.uuid=e,this.data=o,this.group=new Ln(X_.GROUP_ID,{...lm.defaultData},a),this.createChildrenObjects(o.objects,this.group,a)}createObject(e,o,a,c,d,g){let b=J3(e,o,g);b&&(c.add(b),c.children.splice(d,0,c.children.pop()),b.updateWorldMatrix(),a.length>0&&(b instanceof Ln||b instanceof an)&&this.createChildrenObjects(a,b,g))}createChildrenObjects(e,o,a){let c=0;for(let d of e)this.createObject(d.id,d.data,d.children,o,c,a),c+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,o,a,c){let d=this.find(e);if(d)try{d.updateByOp(o,a,{shared:c})}catch(g){console.error(g)}}updateTreeByOp(e,o){if(e.path.length===0&&e.type===7){let a=e.parent===null?this.group:this.find(e.parent);a!==void 0&&a instanceof yn&&(this.createObject(e.id,e.data,e.children,a,e.localIndex,o),a.requestRender())}else if(e.path.length===0&&e.type===8){let a=this.find(e.id);if(a!==void 0&&a.parent!==void 0&&a.parent instanceof yn){let c=a.parent;a.resetBBoxNeedsUpdate(),c==null||c.remove(a),c==null||c.requestRender()}}else if(e.path.length===0&&e.type===9){let a=this.find(e.id);if(a!==void 0){let c=a.parent,d=e.parent===null?this:this.find(e.parent);if(d instanceof yn||d===this){d.add(a);let g=e.localIndex;d.children.splice(g,0,d.children.pop()),a.updateWorldMatrix(!0,!1,!0),c==null||c.requestRender(),a.requestRender()}a.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(o=>{o!==this.group&&e(o)})}intersectsChildren(e,o,a,c=!1,d=[]){return this.group.intersectsChildren(e,o,a,c,d,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,o){return this.group.project(e,o)}getWithSortKey(e){let o=this.find(e);if(o===void 0)return;let a=[],c=o;for(;c!==this.group;){let d=c;c=c.parent;let g=c.children.indexOf(d);a.splice(0,0,g)}return{entity:o,sortKey:a}}getAllSorted(e){let o=[];for(let a of e){let c=this.getWithSortKey(a.id);c!==void 0&&o.push(c)}return o.sort((a,c)=>bv(a.sortKey,c.sortKey)),o.map(a=>a.entity)}},lu=X_;lu.GROUP_ID="scene2d";function Q_({constraints:e,newParentWidth:o,newParentHeight:a,initialParentWidth:c,initialParentHeight:d,objectInitialWidth:g,objectInitialHeight:b,objectInitialPosition:j}){let{horizontalConstraint:$,verticalConstraint:_e}=e,st=o-c,rt=a-d,ut=g,gt=b,yt=j[0],wt=j[1];if($!==0){if($===1)yt+=st;else if($===3)yt+=st/2;else if($===2)ut=Math.max(1,ut+st);else if($===4){let Ct=o/c;ut*=Ct,yt*=Ct}}if(_e!==0){if(_e===1)wt+=rt;else if(_e===3)wt+=rt/2;else if(_e===2)gt=Math.max(1,gt+rt);else if(_e===4){let Ct=a/d;gt*=Ct,wt*=Ct}}return{width:ut,height:gt,position:[yt,wt]}}pi(Y_(),1);var tK=zt.identity(),Vf=class{constructor(e,o,a,c){this.uuid=e,this.width=o,this.height=a,this.context=c,this.enabled=!0,this.isScreenSpace=!1,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this.onFrameOverrideObjectEvent=d=>{var g,b;if(((g=d.target)==null?void 0:g.uuid)!==void 0){let j=(b=this.frameRoot)==null?void 0:b.find(d.target.uuid);j&&j.dispatchEvent({...d,target:j})}},this.scene2d=new lu(Me.generateUUID(),p0.defaultData,{dpr:window.devicePixelRatio,shared:c.shared}),this.canvas=document.createElement("canvas"),this.renderer=new Zm(this.canvas),c.shared.addCanvas(this.uuid,this.canvas),this.textureHolder=c.shared.canvas(this.uuid),this.promise=this.init()}async init(){this.renderer instanceof Zm&&(this.renderer.wasmURL=tx.skiaWasmUrl),await this.renderer.init()}render(){var e,o;this.isFrameDirty&&(this.renderer.clear(),(e=this.frameOverride)==null||e.draw(this.renderer),this.renderer.render(),(o=this.textureHolder)==null||o.setNeedsUpdate(!0),this.isFrameDirty=!1)}updateEntity2DByOp(e,o,a,c){this.scene2d.updateEntityByOp(e,o,a,c),this.applySize()}updateTreeByOp(e,o){this.scene2d.updateTreeByOp(e,o),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let o=(e==null?void 0:e.width)??this.width,a=(e==null?void 0:e.height)??this.height;this.frameOverride.width=o,this.frameOverride.height=a,this.frameOverride.localMatrix=tK,this.isScreenSpace&&(this.frameOverride.fill.color=St.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:o,height:a},$3({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e){var c,d;let o=(e==null?void 0:e.width)??this.width,a=(e==null?void 0:e.height)??this.height;this.width=o,this.height=a,this.renderer.dpr=this.isScreenSpace?window.devicePixelRatio:Math.floor(2048/Math.max(o,a)),this.renderer.setSize(o,a),(c=this.textureHolder)==null||c.dispose(),this.applyOverrides(e),(d=this.frameOverride)==null||d.requestRender()}applyFrame(e){var a,c,d;let o=this.context.scene.find2D(e);if(!(!o||!(o instanceof an)))return this.disposeFrameOverride(),this.frameRoot=o,this.frameOverride=o.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(a=this.textureHolder)==null||a.dispose(),(c=this.frame)==null||c.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(g=>{g.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(g=>{g.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(d=this.frame)==null||d.requestRender(),o}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,o,a;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(o=this.frameOverride)==null||o.traverse(c=>{c.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(a=this.frameOverride)==null||a.traverse(c=>{c.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function $3({objectOverride:e,objectRoot:o,newParentWidth:a,newParentHeight:c,initialParentWidth:d,initialParentHeight:g}){if(e instanceof an&&o instanceof an||e instanceof Ln&&o instanceof Ln)for(let b=0,j=e.children.length;b<j;b++){let $=e.children[b],_e=o.children[b];$&&_e&&$.uuid===_e.uuid&&iK({objectOverride:$,objectRoot:_e,newParentWidth:a,newParentHeight:c,initialParentWidth:d,initialParentHeight:g})}}function rK(e){if(K_(e))return[e.width,e.height];if(e instanceof qa){let[o,a]=e.getHalfSize();return[o*2,a*2]}else if(e instanceof Ln){let[o,a]=e.recursiveBBox.getHalfSize();return[o*2,a*2]}return[0,0]}function iK({objectOverride:e,objectRoot:o,newParentWidth:a,newParentHeight:c,initialParentWidth:d,initialParentHeight:g}){let[b,j]=rK(o),{width:$,height:_e,position:st}=Q_({constraints:e.data,newParentWidth:a,newParentHeight:c,initialParentWidth:d,initialParentHeight:g,objectInitialWidth:b,objectInitialHeight:j,objectInitialPosition:o.position});if(e.position=st,e.data={...e.data,position:st},e.states)for(let rt in e.states)nK({stateId:rt,objectOverride:e,objectRoot:o,newParentWidth:a,newParentHeight:c,initialParentWidth:d,initialParentHeight:g});if(K_(e)||e instanceof Ln)K_(e)&&(e.width=$,e.height=_e,e.data={...e.data,width:$,height:_e}),$3({objectOverride:e,objectRoot:o,newParentWidth:$,newParentHeight:_e,initialParentWidth:b,initialParentHeight:j});else if(e instanceof qa){let rt=o,ut=b!==0?$/b:1,gt=j!==0?_e/j:1;e.path=K3(rt.path,ut,gt),e.data={...e.data,path:e.path}}}function nK({stateId:e,objectOverride:o,objectRoot:a,newParentWidth:c,newParentHeight:d,initialParentWidth:g,initialParentHeight:b}){var _e,st;let j=(_e=o.states)==null?void 0:_e[e],$=(st=a.states)==null?void 0:st[e];if(j&&$){let{width:rt,height:ut,position:gt}=Q_({constraints:o.data,newParentWidth:c,newParentHeight:d,initialParentWidth:g,initialParentHeight:b,objectInitialWidth:Na.isResizeable($)?$.width:0,objectInitialHeight:Na.isResizeable($)?$.height:0,objectInitialPosition:$.position});Object.assign(o.states[e],{position:gt}),Na.isResizeable(j)&&Object.assign(o.states[e],{width:rt,height:ut})}}function K_(e){return e instanceof Bs||e instanceof an||e instanceof tc||e instanceof rc}var mr=class extends Pd(Pi){constructor(e,o,a){super(),this.data=o,this.bgColor=new xr$1(1,1,1,1),this.fog=null,this.backupFog=new qu(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new We,this.penumbraSizeArrayCache=null,this.super_Entity(e,o),this.personalCamera=new wr$1(As,{...Vc.defaultData,...o.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Iy(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),o.uiScene?this.uiScene=new lu((Array.isArray(e)?e[0]:e)+"-ui",o.uiScene,{dpr:window.devicePixelRatio,shared:a.shared}):o.uiFrame&&this.createUICanvas(o.uiFrame,a)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,o){this.uiCanvas=new Vf(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,o),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var a,c;(a=this.uiCanvas)==null||a.applyFrame(e),(c=this.uiCanvas)==null||c.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,o){e.color!==void 0&&(this.ambientLight.color=on(e.color,o)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(o=>{o instanceof qn&&o.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Ps)if(Array.isArray(e.material))for(let o of e.material)o.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&O3(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,o){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let a=this.scene;a.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=on(e.color,o),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,o){e.aoColor!==void 0&&(this.aoColor=on(e.aoColor,o))}updateByOp(e,o,a,c){let d=this.data.uiFrame;super.updateByOp(e,o,a,c);let g=o;Rt(e.path,["fog"])?this.updateFog(g.fog,a.shared):Rt(e.path,["ao"])?this.updateAo(g.ao,a.shared):Rt(e.path,["ambient"])?this.updateAmbientLight(g.ambient,a.shared):Rt(e.path,["shadow"])?this.updateShadow(g.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||d!==g.uiFrame)&&this.updateUIFrame(e.props.uiFrame,a)}updateUIFrame(e,o){e?(this.uiCanvas||this.createUICanvas(e,o),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,o){this.updateState_Entity(e,o),e.backgroundColor!==void 0&&this.setBackgroundColor(on(e.backgroundColor,o.shared)),e.fog!==void 0&&this.updateFog(e.fog,o.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,o.shared),e.ao!==void 0&&this.updateAo(e.ao,o.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,o){}raycast(e,o){super.raycast(e,o)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,o=0;this.traverseEntity(a=>{if(!a.visible)return!0;a instanceof Nf&&a.visible&&e<3&&(this.penumbraSizeArrayCache[e]=a.data.penumbraSize,e+=1),a instanceof Ff&&a.visible&&e<2&&(this.penumbraSizeArrayCache[3+o]=a.data.penumbraSize,o+=1)})}raycastWithClones(e){let o=[],a=c=>{for(let d of c.children){let g=d.cloner;vt.is(d)&&(d.visible||g!=null&&g.object.data.visible)&&((mn(d)||Wm(d)&&this.scene.enableHelpers&&d.objectHelper.visible)&&(e.intersectObject(d,!1,o),eg(d,e,o,!0)),a(d))}};return a(this),o}updateEntity2DByOp(e,o,a,c){var d;(d=this.uiCanvas)==null||d.updateEntity2DByOp(e,o,a,c)}},Yx=class extends Sf(Ly,Bf){constructor(e,o,a){super(),this.super_Entity(e,o),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let c=this.shadow.camera;c.fov=90,c.aspect=1,c.near=100,c.far=2500;let d=new _(-c.far+this.position.x,-c.far+this.position.y,-c.far+this.position.z),g=new _(c.far+this.position.x,c.far+this.position.y,c.far+this.position.z),b=new Wt(d,g),j=new vl(b,new We(16755200));j.visible=!1,this.gizmos.shadowmap=j,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let o=this.gizmos[e];if(o instanceof vl){let a=this.shadow.camera,c=new _(-a.far+this.position.x,-a.far+this.position.y,-a.far+this.position.z),d=new _(a.far+this.position.x,a.far+this.position.y,a.far+this.position.z);o.box.set(c,d),o.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,o){this.updateState_Light(e,o),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Xx=class extends ur{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,o){let a=this.geometry.getAttribute("position");a!==void 0?Cm(a,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:a.count,e,o):super.updateEntityBoxSize(e,o)}},ic=class extends ur{constructor(e,o,a){super(e,o,a),this._shapeId=null,this._context=a}updateState(e,o){super.updateState(e,o),this.updateShape()}updateShape(){var c;let e={...this.data.geometry.extrusion.shape};for(let d in e)typeof e[d]=="string"&&(e[d]=this._context.shared.getVariable(e[d],[this.uuid,"geometry","extrusion","shape",d]));let o;if(e.type==="Custom"){let d=e.shapeId;if(d!==this._shapeId&&this.detachShape(),d){this._shapeId=d;let g=this._context.scene.find(d);g!=null&&g.data&&(g.attachedPaths.add(this),o=(c=g.geometry.userData)==null?void 0:c.shape),o||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let d;switch(e.type){case"Rectangle":d=zd;break;case"Ellipse":d=Fd;break;case"Polygon":d=G0;break;case"Star":d=j0;break;default:throw new Error(`Unknown shape type: ${e.type}`)}o=d.create({parameters:e}).userData.shape}let a=this.geometry;o&&a.inputs&&(a.inputs.shapeData=o,a.build(),this.attachedSurfaceCloners.forEach(d=>d.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,o){return super.updateTransformState(e,o)}updateGeometryInteractions(e,o){super.updateGeometryInteractions(e,o),this.updateShape()}updateEntityBoxSize(e,o){let a=this.geometry.getAttribute("position");a!==void 0?Cm(a,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:a.count,e,o):super.updateEntityBoxSize(e,o)}},uo=class extends Is(ps,Rs){constructor(e,o,a){super(),o.type==="Instance"&&typeof e=="string"&&(o=this.transformAssignData(o,a)),this.super_Entity(e,o),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,o){let a=sd.getComponentData({scene:o.scene.data,shared:o.shared.data},e.component);if(a){let c,d;for(let g of No.rootOverrideProps)e[g]===void 0?(c===void 0&&(c={...e}),c[g]=a.data[g]):(d===void 0&&(d={}),d[g]=e[g],c===void 0&&(c={...e}),c[g]=Co.apply(a.data[g],e[g]));return this.overrideData=d,c}else return{...Li.defaultData,...e,...as(Li.defaultData,No.rootOverrideProps)}}updateByOp(e,o,a,c){let d;if(this.isInstanceRoot&&!c){if(o=this.transformAssignData(o,a),e.type===0&&e.path.length===0&&this.component)for(let g of No.rootOverrideProps)g in e.props&&e.props[g]===void 0&&(d===void 0&&(d={...e,props:{...e.props}}),d.props[g]=this.component.data[g]);else if(e.type===0&&e.path.length>0&&No.rootOverrideProps.includes(e.path[0])){let g=e.path[0];d===void 0&&(d={...e,path:[],props:{[g]:o[g]}})}}super.updateByOp(d??e,o,a,c)}updateState(e,o){this.updateState_Entity(e,o)}expandInstanceChildren(e){let o=this.data;if(this.component===void 0){let a=e.scene.find(o.component)??null,c=!1;if(a!==this.oldComponent){if(this.oldComponent){let d=0;for(let g of this.children)if(vt.is(g))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(g),Qx(g),d+=1;else break;this.children.splice(0,d)}c=!0}if(a){let d={};tL(e,[this.uuid],o.overrides,this,a,a,0,c,d);for(let g of this.children)if(vt.is(g)){let b=g.data;b.type==="Empty"&&b.animations&&g.traverseEntity(j=>{if(j instanceof ur&&j.isSkinnedMesh){let $=j.dataPatched;if($.bones&&$.boneInverses){let _e=$.bones.map(ut=>e.scene.find(d[ut])),st=$.boneInverses.map(ut=>new ce$1().fromArray(ut)),rt=new ul(_e,st);j.bind(rt,j.bindMatrix)}}else j.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Qx(e){if(e.component){let o=e.component.instances.indexOf(e);o>=0&&e.component.instances.splice(o,1);for(let a of e.children)vt.is(a)&&Qx(a)}}function eL(e,o,a,c){return e.component===o&&Xp(e.identity,c)?e.overrideData===a?2:1:0}function tL(e,o,a,c,d,g,b,j,$){if(b>50)return!1;if(c.component!==d){if(c.component){let st=c.component.instances.indexOf(c);st>=0&&c.component.instances.splice(st,1)}d.instances.push(c),c.component=d}d instanceof uo&&d.isInstanceRoot&&d.expandInstanceChildren(e);let _e=0;for(let st of d.children)if(vt.is(st)){let rt=[...o,...typeof st.identity=="string"?[st.identity]:st.identity],ut=id$2.resolve(a,rt,1);ut!=null&&!(ut instanceof vr)&&(Object.setPrototypeOf(ut,vr.prototype),console.error("wrong prototype"));let gt=null,yt;if(!j){let wt=c.children[_e];if(gt=vt.is(wt)?wt:null,gt!==null){let Ct=eL(gt,st,ut,rt);yt=Ct>=1?gt.stateSelection:void 0,Ct!==2&&(gt=null)}if(gt===null&&(gt=e.scene.findInstance(rt)??null,gt!==null)){let Ct=eL(gt,st,ut,rt);if(yt=Ct>=1?gt.stateSelection:void 0,Ct!==2)gt=null;else{let Pt=gt.parent.children.indexOf(gt);gt.parent.children.splice(Pt,1),c.children.splice(_e,0,gt),gt.parent===c?Pt<=_e&&console.error("not possible"):(gt.parent=c,gt.matrixWorldNeedsUpdate=!0,gt.resetBBoxNeedsUpdate(),gt.updateVisible(),e.pendingDeletes.delete(gt))}}}if(gt===null){let wt=ut?Co.apply(st.data,ut):st.data;Ks.is(wt.type)&&(wt={...wt,type:"Empty"}),gt=eo.createEntity(rt,wt,e),gt.overrideData=ut,c.add(gt),c.children.splice(c.children.length-1,1),c.children.splice(_e,0,gt),gt.updateState(gt.data,e),yt&&gt.changeSelectedState(yt,e),e.scene.registerInstanceAndSetUuid(gt)}if(gt.isBone){let wt=gt.identity[gt.identity.length-1];$[wt]=gt.uuid}_e+=1,tL(e,o,a,gt,st,g,b+1,j,$)}if(!j){let st=_e;for(;;){let rt=c.children[_e];if(vt.is(rt))e.pendingDeletes.add(rt);else break;_e+=1}c.children.splice(st,_e-st)}return!0}var Kx=class extends Is(Cp,Rs){constructor(e,o){super(),this.super_Entity(e,o),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,o){this.updateState_Entity(e,o)}},_r$1=class extends ur{constructor(o,a,c){super(o,a,c),this.onBeforeRender=()=>{this.uiCanvas.render()},this.uiCanvas=new Vf(o+"-canvas",a.geometry.width,a.geometry.height,c),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,c.shared)})}updateByPatchedOpGeometry(o,a,c){super.updateByPatchedOpGeometry(o,a,c),o.type===0&&(o.props.frame!==void 0&&this.applyFrame(o.props.frame,c.shared),(o.props.width!==void 0||o.props.height!==void 0)&&this.applySize(o.props,c.shared))}applySize(o,a){let c=(o==null?void 0:o.width)??this.dataPatched.geometry.width,d=(o==null?void 0:o.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:c,height:d}),this.applyGeometryParametersFromFrame(a)}applyFrame(o,a){this.uiCanvas.applyFrame(o),this.applyGeometryParametersFromFrame(a),this.applyMaterialParametersFromFrame({shared:a})}applyGeometryParametersFromFrame(o){var c;let a=this.frame;a&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:a.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:a.cornerRadius,cornerType:0})}),(c=this.localGeometry)==null||c.dispose(),this.localGeometry=Va(this.dataPatched.geometry,o,this.data.flatShading,this))}applyMaterialParametersFromFrame(o){let a=this.frame;if(a){let c=a.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:c.radius,alpha:c.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:c.radius,alpha:c.enabled?1:0}),this.material.reset(this.dataPatched.material,o,!0)}}updateEntity2DByOp(o,a,c,d){this.uiCanvas.updateEntity2DByOp(o,a,c,d),o===this.frameId&&a.type===0&&(a.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(d):Rt(a.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:d}))}get frame(){return this.uiCanvas.frame}get frameId(){var o;return(o=this.frame)==null?void 0:o.uuid}removeInteractionGeometry(o){super.removeInteractionGeometry(o),this.applySize({},o)}updateGeometryInteractions(o,a){super.updateGeometryInteractions(o,a),this.applySize({width:o.width,height:o.height},a)}},Zx=class{constructor(e,o,a){this.variables=[],this.currentTextureIndex=0;let c=Sr$1,d=new Pi,g=new rs;g.position.z=1;let b={passThruTexture:{value:null}},j=st(ut(),b),$=new sr(new wn(2,2),j);d.add($),this.setDataType=function(gt){return c=gt,this},this.addVariable=function(gt,yt,wt){let Ct=this.createShaderMaterial(yt),Pt={name:gt,initialValueTexture:wt,material:Ct,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Vt,magFilter:Vt};return this.variables.push(Pt),Pt},this.setVariableDependencies=function(gt,yt){gt.dependencies=yt},this.init=function(){if(a.capabilities.isWebGL2===!1&&a.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(a.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let gt=0;gt<this.variables.length;gt++){let yt=this.variables[gt];yt.renderTargets[0]=this.createRenderTarget(e,o,yt.wrapS,yt.wrapT,yt.minFilter,yt.magFilter),yt.renderTargets[1]=this.createRenderTarget(e,o,yt.wrapS,yt.wrapT,yt.minFilter,yt.magFilter),this.renderTexture(yt.initialValueTexture,yt.renderTargets[0]),this.renderTexture(yt.initialValueTexture,yt.renderTargets[1]);let wt=yt.material,Ct=wt.uniforms;if(yt.dependencies!==null)for(let Pt=0;Pt<yt.dependencies.length;Pt++){let At=yt.dependencies[Pt];if(At.name!==yt.name){let Tt=!1;for(let kt=0;kt<this.variables.length;kt++)if(At.name===this.variables[kt].name){Tt=!0;break}if(!Tt)return"Variable dependency not found. Variable="+yt.name+", dependency="+At.name}Ct[At.name]={value:null},wt.fragmentShader=`
uniform sampler2D `+At.name+`;
`+wt.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let gt=this.currentTextureIndex,yt=this.currentTextureIndex===0?1:0;for(let wt=0,Ct=this.variables.length;wt<Ct;wt++){let Pt=this.variables[wt];if(Pt.dependencies!==null){let At=Pt.material.uniforms;for(let Tt=0,kt=Pt.dependencies.length;Tt<kt;Tt++){let It=Pt.dependencies[Tt];At[It.name].value=It.renderTargets[gt].texture}}this.doRenderTarget(Pt.material,Pt.renderTargets[yt])}this.currentTextureIndex=yt},this.getCurrentRenderTarget=function(gt){return gt.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(gt){return gt.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){$.geometry.dispose(),$.material.dispose();let gt=this.variables;for(let yt=0;yt<gt.length;yt++){let wt=gt[yt];wt.initialValueTexture&&wt.initialValueTexture.dispose();let Ct=wt.renderTargets;for(let Pt=0;Pt<Ct.length;Pt++)Ct[Pt].dispose()}};function _e(gt){gt.defines.resolution="vec2( "+e.toFixed(1)+", "+o.toFixed(1)+" )"}this.addResolutionDefine=_e;function st(gt,yt){yt=yt||{};let wt=new lt({uniforms:yt,vertexShader:rt(),fragmentShader:gt});return _e(wt),wt}this.createShaderMaterial=st,this.createRenderTarget=function(gt,yt,wt,Ct,Pt,At){return gt=gt||e,yt=yt||o,wt=wt||Kt,Ct=Ct||Kt,Pt=Pt||Vt,At=At||Vt,new ft(gt,yt,{wrapS:wt,wrapT:Ct,minFilter:Pt,magFilter:At,format:Qr,type:c,depthBuffer:!1})},this.createTexture=function(){let gt=new Float32Array(e*o*4),yt=new xi(gt,e,o,Qr,Sr$1);return yt.needsUpdate=!0,yt},this.renderTexture=function(gt,yt){b.passThruTexture.value=gt,this.doRenderTarget(j,yt),b.passThruTexture.value=null},this.doRenderTarget=function(gt,yt){let wt=a.getRenderTarget(),Ct=a.xr.enabled,Pt=a.shadowMap.autoUpdate,At=a.outputEncoding,Tt=a.toneMapping;a.xr.enabled=!1,a.shadowMap.autoUpdate=!1,a.outputEncoding=Sn,a.toneMapping=Hs,$.material=gt,a.setRenderTarget(yt),a.render(d,g),$.material=j,a.xr.enabled=Ct,a.shadowMap.autoUpdate=Pt,a.outputEncoding=At,a.toneMapping=Tt,a.setRenderTarget(wt)};function rt(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function ut(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},ln=new Dr$1,Jx=new _,$x=class{constructor(e){let o=e.geometry;if(!o.isBufferGeometry||o.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");o.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),o=o.toNonIndexed()),this.geometry=o,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,o=this.weightAttribute,a=new Float32Array(e.count/3);for(let d=0;d<e.count;d+=3){let g=1;o&&(g=o.getX(d)+o.getX(d+1)+o.getX(d+2)),ln.a.fromBufferAttribute(e,d),ln.b.fromBufferAttribute(e,d+1),ln.c.fromBufferAttribute(e,d+2),g*=ln.getArea(),a[d/3]=g}this.distribution=new Float32Array(e.count/3);let c=0;for(let d=0;d<a.length;d++)c+=a[d],this.distribution[d]=c;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,o,a){let c=this.distribution[this.distribution.length-1],d=this.binarySearch(this.randomFunction()*c);return this.sampleFace(d,e,o,a)}binarySearch(e){let o=this.distribution,a=0,c=o.length-1,d=-1;for(;a<=c;){let g=Math.ceil((a+c)/2);if(g===0||o[g-1]<=e&&o[g]>e){d=g;break}else e<o[g]?c=g-1:a=g+1}return d}sampleFace(e,o,a,c){let d=this.randomFunction(),g=this.randomFunction();return d+g>1&&(d=1-d,g=1-g),ln.a.fromBufferAttribute(this.positionAttribute,e*3),ln.b.fromBufferAttribute(this.positionAttribute,e*3+1),ln.c.fromBufferAttribute(this.positionAttribute,e*3+2),o.set(0,0,0).addScaledVector(ln.a,d).addScaledVector(ln.b,g).addScaledVector(ln.c,1-(d+g)),a!==void 0&&ln.getNormal(a),c!==void 0&&this.colorAttribute!==void 0&&(ln.a.fromBufferAttribute(this.colorAttribute,e*3),ln.b.fromBufferAttribute(this.colorAttribute,e*3+1),ln.c.fromBufferAttribute(this.colorAttribute,e*3+2),Jx.set(0,0,0).addScaledVector(ln.a,d).addScaledVector(ln.b,g).addScaledVector(ln.c,1-(d+g)),c.r=Jx.x,c.g=Jx.y,c.b=Jx.z),this}};function rL(e){let o=new Float32Array(e*e*2);for(let a=0;a<e;a++)for(let c=0;c<e;c++){let d=a*e+c;o[d*2+0]=a/(e-1),o[d*2+1]=c/(e-1)}return o}function iL(e){let o=Math.ceil(Math.sqrt(e));return Math.max(o,1)}function nL(e,o){let a=new sr(e.geometry,e.material),c=[],d=[],g=new _,b=new _;a.geometry.index!==null&&(a.geometry=a.geometry.toNonIndexed());let j=new $x(a).build();for(let st=0;st<o;st++)j.sample(g,b),c.push(g.x,g.y,g.z),d.push(b.x,b.y,b.z);let $=new Float32Array(c),_e=new Float32Array(d);return{positions:$,normals:_e}}function Z_(e,o){let a=e,c=new Float32Array(4*o*o);for(let g=0;g<o*o;g++)c[4*g]=a[3*g],c[4*g+1]=a[3*g+1],c[4*g+2]=a[3*g+2],c[4*g+3]=0;let d=new xi(c,o,o,Qr,Sr$1);return d.needsUpdate=!0,d}function sL({size:e}){let o=new Float32Array(4*e*e);for(let c=0;c<e*e;c++)o[4*c]=c,o[4*c+1]=0,o[4*c+2]=0,o[4*c+3]=0;let a=new xi(o,e,e,Qr,Sr$1);return a.needsUpdate=!0,a}function oL(e){let o=new Float32Array(4*e*e);for(let c=0;c<e*e;c++)o[4*c]=0,o[4*c+1]=0,o[4*c+2]=0,o[4*c+3]=0;let a=new xi(o,e,e,Qr,Sr$1);return a.needsUpdate=!0,a}var aL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,lL=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,cL=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,uL=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,hL=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,dL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+lL+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          float offset = 0.0;
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), offset);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          float offset = 0.0;
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${cL}
      // ATTRACTION
      ${uL}  
      // VORTEX
      ${hL}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,J_=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,fL=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,pL=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,mL=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${fL}
  ${J_}
`,gL=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,yL=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+J_+`  
  ${pL}

`,vL=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,eb=class extends lt{constructor(e,o){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,o),this.context=o}reset(){}init(e,o){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],this.lightLayer=new On(0,"",{...Hr.defaultData("light","phong"),visible:!1},new za,{},o.shared),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new Kd;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(QI),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(KI),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(mL),e.addFragmentParsCode(yL),e.addVertexFinalCode(gL({easeSize:this.easeSize})),e.addFragmentFinalCode(vL({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},zf=class{constructor(e,o,a,c){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=a,this.textureSize=iL(o);let d=1;this.targetMesh=(c==null?void 0:c.type)==="Mesh"&&c?c:this.getMesh(a,d);let{positions:g,dataTexture:b,dataTextureNormals:j}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(a,d));this.positionsTexture=b,this.positionsAttribute=g,this.directionsTexture=j}createPositions(e,o){let{positions:a,normals:c}=nL(o,e*e),d=Z_(a,e),g=Z_(c,e);return{dataTexture:d,positions:a,dataTextureNormals:g}}getMesh(e,o){let a=null;switch(e){case"SphereEmitterShape":{a=new Ys(o*.5,32,32);break}case"TorusEmitterShape":{a=new $u(o*.5,.3,15,40);break}case"ConeEmitterShape":{a=new dl(o,o,15);break}case"BoxEmitterShape":{a=new vi(o,o,o);break}case"PlaneEmitterShape":{a=new wn(o,o),a.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{a=new Ys(o,32,32);break}default:{a=new Ys(o,32,32);break}}return new sr(a,new ts({color:16711680}))}applyToShader(e,o){this.size=new _().fromArray(o.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function cu(e){let o={...e},a=Zh.defaultData;o.forceFieldObjectId&&(o.colliderEntityId=o.forceFieldObjectId);let c={...a.shape,...o.shape},d={...a.renderMaterial,...o.renderMaterial};return{...a,...o,shape:c,renderMaterial:d}}var xL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,$_=10,tb=class extends _t{constructor(e,o){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new Oy,this.currentWorldPosition=new _,this.systemQuaternion=new Qe,this.worldGravity=new _(0,0,0),this.directionAxis=new _(0,0,0),this.colliderV3=new _(0,0,0),this.colliderQuaternion=new Qe(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=o,this.shared=o.context.shared;let a=o.data;this.material=new eb(a.renderMaterial,o.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:a.renderMaterial.color},uColor2:{value:a.renderMaterial.color2},uPosition:{value:new _(0,0,0)},uEmissionData:{value:new _(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new _(0,0,0)},uWorldQuaternion:{value:new Ke(0,0,0,1)},uRandScaleFactor:{value:a.randomScale??0},uRandRotationFactor:{value:a.randomRotation??0},uRotation:{value:a.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:a.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,a.renderMaterial.texture),this.init(a)}setTexture(e,o){let a=o.data;if(typeof o=="string"){let c=this.shared.image(o),d=new tr(c.img);d.needsUpdate=!0,e.uTexture.value=d;return}if(typeof a!="string"){let c=new Image;c.onload=()=>{let b=new tr(c);b.needsUpdate=!0,e.uTexture.value=b};let d=new Blob([a],{type:"image/*"}),g=URL.createObjectURL(d);c.src=g}}updateGeometryAttributes(e,o){var c;let a=rL(o);!((c=this.emitterShape)!=null&&c.positionsAttribute)||e.geometry.setAttribute("ref",new Eo(a,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,o){var b;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let a=1e3/o,c=this.targetFPS/a,d=this.previousRatio+(c-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=d,this.previousRatio=d;let g=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=g,this.material.uniforms.uPosition.value=(b=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:b.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0];if(!e)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let o=e.data.size;this.colliderV3.fromArray(o),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,o){if(!this.velocitySimRT||!this.positionSimRT)return;o[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),o[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let a=(c,d)=>{let g=[...this.system.data.shape.size];g[c]=d,this.updateParticleState({shape:{...this.system.data.shape,size:g}})};o[2]==="shape_size_0"&&a(0,e),o[2]==="shape_size_1"&&a(1,e),o[2]==="shape_size_2"&&a(2,e),o[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/$_),o[2]==="gravity"&&this.worldGravity.set(0,e/100,0),o[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),o[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),o[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),o[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),o[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var o,a,c;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(cu(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/$_),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((o=e.renderMaterial)==null?void 0:o.size)!==void 0){let d=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(d)}if(((a=e.renderMaterial)==null?void 0:a.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let d=e.shape.size??this.system.data.shape.size,g=[Number(this.shared.getVariable(d[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(d[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(d[2],[this.uuid,"particles","shape_size_2"]))],b={...cu(this.system.data).shape,size:g};(c=this.emitterShape)==null||c.applyToShader(this.positionSimRT.material.uniforms,b)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let d=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(d),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let o=[Number(e[0])*Me.DEG2RAD,Number(e[1])*Me.DEG2RAD,Number(e[2])*Me.DEG2RAD],a=new or$1(o[0],o[1],o[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(a).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:o,rootObjectType:a,colliderEntityId:c,shape:d,emitTimeDuration:g,emitTimeCycle:b,life:j,directionMode:$,noiseType:_e}=e;return o!==void 0||a!==void 0||c||c===null||b!==void 0||d!==void 0||j!==void 0||g!==void 0||$!==void 0||_e!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let o=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(o)},100);if(!this.emitterShape)return;let a=new Zx(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),c=this.updateSimulationDefinition(e),d=a.addVariable("uCurrentPosition",c+aL,this.emitterShape.positionsTexture),g=a.addVariable("uCurrentVelocity",c+dL,this.emitterShape.directionsTexture),b=a.addVariable("uCurrentEmissionRate",xL,oL(this.emitterShape.textureSize));a.setVariableDependencies(d,[d,g,b]),a.setVariableDependencies(g,[d,g,b]),a.setVariableDependencies(b,[d,g,b]);let j=sL({size:this.emitterShape.textureSize}),$={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new _(0,0,0)},uWorldQuaternion:{value:new Ke(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new _(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};d.material.uniforms=$;let _e=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(_e),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let st=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),rt={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new Ke(0,0,0,1)},uColliderPos:{value:new _(0,0,0)},uColliderSize:{value:new _(0,0,0)},uForceIntensity:{value:st?st.forceIntensity:0},uForceDamping:{value:st?st.forceDambing:0},uColliderQuaternion:{value:new Ke(0,0,0,1)},uColliderQuaternionInvert:{value:new Ke(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/$_}};g.material.uniforms=rt;let ut={uIndex:{value:j},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};b.material.uniforms=ut;let gt=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],yt={...cu(this.system.data).shape,size:gt};this.emitterShape.applyToShader(d.material.uniforms,yt),a.init(),this.gpuCompute=a,this.positionSimRT=d,this.velocitySimRT=g,this.emissionRateSimRT=b,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let o=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),a=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),c=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[o,a,c]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let a=this.system.getColliderData(e.colliderEntityId);switch(a==null?void 0:a.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let c=a==null?void 0:a.colliderType;c==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),c==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(a==null?void 0:a.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let o="";for(let[a,c]of Object.entries(this.simFeaturesDefinition))c&&(o+=`#define ${a}
`);return o}createShape(e,o){this.emitterShape&&this.emitterShape.dispose();let a=new _(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let c=null;return this.system.context.scene.traverseEntity(d=>{d.uuid===e.fromMeshId&&(c=d)}),c?new zf(a,o,e.type,c):new zf(a,o,"SphereEmitterShape")}else return new zf(a,o,e.type)}createPrimaryEmitter(e){let o,a=e*e;return o=new Ey(new wn(1,1,1),this.material,a),this.updateGeometryAttributes(o,e),this.material.needsUpdate=!0,o.onBeforeRender=()=>{this.applyWorldSpace()},o}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:o,loopDuration:a=0}){return Math.ceil(e*(o+a))}dispose(){var e,o,a;!this.gpuCompute||((o=(e=this.rootObject)==null?void 0:e.parent)==null||o.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(a=this.emitterShape)==null||a.dispose())}GoEmitSomeParticles(e,o){let a=e-this.lastEmitTime,c=1/o;if(a>=c){let d=Math.max(1,Math.floor(a/c));return this.lastEmitTime=e,this.emittedParticlesAmount+d>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=d,d}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(cu(this.system.data))}startEmitting(){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=this.globalTime}stopEmitting(){this.isEmitting=!1}},uu=class extends pr{constructor(e,o,a){super(e,o),this.type="ParticleSystem",this.geometry=new Pe,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=c=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(c))},this.context=a,this.data={...o,...cu(o)},this.geometry.setAttribute("position",new Te([],3)),this.material=new ts({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new tb(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let o=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||o)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),o||this.start(this.data.emitTimeLoopDelayStart==="start"?0:this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let a=this.actualTime/1e3;this.emitter.update(a,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(o=>o.identity===e)}getColliderData(e){let o=this.colliderEntities.find(a=>a.identity===e);return o?o.data:null}updateByPatchedOp(e,o,a){super.updateByPatchedOp(e,o,a),Rt(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...Fr$1.drop(e,1).props}}),Rt(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...Fr$1.drop(e,1).props}})}updateState(e,o){super.updateState(e,o),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let o=this.context.scene.find(e.colliderEntityId);this.colliderEntities=o?[o]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var o;if(this.currentLoopTime=0,e){setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(o=this.emitter)==null||o.startEmitting()}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting()}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function sK(e,o,a){let c;return o.geometry.type==="TextGeometry"?new yf(e,o,a):(o.geometry.type==="SubdivGeometry"?c=new ao(e,o,a):o.geometry.type==="PathGeometry"?c=new ic(e,o,a):o.geometry.type==="VectorGeometry"?c=new Xx(e,o,a):o.geometry.type==="BooleanGeometry"?c=new qn(e,o,a):o.geometry.type==="UIGeometry"?c=new _r$1(e,o,a):c=new ur(e,o,a),c)}function rb(e,o,a){return console.assert(o.type!==void 0),o.type==="Mesh"?sK(e,o,a):o.type==="Empty"?new Ls(e,o):o.type==="Particle"?new uu(e,o,a):o.type==="ParticleCollider"?new iu(e,o,a):o.type==="Splat"?new Ls(e,o):o.type==="Bone"?new Kx(e,o):o.type==="Page"?new mr(e,o,a):o.type==="PointLight"?new Yx(e,o,a):o.type==="SpotLight"?new Ff(e,o,a):o.type==="DirectionalLight"?new Nf(e,o,a):o.type==="Component"||o.type==="Instance"?new uo(e,o,a):Ks.is(o.type)?new wr$1(e,o):(console.error(o),new Ls(e,o))}eo.createEntity=rb;function oK(e,o,a){let c=rb(e.identity,o,a),d=e.children,g=e.attachedPaths,b=e.parent,j=e.component,$=e.instances,_e=e.overrideData,st=e.uuid,rt=e.stateSelection;e.dispose();for(let ut of Object.keys(e))delete e[ut];Object.setPrototypeOf(e,Object.getPrototypeOf(c));for(let ut of Object.keys(c))e[ut]=c[ut];e.children=[...e.children,...d],e.attachedPaths=g,e.parent=b,e.component=j,e.instances=$,e.uuid=st,e.overrideData=_e,e.updateState(e.data,a),rt&&e.changeSelectedState(rt,a),e.resetBBoxNeedsUpdate()}eo.changeEntityProptotype=oK;eo.Cloner=Ji;function SL(e,o,a,c){e.updateByOp(o,a,c,!1)}function wL(e,o){let a=!1,c=o.getLayersOfType("transmission"),d=o.getLayersOfType("outline");return d.length>0&&(e.layers.set(8),c.length>0&&e.layers.enable(3),a=!0,mf(e),pf(e)),c.length===0&&d.length===0&&e.layers.set(0),e instanceof Ps&&e.needsAO&&e.layers.enable(5),a}function AL(e,o){if(!o.layers)return!1;let a=!1,c=o.getLayersOfType("transmission").filter(g=>g.data.visible),d=o.getLayersOfType("outline").filter(g=>g.data.visible);return c.length>0&&(e.layers.set(3),d.length>0&&e.layers.enable(8),a=!0),c.length===0&&d.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),a}function _L(e){let o=!1;return e.traverseEntity(a=>{if(a instanceof Ps)if(Array.isArray(a.material))for(let c=0;c<a.material.length;c++)wL(a,a.material[c])&&(o=!0);else wL(a,a.material)&&(o=!0)}),o}function EL(e){let o=!1;return e.traverseEntity(a=>{if(a instanceof Ps)if(Array.isArray(a.material))for(let c=0;c<a.material.length;c++)AL(a,a.material[c])&&(o=!0);else AL(a,a.material)&&(o=!0)}),o}var aK=new ah,lK=new ce$1,cK=new qs;function eg(e,o,a,c=!1){let d=e.cloner;if(d)for(let g of d.children){let b=lK.copy(g.matrixWorld).invert(),j=cK.copy(o.ray).applyMatrix4(b),$=e.matrixWorld;j.applyMatrix4($);let _e=aK;_e.set(j.origin,j.direction),_e.near=o.near,_e.far=o.far;let st=_e.intersectObject(e,!1);st.length>0&&a.push({...st[0],object:c?g:e})}}var ib=class{constructor(){this._constraints=new Map}setConstraint(e,o){o===null?this._constraints.delete(e):this._constraints.set(e,o)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let o=new Set;this._constraints.forEach((a,c)=>{let d=[c,a],g=a;for(;this._constraints.has(g);)g=this._constraints.get(g),o.has(g)||d.push(g);for(let b=d.length-2;b>=0;b--)if(!o.has(d[b])){let j=e.find(d[b]);j?j.applyPathSnapping(e):console.warn(`missing entity ${d[b]}`),o.add(d[b])}})}findDependency(e,o){let a=e;for(;this._constraints.has(a);)if(a=this._constraints.get(a),a===o)return!0;return!1}},ho=pi(Uf()),$o=pi(Gf()),$r$1=pi(Uf()),nt=pi(Gf()),nc=class{constructor(e,o,a){this._dataNormalized=e,this._minD=o,this._maxD=a}static createFromUnnormalized(e){let o=nt.sup(e),a=nt.inf(e),c=(0,$r$1.default)(new Float32Array(e.size),e.shape),d=o-a;return d<1e-4?nt.assigns(c,0):(nt.subs(c,e,a),nt.divs(c,c,d)),new nc(c,a,o)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let e=(0,$r$1.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return nt.muls(e,this._dataNormalized,this._maxD-this._minD),nt.adds(e,e,this._minD),e}},Er=class{constructor(e,o){this._quantized=e,this._method=o}get quantized(){return this._quantized}static maxIntBits(e){return 2**e-1}static fromNormalized(e,o){let a=e.data,c;if(o==="norm8x"){let d=Er.maxIntBits(8),g=(0,$r$1.default)(new Float32Array(a.size),a.shape);nt.muls(g,a,d),nt.roundeq(g),c=(0,$r$1.default)(new Uint8Array(g.data),a.shape)}else if(o==="norm565"){let d=(0,$r$1.default)(new Float32Array(a.size),a.shape);nt.assign(d,a),nt.mulseq(d.pick(null,0),Er.maxIntBits(5)),nt.mulseq(d.pick(null,1),Er.maxIntBits(6)),nt.mulseq(d.pick(null,2),Er.maxIntBits(5)),nt.roundeq(d);let g=(0,$r$1.default)(new Uint16Array(d.data),a.shape),b=(0,$r$1.default)(new Uint16Array(a.shape[0]),[a.shape[0]]),j=(0,$r$1.default)(new Uint16Array(a.shape[0]),[a.shape[0]]);nt.lshifts(b,g.pick(null,0),11),nt.lshifts(j,g.pick(null,1),5),nt.boreq(b,j),nt.boreq(b,g.pick(null,2)),c=b}else{let d=(0,$r$1.default)(new Float32Array(a.size),a.shape);nt.assign(d,a),nt.mulseq(d.pick(null,0),Er.maxIntBits(11)),nt.mulseq(d.pick(null,1),Er.maxIntBits(10)),nt.mulseq(d.pick(null,2),Er.maxIntBits(11)),nt.roundeq(d);let g=(0,$r$1.default)(new Uint32Array(d.data),a.shape),b=(0,$r$1.default)(new Uint32Array(a.shape[0]),[a.shape[0]]),j=(0,$r$1.default)(new Uint32Array(a.shape[0]),[a.shape[0]]);nt.lshifts(b,g.pick(null,0),21),nt.lshifts(j,g.pick(null,1),11),nt.boreq(b,j),nt.boreq(b,g.pick(null,2)),c=b}return new Er(c,o)}dequantize(e,o){let a=this._method,c,d=this._quantized;if(a==="norm8x"){let g=Er.maxIntBits(8);c=(0,$r$1.default)(new Float32Array(d.size),d.shape),nt.muls(c,d,1/g)}else if(a==="norm565"){let g=(0,$r$1.default)(new Uint8Array(d.shape[0]),[d.shape[0]]),b=(0,$r$1.default)(new Uint8Array(d.shape[0]),[d.shape[0]]),j=(0,$r$1.default)(new Uint8Array(d.shape[0]),[d.shape[0]]);nt.rrshifts(g,d,11),nt.rrshifts(b,d,5),nt.bandseq(b,Er.maxIntBits(6)),nt.bands(j,d,Er.maxIntBits(5)),c=(0,$r$1.default)(new Float32Array(d.shape[0]*3),[d.shape[0],3]),nt.muls(c.pick(null,0),g,1/Er.maxIntBits(5)),nt.muls(c.pick(null,1),b,1/Er.maxIntBits(6)),nt.muls(c.pick(null,2),j,1/Er.maxIntBits(5))}else{let g=(0,$r$1.default)(new Uint16Array(d.shape[0]),[d.shape[0]]),b=(0,$r$1.default)(new Uint16Array(d.shape[0]),[d.shape[0]]),j=(0,$r$1.default)(new Uint16Array(d.shape[0]),[d.shape[0]]);nt.rrshifts(g,d,21),nt.rrshifts(b,d,11),nt.bandseq(b,Er.maxIntBits(10)),nt.bands(j,d,Er.maxIntBits(11)),c=(0,$r$1.default)(new Float32Array(d.shape[0]*3),[d.shape[0],3]),nt.muls(c.pick(null,0),g,1/Er.maxIntBits(11)),nt.muls(c.pick(null,1),b,1/Er.maxIntBits(10)),nt.muls(c.pick(null,2),j,1/Er.maxIntBits(11))}return new nc(c,e,o)}},Tr$1=class{constructor(o,a,c,d,g,b=!1){this._quantized=o,this._minMaxMatrix=a,this._chunkSize=c,this._quantizationMethod=d,this._variableChunkSize=g,this._isDynamicChunks=b}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(o){let a=o.length,c=this.minmaxMatrix.shape[0]-a,d=(0,ho.default)(new Float32Array(c*2),[c,2]),g=0,b=c,j=0,$=this.minmaxMatrix.shape[0];for(let _e=0;_e<o.length;_e++)$=o[_e],b=$-j+g,b>g&&$o.assign(d.hi(b,2).lo(g,0),this.minmaxMatrix.hi($,2).lo(j,0)),g=b,j=$+1;return g<c&&$o.assign(d.lo(g,0),this.minmaxMatrix.lo(j,0)),d}_createPrunedQuantized(o){let a=o.length,c=this.quantized.shape[0]-a,d=this._quantizationMethod,g,b;if(d==="norm8x"){b=this._quantized.shape[1];let rt=b?c*b:c;g=(0,ho.default)(new Uint8Array(rt),b?[c,b]:[c,1])}else d==="norm565"?g=(0,ho.default)(new Uint16Array(c),[c]):g=(0,ho.default)(new Uint32Array(c),[c]);let j=0,$=c,_e=0,st=g.shape[0];for(let rt=0;rt<o.length;rt++)st=o[rt],$=st-_e+j,$>j&&(b?$o.assign(g.hi($,b).lo(j,0),this._quantized.hi(st,b).lo(_e,0)):$o.assign(g.hi($).lo(j),this._quantized.hi(st).lo(_e))),j=$,_e=st+1;return j<c&&(b?$o.assign(g.lo(j,0),this._quantized.lo(_e,0)):$o.assign(g.lo(j),this._quantized.lo(_e))),g}pruneFeature(o,a,c){let d=this._createPrunedQuantized(o),g=this._createPrunedMinMax(a);return new Tr$1(d,g,this._chunkSize,this._quantizationMethod,c,!0)}static getRequiredNChunks(o,a){return Math.floor(o/a)}static fromArray(o,a,c){let d=o.shape[0],g=Math.floor(d/c),b=(0,ho.default)(new Float32Array(g*2),[g,2],[2,1]),j;a==="norm8x"?j=(0,ho.default)(new Uint8Array(o.size),o.shape):a==="norm565"?j=(0,ho.default)(new Uint16Array(o.shape[0]),[o.shape[0]]):j=(0,ho.default)(new Uint32Array(o.shape[0]),[o.shape[0]]);for(let $=0;$<g;$++){let _e=$*c,st=$+1<g?($+1)*c:d,rt;o.shape.length>1?rt=nc.createFromUnnormalized(o.hi(st,o.shape[1]).lo(_e,0)):rt=nc.createFromUnnormalized(o.hi(st).lo(_e)),b.set($,0,rt.minD),b.set($,1,rt.maxD),j.shape.length>1?$o.assign(j.hi(st,j.shape[1]).lo(_e,0),Er.fromNormalized(rt,a).quantized):$o.assign(j.hi(st).lo(_e),Er.fromNormalized(rt,a).quantized)}return new Tr$1(j,b,c,a)}denormDequant(){let o=this._minMaxMatrix.shape[0],a=this._quantized,c=a.shape[0],d=this._quantizationMethod,g=this._chunkSize,b;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");b=this._variableChunkSize}let j;d==="norm8x"?j=(0,ho.default)(new Float32Array(a.size),a.shape):j=(0,ho.default)(new Float32Array(c*3),[c,3]);let $=0,_e=g;for(let st=0;st<o;st++){let[rt,ut]=[this._minMaxMatrix.get(st,0),this._minMaxMatrix.get(st,1)];this._isDynamicChunks&&(_e=b[st]);let gt=st+1<o?$+_e:c,yt;a.shape.length>1?yt=new Er(a.hi(gt,a.shape[1]).lo($,0),d):yt=new Er(a.hi(gt).lo($),d),$o.assign(j.hi(gt,j.shape[1]).lo($,0),yt.dequantize(rt,ut).denormalize()),$=gt}return j}static async fetchArrayBuffer(o){return await(await fetch(o,{mode:"cors"})).arrayBuffer()}},Ya=pi(Uf()),Bt=pi(Gf()),YL="http://127.0.0.1:8000",hu=pi(Uf()),gr=pi(Gf()),XL=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function QL(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function KL(e,o){if(e===o)return 0;if(~~e===e&&~~o===o){if(e===0||o===0)return e<o?-1:1;if(e<0||o<0){if(o>=0)return-1;if(e>=0)return 1;e=-e,o=-o}let d=QL(e),g=QL(o),b=0;return d<g?(e*=XL[g-d-1],o/=10,b=-1):d>g&&(o*=XL[d-g-1],e/=10,b=1),e===o?b:e<o?-1:1}let a=String(e),c=String(o);return a===c?0:a<c?-1:1}function LK(e){let o=0;for(;e>=32;)o|=e&1,e>>=1;return e+o}function ZL(e,o,a,c){let d=o+1;if(d===a)return 1;if(c(e[d++],e[o])<0){for(;d<a&&c(e[d],e[d-1])<0;)d++;BK(e,o,d)}else for(;d<a&&c(e[d],e[d-1])>=0;)d++;return d-o}function BK(e,o,a){for(a--;o<a;){let c=e[o];e[o++]=e[a],e[a--]=c}}function JL(e,o,a,c,d){for(c===o&&c++;c<a;c++){let g=e[c],b=o,j=c;for(;b<j;){let _e=b+j>>>1;d(g,e[_e])<0?j=_e:b=_e+1}let $=c-b;switch($){case 3:e[b+3]=e[b+2];case 2:e[b+2]=e[b+1];case 1:e[b+1]=e[b];break;default:for(;$>0;)e[b+$]=e[b+$-1],$--}e[b]=g}}function rE(e,o,a,c,d,g){let b=0,j=0,$=1;if(g(e,o[a+d])>0){for(j=c-d;$<j&&g(e,o[a+d+$])>0;)b=$,$=($<<1)+1,$<=0&&($=j);$>j&&($=j),b+=d,$+=d}else{for(j=d+1;$<j&&g(e,o[a+d-$])<=0;)b=$,$=($<<1)+1,$<=0&&($=j);$>j&&($=j);let _e=b;b=d-$,$=d-_e}for(b++;b<$;){let _e=b+($-b>>>1);g(e,o[a+_e])>0?b=_e+1:$=_e}return $}function iE(e,o,a,c,d,g){let b=0,j=0,$=1;if(g(e,o[a+d])<0){for(j=d+1;$<j&&g(e,o[a+d-$])<0;)b=$,$=($<<1)+1,$<=0&&($=j);$>j&&($=j);let _e=b;b=d-$,$=d-_e}else{for(j=c-d;$<j&&g(e,o[a+d+$])>=0;)b=$,$=($<<1)+1,$<=0&&($=j);$>j&&($=j),b+=d,$+=d}for(b++;b<$;){let _e=b+($-b>>>1);g(e,o[a+_e])<0?$=_e:b=_e+1}return $}var nE=class{constructor(e,o){Ui(this,"array",null),Ui(this,"compare",null),Ui(this,"minGallop",7),Ui(this,"length",0),Ui(this,"tmpStorageLength",256),Ui(this,"stackLength",0),Ui(this,"runStart",null),Ui(this,"runLength",null),Ui(this,"stackSize",0),this.array=e,this.compare=o,this.length=e.length,this.length<2*256&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(e,o){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=o,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let o=this.compare,a=this.array,c=this.runStart[e],d=this.runLength[e],g=this.runStart[e+1],b=this.runLength[e+1];this.runLength[e]=d+b,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let j=iE(a[g],a,c,d,0,o);c+=j,d-=j,d!==0&&(b=rE(a[c+d-1],a,g,b,b-1,o),b!==0&&(d<=b?this.mergeLow(c,d,g,b):this.mergeHigh(c,d,g,b)))}mergeLow(e,o,a,c){let d=this.compare,g=this.array,b=this.tmp,j=0;for(j=0;j<o;j++)b[j]=g[e+j];let $=0,_e=a,st=e;if(g[st++]=g[_e++],--c===0){for(j=0;j<o;j++)g[st+j]=b[$+j];return}if(o===1){for(j=0;j<c;j++)g[st+j]=g[_e+j];g[st+c]=b[$];return}let rt=this.minGallop;for(;;){let ut=0,gt=0,yt=!1;do if(d(g[_e],b[$])<0){if(g[st++]=g[_e++],gt++,ut=0,--c===0){yt=!0;break}}else if(g[st++]=b[$++],ut++,gt=0,--o===1){yt=!0;break}while((ut|gt)<rt);if(yt)break;do{if(ut=iE(g[_e],b,$,o,0,d),ut!==0){for(j=0;j<ut;j++)g[st+j]=b[$+j];if(st+=ut,$+=ut,o-=ut,o<=1){yt=!0;break}}if(g[st++]=g[_e++],--c===0){yt=!0;break}if(gt=rE(b[$],g,_e,c,0,d),gt!==0){for(j=0;j<gt;j++)g[st+j]=g[_e+j];if(st+=gt,_e+=gt,c-=gt,c===0){yt=!0;break}}if(g[st++]=b[$++],--o===1){yt=!0;break}rt--}while(ut>=7||gt>=7);if(yt)break;rt<0&&(rt=0),rt+=2}if(this.minGallop=rt,rt<1&&(this.minGallop=1),o===1){for(j=0;j<c;j++)g[st+j]=g[_e+j];g[st+c]=b[$]}else{if(o===0)throw new Error("mergeLow preconditions were not respected");for(j=0;j<o;j++)g[st+j]=b[$+j]}}mergeHigh(e,o,a,c){let d=this.compare,g=this.array,b=this.tmp,j=0;for(j=0;j<c;j++)b[j]=g[a+j];let $=e+o-1,_e=c-1,st=a+c-1,rt=0,ut=0;if(g[st--]=g[$--],--o===0){for(rt=st-(c-1),j=0;j<c;j++)g[rt+j]=b[j];return}if(c===1){for(st-=o,$-=o,ut=st+1,rt=$+1,j=o-1;j>=0;j--)g[ut+j]=g[rt+j];g[st]=b[_e];return}let gt=this.minGallop;for(;;){let yt=0,wt=0,Ct=!1;do if(d(b[_e],g[$])<0){if(g[st--]=g[$--],yt++,wt=0,--o===0){Ct=!0;break}}else if(g[st--]=b[_e--],wt++,yt=0,--c===1){Ct=!0;break}while((yt|wt)<gt);if(Ct)break;do{if(yt=o-iE(b[_e],g,e,o,o-1,d),yt!==0){for(st-=yt,$-=yt,o-=yt,ut=st+1,rt=$+1,j=yt-1;j>=0;j--)g[ut+j]=g[rt+j];if(o===0){Ct=!0;break}}if(g[st--]=b[_e--],--c===1){Ct=!0;break}if(wt=c-rE(g[$],b,0,c,c-1,d),wt!==0){for(st-=wt,_e-=wt,c-=wt,ut=st+1,rt=_e+1,j=0;j<wt;j++)g[ut+j]=b[rt+j];if(c<=1){Ct=!0;break}}if(g[st--]=g[$--],--o===0){Ct=!0;break}gt--}while(yt>=7||wt>=7);if(Ct)break;gt<0&&(gt=0),gt+=2}if(this.minGallop=gt,gt<1&&(this.minGallop=1),c===1){for(st-=o,$-=o,ut=st+1,rt=$+1,j=o-1;j>=0;j--)g[ut+j]=g[rt+j];g[st]=b[_e]}else{if(c===0)throw new Error("mergeHigh preconditions were not respected");for(rt=st-(c-1),j=0;j<c;j++)g[rt+j]=b[j]}}};function $L(e,o,a,c){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");o?typeof o!="function"&&(c=a,a=o,o=KL):o=KL,a||(a=0),c||(c=e.length);let d=c-a;if(d<2)return;let g=0;if(d<32){g=ZL(e,a,c,o),JL(e,a,c,a+g,o);return}let b=new nE(e,o),j=LK(d);do{if(g=ZL(e,a,c,o),g<j){let $=d;$>j&&($=j),JL(e,a,a+$,a+g,o),g=$}b.pushRun(a,g),b.mergeRuns(),d-=g,a+=g}while(d!==0);b.forceMergeRuns()}function sE(e){let o=(0,hu.default)(new Int32Array(e.shape[0]),[e.shape[0]]),a=(0,hu.default)(new Int32Array(e.shape[0]),[e.shape[0]]);return gr.bands(o,e,1023),gr.lshifts(a,o,16),gr.bxoreq(o,a),gr.bandseq(o,4278190335),gr.lshifts(a,o,8),gr.bxoreq(o,a),gr.bandseq(o,50393103),gr.lshifts(a,o,4),gr.bxoreq(o,a),gr.bandseq(o,51130563),gr.lshifts(a,o,2),gr.bxoreq(o,a),gr.bandseq(o,153391689),o}function NK(e){let o=sE(e.pick(null,0)),a=sE(e.pick(null,1));gr.lshiftseq(a,1);let c=sE(e.pick(null,2));return gr.lshiftseq(c,2),gr.boreq(o,a),gr.boreq(o,c),o}function sc(e,o){if(e.shape[0]!==o.shape[0])throw new Error("wrong length");let a=(0,hu.default)(new Float32Array(e.size),e.shape,e.stride,e.offset);for(let c=0;c<o.shape[0];c++){let d=o.get(c);if(e.shape.length>1)for(let g=0;g<e.shape[1];g++)a.set(c,g,e.get(d,g));else a.set(c,e.get(d))}return a}function oE(e){let o=gr.sup(e),a=gr.inf(e),c=1e3/Math.min(1e3,o-a),d=(0,hu.default)(new Float32Array(e.data),e.shape);gr.mulseq(d,c);let g=(0,hu.default)(new Int32Array(d.data),e.shape),b=NK(g),j=Array.from(b.data).map((_e,st)=>[_e,st]);$L(j,(_e,st)=>_e[0]-st[0]);let $=j.map(([_e,st])=>st);return(0,hu.default)(Uint32Array.from($))}var Ns=class{constructor(e,o,a,c,d,g,b,j,$,_e){this.propertyDescs=e,this.format=o,this.nsplats=a,this.xyz=c,this.colors=d,this.harmonics=g,this.opacity=b,this.scaling=j,this.rotation=$,this.maxSHDegree=_e}getPlyBinary(){let e=Ns._generateHeaderString(this.propertyDescs,this.format,this.nsplats),o=new TextEncoder().encode(e),a=Object.keys(this.propertyDescs).length,c=(0,Ya.default)(new Float32Array(this.nsplats*a),[this.nsplats,a]);if(Bt.assign(c.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),Bt.assign(c.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),Bt.assign(c.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),Bt.assign(c.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),Bt.assign(c.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),Bt.assign(c.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),Bt.assign(c.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),Bt.assign(c.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),Bt.assign(c.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),Bt.assign(c.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),Bt.assign(c.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),Bt.assign(c.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),Bt.assign(c.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),Bt.assign(c.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let b=0;b<this.harmonics.length;b++){let j=b*3;Bt.assign(c.pick(null,this.propertyDescs[`f_rest_${j}`].index),this.harmonics[b].pick(null,0)),Bt.assign(c.pick(null,this.propertyDescs[`f_rest_${j+1}`].index),this.harmonics[b].pick(null,1)),Bt.assign(c.pick(null,this.propertyDescs[`f_rest_${j+2}`].index),this.harmonics[b].pick(null,2))}let d=new Uint8Array(c.data.buffer),g=new Uint8Array(d.length+o.length);return g.set(o),g.set(d,o.length),g.buffer}save(e,o){let a=this.getPlyBinary(),c=new Blob([a],{type:"application/octet-stream"}),d=new File([c],e),g=new FormData;g.append("file",d),g.append("filename",e),g.append("basedir",o),fetch(`${YL}/push_file`,{method:"POST",body:g})}static async loadFile(e){return await(await fetch(e)).arrayBuffer()}mortonPositionSplatsSort(){let e=oE(this.xyz),o=sc(this.xyz,e),a=sc(this.colors,e),c=sc(this.opacity,e),d=sc(this.scaling,e),g=sc(this.rotation,e),b=[];for(let j=0;j<this.harmonics.length;j++)b.push(sc(this.harmonics[j],e));return new Ns(this.propertyDescs,this.format,this.nsplats,o,a,b,c,d,g,this.maxSHDegree)}static _generateHeaderString(e,o,a){let c=`ply
format ${o.format} ${o.version}
element vertex ${a}`,d=Object.keys(e).length,g=Array(d);for(let b in e){let j=e[b];g[j.index]={name:b,dtype:j.dtype}}for(let b=0;b<g.length;b++)c=`${c}
property ${g[b].dtype} ${g[b].name}`;return`${c}
end_header
`}static fromArrayBuffer(e,o=3){let{splatCount:a,vertexData:c,propertiesDesc:d,format:g}=Ns.decodeHeader(e),b=c.buffer.slice(c.byteOffset),j=Object.keys(d).length,$=(0,Ya.default)(new Float32Array(b),[a,j]),_e=0,st={},rt={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let Tt in d)if(d.hasOwnProperty(Tt)){let kt=d[Tt].dtype;st[Tt]=_e,_e+=rt[kt]}let ut=(0,Ya.default)(new Float32Array(a*3),[a,3]);Bt.assign(ut.pick(null,0),$.pick(null,st.x/4)),Bt.assign(ut.pick(null,1),$.pick(null,st.y/4)),Bt.assign(ut.pick(null,2),$.pick(null,st.z/4));let gt=(0,Ya.default)(new Float32Array(a*3),[a,3]);Bt.assign(gt.pick(null,0),$.pick(null,st.scale_0/4)),Bt.assign(gt.pick(null,1),$.pick(null,st.scale_1/4)),Bt.assign(gt.pick(null,2),$.pick(null,st.scale_2/4));let yt=(0,Ya.default)(new Float32Array(a*3),[a,3]);Bt.assign(yt.pick(null,0),$.pick(null,st.f_dc_0/4)),Bt.assign(yt.pick(null,1),$.pick(null,st.f_dc_1/4)),Bt.assign(yt.pick(null,2),$.pick(null,st.f_dc_2/4));let wt=(0,Ya.default)(new Float32Array(a*4),[a,4]);Bt.assign(wt.pick(null,0),$.pick(null,st.rot_1/4)),Bt.assign(wt.pick(null,1),$.pick(null,st.rot_2/4)),Bt.assign(wt.pick(null,2),$.pick(null,st.rot_3/4)),Bt.assign(wt.pick(null,3),$.pick(null,st.rot_0/4));for(let Tt=0;Tt<a;Tt++){let kt=wt.pick(Tt,null),It=Math.sqrt(kt.get(0)**2+kt.get(1)**2+kt.get(2)**2+kt.get(3)**2);Bt.divseq(kt,It)}let Ct=(0,Ya.default)(new Float32Array(a*1),[a,1]);Bt.assign(Ct.pick(null,0),$.pick(null,st.opacity/4));let Pt=(Math.min(Math.max(o,0),3)+1)**2-1,At=[];for(let Tt=0;Tt<Pt;Tt++){let kt=(0,Ya.default)(new Float32Array(a*3),[a,3]),It=Tt*3;Bt.assign(kt.pick(null,0),$.pick(null,st[`f_rest_${It}`]/4)),Bt.assign(kt.pick(null,1),$.pick(null,st[`f_rest_${It+1}`]/4)),Bt.assign(kt.pick(null,2),$.pick(null,st[`f_rest_${It+2}`]/4)),At.push(kt)}return new Ns(d,g,a,ut,yt,At,Ct,gt,wt,o)}static async fromPLYFile(e,o=3){let a=await Ns.loadFile(e);return Ns.fromArrayBuffer(a,o)}static decodeHeader(e){let o=new TextDecoder,a=0,c="",d=100;for(;;){if(a+d>=e.byteLength)throw new Error("End of file reached while searching for end of header");let ut=new Uint8Array(e,a,d);c+=o.decode(ut),a+=d;let gt=a-d*2,yt=new Uint8Array(e,Math.max(0,gt),gt>0?d*2:d);if(o.decode(yt).includes("end_header"))break}let g=c.split(`
`),b=0,j={},$=0,_e;for(let ut=0;ut<g.length;ut++){let gt=g[ut].trim();if(gt.startsWith("element vertex")){let yt=gt.match(/\d+/);yt&&(b=parseInt(yt[0]))}else if(gt.startsWith("property")){let yt=gt.match(/(\w+)\s+(\w+)\s+(\w+)/);if(yt){let wt=yt[2],Ct=yt[3];j[Ct]={dtype:wt,index:$},$++}}else if(gt.startsWith("format")){let yt=gt.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);yt&&(_e={format:yt[2],version:yt[3]})}else if(gt==="end_header")break}let st=c.indexOf("end_header")+10+1,rt=new DataView(e,st);return{splatCount:b,vertexData:rt,headerOffset:a,propertiesDesc:j,format:_e}}},du=class{constructor(e,o,a,c,d,g,b,j){this.config=e,this.xyz=o,this.scaling=a,this.color=c,this.opacity=d,this.harmonics=b,this.quaternion=g,this.variableChunkSize=j}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(e,o){let a=Tr$1.fromArray(e.xyz,o.xyz,o.chunkSize),c=Tr$1.fromArray(e.scaling,o.scaling,o.chunkSize),d=Tr$1.fromArray(e.colors,o.color,o.chunkSize),g=Tr$1.fromArray(e.opacity,o.opacity,o.chunkSize),b=Tr$1.fromArray(e.rotation,o.quaternion,o.chunkSize),j=e.harmonics,$=[];if(o.harmonics)for(let _e=0;_e<j.length;_e++){let st=Tr$1.fromArray(j[_e],o.harmonics,o.chunkSize);$.push(st)}return new du(o,a,c,d,g,b,$)}_countIndexesInChunks(e){let o=[],a=this.nchunks,c=this.chunkSize,d=this.nsplats,g=Tr$1.getRequiredNChunks(d,c);if(a===g)for(let b=0;b<e.length;b++){let j=e[b],$=Math.floor(j/this.chunkSize);$ in o?o[$].push(j):o[$]=[j]}else{let b=this.variableChunkSize,j={},$=0;for(let _e=0;_e<a;_e++)j[_e]=$,$+=b[_e];for(let _e=0;_e<e.length;_e++){let st=e[_e],rt=Math.min(Math.floor(st/c),a-1);for(;st>=j[rt]+b[rt];)rt++;rt in o?o[rt].push(st):o[rt]=[st]}}return o}pruneSplats(e){let o=this._countIndexesInChunks(e),a,c=[];return o.length>0&&(a=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),o.forEach((d,g)=>{a[g]-=d.length,a[g]<=0&&c.push(g)}),a=a.filter(d=>d>0)),new du(this.config,this.xyz.pruneFeature(e,c,a),this.scaling.pruneFeature(e,c,a),this.color.pruneFeature(e,c,a),this.opacity.pruneFeature(e,c,a),this.quaternion.pruneFeature(e,c,a),this.harmonics?this.harmonics.map(d=>d.pruneFeature(e,c,this.variableChunkSize)):void 0,a)}static async loadConfig(e){return await(await fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()}toGaussians(){var d;let e={format:"binary_little_endian",version:"1.0"},o={},a=0;if(o.x={dtype:"float",index:a},a++,o.y={dtype:"float",index:a},a++,o.z={dtype:"float",index:a},a++,o.f_dc_0={dtype:"float",index:a},a++,o.f_dc_1={dtype:"float",index:a},a++,o.f_dc_2={dtype:"float",index:a},a++,this.harmonics&&this.harmonics.length>0)for(let g=0;g<this.harmonics.length;g++)o[`f_rest_${g}`]={dtype:"float",index:a},a++,o[`f_rest_${g+1}`]={dtype:"float",index:a},a++,o[`f_rest_${g+2}`]={dtype:"float",index:a},a++;o.opacity={dtype:"float",index:a},a++,o.scale_0={dtype:"float",index:a},a++,o.scale_1={dtype:"float",index:a},a++,o.scale_2={dtype:"float",index:a},a++,o.rot_0={dtype:"float",index:a},a++,o.rot_1={dtype:"float",index:a},a++,o.rot_2={dtype:"float",index:a},a++,o.rot_3={dtype:"float",index:a},a++;let c=(d=this.harmonics)==null?void 0:d.map(g=>g.denormDequant());return new Ns(o,e,this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),c||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},fu=pi(Uf()),Ai=pi(Gf()),eB={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},oc=class{constructor(e){this._buffer=e}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let e=.28209479177387814,o=this.decoded.color.denormDequant(),a=this.decoded.opacity.denormDequant(),c=(0,fu.default)(new Float32Array(o.shape[0]*4),[o.shape[0],4]);return Ai.mulseq(o,e),Ai.addseq(o,.5),Ai.mulseq(o,255),Ai.maxseq(o,0),Ai.minseq(o,255),Ai.negeq(a),Ai.expeq(a),Ai.addseq(a,1),Ai.recipeq(a),Ai.mulseq(a,255),Ai.assign(c.hi(o.shape[0],3).lo(0,0),o),Ai.assign(c.hi(o.shape[0],4).lo(0,3),a),(0,fu.default)(new Uint8Array(c.data),[o.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:e,chunkCount:o,chunkSize:a,typeChunks:c,vertexData:d,propertiesDesc:g}=this.decodeHeader(),b={xyz:g.xyz.compressionMethod,color:g.color.compressionMethod,opacity:g.opacity.compressionMethod,scaling:g.scaling.compressionMethod,quaternion:g.quaternion.compressionMethod,chunkSize:a};g.harmonics_0&&(b.harmonics=g.harmonics_0.compressionMethod);let j=d.byteOffset,$=Array(Object.keys(g).length);for(let Ct in g)$[g[Ct].index]={name:Ct,method:g[Ct].compressionMethod};let _e=o*2*4,st=j,rt=c==="dynamic"?o*2:0,ut,gt=!1;if(rt>0){let Ct=new Uint16Array(d.buffer.slice(st,st+rt));st+=rt,ut=Array.from(Ct),gt=!0}let yt={};for(let Ct of $){let Pt=0,At=!0;if(Ct.method==="norm8x")Pt=e*1*eB[Ct.name];else if(Ct.method==="norm11")Pt=e*4;else if(Ct.method==="norm565")Pt=e*2;else throw At=!1,new Error(`Not Implemented format: ${Ct.method}`);let Tt;if(At){let Lt=d.buffer.slice(st,st+_e);Tt=(0,fu.default)(new Float32Array(Lt),[o,2]),st+=_e}else throw new Error("loading chunk byt hasnot minmax!");let kt=d.buffer.slice(st,st+Pt);st+=Pt;let It;if(Ct.method==="norm8x")It=(0,fu.default)(new Uint8Array(kt),[e,eB[Ct.name]]);else if(Ct.method==="norm11")It=(0,fu.default)(new Uint32Array(kt));else if(Ct.method==="norm565")It=(0,fu.default)(new Uint16Array(kt));else throw new Error(`Not Implemented format: ${Ct.method}`);yt[Ct.name]=new Tr$1(It,Tt,a,Ct.method,ut,gt)}let wt=[];for(let Ct=0;Ct<15;Ct++){let Pt=yt[`harmonics_${Ct}`];Pt&&(wt.push(Pt),delete yt[`harmonics_${Ct}`])}return wt.length>0&&(yt.harmonics=wt),new du(b,yt.xyz,yt.scaling,yt.color,yt.opacity,yt.quaternion,yt.harmonics,ut)}buildPreComputedBuffers(){let e=this.decoded,o=e.nsplats,a=new ArrayBuffer(24*o),c=new Float32Array(a),d=e.scaling.denormDequant(),g=e.quaternion.denormDequant(),b=new Qe,j=new nr,$=new nr,_e=new nr,st=new ce$1;for(let rt=0;rt<o;rt++){st.makeScale(Math.exp(d.get(rt,0)),Math.exp(d.get(rt,1)),Math.exp(d.get(rt,2))),$.setFromMatrix4(st),b.set(g.get(rt,0),g.get(rt,1),g.get(rt,2),g.get(rt,3)),st.makeRotationFromQuaternion(b),j.setFromMatrix4(st),_e.copy(j).multiply($);let ut=_e.elements;c[6*rt]=ut[0]*ut[0]+ut[3]*ut[3]+ut[6]*ut[6],c[6*rt+1]=ut[0]*ut[1]+ut[3]*ut[4]+ut[6]*ut[7],c[6*rt+2]=ut[0]*ut[2]+ut[3]*ut[5]+ut[6]*ut[8],c[6*rt+3]=ut[1]*ut[1]+ut[4]*ut[4]+ut[7]*ut[7],c[6*rt+4]=ut[1]*ut[2]+ut[4]*ut[5]+ut[7]*ut[8],c[6*rt+5]=ut[2]*ut[2]+ut[5]*ut[5]+ut[8]*ut[8]}this._precomputedCovarianceBufferData=a}decodeHeader(){let e=this._buffer,o=new TextDecoder,a=0,c="",d=100;for(;;){if(a+d>=e.byteLength)throw new Error("End of file reached while searching for end of header");let yt=new Uint8Array(e,a,d);c+=o.decode(yt),a+=d;let wt=a-d*2,Ct=new Uint8Array(e,Math.max(0,wt),wt>=0?d*2:d);if(o.decode(Ct).includes("end_header"))break}let g=c.split(`
`),b=0,j=0,$=0,_e=0,st="",rt={};for(let yt=0;yt<g.length;yt++){let wt=g[yt].trim();if(wt.startsWith("element vertex")){let Ct=wt.match(/\d+/);Ct&&(b=parseInt(Ct[0]))}else if(wt.startsWith("property")){let Ct=wt.match(/(\w+)\s+(\w+)\s+(\w+)/);if(Ct){let Pt=Ct[2],At=Ct[3];rt[Pt]={compressionMethod:At,index:_e},_e++}}else if(wt.startsWith("element chunks")){let Ct=wt.match(/\d+/);Ct&&(j=parseInt(Ct[0]))}else if(wt.startsWith("element chunkSize")){let Ct=wt.match(/\d+/);Ct&&($=parseInt(Ct[0]))}else if(wt.startsWith("element typeChunks")){let Ct=wt.match(/(\w+)\s+(\w+)\s+(\w+)/);Ct&&(st=Ct[3])}else if(wt==="end_header")break}let ut=c.indexOf("end_header")+10+1,gt=new DataView(e,ut);return{splatCount:b,chunkCount:j,chunkSize:$,typeChunks:st,vertexData:gt,propertiesDesc:rt}}pruneSplats(e){let o=this.decodeBuffer().pruneSplats(e);return oc.fromCompressedGaussianSplats(o)}static fromCompressedGaussianSplats(e){let o=e.xyz.length,a=e.xyz.nchunks,c=`gspline
element vertex ${o}
element chunks ${a}
element chunkSize ${e.chunkSize}
element typeChunks ${e.isDynamicChunks?"dynamic":"static"}
property xyz ${e.xyz.method}
property color ${e.color.method}
property opacity ${e.opacity.method}
property scaling ${e.scaling.method}
property quaternion ${e.quaternion.method}`;if(e.harmonics&&e.harmonics.length>0)for(let Ft=0;Ft<e.harmonics.length;Ft++)c=`${c}
property harmonics_${Ft} ${e.harmonics[Ft].method}`;c=`${c}
end_header
`;let d=new TextEncoder().encode(c),g=a*2*4,b=e.xyz.quantized.data.buffer.byteLength,j=e.xyz instanceof Tr$1?g:0,$=e.color.quantized.data.buffer.byteLength,_e=e.color instanceof Tr$1?g:0,st=e.opacity.quantized.data.buffer.byteLength,rt=e.opacity instanceof Tr$1?g:0,ut=e.scaling.quantized.data.buffer.byteLength,gt=e.scaling instanceof Tr$1?g:0,yt=e.quaternion.quantized.data.buffer.byteLength,wt=e.quaternion instanceof Tr$1?g:0,Ct=e.variableChunkSize?Uint16Array.from(e.variableChunkSize):void 0,Pt=Ct?Ct.byteLength:0,At=d.byteLength+Pt+b+j+$+_e+st+rt+ut+gt+yt+wt,Tt=0,kt=0;if(e.harmonics&&e.harmonics.length>0)for(let Ft=0;Ft<e.harmonics.length;Ft++)Tt+=e.harmonics[Ft].quantized.data.buffer.byteLength,kt+=e.harmonics[Ft]instanceof Tr$1?g:0;Tt=0,kt=0,At+=Tt+kt;let It=new Uint8Array(At),Lt=0;if(It.set(d,Lt),Lt+=d.byteLength,Pt>0&&(It.set(new Uint8Array(Ct.buffer),Lt),Lt+=Pt),e.xyz instanceof Tr$1&&(It.set(new Uint8Array(e.xyz.minmaxMatrix.data.buffer),Lt),Lt+=g),It.set(new Uint8Array(e.xyz.quantized.data.buffer),Lt),Lt+=b,e.color instanceof Tr$1&&(It.set(new Uint8Array(e.color.minmaxMatrix.data.buffer),Lt),Lt+=g),It.set(new Uint8Array(e.color.quantized.data.buffer),Lt),Lt+=$,e.opacity instanceof Tr$1&&(It.set(new Uint8Array(e.opacity.minmaxMatrix.data.buffer),Lt),Lt+=g),It.set(new Uint8Array(e.opacity.quantized.data.buffer),Lt),Lt+=st,e.scaling instanceof Tr$1&&(It.set(new Uint8Array(e.scaling.minmaxMatrix.data.buffer),Lt),Lt+=g),It.set(new Uint8Array(e.scaling.quantized.data.buffer),Lt),Lt+=ut,e.quaternion instanceof Tr$1&&(It.set(new Uint8Array(e.quaternion.minmaxMatrix.data.buffer),Lt),Lt+=g),It.set(new Uint8Array(e.quaternion.quantized.data.buffer),Lt),Lt+=yt,Tt>0&&e.harmonics&&e.harmonics.length>0)for(let Ft=0;Ft<e.harmonics.length;Ft++){let Nt=e.harmonics[Ft];Nt instanceof Tr$1&&(It.set(new Uint8Array(Nt.minmaxMatrix.data.buffer),Lt),Lt+=g),It.set(new Uint8Array(Nt.quantized.data.buffer),Lt),Lt+=Nt.quantized.data.byteLength}return new oc(It.buffer)}},tB="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",ea=class{};Ui(ea,"DepthMapRange",65536),Ui(ea,"MemoryPageSize",65536),Ui(ea,"BytesPerFloat",4),Ui(ea,"BytesPerInt",4);function FK(e){let o,a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct;function Pt(hs){let us=new Float64Array(st,b,16);for(let un=0;un<16;un++)us[un]=hs[un];let hn;if(c>1){o.exports.sortIndexes(d,g,_e,b,j,$,ut.DepthMapRange,c);let un=new Uint32Array(c);hn=un.buffer,un.set(new Uint32Array(st,$,c))}else if(c===1){let un=new Uint32Array(c);un[0]=new Uint32Array(st,d,a)[0],hn=un.buffer}else hn=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:hn},[hn])}function At(hs,us,hn){let un=new Float32Array(st,g,a*3);c=0;let bo=new Uint32Array(st,d,a);for(let _s=0;_s<hn.length-1;_s++){let gn=us[_s],Gr=hs[_s].elements,ds=gn.filter(Nn=>Nn.enabled&&Nn.mode==="Include").map(Nn=>Nn.type==="Box"?Lt(Nn):Ht(Nn)),Zn=gn.filter(Nn=>Nn.enabled&&Nn.mode==="Exclude").map(Nn=>Nn.type==="Box"?Lt(Nn):Ht(Nn));for(let Nn=hn[_s];Nn<hn[_s+1];Nn++){let Qn=gt[Nn*3],bu=gt[Nn*3+1],ou=gt[Nn*3+2];if((ds.length===0||kt(Qn,bu,ou,ds))&&(Zn.length===0||!kt(Qn,bu,ou,Zn))){let g0=1/(Gr[3]*Qn+Gr[7]*bu+Gr[11]*ou+Gr[15]);un[c*3]=(Gr[0]*Qn+Gr[4]*bu+Gr[8]*ou+Gr[12])*g0,un[c*3+1]=(Gr[1]*Qn+Gr[5]*bu+Gr[9]*ou+Gr[13])*g0,un[c*3+2]=(Gr[2]*Qn+Gr[6]*bu+Gr[10]*ou+Gr[14])*g0,bo[c]=Nn,c++}}}}function Tt(hs,us){let hn=[],un=us.filter(gn=>gn.enabled&&gn.mode==="Include").map(gn=>gn.type==="Box"?Lt(gn):Ht(gn)),bo=us.filter(gn=>gn.enabled&&gn.mode==="Exclude").map(gn=>gn.type==="Box"?Lt(gn):Ht(gn)),_s=hs.length;for(let gn=0;gn<_s;gn+=3){let Gr=hs[gn],ds=hs[gn+1],Zn=hs[gn+2];(un.length===0||kt(Gr,ds,Zn,un))&&(bo.length===0||!kt(Gr,ds,Zn,bo))||hn.push(gn/3)}return console.log(hn),hn}function kt(hs,us,hn,un,bo){return un[bo==="Intersect"?"every":"some"](_s=>{let gn=It(hs,us,hn,_s.invRotationMatrix,_s.cropCenter);return Array.isArray(_s)?Nt(gn.x,gn.y,gn.z,_s):dr(gn.x,gn.y,gn.z,_s)})}function It(hs,us,hn,un,bo){let _s=hs-bo[0],gn=us-bo[1],Gr=hn-bo[2],ds=1/(un[3]*_s+un[7]*gn+un[11]*Gr+un[15]);return{x:(un[0]*_s+un[4]*gn+un[8]*Gr+un[12])*ds+bo[0],y:(un[1]*_s+un[5]*gn+un[9]*Gr+un[13])*ds+bo[1],z:(un[2]*_s+un[6]*gn+un[10]*Gr+un[14])*ds+bo[2]}}function Lt(hs){let us=hs.cropSize[0]/2,hn=hs.cropSize[1]/2,un=hs.cropSize[2]/2,bo=[hs.cropCenter[0]-us,hs.cropCenter[1]-hn,hs.cropCenter[2]-un,hs.cropCenter[0]+us,hs.cropCenter[1]+hn,hs.cropCenter[2]+un],_s=Ft(hs.cropRotation);return Object.assign(bo,{invRotationMatrix:_s,cropCenter:hs.cropCenter})}function Ft(hs){let us=[],hn=hs[0]*Math.PI/180,un=hs[1]*Math.PI/180,bo=hs[2]*Math.PI/180,_s=Math.cos(hn),gn=Math.sin(hn),Gr=Math.cos(un),ds=Math.sin(un),Zn=Math.cos(bo),Nn=Math.sin(bo),Qn=_s*Zn,bu=_s*Nn,ou=gn*Zn,g0=gn*Nn;return us[0]=Gr*Zn,us[1]=-Gr*Nn,us[2]=ds,us[4]=bu+ou*ds,us[5]=Qn-g0*ds,us[6]=-gn*Gr,us[8]=g0-Qn*ds,us[9]=ou+bu*ds,us[10]=_s*Gr,us[12]=0,us[13]=0,us[14]=0,us[3]=0,us[7]=0,us[11]=0,us[15]=1,us}function Nt(hs,us,hn,un){return hs>=un[0]&&hs<=un[3]&&us>=un[1]&&us<=un[4]&&hn>=un[2]&&hn<=un[5]}function Ht(hs){let us=2/hs.cropSize[0],hn=2/hs.cropSize[1],un=2/hs.cropSize[2],bo=Ft(hs.cropRotation);return{invRadiusX:us,invRadiusY:hn,invRadiusZ:un,cropCenter:hs.cropCenter,invRotationMatrix:bo}}function dr(hs,us,hn,un){let bo=(hs-un.cropCenter[0])*un.invRadiusX,_s=(us-un.cropCenter[1])*un.invRadiusY,gn=(hn-un.cropCenter[2])*un.invRadiusZ;return bo*bo+_s*_s+gn*gn<=1}e.onmessage=hs=>{if(hs.data.getCroppedIndexes){let us=new Uint32Array(Tt(new Float32Array(hs.data.positions),hs.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:us},[us])}else if(hs.data.positions)rt=hs.data.positions,gt=new Float32Array(rt),wt=hs.data.meshMatrixWorlds,Ct=hs.data.cropsArray,yt=hs.data.meshIndexIntervals,At(wt,Ct,yt),e.postMessage({sortSetupComplete:!0});else if(hs.data.sort||hs.data.newMatrixWorlds||hs.data.newCropsArray)(hs.data.newMatrixWorlds||hs.data.newCropsArray)&&(Ct=hs.data.newCropsArray||Ct,wt=hs.data.newMatrixWorlds||wt,At(wt,Ct,yt)),Pt(hs.data.sort.view,hs.data.sort.cameraPosition);else if(hs.data.init){ut=hs.data.init.Constants,a=hs.data.init.splatCount;let us=ut.BytesPerInt,hn=ut.BytesPerFloat*3,un=new Uint8Array(hs.data.init.sorterWasmBytes),bo=us+hn,_s=a*bo,gn=a*ut.BytesPerInt*2+ut.DepthMapRange*ut.BytesPerInt*2,Gr=ut.MemoryPageSize*32,ds=_s+gn+Gr,Zn=Math.floor(ds/ut.MemoryPageSize)+1,Nn={module:{},env:{memory:new WebAssembly.Memory({initial:Zn*2,maximum:Zn*3,shared:!0})}};WebAssembly.compile(un).then(Qn=>WebAssembly.instantiate(Qn,Nn)).then(Qn=>{o=Qn,d=0,g=a*us,b=g+a*hn,_e=b+16*ut.BytesPerFloat*2,j=_e+a*ut.BytesPerInt,$=j+ut.DepthMapRange*ut.BytesPerInt,st=Nn.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function rB(e){let o=new Worker(URL.createObjectURL(new Blob(["(",FK.toString(),")(self)"],{type:"application/javascript"}))),a=atob(tB),c=new Uint8Array(a.length);for(let d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return o.postMessage({init:{sorterWasmBytes:c.buffer,splatCount:e,Constants:{BytesPerFloat:ea.BytesPerFloat,BytesPerInt:ea.BytesPerInt,DepthMapRange:ea.DepthMapRange,MemoryPageSize:ea.MemoryPageSize}}}),o}var ob=function(){let e=new Float32Array(1),o=new Int32Array(e.buffer);return function(a){return e[0]=a,o[0]}}(),iB=function(e,o,a,c){return e+(o<<8)+(a<<16)+(c<<24)},ab=new z$2,ac=class extends sr{constructor(e,o,a,c,d=!1,g=1,b,j){super(a,c),this.splatCount=o,this.meshIndexIntervals=b,this.meshMatrixWorlds=j,this.splatBuffers=e,this.geometry=a,this.material=c,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=d,this.devicePixelRatio=g,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,o,a=!1,c=1,d,g){let b=ac.buildGeomtery(o),j=ac.buildMaterial(d);return new ac(e,o,b,j,a,c,d,g)}static buildMaterial(e){let o=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,a=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,c={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new z$2},viewport:{type:"v2",value:new z$2},basisViewport:{type:"v2",value:new z$2},debugColor:{type:"v3",value:new We},covariancesTextureSize:{type:"v2",value:new z$2(1024,1024)},centersColorsTextureSize:{type:"v2",value:new z$2(1024,1024)},orthoZoom:{type:"f",value:-1}};return new lt({uniforms:c,vertexShader:o,fragmentShader:a,transparent:!0,alphaTest:1,blending:sl,depthTest:!0,depthWrite:!1,side:tn})}static buildGeomtery(e){let o=new Pe;o.setIndex([0,1,2,0,2,3]);let a=new Float32Array(4*3),c=new Xe(a,3);o.setAttribute("position",c),c.setXYZ(0,-1,-1,0),c.setXYZ(1,-1,1,0),c.setXYZ(2,1,1,0),c.setXYZ(3,1,-1,0),c.needsUpdate=!0;let d=new Np().copy(o),g=new Uint32Array(e),b=new Eo(g,1,!1);return b.setUsage(WM),d.setAttribute("splatIndex",b),d.instanceCount=e,d}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(c=>c.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,o=0,a=0;for(let c of this.splatBuffers){let d=c.nsplats;this.colors.subarray(e,e+d*4).set(c.colorsA),e+=d*4,this.centers.subarray(o,o+d*3).set(c.decoded.xyz.denormDequant().data),o+=d*3,this.covariances.subarray(a,a+d*6).set(new Float32Array(c.precomputedCovarianceBufferData)),a+=d*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,o=new z$2(4096,1024);for(;o.x*o.y*2<e*6;)o.y*=2;let a=new z$2(4096,1024);for(;a.x*a.y*4<e*4;)a.y*=2;let c,d;if(this.halfPrecisionCovariancesOnGPU){d=new Uint16Array(o.x*o.y*2);for(let st=0;st<this.covariances.length;st++)d[st]=oC.toHalfFloat(this.covariances[st]);c=new xi(d,o.x,o.y,uh,va)}else d=new Float32Array(o.x*o.y*2),d.set(this.covariances),c=new xi(d,o.x,o.y,uh,Sr$1);c.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=c,this.material.uniforms.covariancesTextureSize.value.copy(o);let g=new Uint32Array(a.x*a.y*4);for(let st=0;st<e;st++){let rt=st*4,ut=st*3,gt=st*4;g[gt]=iB(this.colors[rt],this.colors[rt+1],this.colors[rt+2],this.colors[rt+3]),g[gt+1]=ob(this.centers[ut]),g[gt+2]=ob(this.centers[ut+1]),g[gt+3]=ob(this.centers[ut+2])}let b=new xi(g,a.x,a.y,Aw,js);b.internalFormat="RGBA32UI",b.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=b,this.material.uniforms.centersColorsTextureSize.value.copy(a);let j=256*4,$=new Float32Array(256*16);for(let st=0;st<this.meshMatrixWorlds.length;st++)$.set(this.meshMatrixWorlds[st].elements,st*16);let _e=new xi($,j,1,Qr,Sr$1);_e.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=_e,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:d,texture:c,size:o},centerColors:{data:g,texture:b,size:a},meshMatrixWorlds:{data:$,texture:_e}}}updateIndexes(e){let o=this.geometry;o.attributes.splatIndex.set(e),o.attributes.splatIndex.needsUpdate=!0,o.instanceCount=e.length}updateUniforms(e,o,a,c){this.splatCount>0&&(ab.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(ab),this.material.uniforms.basisViewport.value.set(2/ab.x,2/ab.y),this.material.uniforms.focal.value.set(o,a),this.material.uniforms.orthoZoom.value=c,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},tg=class{constructor(e={}){Ui(this,"updateSplatMeshUniforms",function(){let o=new z$2;return function(){this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(o),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*o.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*o.y*.45,this.splatMesh.updateUniforms(o,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),Ui(this,"updateView",function(){let o=new ce$1,a=[],c=new _(0,0,-1),d=new _(0,0,-1),g=new _,b=new _;return function(j=!1){let $=this.updateMatrixWorldsInWorkerIfNeeded(),_e=this.cropsChanged();if(!j){d.set(0,0,-1).applyQuaternion(this.camera.quaternion);let rt=!1,ut=!1;if(d.dot(c)<=.95&&(rt=!0),b.copy(this.camera.position).sub(g).length()>=1&&(ut=!0),!rt&&!ut&&!$&&!_e)return}g.copy(this.camera.position),c.copy(d),o.copy(this.camera.matrixWorld).invert(),o.premultiply(this.camera.perspCamera.projectionMatrix),a[0]=this.camera.position.x,a[1]=this.camera.position.y,a[2]=this.camera.position.z;let st={sort:{view:o.elements,cameraPosition:a,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...$?{newMatrixWorlds:this.meshMatrixWorlds}:{},..._e?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=st:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(st))}}()),this.scene=e.scene,this.currentPage=null,this.renderer=e.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let e=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=e?this:null}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new _().fromArray(e.position)),e.orientation&&(e.orientation=new Qe().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let o=[];if(this.splatEntries=o,this.activePage.traverseEntity(g=>{if(g.data.type==="Splat"){let b=g.visible;g.traverseAncestors(j=>{b&&(b=j.visible)}),b&&o.push(g)}}),this.splatMesh&&this.splatMesh.dispose(),o.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=o.map(g=>g.matrixWorld),this.meshMatrixWorldsOld=o.map(g=>g.matrixWorld.clone()),this.cropsArray=o.map(g=>g.data.crops.map(b=>b.data));let a=o.map(g=>new oc(new Uint8Array(g.data.buffer).buffer)),c=0,d=[0];for(let g of a)c+=g.getSplatCount(),d.push(c);return this.setupSplatMesh(a,c,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,d,this.meshMatrixWorlds),this.setupSortWorker(c),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let o=0;o<this.meshMatrixWorlds.length;o++)e.set(this.meshMatrixWorlds[o].elements,o*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((o,a)=>o.equals(this.meshMatrixWorldsOld[a]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(o=>o.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((o,a)=>{var c;o.data.crops.forEach((d,g)=>{this.cropsArray[a][g]===void 0?(e=!0,this.cropsArray[a][g]=d.data):Object.entries(d.data).forEach(([b,j])=>{var $;Array.isArray(j)&&j.some((_e,st)=>_e!==this.cropsArray[a][g][b][st])?(e=!0,this.cropsArray[a][g][b]=j):j!==(($=this.cropsArray[a][g])==null?void 0:$[b])&&(e=!0,this.cropsArray[a][g][b]=j)})}),o.data.crops.length!==((c=this.cropsArray[a])==null?void 0:c.length)&&(this.cropsArray[a].length=o.data.crops.length,e=!0)}),e}setupSplatMesh(e,o,a=new _,c=new Qe,d=!1,g=1,b,j){this.splatMesh=ac.buildMesh(e,o,d,g,b,j),this.splatMesh.position.copy(a),this.splatMesh.quaternion.copy(c),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=o}setupSortWorker(e){this.sortWorker=rB(e),this.sortWorker.onmessage=o=>{var a;o.data.sortDone?(this.sortRunning=!1,(a=this.splatMesh)==null||a.updateIndexes(new Uint32Array(o.data.indexesBuffer)),this.lastSortTime=o.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):o.data.sortCanceled?this.sortRunning=!1:o.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):o.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){this.splatRenderingInitialized!==!1&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}},Vx=new ts;Vx.wireframe=!0;var nB=new _,$l=class extends Pi{constructor(e,o){super(),this.data=e,this.sharedAssets=o,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new ib,this.invisibleObjects=new Ls("jflkdsafjasdifjaslk",{...a0.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,o),this.matrixAutoUpdate=!1,this.errorPage=new mr("fdasfa",{...Ca.defaultData,name:""},{shared:o,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=EL(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=_L(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let o=e.identity.join("-"),a=this.entityIdentityToEntity[o];a&&(e.uuid=a.uuid),this.entityIdentityToEntity[o]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof mr&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let o=this.find(e);if(o===void 0)return;let a=[],c=o;for(;c!==this;){let d=c;c=c.parent;let g=c.children.indexOf(d);a.splice(0,0,g)}return{entity:o,sortKey:a}}getAllSorted(e){let o=[];for(let a of e){let c=this.getWithSortKey(a.id);c!==void 0&&o.push(c)}return o.sort((a,c)=>bv(a.sortKey,c.sortKey)),o.map(a=>a.entity)}nonExistOrDescendantOf(e,o){let a=this.find(e);if(a===void 0)return!0;for(;a;){if(a.uuid===o)return!0;a=a.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===As)return this.activePage.personalCamera}if(e===""||e===void 0)return;let o=this.entityByUuid[e];return o===void 0?this.getObjectByProperty("uuid",e):o}find2D(e){for(let o of this.children)if(o instanceof mr&&o.uiScene){let a=o.uiScene.find(e);if(a)return a}}findScene2DfromObject2D(e){for(let o of this.children)if(o instanceof mr&&o.uiScene&&o.uiScene.find(e))return o.uiScene}find2DInUIObjects(e){let o;return this.traverseEntity(a=>{o===void 0&&a instanceof _r$1&&(o=a.uiCanvas.find(e))}),o}traverse2D(e){for(let o of this.children)o instanceof mr&&o.uiScene&&o.uiScene.traverse(e)}debugEnsureEntity(e){let o=this.find(e);if(o){if(Array.isArray(o.identity)&&this.findInstance(o.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(o=>{this.toExpandCloner.add(o)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var o;(o=e.cloner)==null||o.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,o){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,o)}updateTreeByOp(e,o){var a;if(e.path.length===0&&e.type===7){let c=e.parent===null?this:this.find(e.parent);if(c===void 0)throw new Error("unexpected");let d=this.createObject(e.id,e.data,e.children,c,e.localIndex,o);d.updateVisible(this),d.resetBBoxNeedsUpdate(),mn(d)&&Rn(d.parent)&&(d.invalidateUpstreamBooleanData(),d.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(c),this.markNeedsRecomputeInstancesForChildren(d),this.markToExpandCloner(d),this.markPenumbraSizeDirty(),d.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let c=this.find(e.id);if(c===void 0)throw new Error("unexpected");this.markToExpandCloner(c),c.resetBBoxNeedsUpdate(),this.unregisterObject(c);let d=c.parent;this.markNeedsRecomputeInstancesForAncessors(d),this.markNeedsRecomputeInstancesForChildren(c),this.markPenumbraSizeDirty(),c.parent.remove(c),Rn(c.parent)&&(c.parent.invalidateUpstreamBooleanData(),c.parent.invalidateDownstreamBooleanData().recomputeBoolean()),mn(c)&&(c.freeBooleanPointer(),d instanceof qn&&d.invalidateDownstreamBooleanData().recomputeBoolean()),c instanceof ic&&c.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(c),this.pathConstraints.removeDependencies(c.uuid),c.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let c=this.find(e.id);if(c===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(c);let d=c.parent;this.markNeedsRecomputeInstancesForAncessors(d),(a=c.cloner)==null||a.resetOnMove(),this.markToExpandCloner(c);let g=e.parent===null?this:this.find(e.parent);if(g===void 0)throw new Error("unexpected");g.add(c),this.markNeedsRecomputeInstancesForAncessors(g),this.markToExpandCloner(c),c.invalidateClonerTransform(c),c.updateVisible(this),c.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let b=e.localIndex;g.children.splice(b,0,g.children.pop()),mn(c)&&(c.invalidateUpstreamBooleanData(),Rn(c.parent)?c.parent.invalidateDownstreamBooleanData().recomputeBoolean():d instanceof qn&&d.invalidateDownstreamBooleanData().recomputeBoolean()),c.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var o;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let a of this.children)a instanceof mr&&(a.visible=a.uuid===e,a.visible&&(this.activePage=a,this.activePage.onActive(this)));this.activePage!==((o=this.splatViewer)==null?void 0:o.activePage)&&this.reloadSplats()}updateEntityByOp(e,o,a,c){if(o.type===0){if(("overrides"in o.props||"component"in o.props)&&this.markNeedsRecomputeInstances(),"visible"in o.props&&this.markPenumbraSizeDirty(),o.path.includes("overrides")&&"states"in o.props){let{rest:g}=o.props;o={...o,props:g},this.markNeedsRecomputeInstances()}o.path[0]==="pathSnapping"&&o.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,o.props.pathId)}let d=this.find(e);if(d)try{SL(d,o,a,{scene:this,shared:c}),d instanceof ur&&d.updateGeometryGroupsIfNeeded()}catch(g){console.error(g)}}updateEntity2DByOp(e,o,a,c,d,g=[]){e.updateEntityByOp(o,a,c,d),this.traverseEntity(b=>{(b instanceof _r$1||b instanceof mr)&&(g.includes(b.frameId??"")||b.frameId===o)&&b.updateEntity2DByOp(o,a,c,d)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,o){let a=Object.entries(o.data.lib.components).map((c,d)=>({data:c[1].asset.data,children:c[1].asset.children,id:c[0],fi:d}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:o}),this.add(this.invisibleObjects),this.createChildrenObjects(a,this.invisibleObjects,o),this.createChildrenObjects(e.objects,this,o),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(o,!0),this.traverseEntity(c=>{c instanceof wr$1&&c.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(o=>{(o.data.type==="Component"||o.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){vt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(o=>{vt.is(o)&&o.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,o,a,c,d,g,b){if(e){let j=c.find(e);j&&j!==c&&d.forInstancesRec($=>{$.data=Tl($.data,_e=>{let st=_e.events.data(b.id),rt=$.goUp(g);if(rt){let ut=[...xv(rt.identity),e].join("-"),gt=this.entityIdentityToEntity[ut];if(gt){let yt=gt.uuid,wt=Nr$1.zoom(st,o);wt[a]=yt}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,o,a,c,d,g){e.forEach(b=>{b.data.type==="Transition"?this.relativeizeInner(b.data.object,[...o,b.id],"object",a,c,d,g):b.data.type==="Animation"&&this.relativeizeInner(b.data.object,[...o,b.id],"object",a,c,d,g)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof uo&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((o,a)=>{o.data.events.forEach(c=>{if(c.data.type==="GameControl"){let d=!1;if(o.forInstancesRec(g=>{g.data=Tl(g.data,b=>{g.isInstanceRoot||(b.events.delete(c.id),d=!0)}).data}),d===!1)for(let g of ld.list)this.rewriteActions(c.data.gameActions[g],["gameActions",g],e,o,a,c)}else c.data.type==="Conditional"?(c.data.condition.type==="Distance"?(this.relativeizeInner(c.data.condition.fromObject,["condition"],"fromObject",e,o,a,c),this.relativeizeInner(c.data.condition.toObject,["condition"],"toObject",e,o,a,c)):c.data.condition.type==="State"?this.relativeizeInner(c.data.condition.object,["condition"],"object",e,o,a,c):c.data.condition.type==="Comparison"&&(c.data.condition.lOperand.type==="Property"&&this.relativeizeInner(c.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,o,a,c),c.data.condition.rOperand.type==="Property"&&this.relativeizeInner(c.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,o,a,c)),this.rewriteActions(c.data.inActions,["inActions"],e,o,a,c),this.rewriteActions(c.data.outActions,["outActions"],e,o,a,c)):"actions"in c.data&&this.rewriteActions(c.data.actions,["actions"],e,o,a,c)})}),!0})}expandInstances(e,o,a){let c=new Set;this.traverseEntity(d=>{if(d instanceof uo&&d.isInstanceRoot)return d.expandInstanceChildren({scene:this,shared:e,pendingDeletes:c}),o||d.resetBBoxNeedsUpdate(),a&&d.traverseEntity(g=>{a.addClip(g)}),!0});for(let d of c)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(d),Qx(d)}recomputeInstances(e,o){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(a=>{a instanceof uo&&a.isInstanceRoot&&(a.component=void 0)}),this.expandInstances(e,!1,o))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(o=>{let a=typeof o.identity=="string"?o.identity:o.identity.join("-");this.entityIdentityToEntity[a]===o&&(delete this.entityByUuid[o.uuid],delete this.entityIdentityToEntity[a]),o.dispose()})}clearScene(){for(let e of this.children)vt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,o){this.init(e,o)}raycast(e){return this.raycast1(e,!1)}raycast1(e,o){let a=[],c=d=>{for(let g of d.children){let b=g.cloner;if(vt.is(g)&&!g.raycastLock&&(g.visible||b!=null&&b.object.data.visible))if(o===!0&&g.isInstanceRoot){let j=[];if(e.intersectObject(g,!0,j),j.length){let $=j[0];$.object=g,$.point.applyMatrix4($.object.matrixWorld);let _e=g.matrixWorld.clone().invert();$.point.applyMatrix4(_e),a.push($)}}else(mn(g)||Wm(g)&&this.enableHelpers&&g.objectHelper.visible)&&(e.intersectObject(g,!1,a),eg(g,e,a)),c(g)}};return c(this.activePage),a}raycastWithClones(e){let o=[],a=c=>{for(let d of c.children){let g=d.cloner;vt.is(d)&&(d.visible||g!=null&&g.object.data.visible)&&((mn(d)||Wm(d)&&this.enableHelpers&&d.objectHelper.visible)&&(e.intersectObject(d,!1,o),eg(d,e,o,!0)),a(d))}};return a(this),o}forEachEntity(e){for(let o of this.children)vt.is(o)&&e(o)}traverseConcreteEntity(e){for(let o of this.children)vt.is(o)&&o.isConcreteEntity&&o.traverseEntity(e)}traverseEntity(e){for(let o of this.children)vt.is(o)&&o.traverseEntity(e)}updateFont(e,o){this.traverseEntity(a=>{if(a instanceof ur&&a.data.type==="Mesh"&&a.data.geometry.type==="TextGeometry"&&a.data.geometry.font===e){let c=a.geometry,d=a.data.geometry;c.updateFont(e,o).then(()=>{c.update(d);let g=a.invalidateDownstreamBooleanData();Rn(g)&&g.recomputeBoolean()})}})}traverseObject(e){for(let o of this.children)Td.is(o)&&o.traverseObject(e)}traverseVisibleEntity(e){for(let o of this.children)vt.is(o)&&o.visible&&o.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,o,a){let c=0;for(let d of e)this.createObject(d.id,d.data,d.children,o,c,a),c+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let o of e.children)this.unregisterObject(o)}createObject(e,o,a,c,d,g){var $;let b={scene:this,shared:g},j=rb(e,o,b);return j&&(this.entityByUuid[e]=j,c.add(j),c.children.splice(d,0,c.children.pop()),a.length>0&&(j.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(a,j,g)),j.updateState(o,b),j instanceof ur&&j.updateGeometryGroupsIfNeeded(),j.updateVisible(this),j.cloner&&this.toExpandCloner.add(j),($=o.pathSnapping)!=null&&$.pathId&&this.pathConstraints.setConstraint(e,o.pathSnapping.pathId)),o.type==="Empty"&&o.animations&&j.traverseEntity(_e=>{let st=_e.dataPatched;if(_e instanceof ur&&st.bones&&st.boneInverses){let rt=st.bones.map(yt=>this.find(yt)),ut=st.boneInverses.map(yt=>new ce$1().fromArray(yt)),gt=new ul(rt,ut);_e.bind(gt,_e.bindMatrix)}else _e.matrixAutoUpdate=!0}),j}getCenter(e){let o=[];for(let c=0,d=e.length;c<d;++c){let{id:g,recursive:b}=e[c],j=this.find(g),$=b?j.recursiveBBox:j.singleBBox;o.push(...$.vertices)}let a=new Wt;return a.setFromPoints(o),a.getCenter(nB),nB}copyMatrixWorld(e,o){if(e===null){o.identity();return}let a=this.find(e);a?o.copy(a.matrixWorld):o.identity()}copyParentMatrixWorld(e,o){var c;if(e===null){o.identity();return}let a=(c=this.find(e))==null?void 0:c.parent;a?o.copy(a.matrixWorld):o.identity()}traverseMaterial(e){this.traverseEntity(o=>{if(o instanceof pr)if(Array.isArray(o.material))for(let a=0;a<o.material.length;a++)o.material[a]instanceof Wn&&e(o.material[a]);else o.material instanceof Wn&&e(o.material)})}updateViewPlaneSize(e,o,a=!1){this.traverseConcreteEntity(c=>{c instanceof wr$1&&c.setViewplaneSize(e,o,a)})}initializeSplatViewer(e){this.splatViewer=new tg({scene:this,renderer:e}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.reloadSplats()}},rg=(e,o)=>{let a=o.x-e.x,c=o.y-e.y;return Math.sqrt(a*a+c*c)},sB=(e,o)=>{let a=o.x-e.x,c=o.y-e.y;return kK(Math.atan2(c,a))},oB=(e,o,a)=>{let c={x:0,y:0};return a=lb(a),c.x=e.x-o*Math.cos(a),c.y=e.y-o*Math.sin(a),c},lb=e=>e*(Math.PI/180),kK=e=>e*(180/Math.PI),aB=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,aE=new Map,lE=e=>{aE.has(e)&&clearTimeout(aE.get(e)),aE.set(e,setTimeout(e,100))},jf=(e,o,a)=>{let c=o.split(/[ ,]+/g),d;for(let g=0;g<c.length;g+=1)d=c[g],e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent(d,a)},cE=(e,o,a)=>{let c=o.split(/[ ,]+/g),d;for(let g=0;g<c.length;g+=1)d=c[g],e.removeEventListener?e.removeEventListener(d,a):e.detachEvent&&e.detachEvent(d,a)},cb=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),uE=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,o=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:o}},ub=(e,o)=>{o.top||o.right||o.bottom||o.left?(e.style.top=o.top,e.style.right=o.right,e.style.bottom=o.bottom,e.style.left=o.left):(e.style.left=o.x+"px",e.style.top=o.y+"px")},hb=(e,o,a)=>{let c=cB(e);for(let d in c)if(c.hasOwnProperty(d))if(typeof o=="string")c[d]=o+" "+a;else{let g="";for(let b=0,j=o.length;b<j;b+=1)g+=o[b]+" "+a+", ";c[d]=g.slice(0,-2)}return c},lB=(e,o)=>{let a=cB(e);for(let c in a)a.hasOwnProperty(c)&&(a[c]=o);return a},cB=e=>{let o={};return o[e]="",["webkit","Moz","o"].forEach(function(a){o[a+e.charAt(0).toUpperCase()+e.slice(1)]=""}),o},db=(e,o)=>{for(let a in o)o.hasOwnProperty(a)&&(e[a]=o[a]);return e},uB=(e,o)=>{let a={};for(let c in e)e.hasOwnProperty(c)&&o.hasOwnProperty(c)?a[c]=o[c]:e.hasOwnProperty(c)&&(a[c]=e[c]);return a},ig=(e,o)=>{if(e.length)for(let a=0,c=e.length;a<c;a+=1)o(e[a]);else o(e)},hB=(e,o,a)=>({x:Math.min(Math.max(e.x,o.x-a),o.x+a),y:Math.min(Math.max(e.y,o.y-a),o.y+a)});typeof window<"u"&&(dB="ontouchstart"in window,fB=!!window.PointerEvent,pB=!!window.MSPointerEvent);var dB,fB,pB,ng={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Hf,sg={};fB?Hf=ng.pointer:pB?Hf=ng.MSPointer:dB?(Hf=ng.touch,sg=ng.mouse):Hf=ng.mouse;function pu(){}pu.prototype.on=function(e,o){var a=this,c=e.split(/[ ,]+/g),d;a._handlers_=a._handlers_||{};for(var g=0;g<c.length;g+=1)d=c[g],a._handlers_[d]=a._handlers_[d]||[],a._handlers_[d].push(o);return a};pu.prototype.off=function(e,o){var a=this;return a._handlers_=a._handlers_||{},e===void 0?a._handlers_={}:o===void 0?a._handlers_[e]=null:a._handlers_[e]&&a._handlers_[e].indexOf(o)>=0&&a._handlers_[e].splice(a._handlers_[e].indexOf(o),1),a};pu.prototype.trigger=function(e,o){var a=this,c=e.split(/[ ,]+/g),d;a._handlers_=a._handlers_||{};for(var g=0;g<c.length;g+=1)d=c[g],a._handlers_[d]&&a._handlers_[d].length&&a._handlers_[d].forEach(function(b){b.call(a,{type:d,target:a},o)})};pu.prototype.config=function(e){var o=this;o.options=o.defaults||{},e&&(o.options=uB(o.options,e))};pu.prototype.bindEvt=function(e,o){var a=this;return a._domHandlers_=a._domHandlers_||{},a._domHandlers_[o]=function(){typeof a["on"+o]=="function"?a["on"+o].apply(a,arguments):console.warn('[WARNING] : Missing "on'+o+'" handler.')},jf(e,Hf[o],a._domHandlers_[o]),sg[o]&&jf(e,sg[o],a._domHandlers_[o]),a};pu.prototype.unbindEvt=function(e,o){var a=this;return a._domHandlers_=a._domHandlers_||{},cE(e,Hf[o],a._domHandlers_[o]),sg[o]&&cE(e,sg[o],a._domHandlers_[o]),delete a._domHandlers_[o],this};var Wf=pu;function Fi(e,o){return this.identifier=o.identifier,this.position=o.position,this.frontPosition=o.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(o),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Fi.id,Fi.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Fi.prototype=new Wf;Fi.constructor=Fi;Fi.id=0;Fi.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Fi.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",o=lB("borderRadius","50%"),a=hb("transition","opacity",e),c={};return c.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},c.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},c.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},db(c.el,a),this.options.shape==="circle"&&db(c.back,o),db(c.front,o),this.applyStyles(c),this};Fi.prototype.applyStyles=function(e){for(var o in this.ui)if(this.ui.hasOwnProperty(o))for(var a in e[o])this.ui[o].style[a]=e[o][a];return this};Fi.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Fi.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Fi.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Fi.prototype.show=function(e){var o=this;return o.options.dataOnly||(clearTimeout(o.removeTimeout),clearTimeout(o.showTimeout),clearTimeout(o.restTimeout),o.addToDom(),o.restCallback(),setTimeout(function(){o.ui.el.style.opacity=1},0),o.showTimeout=setTimeout(function(){o.trigger("shown",o.instance),typeof e=="function"&&e.call(this)},o.options.fadeTime)),o};Fi.prototype.hide=function(e){var o=this;if(o.options.dataOnly)return o;if(o.ui.el.style.opacity=o.options.restOpacity,clearTimeout(o.removeTimeout),clearTimeout(o.showTimeout),clearTimeout(o.restTimeout),o.removeTimeout=setTimeout(function(){var a=o.options.mode==="dynamic"?"none":"block";o.ui.el.style.display=a,typeof e=="function"&&e.call(o),o.trigger("hidden",o.instance)},o.options.fadeTime),o.options.restJoystick){let a=o.options.restJoystick,c={};c.x=a===!0||a.x!==!1?0:o.instance.frontPosition.x,c.y=a===!0||a.y!==!1?0:o.instance.frontPosition.y,o.setPosition(e,c)}return o};Fi.prototype.setPosition=function(e,o){var a=this;a.frontPosition={x:o.x,y:o.y};var c=a.options.fadeTime+"ms",d={};d.front=hb("transition",["top","left"],c);var g={front:{}};g.front={left:a.frontPosition.x+"px",top:a.frontPosition.y+"px"},a.applyStyles(d),a.applyStyles(g),a.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(a),a.restCallback()},a.options.fadeTime)};Fi.prototype.restCallback=function(){var e=this,o={};o.front=hb("transition","none",""),e.applyStyles(o),e.trigger("rested",e.instance)};Fi.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Fi.prototype.computeDirection=function(e){var o=e.angle.radian,a=Math.PI/4,c=Math.PI/2,d,g,b;if(o>a&&o<a*3&&!e.lockX?d="up":o>-a&&o<=a&&!e.lockY?d="left":o>-a*3&&o<=-a&&!e.lockX?d="down":e.lockY||(d="right"),e.lockY||(o>-c&&o<c?g="left":g="right"),e.lockX||(o>0?b="up":b="down"),e.force>this.options.threshold){var j={},$;for($ in this.direction)this.direction.hasOwnProperty($)&&(j[$]=this.direction[$]);var _e={};this.direction={x:g,y:b,angle:d},e.direction=this.direction;for($ in j)j[$]===this.direction[$]&&(_e[$]=!0);if(_e.x&&_e.y&&_e.angle)return e;(!_e.x||!_e.y)&&this.trigger("plain",e),_e.x||this.trigger("plain:"+g,e),_e.y||this.trigger("plain:"+b,e),_e.angle||this.trigger("dir dir:"+d,e)}else this.resetDirection();return e};var mB=Fi;function ci(e,o){var a=this;a.nipples=[],a.idles=[],a.actives=[],a.ids=[],a.pressureIntervals={},a.manager=e,a.id=ci.id,ci.id+=1,a.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},a.config(o),(a.options.mode==="static"||a.options.mode==="semi")&&(a.options.multitouch=!1),a.options.multitouch||(a.options.maxNumberOfNipples=1);let c=getComputedStyle(a.options.zone.parentElement);return c&&c.display==="flex"&&(a.parentIsFlex=!0),a.updateBox(),a.prepareNipples(),a.bindings(),a.begin(),a.nipples}ci.prototype=new Wf;ci.constructor=ci;ci.id=0;ci.prototype.prepareNipples=function(){var e=this,o=e.nipples;o.on=e.on.bind(e),o.off=e.off.bind(e),o.options=e.options,o.destroy=e.destroy.bind(e),o.ids=e.ids,o.id=e.id,o.processOnMove=e.processOnMove.bind(e),o.processOnEnd=e.processOnEnd.bind(e),o.get=function(a){if(a===void 0)return o[0];for(var c=0,d=o.length;c<d;c+=1)if(o[c].identifier===a)return o[c];return!1}};ci.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};ci.prototype.begin=function(){var e=this,o=e.options;if(o.mode==="static"){var a=e.createNipple(o.position,e.manager.getIdentifier());a.add(),e.idles.push(a)}};ci.prototype.createNipple=function(e,o){var a=this,c=a.manager.scroll,d={},g=a.options,b={x:a.parentIsFlex?c.x:c.x+a.box.left,y:a.parentIsFlex?c.y:c.y+a.box.top};if(e.x&&e.y)d={x:e.x-b.x,y:e.y-b.y};else if(e.top||e.right||e.bottom||e.left){var j=document.createElement("DIV");j.style.display="hidden",j.style.top=e.top,j.style.right=e.right,j.style.bottom=e.bottom,j.style.left=e.left,j.style.position="absolute",g.zone.appendChild(j);var $=j.getBoundingClientRect();g.zone.removeChild(j),d=e,e={x:$.left+c.x,y:$.top+c.y}}var _e=new mB(a,{color:g.color,size:g.size,threshold:g.threshold,fadeTime:g.fadeTime,dataOnly:g.dataOnly,restJoystick:g.restJoystick,restOpacity:g.restOpacity,mode:g.mode,identifier:o,position:e,zone:g.zone,frontPosition:{x:0,y:0},shape:g.shape});return g.dataOnly||(ub(_e.ui.el,d),ub(_e.ui.front,_e.frontPosition)),a.nipples.push(_e),a.trigger("added "+_e.identifier+":added",_e),a.manager.trigger("added "+_e.identifier+":added",_e),a.bindNipple(_e),_e};ci.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};ci.prototype.bindNipple=function(e){var o=this,a,c=function(d,g){a=d.type+" "+g.id+":"+d.type,o.trigger(a,g)};e.on("destroyed",o.onDestroyed.bind(o)),e.on("shown hidden rested dir plain",c),e.on("dir:up dir:right dir:down dir:left",c),e.on("plain:up plain:right plain:down plain:left",c)};ci.prototype.pressureFn=function(e,o,a){var c=this,d=0;clearInterval(c.pressureIntervals[a]),c.pressureIntervals[a]=setInterval((function(){var g=e.force||e.pressure||e.webkitForce||0;g!==d&&(o.trigger("pressure",g),c.trigger("pressure "+o.identifier+":pressure",g),d=g)}).bind(c),100)};ci.prototype.onstart=function(e){var o=this,a=o.options,c=e;e=cb(e),o.updateBox();var d=function(g){o.actives.length<a.maxNumberOfNipples?o.processOnStart(g):c.type.match(/^touch/)&&(Object.keys(o.manager.ids).forEach(function(b){if(Object.values(c.touches).findIndex(function($){return $.identifier===b})<0){var j=[e[0]];j.identifier=b,o.processOnEnd(j)}}),o.actives.length<a.maxNumberOfNipples&&o.processOnStart(g))};return ig(e,d),o.manager.bindDocument(),!1};ci.prototype.processOnStart=function(e){var o=this,a=o.options,c,d=o.manager.getIdentifier(e),g=e.force||e.pressure||e.webkitForce||0,b={x:e.pageX,y:e.pageY},j=o.getOrCreate(d,b);j.identifier!==d&&o.manager.removeIdentifier(j.identifier),j.identifier=d;var $=function(st){st.trigger("start",st),o.trigger("start "+st.id+":start",st),st.show(),g>0&&o.pressureFn(e,st,st.identifier),o.processOnMove(e)};if((c=o.idles.indexOf(j))>=0&&o.idles.splice(c,1),o.actives.push(j),o.ids.push(j.identifier),a.mode!=="semi")$(j);else{var _e=rg(b,j.position);if(_e<=a.catchDistance)$(j);else{j.destroy(),o.processOnStart(e);return}}return j};ci.prototype.getOrCreate=function(e,o){var a=this,c=a.options,d;return/(semi|static)/.test(c.mode)?(d=a.idles[0],d?(a.idles.splice(0,1),d):c.mode==="semi"?a.createNipple(o,e):(console.warn("Coudln't find the needed nipple."),!1)):(d=a.createNipple(o,e),d)};ci.prototype.processOnMove=function(e){var o=this,a=o.options,c=o.manager.getIdentifier(e),d=o.nipples.get(c),g=o.manager.scroll;if(!aB(e)){this.processOnEnd(e);return}if(!d){console.error("Found zombie joystick with ID "+c),o.manager.removeIdentifier(c);return}if(a.dynamicPage){var b=d.el.getBoundingClientRect();d.position={x:g.x+b.left,y:g.y+b.top}}d.identifier=c;var j=d.options.size/2,$={x:e.pageX,y:e.pageY};a.lockX&&($.y=d.position.y),a.lockY&&($.x=d.position.x);var _e=rg($,d.position),st=sB($,d.position),rt=lb(st),ut=_e/j,gt={distance:_e,position:$},yt,wt;if(d.options.shape==="circle"?(yt=Math.min(_e,j),wt=oB(d.position,yt,st)):(wt=hB($,d.position,j),yt=rg(wt,d.position)),a.follow){if(_e>j){let Tt=$.x-wt.x,kt=$.y-wt.y;d.position.x+=Tt,d.position.y+=kt,d.el.style.top=d.position.y-(o.box.top+g.y)+"px",d.el.style.left=d.position.x-(o.box.left+g.x)+"px",_e=rg($,d.position)}}else $=wt,_e=yt;var Ct=$.x-d.position.x,Pt=$.y-d.position.y;d.frontPosition={x:Ct,y:Pt},a.dataOnly||ub(d.ui.front,d.frontPosition);var At={identifier:d.identifier,position:$,force:ut,pressure:e.force||e.pressure||e.webkitForce||0,distance:_e,angle:{radian:rt,degree:st},vector:{x:Ct/j,y:-Pt/j},raw:gt,instance:d,lockX:a.lockX,lockY:a.lockY};At=d.computeDirection(At),At.angle={radian:lb(180-st),degree:180-st},d.trigger("move",At),o.trigger("move "+d.id+":move",At)};ci.prototype.processOnEnd=function(e){var o=this,a=o.options,c=o.manager.getIdentifier(e),d=o.nipples.get(c),g=o.manager.removeIdentifier(d.identifier);!d||(a.dataOnly||d.hide(function(){a.mode==="dynamic"&&(d.trigger("removed",d),o.trigger("removed "+d.id+":removed",d),o.manager.trigger("removed "+d.id+":removed",d),d.destroy())}),clearInterval(o.pressureIntervals[d.identifier]),d.resetDirection(),d.trigger("end",d),o.trigger("end "+d.id+":end",d),o.ids.indexOf(d.identifier)>=0&&o.ids.splice(o.ids.indexOf(d.identifier),1),o.actives.indexOf(d)>=0&&o.actives.splice(o.actives.indexOf(d),1),/(semi|static)/.test(a.mode)?o.idles.push(d):o.nipples.indexOf(d)>=0&&o.nipples.splice(o.nipples.indexOf(d),1),o.manager.unbindDocument(),/(semi|static)/.test(a.mode)&&(o.manager.ids[g.id]=g.identifier))};ci.prototype.onDestroyed=function(e,o){var a=this;a.nipples.indexOf(o)>=0&&a.nipples.splice(a.nipples.indexOf(o),1),a.actives.indexOf(o)>=0&&a.actives.splice(a.actives.indexOf(o),1),a.idles.indexOf(o)>=0&&a.idles.splice(a.idles.indexOf(o),1),a.ids.indexOf(o.identifier)>=0&&a.ids.splice(a.ids.indexOf(o.identifier),1),a.manager.removeIdentifier(o.identifier),a.manager.unbindDocument()};ci.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(a){a.destroy()});for(var o in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(o)&&clearInterval(e.pressureIntervals[o]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var gB=ci;function $i(e){var o=this;o.ids={},o.index=0,o.collections=[],o.scroll=uE(),o.config(e),o.prepareCollections();var a=function(){var d;o.collections.forEach(function(g){g.forEach(function(b){d=b.el.getBoundingClientRect(),b.position={x:o.scroll.x+d.left,y:o.scroll.y+d.top}})})};if(typeof window>"u")return o.collections;jf(window,"resize",function(){lE(a)});var c=function(){o.scroll=uE()};return jf(window,"scroll",function(){lE(c)}),o.collections}$i.prototype=new Wf;$i.constructor=$i;$i.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(o){var a;return e.collections.every(function(c){return a=c.get(o),!a}),a}};$i.prototype.create=function(e){return this.createCollection(e)};$i.prototype.createCollection=function(e){var o=this,a=new gB(o,e);return o.bindCollection(a),o.collections.push(a),a};$i.prototype.bindCollection=function(e){var o=this,a,c=function(d,g){a=d.type+" "+g.id+":"+d.type,o.trigger(a,g)};e.on("destroyed",o.onDestroyed.bind(o)),e.on("shown hidden rested dir plain",c),e.on("dir:up dir:right dir:down dir:left",c),e.on("plain:up plain:right plain:down plain:left",c)};$i.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};$i.prototype.unbindDocument=function(e){var o=this;(!Object.keys(o.ids).length||e===!0)&&(o.unbindEvt(document,"move").unbindEvt(document,"end"),o.binded=!1)};$i.prototype.getIdentifier=function(e){var o;return e?(o=e.identifier===void 0?e.pointerId:e.identifier,o===void 0&&(o=this.latest||0)):o=this.index,this.ids[o]===void 0&&(this.ids[o]=this.index,this.index+=1),this.latest=o,this.ids[o]};$i.prototype.removeIdentifier=function(e){var o={};for(var a in this.ids)if(this.ids[a]===e){o.id=a,o.identifier=this.ids[a],delete this.ids[a];break}return o};$i.prototype.onmove=function(e){var o=this;return o.onAny("move",e),!1};$i.prototype.onend=function(e){var o=this;return o.onAny("end",e),!1};$i.prototype.oncancel=function(e){var o=this;return o.onAny("end",e),!1};$i.prototype.onAny=function(e,o){var a=this,c,d="processOn"+e.charAt(0).toUpperCase()+e.slice(1);o=cb(o);var g=function(j,$,_e){_e.ids.indexOf($)>=0&&(_e[d](j),j._found_=!0)},b=function(j){c=a.getIdentifier(j),ig(a.collections,g.bind(null,j,c)),j._found_||a.removeIdentifier(c)};return ig(o,b),!1};$i.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(o){o.destroy()}),e.off()};$i.prototype.onDestroyed=function(e,o){var a=this;if(a.collections.indexOf(o)<0)return!1;a.collections.splice(a.collections.indexOf(o),1)};var yB=$i,vB=new yB,xB={create:function(e){return vB.create(e)},factory:vB},bB=new Map,og=new Map,ta=class{constructor(e,o,a,c){this.data=o;let{audio:d,volume:g,delay:b,loop:j}=o;if(!d)throw new Error("Missing property");let $=typeof d=="string"?c.getAudio(d).src:d.data;this.audioPlayer=new ja({src:$,volume:g,delay:b,loop:j}),og.has(a.uuid)?og.get(a.uuid).push(this):og.set(a.uuid,[this]),bB.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},qf=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let o=bB.get(e);!o||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{o.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):o.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let o=og.get(e);!(o!=null&&o.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{o.forEach(a=>a.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):o.forEach(a=>a.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...og.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(o=>{o.forEach(a=>{a.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(o=>{o.forEach(a=>{a.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ag=class{constructor(e,o,a,c,d){if(this.data=o,this.shared=c,this.condition=d,o.interaction==="play")this.interaction=new ta(e,o,a,c);else if(o.interaction==="pause"||o.interaction==="stop")this.interaction=new qf(o);else throw new Error("Missing property")}dispatchBasic(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},lg=class{constructor(e,o,a,c){this.data=e,this.page=o,this.shared=a,this.condition=c,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop():this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze():this.unFreeze()}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},this.delay);return}this.particleSystem.start()}stop(){this.particleSystem.stop(),this.clearDelay()}freeze(){this.particleSystem.froze(),this.clearDelay()}unFreeze(){this.particleSystem.unFroze(),this.clearDelay()}reset(){this.particleSystem.reset(),this.clearDelay()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze();break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop();break;case"reset":this.reset();break}}dispatchConditional(){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.particleSystem.start();break;case"stop":this.particleSystem.stop();break;case"reset":this.particleSystem.reset();break}}dispatchGameControl(e){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.particleSystem.start():this.particleSystem.stop()}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},VK="text/plain",zK="us-ascii",SB=(e,o)=>o.some(a=>a instanceof RegExp?a.test(e):a===e),UK=(e,{stripHash:o})=>{let a=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!a)throw new Error(`Invalid URL: ${e}`);let{type:c,data:d,hash:g}=a.groups,b=c.split(";");g=o?"":g;let j=!1;b[b.length-1]==="base64"&&(b.pop(),j=!0);let $=(b.shift()||"").toLowerCase(),_e=[...b.map(st=>{let[rt,ut=""]=st.split("=").map(gt=>gt.trim());return rt==="charset"&&(ut=ut.toLowerCase(),ut===zK)?"":`${rt}${ut?`=${ut}`:""}`}).filter(Boolean)];return j&&_e.push("base64"),(_e.length>0||$&&$!==VK)&&_e.unshift($),`data:${_e.join(";")},${j?d.trim():d}${g?`#${g}`:""}`};function hE(e,o){if(o={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...o},e=e.trim(),/^data:/i.test(e))return UK(e,o);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let a=e.startsWith("//");!a&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,o.defaultProtocol));let c=new URL(e);if(o.forceHttp&&o.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(o.forceHttp&&c.protocol==="https:"&&(c.protocol="http:"),o.forceHttps&&c.protocol==="http:"&&(c.protocol="https:"),o.stripAuthentication&&(c.username="",c.password=""),o.stripHash?c.hash="":o.stripTextFragment&&(c.hash=c.hash.replace(/#?:~:text.*?$/i,"")),c.pathname){let g=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,b=0,j="";for(;;){let _e=g.exec(c.pathname);if(!_e)break;let st=_e[0],rt=_e.index,ut=c.pathname.slice(b,rt);j+=ut.replace(/\/{2,}/g,"/"),j+=st,b=rt+st.length}let $=c.pathname.slice(b,c.pathname.length);j+=$.replace(/\/{2,}/g,"/"),c.pathname=j}if(c.pathname)try{c.pathname=decodeURI(c.pathname)}catch{}if(o.removeDirectoryIndex===!0&&(o.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(o.removeDirectoryIndex)&&o.removeDirectoryIndex.length>0){let g=c.pathname.split("/"),b=g[g.length-1];SB(b,o.removeDirectoryIndex)&&(g=g.slice(0,-1),c.pathname=g.slice(1).join("/")+"/")}if(c.hostname&&(c.hostname=c.hostname.replace(/\.$/,""),o.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(c.hostname)&&(c.hostname=c.hostname.replace(/^www\./,""))),Array.isArray(o.removeQueryParameters))for(let g of[...c.searchParams.keys()])SB(g,o.removeQueryParameters)&&c.searchParams.delete(g);if(o.removeQueryParameters===!0&&(c.search=""),o.sortQueryParameters){c.searchParams.sort();try{c.search=decodeURIComponent(c.search)}catch{}}o.removeTrailingSlash&&(c.pathname=c.pathname.replace(/\/$/,""));let d=e;return e=c.toString(),!o.removeSingleSlash&&c.pathname==="/"&&!d.endsWith("/")&&c.hash===""&&(e=e.replace(/\/$/,"")),(o.removeTrailingSlash||c.pathname==="/")&&c.hash===""&&o.removeSingleSlash&&(e=e.replace(/\/$/,"")),a&&!o.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),o.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var pb=class{constructor({url:e,context:o},a,c,d){if(this.controlsManager=a,this.shared=c,this.condition=d,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:hE(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=o??"tab"}dispatch(){var e;if(Ut(this.shared,this.condition)===!1)return!1;Uh?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp($e$1[0]),z2())}},cg=class{constructor(e,o,a,c,d){this.data=e,this.page=o,this.controlsManager=a,this.shared=c,this.condition=d,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=g=>{var _e,st;this.timeoutIdQueue.shift();let b=this.page.scene.find(g);if(b===void 0)return;let j=this.controlsManager.sharedGameControlGlobals.rapierWorld,$=j?(_e=b.dataPatched.physics)==null?void 0:_e.fusedBody:!0;if(b.cloner){for(let rt of b.cloner.children)$?(rt.playModeVisible=!1,rt.rigidBody&&((st=b.dataPatched.physics)==null?void 0:st.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(rt.rigidBody.collider(0).handle),j.removeRigidBody(rt.rigidBody),rt.rigidBody=void 0),rt.bvhGeometry&&(rt.bvhGeometry=void 0)):this.clone===void 0||this.clone===rt?(rt.playModeVisible=!1,rt.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(rt.rigidBody.collider(0).handle),j.removeRigidBody(rt.rigidBody),rt.rigidBody=void 0)):rt.playModeVisible===void 0&&(rt.playModeVisible=!0);($||this.clone===void 0||this.clone===!1)&&(b.visible=!1,b.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(b.rigidBody.collider(0).handle),j.removeRigidBody(b.rigidBody),b.rigidBody=void 0),b.bvhGeometry&&(b.bvhGeometry=void 0))}else b.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(b.rigidBody.collider(0).handle),j.removeRigidBody(b.rigidBody),b.rigidBody=void 0),b.bvhGeometry&&(b.bvhGeometry=void 0),b.visible=!1;j===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(rt=>rt.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(rt=>rt.rigidBody!==void 0),b.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Ut(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Ut(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},ug=class{constructor(e,o,a,c,d){this.data=e,this.page=o,this.shared=a,this.eventManager=c,this.condition=d,this.shared=a}dispatch(){if(Ut(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),Yf(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},MB={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},mE={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},GK=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],gb={CSS:{},springs:{}};function fo(e,o,a){return Math.min(Math.max(e,o),a)}function hg(e,o){return e.indexOf(o)>-1}function dE(e,o){return e.apply(null,o)}var dt={arr:function(e){return Array.isArray(e)},obj:function(e){return hg(Object.prototype.toString.call(e),"Object")},pth:function(e){return dt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||dt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return dt.hex(e)||dt.rgb(e)||dt.hsl(e)},key:function(e){return!MB.hasOwnProperty(e)&&!mE.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function CB(e){var o=/\(([^)]+)\)/.exec(e);return o?o[1].split(",").map(function(a){return parseFloat(a)}):[]}function PB(e,o){var a=CB(e),c=fo(dt.und(a[0])?1:a[0],.1,100),d=fo(dt.und(a[1])?100:a[1],.1,100),g=fo(dt.und(a[2])?10:a[2],.1,100),b=fo(dt.und(a[3])?0:a[3],.1,100),j=Math.sqrt(d/c),$=g/(2*Math.sqrt(d*c)),_e=$<1?j*Math.sqrt(1-$*$):0,st=1,rt=$<1?($*j+-b)/_e:-b+j;function ut(yt){var wt=o?o*yt/1e3:yt;return $<1?wt=Math.exp(-wt*$*j)*(st*Math.cos(_e*wt)+rt*Math.sin(_e*wt)):wt=(st+rt*wt)*Math.exp(-wt*j),yt===0||yt===1?yt:1-wt}function gt(){var yt=gb.springs[e];if(yt)return yt;for(var wt=1/6,Ct=0,Pt=0;;)if(Ct+=wt,ut(Ct)===1){if(Pt++,Pt>=16)break}else Pt=0;var At=Ct*wt*1e3;return gb.springs[e]=At,At}return o?ut:gt}function jK(e){return e===void 0&&(e=10),function(o){return Math.ceil(fo(o,1e-6,1)*e)*(1/e)}}var HK=function(){var e=11,o=1/(e-1);function a(st,rt){return 1-3*rt+3*st}function c(st,rt){return 3*rt-6*st}function d(st){return 3*st}function g(st,rt,ut){return((a(rt,ut)*st+c(rt,ut))*st+d(rt))*st}function b(st,rt,ut){return 3*a(rt,ut)*st*st+2*c(rt,ut)*st+d(rt)}function j(st,rt,ut,gt,yt){var wt,Ct,Pt=0;do Ct=rt+(ut-rt)/2,wt=g(Ct,gt,yt)-st,wt>0?ut=Ct:rt=Ct;while(Math.abs(wt)>1e-7&&++Pt<10);return Ct}function $(st,rt,ut,gt){for(var yt=0;yt<4;++yt){var wt=b(rt,ut,gt);if(wt===0)return rt;var Ct=g(rt,ut,gt)-st;rt-=Ct/wt}return rt}function _e(st,rt,ut,gt){if(!(0<=st&&st<=1&&0<=ut&&ut<=1))return;var yt=new Float32Array(e);if(st!==rt||ut!==gt)for(var wt=0;wt<e;++wt)yt[wt]=g(wt*o,st,ut);function Ct(Pt){for(var At=0,Tt=1,kt=e-1;Tt!==kt&&yt[Tt]<=Pt;++Tt)At+=o;--Tt;var It=(Pt-yt[Tt])/(yt[Tt+1]-yt[Tt]),Lt=At+It*o,Ft=b(Lt,st,ut);return Ft>=.001?$(Pt,Lt,st,ut):Ft===0?Lt:j(Pt,At,At+o,st,ut)}return function(Pt){return st===rt&&ut===gt||Pt===0||Pt===1?Pt:g(Ct(Pt),rt,gt)}}return _e}(),DB=function(){var e={linear:function(){return function(c){return c}}},o={Sine:function(){return function(c){return 1-Math.cos(c*Math.PI/2)}},Circ:function(){return function(c){return 1-Math.sqrt(1-c*c)}},Back:function(){return function(c){return c*c*(3*c-2)}},Bounce:function(){return function(c){for(var d,g=4;c<((d=Math.pow(2,--g))-1)/11;);return 1/Math.pow(4,3-g)-7.5625*Math.pow((d*3-2)/22-c,2)}},Elastic:function(c,d){c===void 0&&(c=1),d===void 0&&(d=.5);var g=fo(c,1,10),b=fo(d,.1,2);return function(j){return j===0||j===1?j:-g*Math.pow(2,10*(j-1))*Math.sin((j-1-b/(Math.PI*2)*Math.asin(1/g))*(Math.PI*2)/b)}}},a=["Quad","Cubic","Quart","Quint","Expo"];return a.forEach(function(c,d){o[c]=function(){return function(g){return Math.pow(g,d+2)}}}),Object.keys(o).forEach(function(c){var d=o[c];e["easeIn"+c]=d,e["easeOut"+c]=function(g,b){return function(j){return 1-d(g,b)(1-j)}},e["easeInOut"+c]=function(g,b){return function(j){return j<.5?d(g,b)(j*2)/2:1-d(g,b)(j*-2+2)/2}}}),e}();function gE(e,o){if(dt.fnc(e))return e;var a=e.split("(")[0],c=DB[a],d=CB(e);switch(a){case"spring":return PB(e,o);case"cubicBezier":return dE(HK,d);case"steps":return dE(jK,d);default:return dE(c,d)}}function OB(e){try{var o=document.querySelectorAll(e);return o}catch{return}}function yb(e,o){for(var a=e.length,c=arguments.length>=2?arguments[1]:void 0,d=[],g=0;g<a;g++)if(g in e){var b=e[g];o.call(c,b,g,e)&&d.push(b)}return d}function vb(e){return e.reduce(function(o,a){return o.concat(dt.arr(a)?vb(a):a)},[])}function wB(e){return dt.arr(e)?e:(dt.str(e)&&(e=OB(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function yE(e,o){return e.some(function(a){return a===o})}function vE(e){var o={};for(var a in e)o[a]=e[a];return o}function fE(e,o){var a=vE(e);for(var c in e)a[c]=o.hasOwnProperty(c)?o[c]:e[c];return a}function xb(e,o){var a=vE(e);for(var c in o)a[c]=dt.und(e[c])?o[c]:e[c];return a}function WK(e){var o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return o?"rgba("+o[1]+",1)":e}function qK(e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=e.replace(o,function(j,$,_e,st){return $+$+_e+_e+st+st}),c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),d=parseInt(c[1],16),g=parseInt(c[2],16),b=parseInt(c[3],16);return"rgba("+d+","+g+","+b+",1)"}function YK(e){var o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(o[1],10)/360,c=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100,g=o[4]||1;function b(ut,gt,yt){return yt<0&&(yt+=1),yt>1&&(yt-=1),yt<1/6?ut+(gt-ut)*6*yt:yt<1/2?gt:yt<2/3?ut+(gt-ut)*(2/3-yt)*6:ut}var j,$,_e;if(c==0)j=$=_e=d;else{var st=d<.5?d*(1+c):d+c-d*c,rt=2*d-st;j=b(rt,st,a+1/3),$=b(rt,st,a),_e=b(rt,st,a-1/3)}return"rgba("+j*255+","+$*255+","+_e*255+","+g+")"}function XK(e){if(dt.rgb(e))return WK(e);if(dt.hex(e))return qK(e);if(dt.hsl(e))return YK(e)}function Xa(e){var o=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(o)return o[1]}function QK(e){if(hg(e,"translate")||e==="perspective")return"px";if(hg(e,"rotate")||hg(e,"skew"))return"deg"}function pE(e,o){return dt.fnc(e)?e(o.target,o.id,o.total):e}function ra(e,o){return e.getAttribute(o)}function xE(e,o,a){var c=Xa(o);if(yE([a,"deg","rad","turn"],c))return o;var d=gb.CSS[o+a];if(!dt.und(d))return d;var g=100,b=document.createElement(e.tagName),j=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;j.appendChild(b),b.style.position="absolute",b.style.width=g+a;var $=g/b.offsetWidth;j.removeChild(b);var _e=$*parseFloat(o);return gb.CSS[o+a]=_e,_e}function IB(e,o,a){if(o in e.style){var c=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=e.style[o]||getComputedStyle(e).getPropertyValue(c)||"0";return a?xE(e,d,a):d}}function bE(e,o){if(dt.dom(e)&&!dt.inp(e)&&(ra(e,o)||dt.svg(e)&&e[o]))return"attribute";if(dt.dom(e)&&yE(GK,o))return"transform";if(dt.dom(e)&&o!=="transform"&&IB(e,o))return"css";if(e[o]!=null)return"object"}function RB(e){if(dt.dom(e)){for(var o=e.style.transform||"",a=/(\w+)\(([^)]*)\)/g,c=new Map,d;d=a.exec(o);)c.set(d[1],d[2]);return c}}function KK(e,o,a,c){var d=hg(o,"scale")?1:0+QK(o),g=RB(e).get(o)||d;return a&&(a.transforms.list.set(o,g),a.transforms.last=o),c?xE(e,g,c):g}function SE(e,o,a,c){switch(bE(e,o)){case"transform":return KK(e,o,c,a);case"css":return IB(e,o,a);case"attribute":return ra(e,o);default:return e[o]||0}}function wE(e,o){var a=/^(\*=|\+=|-=)/.exec(e);if(!a)return e;var c=Xa(e)||0,d=parseFloat(o),g=parseFloat(e.replace(a[0],""));switch(a[0][0]){case"+":return d+g+c;case"-":return d-g+c;case"*":return d*g+c}}function LB(e,o){if(dt.col(e))return XK(e);if(/\s/g.test(e))return e;var a=Xa(e),c=a?e.substr(0,e.length-a.length):e;return o?c+o:c}function AE(e,o){return Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2))}function ZK(e){return Math.PI*2*ra(e,"r")}function JK(e){return ra(e,"width")*2+ra(e,"height")*2}function $K(e){return AE({x:ra(e,"x1"),y:ra(e,"y1")},{x:ra(e,"x2"),y:ra(e,"y2")})}function BB(e){for(var o=e.points,a=0,c,d=0;d<o.numberOfItems;d++){var g=o.getItem(d);d>0&&(a+=AE(c,g)),c=g}return a}function eZ(e){var o=e.points;return BB(e)+AE(o.getItem(o.numberOfItems-1),o.getItem(0))}function NB(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return ZK(e);case"rect":return JK(e);case"line":return $K(e);case"polyline":return BB(e);case"polygon":return eZ(e)}}function tZ(e){var o=NB(e);return e.setAttribute("stroke-dasharray",o),o}function rZ(e){for(var o=e.parentNode;dt.svg(o)&&dt.svg(o.parentNode);)o=o.parentNode;return o}function FB(e,o){var a=o||{},c=a.el||rZ(e),d=c.getBoundingClientRect(),g=ra(c,"viewBox"),b=d.width,j=d.height,$=a.viewBox||(g?g.split(" "):[0,0,b,j]);return{el:c,viewBox:$,x:$[0]/1,y:$[1]/1,w:b/$[2],h:j/$[3]}}function iZ(e,o){var a=dt.str(e)?OB(e)[0]:e,c=o||100;return function(d){return{property:d,el:a,svg:FB(a),totalLength:NB(a)*(c/100)}}}function nZ(e,o){function a(j){j===void 0&&(j=0);var $=o+j>=1?o+j:0;return e.el.getPointAtLength($)}var c=FB(e.el,e.svg),d=a(),g=a(-1),b=a(1);switch(e.property){case"x":return(d.x-c.x)*c.w;case"y":return(d.y-c.y)*c.h;case"angle":return Math.atan2(b.y-g.y,b.x-g.x)*180/Math.PI}}function AB(e,o){var a=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,c=LB(dt.pth(e)?e.totalLength:e,o)+"";return{original:c,numbers:c.match(a)?c.match(a).map(Number):[0],strings:dt.str(e)||o?c.split(a):[]}}function kB(e){var o=e?vb(dt.arr(e)?e.map(wB):wB(e)):[];return yb(o,function(a,c,d){return d.indexOf(a)===c})}function VB(e){var o=kB(e);return o.map(function(a,c){return{target:a,id:c,total:o.length,transforms:{list:RB(a)}}})}function sZ(e,o){var a=vE(o);if(/^spring/.test(a.easing)&&(a.duration=PB(a.easing)),dt.arr(e)){var c=e.length,d=c===2&&!dt.obj(e[0]);d?e={value:e}:dt.fnc(o.duration)||(a.duration=o.duration/c)}var g=dt.arr(e)?e:[e];return g.map(function(b,j){var $=dt.obj(b)&&!dt.pth(b)?b:{value:b};return dt.und($.delay)&&($.delay=j?0:o.delay),dt.und($.endDelay)&&($.endDelay=j===g.length-1?o.endDelay:0),$}).map(function(b){return xb(b,a)})}function oZ(e){for(var o=yb(vb(e.map(function(g){return Object.keys(g)})),function(g){return dt.key(g)}).reduce(function(g,b){return g.indexOf(b)<0&&g.push(b),g},[]),a={},c=function(g){var b=o[g];a[b]=e.map(function(j){var $={};for(var _e in j)dt.key(_e)?_e==b&&($.value=j[_e]):$[_e]=j[_e];return $})},d=0;d<o.length;d++)c(d);return a}function aZ(e,o){var a=[],c=o.keyframes;c&&(o=xb(oZ(c),o));for(var d in o)dt.key(d)&&a.push({name:d,tweens:sZ(o[d],e)});return a}function lZ(e,o){var a={};for(var c in e){var d=pE(e[c],o);dt.arr(d)&&(d=d.map(function(g){return pE(g,o)}),d.length===1&&(d=d[0])),a[c]=d}return a.duration=parseFloat(a.duration),a.delay=parseFloat(a.delay),a}function cZ(e,o){var a;return e.tweens.map(function(c){var d=lZ(c,o),g=d.value,b=dt.arr(g)?g[1]:g,j=Xa(b),$=SE(o.target,e.name,j,o),_e=a?a.to.original:$,st=dt.arr(g)?g[0]:_e,rt=Xa(st)||Xa($),ut=j||rt;return dt.und(b)&&(b=_e),d.from=AB(st,ut),d.to=AB(wE(b,st),ut),d.start=a?a.end:0,d.end=d.start+d.delay+d.duration+d.endDelay,d.easing=gE(d.easing,d.duration),d.isPath=dt.pth(g),d.isColor=dt.col(d.from.original),d.isColor&&(d.round=1),a=d,d})}var zB={css:function(e,o,a){return e.style[o]=a},attribute:function(e,o,a){return e.setAttribute(o,a)},object:function(e,o,a){return e[o]=a},transform:function(e,o,a,c,d){if(c.list.set(o,a),o===c.last||d){var g="";c.list.forEach(function(b,j){g+=j+"("+b+") "}),e.style.transform=g}}};function UB(e,o){var a=VB(e);a.forEach(function(c){for(var d in o){var g=pE(o[d],c),b=c.target,j=Xa(g),$=SE(b,d,j,c),_e=j||Xa($),st=wE(LB(g,_e),$),rt=bE(b,d);zB[rt](b,d,st,c.transforms,!0)}})}function uZ(e,o){var a=bE(e.target,o.name);if(a){var c=cZ(o,e),d=c[c.length-1];return{type:a,property:o.name,animatable:e,tweens:c,duration:d.end,delay:c[0].delay,endDelay:d.endDelay}}}function hZ(e,o){return yb(vb(e.map(function(a){return o.map(function(c){return uZ(a,c)})})),function(a){return!dt.und(a)})}function GB(e,o){var a=e.length,c=function(g){return g.timelineOffset?g.timelineOffset:0},d={};return d.duration=a?Math.max.apply(Math,e.map(function(g){let b=g.startOnceDelay??0,j=g.pingPongDelayCorrection??0,$=g.pingPongEndDelayCorrection??0;return c(g)+b+j+$+g.duration*(g.loop??1)})):o.duration,d.delay=a?Math.min.apply(Math,e.map(function(g){let b=g.startOnceDelay??0,j=g.pingPongDelayCorrection??0;return c(g)+b+j+g.delay})):o.delay,d.endDelay=a?d.duration-Math.max.apply(Math,e.map(function(g){let b=g.startOnceDelay??0,j=g.pingPongDelayCorrection??0,$=g.pingPongEndDelayCorrection??0;return c(g)+b+j+g.duration*(g.loop??1)-g.endDelay-$})):o.endDelay,d}var _B=0;function dZ(e){var o=fE(MB,e),a=fE(mE,e),c=aZ(a,e),d=VB(e.targets),g=hZ(d,c),b=GB(g,a),j=_B;return _B++,xb(o,{id:j,children:[],animatables:d,animations:g,duration:b.duration,delay:b.delay,endDelay:b.endDelay,startOnceDelay:a.startOnceDelay,pingPongDelayCorrection:a.pingPongDelayCorrection,pingPongEndDelayCorrection:a.pingPongEndDelayCorrection})}var Fs=[],EB=[],mb,fZ=function(){function e(){mb=requestAnimationFrame(o)}function o(a){var c=Fs.length;if(c){for(var d=0;d<c;){var g=Fs[d];g.paused?(Fs.splice(d,1),c-=1):(g.tick(a),d++)}e()}else mb=cancelAnimationFrame(mb)}return e}();function pZ(e){document.hidden?(Fs.forEach(function(o){return o.pause(e.timeStamp)}),EB=Fs.slice(0),ui.running=Fs=[]):EB.forEach(function(o){return o.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",pZ);function ui(e){e===void 0&&(e={});var o=0,a=0,c=0,d,g,b=0,j=null;function $(Lt){var Ft=window.Promise&&new Promise(function(Nt){return j=Nt});return Lt.finished=Ft,Ft}var _e=dZ(e);$(_e);function st(){var Lt=_e.direction;Lt!=="alternate"&&(_e.direction=Lt!=="normal"?"normal":"reverse"),_e.reversed=!_e.reversed,g.forEach(function(Ft){(Ft.loop===1||Ft.loop%2===0)&&(Ft.reversed=_e.reversed)})}function rt(){_e.direction="normal",_e.reversed=!1,g.forEach(function(Lt){return Lt.reversed=!1})}function ut(Lt){return _e.reversed?_e.duration-Lt:Lt}function gt(){o=0,a=ut(_e.currentTime)*(1/ui.speed)}function yt(Lt,Ft,Nt=!1){Ft&&(_e.reversed?Ft.seek(Ft.duration*Ft.loop-(Lt-Ft.timelineOffset-Ft.pingPongDelayCorrection),Nt):Ft.seek(Lt-Ft.timelineOffset-Ft.startOnceDelay-Ft.pingPongDelayCorrection,Nt))}function wt(Lt,Ft=!1){if(_e.reversed)for(var Nt=b;Nt--;)yt(Lt,g[Nt],Ft);else for(var Ht=0;Ht<b;Ht++)yt(Lt,g[Ht],Ft)}function Ct(Lt){var l1,B0,a1,q1,ox,U_,tS,iS,wA,pO;var Ft=0,Nt=_e.animations,Ht=Nt.length;for(_e.direction!=="alternate"&&((l1=_e.parent)==null?void 0:l1.direction)==="alternate"?((B0=_e.parent)==null?void 0:B0.rewind)===!1&&_e.reversePlayback===!0&&_e.rewind===!1&&((a1=_e.parent)!=null&&a1.reversed&&_e.direction==="alternate"?Lt=_e.duration-_e.delay+_e.endDelay-Lt:Lt=_e.duration+_e.delay-_e.endDelay-Lt):kt(!1,(q1=_e.parent)==null?void 0:q1.rewind,_e.rewind,(ox=_e.parent)==null?void 0:ox.reversePlayback,_e.reversePlayback)&&((U_=_e.parent)!=null&&U_.reversed&&_e.direction==="alternate"?Lt=_e.duration-_e.delay+_e.endDelay-Lt:Lt=_e.duration+_e.delay-_e.endDelay-Lt);Ft<Ht;){var dr=Nt[Ft],hs=dr.animatable,us=dr.tweens,hn=us.length-1,un=us[hn];hn&&(un=yb(us,function(fD){return Lt<fD.end})[0]||un);let aR;(tS=_e.parent)!=null&&tS.reversed&&_e.direction==="alternate"?aR=fo(Lt-un.start-un.endDelay,0,un.duration)/un.duration:aR=fo(Lt-un.start-un.delay,0,un.duration)/un.duration;for(var bo=isNaN(aR)?1:un.easing(aR),_s=un.to.strings,gn=un.round,Gr=[],ds=un.to.numbers.length,Zn=void 0,Nn=0;Nn<ds;Nn++){var Qn=void 0;let fD,AA;_e.direction!=="alternate"?((iS=_e.parent)==null?void 0:iS.rewind)===!1&&_e.reversePlayback===!0&&_e.rewind===!1?(fD=un.to.numbers[Nn],AA=un.from.numbers[Nn]||0):(AA=un.to.numbers[Nn],fD=un.from.numbers[Nn]||0):kt(!0,(wA=_e.parent)==null?void 0:wA.rewind,_e.rewind,(pO=_e.parent)==null?void 0:pO.reversePlayback,_e.reversePlayback)?(fD=un.to.numbers[Nn],AA=un.from.numbers[Nn]||0):(AA=un.to.numbers[Nn],fD=un.from.numbers[Nn]||0),un.isPath?Qn=nZ(un.value,bo*AA):Qn=fD+bo*(AA-fD),gn&&(un.isColor&&Nn>2||(Qn=Math.round(Qn*gn)/gn)),Gr.push(Qn)}var bu=_s.length;if(!bu)Zn=Gr[0];else{Zn=_s[0];for(var ou=0;ou<bu;ou++){_s[ou];var g0=_s[ou+1],Su=Gr[ou];isNaN(Su)||(g0?Zn+=Su+g0:Zn+=Su+" ")}}zB[dr.type](hs.target,dr.property,Zn,hs.transforms),dr.currentValue=Zn,Ft++}}function Pt(Lt){_e[Lt]&&!_e.passThrough&&_e[Lt](_e)}function At(){_e.remaining&&_e.remaining!==!0&&_e.remaining--}let Tt={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function kt(Lt,Ft,Nt,Ht,dr){return Tt[Lt<<4|Ft<<3|Nt<<2|Ht<<1|dr]}function It(Lt,Ft=!1){var us;var Nt=_e.duration;let Ht=_e.delay,dr=Nt-_e.endDelay;(us=_e.parent)!=null&&us.reversed&&_e.direction==="alternate"&&(Ht=_e.endDelay,dr=Nt-_e.delay);var hs=ut(Lt);if(_e.progress=fo(hs/Nt*100,0,100),Ft||(_e.reversePlayback=hs<_e.currentTime),b&&wt(hs,Ft),!_e.began&&_e.currentTime>=0&&(_e.began=!0,Pt("begin")),!_e.loopBegan&&_e.currentTime>0&&(_e.loopBegan=!0,Pt("loopBegin")),(_e.reversed||hs>=0)&&hs<=Ht&&_e.currentTime!==0&&(Ct(0),Pt("change")),(hs>=dr&&_e.currentTime!==Nt+_e.pingPongDelayCorrection||!Nt)&&(Ct(Nt),Pt("change")),hs>Ht&&hs<dr?(_e.changeBegan||(_e.changeBegan=!0,_e.changeCompleted=!1,Pt("changeBegin")),Ct(hs),Pt("change")):_e.changeBegan?(_e.changeCompleted=!0,_e.changeBegan=!1,Pt("change"),b&&Pt("timelineChangeComplete")):_e.began&&hs>dr&&Pt("changeComplete"),_e.currentTime=fo(hs,0,Nt+_e.pingPongDelayCorrection),_e.began&&Pt("update"),Lt>=Nt)if(At(),!_e.remaining)_e.paused=!0,_e.completed||(_e.completed=!0,Pt("loopComplete"),Pt("complete"),!_e.passThrough&&"Promise"in window&&(j(),$(_e)));else{b?o+=_e.duration/ui.speed:o+=_e.duration;for(let hn of g)hn.setStartTime(0),hn.remaining=hn.loop;Pt("loopComplete"),_e.loopBegan=!1,_e.direction==="alternate"?st():b&&rt()}}return _e.reset=function(){var Lt=_e.direction;_e.passThrough=!1,_e.currentTime=0,_e.progress=0,_e.paused=!0,_e.began=!1,_e.loopBegan=!1,_e.changeBegan=!1,_e.completed=!1,_e.changeCompleted=!1,_e.reversePlayback=!1,_e.reversed=Lt==="reverse",_e.remaining=_e.loop,g=_e.children,b=g.length;for(var Ft=b;Ft--;)_e.children[Ft].reset();Ct(_e.reversed?_e.duration:0)},_e.setStartTime=function(Lt){o=Lt},_e.set=function(Lt,Ft){return UB(Lt,Ft),_e},_e.tick=function(Lt){c=Lt,o||(o=c),It((c+(a-o))*ui.speed)},_e.seek=function(Lt,Ft=!1){It(Lt-o,Ft)},_e.pause=function(Lt){_e.paused=!0,b&&(d=Lt??performance.now())},_e.play=function(Lt){!_e.paused||(_e.completed&&_e.reset(),_e.paused=!1,Fs.push(_e),b&&d!==void 0&&(o+=(Lt??performance.now())-d),mb||fZ())},_e.reverse=function(){st(),_e.completed=!_e.reversed,gt()},_e.restart=function(){_e.reset(),_e.play()},_e.reset(),_e.autoplay&&_e.play(),_e}function TB(e,o){for(var a=o.length;a--;)yE(e,o[a].animatable.target)&&o.splice(a,1)}function mZ(e){for(var o=kB(e),a=Fs.length;a--;){var c=Fs[a],d=c.animations,g=c.children;TB(o,d);for(var b=g.length;b--;){var j=g[b],$=j.animations;TB(o,$),!$.length&&!j.children.length&&g.splice(b,1)}!d.length&&!g.length&&c.pause()}}function gZ(e,o){o===void 0&&(o={});var a=o.direction||"normal",c=o.easing?gE(o.easing):null,d=o.grid,g=o.axis,b=o.from||0,j=b==="first",$=b==="center",_e=b==="last",st=dt.arr(e),rt=parseFloat(st?e[0]:e),ut=st?parseFloat(e[1]):0,gt=Xa(st?e[1]:e)||0,yt=o.start||0+(st?rt:0),wt=[],Ct=0;return function(Pt,At,Tt){if(j&&(b=0),$&&(b=(Tt-1)/2),_e&&(b=Tt-1),!wt.length){for(var kt=0;kt<Tt;kt++){if(!d)wt.push(Math.abs(b-kt));else{var It=$?(d[0]-1)/2:b%d[0],Lt=$?(d[1]-1)/2:Math.floor(b/d[0]),Ft=kt%d[0],Nt=Math.floor(kt/d[0]),Ht=It-Ft,dr=Lt-Nt,hs=Math.sqrt(Ht*Ht+dr*dr);g==="x"&&(hs=-Ht),g==="y"&&(hs=-dr),wt.push(hs)}Ct=Math.max.apply(Math,wt)}c&&(wt=wt.map(function(hn){return c(hn/Ct)*Ct})),a==="reverse"&&(wt=wt.map(function(hn){return g?hn<0?hn*-1:-hn:Math.abs(Ct-hn)}))}var us=st?(ut-rt)/Ct:rt;return yt+us*(Math.round(wt[At]*100)/100)+gt}}function yZ(e){e===void 0&&(e={});var o=ui(e);return o.duration=0,o.add=function(a,c){var d=Fs.indexOf(o),g=o.children;d>-1&&Fs.splice(d,1);function b(ut){ut.passThrough=!0}for(var j=0;j<g.length;j++)b(g[j]);var $=xb(a,fE(mE,e));$.targets=$.targets||e.targets;var _e=o.duration;$.autoplay=!1,$.timelineOffset=dt.und(c)?_e:wE(c,_e),b(o);var st=ui($);b(st),g.push(st),st.parent=o;var rt=GB(g,e);return o.delay=rt.delay,o.endDelay=rt.endDelay,o.duration=rt.duration,st.loop===!0&&(o.duration=1/0),o.seek(0),o.reset(),o.autoplay&&o.play(),o},o}ui.version="3.2.0";ui.speed=1;ui.running=Fs;ui.remove=mZ;ui.get=SE;ui.set=UB;ui.convertPx=xE;ui.path=iZ;ui.setDashoffset=tZ;ui.stagger=gZ;ui.timeline=yZ;ui.easing=gE;ui.penner=DB;ui.random=function(e,o){return Math.floor(Math.random()*(o-e+1))+e};var bb=ui,jB=new _,HB=new _,WB=new Qe;function YB(e,o,a,c){if(c===0)return a.copy(e);if(c===1)return a.copy(o);let d=e.w*o.w+e.x*o.x+e.y*o.y+e.z*o.z;if(d>=1)return a.copy(e);let g=1-d*d;if(g<=Number.EPSILON){let st=1-c;return a.w=st*e.w+c*o.w,a.x=st*e.x+c*o.x,a.y=st*e.y+c*o.y,a.z=st*e.z+c*o.z,a.normalize(),a}let b=Math.sqrt(g),j=Math.atan2(b,d),$=Math.sin((1-c)*j)/b,_e=Math.sin(c*j)/b;return a.w=e.w*$+o.w*_e,a.x=e.x*$+o.x*_e,a.y=e.y*$+o.y*_e,a.z=e.z*$+o.z*_e,a}function ei(e,o,a,c,d,g){let b=a[e]?a[e]:void 0,j=c[e];if(j==null)return;let $=b!=null?typeof b=="string"?Number(d.getVariable(b)??0):b:o[e],_e=typeof j=="string"?Number(d.getVariable(j)??0):j;if($!==_e)return{update:st=>{let rt=Me.lerp($,_e,st);g?o[e]=Math.trunc(rt):o[e]=rt},start:()=>{o[e]=$},end:()=>{o[e]=_e}}}function fg(e,o,a,c,d,g){let b=a[e]?a[e]:void 0,j=c[e];if(!j)return;let $=o[e],_e=[...b??$].map(rt=>typeof rt=="string"?Number(d.getVariable(rt)??0):rt),st=[...j].map(rt=>typeof rt=="string"?Number(d.getVariable(rt)??0):rt);if(!(_e.length!==st.length||Xp(_e,st)))return{update:rt=>{_e.forEach((ut,gt)=>{let yt=Me.lerp(ut,st[gt],rt);o[e][gt]=g?Math.trunc(yt):yt})},start:()=>{Object.assign(o[e],_e)},end:()=>{Object.assign(o[e],st)}}}function dg(e,o,a){return o.forEach((c,d)=>{e.setComponent(d,typeof c=="string"?Number(a.getVariable(c)??0):c)}),e}function _E(e,o,a,c,d){let g=a[e]?a[e]:void 0,b=c[e];if(!b)return;let j=o[e],$=g?dg(new _,g,d):j.clone(),_e=dg(new _,b,d);if(!$.equals(_e))return{update:st=>{j.lerpVectors($,_e,st)},start:()=>{j.copy($)},end:()=>{j.copy(_e)}}}function qB(e,o,a){return o.forEach((c,d)=>{e.setComponent(d,typeof c=="string"?Number(a.getVariable(c)??0):c)}),e}function pg(e,o,a,c,d){let g=a[e]?a[e]:void 0,b=c[e];if(!b)return;let j=o[e],$=!(j instanceof z$2),_e=j instanceof z$2?j:new z$2().fromArray(j),st=g?qB(new z$2,g,d):_e.clone(),rt=qB(new z$2,b,d);if(!st.equals(rt))return{update:ut=>{_e.lerpVectors(st,rt,ut),$&&(o[e]=_e.toArray())},start:()=>{_e.copy(st),$&&(o[e]=_e.toArray())},end:()=>{_e.copy(rt),$&&(o[e]=_e.toArray())}}}function XB(e,o,a,c){let d=a[e]?a[e]:void 0,g=c[e];if(!g)return;let b=o[e],j=d?new ce$1().fromArray(d):b.clone(),$=new _,_e=new Qe,st=new _;j.decompose($,_e,st);let rt=new ce$1().fromArray(g),ut=new _,gt=new Qe,yt=new _;if(rt.decompose(ut,gt,yt),!j.equals(rt))return{update:wt=>{WB.slerpQuaternions(_e,gt,wt),jB.lerpVectors($,ut,wt),HB.lerpVectors(st,yt,wt),b.compose(jB,WB,HB)},start:()=>{b.compose($,_e,st)},end:()=>{b.compose(ut,gt,yt)}}}function QB(e,o,a,c,d){let g=a[e]?a[e]:void 0,b=c[e];if(!b)return;let j=o[e],$=g?typeof g=="string"?d.getColor(g).clone():new We().setRGB(g.r,g.g,g.b):j.clone(),_e=typeof b=="string"?d.getColor(b).clone():new We().setRGB(b.r,b.g,b.b);if($.equals(_e))return;let st=j.clone();return o[e]=st,{update:rt=>{st.lerpColors($,_e,rt)},start:()=>{st.copy($)},end:()=>{st.copy(_e)}}}function mg(e,o,a,c,d){let g=a[e]?a[e]:void 0,b=c[e];if(!b)return;let j=o[e],$=new xr$1(j.r,j.g,j.b,j.a),_e=g?typeof g=="string"?d.getColor(g).clone():new xr$1(g.r,g.g,g.b,g.a):$.clone(),st=typeof b=="string"?d.getColor(b).clone():new xr$1(b.r,b.g,b.b,b.a);if(!_e.equals(st))return{update:rt=>{$.lerpColors(_e,st,rt);let ut=Me.lerp(_e.a,st.a,rt);$.a=ut,o[e]={r:$.r,g:$.g,b:$.b,a:$.a}},start:()=>{$.copy(_e)},end:()=>{$.copy(st)}}}function ia(e,o,a,c,d){if(typeof o[e]=="number")return ei(e,o,a??{},c,d);if(Array.isArray(o[e]))return fg(e,o,a??{},c,d)}function KB(e,o,a,c){var j,$,_e,st;let d=[],g=e.cameraType==="OrthographicCamera"?(j=o.orthographic)==null?void 0:j.zoom:($=o.perspective)==null?void 0:$.zoom,b=e.cameraType==="OrthographicCamera"?(_e=a.orthographic)==null?void 0:_e.zoom:(st=a.perspective)==null?void 0:st.zoom;if(b!==void 0){let rt=g??e.zoom,ut=b;rt!==ut&&d.push({update:gt=>{e.zoom=Me.lerp(rt,ut,gt),e.updateProjectionMatrix()},start:()=>{e.zoom=rt,e.updateProjectionMatrix()},end:()=>{e.zoom=ut,e.updateProjectionMatrix()}})}if(a.targetOffset!==void 0){let rt=ei("targetOffset",e,o,a,c);rt&&d.push(rt)}return d}function vZ(e,o,a,c){if(a.scaleBaked===void 0)return;let d=(o.scaleBaked??e.data.geometry.scaleBaked).map(j=>typeof j=="string"?Number(c.getVariable(j)??0):j),g=a.scaleBaked.map(j=>typeof j=="string"?Number(c.getVariable(j)??0):j);if(Lo.isEqual(d,g))return;let b=[];return b.push({update:j=>{e.updateGeometryInteractions({scaleBaked:[Me.lerp(d[0],g[0],j),Me.lerp(d[1],g[1],j),Me.lerp(d[2],g[2],j)]},c),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:d},c),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:g},c),e.invalidateDownstreamBooleanData()}}),b}function xZ(e,o,a,c){if(!a.extrusion)return;let d=e.extrusion,g=o.extrusion??{},b=a.extrusion,j=[];return C1.forEach($=>{let _e=ia($,d,g,b,c);_e&&j.push(_e)}),j}function ZB(e,o,a,c){let d=[];if(!("geometry"in a))return d;let g=e.geometry.userData.parameters,b="geometry"in o?o.geometry:{},j=a.geometry;if(e instanceof ao){let $=vZ(e,b,j,c);$&&d.push(...$)}else{let $={};if(Object.assign($,as(g,P1)),P1.forEach(_e=>{let st=ia(_e,$,b,j,c);st&&d.push(st)}),e instanceof ic){Object.assign($,{extrusion:{...g.extrusion}});let _e=xZ($,b,j,c);_e&&d.push(..._e)}d.length&&d.push({update:_e=>{e.updateGeometryInteractions($,c),e.updateGeometryGroupsIfNeeded()},start:_e=>{e.updateGeometryInteractions($,c),e.updateGeometryGroupsIfNeeded()},end:_e=>{e.updateGeometryInteractions($,c),e.updateGeometryGroupsIfNeeded()}})}return d}function JB(e,o,a,c){let d=[];if(a.intensity!==void 0){let g=ei("intensity",e,o,a,c);g&&d.push(g)}if(a.color!==void 0){let g=QB("color",e,o,a,c);g&&d.push(g)}return d}function eN(e,o,a,c){let d=[];if(Array.isArray(e.material)){if(!("materials"in a&&a.materials))return d;let g="materials"in o&&o.materials?o.materials:[],b=a.materials;e.material.forEach((j,$)=>{if(!b[$])return;let _e=g[$]??{},st=b[$];typeof _e=="string"||typeof st=="string"||d.push(...$B(j,_e,st,c))})}else{if(!("material"in a&&a.material))return d;let g="material"in o&&o.material?o.material:{},b=a.material;if(typeof g=="string"||typeof b=="string")return d;d.push(...$B(e.material,g,b,c))}return d}function $B(e,o,a,c){var b;let d=[],g=Jc(a,c)||!!o.layers&&Jc(o,c);d.push(CZ(e,g));for(let j of e.layers){let $=(b=o.layers)==null?void 0:b.data(j.uuid),_e=a.layers.data(j.uuid);if(!_e||j.type!=="light"&&(!(j.visible??!0)||!(_e.visible??!0)))continue;let st=j.getNames().filter(rt=>!e0.some(ut=>rt.includes(ut)));for(let rt of st)try{let ut=j.getValue(rt),gt;if(rt==="colors")gt=TZ(j,$,_e,rt);else if(Array.isArray(ut))rt==="steps"&&(gt=EZ(j,$,_e,rt));else if(typeof ut=="number")gt=bZ(j,$,_e,rt,c);else{if(typeof ut=="boolean")continue;ut instanceof z$2?gt=SZ(j,$,_e,rt):ut instanceof _?gt=wZ(j,$,_e,rt,c):ut instanceof xr$1?gt=_Z(j,$,_e,rt,c):ut instanceof We?gt=AZ(j,$,_e,rt,c):"isTexture"in ut&&(gt=MZ(j,$,_e,rt))}gt&&(Array.isArray(gt)?d.push(...gt):d.push(gt))}catch(ut){console.error(`lerpMaterial: unexpected material layer for ${rt}`,ut)}}return d}function bZ(e,o,a,c,d){if(!e.hasValue(c)||!(c in a))return;let g=o?o[c]:e.getValue(c),b=a[c],j=typeof g=="string"?Number(d.getVariable(g)??0):g,$=typeof b=="string"?Number(d.getVariable(b)??0):b;if(j!==$)return{update:_e=>{e.setValue(c,Me.lerp(j,$,_e))},start:()=>{e.setValue(c,j)},end:()=>{e.setValue(c,$)}}}function SZ(e,o,a,c){if(!e.hasValue(c)||!(c in a))return;let d=e.getValue(c),g=o?new z$2().fromArray(o[c]):d.clone(),b=new z$2().fromArray(a[c]);if(!g.equals(b))return{update:j=>{d.lerpVectors(g,b,j)},start:()=>{d.copy(g)},end:()=>{d.copy(b)}}}function wZ(e,o,a,c,d){if(!e.hasValue(c)||!(c in a))return;let g=e.getValue(c),b=o?o[c]:void 0,j=a[c],$=b?dg(new _,b,d):g.clone(),_e=dg(new _,j,d);if(!$.equals(_e))return{update:st=>{g.lerpVectors($,_e,st)},start:()=>{g.copy($)},end:()=>{g.copy(_e)}}}function AZ(e,o,a,c,d){if(!e.hasValue(c)||!(c in a))return;let g=o?o[c]:void 0,b=a[c],j=e.getValue(c),$=g?typeof g=="string"?d.getColor(g).clone():new We().setRGB(g.r,g.g,g.b):j.clone(),_e=typeof b=="string"?d.getColor(b).clone():new We().setRGB(b.r,b.g,b.b);if($.equals(_e))return;let st=j.clone();return{update:rt=>{e.getValue(c)!==st&&e.setValue(c,st),st.lerpColors($,_e,rt)},start:()=>{st.copy($)},end:()=>{st.copy(_e)}}}function _Z(e,o,a,c,d){if(!e.hasValue(c)||!(c in a))return;let g=o?o[c]:void 0,b=a[c],j=e.getValue(c),$=g?typeof g=="string"?d.getColor(g).clone():new We().setRGB(g.r,g.g,g.b):j.clone(),_e=typeof b=="string"?d.getColor(b).clone():new xr$1(b.r,b.g,b.b,b.a);if($.equals(_e))return;let st=j.clone();return{update:rt=>{e.getValue(c)!==st&&e.setValue(c,st),st.lerpColors($,_e,rt)},start:()=>{st.copy($)},end:()=>{st.copy(_e)}}}function EZ(e,o,a,c="steps"){if(!e.hasValue(c)||!(c in a))return;let d=[],g=e.getValue(c),b=o?o[c]:g,j=a[c];for(let $=0;$<g.length;++$){let _e=b[$],st=j[$];_e!==st&&d.push({update:rt=>{g[$]=Me.lerp(_e,st,rt)},start:()=>{g[$]=_e},end:()=>{g[$]=st}})}return d.length?d:void 0}function TZ(e,o,a,c="colors"){if(!e.hasValue(c)||!(c in a))return;let d=[],g=e.getValue(c),b=o?o[c]:g.map($=>$.toArray()),j=a[c];for(let $=0;$<g.length;++$){let _e=[...b[$]],st=[...j[$]];sm.isEqual(_e,st)||d.push({update:rt=>{g[$].fromArray(sm.lerp(_e,st,rt))},start:()=>{g[$].fromArray(_e)},end:()=>{g[$].fromArray(st)}})}return d.length?d:void 0}function MZ(e,o,a,c="texture"){if(!e.hasValue(c)||!(c in a))return;let d=e.getNode("mat");if(!d)return;let g=o?o[c]:d,b=a[c],j=[...g.repeat],$=[...g.offset],_e=[...b.repeat],st=[...b.offset];if(!Ro.isEqual(j,_e)||!Ro.isEqual($,st))return{update:rt=>{d.repeat=Ro.lerp(j,_e,rt),d.offset=Ro.lerp($,st,rt),d.updateMatrix()},start:()=>{d.repeat=[...j],d.offset=[...$],d.updateMatrix()},end:()=>{d.repeat=[..._e],d.offset=[...st],d.updateMatrix()}}}function CZ(e,o){return{update:()=>{e.transparent=o}}}var EE=new _,tN=new or$1;function rN(e,o,a,c,d){var gt,yt,wt,Ct,Pt,At;let g=[],b,j,$,_e,st,rt,ut;if(e instanceof Jt?(b=pg("position",e,o,a,d),b&&g.push(b),$=ei("rotation",e,o,a,d),$&&g.push($)):(ut={slide:((gt=o.pathSnapping)==null?void 0:gt.slide)??((yt=e.updatedPathSnapping)==null?void 0:yt.slide)??((wt=e.dataPatched.pathSnapping)==null?void 0:wt.slide)??0,offset:((Ct=o.pathSnapping)==null?void 0:Ct.offset)??((Pt=e.updatedPathSnapping)==null?void 0:Pt.offset)??((At=e.dataPatched.pathSnapping)==null?void 0:At.offset)??0},st=ei("slide",ut,o.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,a.pathSnapping??e.dataPatched.pathSnapping,d),st&&g.push(st),rt=ei("offset",ut,o.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,a.pathSnapping??e.dataPatched.pathSnapping,d),rt&&g.push(rt),!st&&!rt&&(b=_E("position",e,o,a,d),b&&g.push(b),j=_E("scale",e,o,a,d),j&&g.push(j),$=PZ(e,o,a,c,d),$&&g.push($),_e=XB("hiddenMatrix",e,o,a),_e&&g.push(_e))),b||j||$||_e||st||rt){let Tt=e instanceof Jt?()=>{e.updateWorldMatrix(!0)}:()=>{var kt;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(kt=e.parent)!=null&&kt.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),mn(e)&&Rn(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},o.pathSnapping,ut))};g.push({update:Tt,start:Tt,end:Tt})}return g}function PZ(e,o,a,c,d){var st;let g=o!=null&&o.rotation?o.rotation.map(rt=>(typeof rt=="string"?Number(d.getVariable(rt)??0):rt)*Me.DEG2RAD):void 0,b=(st=a.rotation)==null?void 0:st.map(rt=>(typeof rt=="string"?Number(d.getVariable(rt)??0):rt)*Me.DEG2RAD);if(!b)return;let j=g?new _().fromArray(g):new _().setFromEuler(e.rotation),$=new _().fromArray(b);if(j.equals($))return;let _e=EE.subVectors($,j);if(c&&_e.toArray().every(rt=>Math.abs(rt)<2*Math.PI)){let rt=new Qe().setFromEuler(tN.setFromVector3(j)),ut=new Qe().setFromEuler(tN.setFromVector3($));return{update:gt=>{YB(rt,ut,e.quaternion,gt)},start:()=>{e.rotation.setFromVector3(j)},end:()=>{e.rotation.setFromVector3($)}}}else return{update:rt=>{EE.lerpVectors(j,$,rt),e.rotation.setFromVector3(EE)},start:()=>{e.rotation.setFromVector3(j)},end:()=>{e.rotation.setFromVector3($)}}}function iN(e,o,a,c){let d=[];if(!("cloner"in a)||!e.cloner)return d;let g=e.cloner,b="cloner"in o?o.cloner:{},j=a.cloner;x1.forEach(gt=>{let yt;gt==="count"?yt=ei("count",g.parameters,b,j,c,!0):yt=ia(gt,g.parameters,b??{},j,c),yt&&d.push(yt)});let $=DZ(g,b,j,c);$!=null&&$.length&&d.push(...$);let _e=OZ(g,b,j,c);_e!=null&&_e.length&&d.push(..._e);let st=IZ(g,b,j,c);st!=null&&st.length&&d.push(...st);let rt=RZ(g,b,j,c);rt!=null&&rt.length&&d.push(...rt);let ut=LZ(g,b,j,c);return ut!=null&&ut.length&&d.push(...ut),d.length&&d.push({update:()=>{g.update()}}),d}function DZ(e,o,a,c){if(e.parameters.type!=="radial")return;let d=o.radial,g=a.radial;if(!g)return;let b=e.parameters.radial,j=[];return b1$1.forEach($=>{let _e=ia($,b,d??{},g,c);_e&&j.push(_e)}),j}function OZ(e,o,a,c){if(e.parameters.type!=="linear")return;let d=o.linear,g=a.linear;if(!g)return;let b=[],j=e.parameters.linear;return S1.forEach($=>{let _e=ia($,j,d??{},g,c);_e&&b.push(_e)}),b}function IZ(e,o,a,c){if(e.parameters.type!=="grid")return;let d=o.grid,g=a.grid;if(!g)return;let b=[],j=e.parameters.grid;return w1.forEach($=>{let _e;$==="count"?_e=fg($,j,d??{},g,c,!0):_e=ia($,j,d??{},g,c),_e&&b.push(_e)}),b}function RZ(e,o,a,c){if(e.parameters.type!=="toObject")return;let d=o.toObject,g=a.toObject;if(!g)return;let b=[],j=e.parameters.toObject;return A1.forEach($=>{let _e;$==="count"?_e=ei($,j,d??{},g,c,!0):_e=ia($,j,d??{},g,c),_e&&b.push(_e)}),b}function LZ(e,o,a,c){if(!e.parameters.randomness)return;let d=o.randomnessObject,g=a.randomnessObject;if(!g)return;let b=[],j=e.parameters.randomnessObject;return _1.forEach($=>{let _e=ia($,j,d??{},g,c);_e&&b.push(_e)}),b}function BZ(e,o){return{update:()=>{e instanceof Ar$1&&(e.fill.enabled=o)}}}function NZ(e,o){return{update:()=>{e instanceof Ar$1&&(e.stroke.enabled=o)}}}function FZ(e,o){return{update:()=>{e instanceof Ar$1&&(e.dropShadow.enabled=o)}}}function kZ(e,o){return{update:()=>{e instanceof Ar$1&&(e.innerShadow.enabled=o)}}}function VZ(e,o){return{update:()=>{e instanceof Ar$1&&(e.backgroundBlur.enabled=o)}}}function zZ(e,o){return{update:()=>{e instanceof Ar$1&&(e.layerBlur.enabled=o)}}}function nN(e,o,a,c,d){let g=[],b,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt,kt;if("width"in e&&(b=ei("width",e,o,a,d),b&&g.push(b)),"height"in e&&(j=ei("height",e,o,a,d),j&&g.push(j)),e instanceof Ar$1||e instanceof an){let It={...o.fill},Lt={...a.fill};It.enabled!==void 0&&It.enabled!==Lt.enabled&&(g.push(BZ(e,!0)),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}}),Lt.enabled||Object.assign(Lt,{enabled:!0,color:{...Lt.color,a:0}})),$=mg("color",e.fill,It,Lt,d),$&&g.push($)}if(e instanceof Ar$1){let It={...o.stroke},Lt={...a.stroke};(It.enabled||Lt.enabled)&&(g.push(NZ(e,!0)),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}}),Lt.enabled||Object.assign(Lt,{enabled:!0,color:{...Lt.color,a:0}})),_e=mg("color",e.stroke,It,Lt,d),_e&&g.push(_e),st=ei("thickness",e.stroke,It,Lt,d),st&&g.push(st)}if(e instanceof Ar$1){let It={...o.dropShadow},Lt={...a.dropShadow};(It.enabled||Lt.enabled)&&(g.push(FZ(e,!0)),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}}),Lt.enabled||Object.assign(Lt,{enabled:!0,color:{...Lt.color,a:0}})),rt=mg("color",e.dropShadow,It,Lt,d),rt&&g.push(rt),ut=ei("blurRadius",e.dropShadow,It,Lt,d),ut&&g.push(ut),yt=ei("spread",e.dropShadow,It,Lt,d),yt&&g.push(yt),gt=pg("offset",e.dropShadow,It,Lt,d),gt&&g.push(gt)}if(e instanceof Ar$1){let It={...o.innerShadow},Lt={...a.innerShadow};(It.enabled||Lt.enabled)&&(g.push(kZ(e,!0)),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}}),Lt.enabled||Object.assign(Lt,{enabled:!0,color:{...Lt.color,a:0}})),wt=mg("color",e.innerShadow,It,Lt,d),wt&&g.push(wt),Ct=ei("blurRadius",e.innerShadow,It,Lt,d),Ct&&g.push(Ct),At=ei("spread",e.innerShadow,It,Lt,d),At&&g.push(At),Pt=pg("offset",e.innerShadow,It,Lt,d),Pt&&g.push(Pt)}if(e instanceof Ar$1||e instanceof an){let It={...o.backgroundBlur},Lt={...a.backgroundBlur};(It.enabled||Lt.enabled)&&(g.push(VZ(e,!0)),It.enabled||Object.assign(It,{enabled:!0,radius:0}),Lt.enabled||Object.assign(Lt,{enabled:!0,radius:0})),Tt=ei("radius",e.backgroundBlur,It,Lt,d),Tt&&g.push(Tt)}if(e instanceof Ar$1){let It={...o.layerBlur},Lt={...a.layerBlur};(It.enabled||Lt.enabled)&&(g.push(zZ(e,!0)),It.enabled||Object.assign(It,{enabled:!0,radius:0}),Lt.enabled||Object.assign(Lt,{enabled:!0,radius:0})),kt=ei("radius",e.layerBlur,It,Lt,d),kt&&g.push(kt)}if(e instanceof an||e instanceof Bs){let It=fg("cornerRadius",e,o,a,d);It&&g.push(It)}return g}function TE(e,o,a,c,d){let g=[];return e.data.visible&&g.push(...rN(e,o,a,d,c)),e instanceof Jt?g.push(...nN(e,o,a,d,c)):(e.data.visible&&g.push(...iN(e,o,a,c)),mn(e)?(e instanceof ur&&e.data.visible&&g.push(...ZB(e,o,a,c)),e.data.visible&&g.push(...eN(e,o,a,c))):KR(e)?e.data.visible&&g.push(...JB(e,o,a,c)):QR(e)&&g.push(...KB(e,o,a,c))),g.length?{update:b=>{g.forEach(j=>j.update(b))},start:b=>{g.forEach(j=>{var $;return($=j.start)==null?void 0:$.call(j,b)})},end:b=>{g.forEach(j=>{var $;return($=j.end)==null?void 0:$.call(j,b)})}}:void 0}var sN=new _;function Yf(e,o,a=!1){var g;let c=[],d=b=>{let j=b.data;delete b.states,b.currentState=null,b.reversibleToState=null,b.currentTransitionEvent=null;for(let $ of j.states){let _e={...$.data};b.states||(b.states={}),b.states[$.id]=Ba.patch(j,_e)}aN(e.scene,b,null,o,j.events.find($=>$.data.type==="Follow"||$.data.type==="LookAt")!==void 0),oN(e)};e.scene.traverse2D(d),e.traverseChildren(b=>{var st,rt,ut,gt,yt,wt;if(a&&((st=b.rigidBody)==null||st.setTranslation(b.position0,!0),(rt=b.rigidBody)==null||rt.setRotation(b.rotation0,!0),(ut=b.rigidBody)==null||ut.setLinvel(sN,!0),(gt=b.rigidBody)==null||gt.setAngvel(sN,!0)),!vt.is(b))return;let j=b.uuid,$=b.data;if(delete b.states,b.uuid===As)return;let _e=!1;c.some(Ct=>{var Pt;return(Pt=e.scene.find(j))==null?void 0:Pt.isDescendantOf(Ct)})?_e=!0:((yt=$.physics)==null?void 0:yt.fusedBody)===!0&&$.physics.rigidBody==="dynamic"&&c.push(j),b.data=$,b.currentState=null,b.reversibleToState=null,b.currentTransitionEvent=null;for(let Ct of $.states){let Pt={...Ct.data};e.data.globalPhysics.usePhysics===!0&&$.physics&&($.physics.rigidBody==="dynamic"||_e)&&(Ct.data.position!==void 0&&delete Pt.position,Ct.data.rotation!==void 0&&delete Pt.rotation,Ct.data.hiddenMatrix!==void 0&&delete Pt.hiddenMatrix),b.states||(b.states={}),b.states[Ct.id]=Pa.patch($,Pt)}aN(e.scene,b,null,o,$.events.find(Ct=>Ct.data.type==="Follow"||Ct.data.type==="LookAt")!==void 0),oN(e),b instanceof _r$1&&b.frame&&(b.frame.traverse(Ct=>d(Ct)),(wt=b.uiCanvas)==null||wt.applySize())}),e.frame&&(e.frame.traverse(b=>d(b)),(g=e.uiCanvas)==null||g.applySize())}function oN(e){e.traverseEntity(o=>{for(let a of o.data.events){let c=[];switch(a.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":c.push(...a.data.actions);break;case"GameControl":for(let d of Object.values(a.data.gameActions))c.push(...d);break;case"DragDrop":c.push(...a.data.dragDropActions.drag,...a.data.dragDropActions.drop);break;case"Conditional":c.push(...a.data.inActions,...a.data.outActions);break}for(let d of c)if(d.data.type==="Create"&&d.data.hideBase==="Yes"){let g=e.scene.find(d.data.object);g&&(g.visible=!1)}}})}function aN(e,o,a,c,d=!1){if(o instanceof ur&&o.removeInteractionGeometry(c),o instanceof Jt?o.changeSelectedState(a,{shared:c},d):o.changeSelectedState(a,{scene:e,shared:c},d),o instanceof ur&&o.updateGeometryGroupsIfNeeded(),o instanceof wr$1&&o.updateCameraState(o.dataPatched,{scene:e,shared:c}),!(o instanceof Jt)){if(o.cloner)for(let g of o.cloner.children)g.playModeVisible=void 0;o.updateVisible(e)}}function CE(e){let o;if(e.easing===5){let{control1:a,control2:c}=e;o=`cubicBezier(
			${a[0]}, ${a[1]}, ${c[0]}, ${c[1]}
		)`}else if(e.easing===6){let{mass:a,stiffness:c,damping:d,velocity:g}=e;o=`spring( ${a}, ${c}, ${d}, ${g} )`}else{let a;switch(e.easing){case 0:a=Ma.linear;break;case 1:a=Ma.ease;break;case 2:a=Ma.easeIn;break;case 3:a=Ma.easeOut;break;case 4:a=Ma.easeInOut;break;default:a=Ma.linear}let[c,d,g,b]=a;o=`cubicBezier( ${c}, ${d}, ${g}, ${b} )`}return{duration:Math.max(e.duration,1e-4),easing:o}}function ME(e){let o={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)o.direction="normal",o.rewind=!1;else switch(e.direction){case"pingpong":o.direction="alternate",o.rewind=!1;break;case"pingpong-rewind":o.direction="alternate",o.rewind=!0;break;default:o.direction="normal",o.rewind=!1;break}switch(o.delay=0,o.endDelay=0,o.startOnceDelay=0,o.pingPongDelayCorrection=0,o.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":o.startOnceDelay=e.delay;break;case"start":o.delay=e.delay;break;case"end":o.endDelay=e.delay;break;case"start-end":case void 0:o.delay=e.delay,o.endDelay=e.delay;break}return o.direction==="alternate"&&(o.delay/=2,o.endDelay/=2,e.delayDirection==="start"?(o.pingPongDelayCorrection=o.delay,typeof o.loop=="number"&&o.loop%2===0&&(o.pingPongEndDelayCorrection=o.delay)):e.delayDirection==="end"?typeof o.loop=="number"&&o.loop%2!==0&&(o.pingPongEndDelayCorrection=o.endDelay):e.delayDirection==="start-end"&&(o.pingPongDelayCorrection=o.delay,o.pingPongEndDelayCorrection=o.endDelay)),o}var UZ={type:"beginState"},GZ={type:"completeState",isfromEntity:!1},wb=class{constructor(e,o,a,c,d,g){if(this.object=e,this.data=c,this.sharedAssets=d,this.allowSlerp=g,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let b=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=b,this.object.dispatchEvent({type:"beginState",state:b}),this.object instanceof Jt||this.object.traverseEntity(j=>{j!==this.object&&j instanceof wr$1&&j.dispatchEvent(UZ)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let b=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=b,this.object.dispatchEvent({type:"completeState",state:b}),this.object instanceof Jt||this.object.traverseEntity(j=>{j!==this.object&&j instanceof wr$1&&j.dispatchEvent(GZ)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=TE(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},o===void 0){let b=Sb(this.object,this.object.currentState===a?this.object.prevState:this.object.currentState);if(!b)throw new Error("Missing property");this.from=b}else{let b=Sb(this.object,o);if(!b)throw new Error("Missing property");this.from=b}if(a===void 0)throw new Error("Missing property");{let b=Sb(this.object,a);if(!b)throw new Error("Missing property");this.to=b}this.useCurrentState=o===void 0||a===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...ME(c),...CE(c),change:this.onChange},this.callback=TE(this.object,o===void 0?{}:this.from.data,a===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},gg=class extends fr$2{constructor(e,o,a,c){var g;if(super(),this.data=e,this.page=o,this.shared=a,this.condition=c,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var b;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((b=this.timeline)==null||b.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let d=this.page.scene.find(e.object)??((g=this.page.uiCanvas)==null?void 0:g.find(e.object))??this.page.scene.find2DInUIObjects(e.object);if(!d)throw new Error("Missing property");if(!d.states)throw new Error("Missing property");if(this.object=d,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&this.timeline.paused===!1}init(){this.initialCurrentState=Sb(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:o=!1,isRebuild:a=!1}={}){var c,d,g,b;try{let j=ME(this.data.tweens[0].data);a&&typeof j.loop=="number"&&j.loop--,(c=this.timeline)==null||c.pause(),this.timeline=bb.timeline({autoplay:!1,...j,...j.loop===!0||j.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let $=this.tweens.findIndex(_e=>_e==null?void 0:_e.changeBegan);if(o===!0&&(this.timelineNeedsRebuild=!0),e){let _e=$===-1?0:$;for(let st=_e;st<this.data.tweens.length-1;st++){let rt=this.data.tweens[st],ut=this.data.tweens[st+1],gt;st===_e&&(this.object.wasMovedByUser===!0||((d=this.object.previousAction)==null?void 0:d.playing)===!0)?(gt=void 0,this.object instanceof wr$1&&(this.object.wasMovedByUser=!1)):gt=rt.data.state===void 0?this.currentState:rt.data.state;let yt=new wb(this.object,gt,ut.data.state===void 0?this.currentState:ut.data.state,ut.data,this.shared,this.data.allowSlerp??!1);$!==-1&&st===_e&&Object.assign(yt.params,{startOnceDelay:0}),this.tweens[st]=yt,this.timeline.add(yt.params,this.timeline.duration+(st===_e?j.delay:0))}this.timeline.duration+=j.endDelay}else{let _e=$===-1?this.data.tweens.length-1:$+1;for(let st=_e;st>0;st--){let rt=this.data.tweens[st],ut=this.data.tweens[st-1],gt;st===_e&&(this.object.wasMovedByUser===!0||((g=this.object.previousAction)==null?void 0:g.playing)===!0)?(gt=void 0,this.object instanceof wr$1&&(this.object.wasMovedByUser=!1)):gt=rt.data.state===void 0?this.currentState:rt.data.state;let yt=new wb(this.object,gt,ut.data.state===void 0?this.currentState:ut.data.state,rt.data,this.shared,this.data.allowSlerp??!1);$!==-1&&st===_e&&Object.assign(yt.params,{startOnceDelay:0}),this.tweens[st-1]=yt,this.timeline.add(yt.params,this.timeline.duration+(st===_e?j.endDelay:0))}this.timeline.duration+=j.delay}}catch(j){j instanceof Error&&console.error(j.message)}((b=this.object.previousAction)==null?void 0:b.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Ut(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId);let e=ME(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(o){o instanceof Error&&console.error(o.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof Jt?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var o;this.timeline===void 0&&this.buildTimeline(),(o=this.timeline)==null||o.seek(e*this.timeline.duration,!0)}toggle(e){var o;if(Ut(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((o=this.timeline)==null||o.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var a;(a=this.timeline)==null||a.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function Sb(e,o){var d;let a,c;if(typeof o=="string"?(a=o,c=(d=e.states)==null?void 0:d[a]):o===null&&(a=null,c=e.data),!(a===void 0||c===void 0))return{id:a,data:c}}var jZ={type:"beginState"},lN={type:"completeState",isfromEntity:!1},cN={type:"requestRender"},yg=class extends fr$2{constructor(e,o,a,c){super(),this.data=e,this.page=o,this.shared=a,this.condition=c,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new _,this.posEnd=new _,this.qStart=new Qe,this.qEnd=new Qe,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let o=this.page.scene.find(this.data.targetCamera);if(!o||!o.visible)throw new ReferenceError("Target camera not founded or not visible");let a={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=bb({targets:a,t:1,...CE(this.data),update:()=>{a.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(o.position),this.qEnd.copy(o.quaternion),this.zoomEnd=o.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(o.uuid)),this.page.activeCamera.dispatchEvent(jZ));let c=this.page.activeCamera;c.position.lerpVectors(this.posStart,this.posEnd,a.t),c.quaternion.slerpQuaternions(this.qStart,this.qEnd,a.t),c.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*a.t,c.wasMovedBySwitchCameraAction=!0,c.updateMatrix(),c.updateMatrixWorld(),c.updateProjectionMatrix(),c.dispatchEvent(cN),a.t===1&&c.dispatchEvent(lN)}})}switchCamera(e){let o=this.page.activeCamera,a=this.page.scene.find(e);if(!a||!a.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(a),o.dispatchEvent({type:"cameraChange",camera:a})}play(){if(Ut(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var o,a;if(Ut(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((o=this.animation)==null||o.pause(),this.buildAnimation(!0),(a=this.animation)==null||a.play()):this.timeoutId=window.setTimeout(()=>{var c,d;delete this.timeoutId,this.data.animate?((c=this.animation)==null||c.pause(),this.buildAnimation(),(d=this.animation)==null||d.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(lN),this.page.activeCamera.dispatchEvent(cN))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},vg=class extends fr$2{constructor(e,o,a,c,d){var _e,st,rt;super(),this.page=o,this.animationControls=a,this.shared=c,this.condition=d,this.startOnceDelay=0,this.toggleIsForward=!1;let g=e.object,b=o.scene.find(e.object);b&&Array.isArray(b.identity)&&(g=b.identity[0]),this.data={...e,object:g};let j=this.animationControls.clipIdToAction[e.clipId+"/"+g];this.duration=((_e=j==null?void 0:j.getClip())==null?void 0:_e.duration)??1;let $=((rt=(st=j==null?void 0:j.getClip())==null?void 0:st.tracks[0])==null?void 0:rt.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/$*this.duration,this.rightFrameTime=this.data.crop[1]/$*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Ut(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var a;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let o=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([c,d])=>{let g=c.split("/")[1];this.threeAnimAction!==d&&g===o&&d.isRunning()&&(e?d.fadeOut(.2):d.stop())}),e&&((a=this.threeAnimAction)==null||a.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Me.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,o=!1){if(Ut(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var a;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let c=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([d,g])=>{let b=d.split("/")[1];this.threeAnimAction!==g&&b===c&&g.isRunning()&&(o?g.fadeOut(.2):g.stop())}),o&&((a=this.threeAnimAction)==null||a.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var o;let e=(o=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:o.getClip();e&&(e.duration=this.duration),this.pause()}},xg=class{constructor(e,o,a,c,d){this.data=e,this.page=o,this.eventManager=a,this.shared=c,this.condition=d,this.timeOutId=-1,this.scene=o.scene}dispatch(){if(Ut(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(o=>o.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(o=>{o.type==="ParticleSystem"&&(o.sleep(),o.wakeUp(),o.data.autoPlay?o.start():o.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),Yf(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},bg=class{constructor(e,o,a,c){this.data=e,this.page=o,this.shared=a,this.condition=c,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Ut(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),o=H0(this.data.expression,this.shared,Yi.typeOfVariable(e));o!==void 0&&this.shared.updateVariable(this.data.variableId,typeof o=="string"?{textValue:o}:o)}dispose(){}},Sg=class{constructor(e,o,a,c){this.data=e,this.page=o,this.shared=a,this.condition=c,this.timeoutId=null}dispatchInner(){if(Ut(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let o=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,o===void 0?!1:!o):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!o),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,o=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&o==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function Ut(e,o){if(o===void 0)return!0;if(o.expression.length===0)return!1;let a=H0(o.expression,e,"boolean");return o.negate?!a:!!a}function Mr$1(e,o,a,c,d,g){let b={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},j=$=>({id:_e,data:st})=>{try{st.type==="Audio"&&!(g instanceof Jt)?Tn[e.type].includes("Audio")&&b.Audio.push(new ag(_e,st,g,c,$)):st.type==="Video"&&!(g instanceof Jt)?Tn[e.type].includes("Video")&&b.Video.push(new wg(_e,st,g,c,$)):st.type==="Particles"?Tn[e.type].includes("Particles")&&b.Particles.push(new lg(st,a,c,$)):st.type==="Link"?Tn[e.type].includes("Link")&&b.Link.push(new pb(st,d.controlsManager,c,$)):st.type==="Create"?Tn[e.type].includes("Create")&&b.Create.push(new Ag(st,a,d.controlsManager,c,$)):st.type==="Destroy"?Tn[e.type].includes("Destroy")&&b.Destroy.push(new cg(st,a,d.controlsManager,c,$)):st.type==="Reset"?Tn[e.type].includes("Reset")&&b.Reset.push(new ug(st,a,c,d,$)):st.type==="Transition"?Tn[e.type].includes("Transition")&&b.Transition.push(new gg(st,a,c,$)):st.type==="SwitchCamera"?Tn[e.type].includes("SwitchCamera")&&b.SwitchCamera.push(new yg(st,a,c,$)):st.type==="SceneTransition"?Tn[e.type].includes("SceneTransition")&&b.SceneTransition.push(new xg(st,a,d,c,$)):st.type==="Animation"?Tn[e.type].includes("Animation")&&b.Animation.push(new vg(st,a,d.animationControls,c,$)):st.type==="SetVariable"?Tn[e.type].includes("SetVariable")&&b.SetVariable.push(new bg(st,a,c,$)):st.type==="DynamicVariablePlay"?Tn[e.type].includes("DynamicVariablePlay")&&b.DynamicVariablePlay.push(new Sg(st,a,c,$)):st.type==="Conditional"&&Tn[e.type].includes("Conditional")&&(st.ifActions.forEach(j({expression:st.condition,negate:!1})),st.elseActions.forEach(j({expression:st.condition,negate:!0})))}catch{}};return o.forEach(j()),b}function hr$1(e){Object.values(e).forEach(o=>{o.forEach(a=>{(a instanceof ag||a instanceof wg||a instanceof lg||a instanceof vg||a instanceof gg||a instanceof Ag||a instanceof cg||a instanceof yg||a instanceof xg||a instanceof ug||a instanceof bg||a instanceof Sg)&&a.dispose()})})}function uN(e,o){let a;if("material"in e){let c=e.material;Array.isArray(c)?a=e.material[0].layers.find(d=>d.uuid===o):a=e.material.layers.find(d=>d.uuid===o)}if(a)return a.color.texture.image.img instanceof HTMLVideoElement?a.color.texture.image.img:void 0}var hN=new Map,_g=new Map,Qa=class{constructor(e,o,a){this.data=o,this.delay=0,this.status="stopped";let{layerId:c,loop:d,volume:g,delay:b}=o;if(this.object=a,c===void 0)throw new Error("Missing property");let j=uN(a,c);j&&(this.videoElement=j,this.videoElement.loop=d===1/0,Uh&&(this.videoElement.autoplay=!0),g!==void 0&&(this.videoElement.volume=g)),b!==void 0&&(this.delay=b),_g.has(a.uuid)?_g.get(a.uuid).push(this):_g.set(a.uuid,[this]),hN.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):o?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let a=this.videoElement.play();a!==void 0&&a.then(c=>{}).catch(c=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Xf=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let o=hN.get(e);!o||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{o[this.data.interaction](),this.disposeDelay()},this.data.delay)):o[this.data.interaction]())}pauseAllVideosFromObject(e){let o=_g.get(e);!(o!=null&&o.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{o.forEach(a=>a[this.data.interaction]()),this.disposeDelay()},this.data.delay)):o.forEach(a=>a[this.data.interaction]()))}pauseAllVideos(){let e=[..._g.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(o=>{o.forEach(a=>{a[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(o=>{o.forEach(a=>{a[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},wg=class{constructor(e,o,a,c,d){if(this.data=o,this.shared=c,this.condition=d,o.interaction==="play")this.interaction=new Qa(e,o,a);else if(o.interaction==="pause"||o.interaction==="stop")this.interaction=new Xf(o);else throw new Error("Missing property")}dispatchBasic(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof Qa?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof Qa?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},dN=(()=>{let e,o,a,c;function d(j){!e&&!fN()&&(o==null?void 0:o.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(g)),j&&(o=j,c=j.requestRender)}function g(j){let $=a?j-a:0,_e=o.sharedGameControlGlobals.createdObjects,st=o.sharedGameControlGlobals.nCreatedPerAction,rt=_e.length,ut=0;for(;ut<rt;){let gt=_e[ut];gt.userData.createdTime===void 0&&(gt.userData.createdTime=j),gt.userData.lifetime===void 0&&gt.userData.quantity===void 0||gt.userData.lifetime&&j-gt.userData.createdTime<gt.userData.lifetime||gt.userData.quantity&&st[gt.userData.actionId]<=gt.userData.quantity?(gt.userData.velocity&&(gt.position.addScaledVector(gt.userData.velocity,$/1e3),gt.updateMatrix(),c()),ut++):(st[gt.userData.actionId]>gt.userData.quantity&&st[gt.userData.actionId]--,_e.splice(ut,1),gt.removeFromParent(),o.sharedGameControlGlobals.rapierWorld&&gt.rigidBody?(o.sharedGameControlGlobals.colliderToEntity.delete(gt.rigidBody.collider(0).handle),o.sharedGameControlGlobals.rapierWorld.removeRigidBody(gt.rigidBody)):(gt.bvhGeometry=void 0,o.sharedGameControlGlobals.entitiesWithTransformAnim=o.sharedGameControlGlobals.entitiesWithTransformAnim.filter(yt=>yt.bvhGeometry!==void 0)),rt--,c())}e=ut>0?requestAnimationFrame(g):void 0,a=ut>0?j:void 0}function b(){fN()?e&&(cancelAnimationFrame(e),e=void 0,a=void 0):d()}return typeof document<"u"&&document.addEventListener("visibilitychange",b),d})();function fN(){return!!document&&document.hidden}var pN=new Qe,HZ=new _,WZ=new _,Ag=class{constructor(e,o,a,c,d){this.data=e,this.page=o,this.controlsManager=a,this.shared=c,this.condition=d,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Me.generateUUID(),this.dispatch=()=>{if(Ut(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Ut(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Kw(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let b=new Vr(this.object);if(b.playModeVisible=!0,b.expand(),this.data.coordinateSystem!=="world"){let $=this.data.coordinateSystem,_e=this.page.scene.find($);_e&&(_e.updateMatrixWorldSVD(),b.hiddenMatrix.copy(_e.matrixWorldRigid))}b.position.fromArray(this.data.position),b.rotation.fromArray(this.data.rotation),b.updateMatrix(),this.page.add(b);let j=this.controlsManager.sharedGameControlGlobals;j.createdObjects.push(b),j.nCreatedPerAction[this.uniqueId]===void 0?j.nCreatedPerAction[this.uniqueId]=1:j.nCreatedPerAction[this.uniqueId]++,b.updateWorldMatrix(!0,!0),b.traverseObject(this.traverseObjectCB),dN(),this.controlsManager.requestRender()},this.traverseObjectCB=b=>{var st,rt,ut,gt;b.hasNonUniformScale&&b.updateMatrixWorldSVD();let j;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(b instanceof Ji)if(b.objectForSample){if(b.objectForSample.dataPatched.physics.fusedBody)return;j=b.object}else return b.object.dataPatched.physics.fusedBody===!0&&b.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(b instanceof Vr)j=b.object;else if(j=b,(st=j.dataPatched.cloner)==null?void 0:st.hideBase)return!0}else{if(b instanceof Ji)return;b instanceof Vr?j=b.object:j=b}this.data.destroy==="Time"?b.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(b.userData.quantity=this.data.destroyAfterQuantity,b.userData.actionId=this.uniqueId);let $=new _().fromArray(this.data.velocity),_e=j.dataPatched;if(!(_e.physics.enabled==="visibility"?!_e.visible:!_e.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(b,j,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((rt=b.rigidBody)==null||rt.collider(0).setActiveEvents(1),b.userData.hasCollisionDestroy=!0),b.matrixWorld.decompose(HZ,pN,WZ),$.applyQuaternion(pN),this.data.velocity.some(yt=>yt!==0)&&this.data.dynamic&&((ut=b.rigidBody)==null||ut.setLinvel($.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in b.object&&this.controlsManager.addBoundsTree(b),this.data.velocity.some(yt=>yt!==0)&&this.data.dynamic&&(b.userData.velocity=$)),((gt=j.dataPatched.physics)==null?void 0:gt.fusedBody)===!0))return!0};let g=this.page.scene.find(this.data.object);if(!g)throw new Error("Missing Property");if(this.object=g,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");dN(a)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},IE=200,PE=.02,DE=.3,qZ=65;new _;var mN=new _,gN=new _,YZ=new _,Bn=new _,Kn=new _,lc=new _,OE=new ce$1,yN=new ce$1,XZ=new ce$1;new ce$1;var po=new Qe,Ka=new Qe,na=new or$1(0,0,0,"YXZ"),QZ=new _(1,0,0),mo=new _(0,1,0),KZ=new _(0,0,1),vN=new _(1,1,1);new Br;var ZZ=1,JZ=.025,$Z=16e-6,xN=12,eJ=20,en$1=new Di,ks=new Wt,tJ={type:"requestRender"},rJ={type:"updateMatrix"},bN=Math.PI/6,Ab=class extends fr$2{constructor(e,o,a,c,d,g,b,j,$){var yt;super(),this.object=e,this.domElement=o,this.data=a,this.gloabalPhysics=c,this.controlsManager=d,this.cameraFollow=g,this.camera=b,this.page=j,this.sharedAssets=$,this.enableDamping=!0,this.hiddenMatrix0=new ce$1,this.target0=new _,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=IE,this.euler0=new or$1(0,0,0,"YXZ"),this.position0Cam=new _,this.quat0Cam=new Qe,this.scale0Cam=new _,this.hiddenMatrix0Cam=new ce$1,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Di(new _(0,-40,0),new _(0,40,0)),matrix:new ce$1,position:new _,rotation:new Qe},this.euler=new or$1(0,0,0,"YXZ"),this.eulerDelta=new _,this.lastPosition=new _,this.lastCameraQuaternion=new Qe,this.lastCameraPosition=new _,this.PI_2=Math.PI/2,this.prevMouse=new z$2,this.velocityTarget=new _,this.velocity=new _,this.directionXZ=new _,this.rotVelocityStick=new _,this.rotVelocityTarget=new _,this.rotVelocity=new _,this.rotDirection=new _,this.nonColliderRotOffset=new ce$1,this.nonColliderPosOffset=new ce$1,this.firstPointerId=-1,this.rot=new _,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new ce$1,this.objectToTarget=new _,this.objectToTarget0=new _,this.objectToCamXZ=new _,this.objectToCamXZ0=new _,this.targetToCamera=new _,this.targetToCamera0=new _,this.cameraPolarAxis0=new _,this.targetPos=new _,this.targetQuat=new Qe,this.lerpFactorPos=new _().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Qe,this.objXZQuatInv=new Qe,this.objXZRotMat=new ce$1,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new _,this.pushedVelocity=new _,this.groundYRotation=0,this.objectRealQuat=new Qe,this.colliderWorldQuat=new Qe,this.groundNormal=new _,this.groundTilt=new Qe,this.groundTiltInv=new Qe,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new _,this.quaternion=new Qe,this.scale=new _,this.initialAction=!0,this.onPointerDown=wt=>{wt.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=wt.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Ii&&(!Zw||Jw>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(wt.clientX,wt.clientY))},this.onPointerUp=wt=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),wt.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=wt=>{if(wt.pointerId!==this.firstPointerId)return;let Ct=wt.clientX-this.prevMouse.x,Pt=wt.clientY-this.prevMouse.y;this.prevMouse.set(wt.clientX,wt.clientY),wt.pointerType==="mouse"&&this.rotBy!=="keys"&&(Zw&&Jw<15.5&&!Ii?(this.eulerDelta.y=-Ct*this.mouseOrbitSensitivity,this.eulerDelta.x=-Pt*this.mouseOrbitSensitivity):(this.eulerDelta.y=-wt.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-wt.movementY*this.mouseOrbitSensitivity)),wt.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-Ct*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-Pt*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=wt=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?Ab.isLocked=!0:Ab.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let wt in this.movementState)this.movementState[wt]=0},this.onKeyDown=wt=>{!(wt.target instanceof HTMLInputElement)&&(wt.code==="ArrowLeft"||wt.code==="ArrowUp"||wt.code==="ArrowRight"||wt.code==="ArrowDown"||wt.code==="Space")&&wt.preventDefault();for(let Ct of this.keyAssignments)if(wt.key.toUpperCase()===Ct[1]||wt.key===Ct[1]){this.movementState[Ct[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=wt=>{for(let Ct of this.keyAssignments)if(wt.key.toUpperCase()===Ct[1]||wt.key===Ct[1]||wt.code.slice(3,wt.code.length).toUpperCase()===Ct[1]){this.movementState[Ct[0]]=0;break}},this.copyVRGamePadValues=(wt,Ct)=>{for(let Pt=2;Pt<4;Pt++){let At=wt.axes[Pt];Ct===0?Pt===2?this.movementState.movePosX=At:this.movementState.movePosZ=At:(wt.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,Pt===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(At)>=.3&&(this.vrEulerYOffset+=At<0?1:-1),this.movementState.rotPosY=At):this.moveMode==="fly"&&(this.movementState.moveNegY=At))}},this.sharedGameControlGlobals=d.sharedGameControlGlobals,e===b&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let _e=this.euler0.clone(),st=_e.y;if(this.objectRealQuat.copy(this.quaternion),_e.y=0,this.quaternion.setFromEuler(_e),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),_e.set(0,st,0),this.quaternion.setFromEuler(_e),this.rot.setFromEuler(_e),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((yt=this.camera)==null?void 0:yt.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let wt=new _(0,0,-1).applyQuaternion(this.camera.quaternion),Ct=new _().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(Ct),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let Pt,At;Math.abs(wt.y)<1e-6?(Ct.y=0,wt.y=0,At=Ct.projectOnVector(wt)):Ct.y/wt.y>0?At=wt.multiplyScalar(Ct.y/wt.y):At=wt.multiplyScalar(Ct.length()),this.targetToCamera0.copy(At).negate(),Pt=this.camera.position.clone().add(At),this.objectToTarget0.subVectors(Pt,this.position);let Tt=new or$1().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-Tt.x,Tt.x=0,Tt.z=0,Tt.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(Tt)}if(this.object instanceof wr$1&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=a.rotByTouch??"joystick",this.rotBy=a.rotBy??"keys",this.rotationMode=a.rotationMode??"normal",this.moveMode=a.moveMode??"walk",this.collisionEnabled=a.collisionEnabled,this.speedTranslate=(a.speedTranslate??250)*ZZ,this.speedOrbit=(a.speedRotate??100)*JZ,this.mouseOrbitSensitivity=(a.speedRotate??100)*$Z,this.keyAssignments=a.keyAssignments.map(wt=>{let Ct=[wt[0],wt[1]];return Ct[1]==="▲"?Ct[1]="ArrowUp":Ct[1]==="◀"?Ct[1]="ArrowLeft":Ct[1]==="▼"?Ct[1]="ArrowDown":Ct[1]==="▶"?Ct[1]="ArrowRight":Ct[1]==="⇧"?Ct[1]="Shift":Ct[1]==="↵"?Ct[1]="Enter":Ct[1]==="Space"?Ct[1]=" ":Ct[1]==="⌘"?Ct[1]="Meta":Ct[1]==="Ctrl"?Ct[1]="Control":Ct[1]==="Esc"&&(Ct[1]="Escape"),Ct}),a.rotBy==="mouse"){let wt;wt=this.keyAssignments.findIndex(Ct=>Ct[0]==="rotNegX"),wt!==-1&&(this.keyAssignments[wt][1]=""),wt=this.keyAssignments.findIndex(Ct=>Ct[0]==="rotPosX"),wt!==-1&&(this.keyAssignments[wt][1]=""),wt=this.keyAssignments.findIndex(Ct=>Ct[0]==="rotPosY"),wt!==-1&&(this.keyAssignments[wt][1]=""),wt=this.keyAssignments.findIndex(Ct=>Ct[0]==="rotNegY"),wt!==-1&&(this.keyAssignments[wt][1]="")}this.lerpFactorPosStart=1-.02**(1/((a.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((a.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((a.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((a.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((a.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((a.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??Bl.defaultData.gravity)*xN,this.usePhysics=this.gloabalPhysics.usePhysics??Bl.defaultData.usePhysics,this.jumpPower=a.jumpPower*eJ,this.resetYPosition=this.position.y+Math.abs(a.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=a.alignToGround??!1,this.orientMode=a.autoOrientMove?a.orientMode:"none",this.orientWith=a.orientWith??cd.defaultDataThirdPerson.orientWith,this.slopeThresh=qZ*Math.PI/180,a.collider.type==="capsule"?(this.collider.radius=a.collider.radius,this.collider.segment.start.y=a.collider.height/2-a.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=a.collider.height*PE/this.pixelsPerMeter,this.stepThresh=a.collider.height*DE/this.pixelsPerMeter,this.colliderHeight=a.collider.height):a.collider.type==="sphere"?(this.collider.radius=a.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*a.collider.radius*PE/this.pixelsPerMeter,this.stepThresh=2*a.collider.radius*DE/this.pixelsPerMeter,this.colliderHeight=a.collider.radius*2):(this.offset=a.collider.height*PE/this.pixelsPerMeter,this.stepThresh=a.collider.height*DE/this.pixelsPerMeter,this.colliderHeight=a.collider.height),this.collider.type=a.collider.type;let rt=new _().fromArray(a.collider.position),ut=new Qe().setFromEuler(new or$1().fromArray([...a.collider.rotation,"XYZ"]));this.collider.position.copy(rt).multiply(this.scale),this.collider.rotation.copy(ut),this.collider.matrix.compose(rt,ut,vN),a.cameraXAxis!==void 0&&(this.cameraXAxis=a.cameraXAxis,this.cameraYAxis=a.cameraYAxis,this.minPolarAngle=a.cameraRotXLimits[0],this.maxPolarAngle=a.cameraRotXLimits[1],this.minAzimuthAngleRel=a.cameraRotYLimits[0],this.maxAzimuthAngleRel=a.cameraRotYLimits[1]),this.forwardDir=a.forwardDirection??"-z",this.runMultiplier=a.runMultiplier??2;let gt=a.navmesh.destinationHelperRadius*2;if(gt>0){let wt=new Ue;wt.push({fi:0,data:{...Hr.defaultData("light","phong"),alpha:0},id:"layer1"}),wt.push({fi:0,data:{...Hr.defaultData("color"),color:a.navmesh.destinationHelperColor,alpha:a.navmesh.destinationHelperColor.a},id:"layer2"});let Ct=new Ga({layers:wt},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new sr(O0.create({parameters:{width:gt,height:gt/10,hollow:.7}}),Ct),this.navMeshPathDest.material.userData.opacity0=a.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let o=new or$1().setFromQuaternion(this.quaternion,"YXZ"),a=o.y;this.objectRealQuat.copy(this.quaternion),o.y=0,this.quaternion.setFromEuler(o),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),o.set(0,a,0),this.quaternion.setFromEuler(o),this.rot.setFromEuler(o),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof wr$1?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,o=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},ld.list.forEach(a=>{this.actions[a]=Mr$1({...e,disabled:!1,type:"GameControl"},e.gameActions[a],this.page,o,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),hr$1(this.actions.idle),hr$1(this.actions.move),hr$1(this.actions.run),hr$1(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(o=>{o.play()}),this.actions[e].Animation.forEach(o=>{o.play(this.initialAction===!1)}),this.actions[e].Create.forEach(o=>{o.dispatchStart()}),this.actions[e].Audio.forEach(o=>{o.dispatchGameControl("start")}),this.actions[e].Particles.forEach(o=>{o.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(o=>{o.stop(),o.object.currentState!==null&&o.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(o=>{o.dispatchStop()}),this.actions[e].Audio.forEach(o=>{o.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(o=>{o.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Bn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,o,a){var j,$,_e,st,rt,ut,gt,yt,wt;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let c=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let d=c*60,g=!1;if(this.usePhysics&&this.collisionEnabled){let Ct=Kn.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*xN),1)*(this.gravity>0?1:-1):this.velocity.y)*c,0).divideScalar(this.pixelsPerMeter),Pt=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,Ct,(j=this.object.rigidBody)==null?void 0:j.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(Pt){this.onObject=!0,this.groundNormal.set(Pt.normal2.x,Pt.normal2.y,Pt.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(g=!0),(($=Pt.collider.parent())==null?void 0:$.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let At=Pt.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let Tt of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(Tt.rigidBody===At&&Tt.userData.isFollowingObj!==this.object.uuid){(Tt.hasNonUniformScale?Tt.matrixWorldRigid:Tt.matrixWorld).decompose(Bn,Ka,Kn),this.groundVelocity.subVectors(Bn,Tt.prevT),this.object.getWorldPosition(Kn).add(this.collider.position).sub(Bn),this.groundYRotation=na.setFromQuaternion(Ka).y-Tt.prevR.y,lc.copy(Kn).applyAxisAngle(mo,this.groundYRotation),this.groundVelocity.add(lc.sub(Kn)).divideScalar(c);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*d),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let Ct=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let Pt=Bn.subVectors(this.path[1],this.position),At=Kn.subVectors(this.path[1],this.path[0]);Pt.dot(At)<0?this.path.shift():(this.directionXZ.x=At.x,this.directionXZ.z=At.z),Ct.opacity=Ct.userData.opacity0}else Ct.opacity-=.05*Ct.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**d),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**d),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**d)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let b=YZ.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let Ct=Kn.copy(b);Ct.y=0,b.set(0,b.y,Ct.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let Ct=Bn;this.camera.getWorldDirection(Ct);let Pt=lc.copy(mo).multiplyScalar(Ct.dot(mo));Ct.sub(Pt);let At=Kn.copy(this.directionXZ);At.x*=-1,this.rot.y=Ct.angleTo(At)*(Ct.cross(At).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(na.setFromVector3(this.rot),this.moveMode==="walk"&&(na.x=0),b.applyEuler(na),g&&(Ka.setFromUnitVectors(mo,this.groundNormal),b.applyQuaternion(Ka)),a){let Ct=na.set(0,this.vrEulerYOffset*bN,0);a.applyEuler(Ct),b.x+=a.x,b.z+=a.z,this.nonColliderPosOffset.elements[13]+=a.y*c}if(this.usePhysics===!0){let Ct=Kn;this.pushedVelocity.set(0,0,0);for(let Pt of this.sharedGameControlGlobals.entitiesWithTransformAnim){let At=lc.setFromMatrixPosition(Pt.matrixWorld).sub(Pt.prevT).divideScalar(c).divideScalar(this.pixelsPerMeter),Tt=Pt.rigidBody.collider(0).castCollider(At,this.object.rigidBody.collider(0),Bn.copy(b).divideScalar(this.pixelsPerMeter),c,!1);At.multiplyScalar(this.pixelsPerMeter);let kt=vt.is(Pt)?Pt:Pt.object;if(Tt!==null&&this.lastHitObj!==kt){let It;Pt instanceof Vr&&(It=Pt);let Lt=this.sharedGameControlGlobals.entityToCollisionEvents[kt.uuid];if(Lt)for(let Ft of Lt)Ft.data.target==="character"&&(Ft.dispatch(It),kt.dispatchEvent(_b));this.lastHitObj=kt}if(Tt!==null){this.pushedVelocity.copy(At),Ct.copy(Tt.normal1).applyQuaternion(Pt.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let Pt=Ct.dot(b);Pt<0&&b.addScaledVector(Ct,-Pt),b.add(this.pushedVelocity)}else b.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(c),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**d):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**d),this.euler.x+=this.rotVelocity.x*c,this.euler.y+=this.rotVelocity.y*c+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*c),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(mo,this.euler.y-this.euler0.y);let Ct=Kn.copy(this.objectToCamXZ).normalize(),Pt=lc.copy(b).multiplyScalar(c);Pt.y=0;let At=Pt.sub(Bn.copy(Ct).multiplyScalar(Pt.dot(Ct))).cross(Ct).y;this.euler.y-=Math.atan2(At,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*c+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Me.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Me.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Me.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(o?(na.copy(o),na.y=0):(na.copy(this.euler),na.y=0),this.nonColliderRotOffset.makeRotationFromEuler(na)),o&&(this.moveMode==="walk"?(this.rot.y=o.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(o),this.rot.y+=this.vrEulerYOffset*bN),po.setFromAxisAngle(QZ,this.rot.x),Ka.setFromAxisAngle(mo,this.rot.y),Ka.multiply(po),po.setFromAxisAngle(KZ,this.rot.z),Ka.multiply(po),this.quaternion.copy(Ka),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let Ct=Kn.copy(b).multiplyScalar(c/this.pixelsPerMeter),Pt=null;this.didHit=!1;let At=new _;for(let Tt=0;Tt<5;Tt++){let kt=Ct.length(),It=lc.copy(Ct).normalize();if(Pt=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(At),this.colliderWorldQuat,It,(_e=this.object.rigidBody)==null?void 0:_e.collider(0).shape,kt,!1,24,void 0,void 0,this.object.rigidBody),Pt!==null){this.didHit=!0;let Lt=this.sharedGameControlGlobals.colliderToEntity.get(Pt.collider.handle);if(Lt!==this.lastHitObj&&Tt===0){this.lastHitObj=Lt;let dr=this.sharedGameControlGlobals.entityToCollisionEvents[Lt==null?void 0:Lt.uuid];if(dr){for(let hs of dr)if(hs.data.target==="character"){let us=((st=this.sharedGameControlGlobals.rapierWorld)==null?void 0:st.getCollider(Pt.collider.handle))._parent,hn;if(Lt.cloner){for(let un of Lt.cloner.children)if(un.rigidBody===us){hn=un;break}}hs.dispatch(hn),Lt.dispatchEvent(_b)}}}let Ft=mN.set(Pt.normal2.x,Pt.normal2.y,Pt.normal2.z).applyQuaternion(this.colliderWorldQuat),Nt=gN.copy(It).multiplyScalar(Pt.toi).dot(Ft),Ht=Pt.toi;if(Ht===0&&(this.position.y+=this.offset*this.pixelsPerMeter),Nt>this.offset&&(Ht=Pt.toi*(Nt-this.offset)/Nt,At.addScaledVector(It,Ht)),Ct.copy(It).multiplyScalar(kt-Ht),Math.acos(-Ft.y)>this.slopeThresh){let dr=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(At),hs=lc.copy(Pt.witness2).applyQuaternion(this.colliderWorldQuat);hs.y=0;let us=dr.add(hs);us.y+=this.stepThresh;let hn=this.sharedGameControlGlobals.rapierWorld.castShape(us,this.colliderWorldQuat,Ct,(rt=this.object.rigidBody)==null?void 0:rt.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);hn!==null&&hn.toi===0&&(Ft.y=0,Ft.normalize())}Ct.addScaledVector(Ft,-Ct.dot(Ft))}else{Tt===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),At.add(Ct);break}}this.position.addScaledVector(At,this.pixelsPerMeter),(ut=this.object.rigidBody)==null||ut.setTranslation(Bn.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(gt=this.object.rigidBody)==null||gt.setRotation(po.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let Ct=this.onObject?1:5,Pt=b.multiplyScalar(c/Ct);for(let At=0;At<Ct;At++)this.position.add(Pt),this.collisionAdjustment(c/Ct)}else this.position.addScaledVector(b,c);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let Ct=this.objectToTarget.add(this.position),Pt=this.targetToCamera.add(Ct);OE.lookAt(Pt,Ct,mo).setPosition(Pt),OE.decompose(this.targetPos,this.targetQuat,Bn),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**d),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**d),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Me.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Me.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(rJ),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((wt=(yt=this.navMeshPathDest)==null?void 0:yt.material)==null?void 0:wt.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(tJ),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=po.setFromAxisAngle(mo,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Me.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let o;this.cameraXAxis==="Limit"?o=Me.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):o=Me.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let a=Bn.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&a.applyQuaternion(e);let c=Ka.setFromAxisAngle(a,o);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(c)}groundTiltAdjustment(e){mo.angleTo(e)*180/Math.PI<15||mo.angleTo(e)*180/Math.PI>85?po.identity():po.setFromUnitVectors(mo,e),this.groundTilt.slerp(po,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var d;let o=gN.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let a=OE.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Bn,po,Kn).compose(Bn,po,vN);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(g=>{if(g===this.object||g.isDescendantOf(this.object))return;ks.makeEmpty(),g.updateMatrixWorldSVD();let b=g.matrixWorldRigid,j=yN.copy(b).invert(),$=XZ.copy(yN).multiply(a);en$1.copy(this.collider.segment),en$1.start.applyMatrix4($),en$1.end.applyMatrix4($);let _e=mN.copy(this.position).applyMatrix4(j);ks.expandByPoint(en$1.start),ks.expandByPoint(en$1.end),ks.min.addScalar(-this.collider.radius),ks.max.addScalar(this.collider.radius),g.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(st){return st.distanceToPoint(en$1.end)},intersectsBounds:st=>st.intersectsBox(ks),intersectsTriangle:st=>{let rt=Bn,ut=Kn,gt=st.closestPointToSegment(en$1,rt,ut);if(gt<this.collider.radius){let yt=this.collider.radius-gt,wt=ut.sub(rt).normalize(),Ct=lc.copy(_e);Ct.addScaledVector(wt,yt);let Pt=Ct.applyMatrix4(b).sub(this.position);o.add(Pt),en$1.start.addScaledVector(wt,yt),en$1.end.addScaledVector(wt,yt)}}})}),ks.makeEmpty(),en$1.copy(this.collider.segment),en$1.start.applyMatrix4(a),en$1.end.applyMatrix4(a),ks.expandByPoint(en$1.start),ks.expandByPoint(en$1.end),ks.min.addScalar(-this.collider.radius),ks.max.addScalar(this.collider.radius),(d=this.sharedGameControlGlobals.staticMeshBVH)==null||d.shapecast({traverseBoundsOrder(g){return g.distanceToPoint(en$1.end)},intersectsBounds:g=>g.intersectsBox(ks),intersectsTriangle:g=>{let b=Bn,j=Kn,$=g.closestPointToSegment(en$1,b,j);if($<this.collider.radius){let _e=this.collider.radius-$,st=j.sub(b).normalize();this.alignToGround&&this.groundTiltAdjustment(st),o.addScaledVector(st,_e),en$1.start.addScaledVector(st,_e),en$1.end.addScaledVector(st,_e)}}}),this.onObject=Math.abs(o.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let c=Math.max(0,o.length()-1e-5);o.normalize().multiplyScalar(c),this.position.add(o)}},Eg=Ab;Eg.isLocked=!1;var SN=pi(iA());function go(e,o){let a=new Pe;if(!e.getAttribute("position"))return a.setAttribute("position",new Te([],3)),a.setIndex([]),a;let{positions:c,triIndices:d}=qc(e.getAttribute("position"),e.getIndex());return a.setAttribute("position",new Te(c,3)),a.setIndex(d),o&&a.applyMatrix4(o),a}var iJ=new ce$1,nJ=new ce$1,sa=[[0,0,0],[0,0,0],[0,0,0]];function RE(e){let o=e.elements;sa[0][0]=o[0],sa[0][1]=o[4],sa[0][2]=o[8],sa[1][0]=o[1],sa[1][1]=o[5],sa[1][2]=o[9],sa[2][0]=o[2],sa[2][1]=o[6],sa[2][2]=o[10];let{u:a,v:c}=(0,SN.SVD)(sa),d=iJ.set(a[0][0],a[0][1],a[0][2],0,a[1][0],a[1][1],a[1][2],0,a[2][0],a[2][1],a[2][2],0,0,0,0,1),g=nJ.set(c[0][0],c[0][1],c[0][2],0,c[1][0],c[1][1],c[1][2],0,c[2][0],c[2][1],c[2][2],0,0,0,0,1);return d.multiply(g.transpose())}var Eb=class extends ah{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,o){o.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):o.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(o),this.ray.direction.set(e.x,e.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,o=!0,a=[]){return e.forEach(c=>{c.visible&&this.intersectObject(c,o,a)}),a}createRaycastLineHelper(){let e=new ys({color:65280,linewidth:10}),o=new _(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),a=new _(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),c=this.camera.far-this.camera.near,d=new _().addVectors(o,a.multiplyScalar(c)),g=new Pe;return g.setFromPoints([o,d]),new Ac(g,e)}},wN=e=>e instanceof Ls||e instanceof uo;function sJ(e,o){return e.distance-o.distance}function AN(e,o,a){if(!(!Uo(o)||!o.visible)){mn(o)&&o.raycast(e,a);for(let c of o.children)AN(e,c,a)}}function Qf(e,o,a,c=!1){if(!c&&!a.some(g=>Kf(e,g)!==void 0))return[];let d=[];return o.children.forEach(g=>AN(e,g,d)),d.sort(sJ),d}function Tg(e){let o=[];if(e.length){let a=e[0].object;Uo(a)&&o.push(a);let c=a.parent;for(;c;)wN(c)&&o.push(c),c=c.parent}return o}function yo(e,o,a,c){let d=e.frame;if(d){let g=o[0]*d.width,b=(1-o[1])*d.height;for(let j of a){let $=j===d.uuid?d:d.find(j);if($!=null&&$.intersects(g,b))return c($),!0}}return!1}function Kf(e,o){if(mn(o)){if(o.visible){let a=[];return o.raycast(e,a),a.length?a[0]:void 0}}else if(wN(o))return _N(e,o)}function _N(e,o){if(!(!Uo(o)||!o.visible)){if(mn(o)){let a=[];if(o.raycast(e,a),a.length)return a[0]}for(let a of o.children){let c=_N(e,a);if(c)return c}}}function oJ(e,o,a){return{x:(e-(a.left+window.scrollX))/a.width*2-1,y:-((o-(a.top+window.scrollY))/a.height)*2+1}}function aJ(e,o,a){return{x:(e-(a.left+window.scrollX))/a.width,y:1-(o-(a.top+window.scrollY))/a.height}}var Tb=class{constructor(e,o,a,c,d,g,b,j){this.renderer=e,this.publish=o,this.scene=a,this.getCamera=c,this.sharedAssets=d,this.requestRender=g,this.isExport=b,this.frame=j,this.raycaster=new Eb,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=o.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var c;let{pageX:o,pageY:a}=((c=e.touches)==null?void 0:c.length)>0?e.touches[0]:e;this.pointerWorld=oJ(o,a,this._domRect),this.pointerScreen=aJ(o,a,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},zr$1=class{constructor(o){this.eventContext=o,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},LE=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],EN=e=>{var o;return(o=LE.find(([a,c])=>c===e))==null?void 0:o[0]},oa=e=>{var o;return(o=LE.find(([a])=>a===e))==null?void 0:o[1]},lJ=(e,o)=>{let a=EN(e);if(a){let c=new CustomEvent(a,{bubbles:!0});return Object.defineProperty(c,"target",{writable:!1,value:o}),c}},Mb=class extends zr$1{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=a=>{var g;if(!a.eventName||!a.target||a.eventName==="Scroll")return;let c=(g=this.splineEvents[EN(a.eventName)])==null?void 0:g[a.target.uuid];if(!c)return;a.eventName==="Scroll"&&a.deltaY!==void 0&&Object.assign(c,{deltaY:a.deltaY});let{domElement:d}=this.eventContext;d.dispatchEvent(c)};let{page:o}=this.eventContext;o.traverseEntity(a=>{var c,d;if((c=a.data)!=null&&c.events.length){for(let[g,b]of LE)if(a.data.events.some(j=>j.data.type===b&&!j.data.disabled)){this.objectsPerEvents.has(g)?(d=this.objectsPerEvents.get(g))==null||d.push(a):this.objectsPerEvents.set(g,[a]);let j={id:a.uuid,name:a.name},$=lJ(b,j),_e=this.splineEvents[g];_e?_e[a.uuid]=$:this.splineEvents[g]={[a.uuid]:$}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(o=>{o.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(o=>{o.removeEventListener("beginEvent",this.onBeginEvent)})})}},BE=class{constructor(e,o,a,c,d,g){if(this.id=e,this.data=o,this.object=a,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=o.runMode==="Toggle",(o.type==="KeyDown"||o.type==="KeyUp"||o.type==="KeyPress")&&!o.key)throw new Error("Missing property");this.actions=Mr$1(o,o.actions,c,d,g,a)}disconnect(){hr$1(this.actions)}dispatchHeld(e){this.actions.Create.forEach(o=>{e&&o.dispatchThrottled.cancel(),o.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this?(o.object.currentTransitionEvent=this,o.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(o)}),this.useToggle?(this.actions.Transition.forEach(o=>{o.toggle()}),this.actions.Animation.forEach(o=>{o.toggle()}),this.actions.SwitchCamera.forEach(o=>{o.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(o=>o.playFromCurrent()),this.actions.Animation.forEach(o=>o.playFromCurrent()),this.actions.SwitchCamera.forEach(o=>o.playFromCurrent()),this.actions.Create.forEach(o=>o.dispatchStart())):(this.actions.Transition.some(o=>o.playing)||this.actions.Transition.forEach(o=>{this.alreadyPlayedNonTogglingActions.has(o)===!1&&o.play()}),this.actions.SwitchCamera.some(o=>o.playing)||this.actions.SwitchCamera.forEach(o=>{o.play()}),this.actions.Animation.forEach(o=>{o.play()})),this.actions.Link.forEach(o=>{o.dispatch()}),this.actions.SceneTransition.forEach(o=>{o.dispatch()}),e===!1&&this.actions.Create.forEach(o=>{o.dispatch()}),this.actions.Destroy.forEach(o=>{o.dispatch()}),this.actions.Reset.forEach(o=>{o.dispatch()}),this.actions.Audio.forEach(o=>{o.dispatchBasic()}),this.actions.Video.forEach(o=>{o.dispatchBasic()}),this.actions.Particles.forEach(o=>{o.dispatchBasic()}),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())}),e?(this.actions.Transition.forEach(o=>o.reverseFromCurrent()),this.actions.Animation.forEach(o=>o.reverseFromCurrent()),this.actions.SwitchCamera.forEach(o=>o.reverseFromCurrent())):(this.actions.Transition.forEach(o=>o.playFromCurrent()),this.actions.Animation.forEach(o=>o.playFromCurrent()),this.actions.SwitchCamera.forEach(o=>o.playFromCurrent())),this.actions.Link.forEach(o=>{o.dispatch()}),this.actions.SceneTransition.forEach(o=>{o.dispatch()}),this.actions.Create.forEach(o=>{o.dispatch()}),this.actions.Destroy.forEach(o=>{o.dispatch()}),this.actions.Reset.forEach(o=>{o.dispatch()}),this.actions.Audio.forEach(o=>{o.dispatchBasic()}),this.actions.Video.forEach(o=>{o.dispatchBasic()}),this.actions.Particles.forEach(o=>{o.dispatchBasic()}),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}},Cb=class extends zr$1{constructor(e,o,a){super(e),this.useForRaycastProperty=a,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=b=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(b);let{raycaster:j,page:$}=this.eventContext,_e=Qf(j,$,[],!0);this.sceneInterects=_e,_e.length&&(this.eventContext.sharedAssets.raycastProperty={x:_e[0].point.x,y:_e[0].point.y,z:_e[0].point.z,objX:_e[0].object.matrixWorld.elements[12],objY:_e[0].object.matrixWorld.elements[13],objZ:_e[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=b=>{(b.target===this.eventContext.domElement||b.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(j=>{(j.data.type==="MouseDown"||j.data.type==="MousePress")&&(this.onCanvasRaycast(b),j.dispatch())})},this.onCanvasMouseUp=b=>{(b.target===this.eventContext.domElement||b.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(j=>{j.data.type==="MouseUp"?(this.onCanvasRaycast(b),j.dispatch()):j.data.type==="MousePress"&&j.dispatchRelease()})},this.onMouseDown=b=>{$e$1.length>1||(this.eventContext.updateRaycaster(b),this.handleMouseEvent("MouseDown"))},this.onMouseUp=b=>{$e$1.length>1||(this.eventContext.updateRaycaster(b),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=b=>{$e$1.length>1||(this.eventContext.updateRaycaster(b),this.handleMousePressEvent())},this.onMousePressRelease=b=>{$e$1.length>1||(this.eventContext.updateRaycaster(b),this.handleMousePressEvent(!0))},this.onKeyDown=b=>{this.heldKeys[b.key]||(this.handleKeyEvent(b,"KeyDown"),this.handleKeyEventHeld(b,"KeyDown",!0)),this.heldKeys[b.key]=!0},this.onKeyUp=b=>{this.handleKeyEvent(b,"KeyUp"),this.handleKeyEventHeld(b,"KeyUp",!0)},this.onKeyPressDown=b=>{this.heldKeysPress[b.key]?this.handleKeyEventHeld(b,"KeyPress"):(this.handleKeyEvent(b,"KeyPress"),this.handleKeyEventHeld(b,"KeyPress",!0)),this.heldKeysPress[b.key]=!0},this.onKeyPressUp=b=>{this.handleKeyEvent(b,"KeyPress",!0)},this.releaseHeldKey=b=>{delete this.heldKeys[b.key]},this.releaseHeldKeyPress=b=>{delete this.heldKeysPress[b.key]},this._onUserEvent=({eventName:b,target:j,reverse:$})=>{var st,rt,ut,gt;if(!b||!j)return;let _e=oa(b);_e&&(_e==="MouseDown"||_e==="MouseUp"||_e==="MousePress"?(j.dispatchEvent({type:"beginEvent",eventName:_e}),(rt=(st=this.eventsPerObjects[_e])==null?void 0:st[j.uuid])==null||rt.forEach(yt=>{yt.dispatchUserEvent($)})):(_e==="KeyDown"||_e==="KeyUp"||_e==="KeyPress")&&(j.dispatchEvent({type:"beginEvent",eventName:_e}),(gt=(ut=this.eventsPerObjects[_e])==null?void 0:ut[j.uuid])==null||gt.forEach(yt=>{yt.dispatchUserEvent()})))};let{page:c,sharedAssets:d}=this.eventContext,g=(b,j)=>{var _e,st;if(!((_e=b.data)!=null&&_e.events.length))return;let $=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let rt of $){let ut=this.eventsPerObjects[rt];b.data.events.filter(({data:gt})=>gt.type===rt&&gt.disabled!==!0).forEach(({id:gt,data:yt})=>{try{let wt=new BE(gt,yt,b,c,d,o);wt.actions.Video.length&&(this.hasVideoAction=!0),(yt.type==="MouseDown"||yt.type==="MouseUp"||yt.type==="MousePress")&&(yt.mode==="Canvas"||yt.mode==="Window")?this.canvasMouseEvents.push(wt):ut[b.uuid]?ut[b.uuid].some(Ct=>Ct.id===wt.id)||ut[b.uuid].push(wt):ut[b.uuid]=[wt]}catch{}}),(st=ut[b.uuid])!=null&&st.length&&this.objectsPerTypes[rt].push(b instanceof Jt&&(rt==="MouseDown"||rt==="MouseUp"||rt==="MousePress")?j:b)}};c.traverseEntity(b=>{var j;(b instanceof _r$1||b instanceof mr)&&((j=b.frame)==null||j.traverse($=>{g($,b)})),g(b)})}connect(){var o,a,c,d,g,b;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),((o=this.objectsPerTypes.MouseDown)!=null&&o.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(a=this.objectsPerTypes.MouseUp)!=null&&a.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(c=this.objectsPerTypes.MousePress)!=null&&c.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(d=this.objectsPerTypes.KeyDown)!=null&&d.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(g=this.objectsPerTypes.KeyUp)!=null&&g.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(b=this.objectsPerTypes.KeyPress)!=null&&b.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([j,$])=>{$.forEach(_e=>{_e.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(o=>{Object.values(o).forEach(a=>{a.forEach(c=>{c.disconnect()})})}),this.canvasMouseEvents.forEach(o=>{o.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([o,a])=>{a.forEach(c=>{c.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var j,$,_e,st;let{stopRaycast:o,raycaster:a,page:c,pointerScreen:d}=this.eventContext,g=this.objectsPerTypes[e],b=g.filter(rt=>!(rt instanceof Jt));if(!(!g.length&&!this.useForRaycastProperty)&&!(c.uiCanvas&&yo(c,[d.x,d.y],Object.keys(this.eventsPerObjects[e]),rt=>{this.handleObjectMouseEventDispatch(rt,e)}))){if(o||this.useForRaycastProperty){let rt;if(this.sceneInterects===null?rt=Qf(a,c,b,this.useForRaycastProperty):(rt=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&rt.length&&(this.eventContext.sharedAssets.raycastProperty={x:rt[0].point.x,y:rt[0].point.y,z:rt[0].point.z,objX:rt[0].object.matrixWorld.elements[12],objY:rt[0].object.matrixWorld.elements[13],objZ:rt[0].object.matrixWorld.elements[14]}),o){let ut=[(($=(j=rt[0])==null?void 0:j.uv)==null?void 0:$.x)??0,((st=(_e=rt[0])==null?void 0:_e.uv)==null?void 0:st.y)??0];Tg(rt).forEach(gt=>{gt instanceof _r$1&&yo(gt,ut,Object.keys(this.eventsPerObjects[e]),yt=>{this.handleObjectMouseEventDispatch(yt,e)}),this.eventsPerObjects[e][gt.uuid]&&this.handleObjectMouseEventDispatch(gt,e)})}}o||b.forEach(rt=>{var gt,yt;let ut=Kf(a,rt);ut&&(this.handleObjectMouseEventDispatch(rt,e),rt instanceof _r$1&&yo(rt,[((gt=ut==null?void 0:ut.uv)==null?void 0:gt.x)??0,((yt=ut==null?void 0:ut.uv)==null?void 0:yt.y)??0],Object.keys(this.eventsPerObjects[e]),wt=>{this.handleObjectMouseEventDispatch(wt,e)}))})}}handleMousePressEvent(e=!1){let o="MousePress",a=this.objectsPerTypes[o],c=a.filter(g=>!(g instanceof Jt)),d=[];if(a.length){if(!e){let{stopRaycast:g,raycaster:b,page:j,pointerScreen:$}=this.eventContext,_e=!1;if(j.uiCanvas&&(_e=yo(j,[$.x,$.y],Object.keys(this.eventsPerObjects[o]),st=>{d.push(st)})),g&&!_e){let st=Qf(b,j,c);d=Tg(st),st.forEach(rt=>{var ut,gt;rt.object instanceof _r$1&&yo(rt.object,[((ut=rt==null?void 0:rt.uv)==null?void 0:ut.x)??0,((gt=rt==null?void 0:rt.uv)==null?void 0:gt.y)??0],Object.keys(this.eventsPerObjects[o]),yt=>{d.push(yt)})})}else c.forEach(st=>{var ut,gt;let rt=Kf(b,st);rt&&(d.push(st),st instanceof _r$1&&yo(st,[((ut=rt==null?void 0:rt.uv)==null?void 0:ut.x)??0,((gt=rt==null?void 0:rt.uv)==null?void 0:gt.y)??0],Object.keys(this.eventsPerObjects[o]),yt=>{d.push(yt)}))})}this._prevObjects.length&&this._prevObjects.forEach(g=>{d.includes(g)||this.handleObjectMouseEventDispatchRelease(g,o)}),d.length&&d.forEach(g=>{this.handleObjectMouseEventDispatch(g,o)}),this._prevObjects=d}}handleObjectMouseEventDispatch(e,o){var a,c;e.dispatchEvent({type:"beginEvent",eventName:o}),(c=(a=this.eventsPerObjects[o])==null?void 0:a[e.uuid])==null||c.forEach(d=>{d.dispatch()})}handleObjectMouseEventDispatchRelease(e,o){var a,c;e.dispatchEvent({type:"beginEvent",eventName:o}),(c=(a=this.eventsPerObjects[o])==null?void 0:a[e.uuid])==null||c.forEach(d=>{d.dispatchRelease()})}handleKeyEvent(e,o,a=!1){this.objectsPerTypes[o].forEach(c=>{let d=this.eventsPerObjects[o][c.uuid];d.some(({data:g})=>"key"in g&&g.key===e.key)&&c.dispatchEvent({type:"beginEvent",eventName:o}),d.forEach(g=>{"key"in g.data&&g.data.key===e.key&&(a?g.dispatchRelease():g.dispatch(!0))})})}handleKeyEventHeld(e,o,a=!1){this.objectsPerTypes[o].forEach(c=>{this.eventsPerObjects[o][c.uuid].forEach(d=>{"key"in d.data&&d.data.key===e.key&&d.dispatchHeld(a)})})}},cJ=new _,uJ=new _,Pb=class{constructor(e,o,a,c,d){this.actionsIn=Mr$1(e,e.inActions,a,c,d,o),this.actionsOut=Mr$1(e,e.outActions,a,c,d,o)}disconnect(){hr$1(this.actionsIn),hr$1(this.actionsOut)}},NE=class extends Pb{constructor(e,o,a,c,d,g){super(o,a,c,d,g),this.id=e,this.data=o,this.object=a,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let ut of this.objects)if(!ut.visible)return;let _e=cJ.setFromMatrixPosition(this.objects[0].matrixWorld),st=uJ.setFromMatrixPosition(this.objects[1].matrixWorld),rt=_e.distanceTo(st)<=this.distance?"in":"out";if(this.stage!==rt){this.stage=rt;let ut=rt==="in"?this.actionsIn:this.actionsOut;ut.Audio.forEach(gt=>gt.dispatchConditional()),ut.Particles.forEach(gt=>gt.dispatchConditional()),ut.Video.forEach(gt=>gt.dispatchConditional()),ut.Link.forEach(gt=>gt.dispatch()),ut.Create.forEach(gt=>gt.dispatch()),ut.Destroy.forEach(gt=>gt.dispatch()),ut.Reset.forEach(gt=>gt.dispatch()),ut.Transition.forEach(gt=>{gt.object.currentTransitionEvent!==this&&(gt.object.currentTransitionEvent=this),gt.init()}),ut.Transition.forEach(gt=>gt.play()),ut.Animation.forEach(gt=>gt.play()),ut.SwitchCamera.forEach(gt=>gt.play()),ut.SceneTransition.forEach(gt=>gt.dispatch()),ut.SetVariable.forEach(gt=>gt.checkConditions()),ut.SetVariable.forEach(gt=>gt.dispatch()),ut.DynamicVariablePlay.forEach(gt=>gt.dispatch())}};let{distance:b,fromObject:j,toObject:$}=o.condition;this.distance=b;for(let _e of[j,$]){if(!_e)throw new Error("Missing property");let st=c.find(_e);if(!st)throw new Error("Missing property");this.objects.push(st)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},FE=class extends Pb{constructor(e,o,a,c,d,g){var $;super(o,a,c,d,g),this.id=e,this.data=o,this.object=a,this.onBegin=({target:_e,state:st})=>{this.toState!==st&&(this.actionsOut.Audio.forEach(rt=>rt.dispatchConditional()),this.actionsOut.Particles.forEach(rt=>rt.dispatchConditional()),this.actionsOut.Video.forEach(rt=>rt.dispatchConditional()),this.actionsOut.Link.forEach(rt=>rt.dispatch()),this.actionsOut.Create.forEach(rt=>rt.dispatch()),this.actionsOut.Destroy.forEach(rt=>rt.dispatch()),this.actionsOut.Reset.forEach(rt=>rt.dispatch()),this.actionsIn.Transition.forEach(rt=>rt.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(rt=>rt.play()),this.actionsOut.Animation.forEach(rt=>rt.play()),this.actionsIn.SwitchCamera.forEach(rt=>rt.pause()),this.actionsOut.SwitchCamera.forEach(rt=>rt.play()),this.actionsOut.SceneTransition.forEach(rt=>rt.dispatch()),this.actionsOut.SetVariable.forEach(rt=>rt.checkConditions()),this.actionsOut.SetVariable.forEach(rt=>rt.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(rt=>rt.dispatch()))},this.onComplete=({target:_e,state:st})=>{this.toState===st&&(this.actionsIn.Audio.forEach(rt=>rt.dispatchConditional()),this.actionsIn.Particles.forEach(rt=>rt.dispatchConditional()),this.actionsIn.Video.forEach(rt=>rt.dispatchConditional()),this.actionsIn.Link.forEach(rt=>rt.dispatch()),this.actionsIn.Create.forEach(rt=>rt.dispatch()),this.actionsIn.Destroy.forEach(rt=>rt.dispatch()),this.actionsIn.Reset.forEach(rt=>rt.dispatch()),this.actionsOut.Transition.forEach(rt=>rt.pause()),this.actionsOut.Transition.forEach(rt=>rt.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(rt=>rt.play()),this.actionsIn.Animation.forEach(rt=>rt.play()),this.actionsOut.SwitchCamera.forEach(rt=>rt.pause()),this.actionsIn.SwitchCamera.forEach(rt=>rt.play()),this.actionsIn.SceneTransition.forEach(rt=>rt.dispatch()),this.actionsIn.SetVariable.forEach(rt=>rt.checkConditions()),this.actionsIn.SetVariable.forEach(rt=>rt.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(rt=>rt.dispatch()))};let{condition:b}=o;if(!b.object)throw new Error("Missing property");let j=c.find(b.object)??c.scene.find2D(b.object);if(!j)throw new Error("Missing property");if(this.toObject=j,b.state&&!(($=this.toObject.states)!=null&&$[b.state]))throw new Error("Missing property");this.toState=b.state}connect(){bs(this.actionsOut).forEach(e=>{var o;(o=this.actionsOut[e])!=null&&o.length&&this.toObject.addEventListener("beginState",this.onBegin)}),bs(this.actionsIn).forEach(e=>{var o;(o=this.actionsIn[e])!=null&&o.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),bs(this.actionsOut).forEach(e=>{var o;(o=this.actionsIn[e])!=null&&o.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),bs(this.actionsIn).forEach(e=>{var o;(o=this.actionsIn[e])!=null&&o.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Db=class extends zr$1{constructor(e,o){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:a,sharedAssets:c}=this.eventContext;a.traverseEntity(d=>{var g;if((g=d.data)!=null&&g.events.length){for(let{id:b,data:j}of d.data.events)if(!j.disabled&&j.type==="Conditional")try{let $;j.condition.type==="Comparison"||(j.condition.type==="Distance"?$=new NE(b,j,d,a,c,o):j.condition.type==="State"&&($=new FE(b,j,d,a,c,o))),$&&(this.eventsPerConditions[j.condition.type].push($),($.actionsIn.Video.length||$.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(o=>o.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(o=>o.disconnect()))}},Mg=new _,cc=new _,gu=new _,TN=new ii,hJ=.01,ir=new _,ki=new _,MN=new _,yu=new Qe,kE=new or$1,dJ=new ce$1,VE=new nr,Zf=new _,aa$1=new _,Jf=.2;function zE(e,o){!o||(o[0]<o[1]&&(e.x=Math.min(Math.max(e.x,o[0]),o[1])),o[2]<o[3]&&(e.y=Math.min(Math.max(e.y,o[2]),o[3])),o[4]<o[5]&&(e.z=Math.min(Math.max(e.z,o[4]),o[5])))}var fJ=function(){let e=new ce$1;return(o,a,c)=>{let d=o.obj;e.copy(d.hiddenMatrix),d.parent!==null&&e.premultiply(d.parent.matrixWorld),e.invert(),d.position.copy(a),o.reference==="global"&&zE(d.position,o.limits),d.position.applyMatrix4(e),o.reference==="parent"?zE(d.position,o.limits):o.reference==="local"&&(yu.copy(o.quat0).invert(),d.position.sub(o.position0),d.position.applyQuaternion(yu),zE(d.position,o.limits),yu.invert(),d.position.applyQuaternion(yu),d.position.add(o.position0)),e.multiply(c??d.matrixWorld).decompose(ir,d.quaternion,ki),d.updateMatrix(),d.hasNonUniformScale&&(d.updateMatrixWorld(),d.updateMatrixWorldSVD()),d instanceof pr&&Rn(d.parent)&&d.invalidateDownstreamBooleanData(!0)}}(),UE=class{constructor(e,o,a,c,d,g){this.object=e,this.data=o,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Mr$1(o,o.dragDropActions.drag,a,c,d,this.object),this.actionsDrop=Mr$1(o,o.dragDropActions.drop,a,c,d,this.object);let b=[];this.data.objects.forEach(j=>{let $=a.find(j);!$||$.data.visible!==!1&&(b.push($),g[$.uuid]&&g[$.uuid].forEach(_e=>{let st=a.find(_e);!st||st.data.visible!==!1&&b.push(st)}))}),this.data.dropDestinations.forEach(j=>{let $=a.find(j);!$||$.data.visible!==!1&&(this.dropDestIds.push($.uuid),g[$.uuid]&&g[$.uuid].forEach(_e=>{let st=a.find(_e);!st||st.data.visible!==!1&&this.dropDestIds.push(st.uuid)}))}),this.dragItems=b.map(j=>(this.data.planeMode==="locked"&&(j.userData.lockedPlane=!0),j.userData.worldPosition0=new _().setFromMatrixPosition(j.matrixWorld),{obj:j,fromPosition:new _().setFromMatrixPosition(j.matrixWorld),pointStart:new _,pointEnd:new _,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new _().copy(j.position),quat0:new Qe().copy(j.quaternion),snapped:!1,orientationMatrix:new ce$1,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){hr$1(this.actionsDrag),hr$1(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},Ob=class extends zr$1{constructor(e,o){super(e),this.eventManager=o,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=c=>{var j;if($e$1.length>1)return;this.eventContext.updateRaycaster(c);let{raycaster:d,page:g}=this.eventContext,b=g.raycastWithClones(d);if(this.lastDropDestination=null,b.length===0){this.activeEvent=null;return}for(let $ of this.events){let _e=0;for(let{obj:st,pointEnd:rt,pointStart:ut}of $.dragItems){if(st===b[0].object||st===b[0].object.object||vt.is(st)&&st.isAncestorOf(b[0].object.uuid)){if($.activeIdx=_e,$.activeDragItem.reset=!1,$.activeDragItem.currentDampingFactor=$.data.dampingFactor,$.activeDragItem.snapped=!1,$.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){$.activeDragItem.obj.rigidBody&&$.activeDragItem.obj.rigidBody.setBodyType(2,!0);let gt=$.activeDragItem.obj;st.hasNonUniformScale&&st.updateMatrixWorldSVD(),(gt.hasNonUniformScale?gt.matrixWorldRigid:gt.matrixWorld).decompose(ir,yu,ki),kE.setFromQuaternion(yu),gt.prevR===void 0?(gt.prevR=kE.clone(),gt.prevT=ir.clone()):(gt.prevR.copy(kE),gt.prevT.copy(ir)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push($.activeDragItem.obj)}this.calcPlaneIntersectPos(st,ut,$.data.plane,$.data.referenceFrame),rt.copy(ut),(this.eventManager.controlsManager.usePhysics&&((j=st.data.physics)==null?void 0:j.rigidBody)==="dynamic"||$.data.drop===!1||$.data.resetOnSnapFail===!1)&&$.activeDragItem.fromPosition.setFromMatrixPosition($.activeDragItem.obj.matrixWorld),this.activeEvent=$,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}_e++}}this.activeEvent=null},this.onPointerMove=c=>{var j,$,_e,st;if($e$1.length>1)return;this.eventContext.updateRaycaster(c);let{raycaster:d,page:g}=this.eventContext,b=g.raycastWithClones(d);if($e$1.length===0){let rt=!1;for(let ut of this.events){for(let{obj:gt}of ut.dragItems)if(gt===((j=b[0])==null?void 0:j.object)||gt===((_e=($=b[0])==null?void 0:$.object)==null?void 0:_e.object)||vt.is(gt)&&gt.isAncestorOf((st=b[0])==null?void 0:st.object.uuid)){switch(rt=!0,ut.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(rt)break}rt||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let rt=this.activeEvent.activeDragItem;rt.snapped=!1;let ut;if(this.activeEvent.data.drop&&(ut=b.filter(gt=>rt.obj!==gt.object&&!rt.obj.isAncestorOf(gt.object.uuid)&&!(gt.object instanceof Ls)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(yt=>yt===gt.object.uuid||g.scene.find(yt).isAncestorOf(gt.object.uuid))))[0]),ut){let gt=MN.copy(ut.face.normal).applyMatrix3(VE.getNormalMatrix(ut.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")rt.fromPosition.setFromMatrixPosition(ut.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(rt.fromPosition.copy(ut.point),this.activeEvent.data.snapSurfaceMode==="bbox"){ir.copy(gt).applyMatrix3(VE.setFromMatrix4(rt.obj.matrixWorld).transpose());let yt=rt.obj;ir.x>Jf?ki.x=-yt.recursiveBBox.min.x:ir.x<-Jf&&(ki.x=-yt.recursiveBBox.max.x),ir.y>Jf?ki.y=-yt.recursiveBBox.min.y:ir.y<-Jf&&(ki.y=-yt.recursiveBBox.max.y),ir.z>Jf?ki.z=-yt.recursiveBBox.min.z:ir.z<-Jf&&(ki.z=-yt.recursiveBBox.max.z),ki.applyMatrix3(VE.invert())}else ki.copy(gt).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);rt.fromPosition.add(ki)}this.activeEvent.data.autoOrient&&(ir.set(0,1,0).cross(gt),ir.length()<1e-4&&ir.set(-1,0,0).cross(gt),ki.crossVectors(MN,ir),rt.orientationMatrix.makeBasis(ir,ki,gt)),rt.pointStart.copy(rt.fromPosition),rt.pointEnd.copy(rt.pointStart),rt.currentDampingFactor=this.activeEvent.snapDampingFactor,rt.snapped=!0,this.lastDropDestination!==ut.object&&(this.lastDropDestination=ut.object,this.activeEvent.actionsDrop.Transition.forEach(yt=>{yt.play()}),this.activeEvent.actionsDrop.Animation.forEach(yt=>{yt.play()}),this.activeEvent.actionsDrop.Audio.forEach(yt=>{yt.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(yt=>{yt.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(yt=>{yt.dispatchThrottled()}))}else rt.orientationMatrix.makeRotationFromQuaternion(rt.quat0),this.lastDropDestination=null,rt.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(rt.obj,rt.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(gt=>{gt.stop(),gt.object.currentState!==null&&gt.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(gt=>{gt.stop()}),this.activeEvent.actionsDrop.Audio.forEach(gt=>{gt.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(gt=>{gt.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(gt=>{gt.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(gt=>gt.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(gt=>gt.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(gt=>gt.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(gt=>{gt.play()}),this.activeEvent.actionsDrag.Animation.forEach(gt=>{gt.play()}),this.activeEvent.actionsDrag.Audio.forEach(gt=>{gt.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(gt=>{gt.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(gt=>{gt.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(gt=>{gt.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(gt=>{gt.stop(),gt.object.currentState!==null&&gt.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(gt=>{gt.stop()}))},500),this.updateDragItem(rt),rt.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=c=>{var d;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let g=((d=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:d.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!g)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&g&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(b=>{b.stop(),b.object.currentState!==null&&b.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(b=>{b.stop()}),this.activeEvent.actionsDrag.Audio.forEach(b=>{b.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(b=>{b.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(b=>b.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(b=>b.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(b=>b.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let a={};e.page.traverseEntity(c=>{c.component&&(a[c.component.uuid]?a[c.component.uuid].push(c.uuid):a[c.component.uuid]=[c.uuid])}),e.page.traverseEntity(c=>{var d;(d=c.data)==null||d.events.filter(g=>g.data.type==="DragDrop"&&!g.data.disabled).forEach(g=>{this.events.push(new UE(c,g.data,e.page,e.sharedAssets,o,a))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(o=>o.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let o of e.dragItems)o.paused||this.updateDragItem(o,!0)}calcPlaneIntersectPos(e,o,a,c){let{getCamera:d,raycaster:g}=this.eventContext;d().getWorldDirection(cc),cc.negate();let b=yu.identity();switch(c==="parent"?dJ.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(ir,b,ki):c==="local"&&e.matrixWorld.decompose(ir,b,ki),a){case"x":ir.set(1,0,0).applyQuaternion(b),Zf.copy(cc).cross(ir),aa$1.copy(ir).cross(Zf);break;case"y":ir.set(0,1,0).applyQuaternion(b),Zf.copy(cc).cross(ir),aa$1.copy(ir).cross(Zf);break;case"z":ir.set(0,0,1).applyQuaternion(b),Zf.copy(cc).cross(ir),aa$1.copy(ir).cross(Zf);break;case"xy":aa$1.set(0,0,1).applyQuaternion(b);break;case"yz":aa$1.set(1,0,0).applyQuaternion(b);break;case"xz":aa$1.set(0,1,0).applyQuaternion(b);break;case"adaptive":cc.angleTo(ki.set(0,1,0))>Math.PI/6?(ir.crossVectors(ki.set(0,1,0),cc),aa$1.crossVectors(ir,ki)):aa$1.set(0,1,0);break;default:aa$1.copy(cc);break}gu.setFromMatrixPosition(e.matrixWorld);let j=e.userData.lockedPlane?e.userData.worldPosition0:gu;if(TN.setFromNormalAndCoplanarPoint(aa$1,j),!!g.ray.intersectPlane(TN,o)&&(a==="x"||a==="y"||a==="z")){let $=ki.subVectors(o,j).dot(ir);o.copy(j).addScaledVector(ir,$)}}updateDragItem(e,o=!1){var a,c;gu.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?Mg.subVectors(e.fromPosition,gu).divideScalar(e.currentDampingFactor):e.reset==="original"?(Mg.subVectors(e.obj.userData.worldPosition0,gu).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):Mg.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(gu).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?Mg.length()<hJ:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||o)&&fJ(e,Mg.add(gu),(a=this.activeEvent)!=null&&a.data.drop&&((c=this.activeEvent)!=null&&c.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},$f=new _,GE=new _,Za=new _,Ja=new _,CN=new ii,pJ=.01,mJ={type:"requestRender"},gJ=function(){let e=new _,o=new _;return(a,c,d)=>d>0?(e.subVectors(a,c),e.length()<=d?a:o.copy(c).add(e.normalize().multiplyScalar(d))):c}(),PN=function(){let e=new ce$1;return(o,a)=>{o.position.copy(a),o.parent!==null&&(e.copy(o.parent.matrixWorld).invert(),o.position.applyMatrix4(e)),e.copy(o.hiddenMatrix).invert(),o.position.applyMatrix4(e),o.updateMatrix(),o.hasNonUniformScale&&(o.updateMatrixWorld(),o.updateMatrixWorldSVD()),o instanceof pr&&Rn(o.parent)&&o.invalidateDownstreamBooleanData(!0)}}(),jE=class{constructor(e,o,a,c,d){this.data=e,this.object=o,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new _,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...Wv.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=a.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Mr$1(e,e.actions,a,c,d,o)}},Ib=class extends zr$1{constructor(e,o){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=c=>{if(!($e$1.length>1)){this.eventContext.updateRaycaster(c);for(let d of this.events)d.target===void 0&&this.updateSingleEvent(d)}},this.onMouseEnter=c=>{for(let d of this.events)d.target===void 0&&(d.isReset=!1,d.currentDampingFactor=d.data.dampingFactor)},this.onMouseLeave=c=>{for(let d of this.events)d.target===void 0&&(d.data.resetOnPointerLeave&&(d.isReset=!0,d.currentDampingFactor=d.resetDampingFactor),this.updateSingleEvent(d))},this.onTargetChange=c=>()=>{this.updateSingleEvent(c)};let{page:a}=this.eventContext;a.traverseEntity(c=>{var g,b;let d=(g=c.data)==null?void 0:g.events.find(j=>j.data.type==="Follow"&&!j.data.disabled);d&&(!a.data.globalPhysics.usePhysics||((b=c.dataPatched.physics)==null?void 0:b.rigidBody)!=="dynamic")&&this.events.push(new jE(d.data,c,a,e.sharedAssets,o))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:o}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),o.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let a of this.events)if(a.target!==void 0){let c=a.target,d=this.onTargetChange(a);this.pairOfEventListeners.push([c,d]),c.addEventListener("requestRender",d)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:o}=this.eventContext;this.domEventsNeeded.clear(),Ii&&e.removeEventListener("pointerdown",this.onMouseMove),o.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[a,c]of this.pairOfEventListeners)a.removeEventListener("requestRender",c);for(let a of this.events)a.paused=!0,a.isReset=!1,hr$1(a.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,o=!1){var b;this.events.forEach(j=>{j.actions.Create.forEach($=>{$.dispatchThrottled()})});let{plane:a,limitDistance:c,limitDistanceEnabled:d}=e.data;if(e.object.getWorldPosition(Za),e.isReset)Ja.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Ja);else{let{getCamera:j,raycaster:$}=this.eventContext;if(a==="custom"?(j().getWorldDirection(GE),GE.negate(),$f.copy(GE)):a==="xy"?$f.set(0,0,1):a==="xz"?$f.set(0,1,0):a==="yz"&&$f.set(1,0,0),CN.setFromNormalAndCoplanarPoint($f,Za),!$.ray.intersectPlane(CN,Ja))return}if(!e.isReset){if(Ja.distanceTo(e.worldPosition0)>c&&d&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Ja.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Ja.x=Za.x),e.data.enabledTranslation[1]===!1&&(Ja.y=Za.y),e.data.enabledTranslation[2]===!1&&(Ja.z=Za.z);let g=gJ(Za,Ja,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let j=$f.subVectors(g,Za).divideScalar(e.currentDampingFactor);Za.add(j),o&&PN(e.object,Za),e.paused=j.length()<pJ}else PN(e.object,g),e.paused=!0;(b=e.object)==null||b.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(mJ)}},Cg=new _,Rb=new _,Pg=new ce$1,ep=new Qe,uc=new Qe,Dg=new _,Og=new _,vu=new _,$a=new _,HE=new ii,yJ=1e-6,vJ={type:"requestRender"},xJ={type:"changeRotation"},DN=function(){let e=new ce$1;return function(o,a){o.parent!==null?e.multiplyMatrices(o.parent.matrixWorld,o.hiddenMatrix):e.copy(o.hiddenMatrix),a.premultiply(RE(e).invert()),o.rotation.setFromRotationMatrix(a),o.updateMatrix(),o instanceof pr&&Rn(o.parent)&&o.invalidateDownstreamBooleanData(!0)}}(),WE=class{constructor(e,o,a){this.object=o,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Qe,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...qv.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=a.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},Lb=class extends zr$1{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=a=>{if(!($e$1.length>1)){this._lastMouseEvent=a,this.eventContext.updateRaycaster(a);for(let c of this.events)c.target===void 0&&this.updateSingleEvent(c)}},this.onMouseEnter=a=>{for(let c of this.events)c.target===void 0&&(c.isReset=!1,c.currentDampingFactor=c.data.dampingFactor)},this.onMouseLeave=a=>{for(let c of this.events)c.target===void 0&&(c.data.resetOnPointerLeave&&(c.isReset=!0,c.currentDampingFactor=c.resetDampingFactor),this.updateSingleEvent(c))},this.onScroll=a=>{if(this._lastMouseEvent){let c=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(c)}},this.onTargetChange=a=>()=>{this.updateSingleEvent(a)},this.createUserEventListener=a=>({eventName:c,target:d})=>{if(!c||!d)return;let g=oa(c);g&&g==="LookAt"&&this.updateSingleEvent(a)};let{page:o}=this.eventContext;o.traverseEntity(a=>{var d,g;let c=(d=a.data)==null?void 0:d.events.find(b=>b.data.type==="LookAt"&&!b.data.disabled);c&&(!o.data.globalPhysics.usePhysics||((g=a.dataPatched.physics)==null?void 0:g.rigidBody)!=="dynamic")&&this.events.push(new WE(c.data,a,o))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:o}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),o.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?o.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let a of this.events){if(a.target!==void 0){let g=this.onTargetChange(a),b=a.target;this.pairOfEventListeners.push([b,g]),b.addEventListener("requestRender",g)}let c=this.createUserEventListener(a),d=a.object;this.pairOfUserEventListeners.push([d,c]),d.addEventListener("userEvent",c)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:o}=this.eventContext;this.domEventsNeeded.clear(),Ii&&e.removeEventListener("pointerdown",this.onMouseMove),o.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),o.removeEventListener("scroll",this.onScroll);for(let[a,c]of this.pairOfEventListeners)a.removeEventListener("requestRender",c);for(let[a,c]of this.pairOfUserEventListeners)a.removeEventListener("userEvent",c);for(let a of this.events)a.paused=!0,a.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var ut;let{tilt:o,axis:a,distance:c,plane:d,limitDistance:g,enabledRotation:b,limitDistanceEnabled:j}=e.data,{getCamera:$,raycaster:_e}=this.eventContext,{object:st,target:rt}=e;if(st.getWorldPosition(Dg),!e.isReset)if(e.target)e.target.getWorldPosition(Og);else{if(d==="custom"?($().getWorldDirection(Rb),Rb.negate(),HE.setFromNormalAndCoplanarPoint(Rb,Dg)):(d==="xy"?Cg.set(0,0,1):d==="xz"?Cg.set(0,1,0):d==="yz"&&Cg.set(1,0,0),HE.setFromNormalAndCoplanarPoint(Cg,Dg)),!_e.ray.intersectPlane(HE,Og))return;c>0&&(d==="custom"||d===void 0)&&Og.addScaledVector(Rb,c)}if(e.isReset||(rt?o==="target"?vu.copy(rt.up).applyMatrix4(Pg.extractRotation(rt.matrixWorld)).normalize():b.some(gt=>gt===!1)?(a==="x"?($a.set(0,0,1),b[2]===!1&&$a.set(0,1,0)):a==="y"?($a.set(1,0,0),b[0]===!1&&$a.set(0,0,1)):($a.set(0,1,0),b[1]===!1&&$a.set(1,0,0)),vu.copy($a).applyQuaternion(e.worldQuaternion0).normalize()):vu.set(0,1,0):d==="custom"?vu.set(0,1,0):vu.copy(Cg)),e.isReset)uc.copy(e.worldQuaternion0);else if(Dg.distanceTo(Og)>g&&j&&rt)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)uc.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;bJ(Pg,Og,Dg,vu,a,$a),uc.setFromRotationMatrix(Pg),ep.setFromUnitVectors($a.applyQuaternion(uc),vu),b.some(gt=>gt===!1)&&o!=="target"&&uc.premultiply(ep).normalize()}e.currentDampingFactor>1?(st.updateWorldMatrix(!0,!1),ep.setFromRotationMatrix(RE(st.matrixWorld)),ep.slerp(uc,1/e.currentDampingFactor),DN(st,Pg.makeRotationFromQuaternion(ep)),e.paused=8*(1-ep.dot(uc))<yJ):(DN(st,Pg.makeRotationFromQuaternion(uc)),e.paused=!0),(ut=e.object)==null||ut.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),st.dispatchEvent(vJ),st.dispatchEvent(xJ)}},Vs=new _,Vi=new _,hi=new _;function bJ(e,o,a,c,d,g){let b=e.elements;hi.subVectors(o,a),hi.lengthSq()===0&&(hi.z=1),hi.normalize(),Vi.crossVectors(c,hi),Vi.lengthSq()===0&&(Math.abs(c.z)===1?hi.x+=1e-4:hi.z+=1e-4,hi.normalize(),Vi.crossVectors(c,hi)),Vi.normalize(),Vs.crossVectors(hi,Vi),d==="x"?g.z===1?[Vi,Vs,hi]=[hi,Vi,Vs]:(Vi.negate(),[Vi,hi]=[hi,Vi]):d==="y"?g.x===1?[Vi,Vs,hi]=[Vs,hi,Vi]:(Vi.negate(),[Vs,hi]=[hi,Vs]):g.x===1&&(Vi.negate(),[Vi,Vs]=[Vs,Vi]),b[0]=Vi.x,b[4]=Vs.x,b[8]=hi.x,b[1]=Vi.y,b[5]=Vs.y,b[9]=hi.y,b[2]=Vi.z,b[6]=Vs.z,b[10]=hi.z}var qE=class{constructor(e,o,a,c,d,g){this.id=e,this.data=o,this.object=a,this.entered=!1,this.actions=Mr$1(o,o.actions,c,d,g,a)}disconnect(){hr$1(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())}),e?(this.actions.Transition.forEach(o=>o.reverseFromCurrent()),this.actions.Particles.forEach(o=>o.reverseFromCurrent()),this.actions.Animation.forEach(o=>o.reverseFromCurrent()),this.actions.SwitchCamera.forEach(o=>o.reverseFromCurrent())):(this.actions.Transition.forEach(o=>o.playFromCurrent()),this.actions.Animation.forEach(o=>o.playFromCurrent()),this.actions.Create.forEach(o=>o.dispatch()),this.actions.Particles.forEach(o=>o.dispatchBasic()),this.actions.Destroy.forEach(o=>o.dispatch()),this.actions.SwitchCamera.forEach(o=>o.playFromCurrent())),this.actions.SceneTransition.forEach(o=>o.dispatch()),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}},Bb=class extends zr$1{constructor(e,o){super(e),this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=g=>{$e$1.length>1||(this.eventContext.updateRaycaster(g),this.handleMouseHoverEvent())},this.onMouseUp=g=>{$e$1.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=g=>{$e$1.length>1||(this.eventContext.updateRaycaster(g),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:g,target:b,reverse:j})=>{var _e;if(!g||!b)return;let $=oa(g);$&&$==="MouseHover"&&(b.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(_e=this.eventsPerObjects[b.uuid])==null||_e.forEach(st=>st.dispatchUserEvent(j)))};let{page:a,sharedAssets:c}=this.eventContext,d=(g,b)=>{var j,$;if(!(!g.visible||!((j=g.data)!=null&&j.events.length))){for(let{id:_e,data:st}of g.data.events)if(!st.disabled&&st.type==="MouseHover")try{let rt=new qE(_e,st,g,a,c,o);this.eventsPerObjects[g.uuid]?this.eventsPerObjects[g.uuid].push(rt):this.eventsPerObjects[g.uuid]=[rt]}catch{}($=this.eventsPerObjects[g.uuid])!=null&&$.length&&this.objects.push(g instanceof Jt?b:g)}};a.traverseEntity(g=>{var b;(g instanceof _r$1||g instanceof mr)&&((b=g.frame)==null||b.traverse(j=>{d(j,g)})),d(g)})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(o=>{o.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(o=>{o.forEach(a=>{a.disconnect()})}),this.objects.forEach(o=>{o.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let o=[];if(!e){let{stopRaycast:a,raycaster:c,page:d,pointerScreen:g}=this.eventContext,b=!1;if(d.uiCanvas&&(b=yo(d,[g.x,g.y],Object.keys(this.eventsPerObjects),j=>{o.push(j)})),a&&!b){let j=Qf(c,d,this.objects);o=Tg(j),j.forEach($=>{var _e,st;$.object instanceof _r$1&&yo($.object,[((_e=$==null?void 0:$.uv)==null?void 0:_e.x)??0,((st=$==null?void 0:$.uv)==null?void 0:st.y)??0],Object.keys(this.eventsPerObjects),rt=>{o.push(rt)})})}else this.objects.forEach(j=>{var _e,st;let $=Kf(c,j);$&&(o.push(j),j instanceof _r$1&&yo(j,[((_e=$==null?void 0:$.uv)==null?void 0:_e.x)??0,((st=$==null?void 0:$.uv)==null?void 0:st.y)??0],Object.keys(this.eventsPerObjects),rt=>{o.push(rt)}))})}this._prevObjects.length&&this._prevObjects.forEach(a=>{var c;o.includes(a)||(a.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(c=this.eventsPerObjects[a.uuid])==null||c.forEach(d=>d.dispatchLeave()))}),o.length&&o.forEach(a=>{var c;a.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(c=this.eventsPerObjects[a.uuid])==null||c.forEach(d=>d.dispatchEnter())}),this._prevObjects=o}},YE=class{constructor(e,o,a,c,d,g){this.id=e,this.data=o,this.object=a,this.scrollCounter=0,this.actions=Mr$1(o,o.actions,c,d,g,a)}connect(){this.scrollCounter=0}disconnect(){hr$1(this.actions)}dispatch(e){this.actions.Transition.forEach(c=>{c.object.currentTransitionEvent!==this&&(c.object.currentTransitionEvent=this,c.init())});let o=e>0?1:-1;this.scrollCounter+=o,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let a=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(c=>c.seek(a)),this.actions.Animation.forEach(c=>c.seek(o)),this.actions.Create.forEach(c=>c.dispatchThrottled()),this.actions.SetVariable.forEach(c=>c.checkConditions()),this.actions.SetVariable.forEach(c=>c.dispatch()),this.actions.DynamicVariablePlay.forEach(c=>c.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())}),e?(this.actions.Transition.forEach(o=>o.reverseFromCurrent()),this.actions.Animation.forEach(o=>o.reverseFromCurrent())):(this.actions.Transition.forEach(o=>{o.playFromCurrent()}),this.actions.Animation.forEach(o=>{o.playFromCurrent()})),this.actions.Create.forEach(o=>o.dispatchThrottled()),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}},XE=class{constructor(e,o,a,c,d,g,b){this.id=e,this.data=o,this.object=a,this.domElement=g,this.eventManager=b,this.scrollStart=0,this.scrollEnd=0,this.actions=Mr$1(o,o.actions,c,d,b,a)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),o=document.body,a=document.documentElement,c=window.pageYOffset||a.scrollTop||o.scrollTop,d=a.clientTop||o.clientTop||0,g=Math.round(e.top+c-d);if(this.data.startFrom==="enter"){let b=window.innerHeight,j=e.height,$=this.data.enterAnchor,_e=$==="top"?b:$==="bottom"?b-j:b-j*.5;this.scrollStart=g-_e}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){hr$1(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:o}){this.actions.Transition.forEach(d=>{d.object.currentTransitionEvent!==this&&(d.object.currentTransitionEvent=this,d.init())});let a=this.scrollEnd-this.scrollStart,c=Math.min(1,Math.max(0,(o-this.scrollStart)/a));this.actions.Transition.forEach(d=>d.seek(c)),this.actions.Animation.forEach(d=>d.seek(c)),this.actions.Create.forEach(d=>d.dispatchThrottled()),this.actions.SetVariable.forEach(d=>d.checkConditions()),this.actions.SetVariable.forEach(d=>d.dispatch()),this.actions.DynamicVariablePlay.forEach(d=>d.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())}),e?(this.actions.Transition.forEach(o=>o.reverseFromCurrent()),this.actions.Animation.forEach(o=>o.reverseFromCurrent())):(this.actions.Transition.forEach(o=>{o.playFromCurrent()}),this.actions.Animation.forEach(o=>{o.playFromCurrent()})),this.actions.Create.forEach(o=>o.dispatchThrottled()),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}},Nb=class extends zr$1{constructor(e,o){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([j,$])=>{$.forEach(_e=>_e.handleResize())})},this.onScroll=j=>{if(!this.isInview)return;let $={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([_e,st])=>{_e.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:$}),st.forEach(rt=>rt.dispatch($))})},this.onWheel=j=>{!this.isInview||j.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([$,_e])=>{$.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:j.deltaY}),_e.forEach(st=>st.dispatch(j.deltaY))})},this.onUserEvent=({eventName:j,target:$,reverse:_e})=>{var rt;if(!j||!$)return;let st=oa(j);st&&st==="Scroll"&&($.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(rt=this.wheelEventsPerObject.get($))==null||rt.forEach(ut=>{ut.dispatchUserEvent(_e)}))};let{page:a,sharedAssets:c,domElement:d,isExport:g}=this.eventContext,b=j=>{var $,_e,st;if(($=j.data)!=null&&$.events.length){for(let{id:rt,data:ut}of j.data.events)if(!ut.disabled&&ut.type==="Scroll")if(ut.trigger==="load"||!g){let gt=new YE(rt,ut,j,a,c,o);this.wheelEventsPerObject.has(j)?(_e=this.wheelEventsPerObject.get(j))==null||_e.push(gt):this.wheelEventsPerObject.set(j,[gt])}else{let gt=new XE(rt,ut,j,a,c,d,o);this.scrollEventsPerObject.has(j)?(st=this.scrollEventsPerObject.get(j))==null||st.push(gt):this.scrollEventsPerObject.set(j,[gt])}}};a.traverseEntity(j=>{var $;(j instanceof _r$1||j instanceof mr)&&(($=j.frame)==null||$.traverse(_e=>{b(_e)})),b(j)}),this.intersectionObserver=new IntersectionObserver(j=>{let $=j[0];$&&(this.isInview=$.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,o])=>{o.forEach(a=>a.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,o])=>{o.forEach(a=>a.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,o])=>{o.forEach(a=>a.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,o])=>{o.forEach(a=>a.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},QE=class{constructor(e,o,a,c,d,g){this.id=e,this.data=o,this.object=a,this.actions=Mr$1(o,o.actions,c,d,g,a)}disconnect(){hr$1(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(o=>{(o.interaction.data.triggerAfter??"any")===e&&(o.interaction instanceof ta?o.interaction.audioPlayer.play():o.interaction instanceof qf&&o.interaction.dispatch())}),this.actions.Video.forEach(o=>{let a=o.interaction.data.triggerAfter??"autoplay";a===e&&(o.interaction instanceof Qa?o.interaction.play(a==="autoplay"):o.interaction instanceof Xf&&o.interaction.dispatch())}),this.actions.Particles.forEach(o=>{(o.data.triggerAfter??"any")===e&&o.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())}),e?(this.actions.Transition.forEach(o=>o.reverseFromCurrent()),this.actions.Animation.forEach(o=>o.reverseFromCurrent()),this.actions.SwitchCamera.forEach(o=>o.reverseFromCurrent())):(this.actions.Transition.forEach(o=>o.playFromCurrent()),this.actions.Animation.forEach(o=>o.playFromCurrent()),this.actions.SwitchCamera.forEach(o=>o.playFromCurrent())),this.actions.SceneTransition.forEach(o=>o.dispatch()),this.actions.Reset.forEach(o=>o.dispatch()),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch()),this.actions.Create.forEach(o=>{o.dispatch()}),this.actions.Destroy.forEach(o=>{o.dispatch()}),this.actions.Audio.forEach(o=>{o.interaction instanceof ta?o.interaction.audioPlayer.play():o.interaction instanceof qf&&o.interaction.dispatch()}),this.actions.Video.forEach(o=>{o.interaction instanceof Qa?o.interaction.play():o.interaction instanceof Xf&&o.interaction.dispatch()}),this.actions.Particles.forEach(o=>{o.dispatchBasic()})}},Fb=class extends zr$1{constructor(e,o){super(e),this.eventManager=o,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([a,c])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),c.forEach(d=>{d.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([a,c])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),c.forEach(d=>{d.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:a,isExport:c}=this.eventContext;(c?document:a).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([d,g])=>{d.dispatchEvent({type:"beginEvent",eventName:"Start"}),g.forEach(b=>{b.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([a,c])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),c.forEach(d=>{d.actions.Audio.forEach(g=>{g.interaction instanceof ta&&g.interaction.audioPlayer.play()}),d.actions.Video.forEach(g=>{let b=g.interaction.data.triggerAfter??"autoplay";g.interaction instanceof Qa&&g.interaction.play(b==="autoplay")}),d.actions.Particles.forEach(g=>{g.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([a,c])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),c.forEach(d=>{d.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:a,target:c,reverse:d})=>{var b,j;if(!a||!c)return;let g=oa(a);g&&g==="Start"&&(c instanceof Jt||c.dispatchEvent({type:"beginEvent",eventName:"Start"}),(b=this.eventsPerObject.get(c))==null||b.forEach($=>{$.dispatchUserEvent(d)}),(j=this.eventsAfterPerObject.get(c))==null||j.forEach($=>{$.dispatchUserEvent(d)}))}}connect(){let{sharedAssets:e,page:o}=this.eventContext,a=c=>{var d,g,b,j,$;if((d=c.data)!=null&&d.events.length)for(let{id:_e,data:st}of c.data.events){if(st.disabled||st.type!=="Start")continue;let rt=new QE(_e,st,c,o,e,this.eventManager);(rt.actions.Transition.length||rt.actions.Animation.length||rt.actions.SwitchCamera.length||rt.actions.Create.length||rt.actions.Destroy.length||rt.actions.SceneTransition.length||rt.actions.Reset.length||rt.actions.SetVariable.length||rt.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(c)?(g=this.eventsPerObject.get(c))==null||g.push(rt):this.eventsPerObject.set(c,[rt])),rt.actions.Audio.length&&(this.eventsAfterPerObject.has(c)?(b=this.eventsAfterPerObject.get(c))==null||b.push(rt):this.eventsAfterPerObject.set(c,[rt])),rt.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(c)?(j=this.eventsAfterPerObject.get(c))==null||j.push(rt):this.eventsAfterPerObject.set(c,[rt])),rt.actions.Particles.length&&(this.eventsAfterPerObject.has(c)?($=this.eventsAfterPerObject.get(c))==null||$.push(rt):this.eventsAfterPerObject.set(c,[rt]))}};if(o.traverseEntity(c=>{var d;(c instanceof _r$1||c instanceof mr)&&((d=c.frame)==null||d.traverse(g=>{a(g)})),a(c)}),[...this.eventsAfterPerObject.values()].some(c=>c.length)){if(this.eventManager.activateCount===0){let{domElement:c,isExport:d}=this.eventContext,g=d?document:c;g.addEventListener("pointerdown",this.onMouseDown,{once:!0}),g.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),g.addEventListener("pointerdown",this.onAny),g.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([b,j])=>{b.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([c,d])=>{c.dispatchEvent({type:"beginEvent",eventName:"Start"}),d.forEach(g=>g.dispatch()),c.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:o}=this.eventContext,a=o?document:e;a.removeEventListener("pointerdown",this.onMouseDown),a.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),a.removeEventListener("pointerdown",this.onAny),a.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([c,d])=>{c.removeEventListener("userEvent",this.onUserEvent),d.forEach(g=>g.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,o])=>{e.removeEventListener("userEvent",this.onUserEvent),o.forEach(a=>a.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},kb=class{constructor(e,o,a,c,d,g){this.id=e,this.data=o,this.object=a,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Mr$1(o,o.actions,c,d,g,a),this.target=o.target,this.useToggle=o.runMode==="Toggle"}disconnect(){hr$1(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this?(o.object.currentTransitionEvent=this,o.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(o)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(o=>{o.toggle()}),this.actions.Animation.forEach(o=>{o.toggle()})):(this.actions.Transition.forEach(o=>{this.alreadyPlayedNonTogglingActions.has(o)===!1&&o.play()}),this.actions.Animation.forEach(o=>{o.play()})),this.actions.Reset.forEach(o=>{o.dispatch()}),this.actions.Link.forEach(o=>{o.dispatch()}),this.actions.Reset.forEach(o=>{o.dispatch()}),this.actions.Create.forEach(o=>{o.dispatch()}),this.actions.Destroy.forEach(o=>{o.dispatch(e??!1)}),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch()),this.actions.Audio.forEach(o=>{o.dispatchBasic()}),this.actions.Particles.forEach(o=>{o.dispatchBasic()}),this.actions.Video.forEach(o=>{o.dispatchBasic()}))}},Vb=class extends zr$1{constructor(e,o,a,c,d){super(e),this.sharedVariables=o,this.eventManager=a,this.needsMouse=c,this.needsRaycast=d,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=g=>{this.rafId=window.requestAnimationFrame(this.onFrame);let b=new Date,j=[],$=[];for(let rt=0;rt<this.propertiesToWatch.length;rt++){let{objectId:ut,property:gt,prevValue:yt}=this.propertiesToWatch[rt],wt=this.eventContext.scene.find(ut),Ct=Xv.propertyPaths[gt];if(Ct[0]==="width"||Ct[0]==="height"||Ct[0]==="depth")wt=wt.geometry.userData.parameters[Ct[0]];else for(let Pt=0;Pt<Ct.length;Pt++)wt=wt[Ct[Pt]];yt===null?this.propertiesToWatch[rt].prevValue=wt instanceof _?wt.clone():wt:(wt instanceof _?!wt.equals(yt):yt!==wt)&&($.push({objId:ut,property:gt}),wt instanceof _?this.propertiesToWatch[rt].prevValue.copy(wt):this.propertiesToWatch[rt].prevValue=wt)}for(let rt=0;rt<this.variablesToWatch.length;rt++){let{id:ut,prevValue:gt}=this.variablesToWatch[rt],yt=this.shared.getVariable(ut);yt!==gt&&(j.push(ut),this.variablesToWatch[rt].prevValue=yt)}for(let rt=0;rt<this.dynamicVars.length;rt++){let{id:ut,expectedTime:gt,last:yt,data:wt,timerSeconds:Ct,startValue:Pt}=this.dynamicVars[rt],At=1e3;if((wt.dynamicVariableType==="timer"||wt.dynamicVariableType==="stopwatch")&&wt.format==="number3decimal"?At=1:wt.dynamicVariableType==="counter"?At=wt.updateInterval:wt.dynamicVariableType==="random"&&(At=wt.isStatic?1/0:wt.updateInterval),gt===-1){this.dynamicVars[rt].last=g,this.dynamicVars[rt].expectedTime=g+At;continue}if(!((this.shared.getDynamicVariablePlayState(ut)==="Stopped"||this.shared.getDynamicVariablePlayState(ut)==="Restarted")&&(this.dynamicVars[rt].last=g,this.dynamicVars[rt].expectedTime=g+At,wt.dynamicVariableType==="counter"&&this.shared.getVariable(ut)!==Pt&&(this.shared.updateVariable(ut,Pt),this.eventManager.requestRender()),(wt.dynamicVariableType==="timer"||wt.dynamicVariableType==="stopwatch")&&this.dynamicVars[rt].timerSeconds!==Pt&&(this.dynamicVars[rt].timerSeconds=Pt,this.shared.updateVariable(ut,Mn.getFormattedTimerTime(Pt,wt)),this.eventManager.requestRender()),this.shared.getDynamicVariablePlayState(ut)==="Restarted"&&this.shared.setDynamicVariablePlayState(ut,"Playing"),this.shared.getDynamicVariablePlayState(ut)==="Stopped"))){if(this.shared.getDynamicVariablePlayState(ut)==="Paused"){this.dynamicVars[rt].deltaToExpectedTime===void 0&&(this.dynamicVars[rt].deltaToExpectedTime=Math.max(this.dynamicVars[rt].expectedTime-g,0)),this.dynamicVars[rt].last=g-(At-this.dynamicVars[rt].deltaToExpectedTime),this.dynamicVars[rt].expectedTime=g+this.dynamicVars[rt].deltaToExpectedTime;continue}else this.dynamicVars[rt].deltaToExpectedTime=void 0;if(g>=gt)if(this.dynamicVars[rt].last=g,this.dynamicVars[rt].expectedTime+=At,wt.dynamicVariableType==="random"){let Tt=wt.min+Math.random()*(wt.max-wt.min),kt=wt.decimals;Tt=Math.round(Tt*Math.pow(10,kt))/Math.pow(10,kt),this.shared.updateVariable(ut,Tt),j.push(ut),this.eventManager.requestRender()}else if(wt.dynamicVariableType==="counter"){if(wt.increment===0)continue;let Tt=this.shared.getVariable(ut),kt=this.shared.getDynamicVariableToggleIsForward(ut)??!0,It=this.shared.getVariable(ut)+wt.increment*(kt?1:-1);wt.hasEnd&&(It=wt.increment>0?Me.clamp(It,Pt,wt.endValue):Me.clamp(It,wt.endValue,Pt),It===Pt&&this.shared.setDynamicVariableToggleIsForward(ut,void 0),wt.repeat?It===wt.endValue&&(It=Pt):(It===Pt||It===wt.endValue)&&this.shared.setDynamicVariablePlayState(ut,"Paused")),It!==Tt&&(j.push(ut),this.shared.updateVariable(ut,It),this.eventManager.requestRender())}else if(wt.dynamicVariableType==="time")this.shared.updateVariable(ut,d_(b,wt)),j.push(ut),this.eventManager.requestRender();else{let Tt=Yi.isTextValue(wt.endValue)?ON(wt.endValue.textValue):wt.endValue,kt=this.shared.getDynamicVariableToggleIsForward(ut)??!0,It=Ct+(g-yt)/1e3*(wt.dynamicVariableType==="timer"?-1:1)*(kt?1:-1);It=Math.max(It,0),wt.hasEnd&&(It=wt.dynamicVariableType==="stopwatch"?Me.clamp(It,Pt,Tt):Me.clamp(It,Tt,Pt),It===Pt&&this.shared.setDynamicVariableToggleIsForward(ut,void 0),wt.repeat?Math.abs(It-Tt)<(wt.format==="number3decimal"?1e-4:.1)&&(It=Pt):(Math.abs(It-Pt)<(wt.format==="number3decimal"?1e-4:.1)||Math.abs(It-Tt)<(wt.format==="number3decimal"?1e-4:.1))&&this.shared.setDynamicVariablePlayState(ut,"Paused")),It!==Ct&&(j.push(ut),this.dynamicVars[rt].timerSeconds=It,this.shared.updateVariable(ut,Mn.getFormattedTimerTime(It,wt)),this.eventManager.requestRender())}}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(rt=>{rt.data.variableId==="mouseProperty"&&(rt.dispatch(),this.eventManager.requestRender())}));let _e=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,_e=!0);let st=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,st=!0),this.events.forEach(rt=>{(j.includes(rt.data.variableId)||$.find(ut=>ut.objId===rt.data.objectId&&ut.property===rt.data.property)||rt.data.variableId==="mouseProperty"&&_e||rt.data.variableId==="raycastProperty"&&st)&&(rt.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(g=>{var b;(b=g.data)==null||b.events.filter(j=>j.data.type==="VariableChange"&&!j.data.disabled).forEach(j=>{this.events.push(new KE(g.uuid,j.data,g,e.page,e.sharedAssets,a))})}),this.propertiesToWatch=this.events.filter(g=>g.data.variableId==="objectProperty"&&g.data.objectId!==null).map(g=>({objectId:g.data.objectId,property:g.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:g,data:b})=>{if(!("dynamicVariableType"in b)){this.events.find($=>$.data.variableId===g)&&this.variablesToWatch.push({id:g,prevValue:this.shared.getVariable(g)});return}let j;if(b.dynamicVariableType==="timer"||b.dynamicVariableType==="stopwatch"){let $;if(Yi.isTextValue(b.value)&&Array.isArray(b.value.textValue)){let _e=b.value.textValue;_e.length===3?$=_e[2]+_e[1]*60+_e[0]*3600:$=_e[1]+_e[0]*60}else $=b.value;j=$,this.dynamicVars.push({id:g,last:-1,expectedTime:-1,data:b,timerSeconds:$,startValue:j})}else b.dynamicVariableType==="time"&&this.shared.updateVariable(g,d_(new Date,b)),b.dynamicVariableType==="counter"&&(j=Yi.isTextValue(b.value)?ON(b.value.textValue):b.value),this.dynamicVars.push({id:g,last:-1,expectedTime:-1,data:b,startValue:j})})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let o=0;o<this.dynamicVars.length;o++)this.dynamicVars[o].last+=e,this.dynamicVars[o].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},KE=class{constructor(e,o,a,c,d,g){this.id=e,this.data=o,this.object=a,this.actions=Mr$1(o,o.actions,c,d,g,a)}dispatch(){let e=this.actions;e.Audio.forEach(o=>o.dispatchConditional()),e.Particles.forEach(o=>o.dispatchConditional()),e.Video.forEach(o=>o.dispatchConditional()),e.Create.forEach(o=>o.dispatch()),e.Destroy.forEach(o=>o.dispatch()),e.Reset.forEach(o=>o.dispatch()),e.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this),o.init()}),e.Transition.forEach(o=>o.play()),e.Animation.forEach(o=>o.play()),e.SwitchCamera.forEach(o=>o.play()),e.SceneTransition.forEach(o=>o.dispatch()),e.SetVariable.forEach(o=>o.checkConditions()),e.SetVariable.forEach(o=>o.dispatch()),e.DynamicVariablePlay.forEach(o=>o.dispatch())}dispose(){hr$1(this.actions)}};function ON(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var RN="https://unpkg.com/@splinetool/runtime@1.0.26/build/",SJ="https://unpkg.com/@splinetool/navmesh-wasm@1.0.26/build/",wJ=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${RN}' + 'navmesh.js'),
		fetch('${SJ}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,AJ=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,_J=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,IN=.001,EJ={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},LN,Ot,cn;q2.then(e=>{LN=e,Ot=new e.Vec3,cn=new e.Vec3});var TJ=new _,zb=class{constructor(e=!1,o=!1){this.usePhysics=e,this.isExport=o,this.onPointerDown=a=>{if($e$1.length!==1)return;let{raycaster:c,page:d}=this.eventContext;this.eventContext.updateRaycaster(a);let g=d.raycastWithClones(c);if(g.length!==0){if(this.gameControl){let b=TJ.copy(this.gameControl.colliderWorldPosition);b.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(b,g[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(a,c)=>d=>{var ut,gt,yt,wt,Ct,Pt,At;let g;if(d instanceof Ji)if(d.objectForSample){if(d.objectForSample.dataPatched.physics.fusedBody)return;g=d.object}else return d.object.dataPatched.physics.fusedBody===!0&&d.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(d instanceof Vr)g=d.object;else if(g=d,((ut=g.dataPatched.cloner)==null?void 0:ut.disabled)===!1&&((gt=g.dataPatched.cloner)==null?void 0:gt.hideBase)&&((yt=g.dataPatched.physics)==null?void 0:yt.fusedBody)!==!0)return!0;if(c&&!g.userData.navmesh)return;let b=g.dataPatched;if(!b.visible&&((wt=b.physics)==null?void 0:wt.enabled)!==!0)return!0;d.updateMatrixWorldSVD();let j=Ig(b),$=g.userData.hasDestroy,_e=g.userData.hasDrag,st=!1,rt=!1;for(let Tt of b.events)Tt.data.disabled!==!0&&(Tt.data.type==="GameControl"?st=!0:Tt.data.type==="Follow"&&(rt=!0));if(st||j||rt||$||_e)return!0;if(this.usePhysics&&((Ct=b.physics)==null?void 0:Ct.rigidBody)==="dynamic"){if(this.usePhysics&&((Pt=b.physics)!=null&&Pt.fusedBody))return!0}else if("geometry"in d&&d.geometry&&a.push(go(d.geometry,d.matrixWorld)),this.usePhysics&&((At=b.physics)==null?void 0:At.fusedBody))return d.traverseObject((Tt,kt)=>{var Ft,Nt;if(kt===0)return;let It;if(Tt instanceof Ji)if(Tt.objectForSample){if(Tt.objectForSample.dataPatched.physics.fusedBody)return;It=Tt.object}else return Tt.object.dataPatched.physics.fusedBody===!0&&Tt.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(Tt instanceof Vr)It=Tt.object;else if(It=Tt,(Ft=Tt.dataPatched.cloner)==null?void 0:Ft.hideBase)return!0;let Lt=It.dataPatched;if(!Lt.visible&&((Nt=Lt.physics)==null?void 0:Nt.enabled)!==!0)return!0;"geometry"in Tt&&Tt.geometry&&a.push(go(Tt.geometry,Tt.matrixWorld))}),!0},this.traverseNoPhysics=(a,c)=>d=>{let g;if(d instanceof Ji)return;d instanceof Vr?g=d.object:g=d;let b=g.dataPatched;if(b.physics.enabled==="visibility"?!b.visible:!b.physics.enabled)return!0;if(c&&!g.userData.navmesh)return;let j=d.geometry,$=g.userData.hasDestroy===!0,_e=g.userData.hasDrag===!0;if(Ig(b)||$||_e||g.dataPatched.events.some(st=>st.data.disabled!==!0&&st.data.type==="GameControl"))return!0;j&&a.push(go(j,d.matrixWorld))},this.navmeshWasm=LN,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(o?wJ:AJ)+_J])),this._worker=new Worker(this._workerURL)}init(e,o,a){this.gameControl=o,this.eventContext=a,this.resolution=e.ch,this.setDefaultQueryExtent(new _().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(a.page,e,c=>{this.buildFromNavmeshData(c.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,o,a){o.objects.forEach($=>{var st;let _e=e.scene.find($);_e.traverseEntity(rt=>{rt.userData.navmesh=!0}),(st=_e.cloner)==null||st.traverseObject(rt=>{rt.userData.navmesh=!0})});let c=[],d=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(c,o.zones==="custom");if(e.traverseChildren(d),o.objects.forEach($=>{var st;let _e=e.scene.find($);_e.traverseEntity(rt=>{rt.userData.navmesh=void 0}),(st=_e.cloner)==null||st.traverseObject(rt=>{rt.userData.navmesh=void 0})}),c.length===0)return!1;let g=Js(c),{positions:b,triIndices:j}=qc(g.getAttribute("position"),g.getIndex());return this._worker.postMessage([b,b.length/3,j,j.length,{...EJ,...o}]),this._worker.onmessage=a,!0}createDebugNavGeometry(){let e,o,a=this.navMesh.getDebugNavMesh(),c=a.getTriangleCount(),d=new Uint32Array(c*3),g=new Float32Array(c*3*3);for(e=0;e<c*3;e++)d[e]=e;for(e=0;e<c;e++)for(o=0;o<3;o++){let j=a.getTriangle(e).getPoint(o);g[e*9+o*3+0]=j.x,g[e*9+o*3+1]=j.y,g[e*9+o*3+2]=j.z}let b=new Pe;return b.setIndex(new Xe(d,1)),b.setAttribute("position",new Xe(g,3)),b}getClosestPoint(e){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.getClosestPoint(Ot)}getClosestPointToRef(e,o){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z;let a=this.navMesh.getClosestPoint(Ot);o.set(a.x,a.y,a.z)}getRandomPointAround(e,o){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.getRandomPointAround(Ot,o)}getRandomPointAroundToRef(e,o,a){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z;let c=this.navMesh.getRandomPointAround(Ot,o);a.set(c.x,c.y,c.z)}moveAlong(e,o){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=o.x,cn.y=o.y,cn.z=o.z,this.navMesh.moveAlong(Ot,cn)}moveAlongToRef(e,o,a){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=o.x,cn.y=o.y,cn.z=o.z,this.navMesh.moveAlong(Ot,cn)}computePath(e,o){let a=this.getClosestPoint(o);cn.x=a.x,cn.y=a.y,cn.z=a.z,this.getClosestPoint(e);let c=this.navMesh.computePath(Ot,cn),d=c.getPointCount(),g=[];for(let b=0;b<d;b++){let j=c.getPoint(b);g.push(new _(j.x,j.y,j.z))}return g}createCrowd(e,o){return new ZE(this,e,o)}setDefaultQueryExtent(e){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.setDefaultQueryExtent(Ot)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let o=e.length*e.BYTES_PER_ELEMENT,a=this.navmeshWasm._malloc(o),c=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,a,o);c.set(e);let d=new this.navmeshWasm.NavmeshData;d.dataPointer=c.byteOffset,d.size=e.length,this.navMesh.buildFromNavmeshData(d),this.navmeshWasm._free(c.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),o=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),a=new Uint8Array(e.size);return a.set(o),this.navMesh.freeNavmeshData(e),a}getDefaultQueryExtentToRef(e){let o=this.navMesh.getDefaultQueryExtent();e.set(o.x,o.y,o.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,o,a){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.addCylinderObstacle(Ot,o,a)}addBoxObstacle(e,o,a){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=o.x,cn.y=o.y,cn.z=o.z,this.navMesh.addBoxObstacle(Ot,cn,a)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},ZE=class{constructor(e,o,a){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(o,a,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,o){}addAgent(e,o,a){let c=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;c.radius=o.radius,c.height=o.height,c.maxAcceleration=o.maxAcceleration,c.maxSpeed=o.maxSpeed,c.collisionQueryRange=o.collisionQueryRange,c.pathOptimizationRange=o.pathOptimizationRange,c.separationWeight=o.separationWeight,c.updateFlags=7,c.obstacleAvoidanceType=0,c.queryFilterType=0,c.userData=0;let d=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),c);return this.transforms.push(a),this.agents.push(d),this.reachRadii.push(o.reachRadius?o.reachRadius:o.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new _(0,0,0)),d}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,o){let a=this.crowd.getAgentPosition(e);o.set(a.x,a.y,a.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,o){let a=this.crowd.getAgentVelocity(e);o.set(a.x,a.y,a.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,o){let a=this.crowd.getAgentNextTargetPath(e);o.set(a.x,a.y,a.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,o){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(o.x,o.y,o.z));let a=this.agents.indexOf(e);a>-1&&(this._agentDestinationArmed[a]=!0,this._agentDestination[a].set(o.x,o.y,o.z))}agentTeleport(e,o){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(o.x,o.y,o.z))}updateAgentParameters(e,o){let a=this.crowd.getAgentParameters(e);o.radius!==void 0&&(a.radius=o.radius),o.height!==void 0&&(a.height=o.height),o.maxAcceleration!==void 0&&(a.maxAcceleration=o.maxAcceleration),o.maxSpeed!==void 0&&(a.maxSpeed=o.maxSpeed),o.collisionQueryRange!==void 0&&(a.collisionQueryRange=o.collisionQueryRange),o.pathOptimizationRange!==void 0&&(a.pathOptimizationRange=o.pathOptimizationRange),o.separationWeight!==void 0&&(a.separationWeight=o.separationWeight),this.crowd.setAgentParameters(e,a)}removeAgent(e){this.crowd.removeAgent(e);let o=this.agents.indexOf(e);o>-1&&(this.agents.splice(o,1),this.transforms.splice(o,1),this.reachRadii.splice(o,1),this._agentDestinationArmed.splice(o,1),this._agentDestination.splice(o,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=IN)return;let o=1/60,a=10;{let c=Math.floor(e/o);c>a&&(c=a),c<1&&(c=1);let d=e/c;for(let g=0;g<c;g++)this.crowd.update(d)}for(let c=0;c<this.agents.length;c++){let d=this.agents[c],g=this.getAgentPosition(d);if(this.transforms[c].copy(g),this._agentDestinationArmed[c]){let b=g.x-this._agentDestination[c].x,j=g.z-this._agentDestination[c].z,$=this.reachRadii[c],_e=this._agentDestination[c].y-this.reachRadii[c],st=this._agentDestination[c].y+this.reachRadii[c],rt=b*b+j*j;g.y>_e&&g.y<st&&rt<$*$&&(this.onReachTarget(d,this._agentDestination[c]),this._agentDestinationArmed[c]=!1)}}}setDefaultQueryExtent(e){let o=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(o)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let o=this.crowd.getDefaultQueryExtent();e.set(o.x,o.y,o.z)}getCorners(e){let o,a=this.crowd.getCorners(e),c=a.getPointCount(),d=[];for(o=0;o<c;o++){let g=a.getPoint(o);d.push(new _(g.x,g.y,g.z))}return d}dispose(){this.crowd.destroy()}};function JE(e){let o=!1;return e.scene.objects.forEach(a=>{a.data.type==="Page"&&!o&&a.data.publish.gameControlObject&&Nl.traverseModuleInstances(e,a.id,(c,d,g)=>{for(let b of g)b.data.type==="GameControl"&&b.data.navmesh.enabled&&(o=!0)})}),o}var MJ={type:"change"},BN={type:"changeZoom"},CJ={type:"changePan"},tp={type:"start"},rp={type:"end",changed:!0},PJ={type:"end",changed:!1},$E=new Qe,NN=new z$2,DJ=2*Math.PI,OJ=1e-8,IJ=.01,eT=new _,Ub=new z$2,tT=new _,Gb=new Qe,FN=new ce$1,RJ={type:"requestRender"},ip$2=class extends fr$2{constructor(o,a,c={isPlayMode:!1,isExport:!1}){super(),this.object=o,this.domElement=a,this.options=c,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,ns.DOLLY_ROTATE,ns.PAN],this.offset=new _,this.eye=new _,this.lastPosition=new _,this.lastQuaternion=new Qe,this.current=new z$2,this.overShoot=new z$2,this.overRatio=new z$2,this.spherical=new Fp,this.sphericalDelta=new Fp,this.panOffset=new _,this.panLeftV=new _,this.panUpV=new _,this.panV=new _,this.rotateStart=new z$2,this.rotateEnd=new z$2,this.rotateDelta=new z$2,this.panStart=new z$2,this.panEnd=new z$2,this.panDelta=new z$2,this.dollyStart=new z$2,this.dollyEnd=new z$2,this.dollyDelta=new z$2,this.rotationRangeFactor=new z$2,this.panRangeFactor=new z$2,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=d=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=d.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(tT,Gb,eT),this.offset.copy(tT).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion($E.copy(Gb).invert()),this.panOffset.applyQuaternion($E),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(Gb),this.panOffset.applyQuaternion(Gb)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),tT.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(FN.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(FN));let d=this.spherical.phi%DJ;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(_t.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),d>0&&d>Math.PI||d<0&&d>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let g=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-g,this.sphericalDelta.phi*=1-g}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>IJ||8*(1-this.lastQuaternion.dot(this.object.quaternion))>OJ?(this.dispatchEvent(MJ),this.object.dispatchEvent(RJ),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=d=>{this.enabled!==!1&&(d.pointerType==="touch"||d.pointerType==="pen"&&Ii?this.onPointerDownTouch(d):this.onPointerDownMouse(d),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(tp),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),d.stopPropagation(),d.pointerType==="touch"||d.pointerType==="pen"&&Ii||this.domElement.setPointerCapture(d.pointerId)))},this.onPointerLeave=d=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,eT.subVectors(this.position0,this.target0),this.spherical.setFromVector3(eT),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=d},this.onPointerEnter=d=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Ub.set(d.clientX-this.domElement.clientWidth/2,d.clientY-this.domElement.clientHeight/2):Ub.set(d.clientX-this.pointerLeaveEvent.clientX,d.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Ub).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(NN,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(d.clientX,d.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Ub).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(d.clientX,d.clientY)),this.update()},this.onPointerMove=d=>{this.enabled!==!1&&(this.checkRaycastLock()||(d.pointerType==="touch"||d.pointerType==="pen"&&Ii?this.onPointerMoveTouch(d):this.onPointerMoveMouse(d),d.stopPropagation()))},this.onPointerUp=d=>{this.isPointerDown=!1,$e$1.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),$e$1.length>1&&d.preventDefault(),this.hasChange?this.dispatchEvent(rp):this.dispatchEvent(PJ),this.state=-1,d&&(d.stopPropagation(),d.pointerType==="touch"||d.pointerType==="pen"&&Ii||this.domElement.releasePointerCapture(d.pointerId))},this.onPointerDownMouse=d=>{let g;switch(this.useKeyEvents?g=this.mouseButtons[d.button]:g=this.mouseButtonsPlay[d.button],g){case 0:if(d.altKey===!0&&!d.shiftKey&&!Qp(d)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(d),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(d),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(d),this.state=2;break;case 3:if(Qp(d)||d.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(d),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(d),this.state=0}break;case 5:if(Qp(d)||d.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(d),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(d),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=d=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(d);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(d);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(d);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=d=>{switch($e$1.length>1&&d.preventDefault(),this.touches[$e$1.length-1]){case ns.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case ns.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case ns.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case ns.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=d=>{switch($e$1.length>1&&d.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(d),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(d),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(d),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(d),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=Lc(()=>this.dispatchEvent(rp),33),this.onMouseWheel=d=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&d.preventDefault(),this.dispatchEvent(tp),this.handleMouseWheel(d),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=d=>{if(d.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!Uh)if(d.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(tp),d.scale>this.prevScale?this.dollyIn(this.getZoomScale()):d.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=d.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(rp)},this.onContextMenu=d=>{d.preventDefault()},this.onTouchEnd=d=>{d.preventDefault()},this.onKeyDown=d=>{this.enabled!==!1&&(this.key=d.key,d.key===" "&&this.dispatchEvent(tp))},this.onKeyUp=d=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&d.key==="Alt"&&this.onPointerUp($e$1[0]),d.key===" "&&this.dispatchEvent(rp))},this.onPointerHover=d=>{d.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(d,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(d,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=d=>{d.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(o){o.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(o)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(o){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=o,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let a=this.useWindowEvents?window:this.domElement;a.addEventListener("pointerleave",this.onPointerLeave),a.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(o,a){this.setEnableDampingSpeed(o.enableDamping),this.enablePan=o.enablePan,this.enableZoom=o.enableZoom,this.enableRotate=o.enableRotate,this.rotationLimitsMode=o.rotationLimitsMode,this.thetaIsFree=o.rotationHorizontalOffset.min===o.rotationHorizontalOffset.max&&o.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=o.rotationVerticalOffset.min===o.rotationVerticalOffset.max&&o.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=o.panLimitsMode,this.panSoftLimit=o.panSoftLimit,this.rotationSoftLimit=o.rotationSoftLimit,this.hoverRotatePanMode=o.hoverRotatePanMode,this.hoverRotateDamping=o.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=a==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let c=o.hoverRotatePanStrength/100;this.hoverRotatePanStrength=c**2,this.zoomLimitsEnabled=o.zoomLimitsEnabled,this.minZoom=o.zoomLimits.min,this.maxZoom=Math.max(o.zoomLimits.min,o.zoomLimits.max),this.minDistance=1e3/o.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/o.zoomLimits.min),this.autoRotate=o.autoRotate,this.autoRotateSpeed=o.autoRotateSpeed,this.autoRotateClockwise=o.autoRotateClockwise;let d=this.object.getTarget().applyQuaternion($E.copy(this.object.quaternion).invert());this.minV=-o.panVerticalOffset.min+d.y,this.maxV=o.panVerticalOffset.max+d.y,this.minH=-o.panHorizontalOffset.min+d.x,this.maxH=o.panHorizontalOffset.max+d.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=la(this.spherical.phi-o.rotationVerticalOffset.min),this.maxPhi=la(this.spherical.phi+o.rotationVerticalOffset.max),this.minTheta=la(la(this.spherical.theta)-o.rotationHorizontalOffset.min),this.maxTheta=la(la(this.spherical.theta)+o.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,o.orbitTouches===1&&(this.touches[0]=ns.ROTATE),o.panTouches===1&&(this.touches[0]=ns.PAN),o.orbitTouches===2&&(this.touches[1]=ns.DOLLY_ROTATE),o.panTouches===2&&(this.touches[1]=ns.DOLLY_PAN),o.orbitTouches===3&&(this.touches[2]=ns.ROTATE),o.panTouches===3&&(this.touches[2]=ns.PAN),this.isTouchZoom=o.isTouchZoom,this.resetHoverEffectOnPointerLeave=o.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let o=this.useWindowEvents?window:this.domElement;o.addEventListener("pointerleave",this.onPointerLeave),o.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(o,a,c,d,g,b,j,$){this.overShoot.set(0,0);let _e,st,rt;o instanceof _?(_e=o.x,st=o.y,this.current.set(this.target.x,this.target.y),rt=!0):(_e=o.theta,st=o.phi,this.current.set(la(this.spherical.theta),la(this.spherical.phi)),rt=!1),c===0&&(this.current.x+=_e,this.current.y+=st),(a===3||a===2)&&(!rt&&this.isThetaFlipped?this.current.x>d&&this.current.x<0?this.overShoot.x=d-this.current.x:this.current.x<g&&this.current.x>0&&(this.overShoot.x=g-this.current.x):this.current.x>d?this.overShoot.x=d-this.current.x:this.current.x<g&&(this.overShoot.x=g-this.current.x)),(a===3||a===1)&&(this.current.y>b?this.overShoot.y=b-this.current.y:this.current.y<j&&(this.overShoot.y=j-this.current.y)),rt||(this.overShoot.x=la(this.overShoot.x),this.overShoot.y=la(this.overShoot.y)),c!==0?(this.overRatio.copy(this.overShoot).divide($),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),c===1&&(this.overRatio.x=kN(Math.abs(this.overRatio.x)),this.overRatio.y=kN(Math.abs(this.overRatio.y))),this.isPointerDown||c===1?c===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(_e*this.overShoot.x<0&&!this.thetaIsFree&&(_e*=1-this.overRatio.x),st*this.overShoot.y<0&&!this.phiIsFree&&(st*=1-this.overRatio.y)):c===2&&(!rt&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||rt&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(_e=this.overShoot.x*.05),this.phiIsFree||(st=this.overShoot.y*.05),rt?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):rt?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(_e+=this.overShoot.x,st+=this.overShoot.y),o instanceof _?(o.x=_e,o.y=st):(this.thetaIsFree||(o.theta=_e),this.phiIsFree||(o.phi=st))}setEnableDampingSpeed(o){this.enableDamping=o,this.rotateSpeed=o===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(o){this.sphericalDelta.theta-=o}rotateUp(o){this.sphericalDelta.phi-=o}panLeft(o,a){this.panLeftV.setFromMatrixColumn(a,0),this.panLeftV.multiplyScalar(-o),this.panOffset.add(this.panLeftV)}panUp(o,a){this.panUpV.setFromMatrixColumn(a,1),this.panUpV.multiplyScalar(o),this.panOffset.add(this.panUpV)}pan(o,a){let c=this.domElement;if(c&&this.object.isPerspectiveCamera){let d=this.object.position;this.panV.copy(d).sub(this.target);let g=this.panV.length();g*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*o*g/c.clientHeight,this.object.matrixWorld),this.panUp(2*a*g/c.clientHeight,this.object.matrixWorld)}else c&&this.object.isOrthographicCamera&&(this.panLeft(o*(this.object.right-this.object.left)/this.object.zoom/c.clientWidth,this.object.matrixWorld),this.panUp(a*(this.object.top-this.object.bottom)/this.object.zoom/c.clientHeight,this.object.matrixWorld));this.dispatchEvent(CJ)}dollyOut(o){this.object.isPerspectiveCamera?this.scale/=o:this.object.isOrthographicCamera&&(this.object.zoom*=o,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BN)}dollyIn(o){this.object.isPerspectiveCamera?this.scale*=o:this.object.isOrthographicCamera&&(this.object.zoom/=o,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BN)}zoomOut(o=this.getZoomScale()){this.dispatchEvent(tp),this.dollyOut(o),this.dispatchEvent(rp)}zoomIn(o=this.getZoomScale()){this.dispatchEvent(tp),this.dollyIn(o),this.dispatchEvent(rp)}handleMouseDownRotate(o){this.rotateStart.set(o.clientX,o.clientY)}handleMouseDownDolly(o){this.dollyStart.set(o.clientX,o.clientY)}handleMouseDownPan(o){this.panStart.set(o.clientX,o.clientY)}handleMouseMoveRotate(o,a=1){o.movementX!==void 0?this.rotateDelta.set(o.movementX,o.movementY):(this.rotateEnd.set(o.clientX,o.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*a).rotateAround(NN,-this.object.angleOffsetFromUp);let c=this.domElement,d=this.useWindowEvents?window.innerHeight:c.clientHeight,g=2*Math.PI*this.rotateDelta.x/d,b=2*Math.PI*this.rotateDelta.y/d;this.rotateLeft(g),this.rotateUp(b),this.update()}handleMouseMoveDolly(o){this.dollyEnd.set(o.clientX,o.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(o,a=1){o.movementX!==void 0?this.panDelta.set(o.movementX,o.movementY):(this.panEnd.set(o.clientX,o.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*a),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(o){if(F2===!1&&Qp(o)===!1&&k2(o)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-o.deltaX,-o.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),o.altKey?this.pan(0,this.panDelta.y):o.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;o.deltaY===0?o.deltaX<0?this.dollyIn(this.getZoomScale()):o.deltaX>0&&this.dollyOut(this.getZoomScale()):o.deltaY<0?this.dollyIn(this.getZoomScale()):o.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if($e$1.length===2){let o=.5*($e$1[0].pageX+$e$1[1].pageX),a=.5*($e$1[0].pageY+$e$1[1].pageY);this.rotateStart.set(o,a)}else this.rotateStart.set($e$1[0].pageX,$e$1[0].pageY)}handleTouchStartPan(){if($e$1.length===2){let o=.5*($e$1[0].pageX+$e$1[1].pageX),a=.5*($e$1[0].pageY+$e$1[1].pageY);this.panStart.set(o,a)}else this.panStart.set($e$1[0].pageX,$e$1[0].pageY)}handleTouchStartDolly(){let o=$e$1[0].pageX-$e$1[1].pageX,a=$e$1[0].pageY-$e$1[1].pageY,c=Math.sqrt(o*o+a*a);this.dollyStart.set(0,c)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(o){if($e$1.length===2){let c=_v(o),d=.5*(o.pageX+c.x),g=.5*(o.pageY+c.y);this.rotateEnd.set(d,g)}else{if(o.pointerId!==$e$1[0].pointerId)return;this.rotateEnd.set(o.pageX,o.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let a=this.domElement;a&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/a.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/a.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(o){if($e$1.length===2){let a=_v(o),c=.5*(o.pageX+a.x),d=.5*(o.pageY+a.y);this.panEnd.set(c,d)}else{if(o.pointerId!==$e$1[0].pointerId)return;this.panEnd.set(o.pageX,o.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(o){let a=_v(o),c=o.pageX-a.x,d=o.pageY-a.y,g=Math.sqrt(c*c+d*d);this.dollyEnd.set(0,g),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(o){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(o),this.enablePan&&this.handleTouchMovePan(o)}handleTouchMoveDollyRotate(o){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(o),this.enableRotate&&this.handleTouchMoveRotate(o)}checkRaycastLock(){var o;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let a=(o=this.options)==null?void 0:o.showCameraLock;return a&&a(),!0}}else return!1}};function la(e){let o=Math.PI*2;for(;e<=-Math.PI;)e+=o;for(;e>Math.PI;)e-=o;return e}function kN(e){return 1-Math.pow(1-e,4)}var Rg=class{constructor(e,o,a,c,d,g){this.id=e,this.data=o,this.object=a,this.page=c,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Mr$1(o,o.actions,c,d,g,a),this.target=o.target,this.useToggle=o.runMode==="Toggle",this.triggeringObjects=o.triggeringObjects.map(b=>c.scene.find(b))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(o=>o===e||o.isAncestorOf(e.uuid)||e.isAncestorOf(o.uuid))}disconnect(){hr$1(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{this.alreadyPlayedNonTogglingActions.has(e)===!1&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}},jt;Q2.then(e=>jt=e);var _i=new _,vo=new Qe,hc=new _,rT=new or$1(0,0,0,"YXZ"),VN=new or$1(0,0,0,"XYZ"),xo=new _,iT=new _,nT=new _(1,1,1),np=new Qe,jb=new ce$1,zN=new ce$1,LJ={type:"updateMatrix"},UN=new Qe,sT=new Br,_b={type:"beginEvent",eventName:"Collision"},BJ={type:"beginEvent",eventName:"Trigger"};function GN(e){if(Nl.physicsEnabled(e.scene.objects))return!0;let o=!1;return e.scene.objects.traverse((a,c)=>{if(c.events){if(Array.isArray(c.events)){for(let d of c.events)if(d.data.disabled!==!0&&d.data.type==="GameControl"&&d.data.collisionEnabled){o=!0;break}}else for(let d of Object.values(c.events))if(d.disabled!==!0&&d.type==="GameControl"&&d.collisionEnabled){o=!0;break}}}),o}var Ig=e=>e.states.some(o=>o.data.position!==void 0||o.data.rotation!==void 0||o.data.hiddenMatrix!==void 0||o.data.cloner!==void 0||o.data.pathSnapping!==void 0),Hb=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=o=>{if(o.bodyType()!==jt.RigidBodyType.Dynamic)return;o.isSleeping()||this.nActiveRigidBodies++;let[a,c,d]=this.rigidBodyToMesh.get(o.handle);if(_i.copy(o.translation()).multiplyScalar(this.pixelsPerMeter),vo.copy(o.rotation()),a.matrixWorld.compose(_i,vo,c),a.hasNonUniformScale&&a.matrixWorld.multiply(a.shearScale),a.dispatchEvent(LJ),d){let g=a.cloner;if(g&&g.objectForSample===void 0){g.matrixWorld.copy(a.matrixWorld);for(let b of g.children)b.updateMatrixWorld(!0)}for(let b of a.children)b.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(o,a,c)=>{var b,j,$,_e;if(c===!1)return;let d,g;if(this.sensorToTriggerEvent[o]?(d=this.sensorToTriggerEvent[o],g=this.sharedGameControlGlobals.colliderToEntity.get(a)):this.sensorToTriggerEvent[a]&&(d=this.sensorToTriggerEvent[a],g=this.sharedGameControlGlobals.colliderToEntity.get(o)),d&&g&&d.isValidTriggeringObject(g)){d.dispatch();return}for(let st=this.sharedGameControlGlobals.createdObjects.length-1;st>=0;st--){let rt=this.sharedGameControlGlobals.createdObjects[st];if(rt.userData.hasCollisionDestroy&&(((b=rt.rigidBody)==null?void 0:b.collider(0).handle)===o||((j=rt.rigidBody)==null?void 0:j.collider(0).handle)===a)){this.sharedGameControlGlobals.createdObjects.splice(st,1),rt.removeFromParent(),requestAnimationFrame(()=>{var ut;return(ut=this.sharedGameControlGlobals.rapierWorld)==null?void 0:ut.removeRigidBody(rt.rigidBody)});break}}if((($=this.gameControl)==null?void 0:$.object)===this.sharedGameControlGlobals.colliderToEntity.get(o)){let st=this.sharedGameControlGlobals.colliderToEntity.get(a),rt=this.sharedGameControlGlobals.entityToCollisionEvents[st.uuid];if(rt===void 0)return;for(let ut of rt)ut.data.target==="character"&&this.dispatchCollisionEvent(ut,st,a)}else if(((_e=this.gameControl)==null?void 0:_e.object)===this.sharedGameControlGlobals.colliderToEntity.get(a)){let st=this.sharedGameControlGlobals.colliderToEntity.get(o),rt=this.sharedGameControlGlobals.entityToCollisionEvents[st.uuid];if(rt===void 0)return;for(let ut of rt)ut.data.target==="character"&&this.dispatchCollisionEvent(ut,st,o)}else{let st=this.sharedGameControlGlobals.colliderToEntity.get(o),rt=this.sharedGameControlGlobals.entityToCollisionEvents[st.uuid];if(rt!==void 0)for(let yt of rt)yt.data.target==="scene"&&this.dispatchCollisionEvent(yt,st,o);let ut=this.sharedGameControlGlobals.colliderToEntity.get(a),gt=this.sharedGameControlGlobals.entityToCollisionEvents[ut==null?void 0:ut.uuid];if(gt!==void 0)for(let yt of gt)yt.data.target==="scene"&&this.dispatchCollisionEvent(yt,ut,a)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=IE,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(o=>{o.addEventListener("connected",a=>{"gamepad"in a.data&&"axes"in a.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(a.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var a,c;let o=e.dataPatched;for(let d of o.events){if(d.data.disabled===!0)continue;let g=(c=(a=d.data.actions)==null?void 0:a.find(b=>b.data.type==="Destroy"))==null?void 0:c.data;if(g)for(let b of g.objects){let j=this.page.scene.find(b);j&&(j.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let o=e.dataPatched;for(let a of o.events)if(!(a.data.disabled===!0||a.data.type!=="DragDrop"))for(let c of a.data.objects){let d=this.page.scene.find(c);d&&(d.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(o=>{var _e,st;let a,c=o instanceof iu,d=o instanceof uu;if(o instanceof Ji||c||d)return;o instanceof Vr?a=o.object:a=o;let g=a.dataPatched;if(((_e=g.physics)==null?void 0:_e.enabled)==="visibility"?!g.visible:!((st=g.physics)!=null&&st.enabled))return!0;let b=o.geometry,j=a.userData.hasDestroy===!0,$=a.userData.hasDrag===!0;if(Ig(g)||j||$||a.dataPatched.events.some(rt=>rt.data.disabled!==!0&&rt.data.type==="GameControl"))return o.updateMatrixWorldSVD(),this.addBoundsTree(o),!0;b&&e.push(go(b,o.matrixWorld))}),e.length>0){let o=Js(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Vo(o)}}addRigidBody(e,o,a){let c=[],d="geometry"in e?e.geometry:void 0,g=o.dataPatched;if((d==null?void 0:d.getAttribute("position"))!==void 0&&c.push(go(d,e.shearScale)),g.physics.fusedBody){let b=this.gatherChildrenGeom(e,c);e.traverseObject(b),e.children.forEach($=>$.updateMatrixWorld(!0));let j=e.cloner;j&&j.objectForSample===void 0&&g.physics.rigidBody==="dynamic"&&(j.traverseObject(b),j.children.forEach($=>$.updateMatrixWorld(!0)))}if(c.length>0){let b,j=!a.fromCreate&&g.physics.rigidBody==="dynamic"||a.fromCreate&&a.dynamic;j?(b=jt.RigidBodyDesc.dynamic(),b.setLinearDamping(g.physics.damping).setAngularDamping(g.physics.damping).setAdditionalMass(1e-9).setGravityScale(g.physics.gravityScale).enabledRotations(...g.physics.enabledRotation).enabledTranslations(...g.physics.enabledTranslation)):(a.hasTransformAnim||a.hasFollow||a.hasDrag)&&!a.fromCreate?(b=jt.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):b=jt.RigidBodyDesc.fixed();let $=Js(c);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(_i,vo,hc),e.position0=_i.clone().divideScalar(this.pixelsPerMeter),e.rotation0=vo.clone(),_i.divideScalar(this.pixelsPerMeter),b.setTranslation(_i.x,_i.y,_i.z).setRotation(vo),d?$==null||$.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):$==null||$.scale(hc.x/this.pixelsPerMeter,hc.y/this.pixelsPerMeter,hc.z/this.pixelsPerMeter);let _e=this.sharedGameControlGlobals.rapierWorld.createRigidBody(b);j&&this.rigidBodyToMesh.set(_e.handle,[e,hc.clone(),g.physics.fusedBody]);let st=!(g.geometry===void 0||g.geometry.type==="SubdivGeometry"||g.geometry.type==="NonParametricGeometry"||g.geometry.type==="BooleanGeometry"||g.geometry.type==="VectorGeometry"||g.geometry.type==="StarGeometry"||g.geometry.type==="RectangleGeometry"||g.geometry.type==="EllipseGeometry"||g.geometry.type==="TriangleGeometry"||g.geometry.type==="TorusGeometry"||g.geometry.type==="HelixGeometry");try{this.addCollider(_e,g.physics,$,o,st)}catch{try{this.addCollider(_e,g.physics,$,o,!1)}catch(rt){console.error(rt)}}e.rigidBody=_e}}addBoundsTree(e){var a,c;let o=[];if(((a=e.geometry)==null?void 0:a.getAttribute("position"))!==void 0&&((c=e.geometry)==null?void 0:c.getAttribute("position").count)>0&&o.push(go(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,o)),e.children.forEach(d=>d.updateMatrixWorld(!0)),o.length>0){let d=Js(o,!1);e.bvhGeometry=d,e.bvhGeometry.boundsTree=new Vo(d),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,o,a,c,d=!0){var j,$;if((a==null?void 0:a.getAttribute("position").count)===0||((j=a==null?void 0:a.getIndex())==null?void 0:j.count)===0)return;let g;a&&(o.colliderType==="trimesh"?g=jt.ColliderDesc.trimesh(a.getAttribute("position").array,a.getIndex().array):g=jt.ColliderDesc.convexMesh(a.getAttribute("position").array,d?a.getIndex().array:void 0)),g.setFrictionCombineRule(jt.CoefficientCombineRule.Average).setRestitutionCombineRule(jt.CoefficientCombineRule.Average).setDensity(o.density).setFriction(o.friction).setRestitution(o.restitution);let b=this.sharedGameControlGlobals.rapierWorld.createCollider(g,e);this.sharedGameControlGlobals.colliderToEntity.set(b.handle,c),($=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid])!=null&&$.some(_e=>_e.target==="scene")&&b.setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,o){return(a,c)=>{var j;if(c===0)return;let d;if(a instanceof Ji)if(a.objectForSample){if(a.objectForSample.dataPatched.physics.fusedBody)return;d=a.object}else return a.object.dataPatched.physics.fusedBody===!0&&a.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(a instanceof Vr)d=a.object;else if(d=a,(j=d.dataPatched.cloner)==null?void 0:j.hideBase)return!0;let g=d.dataPatched;if(g.physics.enabled==="visibility"?!g.visible:!g.physics.enabled)return!0;c===1?e.hasNonUniformScale?a.matrixWorld.multiplyMatrices(e.shearScale,a.hiddenMatrix):a.matrixWorld.copy(a.hiddenMatrix):a.matrixWorld.multiplyMatrices(a.parent.matrixWorld,a.hiddenMatrix),a.matrixWorld.multiply(a.matrix);let b=a.geometry;(b==null?void 0:b.getAttribute("position"))!==void 0&&o.push(go(b,a.matrixWorld))}}activate(e){var ut,gt;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let o=this.page.playCamera,a=!1,c=5,d=8,g=9,b="drag",j=this.page.data.publish.gameControlObject,$=j!==null?this.page.find(j):null,_e=null;if($)for(let yt of $.data.events){if(yt.data.disabled||yt.data.type!=="GameControl")break;let wt=$;for(;this.usePhysics&&((ut=wt=wt.parent)==null?void 0:ut.parent)!==null&&!((gt=wt.data.physics)!=null&&gt.fusedBody););yt.data.collisionEnabled&&(this.needsCollisionDetection=!0),_e===null&&(_e=yt.data)}if(this.page.traverseEntity(yt=>{for(let wt of yt.dataPatched.events)if(wt.data.disabled===!1&&wt.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),$&&_e){a=a||_e.camera===o.uuid||$.uuid===o.uuid;let yt=new Eg($,this.renderer.domElement,_e,this.eventContext.page.data.globalPhysics,this,$.uuid!==o.uuid&&_e.camera===o.uuid,o,this.page,this.sharedAssets);this.gameControl=yt,c=_e.joystickPosLoc,d=_e.joystickRotLoc,g=_e.jumpTouchButtonLoc,b=_e.rotByTouch,Ii&&_e.touchControl&&(this.joystickToGameControls[c]="pos",_e.moveMode==="walk"&&(this.joystickToGameControls[g]="jmp"),b==="joystick"&&(this.joystickToGameControls[d]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let yt=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new zb(this.usePhysics,this.isExport);let wt;yt.collider.type==="sphere"?wt=yt.collider.radius*2:wt=yt.collider.height,wt=Math.floor(wt/yt.navmesh.ch-1),this.navigationMeshWrapper.init({...yt.navmesh,walkableHeight:wt},this.gameControl,this.eventContext)}}if(a===!1){let{enableRotate:yt,enablePan:wt,enableZoom:Ct,autoRotate:Pt,hoverRotatePanMode:At}=this.eventManager.publish.orbitControls;(yt||wt||Ct||Pt||At!==0)&&(this.orbitControls=new ip$2(o,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let st=this.renderer.domElement.width/this.renderer.getPixelRatio(),rt=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((yt,wt)=>{let Ct=document.body.appendChild(document.createElement("div")),[Pt,At,Tt]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[wt],kt=(st-5*Pt)/4+Pt,It={},Lt=yt==="jmp",Ft=Lt?0:Pt;wt<10?(wt<5?It.top=Ft/2:It.bottom=Ft/2,It.left=Ft/2+wt%5*kt):wt===10?(It.left=Ft/2,It.top=rt/2):(It.right=Ft/2,It.top=rt/2),It.top?It.top-=At[1]:It.bottom+=At[1],It.left?It.left+=At[0]:It.right-=At[0];for(let dr in It)It[dr]+="px";if(Lt){let dr=Ct.appendChild(document.createElement("div"));Object.assign(dr.style,It,{position:"absolute",width:Pt+"px",height:Pt+"px",backgroundColor:`rgba(255,255,255,${Tt==="show"?.4:0})`,zIndex:"9999",borderRadius:Pt+"px",border:Tt==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let hs=Pt/16*16*.4;Tt==="show"&&(dr.innerHTML=`
						<svg width="${hs}" height="${Pt*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),dr.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),dr.addEventListener("touchend",us=>us.preventDefault()),this.joysticks[wt]=[void 0,Ct];return}let Nt={zone:Ct,mode:"static",position:It,size:Pt};Tt==="hide"&&(Nt.restOpacity=0);let Ht=xB.create(Nt);Ht.on("move",(dr,hs)=>{let us=this.gameControl;yt==="pos"?hs.force<.2?us.moveForce=0:(us.movementState.movePosZ=Math.sin(-hs.angle.radian),us.movementState.movePosX=Math.cos(-hs.angle.radian),hs.force>1.2?us.movementState.run=1:us.movementState.run=0,hs.force<.3?us.moveForce=(hs.force-.2)/.1:us.moveForce=1):yt==="rot"&&(hs.force<.2?us.rotForce=0:(us.movementState.rotPosX=hs.vector.y,us.movementState.rotPosY=-hs.vector.x,hs.force<.3?us.rotForce=(hs.force-.2)/.1:us.rotForce=1)),this.requestRender()}),Ht.on("end",(dr,hs)=>{let us=this.gameControl;yt==="pos"?(us.movementState.movePosZ=0,us.movementState.movePosX=0,us.moveForce=1):yt==="rot"&&(us.movementState.rotPosX=0,us.movementState.rotPosY=0,us.rotForce=1)}),this.joysticks[wt]=[Ht,Ct]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(yt=>yt.disabled=!1)},80)}initPhysics(){var b;(b=this.sharedGameControlGlobals.rapierWorld)==null||b.free(),this.sharedGameControlGlobals.rapierWorld=new jt.World(new jt.Vector3(0,this.gravity,0)),this.events=new jt.EventQueue(!0);let e=[],o=[];if(this.page.traverseChildren(j=>{var Pt,At,Tt,kt;let $;if(j instanceof Ji)if(j.objectForSample){if(j.objectForSample.dataPatched.physics.fusedBody)return;$=j.object}else return j.object.dataPatched.physics.fusedBody===!0&&j.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(j instanceof Vr)$=j.object;else{if(j instanceof uu||j instanceof iu)return;if($=j,((Pt=$.dataPatched.cloner)==null?void 0:Pt.disabled)===!1&&((At=$.dataPatched.cloner)==null?void 0:At.hideBase)&&((Tt=$.dataPatched.physics)==null?void 0:Tt.fusedBody)!==!0)return!0}let _e=$.dataPatched,st;for(let It of _e.events)It.data.disabled!==!0&&It.data.type==="GameControl"&&(st=It.data);if(!_e.physics||(_e.physics.enabled==="visibility"?!_e.visible:!_e.physics.enabled))return!0;j.updateMatrixWorldSVD();let rt=Ig(_e),ut=!1,gt=$.userData.hasDestroy,yt=$.userData.hasDrag,wt=!1;for(let It of _e.events)if(It.data.disabled!==!0){if(It.data.type==="Collision"){ut=!0;let Lt=new kb(It.id,It.data,$,this.page,this.sharedAssets,this.eventManager);Lt.disabled=!0,this.collisionEvents.push(Lt),this.sharedGameControlGlobals.entityToCollisionEvents[$.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[$.uuid].every(Ft=>Ft.id!==It.id)?this.sharedGameControlGlobals.entityToCollisionEvents[$.uuid].push(Lt):this.sharedGameControlGlobals.entityToCollisionEvents[$.uuid]=[Lt]}else if(It.data.type==="Follow"){wt=!0;let Lt=It.data.target;j.traverseVisible(Ft=>{Ft.userData.isFollowingObj=Lt})}}_e.physics.rigidBody==="dynamic"&&_e.physics.fusedBody===!1&&(j.matrixWorldFusedFalse=j.matrixWorld.clone());let Ct=j.geometry;if(st!==void 0){let It=jt.RigidBodyDesc.kinematicPositionBased();(j.hasNonUniformScale?j.matrixWorldRigid:j.matrixWorld).decompose(_i,vo,hc),j.position0=_i.clone().divideScalar(this.pixelsPerMeter),j.rotation0=vo.clone(),_i.divideScalar(this.pixelsPerMeter),It.setTranslation(_i.x,_i.y,_i.z).setRotation(vo);let Lt=this.sharedGameControlGlobals.rapierWorld.createRigidBody(It);j.rigidBody=Lt;let Ft;st.collider.type==="sphere"?Ft=jt.ColliderDesc.ball(st.collider.radius/this.pixelsPerMeter):st.collider.type==="capsule"?Ft=jt.ColliderDesc.capsule((st.collider.height/2-st.collider.radius)/this.pixelsPerMeter,st.collider.radius/this.pixelsPerMeter):Ft=jt.ColliderDesc.cuboid(st.collider.width/this.pixelsPerMeter/2,st.collider.height/this.pixelsPerMeter/2,st.collider.depth/this.pixelsPerMeter/2),Ft.setFrictionCombineRule(jt.CoefficientCombineRule.Average).setRestitutionCombineRule(jt.CoefficientCombineRule.Average).setDensity(_e.physics.density).setFriction(_e.physics.friction).setRestitution(_e.physics.restitution);let Nt=this.sharedGameControlGlobals.rapierWorld.createCollider(Ft,Lt);this.sharedGameControlGlobals.colliderToEntity.set(Nt.handle,$),_i.fromArray(st.collider.position).multiply(hc.setFromMatrixScale($.matrixWorld)).divideScalar(this.pixelsPerMeter),Nt.setTranslationWrtParent(_i);let Ht=new Qe().setFromEuler(new or$1().setFromVector3(new _().fromArray(st.collider.rotation)));Nt.setRotationWrtParent(Ht),Nt.setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs($,!0)}else _e.physics.rigidBody==="dynamic"||rt||wt||gt||yt||ut?(this.addRigidBody(j,$,{hasFollow:wt,hasTransformAnim:rt,hasDrag:yt}),this.generateSensorColliderDescs($,_e.physics.fusedBody)):(Ct&&e.push(go(Ct,j.matrixWorld)),_e.physics.fusedBody&&j.traverseObject((It,Lt)=>{var dr;if(Lt===0)return;let Ft;if(It instanceof Ji)if(It.objectForSample){if(It.objectForSample.dataPatched.physics.fusedBody)return;Ft=It.object}else return It.object.dataPatched.physics.fusedBody===!0&&It.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(It instanceof Vr)Ft=It.object;else if(Ft=It,(dr=Ft.dataPatched.cloner)==null?void 0:dr.hideBase)return!0;let Nt=Ft.dataPatched;if(Nt.physics.enabled==="visibility"?!Nt.visible:!Nt.physics.enabled)return!0;let Ht=It.geometry;(Ht==null?void 0:Ht.getAttribute("position"))!==void 0&&e.push(go(Ht,It.matrixWorld))}),this.generateSensorColliderDescs($,_e.physics.fusedBody,o));if(((kt=_e.physics)==null?void 0:kt.fusedBody)===!0||st)return!0}),e.length===0)return;let a=Js(e);a.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let c=jt.RigidBodyDesc.fixed(),d=this.sharedGameControlGlobals.rapierWorld.createRigidBody(c),g=jt.ColliderDesc.trimesh(a.getAttribute("position").array,a.getIndex().array).setFrictionCombineRule(jt.CoefficientCombineRule.Multiply).setRestitutionCombineRule(jt.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(g,d);for(let[j,$]of o){let _e=this.sharedGameControlGlobals.rapierWorld.createCollider(j,d);this.sensorToTriggerEvent[_e.handle]=$}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let o of e.dataPatched.events)if(o.data.type==="Trigger"&&o.data.disabled!==!0){let a=new Rg(o.id,o.data,e,this.page,this.sharedAssets,this.eventManager),c=new ce$1().compose(xo.fromArray(o.data.position),np.setFromEuler(VN.fromArray(o.data.rotation)),nT);if(o.data.triggerZone==="box"){let d=new Wt;d.min.fromArray(o.data.size).multiplyScalar(-.5),d.max.fromArray(o.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([d,c,e,a])}else this.sharedGameControlGlobals.triggers.push([o.data.radius,c,e,a])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,o,a,c;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(d=>{let g=d;g.matrixWorldFusedFalse&&(g.matrixWorldFusedFalse=void 0),g.rigidBody&&(g.rigidBody=void 0),g.position0&&(g.position0=void 0),g.rotation0&&(g.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(o=this.gameControl)==null||o.reset(),(a=this.gameControl)==null||a.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([d,g])=>{d==null||d.destroy(),g.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(c=this.navigationMeshWrapper)==null||c.dispose(),this.navigationMeshWrapper=void 0;for(let d of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))d.forEach(g=>g.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,o,a){if(!this.isEnabled)return!0;let c=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(c=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,c=!1):this.initializationCounter===2&&this.gameControl&&(c=!this.gameControl.update(e,o,a)&&c),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let d=.016666666666666666;if(e===0)c=this.stepPhysics()&&c;else{let g=e/1e3;g<d&&g>d*.55&&(g=d),this.accumulator+=g;let b=performance.now(),j=0,$=6;for(;this.accumulator>=d&&j<$&&(c=this.stepPhysics()&&c,this.accumulator-=d,j++,!(performance.now()-b>d*1e3)););this.accumulator=this.accumulator%d}}return c}stepPhysics(){var e;for(let o of this.sharedGameControlGlobals.entitiesWithTransformAnim){(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(_i,vo,hc),rT.setFromQuaternion(vo);let a=o;a.prevR===void 0?(a.prevR=rT.clone(),a.prevT=_i.clone()):(a.prevR.copy(rT),a.prevT.copy(_i)),o.rigidBody&&(o.rigidBody.setNextKinematicTranslation(_i.divideScalar(this.pixelsPerMeter)),o.rigidBody.setNextKinematicRotation(vo))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,o,a){var g;let c=((g=this.sharedGameControlGlobals.rapierWorld)==null?void 0:g.getCollider(a))._parent,d;if(o.cloner){for(let b of o.cloner.children)if(b.rigidBody===c){d=b;break}}e.dispatch(d),o.dispatchEvent(_b)}updateUseWindowEvents(e){var o;(o=this.orbitControls)==null||o.updateUseWindowEvents(e)}generateSensorColliderDescs(e,o,a){let c=zN.copy(e.matrixWorld).invert();e.traverseEntity((d,g)=>{if(o===!1&&g===1)return!0;for(let b of d.dataPatched.events)if(b.data.type==="Trigger"&&b.data.disabled!==!0){let j=new Rg(b.id,b.data,d,this.page,this.sharedAssets,this.eventManager),$;if(b.data.triggerZone==="box"?$=jt.ColliderDesc.cuboid(...b.data.size.map(_e=>_e/(2*this.pixelsPerMeter))):$=jt.ColliderDesc.ball(b.data.radius/this.pixelsPerMeter),$.setDensity(0).setSensor(!0).setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS),xo.fromArray(b.data.position),np.setFromEuler(VN.fromArray(b.data.rotation)),jb.compose(xo,np,nT).premultiply(d.matrixWorld),a?(jb.decompose(xo,np,iT),$.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_FIXED|jt.ActiveCollisionTypes.DYNAMIC_FIXED)):(jb.premultiply(c).decompose(xo,np,iT),e.rigidBody.bodyType()===jt.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===jt.RigidBodyType.Fixed?$.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_FIXED|jt.ActiveCollisionTypes.DYNAMIC_FIXED):$.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_KINEMATIC|jt.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),xo.divideScalar(this.pixelsPerMeter),$.setTranslation(xo.x,xo.y,xo.z),$.setRotation(np),a)a.push([$,j]);else{let _e=this.sharedGameControlGlobals.rapierWorld.createCollider($,e.rigidBody);this.sensorToTriggerEvent[_e.handle]=j}}})}checkTrigger(){let e;for(let o=0;o<this.sharedGameControlGlobals.triggers.length;o++){let[a,c,d,g]=this.sharedGameControlGlobals.triggers[o];for(let b=0;b<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;b++){let j=this.sharedGameControlGlobals.entitiesWithTransformAnim[b];if(d===j||g.isValidTriggeringObject(vt.is(j)?j:j.object)===!1)continue;let $=zN.copy(d.matrixWorld).decompose(xo,UN,iT).compose(xo,UN,nT).multiply(c),_e=jb.copy(j.matrixWorld).invert().multiply($);a instanceof Wt?e=j.bvhGeometry.boundsTree.intersectsBox(a,_e):(sT.radius=a,sT.center.setFromMatrixPosition(_e),e=j.bvhGeometry.boundsTree.intersectsSphere(sT)),e?g.currentIntersectedObjects.indexOf(j)===-1&&(g.currentIntersectedObjects.push(j),g.dispatch(),d.dispatchEvent(BJ)):g.currentIntersectedObjects=g.currentIntersectedObjects.filter(st=>st!==j)}}}};function jN(e){let o=this._clip.duration,a=this._clip.start??0,c=this.loop,d=this.time+e,g=this._loopCount,b=c===kp;if(e===0)return g===-1?d:b&&(g&1)===1?o-(d-a):d;if(c===_w){g===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=o)d=o;else if(d<0)d=0;else{this.time=d;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(g===-1&&(e>=0?(g=0,this._setEndings(!0,this.repetitions===0,b)):this._setEndings(this.repetitions===0,!0,b)),d>=o||d<a){let j=Math.floor((d-a)/(o-a));d-=(o-a)*j,g+=Math.abs(j);let $=this.repetitions-g;if($<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,b||(d=e>0?o:a,this.repetitions===1&&(d=o)),this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if($===1){let _e=e<0;this._setEndings(_e,!_e,b)}else this._setEndings(!1,!1,b);this._loopCount=g,this.time=d,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:j})}}else this.time=d;if(b&&(g&1)===1)return o-(d-a)}return d}var HN=!1,Wb=class{constructor(e,o,a,c){this.scene=e,this.requestRender=o,this.updateDisplayProgress=a,this.animationInspectorState=c,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=d=>{d.data.type==="Empty"&&d.data.animations&&d.data.animations.forEach((g,b)=>{let j=g[0]+"/";if(Array.isArray(d.identity)?j+=d.identity[0]:j+=d.uuid,this.clipIdToAction[j])return;let $=nh.parse(JSON.parse(g[2]));d.animations[b]=$;let _e=this.mixer.clipAction($,d);HN===!1&&(Object.getPrototypeOf(_e)._updateTime=jN,HN=!0),_e.clampWhenFinished=!0,this.clipIdToAction[j]=_e})},this.mixer=new Fy(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,o){let a=this.scene.find(o);if(!a)return;let c=a.animations.find(g=>g.uuid===e);if(!c)return;let d=this.clipIdToAction[e];!d||(d.stop(),this.mixer.uncacheClip(c),delete this.clipIdToAction[e],a.animations=a.animations.filter(g=>g.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let o=this.clipIdToAction[e];!o||(o.play(),this.activeClip=o.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=Ew}),this.mixer.stopAllAction(),this.requestRender()}play(e){let o=e.clipId+"/"+e.object,a=this.clipIdToAction[o];if(a)return e&&(e.repeat>=0&&(a.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(a.loop=kp)),a.play(),a.paused=!1,this.requestRender(),a}resumeFromInspector(e){let o=this.clipIdToAction[e];!o||(o.play(),o.paused=!1,this.requestRender())}pauseFromInspector(e){let o=this.clipIdToAction[e];!o||(o.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var o;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(o=this.animationInspectorState)!=null&&o.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,o;return((o=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:o.times.length)??0}setProgressFromInspector(e,o){if(!this.clipIdToAction[o])return;this.activeClip!==this.clipIdToAction[o].getClip()&&this.playFromInspector(o);let a=this.clipIdToAction[o].paused;this.clipIdToAction[o].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),a&&(this.clipIdToAction[o].paused=!0)}},oT=new WeakMap,qb=class extends ml{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,o,a,c){let d=new sh(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,g=>{this.decodeDracoFile(g,o).catch(c)},a,c)}decodeDracoFile(e,o,a,c){let d={attributeIDs:a||this.defaultAttributeIDs,attributeTypes:c||this.defaultAttributeTypes,useUniqueIDs:!!a};return this.decodeGeometry(e,d).then(o)}decodeGeometry(e,o){let a=JSON.stringify(o);if(oT.has(e)){let j=oT.get(e);if(j.key===a)return j.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let c,d=this.workerNextTaskID++,g=e.byteLength,b=this._getWorker(d,g).then(j=>(c=j,new Promise(($,_e)=>{c._callbacks[d]={resolve:$,reject:_e},c.postMessage({type:"decode",id:d,taskConfig:o,buffer:e},[e])}))).then(j=>this._createGeometry(j.geometry));return b.catch(()=>!0).then(()=>{c&&d&&this._releaseTask(c,d)}),oT.set(e,{key:a,promise:b}),b}_createGeometry(e){let o=new Pe;e.index&&o.setIndex(new Xe(e.index.array,1));for(let a=0;a<e.attributes.length;a++){let c=e.attributes[a],d=c.name,g=c.array,b=c.itemSize;o.setAttribute(d,new Xe(g,b))}return o}_loadLibrary(e,o){let a=new sh(this.manager);return a.setPath(this.decoderPath),a.setResponseType(o),a.setWithCredentials(this.withCredentials),new Promise((c,d)=>{a.load(e,c,void 0,d)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",o=[];return e?o.push(this._loadLibrary("draco_decoder.js","text")):(o.push(this._loadLibrary("draco_wasm_wrapper.js","text")),o.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(o).then(a=>{let c=a[0];e||(this.decoderConfig.wasmBinary=a[1]);let d=NJ.toString(),g=["/* draco decoder */",c,"","/* worker */",d.substring(d.indexOf("{")+1,d.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([g]))}),this.decoderPending}_getWorker(e,o){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let c=new Worker(this.workerSourceURL);c._callbacks={},c._taskCosts={},c._taskLoad=0,c.postMessage({type:"init",decoderConfig:this.decoderConfig}),c.onmessage=function(d){let g=d.data;switch(g.type){case"decode":c._callbacks[g.id].resolve(g);break;case"error":c._callbacks[g.id].reject(g);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+g.type+'"')}},this.workerPool.push(c)}else this.workerPool.sort(function(c,d){return c._taskLoad>d._taskLoad?-1:1});let a=this.workerPool[this.workerPool.length-1];return a._taskCosts[e]=o,a._taskLoad+=o,a})}_releaseTask(e,o){e._taskLoad-=e._taskCosts[o],delete e._callbacks[o],delete e._taskCosts[o]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function NJ(){let e,o;onmessage=function(b){let j=b.data;switch(j.type){case"init":e=j.decoderConfig,o=new Promise(function(st){e.onModuleLoaded=function(rt){st({draco:rt})},DracoDecoderModule(e)});break;case"decode":let $=j.buffer,_e=j.taskConfig;o.then(st=>{let rt=st.draco,ut=new rt.Decoder,gt=new rt.DecoderBuffer;gt.Init(new Int8Array($),$.byteLength);try{let yt=a(rt,ut,gt,_e),wt=yt.attributes.map(Ct=>Ct.array.buffer);yt.index&&wt.push(yt.index.array.buffer),self.postMessage({type:"decode",id:j.id,geometry:yt},wt)}catch(yt){console.error(yt),self.postMessage({type:"error",id:j.id,error:yt.message})}finally{rt.destroy(gt),rt.destroy(ut)}});break}};function a(b,j,$,_e){let st=_e.attributeIDs,rt=_e.attributeTypes,ut,gt,yt=j.GetEncodedGeometryType($);if(yt===b.TRIANGULAR_MESH)ut=new b.Mesh,gt=j.DecodeBufferToMesh($,ut);else if(yt===b.POINT_CLOUD)ut=new b.PointCloud,gt=j.DecodeBufferToPointCloud($,ut);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!gt.ok()||ut.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+gt.error_msg());let wt={index:null,attributes:[]};for(let Ct in st){let Pt=self[rt[Ct]],At,Tt;if(_e.useUniqueIDs)Tt=st[Ct],At=j.GetAttributeByUniqueId(ut,Tt);else{if(Tt=j.GetAttributeId(ut,b[st[Ct]]),Tt===-1)continue;At=j.GetAttribute(ut,Tt)}wt.attributes.push(d(b,j,ut,Ct,Pt,At))}return yt===b.TRIANGULAR_MESH&&(wt.index=c(b,j,ut)),b.destroy(ut),wt}function c(b,j,$){let _e=$.num_faces()*3,st=_e*4,rt=b._malloc(st);j.GetTrianglesUInt32Array($,st,rt);let ut=new Uint32Array(b.HEAPF32.buffer,rt,_e).slice();return b._free(rt),{array:ut,itemSize:1}}function d(b,j,$,_e,st,rt){let ut=rt.num_components(),gt=$.num_points()*ut,yt=gt*st.BYTES_PER_ELEMENT,wt=g(b,st),Ct=b._malloc(yt);j.GetAttributeDataArrayForAllPoints($,rt,wt,yt,Ct);let Pt=new st(b.HEAPF32.buffer,Ct,gt).slice();return b._free(Ct),{name:_e,array:Pt,itemSize:ut}}function g(b,j){switch(j){case Float32Array:return b.DT_FLOAT32;case Int8Array:return b.DT_INT8;case Int16Array:return b.DT_INT16;case Int32Array:return b.DT_INT32;case Uint8Array:return b.DT_UINT8;case Uint16Array:return b.DT_UINT16;case Uint32Array:return b.DT_UINT32}}}var dc;function FJ(){return dc||(dc=new qb,dc.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),dc.decoderPending}async function kJ(e){if(dc){let o={attributeIDs:dc.defaultAttributeIDs,attributeTypes:dc.defaultAttributeTypes,useUniqueIDs:!1},a;try{a=await dc.decodeGeometry(new Int8Array(e).buffer,o)}catch(c){console.error(c)}if(a)return{index:a.index?{array:a.index.array}:void 0,attributes:Object.entries(a.attributes).map(([c,d])=>({name:c,itemSize:d.itemSize,array:d.array}))}}return null}async function WN(e,o){let[a,c]=n1(jv.deserialize(new Uint8Array(e)));u0(a);let d=[];a.scene.objects.traverse((g,b)=>{b.type==="Mesh"&&b.geometry.type==="NonParametricGeometry"&&b.geometry.data.draco!==void 0&&d.push(b)}),d.length&&await FJ();for(let g of d){let b=await kJ(kr$1(g.geometry.data.draco));if(b){b.index&&(g.geometry.data.index={array:b.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let j={};b.attributes.forEach(({name:$,array:_e,itemSize:st})=>{j[$]={array:_e,itemSize:st,type:"Float32Array",normalized:!1}}),g.geometry.data.attributes=j,g.geometry.data.draco=void 0}}return o&&o(a),c.result().data}var aT=class{constructor(e,o,a,c,d,g,b){this.id=e,this.data=o,this.dataEvent=a,this.object=c,this.stage=!1,this.actions=Mr$1(a,o.actions,d,g,b,c)}disconnect(){hr$1(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Yb=class extends zr$1{constructor(e,o){super(e),this.eventManager=o,this.breakpoints=[],this.resize=(a,c)=>{this.breakpoints.forEach(d=>{let g=Yv.deviceToSize(d.data.size),b=d.dataEvent.orientation==="horizontal"?a:c,j;switch(d.data.operator){case"<":j=b<g[0];break;case">":j=b>g[0];break;case"<>":j=b>g[0]&&b<g[1];break}d.stage!==j&&(d.stage=j,d.stage?d.dispatchIn():d.dispatchOut())})},this.onResizeObserver=new ResizeObserver(a=>{for(let c of a){let{width:d,height:g}=c.contentRect;this.resize(d,g)}})}connect(){let{page:e,sharedAssets:o,domElement:a}=this.eventContext;this.onResizeObserver.observe(a);let c=d=>{var g;if(!(!d.visible||!((g=d.data)!=null&&g.events.length)))for(let{data:b}of d.data.events)b.disabled||b.type==="Resize"&&b.breakpoints.forEach(({data:j,id:$})=>{try{let _e=new aT($,j,b,d,e,o,this.eventManager);this.breakpoints.push(_e)}catch{}})};e.traverseEntity(d=>{var g;(d instanceof _r$1||d instanceof mr)&&((g=d.frame)==null||g.traverse(b=>{c(b)})),c(d)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},Xb=class{constructor(e,o,a,c,d){this.publish=e,this.controlsManager=o,this.animationControls=a,this.eventContext=c,this.sharedVariables=d,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=g=>{(g.touches.length>1||this.preventTouchScroll)&&g.preventDefault()},this.onMouseWheelPreventScroll=g=>{this.preventScroll&&g.preventDefault()},this.onMouseMove=g=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(g),pressed:g.buttons>0}},this.onMouseDown=g=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(g),pressed:!0}},this.onMouseUp=g=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(g),pressed:!1}},this.getMousePosition=g=>{var _e;let{domRect:b}=this.eventContext,{pageX:j,pageY:$}=((_e=g.touches)==null?void 0:_e.length)>0?g.touches[0]:g;return{x:j-(b.left+window.scrollX),y:$-(b.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=c.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new Mb(this.eventContext),DynamicVariable:new Vb(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new Db(this.eventContext,this),Start:new Fb(this.eventContext,this),Basic:new Cb(this.eventContext,this,this.needsRaycast),MouseHover:new Bb(this.eventContext,this),Scroll:new Nb(this.eventContext,this),Follow:new Ib(this.eventContext,this),DragDrop:new Ob(this.eventContext,this),LookAt:new Lb(this.eventContext),Resize:new Yb(this.eventContext,this)};let{page:e,domElement:o}=this.eventContext;this.hideCursor&&(o.style.cursor="none"),e.traverseEntity(a=>{a.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(a=>a.connect()),o.addEventListener("wheel",this.onMouseWheelPreventScroll),o.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var a;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:o}=this.eventContext;o.style.cursor="",Object.values(this.handlers).forEach(c=>c.disconnect()),(a=this.controlsManager.gameControl)==null||a.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(c=>{c.removeEventListener("requestRender",this.requestRender),c.destroyedInAction=!1}),o.removeEventListener("touchmove",this.onTouchMovePreventScroll),o.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let o=this.isEnabled;o&&this.deactivate(),this.eventContext.useWindowEvents=e,o&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let o=a=>{if(a.data.type==="Conditional"&&(a.data.ifActions.forEach(o),a.data.elseActions.forEach(o)),a.data.type==="Conditional"||a.data.type==="SetVariable")for(let c of a.data.type==="Conditional"?a.data.condition:a.data.expression)"id"in c&&Array.isArray(c.id)&&(c.id[0]==="mouse"&&(this.needsMouse=!0),c.id[0]==="raycast"&&(this.needsRaycast=!0));a.data.type==="DynamicVariablePlay"&&a.data.variableId!==""&&(a.data.mode==="Play"||a.data.mode==="PlayPause"||a.data.mode==="Toggle")&&e.setDynamicVariablePlayState(a.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(a=>{var c;if((c=a.data)!=null&&c.events.length){for(let d of a.data.events)if(!d.data.disabled)if(d.data.type==="VariableChange"&&(d.data.variableId==="mouseProperty"&&(this.needsMouse=!0),d.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),d.data.type==="Conditional")for(let g of["inActions","outActions"])d.data[g].forEach(o);else if(d.data.type==="DragDrop")for(let g of["drag","drop"])d.data.dragDropActions[g].forEach(o);else if(d.data.type==="GameControl")for(let g of["idle","move","jump","run"])d.data.gameActions[g].forEach(o);else if(d.data.type==="Resize")for(let g of d.data.breakpoints)g.data.actions.forEach(o);else d.data.type==="LookAt"||d.data.actions.forEach(o)}})}},Qb=class{constructor(e,o,a,c,d){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=o,this._frameSize=new z$2().copy(a),this._editorSize=new z$2().copy(c),this._aspect=o.aspect,this._fov=d??o.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,o=this._frameSize.y,a=this._editorSize.y;this._aspect=e/o,o<=a&&(this._camera.zoom*=a/o),this._renderer.setViewport(0,0,e,o)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let o=this._frameSize.y,a=this._editorSize.y,c=this._fov;if(e&&o>a){let d=VJ(o,1080,2160,1,15)/100;c*=o/a,c*=1-d}this._camera.aspect=this._aspect,this._camera.fov=c,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,o=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,o),this._renderer.setSize(e,o)),this._camera&&(this._camera.aspect=e/o,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,o,this.enableResponsive),this._camera.updateProjectionMatrix())}};function VJ(e,o,a,c,d){return(e-o)/(a-o)*(d-c)+c}var Kb=class{get sharedAssets(){return this.shared}constructor(e,o={}){this.shared=new eu(e.shared,o),this.scene=new $l(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,o){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof mr&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof ur&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Zb=class{constructor({x:e=10,y:o=10}){this._startTime=0;let a=document.getElementById("spe-perfs");a?this.element=a:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${o}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function zJ(e){let o;if(e.index)for(let a=0;a<e.index.array.length;a+=3)o=e.index.array[a],e.index.array[a]=e.index.array[a+2],e.index.array[a+2]=o}function Lg(e){return e instanceof ao?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function UJ(e,o){let a={};return e.traverseEntity(c=>{var $;if(!c.visible||!(c instanceof pr)||c.type!=="Mesh"||Array.isArray(c.material)||c.states&&Object.keys(c.states).length)return;let d=c.parent;for(;d;){if(d instanceof pr&&c.states&&Object.keys(c.states).length)return;d=d.parent}let g=c.material.uuid,b=o.shared.materials[g];if(b){if(!oi.isMergable(b))return}else{let _e=($=o.scene.objects.get(c.uuid))==null?void 0:$.data;if(_e&&"material"in _e&&typeof _e.material!="string"){if(!oi.isMergable(_e.material))return;g=oi.getHash(_e.material)}}a[g]||(a[g]={});let j=a[g][Lg(c)];if(j){if(j.push(c),c.cloner)for(let _e of c.cloner.children)j.push(_e)}else if(a[g][Lg(c)]=[c],c.cloner)for(let _e of c.cloner.children)a[g][Lg(c)].push(_e)}),a}function GJ(e){let o=0;return Object.values(e).forEach(a=>{Object.values(a).forEach(c=>{let d=c.length;d>o&&(o=d)})}),o}function qN(e,o){let a=UJ(o,e),c=GJ(a),d=new Array(c),g=0,b=new Array(c),j=0,$=new Array(c),_e=0,st=new Array(c),rt=0;for(let[ut,gt]of Object.entries(a))for(let yt of Object.values(gt)){if(j=0,_e=0,yt.forEach(Ct=>{Ct instanceof pr&&(b[j++]=Ct.geometry.clone(),$[_e++]=Ct)}),_e<2)continue;for(let Ct=0;Ct<_e;Ct++)$[Ct].updateWorldMatrix(!0,!1),b[Ct].applyMatrix4($[Ct].matrixWorld),$[Ct].matrixWorld.determinant()<0&&zJ(b[Ct]);let wt=Js(b.slice(0,j),!1);if(wt){let Ct;switch(ut){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),Ct=new sr(wt,$[0].material);break}default:{Ct=new sr(wt,$[0].material);break}}Ct.castShadow=$[0].castShadow,Ct.receiveShadow=$[0].receiveShadow,o.add(Ct);let Pt=At=>{rt=0;for(let Tt of At)Tt.children&&Pt(Tt.children),Tt instanceof pr&&(Array.isArray(Tt.material)||a[Tt.material.uuid]&&a[Tt.material.uuid][Lg(Tt)]&&a[Tt.material.uuid][Lg(Tt)].length>1||(st[rt++]=Tt));for(let Tt=0;Tt<rt;Tt++)o.attach(st[Tt])};for(let At=0;At<_e;At++){let Tt=$[At];Pt(Tt.children),d[g++]=Tt}}}for(let ut=0;ut<g;ut++)d[ut].removeFromParent()}var KN=pi(XN(),1),HJ=new z$2;function WJ(e){let o="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(o+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(o)}var QN=class{constructor(e,{renderOnDemand:o,renderMode:a="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=c=>{var d,g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct;if(this.time=c,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(d=this._perfs)==null||d.start(),!this._renderer){(g=this._perfs)==null||g.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(b=this._perfs)==null||b.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((j=this._eventManager.handlers)!=null&&j.Start.hasVideoAction||($=this._eventManager.handlers)!=null&&$.Basic.hasVideoAction||(_e=this._eventManager.handlers)!=null&&_e.Conditional.hasVideoAction)&&(this._skipRender=!1),(st=this._animationControls)==null||st.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(rt=this._scene)==null||rt.traverseVisibleEntity(Pt=>{Pt.type==="ParticleSystem"&&(Pt.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(ut=this._eventManager)!=null&&ut.isEnabled&&(((gt=this._eventManager.handlers)==null?void 0:gt.Follow).onAnimationFrameDamping(),((yt=this._eventManager.handlers)==null?void 0:yt.LookAt).onAnimationFrameDamping(),((wt=this._eventManager.handlers)==null?void 0:wt.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let Pt=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=Pt,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(Ct=this._perfs)==null||Ct.end()},this._resize=()=>{var c,d,g,b,j,$,_e,st,rt,ut;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=HJ.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(c=this._scene)==null?void 0:c.activeCamera,(_e=this._scene)==null||_e.updateViewPlaneSize(((g=(d=this._frameView)==null?void 0:d.frameSize)==null?void 0:g.x)??this._viewportWidth,((j=(b=this._frameView)==null?void 0:b.frameSize)==null?void 0:j.y)??this._viewportHeight,(($=this._frameView)==null?void 0:$.enableResponsive)??!1),this._camera){let gt=Object.values(((st=this._data)==null?void 0:st.frames)??{})[0].preset??"fullscreen";(rt=this._frameView)==null||rt.setCamera(this._camera),(ut=this._frameView)==null||ut.updateCamera(gt!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=Lc(this._resize,10),this._onScroll=c=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=o?"auto":a,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new Zb({x:10,y:10})),j2(e)}async load(e,o,a){WJ(e),this.disposed=!1;let c=await(await fetch(e,a)).arrayBuffer();await this.start(c,{variables:o})}async start(e,{interactive:o=!0,variables:a}={}){var j,$,_e,st;if(this.disposed)return;let c=await WN(e);this._data=c,c.version&&(0,KN.default)(c.version,"1.0.26")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([I_(c)&&UI(),DR(c)&&LI(),Nl.physicsEnabled(c.scene.objects)&&K2(),__(c)&&_R(),H_(c)&&j3(),JE(c)&&Y2()].filter(Boolean)),(j=this._eventManager)==null||j.deactivate(),($=this._controls)==null||$.deactivate(),(_e=this._scene)==null||_e.dispose();let d=new Kb(c);if(d.resetPersonalCameraFromDocumentData(),this._scene=d.scene,this._sharedAssetsManager=d.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let rt=performance.now();qN(c,d.scene);let ut=performance.now();console.log("Merged geometries in ",ut-rt," ms")}I_(c)&&this._scene.traverse(rt=>{Rn(rt)&&rt.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var rt;this._requestRenderAutoMode(),(rt=this._scene)==null||rt.traverse(ut=>{ut instanceof Ji&&ut.pendingMediaLoad&&ut.update()})}),(st=this._scene)==null||st.traverse(rt=>{rt.type==="ParticleSystem"&&(rt.wakeUp(),rt.data.autoPlay?rt.start():rt.stop())});let g=Object.keys(c.shared.fonts).map(rt=>this._sharedAssetsManager.getFont(rt).loadingPromise);if(Promise.all(g).then(()=>{d.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),__(c)&&GN(c)&&await Promise.all(g),H_(c)){let rt=[];this._scene.traverseEntity(ut=>{ut instanceof _r$1&&rt.push(ut)}),await Promise.all(rt.map(ut=>ut.uiCanvas.promise))}this._scene.rewriteEventsBeforeGoToPlayMode(),Yf(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new kx({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=c.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),this._scene.initializeSplatViewer(this._renderer),c.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(c.scene.blueNoiseTextureData);let b=Object.values(c.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(b.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=b.size[0],this._viewportHeight=b.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Qb(this._renderer,this._camera,new z$2(this._viewportWidth,this._viewportHeight),new z$2(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(b.allowResponsive??!1)&&b.preset==="fullscreen"),o){let rt=new Tb(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,b);this._scene.updateMatrixWorld(!0),this._controls=new Hb(rt),this._animationControls=new Wb(this._scene,this._requestRenderAutoMode),this._eventManager=new Xb(c.scene.publish,this._controls,this._animationControls,rt,c.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),a!==void 0&&this.setVariables(a),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var rt;(rt=this._renderer)==null||rt.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let o=Object.entries(e);for(let[a,c]of o)this.setVariable(a,c)}}setVariable(e,o){var c;let a=this._getVariableByName(e);if(a&&!("dynamicVariableType"in a.data)){let d=o;typeof a.data.value=="number"?d=typeof o=="number"?o:typeof o=="boolean"?o===!0?1:0:parseFloat(o):typeof a.data.value=="boolean"?d=typeof o=="number"?!!o:typeof o=="boolean"?o:o.toLocaleLowerCase()==="false"?!1:!!o:typeof a.data.value!="string"&&a.data.value.textValue!==void 0&&(d=o.toString());let g=typeof d=="string"?{textValue:d}:d;(c=this._sharedAssetsManager)==null||c.updateVariable(a.id,g),this.requestRender(),this._requestRenderAutoMode()}else a===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in a.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(o=>{e[o.data.name]===void 0&&(e[o.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(o.id)))}),e}getVariable(e){let o=this._getVariableByName(e);if(o){let a=this._sharedAssetsManager.getVariable(o.id);return this._getVariableValue(a)}}_getVariableValue(e){return typeof e!="string"&&Yi.isTextValue(e)?Yi.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let o=this._data.shared.variables.find(a=>a.data.name===e);return o&&this._variablesCache.set(e,o),o}}findObjectById(e){var a;let o=(a=this._scene)==null?void 0:a.getObjectByProperty("uuid",e);return this._createProxyObject(o)}findObjectByName(e){var a;let o=(a=this._scene)==null?void 0:a.getObjectByName(e);return this._createProxyObject(o)}getAllObjects(){var o;let e=[];return(o=this._scene)==null||o.traverseEntity(a=>{if(a.uuid!==As&&!this._scene.isInvisibleObjects(a)&&!(a instanceof mr)){let c=this._createProxyObject(a);c&&e.push(c)}}),e}getSplineEvents(){var e,o;return((o=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:o.Spline).splineEvents}emitEvent(e,o){var a;(a=this.findObjectById(o)||this.findObjectByName(o))==null||a.emitEvent(e)}emitEventReverse(e,o){var a;(a=this.findObjectById(o)||this.findObjectByName(o))==null||a.emitEventReverse(e)}addEventListener(e,o){this.canvas.addEventListener(e,o)}removeEventListener(e,o){this.canvas.removeEventListener(e,o)}setZoom(e){var o,a;((o=this._controls)==null?void 0:o.orbitControls)instanceof ip$2&&((a=this._controls)==null||a.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,o){this._viewportWidth=e,this._viewportHeight=o,this._viewportMode=2,this._resize()}setBackgroundColor(e){var b;let{r:o,g:a,b:c,a:d}={r:0,g:0,b:0,a:1},g=new xr$1(o,a,c,d);try{g.setStyle(e)}catch{console.error("This is not a valid css color",e)}(b=this._scene)==null||b.activePage.setBackgroundColor(g),this._requestRenderAutoMode()}dispose(){var e,o,a,c,d,g,b;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(o=this._scene)==null||o.dispose(),(a=this._sharedAssetsManager)==null||a.dispose(),this._proxyObjectCache.forEach(j=>{jw.unsubscribe(j)}),this._variablesCache.clear(),(c=this._renderer)==null||c.setAnimationLoop(null),(d=this._renderer)==null||d.dispose(),this._renderer=void 0,(g=this._sharedAssetsManager)==null||g.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(b=this._controls)==null||b.deactivate(),H2(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,o,a;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(o=this._eventManager)==null||o.pause(),(a=this._controls)!=null&&a.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,o,a;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(o=this._controls)!=null&&o.orbitControls&&(this._controls.orbitControls.enabled=!0),(a=this._renderer)==null||a.setAnimationLoop(this.render))}setGlobalEvents(e){var o;(o=this._eventManager)==null||o.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var d;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let o;e.traverseAncestors(g=>{g instanceof mr&&(o=g.name)});let a={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:o,parentUuid:e.parent instanceof mr||e instanceof $l||(d=e.parent)==null?void 0:d.uuid,emitEvent(g){e.dispatchEvent({type:"userEvent",eventName:g})},emitEventReverse(g){e.dispatchEvent({type:"userEvent",eventName:g,reverse:!0})}},c=jw(a,(g,b)=>{var j;typeof e[g]!="object"&&((j=Object.getOwnPropertyDescriptor(e,g))!=null&&j.writable)&&(e[g]=b),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,c),c}setUIWasmUrl(e){tx.skiaWasmUrl=e}},Z$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={},yr={get exports(){return fe},set exports(e){fe=e}},z$1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De;function hr(){if(De)return z$1;De=1;var e=React$2,o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function b(j,$,_e){var st,rt={},ut=null,gt=null;_e!==void 0&&(ut=""+_e),$.key!==void 0&&(ut=""+$.key),$.ref!==void 0&&(gt=$.ref);for(st in $)c.call($,st)&&!g.hasOwnProperty(st)&&(rt[st]=$[st]);if(j&&j.defaultProps)for(st in $=j.defaultProps,$)rt[st]===void 0&&(rt[st]=$[st]);return{$$typeof:o,type:j,key:ut,ref:gt,props:rt,_owner:d.current}}return z$1.Fragment=a,z$1.jsx=b,z$1.jsxs=b,z$1}(function(e){e.exports=hr()})(yr);const ce=fe.jsx;var Rr="Expected a function",$e=NaN,_r="[object Symbol]",Tr=/^\s+|\s+$/g,Sr=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,wr=/^0o[0-7]+$/i,jr=parseInt,Cr=typeof Z$1=="object"&&Z$1&&Z$1.Object===Object&&Z$1,Pr=typeof self=="object"&&self&&self.Object===Object&&self,xr=Cr||Pr||Function("return this")(),kr=Object.prototype,Ar=kr.toString,Fr=Math.max,Ir=Math.min,ue=function(){return xr.Date.now()};function Dr(e,o,a){var c,d,g,b,j,$,_e=0,st=!1,rt=!1,ut=!0;if(typeof e!="function")throw new TypeError(Rr);o=Le(o)||0,le(a)&&(st=!!a.leading,rt="maxWait"in a,g=rt?Fr(Le(a.maxWait)||0,o):g,ut="trailing"in a?!!a.trailing:ut);function gt(Lt){var Ft=c,Nt=d;return c=d=void 0,_e=Lt,b=e.apply(Nt,Ft),b}function yt(Lt){return _e=Lt,j=setTimeout(Pt,o),st?gt(Lt):b}function wt(Lt){var Ft=Lt-$,Nt=Lt-_e,Ht=o-Ft;return rt?Ir(Ht,g-Nt):Ht}function Ct(Lt){var Ft=Lt-$,Nt=Lt-_e;return $===void 0||Ft>=o||Ft<0||rt&&Nt>=g}function Pt(){var Lt=ue();if(Ct(Lt))return At(Lt);j=setTimeout(Pt,wt(Lt))}function At(Lt){return j=void 0,ut&&c?gt(Lt):(c=d=void 0,b)}function Tt(){j!==void 0&&clearTimeout(j),_e=0,c=$=d=j=void 0}function kt(){return j===void 0?b:At(ue())}function It(){var Lt=ue(),Ft=Ct(Lt);if(c=arguments,d=this,$=Lt,Ft){if(j===void 0)return yt($);if(rt)return j=setTimeout(Pt,o),gt($)}return j===void 0&&(j=setTimeout(Pt,o)),b}return It.cancel=Tt,It.flush=kt,It}function le(e){var o=typeof e;return!!e&&(o=="object"||o=="function")}function Wr(e){return!!e&&typeof e=="object"}function $r(e){return typeof e=="symbol"||Wr(e)&&Ar.call(e)==_r}function Le(e){if(typeof e=="number")return e;if($r(e))return $e;if(le(e)){var o=typeof e.valueOf=="function"?e.valueOf():e;e=le(o)?o+"":o}if(typeof e!="string")return e===0?e:+e;e=e.replace(Tr,"");var a=Or.test(e);return a||wr.test(e)?jr(e.slice(2),a?2:8):Sr.test(e)?$e:+e}var Lr=Dr;function Yr(e){return o=>{e.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}const Nr=[],Mr={width:"100%",height:"100%"},Ur=reactExports$1.forwardRef(function({className:e,children:o,debounceTime:a=300,ignoreDimensions:c=Nr,parentSizeStyles:d,enableDebounceLeadingCall:g=!0,resizeObserverPolyfill:b,...j},$){const _e=reactExports$1.useRef(null),st=reactExports$1.useRef(0),[rt,ut]=reactExports$1.useState({width:0,height:0,top:0,left:0}),gt=reactExports$1.useMemo(()=>{const yt=Array.isArray(c)?c:[c];return Lr(wt=>{ut(Ct=>Object.keys(Ct).filter(Pt=>Ct[Pt]!==wt[Pt]).every(Pt=>yt.includes(Pt))?Ct:wt)},a,{leading:g})},[a,g,c]);return reactExports$1.useEffect(()=>{const yt=b||window.ResizeObserver,wt=new yt(Ct=>{Ct.forEach(Pt=>{const{left:At,top:Tt,width:kt,height:It}=(Pt==null?void 0:Pt.contentRect)??{};st.current=window.requestAnimationFrame(()=>{gt({width:kt,height:It,top:Tt,left:At})})})});return _e.current&&wt.observe(_e.current),()=>{window.cancelAnimationFrame(st.current),wt.disconnect(),gt.cancel()}},[gt,b]),ce("div",{style:{...Mr,...d},ref:Yr([$,_e]),className:e,...j,children:o({...rt,ref:_e.current,resize:gt})})}),zr=reactExports$1.forwardRef(({scene:e,style:o,onMouseDown:a,onMouseUp:c,onMouseHover:d,onKeyDown:g,onKeyUp:b,onStart:j,onLookAt:$,onFollow:_e,onWheel:st,onLoad:rt,renderOnDemand:ut=!0,...gt},yt)=>{const wt=reactExports$1.useRef(null),[Ct,Pt]=reactExports$1.useState(!0);return reactExports$1.useEffect(()=>{Pt(!0);let At;const Tt=[{name:"mouseDown",cb:a},{name:"mouseUp",cb:c},{name:"mouseHover",cb:d},{name:"keyDown",cb:g},{name:"keyUp",cb:b},{name:"start",cb:j},{name:"lookAt",cb:$},{name:"follow",cb:_e},{name:"scroll",cb:st}];if(wt.current){At=new QN(wt.current,{renderOnDemand:ut});async function kt(){await At.load(e);for(let It of Tt)It.cb&&At.addEventListener(It.name,It.cb);Pt(!1),rt==null||rt(At)}kt()}return()=>{for(let kt of Tt)kt.cb&&At.removeEventListener(kt.name,kt.cb);At.dispose()}},[e]),ce(Ur,{ref:yt,parentSizeStyles:o,debounceTime:50,...gt,children:()=>ce("canvas",{ref:wt,style:{display:Ct?"none":"block"}})})});var ValidCSSEffects;(function(e){e.speed="speed",e.translateX="translateX",e.translateY="translateY",e.rotate="rotate",e.rotateX="rotateX",e.rotateY="rotateY",e.rotateZ="rotateZ",e.scale="scale",e.scaleX="scaleX",e.scaleY="scaleY",e.scaleZ="scaleZ",e.opacity="opacity"})(ValidCSSEffects||(ValidCSSEffects={}));var Units;(function(e){e.px="px",e["%"]="%",e.vh="vh",e.vw="vw"})(Units||(Units={}));var RotationUnits;(function(e){e.deg="deg",e.turn="turn",e.rad="rad"})(RotationUnits||(RotationUnits={}));var ScaleUnits;(function(e){e[""]=""})(ScaleUnits||(ScaleUnits={}));var ScrollAxis;(function(e){e.vertical="vertical",e.horizontal="horizontal"})(ScrollAxis||(ScrollAxis={}));var EasingPreset;(function(e){e.ease="ease",e.easeIn="easeIn",e.easeOut="easeOut",e.easeInOut="easeInOut",e.easeInQuad="easeInQuad",e.easeInCubic="easeInCubic",e.easeInQuart="easeInQuart",e.easeInQuint="easeInQuint",e.easeInSine="easeInSine",e.easeInExpo="easeInExpo",e.easeInCirc="easeInCirc",e.easeOutQuad="easeOutQuad",e.easeOutCubic="easeOutCubic",e.easeOutQuart="easeOutQuart",e.easeOutQuint="easeOutQuint",e.easeOutSine="easeOutSine",e.easeOutExpo="easeOutExpo",e.easeOutCirc="easeOutCirc",e.easeInOutQuad="easeInOutQuad",e.easeInOutCubic="easeInOutCubic",e.easeInOutQuart="easeInOutQuart",e.easeInOutQuint="easeInOutQuint",e.easeInOutSine="easeInOutSine",e.easeInOutExpo="easeInOutExpo",e.easeInOutCirc="easeInOutCirc",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack"})(EasingPreset||(EasingPreset={}));ScaleUnits[""],Units.px,Units["%"],Units.vh,Units.vw,RotationUnits.deg,RotationUnits.turn,RotationUnits.rad;const Grid$2=()=>jsxRuntimeExports.jsx("div",{className:"home_div_section1_grid_bg",children:jsxRuntimeExports.jsxs("svg",{width:"102%",height:"102%",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"smallGrid",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 120 0 L 0 0 0 120",fill:"none",stroke:"currentColor","stroke-width":"1"})}),jsxRuntimeExports.jsx("pattern",{id:"grid",width:"240",height:"240",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{width:"240",height:"240",fill:"url(#smallGrid)"})})]}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),Icon=()=>jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"",width:"330",height:"337",viewBox:"0 0 330 337",fill:"none",xmlns:"http://www.w3.org/2000/svg",cssid:"home_dev_sp","data-v-706ceafa":"",children:[jsxRuntimeExports.jsx("path",{d:"M311.458 127.516C289.848 46.8654 206.95 -0.996002 126.299 20.6142C45.6491 42.2243 -2.21227 125.123 19.3979 205.773C41.0081 286.423 123.906 334.285 204.557 312.674C285.207 291.064 333.068 208.166 311.458 127.516Z",fill:"url(#paint0_radial-771657)"})," ",jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M162.421 331.431C162.439 332.464 163.282 333.297 164.32 333.297C165.266 333.297 166.051 332.604 166.194 331.698L220.107 324.843C220.467 325.907 221.473 326.673 222.659 326.673C224.146 326.673 225.351 325.467 225.351 323.98C225.351 323.611 225.277 323.26 225.143 322.94L260.784 298.742C261.069 298.96 261.425 299.09 261.811 299.09C262.745 299.09 263.502 298.333 263.502 297.4C263.502 297.142 263.444 296.897 263.341 296.679L293.173 268.237C293.609 268.542 294.14 268.721 294.713 268.721C296.2 268.721 297.405 267.515 297.405 266.028C297.405 265.188 297.02 264.437 296.417 263.944L322.444 214.559C322.566 214.584 322.693 214.597 322.823 214.597C323.871 214.597 324.721 213.747 324.721 212.699C324.721 211.922 324.254 211.254 323.586 210.96L326.958 184.988C328.356 184.89 329.459 183.725 329.459 182.302C329.459 180.949 328.46 179.828 327.159 179.638L323.593 113.672C324.623 113.293 325.357 112.304 325.357 111.144C325.357 109.657 324.152 108.451 322.665 108.451C322.247 108.451 321.852 108.546 321.499 108.716L265.044 34.1911C265.463 33.7165 265.717 33.0933 265.717 32.4108C265.717 30.9237 264.511 29.7182 263.024 29.7182C261.993 29.7182 261.096 30.2986 260.644 31.1506L196.83 12.3176L195.048 11.1831C195.101 11.0078 195.13 10.8217 195.13 10.6289C195.13 9.58051 194.28 8.73062 193.232 8.73062C192.337 8.73062 191.587 9.34952 191.386 10.1826L189.767 10.233L168.6 3.98621C168.606 3.90903 168.61 3.83096 168.61 3.75208C168.61 2.26508 167.404 1.05957 165.917 1.05957C164.466 1.05957 163.283 2.20749 163.227 3.64474L107.947 12.554C107.641 11.9155 106.989 11.4745 106.234 11.4745C105.186 11.4745 104.336 12.3244 104.336 13.3727C104.336 13.5704 104.366 13.761 104.422 13.9402L70.0904 36.9113C69.6038 36.4287 68.934 36.1307 68.1946 36.1307C66.7076 36.1307 65.5021 37.3362 65.5021 38.8232C65.5021 39.3016 65.6269 39.7509 65.8457 40.1403L35.4022 66.3569C35.1055 66.1648 34.7517 66.0532 34.3718 66.0532C33.3234 66.0532 32.4735 66.9031 32.4735 67.9515C32.4735 68.494 32.7011 68.9834 33.0661 69.3294L7.07018 120.191C6.83901 120.126 6.59528 120.091 6.34348 120.091C4.85645 120.091 3.65098 121.297 3.65098 122.784C3.65098 123.981 4.43211 124.995 5.51245 125.346L2.13409 154.724C1.23993 154.878 0.55957 155.657 0.55957 156.595C0.55957 157.496 1.18663 158.25 2.02792 158.445L5.69534 222.369C4.53938 222.671 3.68646 223.723 3.68646 224.974C3.68646 226.461 4.89194 227.666 6.37897 227.666C6.79992 227.666 7.1983 227.569 7.55317 227.397L64.9861 302.885C64.5693 303.36 64.3165 303.981 64.3165 304.662C64.3165 306.149 65.5219 307.355 67.009 307.355C68.059 307.355 68.9687 306.754 69.4126 305.877L133.342 323.454C133.338 323.515 133.336 323.577 133.336 323.639C133.336 325.126 134.541 326.331 136.028 326.331C137.079 326.331 137.989 325.729 138.433 324.852L162.421 331.431ZM164.668 329.532C164.555 329.511 164.439 329.5 164.32 329.5C163.866 329.5 163.449 329.66 163.123 329.925L154.872 324.247L167.332 324.296L164.668 329.532ZM165.621 330.017L168.528 324.301L182.886 324.357L165.863 330.293C165.791 330.193 165.71 330.101 165.621 330.017ZM138.624 322.923C138.642 322.986 138.657 323.05 138.67 323.115L151.415 323.165L145.787 319.292L138.624 322.923ZM135.992 320.947C136.004 320.946 136.016 320.946 136.028 320.946C136.885 320.946 137.648 321.346 138.141 321.97L144.785 318.602L140.773 315.841C141.586 315.976 142.401 316.104 143.217 316.226L145.87 318.052L213.631 283.704C213.541 283.412 213.493 283.102 213.493 282.78C213.493 282.663 213.5 282.547 213.512 282.432L123.981 256.504C123.643 257.199 123.055 257.751 122.335 258.042L135.992 320.947ZM134.067 321.794C134.314 321.531 134.613 321.319 134.948 321.172L121.29 258.268C121.245 258.27 121.201 258.271 121.156 258.271C119.952 258.271 118.906 257.594 118.379 256.6L61.2192 275.313C61.231 275.416 61.2372 275.52 61.2372 275.626C61.2372 275.955 61.1781 276.27 61.0701 276.562L134.067 321.794ZM60.5067 277.47L132.599 322.141L69.6953 304.846C69.6994 304.786 69.7015 304.724 69.7015 304.662C69.7015 304.506 69.6882 304.353 69.6627 304.204L88.5959 296.849C88.2067 296.619 87.8185 296.388 87.4314 296.155L69.2754 303.208C68.7965 302.463 67.9604 301.97 67.009 301.97C66.9332 301.97 66.858 301.973 66.7838 301.979L59.797 278.01C60.063 277.87 60.3026 277.687 60.5067 277.47ZM58.7709 278.309L64.4705 297.862L51.3963 269.429L56.2792 274.17C56.009 274.59 55.8522 275.09 55.8522 275.626C55.8522 277.113 57.0576 278.318 58.5447 278.318C58.6209 278.318 58.6963 278.315 58.7709 278.309ZM57.0239 273.404L50.1588 266.738L47.8743 261.769C46.9108 260.58 45.9642 259.374 45.0351 258.153L48.0336 264.674L8.64546 226.428C8.67736 226.378 8.70769 226.327 8.73635 226.275L29.4084 232.699C29.1968 232.263 28.9872 231.824 28.7796 231.385L9.05684 225.256C9.06652 225.163 9.07147 225.069 9.07147 224.974C9.07147 224.463 8.92911 223.985 8.68188 223.578L37.377 197.598C37.9106 198.016 38.583 198.265 39.3136 198.265C39.3805 198.265 39.4469 198.263 39.5127 198.259L57.4122 273.182C57.2763 273.246 57.1465 273.32 57.0239 273.404ZM58.4519 272.935L40.5524 198.012C40.904 197.861 41.2225 197.647 41.494 197.385L118.343 253.73C118.133 254.151 118.014 254.627 118.014 255.13C118.014 255.284 118.025 255.436 118.047 255.584L60.8869 274.297C60.4239 273.483 59.5484 272.933 58.5447 272.933C58.5136 272.933 58.4827 272.934 58.4519 272.935ZM118.976 252.868L42.1265 196.524C42.3366 196.102 42.4549 195.627 42.4549 195.124C42.4549 194.819 42.4114 194.524 42.3303 194.245L117.773 157.415C118.327 158.218 119.201 158.785 120.21 158.931L120.608 252.036C119.98 252.147 119.416 252.444 118.976 252.868ZM121.676 252.032L121.279 158.927C122.078 158.804 122.79 158.418 123.324 157.86L192.1 206.337C191.857 206.821 191.72 207.367 191.72 207.946C191.72 208.464 191.829 208.956 192.027 209.4L123.48 253.017C123.016 252.507 122.386 252.15 121.676 252.032ZM124.054 253.918L192.601 210.302C193.259 211.058 194.229 211.536 195.31 211.536C195.465 211.536 195.618 211.526 195.768 211.507L215.272 279.949C214.636 280.256 214.119 280.771 213.809 281.406L124.278 255.477C124.29 255.363 124.297 255.247 124.297 255.13C124.297 254.7 124.211 254.291 124.054 253.918ZM216.3 279.657L196.796 211.215C197.999 210.667 198.846 209.475 198.897 208.08L273.445 199.707C273.593 200.217 273.867 200.674 274.231 201.042L217.996 279.949C217.584 279.75 217.122 279.639 216.634 279.639C216.522 279.639 216.41 279.645 216.3 279.657ZM218.866 280.57L275.101 201.663C275.513 201.861 275.975 201.973 276.463 201.973C276.559 201.973 276.654 201.968 276.748 201.96L291.167 255.798L282.252 268.156L219.55 281.608C219.392 281.217 219.158 280.865 218.866 280.57ZM219.773 282.653L281.319 269.449L269.859 285.333L263.183 290.702L264.393 280.979C263.993 281.325 263.592 281.67 263.188 282.013L261.986 291.665L257.121 295.578L248.249 293.172C247.848 293.434 247.446 293.694 247.043 293.953L256.091 296.406L250.768 300.687L221.297 310.964L217.612 285.767C218.868 285.356 219.776 284.174 219.776 282.78C219.776 282.738 219.775 282.696 219.773 282.653ZM216.554 285.921L220.269 311.322L185.917 323.3L169.071 323.234L171.875 317.722C171.467 317.74 171.059 317.756 170.651 317.771L167.874 323.23L153.311 323.172L146.873 318.742L214.115 284.657C214.673 285.405 215.555 285.896 216.554 285.921ZM279.571 198.372C279.593 198.522 279.604 198.675 279.604 198.831C279.604 200.096 278.857 201.185 277.78 201.684L291.974 254.68L305.502 235.929L312.95 216.628L307.458 218.482C307.615 218.055 307.769 217.627 307.922 217.198L313.45 215.331L318.001 203.538L313.963 194.993C314.077 194.395 314.188 193.796 314.296 193.196L318.532 202.161L322.307 192.38L322.315 184.328L279.571 198.372ZM277.566 195.889C278.285 196.159 278.88 196.685 279.237 197.357L322.316 183.203L322.326 172.715L295.353 105.822C295.132 105.888 294.901 105.929 294.662 105.945L277.566 195.889ZM275.054 196.023C275.478 195.81 275.956 195.69 276.463 195.69C276.481 195.69 276.498 195.69 276.516 195.69L293.596 105.831C292.689 105.572 291.95 104.916 291.579 104.063L221.404 119.856C221.407 119.908 221.408 119.962 221.408 120.015C221.408 120.859 221.075 121.624 220.534 122.189L275.054 196.023ZM273.327 198.645C273.372 197.875 273.694 197.18 274.195 196.658L219.675 122.824C219.251 123.036 218.773 123.156 218.267 123.156C218.177 123.156 218.088 123.152 218 123.145L196.723 204.645C197.726 205.075 198.493 205.948 198.779 207.018L273.327 198.645ZM192.716 205.464C193.369 204.781 194.29 204.356 195.31 204.356C195.438 204.356 195.564 204.363 195.689 204.376L216.966 122.875C216.365 122.601 215.866 122.144 215.54 121.575L124.275 154.81C124.304 154.995 124.32 155.185 124.32 155.378C124.32 155.957 124.183 156.503 123.94 156.987L192.716 205.464ZM122.285 152.142C123.007 152.49 123.596 153.072 123.95 153.791L215.175 120.571C215.142 120.391 215.125 120.205 215.125 120.015C215.125 119.494 215.252 119.004 215.476 118.571L140.679 61.8758C140.118 62.4003 139.364 62.7214 138.535 62.7214C138.526 62.7214 138.516 62.7213 138.507 62.7213L122.285 152.142ZM118.328 152.71C118.965 152.137 119.806 151.788 120.73 151.788C120.908 151.788 121.084 151.801 121.256 151.827L137.456 62.5309C136.925 62.3366 136.461 62.0031 136.108 61.5746L62.1426 103.665C62.2631 103.999 62.3288 104.358 62.3288 104.733C62.3288 105.299 62.1793 105.83 61.9177 106.288L118.328 152.71ZM117.304 156.455C117.197 156.115 117.14 155.753 117.14 155.378C117.14 154.704 117.326 154.073 117.649 153.534L61.2382 107.113C60.6879 107.588 59.9712 107.875 59.1875 107.875C59.1393 107.875 59.0913 107.873 59.0436 107.871L40.4998 192.215C41.0479 192.438 41.5186 192.812 41.8607 193.285L117.304 156.455ZM38.5155 192.085C38.7703 192.018 39.0378 191.983 39.3136 191.983C39.3613 191.983 39.4087 191.984 39.4558 191.986L57.9997 107.642C57.3293 107.368 56.7748 106.869 56.43 106.239L16.2071 119.979L11.5497 132.916L38.5155 192.085ZM36.6596 196.805C36.351 196.319 36.1723 195.743 36.1723 195.124C36.1723 194.046 36.7156 193.095 37.5432 192.529L11.0314 134.355L6.88724 145.866L6.89013 154.305L14.9996 151.166C14.9586 151.563 14.9193 151.96 14.8815 152.358L6.89052 155.451L6.89411 165.915L15.5975 186.938C15.7984 188.407 16.0215 189.878 16.2669 191.348L6.89507 168.711L6.91345 222.334C7.29728 222.411 7.65155 222.57 7.95739 222.792L36.6596 196.805ZM56.0849 105.227L16.6707 118.692L23.0253 101.041L37.1844 81.8201L38.0191 85.2626C38.2835 84.8484 38.55 84.4355 38.8184 84.0238L38.0118 80.697L49.0515 65.7105L53.6363 64.8413C54.0376 64.3998 54.4416 63.9606 54.8482 63.5237L49.9829 64.4461L62.8296 47.0069L66.9662 43.8651L59.0762 101.594C57.3929 101.653 56.0463 103.036 56.0463 104.733C56.0463 104.901 56.0595 105.066 56.0849 105.227ZM60.1353 101.738L68.1699 42.9509L71.5632 40.3737L135.415 59.2158C135.401 59.3354 135.394 59.4569 135.394 59.5801C135.394 59.9543 135.459 60.3131 135.579 60.6458L61.613 102.737C61.2317 102.274 60.7205 101.922 60.1353 101.738ZM135.717 58.1907L72.6198 39.5712L77.0353 36.2177L107.184 25.3982L107.386 27.0311C107.727 26.8898 108.069 26.7498 108.411 26.6109L108.215 25.0281L142.343 12.7805L161.183 12.1933L139.418 56.5645C139.138 56.4828 138.842 56.4388 138.535 56.4388C137.299 56.4388 136.23 57.1527 135.717 58.1907ZM140.377 57.0353L162.392 12.1555L176.296 11.7222L182.132 15.8371L181.319 16.2609C181.879 16.3203 182.44 16.3828 182.999 16.4485L221.745 43.7658C221.553 44.1701 221.444 44.6221 221.442 45.0991L141.5 58.5388C141.286 57.9301 140.89 57.4071 140.377 57.0353ZM141.676 59.5928L221.618 46.1532C221.961 47.1325 222.776 47.8901 223.79 48.1538L217.992 116.886C217.272 116.948 216.621 117.254 216.122 117.72L141.325 61.0244C141.548 60.5955 141.674 60.1088 141.676 59.5928ZM219.057 116.974L224.855 48.2432C225.532 48.1851 226.148 47.9121 226.634 47.4926L291.814 101.116C291.501 101.604 291.319 102.186 291.319 102.81C291.319 102.882 291.321 102.953 291.326 103.024L221.17 118.813C220.796 117.912 220.016 117.223 219.057 116.974ZM292.537 100.326L227.314 46.6675C227.575 46.2093 227.724 45.6788 227.724 45.1136C227.724 44.9557 227.713 44.8005 227.69 44.6489L260.686 33.7462C261.15 34.5569 262.023 35.1032 263.024 35.1032C263.073 35.1032 263.122 35.102 263.17 35.0994L268.63 56.1418C269.121 56.599 269.608 57.0596 270.093 57.5236L265.125 38.3777L292.901 100.082C292.774 100.155 292.652 100.237 292.537 100.326ZM293.908 99.7168L265.451 36.4977L317.208 104.822L282.599 71.0532C284.228 73.0471 285.808 75.0869 287.339 77.1712L320.507 109.534C320.426 109.642 320.353 109.757 320.289 109.877L297.587 103.108C297.597 103.01 297.601 102.91 297.601 102.81C297.601 101.075 296.195 99.6685 294.46 99.6685C294.272 99.6685 294.087 99.6851 293.908 99.7168ZM297.307 104.14L319.983 110.901C319.976 110.981 319.972 111.062 319.972 111.144C319.972 111.688 320.134 112.195 320.412 112.618L309.817 121.835C309.933 122.207 310.047 122.58 310.159 122.954L321.165 113.38C321.52 113.619 321.936 113.775 322.384 113.822L322.329 169.865L296.313 105.346C296.738 105.036 297.082 104.621 297.307 104.14ZM260.351 32.7313L227.355 43.6342C226.826 42.6451 225.783 41.9723 224.583 41.9723C223.715 41.9723 222.93 42.3241 222.361 42.8928L184.182 15.9746L191.873 11.9691L191.893 11.975C192.205 12.2848 192.623 12.4872 193.089 12.5219L194.327 18.2175C194.709 18.292 195.09 18.368 195.47 18.4456L194.212 12.6594L196.383 13.3L210.6 22.3507C211.984 22.7855 213.362 23.24 214.732 23.7139L200.093 14.3949L260.342 32.1758C260.335 32.2532 260.332 32.3316 260.332 32.4108C260.332 32.5192 260.338 32.6262 260.351 32.7313ZM4.34944 156.434C4.35389 156.487 4.35616 156.541 4.35616 156.595C4.35616 157.193 4.07992 157.726 3.64815 158.074L5.82449 163.331L5.82193 155.864L4.34944 156.434ZM3.57664 155.061C3.72253 155.168 3.85264 155.295 3.9628 155.438L5.82153 154.719L5.81951 148.832L3.57664 155.061ZM6.95329 125.407C6.92906 125.413 6.9047 125.418 6.88023 125.423L6.88616 142.714L10.3968 132.963L6.95329 125.407ZM9.0138 122.437C9.02844 122.55 9.03599 122.666 9.03599 122.784C9.03599 123.68 8.59844 124.473 7.92538 124.963L10.9151 131.523L14.9119 120.422L9.0138 122.437ZM8.3396 120.977C8.46396 121.114 8.57435 121.264 8.66854 121.425L15.3755 119.134L20.8036 104.057L8.3396 120.977ZM34.2813 69.8477C34.2729 69.8473 34.2646 69.8468 34.2562 69.8463L24.2942 97.5165L36.8557 80.4644L34.2813 69.8477ZM36.2613 68.1353C36.2012 68.7606 35.8379 69.2971 35.3201 69.5963L37.683 79.3412L47.5086 66.003L36.2613 68.1353ZM67.3078 41.3662C67.2229 41.3366 67.1399 41.3029 67.0591 41.2652L65.0738 43.9604L67.1709 42.3676L67.3078 41.3662ZM70.8592 38.4341C70.8776 38.5612 70.8871 38.6911 70.8871 38.8232C70.8871 38.9019 70.8837 38.9799 70.8771 39.057L71.3472 39.1957L73.6854 37.4199L70.8592 38.4341ZM105.927 15.2463C105.622 15.1967 105.342 15.0749 105.105 14.899L79.8695 34.0652L107.049 24.311L105.927 15.2463ZM108.072 13.8488C107.925 14.4192 107.519 14.8856 106.987 15.1158L108.08 23.941L138.878 12.8885L108.072 13.8488ZM164.276 5.88699C164.013 5.68387 163.787 5.43292 163.614 5.14706L145.606 11.6095L161.716 11.1074L164.276 5.88699ZM167.767 5.70889C167.284 6.16495 166.634 6.44458 165.917 6.44458C165.682 6.44458 165.454 6.41437 165.236 6.35764L162.925 11.0697L174.843 10.6982L167.767 5.70889ZM324.092 182.619C324.08 182.515 324.074 182.409 324.074 182.302C324.074 181.363 324.556 180.535 325.285 180.054L323.392 175.359L323.385 182.851L324.092 182.619ZM325.319 184.573C324.951 184.338 324.643 184.015 324.426 183.634L323.384 183.977L323.378 189.603L325.319 184.573ZM320.927 212.807C320.925 212.771 320.924 212.735 320.924 212.699C320.924 212.101 321.2 211.568 321.632 211.22L318.632 204.872L314.767 214.887L320.927 212.807ZM321.375 213.927C321.344 213.891 321.314 213.853 321.286 213.814L314.267 216.184L307.964 232.516L321.375 213.927ZM294.3 263.367C294.435 263.346 294.573 263.336 294.713 263.336C294.784 263.336 294.854 263.338 294.923 263.344L303.986 239.856L292.331 256.012L294.3 263.367ZM292.021 266.06C292.02 266.049 292.02 266.039 292.02 266.028C292.02 265.062 292.529 264.215 293.294 263.74L291.524 257.131L283.811 267.821L292.021 266.06ZM292.322 267.267C292.294 267.214 292.268 267.16 292.244 267.105L282.878 269.114L272.999 282.808L292.322 267.267ZM260.401 296.467C260.645 296.099 261.03 295.832 261.478 295.742L261.796 293.189L258.396 295.924L260.401 296.467ZM222.807 321.292C223.404 321.324 223.949 321.551 224.38 321.91L248.283 302.686L221.454 312.041L222.807 321.292ZM220.021 323.435C220.212 322.51 220.876 321.758 221.749 321.445L220.426 312.399L189.127 323.313L220.021 323.435ZM233.284 316.121L258.13 299.252L251.294 301.636L233.284 316.121ZM169.305 330.225L186.096 324.37L214.474 324.482L169.305 330.225ZM161.413 330.046L152.977 324.24L140.057 324.189L161.413 330.046ZM322.304 195.356L319.163 203.495L322.289 210.11L322.304 195.356ZM323.395 172.509L323.437 130.571L326.061 179.12L323.395 172.509ZM323.363 204.372L323.375 192.579L325.665 186.644L323.363 204.372ZM306.449 236.443L318.523 219.707L297.554 259.495L306.449 236.443ZM285.166 274.394L270.642 286.075L265.635 293.014L285.166 274.394ZM262.598 295.397L267.502 288.6L262.993 292.227L262.598 295.397ZM260.004 297.467L257.367 296.752L253.778 299.638L260.004 297.467ZM183.199 15.2816L190.396 11.5332L189.628 11.3066L178.072 11.6668L183.199 15.2816ZM176.62 10.6428L186.352 10.3395L168.873 5.18115L176.62 10.6428ZM48.44 64.7386L59.8163 49.2954L36.5028 67.0018L48.44 64.7386ZM5.83919 206.217L5.82544 166.127L3.17139 159.716L5.83919 206.217ZM5.81843 145.68L3.51388 152.081L5.81377 132.08L5.81843 145.68ZM31.0191 75.6826L22.0725 100.533L9.80921 117.18L31.0191 75.6826ZM62.0605 46.2489L47.9109 56.9954L64.9587 42.3145L62.0605 46.2489ZM91.6957 23.7411L76.5196 35.2673L72.0974 36.8543L91.6957 23.7411ZM142.141 11.7176L114.51 12.5789L160.31 5.19745L142.141 11.7176ZM11.1195 230.32L64.4964 300.477L49.2711 267.365L11.1195 230.32Z",fill:"url(#paint1_radial-513745)"})," ",jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"paint0_radial-771657",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(131.5 27) rotate(76.5554) scale(305.369)",children:[jsxRuntimeExports.jsx("stop",{offset:"0.260417","stop-color":"#171717"})," ",jsxRuntimeExports.jsx("stop",{offset:"0.727754","stop-color":"#0F0F0F"})," ",jsxRuntimeExports.jsx("stop",{offset:"1","stop-color":"#04875E"})]})," ",jsxRuntimeExports.jsxs("radialGradient",{id:"paint1_radial-513745",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(223 326.5) rotate(-108.504) scale(182.753 305.986)",children:[jsxRuntimeExports.jsx("stop",{"stop-color":"#03D19F"})," ",jsxRuntimeExports.jsx("stop",{offset:"0.520536","stop-color":"#696969"})," ",jsxRuntimeExports.jsx("stop",{offset:"1","stop-color":"#171717"})]})]})]});var Send={},interopRequireDefault={exports:{}};(function(e){function o(a){return a&&a.__esModule?a:{default:a}}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon$1={};function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},_extends$4.apply(this,arguments)}function isPlainObject$1(e){if(typeof e!="object"||e===null)return!1;const o=Object.getPrototypeOf(e);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function deepClone(e){if(!isPlainObject$1(e))return e;const o={};return Object.keys(e).forEach(a=>{o[a]=deepClone(e[a])}),o}function deepmerge(e,o,a={clone:!0}){const c=a.clone?_extends$4({},e):e;return isPlainObject$1(e)&&isPlainObject$1(o)&&Object.keys(o).forEach(d=>{d!=="__proto__"&&(isPlainObject$1(o[d])&&d in e&&isPlainObject$1(e[d])?c[d]=deepmerge(e[d],o[d],a):a.clone?c[d]=isPlainObject$1(o[d])?deepClone(o[d]):o[d]:c[d]=o[d])}),c}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(c,d,g,b,j,$){if($!==ReactPropTypesSecret){var _e=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _e.name="Invariant Violation",_e}}e.isRequired=e;function o(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:o,element:e,elementType:e,instanceOf:o,node:e,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return a.PropTypes=a,a};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;function formatMuiErrorMessage(e){let o="https://mui.com/production-error/?code="+e;for(let a=1;a<arguments.length;a+=1)o+="&args[]="+encodeURIComponent(arguments[a]);return"Minified MUI error #"+e+"; visit "+o+" for the full message."}function capitalize$1(e){if(typeof e!="string")throw new Error(formatMuiErrorMessage(7));return e.charAt(0).toUpperCase()+e.slice(1)}function createChainedFunction(...e){return e.reduce((o,a)=>a==null?o:function(...d){o.apply(this,d),a.apply(this,d)},()=>{})}function debounce(e,o=166){let a;function c(...d){const g=()=>{e.apply(this,d)};clearTimeout(a),a=setTimeout(g,o)}return c.clear=()=>{clearTimeout(a)},c}function deprecatedPropType(e,o){return()=>null}function isMuiElement(e,o){var a,c;return reactExports$1.isValidElement(e)&&o.indexOf((a=e.type.muiName)!=null?a:(c=e.type)==null||(c=c._payload)==null||(c=c.value)==null?void 0:c.muiName)!==-1}function ownerDocument(e){return e&&e.ownerDocument||document}function ownerWindow(e){return ownerDocument(e).defaultView||window}function requirePropFactory(e,o){return()=>null}function setRef$1(e,o){typeof e=="function"?e(o):e&&(e.current=o)}const useEnhancedEffect=typeof window<"u"?reactExports$1.useLayoutEffect:reactExports$1.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(e){const[o,a]=reactExports$1.useState(e),c=e||o;return reactExports$1.useEffect(()=>{o==null&&(globalId+=1,a(`mui-${globalId}`))},[o]),c}const maybeReactUseId=React$3.useId;function useId$1(e){if(maybeReactUseId!==void 0){const o=maybeReactUseId();return e??o}return useGlobalId(e)}function unsupportedProp(e,o,a,c,d){return null}function useControlled({controlled:e,default:o,name:a,state:c="value"}){const{current:d}=reactExports$1.useRef(e!==void 0),[g,b]=reactExports$1.useState(o),j=d?e:g,$=reactExports$1.useCallback(_e=>{d||b(_e)},[]);return[j,$]}function useEventCallback$1(e){const o=reactExports$1.useRef(e);return useEnhancedEffect$1(()=>{o.current=e}),reactExports$1.useRef((...a)=>(0,o.current)(...a)).current}function useForkRef(...e){return reactExports$1.useMemo(()=>e.every(o=>o==null)?null:o=>{e.forEach(a=>{setRef$1(a,o)})},e)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(e){const{type:o,tagName:a}=e;return!!(a==="INPUT"&&inputTypesWhitelist[o]&&!e.readOnly||a==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function handleKeyDown(e){e.metaKey||e.altKey||e.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(e){e.addEventListener("keydown",handleKeyDown,!0),e.addEventListener("mousedown",handlePointerDown,!0),e.addEventListener("pointerdown",handlePointerDown,!0),e.addEventListener("touchstart",handlePointerDown,!0),e.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(e){const{target:o}=e;try{return o.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(o)}function useIsFocusVisible(){const e=reactExports$1.useCallback(d=>{d!=null&&prepare(d.ownerDocument)},[]),o=reactExports$1.useRef(!1);function a(){return o.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),o.current=!1,!0):!1}function c(d){return isFocusVisible(d)?(o.current=!0,!0):!1}return{isFocusVisibleRef:o,onFocus:c,onBlur:a,ref:e}}function resolveProps(e,o){const a=_extends$4({},o);return Object.keys(e).forEach(c=>{if(c.toString().match(/^(components|slots)$/))a[c]=_extends$4({},e[c],a[c]);else if(c.toString().match(/^(componentsProps|slotProps)$/)){const d=e[c]||{},g=o[c];a[c]={},!g||!Object.keys(g)?a[c]=d:!d||!Object.keys(d)?a[c]=g:(a[c]=_extends$4({},g),Object.keys(d).forEach(b=>{a[c][b]=resolveProps(d[b],g[b])}))}else a[c]===void 0&&(a[c]=e[c])}),a}function composeClasses(e,o,a=void 0){const c={};return Object.keys(e).forEach(d=>{c[d]=e[d].reduce((g,b)=>{if(b){const j=o(b);j!==""&&g.push(j),a&&a[b]&&g.push(a[b])}return g},[]).join(" ")}),c}const defaultGenerator=e=>e,createClassNameGenerator=()=>{let e=defaultGenerator;return{configure(o){e=o},generate(o){return e(o)},reset(){e=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(e,o,a="Mui"){const c=globalStateClasses[o];return c?`${a}-${c}`:`${ClassNameGenerator.generate(e)}-${o}`}function generateUtilityClasses(e,o,a="Mui"){const c={};return o.forEach(d=>{c[d]=generateUtilityClass(e,d,a)}),c}function clamp$2(e,o=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(o,Math.min(e,a))}function _objectWithoutPropertiesLoose$3(e,o){if(e==null)return{};var a={},c=Object.keys(e),d,g;for(g=0;g<c.length;g++)d=c[g],!(o.indexOf(d)>=0)&&(a[d]=e[d]);return a}function r$1(e){var o,a,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(o=0;o<d;o++)e[o]&&(a=r$1(e[o]))&&(c&&(c+=" "),c+=a)}else for(a in e)e[a]&&(c&&(c+=" "),c+=a);return c}function clsx(){for(var e,o,a=0,c="",d=arguments.length;a<d;a++)(e=arguments[a])&&(o=r$1(e))&&(c&&(c+=" "),c+=o);return c}function memoize$1(e){var o=Object.create(null);return function(a){return o[a]===void 0&&(o[a]=e(a)),o[a]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(e){return reactPropsRegex.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function sheetForTag(e){if(e.sheet)return e.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===e)return document.styleSheets[o]}function createStyleElement(e){var o=document.createElement("style");return o.setAttribute("data-emotion",e.key),e.nonce!==void 0&&o.setAttribute("nonce",e.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function e(a){var c=this;this._insertTag=function(d){var g;c.tags.length===0?c.insertionPoint?g=c.insertionPoint.nextSibling:c.prepend?g=c.container.firstChild:g=c.before:g=c.tags[c.tags.length-1].nextSibling,c.container.insertBefore(d,g),c.tags.push(d)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var o=e.prototype;return o.hydrate=function(c){c.forEach(this._insertTag)},o.insert=function(c){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var g=sheetForTag(d);try{g.insertRule(c,g.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(c));this.ctr++},o.flush=function(){this.tags.forEach(function(c){return c.parentNode&&c.parentNode.removeChild(c)}),this.tags=[],this.ctr=0},e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(e,o){return charat(e,0)^45?(((o<<2^charat(e,0))<<2^charat(e,1))<<2^charat(e,2))<<2^charat(e,3):0}function trim$2(e){return e.trim()}function match(e,o){return(e=o.exec(e))?e[0]:e}function replace$1(e,o,a){return e.replace(o,a)}function indexof(e,o){return e.indexOf(o)}function charat(e,o){return e.charCodeAt(o)|0}function substr(e,o,a){return e.slice(o,a)}function strlen(e){return e.length}function sizeof(e){return e.length}function append(e,o){return o.push(e),e}function combine(e,o){return e.map(o).join("")}var line=1,column=1,length$1=0,position=0,character=0,characters="";function node(e,o,a,c,d,g,b){return{value:e,root:o,parent:a,type:c,props:d,children:g,line,column,length:b,return:""}}function copy$4(e,o){return assign(node("",null,null,"",null,null,0),e,{length:-e.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length$1?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(e,o){return substr(characters,e,o)}function token(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(e){return line=column=1,length$1=strlen(characters=e),position=0,[]}function dealloc(e){return characters="",e}function delimit(e){return trim$2(slice$1(position-1,delimiter(e===91?e+2:e===40?e+1:e)))}function whitespace(e){for(;(character=peek())&&character<33;)next();return token(e)>2||token(character)>3?"":" "}function escaping(e,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(e,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(e){for(;next();)switch(character){case e:return position;case 34:case 39:e!==34&&e!==39&&delimiter(character);break;case 40:e===41&&delimiter(e);break;case 92:next();break}return position}function commenter(e,o){for(;next()&&e+character!==57;)if(e+character===84&&peek()===47)break;return"/*"+slice$1(o,position-1)+"*"+from(e===47?e:next())}function identifier(e){for(;!token(peek());)next();return slice$1(e,position)}function compile(e){return dealloc(parse("",null,null,null,[""],e=alloc(e),0,[0],e))}function parse(e,o,a,c,d,g,b,j,$){for(var _e=0,st=0,rt=b,ut=0,gt=0,yt=0,wt=1,Ct=1,Pt=1,At=0,Tt="",kt=d,It=g,Lt=c,Ft=Tt;Ct;)switch(yt=At,At=next()){case 40:if(yt!=108&&charat(Ft,rt-1)==58){indexof(Ft+=replace$1(delimit(At),"&","&\f"),"&\f")!=-1&&(Pt=-1);break}case 34:case 39:case 91:Ft+=delimit(At);break;case 9:case 10:case 13:case 32:Ft+=whitespace(yt);break;case 92:Ft+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,a),$);break;default:Ft+="/"}break;case 123*wt:j[_e++]=strlen(Ft)*Pt;case 125*wt:case 59:case 0:switch(At){case 0:case 125:Ct=0;case 59+st:Pt==-1&&(Ft=replace$1(Ft,/\f/g,"")),gt>0&&strlen(Ft)-rt&&append(gt>32?declaration(Ft+";",c,a,rt-1):declaration(replace$1(Ft," ","")+";",c,a,rt-2),$);break;case 59:Ft+=";";default:if(append(Lt=ruleset(Ft,o,a,_e,st,d,j,Tt,kt=[],It=[],rt),g),At===123)if(st===0)parse(Ft,o,Lt,Lt,kt,g,rt,j,It);else switch(ut===99&&charat(Ft,3)===110?100:ut){case 100:case 108:case 109:case 115:parse(e,Lt,Lt,c&&append(ruleset(e,Lt,Lt,0,0,d,j,Tt,d,kt=[],rt),It),d,It,rt,j,c?kt:It);break;default:parse(Ft,Lt,Lt,Lt,[""],It,0,j,It)}}_e=st=gt=0,wt=Pt=1,Tt=Ft="",rt=b;break;case 58:rt=1+strlen(Ft),gt=yt;default:if(wt<1){if(At==123)--wt;else if(At==125&&wt++==0&&prev()==125)continue}switch(Ft+=from(At),At*wt){case 38:Pt=st>0?1:(Ft+="\f",-1);break;case 44:j[_e++]=(strlen(Ft)-1)*Pt,Pt=1;break;case 64:peek()===45&&(Ft+=delimit(next())),ut=peek(),st=rt=strlen(Tt=Ft+=identifier(caret())),At++;break;case 45:yt===45&&strlen(Ft)==2&&(wt=0)}}return g}function ruleset(e,o,a,c,d,g,b,j,$,_e,st){for(var rt=d-1,ut=d===0?g:[""],gt=sizeof(ut),yt=0,wt=0,Ct=0;yt<c;++yt)for(var Pt=0,At=substr(e,rt+1,rt=abs(wt=b[yt])),Tt=e;Pt<gt;++Pt)(Tt=trim$2(wt>0?ut[Pt]+" "+At:replace$1(At,/&\f/g,ut[Pt])))&&($[Ct++]=Tt);return node(e,o,a,d===0?RULESET:j,$,_e,st)}function comment(e,o,a){return node(e,o,a,COMMENT,from(char()),substr(e,2,-2),0)}function declaration(e,o,a,c){return node(e,o,a,DECLARATION,substr(e,0,c),substr(e,c+1,-1),c)}function serialize(e,o){for(var a="",c=sizeof(e),d=0;d<c;d++)a+=o(e[d],d,e,o)||"";return a}function stringify$1(e,o,a,c){switch(e.type){case LAYER:if(e.children.length)break;case IMPORT:case DECLARATION:return e.return=e.return||e.value;case COMMENT:return"";case KEYFRAMES:return e.return=e.value+"{"+serialize(e.children,c)+"}";case RULESET:e.value=e.props.join(",")}return strlen(a=serialize(e.children,c))?e.return=e.value+"{"+a+"}":""}function middleware(e){var o=sizeof(e);return function(a,c,d,g){for(var b="",j=0;j<o;j++)b+=e[j](a,c,d,g)||"";return b}}function rulesheet(e){return function(o){o.root||(o=o.return)&&e(o)}}var identifierWithPointTracking=function(o,a,c){for(var d=0,g=0;d=g,g=peek(),d===38&&g===12&&(a[c]=1),!token(g);)next();return slice$1(o,position)},toRules=function(o,a){var c=-1,d=44;do switch(token(d)){case 0:d===38&&peek()===12&&(a[c]=1),o[c]+=identifierWithPointTracking(position-1,a,c);break;case 2:o[c]+=delimit(d);break;case 4:if(d===44){o[++c]=peek()===58?"&\f":"",a[c]=o[c].length;break}default:o[c]+=from(d)}while(d=next());return o},getRules=function(o,a){return dealloc(toRules(alloc(o),a))},fixedElements=new WeakMap,compat=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var a=o.value,c=o.parent,d=o.column===c.column&&o.line===c.line;c.type!=="rule";)if(c=c.parent,!c)return;if(!(o.props.length===1&&a.charCodeAt(0)!==58&&!fixedElements.get(c))&&!d){fixedElements.set(o,!0);for(var g=[],b=getRules(a,g),j=c.props,$=0,_e=0;$<b.length;$++)for(var st=0;st<j.length;st++,_e++)o.props[_e]=g[$]?b[$].replace(/&\f/g,j[st]):j[st]+" "+b[$]}}},removeLabel=function(o){if(o.type==="decl"){var a=o.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(e,o){switch(hash(e,o)){case 5103:return WEBKIT+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+e+MOZ+e+MS+e+e;case 6828:case 4268:return WEBKIT+e+MS+e+e;case 6165:return WEBKIT+e+MS+"flex-"+e+e;case 5187:return WEBKIT+e+replace$1(e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+e;case 5443:return WEBKIT+e+MS+"flex-item-"+replace$1(e,/flex-|-self/,"")+e;case 4675:return WEBKIT+e+MS+"flex-line-pack"+replace$1(e,/align-content|flex-|-self/,"")+e;case 5548:return WEBKIT+e+MS+replace$1(e,"shrink","negative")+e;case 5292:return WEBKIT+e+MS+replace$1(e,"basis","preferred-size")+e;case 6060:return WEBKIT+"box-"+replace$1(e,"-grow","")+WEBKIT+e+MS+replace$1(e,"grow","positive")+e;case 4554:return WEBKIT+replace$1(e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+e;case 6187:return replace$1(replace$1(replace$1(e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),e,"")+e;case 5495:case 3959:return replace$1(e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace$1(replace$1(e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+e+e;case 4095:case 3583:case 4068:case 2532:return replace$1(e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(e)-1-o>6)switch(charat(e,o+1)){case 109:if(charat(e,o+4)!==45)break;case 102:return replace$1(e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(e,o+3)==108?"$3":"$2-$3"))+e;case 115:return~indexof(e,"stretch")?prefix(replace$1(e,"stretch","fill-available"),o)+e:e}break;case 4949:if(charat(e,o+1)!==115)break;case 6444:switch(charat(e,strlen(e)-3-(~indexof(e,"!important")&&10))){case 107:return replace$1(e,":",":"+WEBKIT)+e;case 101:return replace$1(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+e}break;case 5936:switch(charat(e,o+11)){case 114:return WEBKIT+e+MS+replace$1(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return WEBKIT+e+MS+replace$1(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return WEBKIT+e+MS+replace$1(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return WEBKIT+e+MS+e+e}return e}var prefixer=function(o,a,c,d){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy$4(o,{value:replace$1(o.value,"@","@"+WEBKIT)})],d);case RULESET:if(o.length)return combine(o.props,function(g){switch(match(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy$4(o,{props:[replace$1(g,/:(read-\w+)/,":"+MOZ+"$1")]})],d);case"::placeholder":return serialize([copy$4(o,{props:[replace$1(g,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$4(o,{props:[replace$1(g,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$4(o,{props:[replace$1(g,/:(plac\w+)/,MS+"input-$1")]})],d)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(o){var a=o.key;if(a==="css"){var c=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(c,function(wt){var Ct=wt.getAttribute("data-emotion");Ct.indexOf(" ")!==-1&&(document.head.appendChild(wt),wt.setAttribute("data-s",""))})}var d=o.stylisPlugins||defaultStylisPlugins,g={},b,j=[];b=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(wt){for(var Ct=wt.getAttribute("data-emotion").split(" "),Pt=1;Pt<Ct.length;Pt++)g[Ct[Pt]]=!0;j.push(wt)});var $,_e=[compat,removeLabel];{var st,rt=[stringify$1,rulesheet(function(wt){st.insert(wt)})],ut=middleware(_e.concat(d,rt)),gt=function(Ct){return serialize(compile(Ct),ut)};$=function(Ct,Pt,At,Tt){st=At,gt(Ct?Ct+"{"+Pt.styles+"}":Pt.styles),Tt&&(yt.inserted[Pt.name]=!0)}}var yt={key:a,sheet:new StyleSheet({key:a,container:b,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:g,registered:{},insert:$};return yt.sheet.hydrate(j),yt},isBrowser$1=!0;function getRegisteredStyles(e,o,a){var c="";return a.split(" ").forEach(function(d){e[d]!==void 0?o.push(e[d]+";"):c+=d+" "}),c}var registerStyles=function(o,a,c){var d=o.key+"-"+a.name;(c===!1||isBrowser$1===!1)&&o.registered[d]===void 0&&(o.registered[d]=a.styles)},insertStyles=function(o,a,c){registerStyles(o,a,c);var d=o.key+"-"+a.name;if(o.inserted[a.name]===void 0){var g=a;do o.insert(a===g?"."+d:"",g,o.sheet,!0),g=g.next;while(g!==void 0)}};function murmur2(e){for(var o=0,a,c=0,d=e.length;d>=4;++c,d-=4)a=e.charCodeAt(c)&255|(e.charCodeAt(++c)&255)<<8|(e.charCodeAt(++c)&255)<<16|(e.charCodeAt(++c)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,o=(a&65535)*1540483477+((a>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(d){case 3:o^=(e.charCodeAt(c+2)&255)<<16;case 2:o^=(e.charCodeAt(c+1)&255)<<8;case 1:o^=e.charCodeAt(c)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(o){return o.charCodeAt(1)===45},isProcessableValue=function(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(e){return isCustomProperty(e)?e:e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(o,a){switch(o){case"animation":case"animationName":if(typeof a=="string")return a.replace(animationRegex,function(c,d,g){return cursor={name:d,styles:g,next:cursor},d})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof a=="number"&&a!==0?a+"px":a},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(e,o,a){if(a==null)return"";if(a.__emotion_styles!==void 0)return a;switch(typeof a){case"boolean":return"";case"object":{if(a.anim===1)return cursor={name:a.name,styles:a.styles,next:cursor},a.name;if(a.styles!==void 0){var c=a.next;if(c!==void 0)for(;c!==void 0;)cursor={name:c.name,styles:c.styles,next:cursor},c=c.next;var d=a.styles+";";return d}return createStringFromObject(e,o,a)}case"function":{if(e!==void 0){var g=cursor,b=a(e);return cursor=g,handleInterpolation(e,o,b)}break}}if(o==null)return a;var j=o[a];return j!==void 0?j:a}function createStringFromObject(e,o,a){var c="";if(Array.isArray(a))for(var d=0;d<a.length;d++)c+=handleInterpolation(e,o,a[d])+";";else for(var g in a){var b=a[g];if(typeof b!="object")o!=null&&o[b]!==void 0?c+=g+"{"+o[b]+"}":isProcessableValue(b)&&(c+=processStyleName(g)+":"+processStyleValue(g,b)+";");else if(Array.isArray(b)&&typeof b[0]=="string"&&(o==null||o[b[0]]===void 0))for(var j=0;j<b.length;j++)isProcessableValue(b[j])&&(c+=processStyleName(g)+":"+processStyleValue(g,b[j])+";");else{var $=handleInterpolation(e,o,b);switch(g){case"animation":case"animationName":{c+=processStyleName(g)+":"+$+";";break}default:c+=g+"{"+$+"}"}}}return c}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(o,a,c){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var d=!0,g="";cursor=void 0;var b=o[0];b==null||b.raw===void 0?(d=!1,g+=handleInterpolation(c,a,b)):g+=b[0];for(var j=1;j<o.length;j++)g+=handleInterpolation(c,a,o[j]),d&&(g+=b[j]);labelPattern.lastIndex=0;for(var $="",_e;(_e=labelPattern.exec(g))!==null;)$+="-"+_e[1];var st=murmur2(g)+$;return{name:st,styles:g,next:cursor}},syncFallback=function(o){return o()},useInsertionEffect=React$3.useInsertionEffect?React$3.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=reactExports$1.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(o){return reactExports$1.forwardRef(function(a,c){var d=reactExports$1.useContext(EmotionCacheContext);return o(a,d,c)})},ThemeContext=reactExports$1.createContext({}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(o){return o!=="theme"},getDefaultShouldForwardProp=function(o){return typeof o=="string"&&o.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(o,a,c){var d;if(a){var g=a.shouldForwardProp;d=o.__emotion_forwardProp&&g?function(b){return o.__emotion_forwardProp(b)&&g(b)}:g}return typeof d!="function"&&c&&(d=o.__emotion_forwardProp),d},Insertion=function(o){var a=o.cache,c=o.serialized,d=o.isStringTag;return registerStyles(a,c,d),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(a,c,d)}),null},createStyled$1=function e(o,a){var c=o.__emotion_real===o,d=c&&o.__emotion_base||o,g,b;a!==void 0&&(g=a.label,b=a.target);var j=composeShouldForwardProps(o,a,c),$=j||getDefaultShouldForwardProp(d),_e=!$("as");return function(){var st=arguments,rt=c&&o.__emotion_styles!==void 0?o.__emotion_styles.slice(0):[];if(g!==void 0&&rt.push("label:"+g+";"),st[0]==null||st[0].raw===void 0)rt.push.apply(rt,st);else{rt.push(st[0][0]);for(var ut=st.length,gt=1;gt<ut;gt++)rt.push(st[gt],st[0][gt])}var yt=withEmotionCache(function(wt,Ct,Pt){var At=_e&&wt.as||d,Tt="",kt=[],It=wt;if(wt.theme==null){It={};for(var Lt in wt)It[Lt]=wt[Lt];It.theme=reactExports$1.useContext(ThemeContext)}typeof wt.className=="string"?Tt=getRegisteredStyles(Ct.registered,kt,wt.className):wt.className!=null&&(Tt=wt.className+" ");var Ft=serializeStyles(rt.concat(kt),Ct.registered,It);Tt+=Ct.key+"-"+Ft.name,b!==void 0&&(Tt+=" "+b);var Nt=_e&&j===void 0?getDefaultShouldForwardProp(At):$,Ht={};for(var dr in wt)_e&&dr==="as"||Nt(dr)&&(Ht[dr]=wt[dr]);return Ht.className=Tt,Ht.ref=Pt,reactExports$1.createElement(reactExports$1.Fragment,null,reactExports$1.createElement(Insertion,{cache:Ct,serialized:Ft,isStringTag:typeof At=="string"}),reactExports$1.createElement(At,Ht))});return yt.displayName=g!==void 0?g:"Styled("+(typeof d=="string"?d:d.displayName||d.name||"Component")+")",yt.defaultProps=o.defaultProps,yt.__emotion_real=yt,yt.__emotion_base=d,yt.__emotion_styles=rt,yt.__emotion_forwardProp=j,Object.defineProperty(yt,"toString",{value:function(){return"."+b}}),yt.withComponent=function(wt,Ct){return e(wt,_extends$4({},a,Ct,{shouldForwardProp:composeShouldForwardProps(yt,Ct,!0)})).apply(void 0,rt)},yt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(e){newStyled[e]=newStyled(e)});function styled$1(e,o){return newStyled(e,o)}const internal_processStyles=(e,o)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=o(e.__emotion_styles))},_excluded$g=["values","unit","step"],sortBreakpointsValues=e=>{const o=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return o.sort((a,c)=>a.val-c.val),o.reduce((a,c)=>_extends$4({},a,{[c.key]:c.val}),{})};function createBreakpoints(e){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:c=5}=e,d=_objectWithoutPropertiesLoose$3(e,_excluded$g),g=sortBreakpointsValues(o),b=Object.keys(g);function j(ut){return`@media (min-width:${typeof o[ut]=="number"?o[ut]:ut}${a})`}function $(ut){return`@media (max-width:${(typeof o[ut]=="number"?o[ut]:ut)-c/100}${a})`}function _e(ut,gt){const yt=b.indexOf(gt);return`@media (min-width:${typeof o[ut]=="number"?o[ut]:ut}${a}) and (max-width:${(yt!==-1&&typeof o[b[yt]]=="number"?o[b[yt]]:gt)-c/100}${a})`}function st(ut){return b.indexOf(ut)+1<b.length?_e(ut,b[b.indexOf(ut)+1]):j(ut)}function rt(ut){const gt=b.indexOf(ut);return gt===0?j(b[1]):gt===b.length-1?$(b[gt]):_e(ut,b[b.indexOf(ut)+1]).replace("@media","@media not all and")}return _extends$4({keys:b,values:g,up:j,down:$,between:_e,only:st,not:rt,unit:a},d)}const shape={borderRadius:4},shape$1=shape;function merge$2(e,o){return o?deepmerge(e,o,{clone:!1}):e}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${values[e]}px)`};function handleBreakpoints(e,o,a){const c=e.theme||{};if(Array.isArray(o)){const g=c.breakpoints||defaultBreakpoints;return o.reduce((b,j,$)=>(b[g.up(g.keys[$])]=a(o[$]),b),{})}if(typeof o=="object"){const g=c.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((b,j)=>{if(Object.keys(g.values||values).indexOf(j)!==-1){const $=g.up(j);b[$]=a(o[j],j)}else{const $=j;b[$]=o[$]}return b},{})}return a(o)}function createEmptyBreakpointObject(e={}){var o;return((o=e.keys)==null?void 0:o.reduce((c,d)=>{const g=e.up(d);return c[g]={},c},{}))||{}}function removeUnusedBreakpoints(e,o){return e.reduce((a,c)=>{const d=a[c];return(!d||Object.keys(d).length===0)&&delete a[c],a},o)}function getPath(e,o,a=!0){if(!o||typeof o!="string")return null;if(e&&e.vars&&a){const c=`vars.${o}`.split(".").reduce((d,g)=>d&&d[g]?d[g]:null,e);if(c!=null)return c}return o.split(".").reduce((c,d)=>c&&c[d]!=null?c[d]:null,e)}function getStyleValue(e,o,a,c=a){let d;return typeof e=="function"?d=e(a):Array.isArray(e)?d=e[a]||c:d=getPath(e,a)||c,o&&(d=o(d,c,e)),d}function style$1(e){const{prop:o,cssProperty:a=e.prop,themeKey:c,transform:d}=e,g=b=>{if(b[o]==null)return null;const j=b[o],$=b.theme,_e=getPath($,c)||{};return handleBreakpoints(b,j,rt=>{let ut=getStyleValue(_e,d,rt);return rt===ut&&typeof rt=="string"&&(ut=getStyleValue(_e,d,`${o}${rt==="default"?"":capitalize$1(rt)}`,rt)),a===!1?ut:{[a]:ut}})};return g.propTypes={},g.filterProps=[o],g}function memoize(e){const o={};return a=>(o[a]===void 0&&(o[a]=e(a)),o[a])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(e=>{if(e.length>2)if(aliases[e])e=aliases[e];else return[e];const[o,a]=e.split(""),c=properties[o],d=directions[a]||"";return Array.isArray(d)?d.map(g=>c+g):[c+d]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(e,o,a,c){var d;const g=(d=getPath(e,o,!1))!=null?d:a;return typeof g=="number"?b=>typeof b=="string"?b:g*b:Array.isArray(g)?b=>typeof b=="string"?b:g[b]:typeof g=="function"?g:()=>{}}function createUnarySpacing(e){return createUnaryUnit(e,"spacing",8)}function getValue$1(e,o){if(typeof o=="string"||o==null)return o;const a=Math.abs(o),c=e(a);return o>=0?c:typeof c=="number"?-c:`-${c}`}function getStyleFromPropValue(e,o){return a=>e.reduce((c,d)=>(c[d]=getValue$1(o,a),c),{})}function resolveCssProperty(e,o,a,c){if(o.indexOf(a)===-1)return null;const d=getCssProperties(a),g=getStyleFromPropValue(d,c),b=e[a];return handleBreakpoints(e,b,g)}function style(e,o){const a=createUnarySpacing(e.theme);return Object.keys(e).map(c=>resolveCssProperty(e,o,c,a)).reduce(merge$2,{})}function margin(e){return style(e,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(e){return style(e,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(e=8){if(e.mui)return e;const o=createUnarySpacing({spacing:e}),a=(...c)=>(c.length===0?[1]:c).map(g=>{const b=o(g);return typeof b=="number"?`${b}px`:b}).join(" ");return a.mui=!0,a}function compose(...e){const o=e.reduce((c,d)=>(d.filterProps.forEach(g=>{c[g]=d}),c),{}),a=c=>Object.keys(c).reduce((d,g)=>o[g]?merge$2(d,o[g](c)):d,{});return a.propTypes={},a.filterProps=e.reduce((c,d)=>c.concat(d.filterProps),[]),a}function borderTransform(e){return typeof e!="number"?e:`${e}px solid`}function createBorderStyle(e,o){return style$1({prop:e,themeKey:"borders",transform:o})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const o=createUnaryUnit(e.theme,"shape.borderRadius",4),a=c=>({borderRadius:getValue$1(o,c)});return handleBreakpoints(e,e.borderRadius,a)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=e=>{if(e.gap!==void 0&&e.gap!==null){const o=createUnaryUnit(e.theme,"spacing",8),a=c=>({gap:getValue$1(o,c)});return handleBreakpoints(e,e.gap,a)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const o=createUnaryUnit(e.theme,"spacing",8),a=c=>({columnGap:getValue$1(o,c)});return handleBreakpoints(e,e.columnGap,a)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const o=createUnaryUnit(e.theme,"spacing",8),a=c=>({rowGap:getValue$1(o,c)});return handleBreakpoints(e,e.rowGap,a)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(e,o){return o==="grey"?o:e}const color$2=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$2,bgcolor,backgroundColor);function sizingTransform(e){return e<=1&&e!==0?`${e*100}%`:e}const width$1=style$1({prop:"width",transform:sizingTransform}),maxWidth=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const o=a=>{var c,d;const g=((c=e.theme)==null||(c=c.breakpoints)==null||(c=c.values)==null?void 0:c[a])||values[a];return g?((d=e.theme)==null||(d=d.breakpoints)==null?void 0:d.unit)!=="px"?{maxWidth:`${g}${e.theme.breakpoints.unit}`}:{maxWidth:g}:{maxWidth:sizingTransform(a)}};return handleBreakpoints(e,e.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height$1=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width$1,maxWidth,minWidth,height$1,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...e){const o=e.reduce((c,d)=>c.concat(Object.keys(d)),[]),a=new Set(o);return e.every(c=>a.size===Object.keys(c).length)}function callIfFn(e,o){return typeof e=="function"?e(o):e}function unstable_createStyleFunctionSx(){function e(a,c,d,g){const b={[a]:c,theme:d},j=g[a];if(!j)return{[a]:c};const{cssProperty:$=a,themeKey:_e,transform:st,style:rt}=j;if(c==null)return null;if(_e==="typography"&&c==="inherit")return{[a]:c};const ut=getPath(d,_e)||{};return rt?rt(b):handleBreakpoints(b,c,yt=>{let wt=getStyleValue(ut,st,yt);return yt===wt&&typeof yt=="string"&&(wt=getStyleValue(ut,st,`${a}${yt==="default"?"":capitalize$1(yt)}`,yt)),$===!1?wt:{[$]:wt}})}function o(a){var c;const{sx:d,theme:g={}}=a||{};if(!d)return null;const b=(c=g.unstable_sxConfig)!=null?c:defaultSxConfig$1;function j($){let _e=$;if(typeof $=="function")_e=$(g);else if(typeof $!="object")return $;if(!_e)return null;const st=createEmptyBreakpointObject(g.breakpoints),rt=Object.keys(st);let ut=st;return Object.keys(_e).forEach(gt=>{const yt=callIfFn(_e[gt],g);if(yt!=null)if(typeof yt=="object")if(b[gt])ut=merge$2(ut,e(gt,yt,g,b));else{const wt=handleBreakpoints({theme:g},yt,Ct=>({[gt]:Ct}));objectsHaveSameKeys(wt,yt)?ut[gt]=o({sx:yt,theme:g}):ut=merge$2(ut,wt)}else ut=merge$2(ut,e(gt,yt,g,b))}),removeUnusedBreakpoints(rt,ut)}return Array.isArray(d)?d.map(j):j(d)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const _excluded$f=["breakpoints","palette","spacing","shape"];function createTheme$1(e={},...o){const{breakpoints:a={},palette:c={},spacing:d,shape:g={}}=e,b=_objectWithoutPropertiesLoose$3(e,_excluded$f),j=createBreakpoints(a),$=createSpacing(d);let _e=deepmerge({breakpoints:j,direction:"ltr",components:{},palette:_extends$4({mode:"light"},c),spacing:$,shape:_extends$4({},shape$1,g)},b);return _e=o.reduce((st,rt)=>deepmerge(st,rt),_e),_e.unstable_sxConfig=_extends$4({},defaultSxConfig$1,b==null?void 0:b.unstable_sxConfig),_e.unstable_sx=function(rt){return styleFunctionSx({sx:rt,theme:this})},_e}function isObjectEmpty(e){return Object.keys(e).length===0}function useTheme$2(e=null){const o=reactExports$1.useContext(ThemeContext);return!o||isObjectEmpty(o)?e:o}const systemDefaultTheme$1=createTheme$1();function useTheme$1(e=systemDefaultTheme$1){return useTheme$2(e)}const _excluded$e=["variant"];function isEmpty$1(e){return e.length===0}function propsToClassKey(e){const{variant:o}=e,a=_objectWithoutPropertiesLoose$3(e,_excluded$e);let c=o||"";return Object.keys(a).sort().forEach(d=>{d==="color"?c+=isEmpty$1(c)?e[d]:capitalize$1(e[d]):c+=`${isEmpty$1(c)?d:capitalize$1(d)}${capitalize$1(e[d].toString())}`}),c}const _excluded$d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty(e){return Object.keys(e).length===0}function isStringTag(e){return typeof e=="string"&&e.charCodeAt(0)>96}const getStyleOverrides=(e,o)=>o.components&&o.components[e]&&o.components[e].styleOverrides?o.components[e].styleOverrides:null,transformVariants=e=>{let o=0;const a={};return e&&e.forEach(c=>{let d="";typeof c.props=="function"?(d=`callback${o}`,o+=1):d=propsToClassKey(c.props),a[d]=c.style}),a},getVariantStyles=(e,o)=>{let a=[];return o&&o.components&&o.components[e]&&o.components[e].variants&&(a=o.components[e].variants),transformVariants(a)},variantsResolver=(e,o,a)=>{const{ownerState:c={}}=e,d=[];let g=0;return a&&a.forEach(b=>{let j=!0;if(typeof b.props=="function"){const $=_extends$4({},e,c);j=b.props($)}else Object.keys(b.props).forEach($=>{c[$]!==b.props[$]&&e[$]!==b.props[$]&&(j=!1)});j&&(typeof b.props=="function"?d.push(o[`callback${g}`]):d.push(o[propsToClassKey(b.props)])),typeof b.props=="function"&&(g+=1)}),d},themeVariantsResolver=(e,o,a,c)=>{var d;const g=a==null||(d=a.components)==null||(d=d[c])==null?void 0:d.variants;return variantsResolver(e,o,g)};function shouldForwardProp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function resolveTheme({defaultTheme:e,theme:o,themeId:a}){return isEmpty(o)?e:o[a]||o}function defaultOverridesResolver(e){return e?(o,a)=>a[e]:null}const muiStyledFunctionResolver=({styledArg:e,props:o,defaultTheme:a,themeId:c})=>{const d=e(_extends$4({},o,{theme:resolveTheme(_extends$4({},o,{defaultTheme:a,themeId:c}))}));let g;if(d&&d.variants&&(g=d.variants,delete d.variants),g){const b=variantsResolver(o,transformVariants(g),g);return[d,...b]}return d};function createStyled(e={}){const{themeId:o,defaultTheme:a=systemDefaultTheme,rootShouldForwardProp:c=shouldForwardProp,slotShouldForwardProp:d=shouldForwardProp}=e,g=b=>styleFunctionSx(_extends$4({},b,{theme:resolveTheme(_extends$4({},b,{defaultTheme:a,themeId:o}))}));return g.__mui_systemSx=!0,(b,j={})=>{internal_processStyles(b,kt=>kt.filter(It=>!(It!=null&&It.__mui_systemSx)));const{name:$,slot:_e,skipVariantsResolver:st,skipSx:rt,overridesResolver:ut=defaultOverridesResolver(lowercaseFirstLetter(_e))}=j,gt=_objectWithoutPropertiesLoose$3(j,_excluded$d),yt=st!==void 0?st:_e&&_e!=="Root"&&_e!=="root"||!1,wt=rt||!1;let Ct,Pt=shouldForwardProp;_e==="Root"||_e==="root"?Pt=c:_e?Pt=d:isStringTag(b)&&(Pt=void 0);const At=styled$1(b,_extends$4({shouldForwardProp:Pt,label:Ct},gt)),Tt=(kt,...It)=>{const Lt=It?It.map(dr=>{if(typeof dr=="function"&&dr.__emotion_real!==dr)return hs=>muiStyledFunctionResolver({styledArg:dr,props:hs,defaultTheme:a,themeId:o});if(isPlainObject$1(dr)){let hs=dr,us;return dr&&dr.variants&&(us=dr.variants,delete hs.variants,hs=hn=>{let un=dr;return variantsResolver(hn,transformVariants(us),us).forEach(_s=>{un=deepmerge(un,_s)}),un}),hs}return dr}):[];let Ft=kt;if(isPlainObject$1(kt)){let dr;kt&&kt.variants&&(dr=kt.variants,delete Ft.variants,Ft=hs=>{let us=kt;return variantsResolver(hs,transformVariants(dr),dr).forEach(un=>{us=deepmerge(us,un)}),us})}else typeof kt=="function"&&kt.__emotion_real!==kt&&(Ft=dr=>muiStyledFunctionResolver({styledArg:kt,props:dr,defaultTheme:a,themeId:o}));$&&ut&&Lt.push(dr=>{const hs=resolveTheme(_extends$4({},dr,{defaultTheme:a,themeId:o})),us=getStyleOverrides($,hs);if(us){const hn={};return Object.entries(us).forEach(([un,bo])=>{hn[un]=typeof bo=="function"?bo(_extends$4({},dr,{theme:hs})):bo}),ut(dr,hn)}return null}),$&&!yt&&Lt.push(dr=>{const hs=resolveTheme(_extends$4({},dr,{defaultTheme:a,themeId:o}));return themeVariantsResolver(dr,getVariantStyles($,hs),hs,$)}),wt||Lt.push(g);const Nt=Lt.length-It.length;if(Array.isArray(kt)&&Nt>0){const dr=new Array(Nt).fill("");Ft=[...kt,...dr],Ft.raw=[...kt.raw,...dr]}const Ht=At(Ft,...Lt);return b.muiName&&(Ht.muiName=b.muiName),Ht};return At.withConfig&&(Tt.withConfig=At.withConfig),Tt}}function getThemeProps(e){const{theme:o,name:a,props:c}=e;return!o||!o.components||!o.components[a]||!o.components[a].defaultProps?c:resolveProps(o.components[a].defaultProps,c)}function useThemeProps$1({props:e,name:o,defaultTheme:a,themeId:c}){let d=useTheme$1(a);return c&&(d=d[c]||d),getThemeProps({theme:d,name:o,props:e})}function clampWrapper(e,o=0,a=1){return clamp$2(e,o,a)}function hexToRgb$1(e){e=e.slice(1);const o=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(o);return a&&a[0].length===1&&(a=a.map(c=>c+c)),a?`rgb${a.length===4?"a":""}(${a.map((c,d)=>d<3?parseInt(c,16):Math.round(parseInt(c,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(e){if(e.type)return e;if(e.charAt(0)==="#")return decomposeColor(hexToRgb$1(e));const o=e.indexOf("("),a=e.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(a)===-1)throw new Error(formatMuiErrorMessage(9,e));let c=e.substring(o+1,e.length-1),d;if(a==="color"){if(c=c.split(" "),d=c.shift(),c.length===4&&c[3].charAt(0)==="/"&&(c[3]=c[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(d)===-1)throw new Error(formatMuiErrorMessage(10,d))}else c=c.split(",");return c=c.map(g=>parseFloat(g)),{type:a,values:c,colorSpace:d}}function recomposeColor(e){const{type:o,colorSpace:a}=e;let{values:c}=e;return o.indexOf("rgb")!==-1?c=c.map((d,g)=>g<3?parseInt(d,10):d):o.indexOf("hsl")!==-1&&(c[1]=`${c[1]}%`,c[2]=`${c[2]}%`),o.indexOf("color")!==-1?c=`${a} ${c.join(" ")}`:c=`${c.join(", ")}`,`${o}(${c})`}function hslToRgb$1(e){e=decomposeColor(e);const{values:o}=e,a=o[0],c=o[1]/100,d=o[2]/100,g=c*Math.min(d,1-d),b=(_e,st=(_e+a/30)%12)=>d-g*Math.max(Math.min(st-3,9-st,1),-1);let j="rgb";const $=[Math.round(b(0)*255),Math.round(b(8)*255),Math.round(b(4)*255)];return e.type==="hsla"&&(j+="a",$.push(o[3])),recomposeColor({type:j,values:$})}function getLuminance(e){e=decomposeColor(e);let o=e.type==="hsl"||e.type==="hsla"?decomposeColor(hslToRgb$1(e)).values:e.values;return o=o.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(e,o){const a=getLuminance(e),c=getLuminance(o);return(Math.max(a,c)+.05)/(Math.min(a,c)+.05)}function darken(e,o){if(e=decomposeColor(e),o=clampWrapper(o),e.type.indexOf("hsl")!==-1)e.values[2]*=1-o;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)e.values[a]*=1-o;return recomposeColor(e)}function lighten$1(e,o){if(e=decomposeColor(e),o=clampWrapper(o),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*o;else if(e.type.indexOf("rgb")!==-1)for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*o;else if(e.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*o;return recomposeColor(e)}function createMixins(e,o){return _extends$4({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},o)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$c=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(e,o,a,c){const d=c.light||c,g=c.dark||c*1.5;e[o]||(e.hasOwnProperty(a)?e[o]=e[a]:o==="light"?e.light=lighten$1(e.main,d):o==="dark"&&(e.dark=darken(e.main,g)))}function getDefaultPrimary(e="light"){return e==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(e="light"){return e==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(e="light"){return e==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(e="light"){return e==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(e="light"){return e==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(e="light"){return e==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(e){const{mode:o="light",contrastThreshold:a=3,tonalOffset:c=.2}=e,d=_objectWithoutPropertiesLoose$3(e,_excluded$c),g=e.primary||getDefaultPrimary(o),b=e.secondary||getDefaultSecondary(o),j=e.error||getDefaultError(o),$=e.info||getDefaultInfo(o),_e=e.success||getDefaultSuccess(o),st=e.warning||getDefaultWarning(o);function rt(wt){return getContrastRatio(wt,dark.text.primary)>=a?dark.text.primary:light.text.primary}const ut=({color:wt,name:Ct,mainShade:Pt=500,lightShade:At=300,darkShade:Tt=700})=>{if(wt=_extends$4({},wt),!wt.main&&wt[Pt]&&(wt.main=wt[Pt]),!wt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Ct?` (${Ct})`:"",Pt));if(typeof wt.main!="string")throw new Error(formatMuiErrorMessage(12,Ct?` (${Ct})`:"",JSON.stringify(wt.main)));return addLightOrDark(wt,"light",At,c),addLightOrDark(wt,"dark",Tt,c),wt.contrastText||(wt.contrastText=rt(wt.main)),wt},gt={dark,light};return deepmerge(_extends$4({common:_extends$4({},common$1),mode:o,primary:ut({color:g,name:"primary"}),secondary:ut({color:b,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:ut({color:j,name:"error"}),warning:ut({color:st,name:"warning"}),info:ut({color:$,name:"info"}),success:ut({color:_e,name:"success"}),grey:grey$1,contrastThreshold:a,getContrastText:rt,augmentColor:ut,tonalOffset:c},gt[o]),d)}const _excluded$b=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$2(e){return Math.round(e*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(e,o){const a=typeof o=="function"?o(e):o,{fontFamily:c=defaultFontFamily,fontSize:d=14,fontWeightLight:g=300,fontWeightRegular:b=400,fontWeightMedium:j=500,fontWeightBold:$=700,htmlFontSize:_e=16,allVariants:st,pxToRem:rt}=a,ut=_objectWithoutPropertiesLoose$3(a,_excluded$b),gt=d/14,yt=rt||(Pt=>`${Pt/_e*gt}rem`),wt=(Pt,At,Tt,kt,It)=>_extends$4({fontFamily:c,fontWeight:Pt,fontSize:yt(At),lineHeight:Tt},c===defaultFontFamily?{letterSpacing:`${round$2(kt/At)}em`}:{},It,st),Ct={h1:wt(g,96,1.167,-1.5),h2:wt(g,60,1.2,-.5),h3:wt(b,48,1.167,0),h4:wt(b,34,1.235,.25),h5:wt(b,24,1.334,0),h6:wt(j,20,1.6,.15),subtitle1:wt(b,16,1.75,.15),subtitle2:wt(j,14,1.57,.1),body1:wt(b,16,1.5,.15),body2:wt(b,14,1.43,.15),button:wt(j,14,1.75,.4,caseAllCaps),caption:wt(b,12,1.66,.4),overline:wt(b,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends$4({htmlFontSize:_e,pxToRem:yt,fontFamily:c,fontSize:d,fontWeightLight:g,fontWeightRegular:b,fontWeightMedium:j,fontWeightBold:$},Ct),ut,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$a=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(e){return`${Math.round(e)}ms`}function getAutoHeightDuration(e){if(!e)return 0;const o=e/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(e){const o=_extends$4({},easing,e.easing),a=_extends$4({},duration,e.duration);return _extends$4({getAutoHeightDuration,create:(d=["all"],g={})=>{const{duration:b=a.standard,easing:j=o.easeInOut,delay:$=0}=g;return _objectWithoutPropertiesLoose$3(g,_excluded$a),(Array.isArray(d)?d:[d]).map(_e=>`${_e} ${typeof b=="string"?b:formatMs(b)} ${j} ${typeof $=="string"?$:formatMs($)}`).join(",")}},e,{easing:o,duration:a})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$9=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(e={},...o){const{mixins:a={},palette:c={},transitions:d={},typography:g={}}=e,b=_objectWithoutPropertiesLoose$3(e,_excluded$9);if(e.vars)throw new Error(formatMuiErrorMessage(18));const j=createPalette(c),$=createTheme$1(e);let _e=deepmerge($,{mixins:createMixins($.breakpoints,a),palette:j,shadows:shadows.slice(),typography:createTypography(j,g),transitions:createTransitions(d),zIndex:_extends$4({},zIndex$1)});return _e=deepmerge(_e,b),_e=o.reduce((st,rt)=>deepmerge(st,rt),_e),_e.unstable_sxConfig=_extends$4({},defaultSxConfig$1,b==null?void 0:b.unstable_sxConfig),_e.unstable_sx=function(rt){return styleFunctionSx({sx:rt,theme:this})},_e}const defaultTheme=createTheme(),defaultTheme$1=defaultTheme,THEME_ID="$$material";function useThemeProps({props:e,name:o}){return useThemeProps$1({props:e,name:o,defaultTheme:defaultTheme$1,themeId:THEME_ID})}const rootShouldForwardProp=e=>shouldForwardProp(e)&&e!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function getSvgIconUtilityClass(e){return generateUtilityClass("MuiSvgIcon",e)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$8=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses=e=>{const{color:o,fontSize:a,classes:c}=e,d={root:["root",o!=="inherit"&&`color${capitalize$1(o)}`,`fontSize${capitalize$1(a)}`]};return composeClasses(d,getSvgIconUtilityClass,c)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,a.color!=="inherit"&&o[`color${capitalize$1(a.color)}`],o[`fontSize${capitalize$1(a.fontSize)}`]]}})(({theme:e,ownerState:o})=>{var a,c,d,g,b,j,$,_e,st,rt,ut,gt,yt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:o.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(a=e.transitions)==null||(c=a.create)==null?void 0:c.call(a,"fill",{duration:(d=e.transitions)==null||(d=d.duration)==null?void 0:d.shorter}),fontSize:{inherit:"inherit",small:((g=e.typography)==null||(b=g.pxToRem)==null?void 0:b.call(g,20))||"1.25rem",medium:((j=e.typography)==null||($=j.pxToRem)==null?void 0:$.call(j,24))||"1.5rem",large:((_e=e.typography)==null||(st=_e.pxToRem)==null?void 0:st.call(_e,35))||"2.1875rem"}[o.fontSize],color:(rt=(ut=(e.vars||e).palette)==null||(ut=ut[o.color])==null?void 0:ut.main)!=null?rt:{action:(gt=(e.vars||e).palette)==null||(gt=gt.action)==null?void 0:gt.active,disabled:(yt=(e.vars||e).palette)==null||(yt=yt.action)==null?void 0:yt.disabled,inherit:void 0}[o.color]}}),SvgIcon=reactExports$1.forwardRef(function(o,a){const c=useThemeProps({props:o,name:"MuiSvgIcon"}),{children:d,className:g,color:b="inherit",component:j="svg",fontSize:$="medium",htmlColor:_e,inheritViewBox:st=!1,titleAccess:rt,viewBox:ut="0 0 24 24"}=c,gt=_objectWithoutPropertiesLoose$3(c,_excluded$8),yt=reactExports$1.isValidElement(d)&&d.type==="svg",wt=_extends$4({},c,{color:b,component:j,fontSize:$,instanceFontSize:o.fontSize,inheritViewBox:st,viewBox:ut,hasSvgAsChild:yt}),Ct={};st||(Ct.viewBox=ut);const Pt=useUtilityClasses(wt);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends$4({as:j,className:clsx(Pt.root,g),focusable:"false",color:_e,"aria-hidden":rt?void 0:!0,role:rt?"img":void 0,ref:a},Ct,gt,yt&&d.props,{ownerState:wt,children:[yt?d.props.children:d,rt?jsxRuntimeExports.jsx("title",{children:rt}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon(e,o){function a(c,d){return jsxRuntimeExports.jsx(SvgIcon,_extends$4({"data-testid":`${o}Icon`,ref:d},c,{children:e}))}return a.muiName=SvgIcon.muiName,reactExports$1.memo(reactExports$1.forwardRef(a))}const unstable_ClassNameGenerator={configure:e=>{ClassNameGenerator.configure(e)}},utils$2=Object.freeze(Object.defineProperty({__proto__:null,capitalize:capitalize$1,createChainedFunction,createSvgIcon,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef:setRef$1,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId$1,unsupportedProp,useControlled,useEventCallback:useEventCallback$1,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(utils$2);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=require$$0}(createSvgIcon$1)),createSvgIcon$1}var _interopRequireDefault$h=interopRequireDefaultExports;Object.defineProperty(Send,"__esModule",{value:!0});var default_1$h=Send.default=void 0,_createSvgIcon$g=_interopRequireDefault$h(requireCreateSvgIcon()),_jsxRuntime$g=jsxRuntimeExports;default_1$h=Send.default=(0,_createSvgIcon$g.default)((0,_jsxRuntime$g.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var X$1={},_interopRequireDefault$g=interopRequireDefaultExports;Object.defineProperty(X$1,"__esModule",{value:!0});var default_1$g=X$1.default=void 0;_interopRequireWildcard$7(reactExports$1);var _createSvgIcon$f=_interopRequireDefault$g(requireCreateSvgIcon()),_jsxRuntime$f=jsxRuntimeExports;function _getRequireWildcardCache$6(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache$6=function(c){return c?a:o})(e)}function _interopRequireWildcard$7(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache$6(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$g=X$1.default=(0,_createSvgIcon$f.default)((0,_jsxRuntime$f.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"}),"X");var Telegram={},_interopRequireDefault$f=interopRequireDefaultExports;Object.defineProperty(Telegram,"__esModule",{value:!0});var default_1$f=Telegram.default=void 0;_interopRequireWildcard$6(reactExports$1);var _createSvgIcon$e=_interopRequireDefault$f(requireCreateSvgIcon()),_jsxRuntime$e=jsxRuntimeExports;function _getRequireWildcardCache$5(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache$5=function(c){return c?a:o})(e)}function _interopRequireWildcard$6(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache$5(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$f=Telegram.default=(0,_createSvgIcon$e.default)((0,_jsxRuntime$e.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");var YouTube={},_interopRequireDefault$e=interopRequireDefaultExports;Object.defineProperty(YouTube,"__esModule",{value:!0});var default_1$e=YouTube.default=void 0;_interopRequireWildcard$5(reactExports$1);var _createSvgIcon$d=_interopRequireDefault$e(requireCreateSvgIcon()),_jsxRuntime$d=jsxRuntimeExports;function _getRequireWildcardCache$4(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache$4=function(c){return c?a:o})(e)}function _interopRequireWildcard$5(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache$4(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$e=YouTube.default=(0,_createSvgIcon$d.default)((0,_jsxRuntime$d.jsx)("path",{d:"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"}),"YouTube");var GitHub={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(GitHub,"__esModule",{value:!0});var default_1$d=GitHub.default=void 0;_interopRequireWildcard$4(reactExports$1);var _createSvgIcon$c=_interopRequireDefault$d(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;function _getRequireWildcardCache$3(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache$3=function(c){return c?a:o})(e)}function _interopRequireWildcard$4(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache$3(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$d=GitHub.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");var Reddit={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(Reddit,"__esModule",{value:!0});var default_1$c=Reddit.default=void 0;_interopRequireWildcard$3(reactExports$1);var _createSvgIcon$b=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;function _getRequireWildcardCache$2(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache$2=function(c){return c?a:o})(e)}function _interopRequireWildcard$3(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache$2(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$c=Reddit.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M22 12.14a2.19 2.19 0 0 0-3.71-1.57 10.93 10.93 0 0 0-5.86-1.87l1-4.7 3.27.71a1.56 1.56 0 1 0 .16-.76l-3.64-.77c-.11-.02-.22 0-.29.06-.09.05-.14.14-.16.26l-1.11 5.22c-2.33.07-4.43.78-5.95 1.86A2.2 2.2 0 0 0 4.19 10a2.16 2.16 0 0 0-.9 4.15 3.6 3.6 0 0 0-.05.66c0 3.37 3.92 6.12 8.76 6.12s8.76-2.73 8.76-6.12c0-.21-.01-.44-.05-.66A2.21 2.21 0 0 0 22 12.14M7 13.7c0-.86.68-1.56 1.54-1.56s1.56.7 1.56 1.56a1.56 1.56 0 0 1-1.56 1.56c-.86.02-1.54-.7-1.54-1.56m8.71 4.14C14.63 18.92 12.59 19 12 19c-.61 0-2.65-.1-3.71-1.16a.4.4 0 0 1 0-.57.4.4 0 0 1 .57 0c.68.68 2.14.91 3.14.91s2.47-.23 3.14-.91a.4.4 0 0 1 .57 0c.14.16.14.41 0 .57m-.29-2.56c-.86 0-1.56-.7-1.56-1.56a1.56 1.56 0 0 1 1.56-1.56c.86 0 1.58.7 1.58 1.56a1.6 1.6 0 0 1-1.58 1.56z"}),"Reddit");const MotionConfigContext=reactExports$1.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports$1.createContext({}),PresenceContext=reactExports$1.createContext(null),isBrowser=typeof document<"u",useIsomorphicLayoutEffect$2=isBrowser?reactExports$1.useLayoutEffect:reactExports$1.useEffect,LazyContext=reactExports$1.createContext({strict:!1}),camelToDash=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function useVisualElement(e,o,a,c){const{visualElement:d}=reactExports$1.useContext(MotionContext),g=reactExports$1.useContext(LazyContext),b=reactExports$1.useContext(PresenceContext),j=reactExports$1.useContext(MotionConfigContext).reducedMotion,$=reactExports$1.useRef();c=c||g.renderer,!$.current&&c&&($.current=c(e,{visualState:o,parent:d,props:a,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:j}));const _e=$.current;reactExports$1.useInsertionEffect(()=>{_e&&_e.update(a,b)});const st=reactExports$1.useRef(!!(a[optimizedAppearDataAttribute]&&!window.HandoffComplete));return useIsomorphicLayoutEffect$2(()=>{_e&&(_e.render(),st.current&&_e.animationState&&_e.animationState.animateChanges())}),reactExports$1.useEffect(()=>{_e&&(_e.updateFeatures(),!st.current&&_e.animationState&&_e.animationState.animateChanges(),st.current&&(st.current=!1,window.HandoffComplete=!0))}),_e}function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,o,a){return reactExports$1.useCallback(c=>{c&&e.mount&&e.mount(c),o&&(c?o.mount(c):o.unmount()),a&&(typeof a=="function"?a(c):isRefObject(a)&&(a.current=c))},[o])}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(o=>isVariantLabel(e[o]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,o){if(isControllingVariants(e)){const{initial:a,animate:c}=e;return{initial:a===!1||isVariantLabel(a)?a:void 0,animate:isVariantLabel(c)?c:void 0}}return e.inherit!==!1?o:{}}function useCreateMotionContext(e){const{initial:o,animate:a}=getCurrentTreeVariants(e,reactExports$1.useContext(MotionContext));return reactExports$1.useMemo(()=>({initial:o,animate:a}),[variantLabelsAsDependency(o),variantLabelsAsDependency(a)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:o=>featureProps[e].some(a=>!!o[a])};function loadFeatures(e){for(const o in e)featureDefinitions[o]={...featureDefinitions[o],...e[o]}}const LayoutGroupContext=reactExports$1.createContext({}),SwitchLayoutGroupContext=reactExports$1.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function createMotionComponent({preloadedFeatures:e,createVisualElement:o,useRender:a,useVisualState:c,Component:d}){e&&loadFeatures(e);function g(j,$){let _e;const st={...reactExports$1.useContext(MotionConfigContext),...j,layoutId:useLayoutId(j)},{isStatic:rt}=st,ut=useCreateMotionContext(j),gt=c(j,rt);if(!rt&&isBrowser){ut.visualElement=useVisualElement(d,gt,st,o);const yt=reactExports$1.useContext(SwitchLayoutGroupContext),wt=reactExports$1.useContext(LazyContext).strict;ut.visualElement&&(_e=ut.visualElement.loadFeatures(st,wt,e,yt))}return reactExports$1.createElement(MotionContext.Provider,{value:ut},_e&&ut.visualElement?reactExports$1.createElement(_e,{visualElement:ut.visualElement,...st}):null,a(d,j,useMotionRef(gt,ut.visualElement,$),gt,rt,ut.visualElement))}const b=reactExports$1.forwardRef(g);return b[motionComponentSymbol]=d,b}function useLayoutId({layoutId:e}){const o=reactExports$1.useContext(LayoutGroupContext).id;return o&&e!==void 0?o+"-"+e:e}function createMotionProxy(e){function o(c,d={}){return createMotionComponent(e(c,d))}if(typeof Proxy>"u")return o;const a=new Map;return new Proxy(o,{get:(c,d)=>(a.has(d)||a.set(d,o(d)),a.get(d))})}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/.test(e))}const scaleCorrectors={};function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(e,{layout:o,layoutId:a}){return transformProps.has(e)||e.startsWith("origin")||(o||a!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}const isMotionValue=e=>!!(e&&e.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,{enableHardwareAcceleration:o=!0,allowTransformNone:a=!0},c,d){let g="";for(let b=0;b<numTransforms;b++){const j=transformPropOrder[b];if(e[j]!==void 0){const $=translateAlias[j]||j;g+=`${$}(${e[j]}) `}}return o&&!e.z&&(g+="translateZ(0)"),g=g.trim(),d?g=d(e,c?"":g):a&&c&&(g="none"),g}const checkStringStartsWith=e=>o=>typeof o=="string"&&o.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),isCSSVariableToken=checkStringStartsWith("var(--"),cssVariableRegex=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,getValueAsType=(e,o)=>o&&typeof e=="number"?o.transform(e):e,clamp$1=(e,o,a)=>Math.min(Math.max(a,e),o),number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp$1(0,1,e)},scale$2={...number,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString$2(e){return typeof e=="string"}const createUnitType=e=>({test:o=>isString$2(o)&&o.endsWith(e)&&o.split(" ").length===1,parse:parseFloat,transform:o=>`${o}${e}`}),degrees=createUnitType("deg"),percent$1=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent$1,parse:e=>percent$1.parse(e)/100,transform:e=>percent$1.transform(e*100)},int={...number,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale:scale$2,scaleX:scale$2,scaleY:scale$2,scaleZ:scale$2,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int};function buildHTMLStyles(e,o,a,c){const{style:d,vars:g,transform:b,transformOrigin:j}=e;let $=!1,_e=!1,st=!0;for(const rt in o){const ut=o[rt];if(isCSSVariableName(rt)){g[rt]=ut;continue}const gt=numberValueTypes[rt],yt=getValueAsType(ut,gt);if(transformProps.has(rt)){if($=!0,b[rt]=yt,!st)continue;ut!==(gt.default||0)&&(st=!1)}else rt.startsWith("origin")?(_e=!0,j[rt]=yt):d[rt]=yt}if(o.transform||($||c?d.transform=buildTransform(e.transform,a,st,c):d.transform&&(d.transform="none")),_e){const{originX:rt="50%",originY:ut="50%",originZ:gt=0}=j;d.transformOrigin=`${rt} ${ut} ${gt}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,o,a){for(const c in o)!isMotionValue(o[c])&&!isForcedMotionValue(c,a)&&(e[c]=o[c])}function useInitialMotionValues({transformTemplate:e},o,a){return reactExports$1.useMemo(()=>{const c=createHtmlRenderState();return buildHTMLStyles(c,o,{enableHardwareAcceleration:!a},e),Object.assign({},c.vars,c.style)},[o])}function useStyle(e,o,a){const c=e.style||{},d={};return copyRawValuesOnly(d,c,e),Object.assign(d,useInitialMotionValues(e,o,a)),e.transformValues?e.transformValues(d):d}function useHTMLProps(e,o,a){const c={},d=useStyle(e,o,a);return e.drag&&e.dragListener!==!1&&(c.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(c.tabIndex=0),c.style=d,c}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){e&&(shouldForward=o=>o.startsWith("on")?!isValidMotionProp(o):e(o))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,o,a){const c={};for(const d in e)d==="values"&&typeof e.values=="object"||(shouldForward(d)||a===!0&&isValidMotionProp(d)||!o&&!isValidMotionProp(d)||e.draggable&&d.startsWith("onDrag"))&&(c[d]=e[d]);return c}function calcOrigin$1(e,o,a){return typeof e=="string"?e:px.transform(o+a*e)}function calcSVGTransformOrigin(e,o,a){const c=calcOrigin$1(o,e.x,e.width),d=calcOrigin$1(a,e.y,e.height);return`${c} ${d}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,o,a=1,c=0,d=!0){e.pathLength=1;const g=d?dashKeys:camelKeys;e[g.offset]=px.transform(-c);const b=px.transform(o),j=px.transform(a);e[g.array]=`${b} ${j}`}function buildSVGAttrs(e,{attrX:o,attrY:a,attrScale:c,originX:d,originY:g,pathLength:b,pathSpacing:j=1,pathOffset:$=0,..._e},st,rt,ut){if(buildHTMLStyles(e,_e,st,ut),rt){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:gt,style:yt,dimensions:wt}=e;gt.transform&&(wt&&(yt.transform=gt.transform),delete gt.transform),wt&&(d!==void 0||g!==void 0||yt.transform)&&(yt.transformOrigin=calcSVGTransformOrigin(wt,d!==void 0?d:.5,g!==void 0?g:.5)),o!==void 0&&(gt.x=o),a!==void 0&&(gt.y=a),c!==void 0&&(gt.scale=c),b!==void 0&&buildSVGPath(gt,b,j,$,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function useSVGProps(e,o,a,c){const d=reactExports$1.useMemo(()=>{const g=createSvgRenderState();return buildSVGAttrs(g,o,{enableHardwareAcceleration:!1},isSVGTag(c),e.transformTemplate),{...g.attrs,style:{...g.style}}},[o]);if(e.style){const g={};copyRawValuesOnly(g,e.style,e),d.style={...g,...d.style}}return d}function createUseRender(e=!1){return(a,c,d,{latestValues:g},b)=>{const $=(isSVGComponent(a)?useSVGProps:useHTMLProps)(c,g,b,a),st={...filterProps(c,typeof a=="string",e),...$,ref:d},{children:rt}=c,ut=reactExports$1.useMemo(()=>isMotionValue(rt)?rt.get():rt,[rt]);return reactExports$1.createElement(a,{...st,children:ut})}}function renderHTML(e,{style:o,vars:a},c,d){Object.assign(e.style,o,d&&d.getProjectionStyles(c));for(const g in a)e.style.setProperty(g,a[g])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,o,a,c){renderHTML(e,o,void 0,c);for(const d in o.attrs)e.setAttribute(camelCaseAttributes.has(d)?d:camelToDash(d),o.attrs[d])}function scrapeMotionValuesFromProps$1(e,o){const{style:a}=e,c={};for(const d in a)(isMotionValue(a[d])||o.style&&isMotionValue(o.style[d])||isForcedMotionValue(d,e))&&(c[d]=a[d]);return c}function scrapeMotionValuesFromProps(e,o){const a=scrapeMotionValuesFromProps$1(e,o);for(const c in e)if(isMotionValue(e[c])||isMotionValue(o[c])){const d=transformPropOrder.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;a[d]=e[c]}return a}function resolveVariantFromProps(e,o,a,c={},d={}){return typeof o=="function"&&(o=o(a!==void 0?a:e.custom,c,d)),typeof o=="string"&&(o=e.variants&&e.variants[o]),typeof o=="function"&&(o=o(a!==void 0?a:e.custom,c,d)),o}function useConstant(e){const o=reactExports$1.useRef(null);return o.current===null&&(o.current=e()),o.current}const isKeyframesTarget=e=>Array.isArray(e),isCustomValue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),resolveFinalValueInKeyframes=e=>isKeyframesTarget(e)?e[e.length-1]||0:e;function resolveMotionValue(e){const o=isMotionValue(e)?e.get():e;return isCustomValue(o)?o.toValue():o}function makeState({scrapeMotionValuesFromProps:e,createRenderState:o,onMount:a},c,d,g){const b={latestValues:makeLatestValues(c,d,g,e),renderState:o()};return a&&(b.mount=j=>a(c,j,b)),b}const makeUseVisualState=e=>(o,a)=>{const c=reactExports$1.useContext(MotionContext),d=reactExports$1.useContext(PresenceContext),g=()=>makeState(e,o,c,d);return a?g():useConstant(g)};function makeLatestValues(e,o,a,c){const d={},g=c(e,{});for(const ut in g)d[ut]=resolveMotionValue(g[ut]);let{initial:b,animate:j}=e;const $=isControllingVariants(e),_e=isVariantNode(e);o&&_e&&!$&&e.inherit!==!1&&(b===void 0&&(b=o.initial),j===void 0&&(j=o.animate));let st=a?a.initial===!1:!1;st=st||b===!1;const rt=st?j:b;return rt&&typeof rt!="boolean"&&!isAnimationControls(rt)&&(Array.isArray(rt)?rt:[rt]).forEach(gt=>{const yt=resolveVariantFromProps(e,gt);if(!yt)return;const{transitionEnd:wt,transition:Ct,...Pt}=yt;for(const At in Pt){let Tt=Pt[At];if(Array.isArray(Tt)){const kt=st?Tt.length-1:0;Tt=Tt[kt]}Tt!==null&&(d[At]=Tt)}for(const At in wt)d[At]=wt[At]}),d}const noop$2=e=>e;class Queue{constructor(){this.order=[],this.scheduled=new Set}add(o){if(!this.scheduled.has(o))return this.scheduled.add(o),this.order.push(o),!0}remove(o){const a=this.order.indexOf(o);a!==-1&&(this.order.splice(a,1),this.scheduled.delete(o))}clear(){this.order.length=0,this.scheduled.clear()}}function createRenderStep(e){let o=new Queue,a=new Queue,c=0,d=!1,g=!1;const b=new WeakSet,j={schedule:($,_e=!1,st=!1)=>{const rt=st&&d,ut=rt?o:a;return _e&&b.add($),ut.add($)&&rt&&d&&(c=o.order.length),$},cancel:$=>{a.remove($),b.delete($)},process:$=>{if(d){g=!0;return}if(d=!0,[o,a]=[a,o],a.clear(),c=o.order.length,c)for(let _e=0;_e<c;_e++){const st=o.order[_e];st($),b.has(st)&&(j.schedule(st),e())}d=!1,g&&(g=!1,j.process($))}};return j}const stepsOrder=["prepare","read","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(e,o){let a=!1,c=!0;const d={delta:0,timestamp:0,isProcessing:!1},g=stepsOrder.reduce((rt,ut)=>(rt[ut]=createRenderStep(()=>a=!0),rt),{}),b=rt=>g[rt].process(d),j=()=>{const rt=performance.now();a=!1,d.delta=c?1e3/60:Math.max(Math.min(rt-d.timestamp,maxElapsed),1),d.timestamp=rt,d.isProcessing=!0,stepsOrder.forEach(b),d.isProcessing=!1,a&&o&&(c=!1,e(j))},$=()=>{a=!0,c=!0,d.isProcessing||e(j)};return{schedule:stepsOrder.reduce((rt,ut)=>{const gt=g[ut];return rt[ut]=(yt,wt=!1,Ct=!1)=>(a||$(),gt.schedule(yt,wt,Ct)),rt},{}),cancel:rt=>stepsOrder.forEach(ut=>g[ut].cancel(rt)),state:d,steps:g}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0),svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(e,o,{renderState:a,latestValues:c})=>{frame.read(()=>{try{a.dimensions=typeof o.getBBox=="function"?o.getBBox():o.getBoundingClientRect()}catch{a.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(a,c,{enableHardwareAcceleration:!1},isSVGTag(o.tagName),e.transformTemplate),renderSVG(o,a)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function createDomMotionConfig(e,{forwardMotionProps:o=!1},a,c){return{...isSVGComponent(e)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:a,useRender:createUseRender(o),createVisualElement:c,Component:e}}function addDomEvent(e,o,a,c={passive:!0}){return e.addEventListener(o,a,c),()=>e.removeEventListener(o,a)}const isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function extractEventInfo(e,o="page"){return{point:{x:e[o+"X"],y:e[o+"Y"]}}}const addPointerInfo=e=>o=>isPrimaryPointer(o)&&e(o,extractEventInfo(o));function addPointerEvent(e,o,a,c){return addDomEvent(e,o,addPointerInfo(a),c)}const combineFunctions=(e,o)=>a=>o(e(a)),pipe=(...e)=>e.reduce(combineFunctions);function createLock(e){let o=null;return()=>{const a=()=>{o=null};return o===null?(o=e,a):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(e){let o=!1;if(e==="y")o=globalVerticalLock();else if(e==="x")o=globalHorizontalLock();else{const a=globalHorizontalLock(),c=globalVerticalLock();a&&c?o=()=>{a(),c()}:(a&&a(),c&&c())}return o}function isDragActive(){const e=getGlobalLock(!0);return e?(e(),!1):!0}class Feature{constructor(o){this.isMounted=!1,this.node=o}update(){}}function addHoverEvent(e,o){const a="pointer"+(o?"enter":"leave"),c="onHover"+(o?"Start":"End"),d=(g,b)=>{if(g.pointerType==="touch"||isDragActive())return;const j=e.getProps();e.animationState&&j.whileHover&&e.animationState.setActive("whileHover",o),j[c]&&frame.update(()=>j[c](g,b))};return addPointerEvent(e.current,a,d,{passive:!e.getProps()[c]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let o=!1;try{o=this.node.current.matches(":focus-visible")}catch{o=!0}!o||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(e,o)=>o?e===o?!0:isNodeOrChild(e,o.parentElement):!1;function fireSyntheticPointerEvent(e,o){if(!o)return;const a=new PointerEvent("pointer"+e);o(a,extractEventInfo(a))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop$2,this.removeEndListeners=noop$2,this.removeAccessibleListeners=noop$2,this.startPointerPress=(o,a)=>{if(this.isPressing)return;this.removeEndListeners();const c=this.node.getProps(),g=addPointerEvent(window,"pointerup",(j,$)=>{if(!this.checkPressEnd())return;const{onTap:_e,onTapCancel:st,globalTapTarget:rt}=this.node.getProps();frame.update(()=>{!rt&&!isNodeOrChild(this.node.current,j.target)?st&&st(j,$):_e&&_e(j,$)})},{passive:!(c.onTap||c.onPointerUp)}),b=addPointerEvent(window,"pointercancel",(j,$)=>this.cancelPress(j,$),{passive:!(c.onTapCancel||c.onPointerCancel)});this.removeEndListeners=pipe(g,b),this.startPress(o,a)},this.startAccessiblePress=()=>{const o=g=>{if(g.key!=="Enter"||this.isPressing)return;const b=j=>{j.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",($,_e)=>{const{onTap:st}=this.node.getProps();st&&frame.update(()=>st($,_e))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",b),fireSyntheticPointerEvent("down",(j,$)=>{this.startPress(j,$)})},a=addDomEvent(this.node.current,"keydown",o),c=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(g,b)=>this.cancelPress(g,b))},d=addDomEvent(this.node.current,"blur",c);this.removeAccessibleListeners=pipe(a,d)}}startPress(o,a){this.isPressing=!0;const{onTapStart:c,whileTap:d}=this.node.getProps();d&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),c&&frame.update(()=>c(o,a))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(o,a){if(!this.checkPressEnd())return;const{onTapCancel:c}=this.node.getProps();c&&frame.update(()=>c(o,a))}mount(){const o=this.node.getProps(),a=addPointerEvent(o.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(o.onTapStart||o.onPointerStart)}),c=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(a,c)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const o=observerCallbacks.get(e.target);o&&o(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...o}){const a=e||document;observers.has(a)||observers.set(a,{});const c=observers.get(a),d=JSON.stringify(o);return c[d]||(c[d]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...o})),c[d]}function observeIntersection(e,o,a){const c=initIntersectionObserver(o);return observerCallbacks.set(e,a),c.observe(e),()=>{observerCallbacks.delete(e),c.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:o={}}=this.node.getProps(),{root:a,margin:c,amount:d="some",once:g}=o,b={root:a?a.current:void 0,rootMargin:c,threshold:typeof d=="number"?d:thresholdNames[d]},j=$=>{const{isIntersecting:_e}=$;if(this.isInView===_e||(this.isInView=_e,g&&!_e&&this.hasEnteredView))return;_e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_e);const{onViewportEnter:st,onViewportLeave:rt}=this.node.getProps(),ut=_e?st:rt;ut&&ut($)};return observeIntersection(this.node.current,b,j)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:o,prevProps:a}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(o,a))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:o={}}={}){return a=>e[a]!==o[a]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}};function shallowCompare(e,o){if(!Array.isArray(o))return!1;const a=o.length;if(a!==e.length)return!1;for(let c=0;c<a;c++)if(o[c]!==e[c])return!1;return!0}function getCurrent(e){const o={};return e.values.forEach((a,c)=>o[c]=a.get()),o}function getVelocity$1(e){const o={};return e.values.forEach((a,c)=>o[c]=a.getVelocity()),o}function resolveVariant(e,o,a){const c=e.getProps();return resolveVariantFromProps(c,o,a!==void 0?a:c.custom,getCurrent(e),getVelocity$1(e))}let invariant$1=noop$2;const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3,instantAnimationState={current:!1},isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number";function isWaapiSupportedEasing(e){return!!(!e||typeof e=="string"&&supportedWaapiEasing[e]||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([e,o,a,c])=>`cubic-bezier(${e}, ${o}, ${a}, ${c})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e){if(e)return isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(mapEasingToNativeEasing):supportedWaapiEasing[e]}function animateStyle(e,o,a,{delay:c=0,duration:d,repeat:g=0,repeatType:b="loop",ease:j,times:$}={}){const _e={[o]:a};$&&(_e.offset=$);const st=mapEasingToNativeEasing(j);return Array.isArray(st)&&(_e.easing=st),e.animate(_e,{delay:c,duration:d,easing:Array.isArray(st)?"linear":st,fill:"both",iterations:g+1,direction:b==="reverse"?"alternate":"normal"})}function getFinalKeyframe(e,{repeat:o,repeatType:a="loop"}){const c=o&&a!=="loop"&&o%2===1?0:e.length-1;return e[c]}const calcBezier=(e,o,a)=>(((1-3*a+3*o)*e+(3*a-6*o))*e+3*o)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,o,a,c,d){let g,b,j=0;do b=o+(a-o)/2,g=calcBezier(b,c,d)-e,g>0?a=b:o=b;while(Math.abs(g)>subdivisionPrecision&&++j<subdivisionMaxIterations);return b}function cubicBezier(e,o,a,c){if(e===o&&a===c)return noop$2;const d=g=>binarySubdivide(g,0,1,e,a);return g=>g===0||g===1?g:calcBezier(d(g),o,c)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",mirrorEasing=e=>o=>o<=.5?e(2*o)/2:(2-e(2*(1-o)))/2,reverseEasing=e=>o=>1-e(1-o),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=e=>{if(Array.isArray(e)){invariant$1(e.length===4);const[o,a,c,d]=e;return cubicBezier(o,a,c,d)}else if(typeof e=="string")return easingLookup[e];return e},isColorString=(e,o)=>a=>!!(isString$2(a)&&singleColorRegex.test(a)&&a.startsWith(e)||o&&Object.prototype.hasOwnProperty.call(a,o)),splitColor=(e,o,a)=>c=>{if(!isString$2(c))return c;const[d,g,b,j]=c.match(floatRegex);return{[e]:parseFloat(d),[o]:parseFloat(g),[a]:parseFloat(b),alpha:j!==void 0?parseFloat(j):1}},clampRgbUnit=e=>clamp$1(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:o,blue:a,alpha:c=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(o)+", "+rgbUnit.transform(a)+", "+sanitize(alpha.transform(c))+")"};function parseHex(e){let o="",a="",c="",d="";return e.length>5?(o=e.substring(1,3),a=e.substring(3,5),c=e.substring(5,7),d=e.substring(7,9)):(o=e.substring(1,2),a=e.substring(2,3),c=e.substring(3,4),d=e.substring(4,5),o+=o,a+=a,c+=c,d+=d),{red:parseInt(o,16),green:parseInt(a,16),blue:parseInt(c,16),alpha:d?parseInt(d,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:o,lightness:a,alpha:c=1})=>"hsla("+Math.round(e)+", "+percent$1.transform(sanitize(o))+", "+percent$1.transform(sanitize(a))+", "+sanitize(alpha.transform(c))+")"},color$1={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>isString$2(e)?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e)},mix=(e,o,a)=>-a*e+a*o+e;function hueToRgb(e,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+(o-e)*6*a:a<1/2?o:a<2/3?e+(o-e)*(2/3-a)*6:e}function hslaToRgba({hue:e,saturation:o,lightness:a,alpha:c}){e/=360,o/=100,a/=100;let d=0,g=0,b=0;if(!o)d=g=b=a;else{const j=a<.5?a*(1+o):a+o-a*o,$=2*a-j;d=hueToRgb($,j,e+1/3),g=hueToRgb($,j,e),b=hueToRgb($,j,e-1/3)}return{red:Math.round(d*255),green:Math.round(g*255),blue:Math.round(b*255),alpha:c}}const mixLinearColor=(e,o,a)=>{const c=e*e;return Math.sqrt(Math.max(0,a*(o*o-c)+c))},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(o=>o.test(e));function asRGBA(e){const o=getColorType(e);let a=o.parse(e);return o===hsla&&(a=hslaToRgba(a)),a}const mixColor=(e,o)=>{const a=asRGBA(e),c=asRGBA(o),d={...a};return g=>(d.red=mixLinearColor(a.red,c.red,g),d.green=mixLinearColor(a.green,c.green,g),d.blue=mixLinearColor(a.blue,c.blue,g),d.alpha=mix(a.alpha,c.alpha,g),rgba.transform(d))};function test(e){var o,a;return isNaN(e)&&isString$2(e)&&(((o=e.match(floatRegex))===null||o===void 0?void 0:o.length)||0)+(((a=e.match(colorRegex))===null||a===void 0?void 0:a.length)||0)>0}const cssVarTokeniser={regex:cssVariableRegex,countKey:"Vars",token:"${v}",parse:noop$2},colorTokeniser={regex:colorRegex,countKey:"Colors",token:"${c}",parse:color$1.parse},numberTokeniser={regex:floatRegex,countKey:"Numbers",token:"${n}",parse:number.parse};function tokenise(e,{regex:o,countKey:a,token:c,parse:d}){const g=e.tokenised.match(o);g&&(e["num"+a]=g.length,e.tokenised=e.tokenised.replace(o,c),e.values.push(...g.map(d)))}function analyseComplexValue(e){const o=e.toString(),a={value:o,tokenised:o,values:[],numVars:0,numColors:0,numNumbers:0};return a.value.includes("var(--")&&tokenise(a,cssVarTokeniser),tokenise(a,colorTokeniser),tokenise(a,numberTokeniser),a}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{values:o,numColors:a,numVars:c,tokenised:d}=analyseComplexValue(e),g=o.length;return b=>{let j=d;for(let $=0;$<g;$++)$<c?j=j.replace(cssVarTokeniser.token,b[$]):$<c+a?j=j.replace(colorTokeniser.token,color$1.transform(b[$])):j=j.replace(numberTokeniser.token,sanitize(b[$]));return j}}const convertNumbersToZero=e=>typeof e=="number"?0:e;function getAnimatableNone$1(e){const o=parseComplexValue(e);return createTransformer(e)(o.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},mixImmediate=(e,o)=>a=>`${a>0?o:e}`;function getMixer(e,o){return typeof e=="number"?a=>mix(e,o,a):color$1.test(e)?mixColor(e,o):e.startsWith("var(")?mixImmediate(e,o):mixComplex(e,o)}const mixArray=(e,o)=>{const a=[...e],c=a.length,d=e.map((g,b)=>getMixer(g,o[b]));return g=>{for(let b=0;b<c;b++)a[b]=d[b](g);return a}},mixObject=(e,o)=>{const a={...e,...o},c={};for(const d in a)e[d]!==void 0&&o[d]!==void 0&&(c[d]=getMixer(e[d],o[d]));return d=>{for(const g in c)a[g]=c[g](d);return a}},mixComplex=(e,o)=>{const a=complex.createTransformer(o),c=analyseComplexValue(e),d=analyseComplexValue(o);return c.numVars===d.numVars&&c.numColors===d.numColors&&c.numNumbers>=d.numNumbers?pipe(mixArray(c.values,d.values),a):mixImmediate(e,o)},progress=(e,o,a)=>{const c=o-e;return c===0?1:(a-e)/c},mixNumber=(e,o)=>a=>mix(e,o,a);function detectMixerFactory(e){return typeof e=="number"?mixNumber:typeof e=="string"?color$1.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?mixObject:mixNumber}function createMixers(e,o,a){const c=[],d=a||detectMixerFactory(e[0]),g=e.length-1;for(let b=0;b<g;b++){let j=d(e[b],e[b+1]);if(o){const $=Array.isArray(o)?o[b]||noop$2:o;j=pipe($,j)}c.push(j)}return c}function interpolate$1(e,o,{clamp:a=!0,ease:c,mixer:d}={}){const g=e.length;if(invariant$1(g===o.length),g===1)return()=>o[0];e[0]>e[g-1]&&(e=[...e].reverse(),o=[...o].reverse());const b=createMixers(o,c,d),j=b.length,$=_e=>{let st=0;if(j>1)for(;st<e.length-2&&!(_e<e[st+1]);st++);const rt=progress(e[st],e[st+1],_e);return b[st](rt)};return a?_e=>$(clamp$1(e[0],e[g-1],_e)):$}function fillOffset(e,o){const a=e[e.length-1];for(let c=1;c<=o;c++){const d=progress(0,o,c);e.push(mix(a,1,d))}}function defaultOffset(e){const o=[0];return fillOffset(o,e.length-1),o}function convertOffsetToTimes(e,o){return e.map(a=>a*o)}function defaultEasing(e,o){return e.map(()=>o||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:o,times:a,ease:c="easeInOut"}){const d=isEasingArray(c)?c.map(easingDefinitionToFunction):easingDefinitionToFunction(c),g={done:!1,value:o[0]},b=convertOffsetToTimes(a&&a.length===o.length?a:defaultOffset(o),e),j=interpolate$1(b,o,{ease:Array.isArray(d)?d:defaultEasing(o,d)});return{calculatedDuration:e,next:$=>(g.value=j($),g.done=$>=e,g)}}function velocityPerSecond(e,o){return o?e*(1e3/o):0}const velocitySampleDuration=5;function calcGeneratorVelocity(e,o,a){const c=Math.max(o-velocitySampleDuration,0);return velocityPerSecond(a-e(c),o-c)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:e=800,bounce:o=.25,velocity:a=0,mass:c=1}){let d,g,b=1-o;b=clamp$1(minDamping,maxDamping,b),e=clamp$1(minDuration,maxDuration$1,millisecondsToSeconds(e)),b<1?(d=_e=>{const st=_e*b,rt=st*e,ut=st-a,gt=calcAngularFreq(_e,b),yt=Math.exp(-rt);return safeMin-ut/gt*yt},g=_e=>{const rt=_e*b*e,ut=rt*a+a,gt=Math.pow(b,2)*Math.pow(_e,2)*e,yt=Math.exp(-rt),wt=calcAngularFreq(Math.pow(_e,2),b);return(-d(_e)+safeMin>0?-1:1)*((ut-gt)*yt)/wt}):(d=_e=>{const st=Math.exp(-_e*e),rt=(_e-a)*e+1;return-safeMin+st*rt},g=_e=>{const st=Math.exp(-_e*e),rt=(a-_e)*(e*e);return st*rt});const j=5/e,$=approximateRoot(d,g,j);if(e=secondsToMilliseconds(e),isNaN($))return{stiffness:100,damping:10,duration:e};{const _e=Math.pow($,2)*c;return{stiffness:_e,damping:b*2*Math.sqrt(c*_e),duration:e}}}const rootIterations=12;function approximateRoot(e,o,a){let c=a;for(let d=1;d<rootIterations;d++)c=c-e(c)/o(c);return c}function calcAngularFreq(e,o){return e*Math.sqrt(1-o*o)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,o){return o.some(a=>e[a]!==void 0)}function getSpringOptions(e){let o={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys)){const a=findSpring(e);o={...o,...a,mass:1},o.isResolvedFromDuration=!0}return o}function spring({keyframes:e,restDelta:o,restSpeed:a,...c}){const d=e[0],g=e[e.length-1],b={done:!1,value:d},{stiffness:j,damping:$,mass:_e,duration:st,velocity:rt,isResolvedFromDuration:ut}=getSpringOptions({...c,velocity:-millisecondsToSeconds(c.velocity||0)}),gt=rt||0,yt=$/(2*Math.sqrt(j*_e)),wt=g-d,Ct=millisecondsToSeconds(Math.sqrt(j/_e)),Pt=Math.abs(wt)<5;a||(a=Pt?.01:2),o||(o=Pt?.005:.5);let At;if(yt<1){const Tt=calcAngularFreq(Ct,yt);At=kt=>{const It=Math.exp(-yt*Ct*kt);return g-It*((gt+yt*Ct*wt)/Tt*Math.sin(Tt*kt)+wt*Math.cos(Tt*kt))}}else if(yt===1)At=Tt=>g-Math.exp(-Ct*Tt)*(wt+(gt+Ct*wt)*Tt);else{const Tt=Ct*Math.sqrt(yt*yt-1);At=kt=>{const It=Math.exp(-yt*Ct*kt),Lt=Math.min(Tt*kt,300);return g-It*((gt+yt*Ct*wt)*Math.sinh(Lt)+Tt*wt*Math.cosh(Lt))/Tt}}return{calculatedDuration:ut&&st||null,next:Tt=>{const kt=At(Tt);if(ut)b.done=Tt>=st;else{let It=gt;Tt!==0&&(yt<1?It=calcGeneratorVelocity(At,Tt,kt):It=0);const Lt=Math.abs(It)<=a,Ft=Math.abs(g-kt)<=o;b.done=Lt&&Ft}return b.value=b.done?g:kt,b}}}function inertia({keyframes:e,velocity:o=0,power:a=.8,timeConstant:c=325,bounceDamping:d=10,bounceStiffness:g=500,modifyTarget:b,min:j,max:$,restDelta:_e=.5,restSpeed:st}){const rt=e[0],ut={done:!1,value:rt},gt=Nt=>j!==void 0&&Nt<j||$!==void 0&&Nt>$,yt=Nt=>j===void 0?$:$===void 0||Math.abs(j-Nt)<Math.abs($-Nt)?j:$;let wt=a*o;const Ct=rt+wt,Pt=b===void 0?Ct:b(Ct);Pt!==Ct&&(wt=Pt-rt);const At=Nt=>-wt*Math.exp(-Nt/c),Tt=Nt=>Pt+At(Nt),kt=Nt=>{const Ht=At(Nt),dr=Tt(Nt);ut.done=Math.abs(Ht)<=_e,ut.value=ut.done?Pt:dr};let It,Lt;const Ft=Nt=>{gt(ut.value)&&(It=Nt,Lt=spring({keyframes:[ut.value,yt(ut.value)],velocity:calcGeneratorVelocity(Tt,Nt,ut.value),damping:d,stiffness:g,restDelta:_e,restSpeed:st}))};return Ft(0),{calculatedDuration:null,next:Nt=>{let Ht=!1;return!Lt&&It===void 0&&(Ht=!0,kt(Nt),Ft(Nt)),It!==void 0&&Nt>It?Lt.next(Nt-It):(!Ht&&kt(Nt),ut)}}}const frameloopDriver=e=>{const o=({timestamp:a})=>e(a);return{start:()=>frame.update(o,!0),stop:()=>cancelFrame(o),now:()=>frameData.isProcessing?frameData.timestamp:performance.now()}},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let o=0;const a=50;let c=e.next(o);for(;!c.done&&o<maxGeneratorDuration;)o+=a,c=e.next(o);return o>=maxGeneratorDuration?1/0:o}const types={decay:inertia,inertia,tween:keyframes,keyframes,spring};function animateValue({autoplay:e=!0,delay:o=0,driver:a=frameloopDriver,keyframes:c,type:d="keyframes",repeat:g=0,repeatDelay:b=0,repeatType:j="loop",onPlay:$,onStop:_e,onComplete:st,onUpdate:rt,...ut}){let gt=1,yt=!1,wt,Ct;const Pt=()=>{Ct=new Promise(Nn=>{wt=Nn})};Pt();let At;const Tt=types[d]||keyframes;let kt;Tt!==keyframes&&typeof c[0]!="number"&&(kt=interpolate$1([0,100],c,{clamp:!1}),c=[0,100]);const It=Tt({...ut,keyframes:c});let Lt;j==="mirror"&&(Lt=Tt({...ut,keyframes:[...c].reverse(),velocity:-(ut.velocity||0)}));let Ft="idle",Nt=null,Ht=null,dr=null;It.calculatedDuration===null&&g&&(It.calculatedDuration=calcGeneratorDuration(It));const{calculatedDuration:hs}=It;let us=1/0,hn=1/0;hs!==null&&(us=hs+b,hn=us*(g+1)-b);let un=0;const bo=Nn=>{if(Ht===null)return;gt>0&&(Ht=Math.min(Ht,Nn)),gt<0&&(Ht=Math.min(Nn-hn/gt,Ht)),Nt!==null?un=Nt:un=Math.round(Nn-Ht)*gt;const Qn=un-o*(gt>=0?1:-1),bu=gt>=0?Qn<0:Qn>hn;un=Math.max(Qn,0),Ft==="finished"&&Nt===null&&(un=hn);let ou=un,g0=It;if(g){const a1=Math.min(un,hn)/us;let q1=Math.floor(a1),ox=a1%1;!ox&&a1>=1&&(ox=1),ox===1&&q1--,q1=Math.min(q1,g+1),!!(q1%2)&&(j==="reverse"?(ox=1-ox,b&&(ox-=b/us)):j==="mirror"&&(g0=Lt)),ou=clamp$1(0,1,ox)*us}const Su=bu?{done:!1,value:c[0]}:g0.next(ou);kt&&(Su.value=kt(Su.value));let{done:l1}=Su;!bu&&hs!==null&&(l1=gt>=0?un>=hn:un<=0);const B0=Nt===null&&(Ft==="finished"||Ft==="running"&&l1);return rt&&rt(Su.value),B0&&Gr(),Su},_s=()=>{At&&At.stop(),At=void 0},gn=()=>{Ft="idle",_s(),wt(),Pt(),Ht=dr=null},Gr=()=>{Ft="finished",st&&st(),_s(),wt()},ds=()=>{if(yt)return;At||(At=a(bo));const Nn=At.now();$&&$(),Nt!==null?Ht=Nn-Nt:(!Ht||Ft==="finished")&&(Ht=Nn),Ft==="finished"&&Pt(),dr=Ht,Nt=null,Ft="running",At.start()};e&&ds();const Zn={then(Nn,Qn){return Ct.then(Nn,Qn)},get time(){return millisecondsToSeconds(un)},set time(Nn){Nn=secondsToMilliseconds(Nn),un=Nn,Nt!==null||!At||gt===0?Nt=Nn:Ht=At.now()-Nn/gt},get duration(){const Nn=It.calculatedDuration===null?calcGeneratorDuration(It):It.calculatedDuration;return millisecondsToSeconds(Nn)},get speed(){return gt},set speed(Nn){Nn===gt||!At||(gt=Nn,Zn.time=millisecondsToSeconds(un))},get state(){return Ft},play:ds,pause:()=>{Ft="paused",Nt=un},stop:()=>{yt=!0,Ft!=="idle"&&(Ft="idle",_e&&_e(),gn())},cancel:()=>{dr!==null&&bo(dr),gn()},complete:()=>{Ft="finished"},sample:Nn=>(Ht=0,bo(Nn))};return Zn}function memo(e){let o;return()=>(o===void 0&&(o=e()),o)}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sampleDelta=10,maxDuration=2e4,requiresPregeneratedKeyframes=(e,o)=>o.type==="spring"||e==="backgroundColor"||!isWaapiSupportedEasing(o.ease);function createAcceleratedAnimation(e,o,{onUpdate:a,onComplete:c,...d}){if(!(supportsWaapi()&&acceleratedValues.has(o)&&!d.repeatDelay&&d.repeatType!=="mirror"&&d.damping!==0&&d.type!=="inertia"))return!1;let b=!1,j,$,_e=!1;const st=()=>{$=new Promise(Tt=>{j=Tt})};st();let{keyframes:rt,duration:ut=300,ease:gt,times:yt}=d;if(requiresPregeneratedKeyframes(o,d)){const Tt=animateValue({...d,repeat:0,delay:0});let kt={done:!1,value:rt[0]};const It=[];let Lt=0;for(;!kt.done&&Lt<maxDuration;)kt=Tt.sample(Lt),It.push(kt.value),Lt+=sampleDelta;yt=void 0,rt=It,ut=Lt-sampleDelta,gt="linear"}const wt=animateStyle(e.owner.current,o,rt,{...d,duration:ut,ease:gt,times:yt}),Ct=()=>{_e=!1,wt.cancel()},Pt=()=>{_e=!0,frame.update(Ct),j(),st()};return wt.onfinish=()=>{_e||(e.set(getFinalKeyframe(rt,d)),c&&c(),Pt())},{then(Tt,kt){return $.then(Tt,kt)},attachTimeline(Tt){return wt.timeline=Tt,wt.onfinish=null,noop$2},get time(){return millisecondsToSeconds(wt.currentTime||0)},set time(Tt){wt.currentTime=secondsToMilliseconds(Tt)},get speed(){return wt.playbackRate},set speed(Tt){wt.playbackRate=Tt},get duration(){return millisecondsToSeconds(ut)},play:()=>{b||(wt.play(),cancelFrame(Ct))},pause:()=>wt.pause(),stop:()=>{if(b=!0,wt.playState==="idle")return;const{currentTime:Tt}=wt;if(Tt){const kt=animateValue({...d,autoplay:!1});e.setWithVelocity(kt.sample(Tt-sampleDelta).value,kt.sample(Tt).value,sampleDelta)}Pt()},complete:()=>{_e||wt.finish()},cancel:Pt}}function createInstantAnimation({keyframes:e,delay:o,onUpdate:a,onComplete:c}){const d=()=>(a&&a(e[e.length-1]),c&&c(),{time:0,speed:1,duration:0,play:noop$2,pause:noop$2,stop:noop$2,then:g=>(g(),Promise.resolve()),cancel:noop$2,complete:noop$2});return o?animateValue({keyframes:[0,1],duration:0,delay:o,onComplete:d}):d()}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:o})=>o.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(o[1]):underDampedSpring:ease,isAnimatable=(e,o)=>e==="zIndex"?!1:!!(typeof o=="number"||Array.isArray(o)||typeof o=="string"&&(complex.test(o)||o==="0")&&!o.startsWith("url(")),maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[o,a]=e.slice(0,-1).split("(");if(o==="drop-shadow")return e;const[c]=a.match(floatRegex)||[];if(!c)return e;const d=a.replace(c,"");let g=maxDefaults.has(o)?1:0;return c!==a&&(g*=100),o+"("+g+d+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter$1={...complex,getAnimatableNone:e=>{const o=e.match(functionRegex);return o?o.map(applyDefaultFilter).join(" "):e}},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,o){let a=getDefaultValueType(e);return a!==filter$1&&(a=complex),a.getAnimatableNone?a.getAnimatableNone(o):void 0}const isZeroValueString=e=>/^0[^.\s]+$/.test(e);function isNone(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||isZeroValueString(e)}function getKeyframes(e,o,a,c){const d=isAnimatable(o,a);let g;Array.isArray(a)?g=[...a]:g=[null,a];const b=c.from!==void 0?c.from:e.get();let j;const $=[];for(let _e=0;_e<g.length;_e++)g[_e]===null&&(g[_e]=_e===0?b:g[_e-1]),isNone(g[_e])&&$.push(_e),typeof g[_e]=="string"&&g[_e]!=="none"&&g[_e]!=="0"&&(j=g[_e]);if(d&&$.length&&j)for(let _e=0;_e<$.length;_e++){const st=$[_e];g[st]=getAnimatableNone(o,j)}return g}function isTransitionDefined({when:e,delay:o,delayChildren:a,staggerChildren:c,staggerDirection:d,repeat:g,repeatType:b,repeatDelay:j,from:$,elapsed:_e,...st}){return!!Object.keys(st).length}function getValueTransition(e,o){return e[o]||e.default||e}const MotionGlobalConfig={skipAnimations:!1},animateMotionValue=(e,o,a,c={})=>d=>{const g=getValueTransition(c,e)||{},b=g.delay||c.delay||0;let{elapsed:j=0}=c;j=j-secondsToMilliseconds(b);const $=getKeyframes(o,e,a,g),_e=$[0],st=$[$.length-1],rt=isAnimatable(e,_e),ut=isAnimatable(e,st);let gt={keyframes:$,velocity:o.getVelocity(),ease:"easeOut",...g,delay:-j,onUpdate:yt=>{o.set(yt),g.onUpdate&&g.onUpdate(yt)},onComplete:()=>{d(),g.onComplete&&g.onComplete()}};if(isTransitionDefined(g)||(gt={...gt,...getDefaultTransition(e,gt)}),gt.duration&&(gt.duration=secondsToMilliseconds(gt.duration)),gt.repeatDelay&&(gt.repeatDelay=secondsToMilliseconds(gt.repeatDelay)),!rt||!ut||instantAnimationState.current||g.type===!1||MotionGlobalConfig.skipAnimations)return createInstantAnimation(gt);if(!c.isHandoff&&o.owner&&o.owner.current instanceof HTMLElement&&!o.owner.getProps().onUpdate){const yt=createAcceleratedAnimation(o,e,gt);if(yt)return yt}return animateValue(gt)};function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}const isNumericalString=e=>/^\-?\d*\.?\d+$/.test(e);function addUniqueItem(e,o){e.indexOf(o)===-1&&e.push(o)}function removeItem(e,o){const a=e.indexOf(o);a>-1&&e.splice(a,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(o){return addUniqueItem(this.subscriptions,o),()=>removeItem(this.subscriptions,o)}notify(o,a,c){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](o,a,c);else for(let g=0;g<d;g++){const b=this.subscriptions[g];b&&b(o,a,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(o,a={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(c,d=!0)=>{this.prev=this.current,this.current=c;const{delta:g,timestamp:b}=frameData;this.lastUpdated!==b&&(this.timeDelta=g,this.lastUpdated=b,frame.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),d&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>frame.postRender(this.velocityCheck),this.velocityCheck=({timestamp:c})=>{c!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=o,this.canTrackVelocity=isFloat(this.current),this.owner=a.owner}onChange(o){return this.on("change",o)}on(o,a){this.events[o]||(this.events[o]=new SubscriptionManager);const c=this.events[o].add(a);return o==="change"?()=>{c(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(const o in this.events)this.events[o].clear()}attach(o,a){this.passiveEffect=o,this.stopPassiveEffect=a}set(o,a=!0){!a||!this.passiveEffect?this.updateAndNotify(o,a):this.passiveEffect(o,this.updateAndNotify)}setWithVelocity(o,a,c){this.set(a),this.prev=o,this.timeDelta=c}jump(o){this.updateAndNotify(o),this.prev=o,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(o){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=o(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,o){return new MotionValue(e,o)}const testValueType=e=>o=>o.test(e),auto={test:e=>e==="auto",parse:e=>e},dimensionValueTypes=[number,px,percent$1,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e)),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=e=>valueTypes.find(testValueType(e));function setMotionValue(e,o,a){e.hasValue(o)?e.getValue(o).set(a):e.addValue(o,motionValue(a))}function setTarget(e,o){const a=resolveVariant(e,o);let{transitionEnd:c={},transition:d={},...g}=a?e.makeTargetAnimatable(a,!1):{};g={...g,...c};for(const b in g){const j=resolveFinalValueInKeyframes(g[b]);setMotionValue(e,b,j)}}function checkTargetForNewValues(e,o,a){var c,d;const g=Object.keys(o).filter(j=>!e.hasValue(j)),b=g.length;if(b)for(let j=0;j<b;j++){const $=g[j],_e=o[$];let st=null;Array.isArray(_e)&&(st=_e[0]),st===null&&(st=(d=(c=a[$])!==null&&c!==void 0?c:e.readValue($))!==null&&d!==void 0?d:o[$]),st!=null&&(typeof st=="string"&&(isNumericalString(st)||isZeroValueString(st))?st=parseFloat(st):!findValueType(st)&&complex.test(_e)&&(st=getAnimatableNone($,_e)),e.addValue($,motionValue(st,{owner:e})),a[$]===void 0&&(a[$]=st),st!==null&&e.setBaseTarget($,st))}}function getOriginFromTransition(e,o){return o?(o[e]||o.default||o).from:void 0}function getOrigin(e,o,a){const c={};for(const d in e){const g=getOriginFromTransition(d,o);if(g!==void 0)c[d]=g;else{const b=a.getValue(d);b&&(c[d]=b.get())}}return c}function shouldBlockAnimation({protectedKeys:e,needsAnimating:o},a){const c=e.hasOwnProperty(a)&&o[a]!==!0;return o[a]=!1,c}function hasKeyframesChanged(e,o){const a=e.get();if(Array.isArray(o)){for(let c=0;c<o.length;c++)if(o[c]!==a)return!0}else return a!==o}function animateTarget(e,o,{delay:a=0,transitionOverride:c,type:d}={}){let{transition:g=e.getDefaultTransition(),transitionEnd:b,...j}=e.makeTargetAnimatable(o);const $=e.getValue("willChange");c&&(g=c);const _e=[],st=d&&e.animationState&&e.animationState.getState()[d];for(const rt in j){const ut=e.getValue(rt),gt=j[rt];if(!ut||gt===void 0||st&&shouldBlockAnimation(st,rt))continue;const yt={delay:a,elapsed:0,...getValueTransition(g||{},rt)};if(window.HandoffAppearAnimations){const Pt=e.getProps()[optimizedAppearDataAttribute];if(Pt){const At=window.HandoffAppearAnimations(Pt,rt,ut,frame);At!==null&&(yt.elapsed=At,yt.isHandoff=!0)}}let wt=!yt.isHandoff&&!hasKeyframesChanged(ut,gt);if(yt.type==="spring"&&(ut.getVelocity()||yt.velocity)&&(wt=!1),ut.animation&&(wt=!1),wt)continue;ut.start(animateMotionValue(rt,ut,gt,e.shouldReduceMotion&&transformProps.has(rt)?{type:!1}:yt));const Ct=ut.animation;isWillChangeMotionValue($)&&($.add(rt),Ct.then(()=>$.remove(rt))),_e.push(Ct)}return b&&Promise.all(_e).then(()=>{b&&setTarget(e,b)}),_e}function animateVariant(e,o,a={}){const c=resolveVariant(e,o,a.custom);let{transition:d=e.getDefaultTransition()||{}}=c||{};a.transitionOverride&&(d=a.transitionOverride);const g=c?()=>Promise.all(animateTarget(e,c,a)):()=>Promise.resolve(),b=e.variantChildren&&e.variantChildren.size?($=0)=>{const{delayChildren:_e=0,staggerChildren:st,staggerDirection:rt}=d;return animateChildren(e,o,_e+$,st,rt,a)}:()=>Promise.resolve(),{when:j}=d;if(j){const[$,_e]=j==="beforeChildren"?[g,b]:[b,g];return $().then(()=>_e())}else return Promise.all([g(),b(a.delay)])}function animateChildren(e,o,a=0,c=0,d=1,g){const b=[],j=(e.variantChildren.size-1)*c,$=d===1?(_e=0)=>_e*c:(_e=0)=>j-_e*c;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach((_e,st)=>{_e.notify("AnimationStart",o),b.push(animateVariant(_e,o,{...g,delay:a+$(st)}).then(()=>_e.notify("AnimationComplete",o)))}),Promise.all(b)}function sortByTreeOrder(e,o){return e.sortNodePosition(o)}function animateVisualElement(e,o,a={}){e.notify("AnimationStart",o);let c;if(Array.isArray(o)){const d=o.map(g=>animateVariant(e,g,a));c=Promise.all(d)}else if(typeof o=="string")c=animateVariant(e,o,a);else{const d=typeof o=="function"?resolveVariant(e,o,a.custom):o;c=Promise.all(animateTarget(e,d,a))}return c.then(()=>e.notify("AnimationComplete",o))}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return o=>Promise.all(o.map(({animation:a,options:c})=>animateVisualElement(e,a,c)))}function createAnimationState(e){let o=animateList(e);const a=createState();let c=!0;const d=($,_e)=>{const st=resolveVariant(e,_e);if(st){const{transition:rt,transitionEnd:ut,...gt}=st;$={...$,...gt,...ut}}return $};function g($){o=$(e)}function b($,_e){const st=e.getProps(),rt=e.getVariantContext(!0)||{},ut=[],gt=new Set;let yt={},wt=1/0;for(let Pt=0;Pt<numAnimationTypes;Pt++){const At=reversePriorityOrder[Pt],Tt=a[At],kt=st[At]!==void 0?st[At]:rt[At],It=isVariantLabel(kt),Lt=At===_e?Tt.isActive:null;Lt===!1&&(wt=Pt);let Ft=kt===rt[At]&&kt!==st[At]&&It;if(Ft&&c&&e.manuallyAnimateOnMount&&(Ft=!1),Tt.protectedKeys={...yt},!Tt.isActive&&Lt===null||!kt&&!Tt.prevProp||isAnimationControls(kt)||typeof kt=="boolean")continue;let Ht=checkVariantsDidChange(Tt.prevProp,kt)||At===_e&&Tt.isActive&&!Ft&&It||Pt>wt&&It,dr=!1;const hs=Array.isArray(kt)?kt:[kt];let us=hs.reduce(d,{});Lt===!1&&(us={});const{prevResolvedValues:hn={}}=Tt,un={...hn,...us},bo=_s=>{Ht=!0,gt.has(_s)&&(dr=!0,gt.delete(_s)),Tt.needsAnimating[_s]=!0};for(const _s in un){const gn=us[_s],Gr=hn[_s];if(yt.hasOwnProperty(_s))continue;let ds=!1;isKeyframesTarget(gn)&&isKeyframesTarget(Gr)?ds=!shallowCompare(gn,Gr):ds=gn!==Gr,ds?gn!==void 0?bo(_s):gt.add(_s):gn!==void 0&&gt.has(_s)?bo(_s):Tt.protectedKeys[_s]=!0}Tt.prevProp=kt,Tt.prevResolvedValues=us,Tt.isActive&&(yt={...yt,...us}),c&&e.blockInitialAnimation&&(Ht=!1),Ht&&(!Ft||dr)&&ut.push(...hs.map(_s=>({animation:_s,options:{type:At,...$}})))}if(gt.size){const Pt={};gt.forEach(At=>{const Tt=e.getBaseTarget(At);Tt!==void 0&&(Pt[At]=Tt)}),ut.push({animation:Pt})}let Ct=!!ut.length;return c&&(st.initial===!1||st.initial===st.animate)&&!e.manuallyAnimateOnMount&&(Ct=!1),c=!1,Ct?o(ut):Promise.resolve()}function j($,_e,st){var rt;if(a[$].isActive===_e)return Promise.resolve();(rt=e.variantChildren)===null||rt===void 0||rt.forEach(gt=>{var yt;return(yt=gt.animationState)===null||yt===void 0?void 0:yt.setActive($,_e)}),a[$].isActive=_e;const ut=b(st,$);for(const gt in a)a[gt].protectedKeys={};return ut}return{animateChanges:b,setActive:j,setAnimateFunction:g,getState:()=>a}}function checkVariantsDidChange(e,o){return typeof o=="string"?o!==e:Array.isArray(o)?!shallowCompare(o,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor(o){super(o),o.animationState||(o.animationState=createAnimationState(o))}updateAnimationControlsSubscription(){const{animate:o}=this.node.getProps();this.unmount(),isAnimationControls(o)&&(this.unmount=o.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:o}=this.node.getProps(),{animate:a}=this.node.prevProps||{};o!==a&&this.updateAnimationControlsSubscription()}unmount(){}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:o,onExitComplete:a,custom:c}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||o===d)return;const g=this.node.animationState.setActive("exit",!o,{custom:c??this.node.getProps().custom});a&&!o&&g.then(()=>a(this.id))}mount(){const{register:o}=this.node.presenceContext||{};o&&(this.unmount=o(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},distance=(e,o)=>Math.abs(e-o);function distance2D(e,o){const a=distance(e.x,o.x),c=distance(e.y,o.y);return Math.sqrt(a**2+c**2)}class PanSession{constructor(o,a,{transformPagePoint:c,contextWindow:d,dragSnapToOrigin:g=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const rt=getPanInfo(this.lastMoveEventInfo,this.history),ut=this.startEvent!==null,gt=distance2D(rt.offset,{x:0,y:0})>=3;if(!ut&&!gt)return;const{point:yt}=rt,{timestamp:wt}=frameData;this.history.push({...yt,timestamp:wt});const{onStart:Ct,onMove:Pt}=this.handlers;ut||(Ct&&Ct(this.lastMoveEvent,rt),this.startEvent=this.lastMoveEvent),Pt&&Pt(this.lastMoveEvent,rt)},this.handlePointerMove=(rt,ut)=>{this.lastMoveEvent=rt,this.lastMoveEventInfo=transformPoint(ut,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(rt,ut)=>{this.end();const{onEnd:gt,onSessionEnd:yt,resumeAnimation:wt}=this.handlers;if(this.dragSnapToOrigin&&wt&&wt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ct=getPanInfo(rt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(ut,this.transformPagePoint),this.history);this.startEvent&&gt&&gt(rt,Ct),yt&&yt(rt,Ct)},!isPrimaryPointer(o))return;this.dragSnapToOrigin=g,this.handlers=a,this.transformPagePoint=c,this.contextWindow=d||window;const b=extractEventInfo(o),j=transformPoint(b,this.transformPagePoint),{point:$}=j,{timestamp:_e}=frameData;this.history=[{...$,timestamp:_e}];const{onSessionStart:st}=a;st&&st(o,getPanInfo(j,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(o){this.handlers=o}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,o){return o?{point:o(e.point)}:e}function subtractPoint(e,o){return{x:e.x-o.x,y:e.y-o.y}}function getPanInfo({point:e},o){return{point:e,delta:subtractPoint(e,lastDevicePoint(o)),offset:subtractPoint(e,startDevicePoint(o)),velocity:getVelocity(o,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,o){if(e.length<2)return{x:0,y:0};let a=e.length-1,c=null;const d=lastDevicePoint(e);for(;a>=0&&(c=e[a],!(d.timestamp-c.timestamp>secondsToMilliseconds(o)));)a--;if(!c)return{x:0,y:0};const g=millisecondsToSeconds(d.timestamp-c.timestamp);if(g===0)return{x:0,y:0};const b={x:(d.x-c.x)/g,y:(d.y-c.y)/g};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}function calcLength(e){return e.max-e.min}function isNear(e,o=0,a=.01){return Math.abs(e-o)<=a}function calcAxisDelta(e,o,a,c=.5){e.origin=c,e.originPoint=mix(o.min,o.max,e.origin),e.scale=calcLength(a)/calcLength(o),(isNear(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=mix(a.min,a.max,e.origin)-e.originPoint,(isNear(e.translate)||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,o,a,c){calcAxisDelta(e.x,o.x,a.x,c?c.originX:void 0),calcAxisDelta(e.y,o.y,a.y,c?c.originY:void 0)}function calcRelativeAxis(e,o,a){e.min=a.min+o.min,e.max=e.min+calcLength(o)}function calcRelativeBox(e,o,a){calcRelativeAxis(e.x,o.x,a.x),calcRelativeAxis(e.y,o.y,a.y)}function calcRelativeAxisPosition(e,o,a){e.min=o.min-a.min,e.max=e.min+calcLength(o)}function calcRelativePosition(e,o,a){calcRelativeAxisPosition(e.x,o.x,a.x),calcRelativeAxisPosition(e.y,o.y,a.y)}function applyConstraints(e,{min:o,max:a},c){return o!==void 0&&e<o?e=c?mix(o,e,c.min):Math.max(e,o):a!==void 0&&e>a&&(e=c?mix(a,e,c.max):Math.min(e,a)),e}function calcRelativeAxisConstraints(e,o,a){return{min:o!==void 0?e.min+o:void 0,max:a!==void 0?e.max+a-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:o,left:a,bottom:c,right:d}){return{x:calcRelativeAxisConstraints(e.x,a,d),y:calcRelativeAxisConstraints(e.y,o,c)}}function calcViewportAxisConstraints(e,o){let a=o.min-e.min,c=o.max-e.max;return o.max-o.min<e.max-e.min&&([a,c]=[c,a]),{min:a,max:c}}function calcViewportConstraints(e,o){return{x:calcViewportAxisConstraints(e.x,o.x),y:calcViewportAxisConstraints(e.y,o.y)}}function calcOrigin(e,o){let a=.5;const c=calcLength(e),d=calcLength(o);return d>c?a=progress(o.min,o.max-c,e.min):c>d&&(a=progress(e.min,e.max-d,o.min)),clamp$1(0,1,a)}function rebaseAxisConstraints(e,o){const a={};return o.min!==void 0&&(a.min=o.min-e.min),o.max!==void 0&&(a.max=o.max-e.min),a}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,o,a){return{min:resolvePointElastic(e,o),max:resolvePointElastic(e,a)}}function resolvePointElastic(e,o){return typeof e=="number"?e:e[o]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:o,right:a,bottom:c}){return{x:{min:o,max:a},y:{min:e,max:c}}}function convertBoxToBoundingBox({x:e,y:o}){return{top:o.min,right:e.max,bottom:o.max,left:e.min}}function transformBoxPoints(e,o){if(!o)return e;const a=o({x:e.left,y:e.top}),c=o({x:e.right,y:e.bottom});return{top:a.y,left:a.x,bottom:c.y,right:c.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:o,scaleY:a}){return!isIdentityScale(e)||!isIdentityScale(o)||!isIdentityScale(a)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,o,a){const c=e-a,d=o*c;return a+d}function applyPointDelta(e,o,a,c,d){return d!==void 0&&(e=scalePoint(e,d,c)),scalePoint(e,a,c)+o}function applyAxisDelta(e,o=0,a=1,c,d){e.min=applyPointDelta(e.min,o,a,c,d),e.max=applyPointDelta(e.max,o,a,c,d)}function applyBoxDelta(e,{x:o,y:a}){applyAxisDelta(e.x,o.translate,o.scale,o.originPoint),applyAxisDelta(e.y,a.translate,a.scale,a.originPoint)}function applyTreeDeltas(e,o,a,c=!1){const d=a.length;if(!d)return;o.x=o.y=1;let g,b;for(let j=0;j<d;j++){g=a[j],b=g.projectionDelta;const $=g.instance;$&&$.style&&$.style.display==="contents"||(c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&transformBox(e,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),b&&(o.x*=b.x.scale,o.y*=b.y.scale,applyBoxDelta(e,b)),c&&hasTransform(g.latestValues)&&transformBox(e,g.latestValues))}o.x=snapToDefault(o.x),o.y=snapToDefault(o.y)}function snapToDefault(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function translateAxis(e,o){e.min=e.min+o,e.max=e.max+o}function transformAxis(e,o,[a,c,d]){const g=o[d]!==void 0?o[d]:.5,b=mix(e.min,e.max,g);applyAxisDelta(e,o[a],o[c],b,o.scale)}const xKeys$1=["x","scaleX","originX"],yKeys$1=["y","scaleY","originY"];function transformBox(e,o){transformAxis(e.x,o,xKeys$1),transformAxis(e.y,o,yKeys$1)}function measureViewportBox(e,o){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),o))}function measurePageBox(e,o,a){const c=measureViewportBox(e,a),{scroll:d}=o;return d&&(translateAxis(c.x,d.offset.x),translateAxis(c.y,d.offset.y)),c}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(o){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=o}start(o,{snapToCursor:a=!1}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const d=st=>{const{dragSnapToOrigin:rt}=this.getProps();rt?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(extractEventInfo(st,"page").point)},g=(st,rt)=>{const{drag:ut,dragPropagation:gt,onDragStart:yt}=this.getProps();if(ut&&!gt&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(ut),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Ct=>{let Pt=this.getAxisMotionValue(Ct).get()||0;if(percent$1.test(Pt)){const{projection:At}=this.visualElement;if(At&&At.layout){const Tt=At.layout.layoutBox[Ct];Tt&&(Pt=calcLength(Tt)*(parseFloat(Pt)/100))}}this.originPoint[Ct]=Pt}),yt&&frame.update(()=>yt(st,rt),!1,!0);const{animationState:wt}=this.visualElement;wt&&wt.setActive("whileDrag",!0)},b=(st,rt)=>{const{dragPropagation:ut,dragDirectionLock:gt,onDirectionLock:yt,onDrag:wt}=this.getProps();if(!ut&&!this.openGlobalLock)return;const{offset:Ct}=rt;if(gt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Ct),this.currentDirection!==null&&yt&&yt(this.currentDirection);return}this.updateAxis("x",rt.point,Ct),this.updateAxis("y",rt.point,Ct),this.visualElement.render(),wt&&wt(st,rt)},j=(st,rt)=>this.stop(st,rt),$=()=>eachAxis(st=>{var rt;return this.getAnimationState(st)==="paused"&&((rt=this.getAxisMotionValue(st).animation)===null||rt===void 0?void 0:rt.play())}),{dragSnapToOrigin:_e}=this.getProps();this.panSession=new PanSession(o,{onSessionStart:d,onStart:g,onMove:b,onSessionEnd:j,resumeAnimation:$},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_e,contextWindow:getContextWindow(this.visualElement)})}stop(o,a){const c=this.isDragging;if(this.cancel(),!c)return;const{velocity:d}=a;this.startAnimation(d);const{onDragEnd:g}=this.getProps();g&&frame.update(()=>g(o,a))}cancel(){this.isDragging=!1;const{projection:o,animationState:a}=this.visualElement;o&&(o.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:c}=this.getProps();!c&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(o,a,c){const{drag:d}=this.getProps();if(!c||!shouldDrag(o,d,this.currentDirection))return;const g=this.getAxisMotionValue(o);let b=this.originPoint[o]+c[o];this.constraints&&this.constraints[o]&&(b=applyConstraints(b,this.constraints[o],this.elastic[o])),g.set(b)}resolveConstraints(){var o;const{dragConstraints:a,dragElastic:c}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)===null||o===void 0?void 0:o.layout,g=this.constraints;a&&isRefObject(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&d?this.constraints=calcRelativeConstraints(d.layoutBox,a):this.constraints=!1,this.elastic=resolveDragElastic(c),g!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(b=>{this.getAxisMotionValue(b)&&(this.constraints[b]=rebaseAxisConstraints(d.layoutBox[b],this.constraints[b]))})}resolveRefConstraints(){const{dragConstraints:o,onMeasureDragConstraints:a}=this.getProps();if(!o||!isRefObject(o))return!1;const c=o.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const g=measurePageBox(c,d.root,this.visualElement.getTransformPagePoint());let b=calcViewportConstraints(d.layout.layoutBox,g);if(a){const j=a(convertBoxToBoundingBox(b));this.hasMutatedConstraints=!!j,j&&(b=convertBoundingBoxToBox(j))}return b}startAnimation(o){const{drag:a,dragMomentum:c,dragElastic:d,dragTransition:g,dragSnapToOrigin:b,onDragTransitionEnd:j}=this.getProps(),$=this.constraints||{},_e=eachAxis(st=>{if(!shouldDrag(st,a,this.currentDirection))return;let rt=$&&$[st]||{};b&&(rt={min:0,max:0});const ut=d?200:1e6,gt=d?40:1e7,yt={type:"inertia",velocity:c?o[st]:0,bounceStiffness:ut,bounceDamping:gt,timeConstant:750,restDelta:1,restSpeed:10,...g,...rt};return this.startAxisValueAnimation(st,yt)});return Promise.all(_e).then(j)}startAxisValueAnimation(o,a){const c=this.getAxisMotionValue(o);return c.start(animateMotionValue(o,c,0,a))}stopAnimation(){eachAxis(o=>this.getAxisMotionValue(o).stop())}pauseAnimation(){eachAxis(o=>{var a;return(a=this.getAxisMotionValue(o).animation)===null||a===void 0?void 0:a.pause()})}getAnimationState(o){var a;return(a=this.getAxisMotionValue(o).animation)===null||a===void 0?void 0:a.state}getAxisMotionValue(o){const a="_drag"+o.toUpperCase(),c=this.visualElement.getProps(),d=c[a];return d||this.visualElement.getValue(o,(c.initial?c.initial[o]:void 0)||0)}snapToCursor(o){eachAxis(a=>{const{drag:c}=this.getProps();if(!shouldDrag(a,c,this.currentDirection))return;const{projection:d}=this.visualElement,g=this.getAxisMotionValue(a);if(d&&d.layout){const{min:b,max:j}=d.layout.layoutBox[a];g.set(o[a]-mix(b,j,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:o,dragConstraints:a}=this.getProps(),{projection:c}=this.visualElement;if(!isRefObject(a)||!c||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};eachAxis(b=>{const j=this.getAxisMotionValue(b);if(j){const $=j.get();d[b]=calcOrigin({min:$,max:$},this.constraints[b])}});const{transformTemplate:g}=this.visualElement.getProps();this.visualElement.current.style.transform=g?g({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),eachAxis(b=>{if(!shouldDrag(b,o,null))return;const j=this.getAxisMotionValue(b),{min:$,max:_e}=this.constraints[b];j.set(mix($,_e,d[b]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const o=this.visualElement.current,a=addPointerEvent(o,"pointerdown",$=>{const{drag:_e,dragListener:st=!0}=this.getProps();_e&&st&&this.start($)}),c=()=>{const{dragConstraints:$}=this.getProps();isRefObject($)&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,g=d.addEventListener("measure",c);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),c();const b=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),j=d.addEventListener("didUpdate",({delta:$,hasLayoutChanged:_e})=>{this.isDragging&&_e&&(eachAxis(st=>{const rt=this.getAxisMotionValue(st);rt&&(this.originPoint[st]+=$[st].translate,rt.set(rt.get()+$[st].translate))}),this.visualElement.render())});return()=>{b(),a(),g(),j&&j()}}getProps(){const o=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:c=!1,dragPropagation:d=!1,dragConstraints:g=!1,dragElastic:b=defaultElastic,dragMomentum:j=!0}=o;return{...o,drag:a,dragDirectionLock:c,dragPropagation:d,dragConstraints:g,dragElastic:b,dragMomentum:j}}}function shouldDrag(e,o,a){return(o===!0||o===e)&&(a===null||a===e)}function getCurrentDirection(e,o=10){let a=null;return Math.abs(e.y)>o?a="y":Math.abs(e.x)>o&&(a="x"),a}class DragGesture extends Feature{constructor(o){super(o),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(o)}mount(){const{dragControls:o}=this.node.getProps();o&&(this.removeGroupControls=o.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(o,a)=>{e&&frame.update(()=>e(o,a))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(o){this.session=new PanSession(o,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:o,onPanStart:a,onPan:c,onPanEnd:d}=this.node.getProps();return{onSessionStart:asyncHandler(o),onStart:asyncHandler(a),onMove:c,onEnd:(g,b)=>{delete this.session,d&&frame.update(()=>d(g,b))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",o=>this.onPointerDown(o))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function usePresence(){const e=reactExports$1.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:o,onExitComplete:a,register:c}=e,d=reactExports$1.useId();return reactExports$1.useEffect(()=>c(d),[]),!o&&a?[!1,()=>a&&a(d)]:[!0]}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,o){return o.max===o.min?0:e/(o.max-o.min)*100}const correctBorderRadius={correct:(e,o)=>{if(!o.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const a=pixelsToPercent(e,o.target.x),c=pixelsToPercent(e,o.target.y);return`${a}% ${c}%`}},correctBoxShadow={correct:(e,{treeScale:o,projectionDelta:a})=>{const c=e,d=complex.parse(e);if(d.length>5)return c;const g=complex.createTransformer(e),b=typeof d[0]!="number"?1:0,j=a.x.scale*o.x,$=a.y.scale*o.y;d[0+b]/=j,d[1+b]/=$;const _e=mix(j,$,.5);return typeof d[2+b]=="number"&&(d[2+b]/=_e),typeof d[3+b]=="number"&&(d[3+b]/=_e),g(d)}};class MeasureLayoutWithContext extends React$2.Component{componentDidMount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:c,layoutId:d}=this.props,{projection:g}=o;addScaleCorrector(defaultScaleCorrectors),g&&(a.group&&a.group.add(g),c&&c.register&&d&&c.register(g),g.root.didUpdate(),g.addEventListener("animationComplete",()=>{this.safeToRemove()}),g.setOptions({...g.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(o){const{layoutDependency:a,visualElement:c,drag:d,isPresent:g}=this.props,b=c.projection;return b&&(b.isPresent=g,d||o.layoutDependency!==a||a===void 0?b.willUpdate():this.safeToRemove(),o.isPresent!==g&&(g?b.promote():b.relegate()||frame.postRender(()=>{const j=b.getStack();(!j||!j.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:o}=this.props.visualElement;o&&(o.root.didUpdate(),queueMicrotask(()=>{!o.currentAnimation&&o.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:o,layoutGroup:a,switchLayoutGroup:c}=this.props,{projection:d}=o;d&&(d.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(d),c&&c.deregister&&c.deregister(d))}safeToRemove(){const{safeToRemove:o}=this.props;o&&o()}render(){return null}}function MeasureLayout(e){const[o,a]=usePresence(),c=reactExports$1.useContext(LayoutGroupContext);return React$2.createElement(MeasureLayoutWithContext,{...e,layoutGroup:c,switchLayoutGroup:reactExports$1.useContext(SwitchLayoutGroupContext),isPresent:o,safeToRemove:a})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,o,a,c,d,g){d?(e.opacity=mix(0,a.opacity!==void 0?a.opacity:1,easeCrossfadeIn(c)),e.opacityExit=mix(o.opacity!==void 0?o.opacity:1,0,easeCrossfadeOut(c))):g&&(e.opacity=mix(o.opacity!==void 0?o.opacity:1,a.opacity!==void 0?a.opacity:1,c));for(let b=0;b<numBorders;b++){const j=`border${borders[b]}Radius`;let $=getRadius(o,j),_e=getRadius(a,j);if($===void 0&&_e===void 0)continue;$||($=0),_e||(_e=0),$===0||_e===0||isPx($)===isPx(_e)?(e[j]=Math.max(mix(asNumber($),asNumber(_e),c),0),(percent$1.test(_e)||percent$1.test($))&&(e[j]+="%")):e[j]=_e}(o.rotate||a.rotate)&&(e.rotate=mix(o.rotate||0,a.rotate||0,c))}function getRadius(e,o){return e[o]!==void 0?e[o]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(e,o,a){return c=>c<e?0:c>o?1:a(progress(e,o,c))}function copyAxisInto(e,o){e.min=o.min,e.max=o.max}function copyBoxInto(e,o){copyAxisInto(e.x,o.x),copyAxisInto(e.y,o.y)}function removePointDelta(e,o,a,c,d){return e-=o,e=scalePoint(e,1/a,c),d!==void 0&&(e=scalePoint(e,1/d,c)),e}function removeAxisDelta(e,o=0,a=1,c=.5,d,g=e,b=e){if(percent$1.test(o)&&(o=parseFloat(o),o=mix(b.min,b.max,o/100)-b.min),typeof o!="number")return;let j=mix(g.min,g.max,c);e===g&&(j-=o),e.min=removePointDelta(e.min,o,a,j,d),e.max=removePointDelta(e.max,o,a,j,d)}function removeAxisTransforms(e,o,[a,c,d],g,b){removeAxisDelta(e,o[a],o[c],o[d],o.scale,g,b)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,o,a,c){removeAxisTransforms(e.x,o,xKeys,a?a.x:void 0,c?c.x:void 0),removeAxisTransforms(e.y,o,yKeys,a?a.y:void 0,c?c.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function boxEquals(e,o){return e.x.min===o.x.min&&e.x.max===o.x.max&&e.y.min===o.y.min&&e.y.max===o.y.max}function boxEqualsRounded(e,o){return Math.round(e.x.min)===Math.round(o.x.min)&&Math.round(e.x.max)===Math.round(o.x.max)&&Math.round(e.y.min)===Math.round(o.y.min)&&Math.round(e.y.max)===Math.round(o.y.max)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}class NodeStack{constructor(){this.members=[]}add(o){addUniqueItem(this.members,o),o.scheduleRender()}remove(o){if(removeItem(this.members,o),o===this.prevLead&&(this.prevLead=void 0),o===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(o){const a=this.members.findIndex(d=>o===d);if(a===0)return!1;let c;for(let d=a;d>=0;d--){const g=this.members[d];if(g.isPresent!==!1){c=g;break}}return c?(this.promote(c),!0):!1}promote(o,a){const c=this.lead;if(o!==c&&(this.prevLead=c,this.lead=o,o.show(),c)){c.instance&&c.scheduleRender(),o.scheduleRender(),o.resumeFrom=c,a&&(o.resumeFrom.preserveOpacity=!0),c.snapshot&&(o.snapshot=c.snapshot,o.snapshot.latestValues=c.animationValues||c.latestValues),o.root&&o.root.isUpdating&&(o.isLayoutDirty=!0);const{crossfade:d}=o.options;d===!1&&c.hide()}}exitAnimationComplete(){this.members.forEach(o=>{const{options:a,resumingFrom:c}=o;a.onExitComplete&&a.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(o=>{o.instance&&o.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,o,a){let c="";const d=e.x.translate/o.x,g=e.y.translate/o.y;if((d||g)&&(c=`translate3d(${d}px, ${g}px, 0) `),(o.x!==1||o.y!==1)&&(c+=`scale(${1/o.x}, ${1/o.y}) `),a){const{rotate:$,rotateX:_e,rotateY:st}=a;$&&(c+=`rotate(${$}deg) `),_e&&(c+=`rotateX(${_e}deg) `),st&&(c+=`rotateY(${st}deg) `)}const b=e.x.scale*o.x,j=e.y.scale*o.y;return(b!==1||j!==1)&&(c+=`scale(${b}, ${j})`),c||"none"}const compareByDepth=(e,o)=>e.depth-o.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(o){addUniqueItem(this.children,o),this.isDirty=!0}remove(o){removeItem(this.children,o),this.isDirty=!0}forEach(o){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(o)}}function delay(e,o){const a=performance.now(),c=({timestamp:d})=>{const g=d-a;g>=o&&(cancelFrame(c),e(g-o))};return frame.read(c,!0),()=>cancelFrame(c)}function record(e){window.MotionDebug&&window.MotionDebug.record(e)}function isSVGElement(e){return e instanceof SVGElement&&e.tagName!=="svg"}function animateSingleValue(e,o,a){const c=isMotionValue(e)?e:motionValue(e);return c.start(animateMotionValue("",c,o,a)),c.animation}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;const projectionFrameData={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function createProjectionNode({attachResizeListener:e,defaultParent:o,measureScroll:a,checkIsScrollRoot:c,resetTransform:d}){return class{constructor(b={},j=o==null?void 0:o()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,projectionFrameData.totalNodes=projectionFrameData.resolvedTargetDeltas=projectionFrameData.recalculatedProjection=0,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),record(projectionFrameData)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=b,this.root=j?j.root||j:this,this.path=j?[...j.path,j]:[],this.parent=j,this.depth=j?j.depth+1:0;for(let $=0;$<this.path.length;$++)this.path[$].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(b,j){return this.eventHandlers.has(b)||this.eventHandlers.set(b,new SubscriptionManager),this.eventHandlers.get(b).add(j)}notifyListeners(b,...j){const $=this.eventHandlers.get(b);$&&$.notify(...j)}hasListeners(b){return this.eventHandlers.has(b)}mount(b,j=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(b),this.instance=b;const{layoutId:$,layout:_e,visualElement:st}=this.options;if(st&&!st.current&&st.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),j&&(_e||$)&&(this.isLayoutDirty=!0),e){let rt;const ut=()=>this.root.updateBlockedByResize=!1;e(b,()=>{this.root.updateBlockedByResize=!0,rt&&rt(),rt=delay(ut,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}$&&this.root.registerSharedNode($,this),this.options.animate!==!1&&st&&($||_e)&&this.addEventListener("didUpdate",({delta:rt,hasLayoutChanged:ut,hasRelativeTargetChanged:gt,layout:yt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const wt=this.options.transition||st.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Ct,onLayoutAnimationComplete:Pt}=st.getProps(),At=!this.targetLayout||!boxEqualsRounded(this.targetLayout,yt)||gt,Tt=!ut&&gt;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Tt||ut&&(At||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(rt,Tt);const kt={...getValueTransition(wt,"layout"),onPlay:Ct,onComplete:Pt};(st.shouldReduceMotion||this.options.layoutRoot)&&(kt.delay=0,kt.type=!1),this.startAnimation(kt)}else ut||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=yt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const b=this.getStack();b&&b.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetRotation),this.animationId++)}getTransformTemplate(){const{visualElement:b}=this.options;return b&&b.getProps().transformTemplate}willUpdate(b=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let st=0;st<this.path.length;st++){const rt=this.path[st];rt.shouldResetTransform=!0,rt.updateScroll("snapshot"),rt.options.layoutRoot&&rt.willUpdate(!1)}const{layoutId:j,layout:$}=this.options;if(j===void 0&&!$)return;const _e=this.getTransformTemplate();this.prevTransformTemplateValue=_e?_e(this.latestValues,""):void 0,this.updateSnapshot(),b&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const j=performance.now();frameData.delta=clamp$1(0,1e3/60,j-frameData.timestamp),frameData.timestamp=j,frameData.isProcessing=!0,steps.update.process(frameData),steps.preRender.process(frameData),steps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let $=0;$<this.path.length;$++)this.path[$].updateScroll();const b=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:j}=this.options;j&&j.notify("LayoutMeasure",this.layout.layoutBox,b?b.layoutBox:void 0)}updateScroll(b="measure"){let j=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===b&&(j=!1),j&&(this.scroll={animationId:this.root.animationId,phase:b,isRoot:c(this.instance),offset:a(this.instance)})}resetTransform(){if(!d)return;const b=this.isLayoutDirty||this.shouldResetTransform,j=this.projectionDelta&&!isDeltaZero(this.projectionDelta),$=this.getTransformTemplate(),_e=$?$(this.latestValues,""):void 0,st=_e!==this.prevTransformTemplateValue;b&&(j||hasTransform(this.latestValues)||st)&&(d(this.instance,_e),this.shouldResetTransform=!1,this.scheduleRender())}measure(b=!0){const j=this.measurePageBox();let $=this.removeElementScroll(j);return b&&($=this.removeTransform($)),roundBox($),{animationId:this.root.animationId,measuredBox:j,layoutBox:$,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:b}=this.options;if(!b)return createBox();const j=b.measureViewportBox(),{scroll:$}=this.root;return $&&(translateAxis(j.x,$.offset.x),translateAxis(j.y,$.offset.y)),j}removeElementScroll(b){const j=createBox();copyBoxInto(j,b);for(let $=0;$<this.path.length;$++){const _e=this.path[$],{scroll:st,options:rt}=_e;if(_e!==this.root&&st&&rt.layoutScroll){if(st.isRoot){copyBoxInto(j,b);const{scroll:ut}=this.root;ut&&(translateAxis(j.x,-ut.offset.x),translateAxis(j.y,-ut.offset.y))}translateAxis(j.x,st.offset.x),translateAxis(j.y,st.offset.y)}}return j}applyTransform(b,j=!1){const $=createBox();copyBoxInto($,b);for(let _e=0;_e<this.path.length;_e++){const st=this.path[_e];!j&&st.options.layoutScroll&&st.scroll&&st!==st.root&&transformBox($,{x:-st.scroll.offset.x,y:-st.scroll.offset.y}),hasTransform(st.latestValues)&&transformBox($,st.latestValues)}return hasTransform(this.latestValues)&&transformBox($,this.latestValues),$}removeTransform(b){const j=createBox();copyBoxInto(j,b);for(let $=0;$<this.path.length;$++){const _e=this.path[$];if(!_e.instance||!hasTransform(_e.latestValues))continue;hasScale(_e.latestValues)&&_e.updateSnapshot();const st=createBox(),rt=_e.measurePageBox();copyBoxInto(st,rt),removeBoxTransforms(j,_e.latestValues,_e.snapshot?_e.snapshot.layoutBox:void 0,st)}return hasTransform(this.latestValues)&&removeBoxTransforms(j,this.latestValues),j}setTargetDelta(b){this.targetDelta=b,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(b){this.options={...this.options,...b,crossfade:b.crossfade!==void 0?b.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(b=!1){var j;const $=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=$.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=$.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=$.isSharedProjectionDirty);const _e=!!this.resumingFrom||this!==$;if(!(b||_e&&this.isSharedProjectionDirty||this.isProjectionDirty||!((j=this.parent)===null||j===void 0)&&j.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:rt,layoutId:ut}=this.options;if(!(!this.layout||!(rt||ut))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const gt=this.getClosestProjectingParent();gt&&gt.layout&&this.animationProgress!==1?(this.relativeParent=gt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,gt.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const gt=this.getClosestProjectingParent();gt&&!!gt.resumingFrom==!!this.resumingFrom&&!gt.options.layoutScroll&&gt.target&&this.animationProgress!==1?(this.relativeParent=gt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,gt.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}projectionFrameData.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const j=this.getLead(),$=!!this.resumingFrom||this!==j;let _e=!0;if((this.isProjectionDirty||!((b=this.parent)===null||b===void 0)&&b.isProjectionDirty)&&(_e=!1),$&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(_e=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(_e=!1),_e)return;const{layout:st,layoutId:rt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(st||rt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const ut=this.treeScale.x,gt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,$),j.layout&&!j.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(j.target=j.layout.layoutBox);const{target:yt}=j;if(!yt){this.projectionTransform&&(this.projectionDelta=createDelta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta());const wt=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,yt,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),(this.projectionTransform!==wt||this.treeScale.x!==ut||this.treeScale.y!==gt)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",yt)),projectionFrameData.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(b=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),b){const j=this.getStack();j&&j.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(b,j=!1){const $=this.snapshot,_e=$?$.latestValues:{},st={...this.latestValues},rt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!j;const ut=createBox(),gt=$?$.source:void 0,yt=this.layout?this.layout.source:void 0,wt=gt!==yt,Ct=this.getStack(),Pt=!Ct||Ct.members.length<=1,At=!!(wt&&!Pt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Tt;this.mixTargetDelta=kt=>{const It=kt/1e3;mixAxisDelta(rt.x,b.x,It),mixAxisDelta(rt.y,b.y,It),this.setTargetDelta(rt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(ut,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,ut,It),Tt&&boxEquals(this.relativeTarget,Tt)&&(this.isProjectionDirty=!1),Tt||(Tt=createBox()),copyBoxInto(Tt,this.relativeTarget)),wt&&(this.animationValues=st,mixValues(st,_e,this.latestValues,It,At,Pt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=It},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(b){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...b,onUpdate:j=>{this.mixTargetDelta(j),b.onUpdate&&b.onUpdate(j)},onComplete:()=>{b.onComplete&&b.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const b=this.getStack();b&&b.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const b=this.getLead();let{targetWithTransforms:j,target:$,layout:_e,latestValues:st}=b;if(!(!j||!$||!_e)){if(this!==b&&this.layout&&_e&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,_e.layoutBox)){$=this.target||createBox();const rt=calcLength(this.layout.layoutBox.x);$.x.min=b.target.x.min,$.x.max=$.x.min+rt;const ut=calcLength(this.layout.layoutBox.y);$.y.min=b.target.y.min,$.y.max=$.y.min+ut}copyBoxInto(j,$),transformBox(j,st),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,j,st)}}registerSharedNode(b,j){this.sharedNodes.has(b)||this.sharedNodes.set(b,new NodeStack),this.sharedNodes.get(b).add(j);const _e=j.options.initialPromotionConfig;j.promote({transition:_e?_e.transition:void 0,preserveFollowOpacity:_e&&_e.shouldPreserveFollowOpacity?_e.shouldPreserveFollowOpacity(j):void 0})}isLead(){const b=this.getStack();return b?b.lead===this:!0}getLead(){var b;const{layoutId:j}=this.options;return j?((b=this.getStack())===null||b===void 0?void 0:b.lead)||this:this}getPrevLead(){var b;const{layoutId:j}=this.options;return j?(b=this.getStack())===null||b===void 0?void 0:b.prevLead:void 0}getStack(){const{layoutId:b}=this.options;if(b)return this.root.sharedNodes.get(b)}promote({needsReset:b,transition:j,preserveFollowOpacity:$}={}){const _e=this.getStack();_e&&_e.promote(this,$),b&&(this.projectionDelta=void 0,this.needsReset=!0),j&&this.setOptions({transition:j})}relegate(){const b=this.getStack();return b?b.relegate(this):!1}resetRotation(){const{visualElement:b}=this.options;if(!b)return;let j=!1;const{latestValues:$}=b;if(($.rotate||$.rotateX||$.rotateY||$.rotateZ)&&(j=!0),!j)return;const _e={};for(let st=0;st<transformAxes.length;st++){const rt="rotate"+transformAxes[st];$[rt]&&(_e[rt]=$[rt],b.setStaticValue(rt,0))}b.render();for(const st in _e)b.setStaticValue(st,_e[st]);b.scheduleRender()}getProjectionStyles(b){var j,$;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const _e={visibility:""},st=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,_e.opacity="",_e.pointerEvents=resolveMotionValue(b==null?void 0:b.pointerEvents)||"",_e.transform=st?st(this.latestValues,""):"none",_e;const rt=this.getLead();if(!this.projectionDelta||!this.layout||!rt.target){const wt={};return this.options.layoutId&&(wt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,wt.pointerEvents=resolveMotionValue(b==null?void 0:b.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(wt.transform=st?st({},""):"none",this.hasProjected=!1),wt}const ut=rt.animationValues||rt.latestValues;this.applyTransformsToTarget(),_e.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,ut),st&&(_e.transform=st(ut,_e.transform));const{x:gt,y:yt}=this.projectionDelta;_e.transformOrigin=`${gt.origin*100}% ${yt.origin*100}% 0`,rt.animationValues?_e.opacity=rt===this?($=(j=ut.opacity)!==null&&j!==void 0?j:this.latestValues.opacity)!==null&&$!==void 0?$:1:this.preserveOpacity?this.latestValues.opacity:ut.opacityExit:_e.opacity=rt===this?ut.opacity!==void 0?ut.opacity:"":ut.opacityExit!==void 0?ut.opacityExit:0;for(const wt in scaleCorrectors){if(ut[wt]===void 0)continue;const{correct:Ct,applyTo:Pt}=scaleCorrectors[wt],At=_e.transform==="none"?ut[wt]:Ct(ut[wt],rt);if(Pt){const Tt=Pt.length;for(let kt=0;kt<Tt;kt++)_e[Pt[kt]]=At}else _e[wt]=At}return this.options.layoutId&&(_e.pointerEvents=rt===this?resolveMotionValue(b==null?void 0:b.pointerEvents)||"":"none"),_e}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(b=>{var j;return(j=b.currentAnimation)===null||j===void 0?void 0:j.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var o;const a=((o=e.resumeFrom)===null||o===void 0?void 0:o.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){const{layoutBox:c,measuredBox:d}=e.layout,{animationType:g}=e.options,b=a.source!==e.layout.source;g==="size"?eachAxis(rt=>{const ut=b?a.measuredBox[rt]:a.layoutBox[rt],gt=calcLength(ut);ut.min=c[rt].min,ut.max=ut.min+gt}):shouldAnimatePositionOnly(g,a.layoutBox,c)&&eachAxis(rt=>{const ut=b?a.measuredBox[rt]:a.layoutBox[rt],gt=calcLength(c[rt]);ut.max=ut.min+gt,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[rt].max=e.relativeTarget[rt].min+gt)});const j=createDelta();calcBoxDelta(j,c,a.layoutBox);const $=createDelta();b?calcBoxDelta($,e.applyTransform(d,!0),a.measuredBox):calcBoxDelta($,c,a.layoutBox);const _e=!isDeltaZero(j);let st=!1;if(!e.resumeFrom){const rt=e.getClosestProjectingParent();if(rt&&!rt.resumeFrom){const{snapshot:ut,layout:gt}=rt;if(ut&&gt){const yt=createBox();calcRelativePosition(yt,a.layoutBox,ut.layoutBox);const wt=createBox();calcRelativePosition(wt,c,gt.layoutBox),boxEqualsRounded(yt,wt)||(st=!0),rt.options.layoutRoot&&(e.relativeTarget=wt,e.relativeTargetOrigin=yt,e.relativeParent=rt)}}}e.notifyListeners("didUpdate",{layout:c,snapshot:a,delta:$,layoutDelta:j,hasLayoutChanged:_e,hasRelativeTargetChanged:st})}else if(e.isLead()){const{onExitComplete:c}=e.options;c&&c()}e.options.transition=void 0}function propagateDirtyNodes(e){projectionFrameData.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:o}=e.options;o&&o.getProps().onBeforeLayoutMeasure&&o.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetRotation(e){e.resetRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,o,a){e.translate=mix(o.translate,0,a),e.scale=mix(o.scale,1,a),e.origin=o.origin,e.originPoint=o.originPoint}function mixAxis(e,o,a,c){e.min=mix(o.min,a.min,c),e.max=mix(o.max,a.max,c)}function mixBox(e,o,a,c){mixAxis(e.x,o.x,a.x,c),mixAxis(e.y,o.y,a.y,c)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,o,a){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(o),aspectRatio(a),.2)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,o)=>addDomEvent(e,"resize",o),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,o)=>{e.style.transform=o!==void 0?o:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}},splitCSSVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function parseCSSVariable(e){const o=splitCSSVariableRegex.exec(e);if(!o)return[,];const[,a,c]=o;return[a,c]}function getVariableValue(e,o,a=1){const[c,d]=parseCSSVariable(e);if(!c)return;const g=window.getComputedStyle(o).getPropertyValue(c);if(g){const b=g.trim();return isNumericalString(b)?parseFloat(b):b}else return isCSSVariableToken(d)?getVariableValue(d,o,a+1):d}function resolveCSSVariables(e,{...o},a){const c=e.current;if(!(c instanceof Element))return{target:o,transitionEnd:a};a&&(a={...a}),e.values.forEach(d=>{const g=d.get();if(!isCSSVariableToken(g))return;const b=getVariableValue(g,c);b&&d.set(b)});for(const d in o){const g=o[d];if(!isCSSVariableToken(g))continue;const b=getVariableValue(g,c);b&&(o[d]=b,a||(a={}),a[d]===void 0&&(a[d]=g))}return{target:o,transitionEnd:a}}const positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isPositionalKey=e=>positionalKeys.has(e),hasPositionalKey=e=>Object.keys(e).some(isPositionalKey),isNumOrPxType=e=>e===number||e===px,getPosFromMatrix=(e,o)=>parseFloat(e.split(", ")[o]),getTranslateFromMatrix=(e,o)=>(a,{transform:c})=>{if(c==="none"||!c)return 0;const d=c.match(/^matrix3d\((.+)\)$/);if(d)return getPosFromMatrix(d[1],o);{const g=c.match(/^matrix\((.+)\)$/);return g?getPosFromMatrix(g[1],e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const o=[];return nonTranslationalTransformKeys.forEach(a=>{const c=e.getValue(a);c!==void 0&&(o.push([a,c.get()]),c.set(a.startsWith("scale")?1:0))}),o.length&&e.render(),o}const positionalValues={width:({x:e},{paddingLeft:o="0",paddingRight:a="0"})=>e.max-e.min-parseFloat(o)-parseFloat(a),height:({y:e},{paddingTop:o="0",paddingBottom:a="0"})=>e.max-e.min-parseFloat(o)-parseFloat(a),top:(e,{top:o})=>parseFloat(o),left:(e,{left:o})=>parseFloat(o),bottom:({y:e},{top:o})=>parseFloat(o)+(e.max-e.min),right:({x:e},{left:o})=>parseFloat(o)+(e.max-e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const convertChangedValueTypes=(e,o,a)=>{const c=o.measureViewportBox(),d=o.current,g=getComputedStyle(d),{display:b}=g,j={};b==="none"&&o.setStaticValue("display",e.display||"block"),a.forEach(_e=>{j[_e]=positionalValues[_e](c,g)}),o.render();const $=o.measureViewportBox();return a.forEach(_e=>{const st=o.getValue(_e);st&&st.jump(j[_e]),e[_e]=positionalValues[_e]($,g)}),e},checkAndConvertChangedValueTypes=(e,o,a={},c={})=>{o={...o},c={...c};const d=Object.keys(o).filter(isPositionalKey);let g=[],b=!1;const j=[];if(d.forEach($=>{const _e=e.getValue($);if(!e.hasValue($))return;let st=a[$],rt=findDimensionValueType(st);const ut=o[$];let gt;if(isKeyframesTarget(ut)){const yt=ut.length,wt=ut[0]===null?1:0;st=ut[wt],rt=findDimensionValueType(st);for(let Ct=wt;Ct<yt&&ut[Ct]!==null;Ct++)gt?invariant$1(findDimensionValueType(ut[Ct])===gt):gt=findDimensionValueType(ut[Ct])}else gt=findDimensionValueType(ut);if(rt!==gt)if(isNumOrPxType(rt)&&isNumOrPxType(gt)){const yt=_e.get();typeof yt=="string"&&_e.set(parseFloat(yt)),typeof ut=="string"?o[$]=parseFloat(ut):Array.isArray(ut)&&gt===px&&(o[$]=ut.map(parseFloat))}else rt!=null&&rt.transform&&(gt!=null&&gt.transform)&&(st===0||ut===0)?st===0?_e.set(gt.transform(st)):o[$]=rt.transform(ut):(b||(g=removeNonTranslationalTransform(e),b=!0),j.push($),c[$]=c[$]!==void 0?c[$]:o[$],_e.jump(ut))}),j.length){const $=j.indexOf("height")>=0?window.pageYOffset:null,_e=convertChangedValueTypes(o,e,j);return g.length&&g.forEach(([st,rt])=>{e.getValue(st).set(rt)}),e.render(),isBrowser&&$!==null&&window.scrollTo({top:$}),{target:_e,transitionEnd:c}}else return{target:o,transitionEnd:c}};function unitConversion(e,o,a,c){return hasPositionalKey(o)?checkAndConvertChangedValueTypes(e,o,a,c):{target:o,transitionEnd:c}}const parseDomVariant=(e,o,a,c)=>{const d=resolveCSSVariables(e,o,c);return o=d.target,c=d.transitionEnd,unitConversion(e,o,a,c)},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),o=()=>prefersReducedMotion.current=e.matches;e.addListener(o),o()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(e,o,a){const{willChange:c}=o;for(const d in o){const g=o[d],b=a[d];if(isMotionValue(g))e.addValue(d,g),isWillChangeMotionValue(c)&&c.add(d);else if(isMotionValue(b))e.addValue(d,motionValue(g,{owner:e})),isWillChangeMotionValue(c)&&c.remove(d);else if(b!==g)if(e.hasValue(d)){const j=e.getValue(d);!j.hasAnimated&&j.set(g)}else{const j=e.getStaticValue(d);e.addValue(d,motionValue(j!==void 0?j:g,{owner:e}))}}for(const d in a)o[d]===void 0&&e.removeValue(d);return o}const visualElementStore=new WeakMap,featureNames=Object.keys(featureDefinitions),numFeatures=featureNames.length,propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{constructor({parent:o,props:a,presenceContext:c,reducedMotionConfig:d,visualState:g},b={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues:j,renderState:$}=g;this.latestValues=j,this.baseTarget={...j},this.initialValues=a.initial?{...j}:{},this.renderState=$,this.parent=o,this.props=a,this.presenceContext=c,this.depth=o?o.depth+1:0,this.reducedMotionConfig=d,this.options=b,this.isControllingVariants=isControllingVariants(a),this.isVariantNode=isVariantNode(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(o&&o.current);const{willChange:_e,...st}=this.scrapeMotionValuesFromProps(a,{});for(const rt in st){const ut=st[rt];j[rt]!==void 0&&isMotionValue(ut)&&(ut.set(j[rt],!1),isWillChangeMotionValue(_e)&&_e.add(rt))}}scrapeMotionValuesFromProps(o,a){return{}}mount(o){this.current=o,visualElementStore.set(o,this),this.projection&&!this.projection.instance&&this.projection.mount(o),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,c)=>this.bindToMotionValue(c,a)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(o=>o()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const o in this.events)this.events[o].clear();for(const o in this.features)this.features[o].unmount();this.current=null}bindToMotionValue(o,a){const c=transformProps.has(o),d=a.on("change",b=>{this.latestValues[o]=b,this.props.onUpdate&&frame.update(this.notifyUpdate,!1,!0),c&&this.projection&&(this.projection.isTransformDirty=!0)}),g=a.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(o,()=>{d(),g()})}sortNodePosition(o){return!this.current||!this.sortInstanceNodePosition||this.type!==o.type?0:this.sortInstanceNodePosition(this.current,o.current)}loadFeatures({children:o,...a},c,d,g){let b,j;for(let $=0;$<numFeatures;$++){const _e=featureNames[$],{isEnabled:st,Feature:rt,ProjectionNode:ut,MeasureLayout:gt}=featureDefinitions[_e];ut&&(b=ut),st(a)&&(!this.features[_e]&&rt&&(this.features[_e]=new rt(this)),gt&&(j=gt))}if((this.type==="html"||this.type==="svg")&&!this.projection&&b){this.projection=new b(this.latestValues,this.parent&&this.parent.projection);const{layoutId:$,layout:_e,drag:st,dragConstraints:rt,layoutScroll:ut,layoutRoot:gt}=a;this.projection.setOptions({layoutId:$,layout:_e,alwaysMeasureLayout:!!st||rt&&isRefObject(rt),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof _e=="string"?_e:"both",initialPromotionConfig:g,layoutScroll:ut,layoutRoot:gt})}return j}updateFeatures(){for(const o in this.features){const a=this.features[o];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(o){return this.latestValues[o]}setStaticValue(o,a){this.latestValues[o]=a}makeTargetAnimatable(o,a=!0){return this.makeTargetAnimatableFromInstance(o,this.props,a)}update(o,a){(o.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=o,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let c=0;c<propEventHandlers.length;c++){const d=propEventHandlers[c];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const g=o["on"+d];g&&(this.propEventSubscriptions[d]=this.on(d,g))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(o,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(o){return this.props.variants?this.props.variants[o]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(o=!1){if(o)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const c=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(c.initial=this.props.initial),c}const a={};for(let c=0;c<numVariantProps;c++){const d=variantProps[c],g=this.props[d];(isVariantLabel(g)||g===!1)&&(a[d]=g)}return a}addVariantChild(o){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(o),()=>a.variantChildren.delete(o)}addValue(o,a){a!==this.values.get(o)&&(this.removeValue(o),this.bindToMotionValue(o,a)),this.values.set(o,a),this.latestValues[o]=a.get()}removeValue(o){this.values.delete(o);const a=this.valueSubscriptions.get(o);a&&(a(),this.valueSubscriptions.delete(o)),delete this.latestValues[o],this.removeValueFromRenderState(o,this.renderState)}hasValue(o){return this.values.has(o)}getValue(o,a){if(this.props.values&&this.props.values[o])return this.props.values[o];let c=this.values.get(o);return c===void 0&&a!==void 0&&(c=motionValue(a,{owner:this}),this.addValue(o,c)),c}readValue(o){var a;return this.latestValues[o]!==void 0||!this.current?this.latestValues[o]:(a=this.getBaseTargetFromProps(this.props,o))!==null&&a!==void 0?a:this.readValueFromInstance(this.current,o,this.options)}setBaseTarget(o,a){this.baseTarget[o]=a}getBaseTarget(o){var a;const{initial:c}=this.props,d=typeof c=="string"||typeof c=="object"?(a=resolveVariantFromProps(this.props,c))===null||a===void 0?void 0:a[o]:void 0;if(c&&d!==void 0)return d;const g=this.getBaseTargetFromProps(this.props,o);return g!==void 0&&!isMotionValue(g)?g:this.initialValues[o]!==void 0&&d===void 0?void 0:this.baseTarget[o]}on(o,a){return this.events[o]||(this.events[o]=new SubscriptionManager),this.events[o].add(a)}notify(o,...a){this.events[o]&&this.events[o].notify(...a)}}class DOMVisualElement extends VisualElement{sortInstanceNodePosition(o,a){return o.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(o,a){return o.style?o.style[a]:void 0}removeValueFromRenderState(o,{vars:a,style:c}){delete a[o],delete c[o]}makeTargetAnimatableFromInstance({transition:o,transitionEnd:a,...c},{transformValues:d},g){let b=getOrigin(c,o||{},this);if(d&&(a&&(a=d(a)),c&&(c=d(c)),b&&(b=d(b))),g){checkTargetForNewValues(this,c,b);const j=parseDomVariant(this,c,b,a);a=j.transitionEnd,c=j.target}return{transition:o,transitionEnd:a,...c}}}function getComputedStyle$2(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html"}readValueFromInstance(o,a){if(transformProps.has(a)){const c=getDefaultValueType(a);return c&&c.default||0}else{const c=getComputedStyle$2(o),d=(isCSSVariableName(a)?c.getPropertyValue(a):c[a])||0;return typeof d=="string"?d.trim():d}}measureInstanceViewportBox(o,{transformPagePoint:a}){return measureViewportBox(o,a)}build(o,a,c,d){buildHTMLStyles(o,a,c,d.transformTemplate)}scrapeMotionValuesFromProps(o,a){return scrapeMotionValuesFromProps$1(o,a)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:o}=this.props;isMotionValue(o)&&(this.childSubscription=o.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}renderInstance(o,a,c,d){renderHTML(o,a,c,d)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(o,a){return o[a]}readValueFromInstance(o,a){if(transformProps.has(a)){const c=getDefaultValueType(a);return c&&c.default||0}return a=camelCaseAttributes.has(a)?a:camelToDash(a),o.getAttribute(a)}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps(o,a){return scrapeMotionValuesFromProps(o,a)}build(o,a,c,d){buildSVGAttrs(o,a,c,this.isSVGTag,d.transformTemplate)}renderInstance(o,a,c,d){renderSVG(o,a,c,d)}mount(o){this.isSVGTag=isSVGTag(o.tagName),super.mount(o)}}const createDomVisualElement=(e,o)=>isSVGComponent(e)?new SVGVisualElement(o,{enableHardwareAcceleration:!1}):new HTMLVisualElement(o,{enableHardwareAcceleration:!0}),layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},preloadedFeatures={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy((e,o)=>createDomMotionConfig(e,o,preloadedFeatures,createDomVisualElement));var build={},t$1=function(){return t$1=Object.assign||function(e){for(var o,a=1,c=arguments.length;a<c;a++)for(var d in o=arguments[a])Object.prototype.hasOwnProperty.call(o,d)&&(e[d]=o[d]);return e},t$1.apply(this,arguments)},i=function(){function e(o,a,c){var d=this;this.endVal=a,this.options=c,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(g){d.startTime||(d.startTime=g);var b=g-d.startTime;d.remaining=d.duration-b,d.useEasing?d.countDown?d.frameVal=d.startVal-d.easingFn(b,0,d.startVal-d.endVal,d.duration):d.frameVal=d.easingFn(b,d.startVal,d.endVal-d.startVal,d.duration):d.frameVal=d.startVal+(d.endVal-d.startVal)*(b/d.duration);var j=d.countDown?d.frameVal<d.endVal:d.frameVal>d.endVal;d.frameVal=j?d.endVal:d.frameVal,d.frameVal=Number(d.frameVal.toFixed(d.options.decimalPlaces)),d.printValue(d.frameVal),b<d.duration?d.rAF=requestAnimationFrame(d.count):d.finalEndVal!==null?d.update(d.finalEndVal):d.options.onCompleteCallback&&d.options.onCompleteCallback()},this.formatNumber=function(g){var b,j,$,_e,st=g<0?"-":"";b=Math.abs(g).toFixed(d.options.decimalPlaces);var rt=(b+="").split(".");if(j=rt[0],$=rt.length>1?d.options.decimal+rt[1]:"",d.options.useGrouping){_e="";for(var ut=3,gt=0,yt=0,wt=j.length;yt<wt;++yt)d.options.useIndianSeparators&&yt===4&&(ut=2,gt=1),yt!==0&&gt%ut==0&&(_e=d.options.separator+_e),gt++,_e=j[wt-yt-1]+_e;j=_e}return d.options.numerals&&d.options.numerals.length&&(j=j.replace(/[0-9]/g,function(Ct){return d.options.numerals[+Ct]}),$=$.replace(/[0-9]/g,function(Ct){return d.options.numerals[+Ct]})),st+d.options.prefix+j+$+d.options.suffix},this.easeOutExpo=function(g,b,j,$){return j*(1-Math.pow(2,-10*g/$))*1024/1023+b},this.options=t$1(t$1({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(a),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof o=="string"?document.getElementById(o):o,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,o):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return d.handleScroll(d)}),window.onscroll=function(){window.onScrollFns.forEach(function(g){return g()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(o){if(o&&window&&!o.once){var a=window.innerHeight+window.scrollY,c=o.el.getBoundingClientRect(),d=c.top+window.pageYOffset,g=c.top+c.height+window.pageYOffset;g<a&&g>window.scrollY&&o.paused?(o.paused=!1,setTimeout(function(){return o.start()},o.options.scrollSpyDelay),o.options.scrollSpyOnce&&(o.once=!0)):(window.scrollY>g||d>a)&&!o.paused&&o.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var o=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>o;var a=o-this.startVal;if(Math.abs(a)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=o;var c=this.countDown?1:-1;this.endVal=o+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=o,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(o){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),o&&(this.options.onCompleteCallback=o),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(o){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(o),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(o){var a;if(this.el){var c=this.formattingFn(o);!((a=this.options.plugin)===null||a===void 0)&&a.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},e.prototype.ensureNumber=function(o){return typeof o=="number"&&!isNaN(o)},e.prototype.validateValue=function(o){var a=Number(o);return this.ensureNumber(a)?a:(this.error="[CountUp] invalid start or end value: ".concat(o),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}();const countUp_min=Object.freeze(Object.defineProperty({__proto__:null,CountUp:i},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(countUp_min);Object.defineProperty(build,"__esModule",{value:!0});var React$1=reactExports$1,countup_js=require$$1;function _iterableToArrayLimit$1(e,o){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var c,d,g,b,j=[],$=!0,_e=!1;try{if(g=(a=a.call(e)).next,o===0){if(Object(a)!==a)return;$=!1}else for(;!($=(c=g.call(a)).done)&&(j.push(c.value),j.length!==o);$=!0);}catch(st){_e=!0,d=st}finally{try{if(!$&&a.return!=null&&(b=a.return(),Object(b)!==b))return}finally{if(_e)throw d}}return j}}function ownKeys$1(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);o&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,c)}return a}function _objectSpread2$1(e){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ownKeys$1(Object(a),!0).forEach(function(c){_defineProperty$1(e,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(a,c))})}return e}function _defineProperty$1(e,o,a){return o=_toPropertyKey$1(o),o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},_extends$3.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(e,o){if(e==null)return{};var a={},c=Object.keys(e),d,g;for(g=0;g<c.length;g++)d=c[g],!(o.indexOf(d)>=0)&&(a[d]=e[d]);return a}function _objectWithoutProperties$1(e,o){if(e==null)return{};var a=_objectWithoutPropertiesLoose$2(e,o),c,d;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)c=g[d],!(o.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(e,c)&&(a[c]=e[c])}return a}function _slicedToArray$1(e,o){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,o)||_unsupportedIterableToArray$1(e,o)||_nonIterableRest$1()}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _unsupportedIterableToArray$1(e,o){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,o);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray$1(e,o)}}function _arrayLikeToArray$1(e,o){(o==null||o>e.length)&&(o=e.length);for(var a=0,c=new Array(o);a<o;a++)c[a]=e[a];return c}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive$1(e,o){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var c=a.call(e,o||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}function _toPropertyKey$1(e){var o=_toPrimitive$1(e,"string");return typeof o=="symbol"?o:String(o)}var useIsomorphicLayoutEffect$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?React$1.useLayoutEffect:React$1.useEffect;function useEventCallback(e){var o=React$1.useRef(e);return useIsomorphicLayoutEffect$1(function(){o.current=e}),React$1.useCallback(function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return o.current.apply(void 0,c)},[])}var createCountUpInstance=function(o,a){var c=a.decimal,d=a.decimals,g=a.duration,b=a.easingFn,j=a.end,$=a.formattingFn,_e=a.numerals,st=a.prefix,rt=a.separator,ut=a.start,gt=a.suffix,yt=a.useEasing,wt=a.useGrouping,Ct=a.useIndianSeparators,Pt=a.enableScrollSpy,At=a.scrollSpyDelay,Tt=a.scrollSpyOnce,kt=a.plugin;return new countup_js.CountUp(o,j,{startVal:ut,duration:g,decimal:c,decimalPlaces:d,easingFn:b,formattingFn:$,numerals:_e,separator:rt,prefix:st,suffix:gt,plugin:kt,useEasing:yt,useIndianSeparators:Ct,useGrouping:wt,enableScrollSpy:Pt,scrollSpyDelay:At,scrollSpyOnce:Tt})},_excluded$1$1=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],DEFAULTS={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},useCountUp=function(o){var a=Object.fromEntries(Object.entries(o).filter(function(Ht){var dr=_slicedToArray$1(Ht,2),hs=dr[1];return hs!==void 0})),c=React$1.useMemo(function(){return _objectSpread2$1(_objectSpread2$1({},DEFAULTS),a)},[o]),d=c.ref,g=c.startOnMount,b=c.enableReinitialize,j=c.delay,$=c.onEnd,_e=c.onStart,st=c.onPauseResume,rt=c.onReset,ut=c.onUpdate,gt=_objectWithoutProperties$1(c,_excluded$1$1),yt=React$1.useRef(),wt=React$1.useRef(),Ct=React$1.useRef(!1),Pt=useEventCallback(function(){return createCountUpInstance(typeof d=="string"?d:d.current,gt)}),At=useEventCallback(function(Ht){var dr=yt.current;if(dr&&!Ht)return dr;var hs=Pt();return yt.current=hs,hs}),Tt=useEventCallback(function(){var Ht=function(){return At(!0).start(function(){$==null||$({pauseResume:kt,reset:It,start:Ft,update:Lt})})};j&&j>0?wt.current=setTimeout(Ht,j*1e3):Ht(),_e==null||_e({pauseResume:kt,reset:It,update:Lt})}),kt=useEventCallback(function(){At().pauseResume(),st==null||st({reset:It,start:Ft,update:Lt})}),It=useEventCallback(function(){At().el&&(wt.current&&clearTimeout(wt.current),At().reset(),rt==null||rt({pauseResume:kt,start:Ft,update:Lt}))}),Lt=useEventCallback(function(Ht){At().update(Ht),ut==null||ut({pauseResume:kt,reset:It,start:Ft})}),Ft=useEventCallback(function(){It(),Tt()}),Nt=useEventCallback(function(Ht){g&&(Ht&&It(),Tt())});return React$1.useEffect(function(){Ct.current?b&&Nt(!0):(Ct.current=!0,Nt())},[b,Ct,Nt,j,o.start,o.suffix,o.prefix,o.duration,o.separator,o.decimals,o.decimal,o.formattingFn]),React$1.useEffect(function(){return function(){It()}},[It]),{start:Ft,pauseResume:kt,reset:It,update:Lt,getCountUp:At}},_excluded$7=["className","redraw","containerProps","children","style"],CountUp=function(o){var a=o.className,c=o.redraw,d=o.containerProps,g=o.children,b=o.style,j=_objectWithoutProperties$1(o,_excluded$7),$=React$1.useRef(null),_e=React$1.useRef(!1),st=useCountUp(_objectSpread2$1(_objectSpread2$1({},j),{},{ref:$,startOnMount:typeof g!="function"||o.delay===0,enableReinitialize:!1})),rt=st.start,ut=st.reset,gt=st.update,yt=st.pauseResume,wt=st.getCountUp,Ct=useEventCallback(function(){rt()}),Pt=useEventCallback(function(kt){o.preserveValue||ut(),gt(kt)}),At=useEventCallback(function(){if(typeof o.children=="function"&&!($.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}wt()});React$1.useEffect(function(){At()},[At]),React$1.useEffect(function(){_e.current&&Pt(o.end)},[o.end,Pt]);var Tt=c&&o;return React$1.useEffect(function(){c&&_e.current&&Ct()},[Ct,c,Tt]),React$1.useEffect(function(){!c&&_e.current&&Ct()},[Ct,c,o.start,o.suffix,o.prefix,o.duration,o.separator,o.decimals,o.decimal,o.className,o.formattingFn]),React$1.useEffect(function(){_e.current=!0},[]),typeof g=="function"?g({countUpRef:$,start:rt,reset:ut,update:gt,pauseResume:yt,getCountUp:wt}):React$1.createElement("span",_extends$3({className:a,ref:$,style:b},d),typeof o.start<"u"?wt().formattingFn(o.start):"")},_default$2=build.default=CountUp;build.useCountUp=useCountUp;const fadeIn$1=e=>({hidden:{opacity:0,y:e==="down"?-85:85},visible:{opacity:1,y:0}}),opacity=()=>({hidden:{opacity:0},visible:{opacity:1}}),scale$1=()=>({hidden:{scale:1.5,opacity:.2},visible:{scale:1.2,opacity:.8}}),transition$1=()=>({duration:.75,delay:.3,ease:"easeIn"}),transition2=()=>({duration:1.5,delay:.3,ease:"easeIn"}),Home=()=>{const e=[{id:"1",title:"Coinbase",img:"/img/walletsImg/coinbase_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Coinbase is a global digital wallet functioning as a web browser extension. With Coinbase, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"2",title:"Metamask",img:"/img/walletsImg/metamask_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Metamask is a global digital wallet functioning as a web browser extension. With Metamask, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"3",title:"Trust Wallet",img:"/img/walletsImg/trust_wallet_icon.jpeg",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Trust Wallet is a global digital wallet functioning as a web browser extension. With Trust Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"4",title:"Kaikas",img:"/img/walletsImg/kaikas_wallet_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Kaikas is a global digital wallet functioning as a web browser extension. With Kaikas, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"5",title:"SafePal",img:"/img/walletsImg/safepal_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"SafePal is a global digital wallet functioning as a web browser extension. With SafePal, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"6",title:"Coin98",img:"/img/walletsImg/coin98_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Coin98 is a global digital wallet functioning as a web browser extension. With Coin98, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"7",title:"Huobi Wallet",img:"/img/walletsImg/huobi_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Huobi Wallet is a global digital wallet functioning as a web browser extension. With Huobi Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"8",title:"D'Cent",img:"/img/walletsImg/dcent_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"D'Cent is a global digital wallet functioning as a web browser extension. With D'Cent, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"9",title:"Exodus Wallet",img:"/img/walletsImg/exodus_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Exodus Wallet is a global digital wallet functioning as a web browser extension. With Exodus Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})}];return jsxRuntimeExports.jsxs("div",{className:"Home_div",children:[jsxRuntimeExports.jsxs("section",{className:"home_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area",children:[jsxRuntimeExports.jsxs(motion.div,{variants:opacity(),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section1_area_1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div1_txt1",children:[jsxRuntimeExports.jsxs("span",{className:"home_div_section1_area_1_div1_txt1_span",children:["The High-Speed",jsxRuntimeExports.jsx("br",{})," Parallel Blockchain for"]}),"Electric Vehicles."]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_1_div1_txt2",children:"Egochain is a public, permissionless Layer 1 blockchain protocol designed to accelerate the global transition to electric vehicles. It leverages the combined strengths of Cosmos' high transaction speed and interoperability with Ethereum's robust developer ecosystem."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div2",children:[jsxRuntimeExports.jsx("a",{href:"https://egoscan.io/",target:"_blank",children:jsxRuntimeExports.jsx("button",{className:"home_div_section1_area_1_div2_btn",children:"Explorer"})}),jsxRuntimeExports.jsx("a",{href:"https://egoswap.io",target:"_blank",children:jsxRuntimeExports.jsx("button",{className:"home_div_section1_area_1_div2_btn2",children:"Get EGAX"})})]}),jsxRuntimeExports.jsxs("div",{className:"backed_by_div",children:["BACKED BY"," ",jsxRuntimeExports.jsx("img",{src:"/img/tekedia_logo.svg",alt:"",className:"backed_by_div_img"})]})]})," ",jsxRuntimeExports.jsx(motion.div,{variants:scale$1(),transition:transition2(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section1_area_2",children:jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid$2,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_title",children:["Why Egochain",jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_para",children:"Electric vehicles (EVs) hold potential for sustainable transportation, but face obstacles like high costs, sparse charging infrastructure, and pricey charging. Egochain utilizes blockchain to tackle these hurdles and advance the global EV movement."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_2_cont1_icon",children:jsxRuntimeExports.jsx("svg",{"data-v-44de1e4b":"",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"crosshair z-2 p-relative",children:jsxRuntimeExports.jsx("path",{d:"M15 7.5H0M7.5 15V0",stroke:"currentColor"})})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2_cont1_txt",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_2_cont1_txt_title",children:"Affordable EV Production"}),"Egochain's track-and-trace features enable manufacturers to fight counterfeit parts and prevent diversion in their supply chains. This ensures product quality, reduces waste, and cuts costs related to fraudulent components, leading to more affordable electric vehicles (EVs)."]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_2_cont1_icon",children:jsxRuntimeExports.jsx("svg",{"data-v-44de1e4b":"",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"crosshair z-2 p-relative",children:jsxRuntimeExports.jsx("path",{d:"M15 7.5H0M7.5 15V0",stroke:"currentColor"})})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2_cont1_txt",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_2_cont1_txt_title",children:"Enhanced Charging Infrastructure"}),"Egochain offers a solution through an open-source network of charging stations built on blockchain technology. This decentralized approach enables ownership for anyone, including local businesses like grocery stores. Securely recorded transactions on the blockchain minimize fraud and streamline operations, further enhancing the charging infrastructure."]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_2_cont1_icon",children:jsxRuntimeExports.jsx("svg",{"data-v-44de1e4b":"",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"crosshair z-2 p-relative",children:jsxRuntimeExports.jsx("path",{d:"M15 7.5H0M7.5 15V0",stroke:"currentColor"})})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_2_cont1_txt",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_2_cont1_txt_title",children:"Reduced Charging Costs"}),"Egochain incentivizes green transportation by rewarding EV owners with tokens for using less popular charging stations. This approach balances the electrical grid load, promotes energy efficiency, and contributes to a cleaner transportation ecosystem. By reducing charging costs, Egochain tackles range anxiety, a crucial step towards a successful transition to sustainable mobility."]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_title",children:["Build on the fastest blockchain in the industry.",jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_para",children:"Build interoperable decentralized applications with the combined power of Ethereum's swift smart contract development and Cosmos SDK's seamless interoperability."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body",children:[jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Secure Network"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Powered by EGAX's Secure Network"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Node validators actively safeguard the EGOCHAIN by securing consensus, earning EGAX tokens as their well-deserved reward."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section3_area_body_cont1",children:[" ",jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Unleashing"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Unleashing Interoperability"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Powered by the robust Cosmos SDK, Egochain seamlessly connects to the vibrant Cosmos ecosystem (20+ chains, $40B+) through the IBC protocol."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Unleash"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Unleash the Full Potential of Solidity"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Egochain's EVM compatibility empowers developers to leverage the familiar Solidity language and existing dApps, while reaping the benefits of Egochain's superior scalability and security."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Transactions"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Transactions by the Millions"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Tendermint Consensus delivers single-block finality and unmatched scalability, ensuring Egochain can handle the demands of thousands of protocols and millions of users – effortlessly."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_tile",children:"The most adopted scaling technology"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body",children:[jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section4_area_body_cont",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Power the future of Web3 with next-generation dApps"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"At Egochain, we see dApps as the engine driving Web3's revolution. That's why we built Egochain OS, a streamlined 3-step program empowering developers to launch innovative dApps directly onto the next generation of electric vehicles."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]})]}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section4_area_body_cont2a",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"The Blockchain Paving the Way for Real-World Adoption"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Built on the robust Cosmos SDK and leveraging the secure Ethermint consensus mechanism, Egochain is an EVM-compatible blockchain designed for mass adoption. Its human-readable addresses simplify user interactions, making the transition to blockchain technology seamless for millions."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div2",children:jsxRuntimeExports.jsx(Icon,{})})]}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section4_area_body_cont3",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Revolutionizing Smart Contracts"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Launch dynamic dApps with Egoras's powerful CosmWasm smart contract layer. Egoras is the first blockchain to offer auto-executing smart contracts which empower faster, more innovative and groundbreaking applications."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light4.svg",alt:"",className:"home_div_section1_bg_light4"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"ego_chain_stat_section_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_title",children:"The Blockchain Built for Real-World Businesses"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont1",children:["Egochain is more than just a blockchain platform;",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"It is a powerful framework designed to empower real-world businesses to streamline operations, optimize transactions, and unlock new levels of value."]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"PROOF-OF-STAKE"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2_cont1",children:[jsxRuntimeExports.jsx(_default$2,{start:0,end:99,duration:2.75,scrollSpyDelay:10,enableScrollSpy:!0,scrollSpyOnce:!1}),"%"]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2_cont2",children:["lower ",jsxRuntimeExports.jsx("br",{}),"carbon ",jsxRuntimeExports.jsx("br",{}),"footprint"]})]}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Blockchain tech that truly scales."})]})]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_2",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"LOW FEES"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_txt",children:"$0.01"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Enjoy the lowest fees – almost zero."})]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"FAST TRANSACTIONS"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_txt",children:"7 sec"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Transactions confirmed in seconds."})]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light5"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section5",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section5_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_title",children:"Wallets"}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont",children:e.map(o=>jsxRuntimeExports.jsxs(motion.div,{id:o.id,variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section5_area_body_cont_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_img_div",children:jsxRuntimeExports.jsx("img",{src:o.img,alt:"",className:"home_div_section5_area_body_cont_div1_img_div_img"})}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_title",children:o.title}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_title_para",children:o.body}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_last_txt",children:"WALLETS"})]}))})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section6",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section6_area_community",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_title",children:["Join the Egochain community",jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_title_para",children:"Take part in the conversation! Stay in the know & be the first to hear about any new updates"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links",children:[jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://twitter.com/egorasHQ?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$g,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#000"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"X"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Read the latest"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://t.me/s/egorasmarket?before=480",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$f,{className:"home_div_section6_area_community_2_links_cont1_icon"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Telegram"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Join Discussion"})]})]}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/channel/UCHfi5EwXig46xp5Dx8hVBHQ",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$e,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"red"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Youtube"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Watch the latest"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://github.com/EgorasMarket",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$d,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#fff",color:"#000"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Github"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Build with us"})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$c,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#ff4500"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Reddit"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Get Involved"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://egoras.medium.com/",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx("img",{src:"/img/medium_icon.jpeg",alt:"",className:"home_div_section6_area_community_2_links_cont1_img"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Medium"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Read the latest"})]})]})]})]})}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn$1("Up"),transition:transition$1(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"home_div_section6_area",children:[" ",jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_1_title",children:"Stay up to date"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_1_text",children:"Be the first to know about the latest updates and launches."}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1_input_div",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"",id:"",placeholder:"Email",className:"home_div_section6_area_1_input_div_input"}),jsxRuntimeExports.jsx("button",{className:"home_div_section6_area_1_input_div_btn",children:jsxRuntimeExports.jsx(default_1$h,{})})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_2",children:[" ",jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene2"})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx(Grid$2,{})]})]})};/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},_extends$2.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function o(c,d){let{pathname:g,search:b,hash:j}=c.location;return createLocation("",{pathname:g,search:b,hash:j},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function a(c,d){return typeof d=="string"?d:createPath(d)}return getUrlBasedHistory(o,a,null,e)}function invariant(e,o){if(e===!1||e===null||typeof e>"u")throw new Error(o)}function warning(e,o){if(!e){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,o){return{usr:e.state,key:e.key,idx:o}}function createLocation(e,o,a,c){return a===void 0&&(a=null),_extends$2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof o=="string"?parsePath(o):o,{state:a,key:o&&o.key||c||createKey()})}function createPath(e){let{pathname:o="/",search:a="",hash:c=""}=e;return a&&a!=="?"&&(o+=a.charAt(0)==="?"?a:"?"+a),c&&c!=="#"&&(o+=c.charAt(0)==="#"?c:"#"+c),o}function parsePath(e){let o={};if(e){let a=e.indexOf("#");a>=0&&(o.hash=e.substr(a),e=e.substr(0,a));let c=e.indexOf("?");c>=0&&(o.search=e.substr(c),e=e.substr(0,c)),e&&(o.pathname=e)}return o}function getUrlBasedHistory(e,o,a,c){c===void 0&&(c={});let{window:d=document.defaultView,v5Compat:g=!1}=c,b=d.history,j=Action.Pop,$=null,_e=st();_e==null&&(_e=0,b.replaceState(_extends$2({},b.state,{idx:_e}),""));function st(){return(b.state||{idx:null}).idx}function rt(){j=Action.Pop;let Ct=st(),Pt=Ct==null?null:Ct-_e;_e=Ct,$&&$({action:j,location:wt.location,delta:Pt})}function ut(Ct,Pt){j=Action.Push;let At=createLocation(wt.location,Ct,Pt);a&&a(At,Ct),_e=st()+1;let Tt=getHistoryState(At,_e),kt=wt.createHref(At);try{b.pushState(Tt,"",kt)}catch(It){if(It instanceof DOMException&&It.name==="DataCloneError")throw It;d.location.assign(kt)}g&&$&&$({action:j,location:wt.location,delta:1})}function gt(Ct,Pt){j=Action.Replace;let At=createLocation(wt.location,Ct,Pt);a&&a(At,Ct),_e=st();let Tt=getHistoryState(At,_e),kt=wt.createHref(At);b.replaceState(Tt,"",kt),g&&$&&$({action:j,location:wt.location,delta:0})}function yt(Ct){let Pt=d.location.origin!=="null"?d.location.origin:d.location.href,At=typeof Ct=="string"?Ct:createPath(Ct);return invariant(Pt,"No window.location.(origin|href) available to create URL for href: "+At),new URL(At,Pt)}let wt={get action(){return j},get location(){return e(d,b)},listen(Ct){if($)throw new Error("A history only accepts one active listener");return d.addEventListener(PopStateEventType,rt),$=Ct,()=>{d.removeEventListener(PopStateEventType,rt),$=null}},createHref(Ct){return o(d,Ct)},createURL:yt,encodeLocation(Ct){let Pt=yt(Ct);return{pathname:Pt.pathname,search:Pt.search,hash:Pt.hash}},push:ut,replace:gt,go(Ct){return b.go(Ct)}};return wt}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,o,a){a===void 0&&(a="/");let c=typeof o=="string"?parsePath(o):o,d=stripBasename(c.pathname||"/",a);if(d==null)return null;let g=flattenRoutes(e);rankRouteBranches(g);let b=null;for(let j=0;b==null&&j<g.length;++j)b=matchRouteBranch(g[j],safelyDecodeURI(d));return b}function flattenRoutes(e,o,a,c){o===void 0&&(o=[]),a===void 0&&(a=[]),c===void 0&&(c="");let d=(g,b,j)=>{let $={relativePath:j===void 0?g.path||"":j,caseSensitive:g.caseSensitive===!0,childrenIndex:b,route:g};$.relativePath.startsWith("/")&&(invariant($.relativePath.startsWith(c),'Absolute route path "'+$.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),$.relativePath=$.relativePath.slice(c.length));let _e=joinPaths([c,$.relativePath]),st=a.concat($);g.children&&g.children.length>0&&(invariant(g.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_e+'".')),flattenRoutes(g.children,o,st,_e)),!(g.path==null&&!g.index)&&o.push({path:_e,score:computeScore(_e,g.index),routesMeta:st})};return e.forEach((g,b)=>{var j;if(g.path===""||!((j=g.path)!=null&&j.includes("?")))d(g,b);else for(let $ of explodeOptionalSegments(g.path))d(g,b,$)}),o}function explodeOptionalSegments(e){let o=e.split("/");if(o.length===0)return[];let[a,...c]=o,d=a.endsWith("?"),g=a.replace(/\?$/,"");if(c.length===0)return d?[g,""]:[g];let b=explodeOptionalSegments(c.join("/")),j=[];return j.push(...b.map($=>$===""?g:[g,$].join("/"))),d&&j.push(...b),j.map($=>e.startsWith("/")&&$===""?"/":$)}function rankRouteBranches(e){e.sort((o,a)=>o.score!==a.score?a.score-o.score:compareIndexes(o.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,o){let a=e.split("/"),c=a.length;return a.some(isSplat)&&(c+=splatPenalty),o&&(c+=indexRouteValue),a.filter(d=>!isSplat(d)).reduce((d,g)=>d+(paramRe.test(g)?dynamicSegmentValue:g===""?emptySegmentValue:staticSegmentValue),c)}function compareIndexes(e,o){return e.length===o.length&&e.slice(0,-1).every((c,d)=>c===o[d])?e[e.length-1]-o[o.length-1]:0}function matchRouteBranch(e,o){let{routesMeta:a}=e,c={},d="/",g=[];for(let b=0;b<a.length;++b){let j=a[b],$=b===a.length-1,_e=d==="/"?o:o.slice(d.length)||"/",st=matchPath({path:j.relativePath,caseSensitive:j.caseSensitive,end:$},_e);if(!st)return null;Object.assign(c,st.params);let rt=j.route;g.push({params:c,pathname:joinPaths([d,st.pathname]),pathnameBase:normalizePathname(joinPaths([d,st.pathnameBase])),route:rt}),st.pathnameBase!=="/"&&(d=joinPaths([d,st.pathnameBase]))}return g}function matchPath(e,o){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,c]=compilePath(e.path,e.caseSensitive,e.end),d=o.match(a);if(!d)return null;let g=d[0],b=g.replace(/(.)\/+$/,"$1"),j=d.slice(1);return{params:c.reduce((_e,st,rt)=>{let{paramName:ut,isOptional:gt}=st;if(ut==="*"){let wt=j[rt]||"";b=g.slice(0,g.length-wt.length).replace(/(.)\/+$/,"$1")}const yt=j[rt];return gt&&!yt?_e[ut]=void 0:_e[ut]=safelyDecodeURIComponent(yt||"",ut),_e},{}),pathname:g,pathnameBase:b,pattern:e}}function compilePath(e,o,a){o===void 0&&(o=!1),a===void 0&&(a=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let c=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,j,$)=>(c.push({paramName:j,isOptional:$!=null}),$?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(c.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,o?void 0:"i"),c]}function safelyDecodeURI(e){try{return decodeURI(e)}catch(o){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),e}}function safelyDecodeURIComponent(e,o){try{return decodeURIComponent(e)}catch(a){return warning(!1,'The value for the URL param "'+o+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+a+").")),e}}function stripBasename(e,o){if(o==="/")return e;if(!e.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,c=e.charAt(a);return c&&c!=="/"?null:e.slice(a)||"/"}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports$1.createContext(null),DataRouterStateContext=reactExports$1.createContext(null),NavigationContext=reactExports$1.createContext(null),LocationContext=reactExports$1.createContext(null),RouteContext=reactExports$1.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports$1.createContext(null);function useInRouterContext(){return reactExports$1.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports$1.useContext(LocationContext).location}function useRoutes(e,o){return useRoutesImpl(e,o)}function useRoutesImpl(e,o,a,c){useInRouterContext()||invariant(!1);let{navigator:d}=reactExports$1.useContext(NavigationContext),{matches:g}=reactExports$1.useContext(RouteContext),b=g[g.length-1],j=b?b.params:{};b&&b.pathname;let $=b?b.pathnameBase:"/";b&&b.route;let _e=useLocation(),st;if(o){var rt;let Ct=typeof o=="string"?parsePath(o):o;$==="/"||(rt=Ct.pathname)!=null&&rt.startsWith($)||invariant(!1),st=Ct}else st=_e;let ut=st.pathname||"/",gt=$==="/"?ut:ut.slice($.length)||"/",yt=matchRoutes(e,{pathname:gt}),wt=_renderMatches(yt&&yt.map(Ct=>Object.assign({},Ct,{params:Object.assign({},j,Ct.params),pathname:joinPaths([$,d.encodeLocation?d.encodeLocation(Ct.pathname).pathname:Ct.pathname]),pathnameBase:Ct.pathnameBase==="/"?$:joinPaths([$,d.encodeLocation?d.encodeLocation(Ct.pathnameBase).pathname:Ct.pathnameBase])})),g,a,c);return o&&wt?reactExports$1.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},st),navigationType:Action.Pop}},wt):wt}function DefaultErrorComponent(){let e=useRouteError(),o=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports$1.createElement(reactExports$1.Fragment,null,reactExports$1.createElement("h2",null,"Unexpected Application Error!"),reactExports$1.createElement("h3",{style:{fontStyle:"italic"}},o),a?reactExports$1.createElement("pre",{style:d},a):null,null)}const defaultErrorElement=reactExports$1.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports$1.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,a){return a.location!==o.location||a.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:a.error,location:a.location,revalidation:o.revalidation||a.revalidation}}componentDidCatch(o,a){console.error("React Router caught the following error during render",o,a)}render(){return this.state.error!==void 0?reactExports$1.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports$1.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:o,match:a,children:c}=e,d=reactExports$1.useContext(DataRouterContext);return d&&d.static&&d.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=a.route.id),reactExports$1.createElement(RouteContext.Provider,{value:o},c)}function _renderMatches(e,o,a,c){var d;if(o===void 0&&(o=[]),a===void 0&&(a=null),c===void 0&&(c=null),e==null){var g;if((g=a)!=null&&g.errors)e=a.matches;else return null}let b=e,j=(d=a)==null?void 0:d.errors;if(j!=null){let st=b.findIndex(rt=>rt.route.id&&(j==null?void 0:j[rt.route.id]));st>=0||invariant(!1),b=b.slice(0,Math.min(b.length,st+1))}let $=!1,_e=-1;if(a&&c&&c.v7_partialHydration)for(let st=0;st<b.length;st++){let rt=b[st];if((rt.route.HydrateFallback||rt.route.hydrateFallbackElement)&&(_e=st),rt.route.id){let{loaderData:ut,errors:gt}=a,yt=rt.route.loader&&ut[rt.route.id]===void 0&&(!gt||gt[rt.route.id]===void 0);if(rt.route.lazy||yt){$=!0,_e>=0?b=b.slice(0,_e+1):b=[b[0]];break}}}return b.reduceRight((st,rt,ut)=>{let gt,yt=!1,wt=null,Ct=null;a&&(gt=j&&rt.route.id?j[rt.route.id]:void 0,wt=rt.route.errorElement||defaultErrorElement,$&&(_e<0&&ut===0?(warningOnce("route-fallback",!1),yt=!0,Ct=null):_e===ut&&(yt=!0,Ct=rt.route.hydrateFallbackElement||null)));let Pt=o.concat(b.slice(0,ut+1)),At=()=>{let Tt;return gt?Tt=wt:yt?Tt=Ct:rt.route.Component?Tt=reactExports$1.createElement(rt.route.Component,null):rt.route.element?Tt=rt.route.element:Tt=st,reactExports$1.createElement(RenderedRoute,{match:rt,routeContext:{outlet:st,matches:Pt,isDataRoute:a!=null},children:Tt})};return a&&(rt.route.ErrorBoundary||rt.route.errorElement||ut===0)?reactExports$1.createElement(RenderErrorBoundary,{location:a.location,revalidation:a.revalidation,component:wt,error:gt,children:At(),routeContext:{outlet:null,matches:Pt,isDataRoute:!0}}):At()},null)}var DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterState(e){let o=reactExports$1.useContext(DataRouterStateContext);return o||invariant(!1),o}function useRouteContext(e){let o=reactExports$1.useContext(RouteContext);return o||invariant(!1),o}function useCurrentRouteId(e){let o=useRouteContext(),a=o.matches[o.matches.length-1];return a.route.id||invariant(!1),a.route.id}function useRouteError(){var e;let o=reactExports$1.useContext(RouteErrorContext),a=useDataRouterState(DataRouterStateHook$1.UseRouteError),c=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return o!==void 0?o:(e=a.errors)==null?void 0:e[c]}const alreadyWarned={};function warningOnce(e,o,a){!o&&!alreadyWarned[e]&&(alreadyWarned[e]=!0)}function Route(e){invariant(!1)}function Router(e){let{basename:o="/",children:a=null,location:c,navigationType:d=Action.Pop,navigator:g,static:b=!1,future:j}=e;useInRouterContext()&&invariant(!1);let $=o.replace(/^\/*/,"/"),_e=reactExports$1.useMemo(()=>({basename:$,navigator:g,static:b,future:_extends$1({v7_relativeSplatPath:!1},j)}),[$,j,g,b]);typeof c=="string"&&(c=parsePath(c));let{pathname:st="/",search:rt="",hash:ut="",state:gt=null,key:yt="default"}=c,wt=reactExports$1.useMemo(()=>{let Ct=stripBasename(st,$);return Ct==null?null:{location:{pathname:Ct,search:rt,hash:ut,state:gt,key:yt},navigationType:d}},[$,st,rt,ut,gt,yt,d]);return wt==null?null:reactExports$1.createElement(NavigationContext.Provider,{value:_e},reactExports$1.createElement(LocationContext.Provider,{children:a,value:wt}))}function Routes(e){let{children:o,location:a}=e;return useRoutes(createRoutesFromChildren(o),a)}new Promise(()=>{});function createRoutesFromChildren(e,o){o===void 0&&(o=[]);let a=[];return reactExports$1.Children.forEach(e,(c,d)=>{if(!reactExports$1.isValidElement(c))return;let g=[...o,d];if(c.type===reactExports$1.Fragment){a.push.apply(a,createRoutesFromChildren(c.props.children,g));return}c.type!==Route&&invariant(!1),!c.props.index||!c.props.children||invariant(!1);let b={id:c.props.id||g.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(b.children=createRoutesFromChildren(c.props.children,g)),a.push(b)}),a}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const START_TRANSITION="startTransition",startTransitionImpl=React$3[START_TRANSITION];function BrowserRouter(e){let{basename:o,children:a,future:c,window:d}=e,g=reactExports$1.useRef();g.current==null&&(g.current=createBrowserHistory({window:d,v5Compat:!0}));let b=g.current,[j,$]=reactExports$1.useState({action:b.action,location:b.location}),{v7_startTransition:_e}=c||{},st=reactExports$1.useCallback(rt=>{_e&&startTransitionImpl?startTransitionImpl(()=>$(rt)):$(rt)},[$,_e]);return reactExports$1.useLayoutEffect(()=>b.listen(st),[b,st]),reactExports$1.createElement(Router,{basename:o,children:a,location:j.location,navigationType:j.action,navigator:b,future:c})}var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function noop$1(){}function returnTrue(){return!0}function charIsNumber(e){return!!(e||"").match(/\d/)}function isNil(e){return e==null}function escapeRegExp(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function getThousandsGroupRegex(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function applyThousandSeparator(e,o,a){var c=getThousandsGroupRegex(a),d=e.search(/[1-9]/);return d=d===-1?e.length:d,e.substring(0,d)+e.substring(d,e.length).replace(c,"$1"+o)}function splitDecimal(e,o){o===void 0&&(o=!0);var a=e[0]==="-",c=a&&o;e=e.replace("-","");var d=e.split("."),g=d[0],b=d[1]||"";return{beforeDecimal:g,afterDecimal:b,hasNagation:a,addNegation:c}}function fixLeadingZero(e){if(!e)return e;var o=e[0]==="-";o&&(e=e.substring(1,e.length));var a=e.split("."),c=a[0].replace(/^0+/,"")||"0",d=a[1]||"";return(o?"-":"")+c+(d?"."+d:"")}function limitToScale(e,o,a){for(var c="",d=a?"0":"",g=0;g<=o-1;g++)c+=e[g]||d;return c}function repeat$1(e,o){return Array(o+1).join(e)}function toNumericString(e){e+="";var o=e[0]==="-"?"-":"";o&&(e=e.substring(1));var a=e.split(/[eE]/g),c=a[0],d=a[1];if(d=Number(d),!d)return o+c;c=c.replace(".","");var g=1+d,b=c.length;return g<0?c="0."+repeat$1("0",Math.abs(g))+c:g>=b?c=c+repeat$1("0",g-b):c=(c.substring(0,g)||"0")+"."+c.substring(g),o+c}function roundToPrecision(e,o,a){if(["","-"].indexOf(e)!==-1)return e;var c=e.indexOf(".")!==-1&&o,d=splitDecimal(e),g=d.beforeDecimal,b=d.afterDecimal,j=d.hasNagation,$=parseFloat("0."+(b||"0")),_e=b.length<=o?"0."+b:$.toFixed(o),st=_e.split("."),rt=g.split("").reverse().reduce(function(wt,Ct,Pt){return wt.length>Pt?(Number(wt[0])+Number(Ct)).toString()+wt.substring(1,wt.length):Ct+wt},st[0]),ut=limitToScale(st[1]||"",Math.min(o,b.length),a),gt=j?"-":"",yt=c?".":"";return""+gt+rt+yt+ut}function setCaretPosition(e,o){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",o),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(o,o),!0):(e.focus(),!1)}}function findChangedIndex(e,o){for(var a=0,c=0,d=e.length,g=o.length;e[a]===o[a]&&a<d;)a++;for(;e[d-1-c]===o[g-1-c]&&g-c>a&&d-c>a;)c++;return{start:a,end:d-c}}function clamp(e,o,a){return Math.min(Math.max(e,o),a)}function getCurrentCaretPosition(e){return Math.max(e.selectionStart,e.selectionEnd)}function addInputMode(e){return e||typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function objectWithoutProperties(e,o){var a={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&o.indexOf(c)===-1&&(a[c]=e[c]);return a}var defaultProps={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,allowLeadingZeros:!1,isNumericString:!1,type:"text",onValueChange:noop$1,onChange:noop$1,onKeyDown:noop$1,onMouseUp:noop$1,onFocus:noop$1,onBlur:noop$1,isAllowed:returnTrue},NumberFormat=function(e){function o(a){e.call(this,a);var c=a.defaultValue;this.validateProps();var d=this.formatValueProp(c);this.state={value:d,numAsString:this.removeFormatting(d),mounted:!1},this.selectionBeforeInput={selectionStart:0,selectionEnd:0},this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.componentDidMount=function(){this.setState({mounted:!0})},o.prototype.componentDidUpdate=function(c){this.updateValueIfRequired(c)},o.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout)},o.prototype.updateValueIfRequired=function(c){var d=this,g=d.props,b=d.state,j=d.focusedElm,$=b.value,_e=b.numAsString;if(_e===void 0&&(_e=""),c!==g){this.validateProps();var st=this.formatNumString(_e),rt=isNil(g.value)?st:this.formatValueProp(),ut=this.removeFormatting(rt),gt=parseFloat(ut),yt=parseFloat(_e);((!isNaN(gt)||!isNaN(yt))&&gt!==yt||st!==$||j===null&&rt!==$)&&this.updateValue({formattedValue:rt,numAsString:ut,input:j,source:"prop",event:null})}},o.prototype.getFloatString=function(c){c===void 0&&(c="");var d=this.props,g=d.decimalScale,b=this.getSeparators(),j=b.decimalSeparator,$=this.getNumberRegex(!0),_e=c[0]==="-";_e&&(c=c.replace("-","")),j&&g===0&&(c=c.split(j)[0]),c=(c.match($)||[]).join("").replace(j,".");var st=c.indexOf(".");return st!==-1&&(c=c.substring(0,st)+"."+c.substring(st+1,c.length).replace(new RegExp(escapeRegExp(j),"g"),"")),_e&&(c="-"+c),c},o.prototype.getNumberRegex=function(c,d){var g=this.props,b=g.format,j=g.decimalScale,$=g.customNumerals,_e=this.getSeparators(),st=_e.decimalSeparator;return new RegExp("[0-9"+($?$.join(""):"")+"]"+(st&&j!==0&&!d&&!b?"|"+escapeRegExp(st):""),c?"g":void 0)},o.prototype.getSeparators=function(){var c=this.props,d=c.decimalSeparator,g=this.props,b=g.thousandSeparator,j=g.allowedDecimalSeparators;return b===!0&&(b=","),j||(j=[d,"."]),{decimalSeparator:d,thousandSeparator:b,allowedDecimalSeparators:j}},o.prototype.getMaskAtIndex=function(c){var d=this.props,g=d.mask;return g===void 0&&(g=" "),typeof g=="string"?g:g[c]||" "},o.prototype.getValueObject=function(c,d){var g=parseFloat(d);return{formattedValue:c,value:d,floatValue:isNaN(g)?void 0:g}},o.prototype.validateProps=function(){var c=this.props,d=c.mask,g=this.getSeparators(),b=g.decimalSeparator,j=g.thousandSeparator;if(b===j)throw new Error(`
          Decimal separator can't be same as thousand separator.
          thousandSeparator: `+j+` (thousandSeparator = {true} is same as thousandSeparator = ",")
          decimalSeparator: `+b+` (default value for decimalSeparator is .)
       `);if(d){var $=d==="string"?d:d.toString();if($.match(/\d/g))throw new Error(`
          Mask `+d+` should not contain numeric character;
        `)}},o.prototype.setPatchedCaretPosition=function(c,d,g){setCaretPosition(c,d),this.caretPositionTimeout=setTimeout(function(){c.value===g&&setCaretPosition(c,d)},0)},o.prototype.correctCaretPosition=function(c,d,g){var b=this.props,j=b.prefix,$=b.suffix,_e=b.format;if(c==="")return 0;if(d=clamp(d,0,c.length),!_e){var st=c[0]==="-";return clamp(d,j.length+(st?1:0),c.length-$.length)}if(typeof _e=="function"||_e[d]==="#"&&charIsNumber(c[d])||_e[d-1]==="#"&&charIsNumber(c[d-1]))return d;var rt=_e.indexOf("#"),ut=_e.lastIndexOf("#");d=clamp(d,rt,ut+1);for(var gt=_e.substring(d,_e.length).indexOf("#"),yt=d,wt=d+(gt===-1?0:gt);yt>rt&&(_e[yt]!=="#"||!charIsNumber(c[yt]));)yt-=1;var Ct=!charIsNumber(c[wt])||g==="left"&&d!==rt||d-yt<wt-d;return Ct?charIsNumber(c[yt])?yt+1:yt:wt},o.prototype.getCaretPosition=function(c,d,g){var b=this.props,j=b.format,$=this.state.value,_e=this.getNumberRegex(!0),st=(c.match(_e)||[]).join(""),rt=(d.match(_e)||[]).join(""),ut,gt;for(ut=0,gt=0;gt<g;gt++){var yt=c[gt]||"",wt=d[ut]||"";if(!(!yt.match(_e)&&yt!==wt)&&!(yt==="0"&&wt.match(_e)&&wt!=="0"&&st.length!==rt.length)){for(;yt!==d[ut]&&ut<d.length;)ut++;ut++}}return typeof j=="string"&&!$&&(ut=d.length),ut=this.correctCaretPosition(d,ut),ut},o.prototype.removePrefixAndSuffix=function(c){var d=this.props,g=d.format,b=d.prefix,j=d.suffix;if(!g&&c){var $=c[0]==="-";$&&(c=c.substring(1,c.length)),c=b&&c.indexOf(b)===0?c.substring(b.length,c.length):c;var _e=c.lastIndexOf(j);c=j&&_e!==-1&&_e===c.length-j.length?c.substring(0,_e):c,$&&(c="-"+c)}return c},o.prototype.removePatternFormatting=function(c){for(var d=this.props,g=d.format,b=g.split("#").filter(function(gt){return gt!==""}),j=0,$="",_e=0,st=b.length;_e<=st;_e++){var rt=b[_e]||"",ut=_e===st?c.length:c.indexOf(rt,j);if(ut===-1){$=c;break}else $+=c.substring(j,ut),j=ut+rt.length}return($.match(this.getNumberRegex(!0))||[]).join("")},o.prototype.removeFormatting=function(c){var d=this.props,g=d.format,b=d.removeFormatting;return c&&(g?typeof g=="string"?c=this.removePatternFormatting(c):typeof b=="function"?c=b(c):c=(c.match(this.getNumberRegex(!0))||[]).join(""):(c=this.removePrefixAndSuffix(c),c=this.getFloatString(c)),c)},o.prototype.formatWithPattern=function(c){for(var d=this.props,g=d.format,b=0,j=g.split(""),$=0,_e=g.length;$<_e;$++)g[$]==="#"&&(j[$]=c[b]||this.getMaskAtIndex(b),b+=1);return j.join("")},o.prototype.formatAsNumber=function(c){var d=this.props,g=d.decimalScale,b=d.fixedDecimalScale,j=d.prefix,$=d.suffix,_e=d.allowNegative,st=d.thousandsGroupStyle,rt=this.getSeparators(),ut=rt.thousandSeparator,gt=rt.decimalSeparator,yt=c.indexOf(".")!==-1||g&&b,wt=splitDecimal(c,_e),Ct=wt.beforeDecimal,Pt=wt.afterDecimal,At=wt.addNegation;return g!==void 0&&(Pt=limitToScale(Pt,g,b)),ut&&(Ct=applyThousandSeparator(Ct,ut,st)),j&&(Ct=j+Ct),$&&(Pt=Pt+$),At&&(Ct="-"+Ct),c=Ct+(yt&&gt||"")+Pt,c},o.prototype.formatNumString=function(c){c===void 0&&(c="");var d=this.props,g=d.format,b=d.allowEmptyFormatting,j=d.customNumerals,$=c;if(j&&j.length===10){var _e=new RegExp("["+j.join("")+"]","g");$=c.replace(_e,function(st){return j.indexOf(st).toString()})}return c===""&&!b?$="":c==="-"&&!g?$="-":typeof g=="string"?$=this.formatWithPattern($):typeof g=="function"?$=g($):$=this.formatAsNumber($),$},o.prototype.formatValueProp=function(c){var d=this.props,g=d.format,b=d.decimalScale,j=d.fixedDecimalScale,$=d.allowEmptyFormatting,_e=this.props,st=_e.value,rt=_e.isNumericString;st=isNil(st)?c:st;var ut=!st&&st!==0;if(ut&&$&&(st=""),ut&&!$)return"";typeof st=="number"&&(st=toNumericString(st),rt=!0),st==="Infinity"&&rt&&(st=""),rt&&!g&&typeof b=="number"&&(st=roundToPrecision(st,b,j));var gt=rt?this.formatNumString(st):this.formatInput(st);return gt},o.prototype.formatNegation=function(c){c===void 0&&(c="");var d=this.props,g=d.allowNegative,b=new RegExp("(-)"),j=new RegExp("(-)(.)*(-)"),$=b.test(c),_e=j.test(c);return c=c.replace(/-/g,""),$&&!_e&&g&&(c="-"+c),c},o.prototype.formatInput=function(c){c===void 0&&(c="");var d=this.props,g=d.format;return g||(c=this.removePrefixAndSuffix(c),c=this.formatNegation(c)),c=this.removeFormatting(c),this.formatNumString(c)},o.prototype.isCharacterAFormat=function(c,d){var g=this.props,b=g.format,j=g.prefix,$=g.suffix,_e=g.decimalScale,st=g.fixedDecimalScale,rt=this.getSeparators(),ut=rt.decimalSeparator;return!!(typeof b=="string"&&b[c]!=="#"||!b&&(c<j.length||c>=d.length-$.length||_e&&st&&d[c]===ut))},o.prototype.correctInputValue=function(c,d,g){var b=this,j=this.props,$=j.format,_e=j.allowNegative,st=j.prefix,rt=j.suffix,ut=j.decimalScale,gt=this.getSeparators(),yt=gt.allowedDecimalSeparators,wt=gt.decimalSeparator,Ct=this.state.numAsString||"",Pt=this.selectionBeforeInput,At=Pt.selectionStart,Tt=Pt.selectionEnd,kt=findChangedIndex(d,g),It=kt.start,Lt=kt.end;if(!$&&It===Lt&&yt.indexOf(g[At])!==-1){var Ft=ut===0?"":wt;return g.substr(0,At)+Ft+g.substr(At+1,g.length)}var Nt=$?0:st.length,Ht=d.length-($?0:rt.length);if(g.length>d.length||!g.length||It===Lt||At===0&&Tt===d.length||It===0&&Lt===d.length||At===Nt&&Tt===Ht)return g;var dr=d.substr(It,Lt-It),hs=!![].concat(dr).find(function(Nn,Qn){return b.isCharacterAFormat(Qn+It,d)});if(hs){var us=d.substr(It),hn={},un=[];[].concat(us).forEach(function(Nn,Qn){b.isCharacterAFormat(Qn+It,d)?hn[Qn]=Nn:Qn>dr.length-1&&un.push(Nn)}),Object.keys(hn).forEach(function(Nn){un.length>Nn?un.splice(Nn,0,hn[Nn]):un.push(hn[Nn])}),g=d.substr(0,It)+un.join("")}if(!$){var bo=this.removeFormatting(g),_s=splitDecimal(bo,_e),gn=_s.beforeDecimal,Gr=_s.afterDecimal,ds=_s.addNegation,Zn=c<g.indexOf(wt)+1;if(bo.length<Ct.length&&Zn&&gn===""&&!parseFloat(Gr))return ds?"-":""}return g},o.prototype.updateValue=function(c){var d=c.formattedValue,g=c.input,b=c.setCaretPosition;b===void 0&&(b=!0);var j=c.source,$=c.event,_e=c.numAsString,st=c.caretPos,rt=this.props,ut=rt.onValueChange,gt=this.state,yt=gt.value;if(g){if(st===void 0&&b){var wt=c.inputValue||g.value,Ct=getCurrentCaretPosition(g);g.value=d,st=this.getCaretPosition(wt,d,Ct)}g.value=d,b&&this.setPatchedCaretPosition(g,st,d)}_e===void 0&&(_e=this.removeFormatting(d)),d!==yt&&(this.setState({value:d,numAsString:_e}),ut(this.getValueObject(d,_e),{event:$,source:j}))},o.prototype.onChange=function(c){var d=c.target,g=d.value,b=this,j=b.state,$=b.props,_e=$.isAllowed,st=j.value||"",rt=getCurrentCaretPosition(d);g=this.correctInputValue(rt,st,g);var ut=this.formatInput(g)||"",gt=this.removeFormatting(ut),yt=this.getValueObject(ut,gt),wt=_e(yt);wt||(ut=st),this.updateValue({formattedValue:ut,numAsString:gt,inputValue:g,input:d,event:c,source:"event"}),wt&&$.onChange(c)},o.prototype.onBlur=function(c){var d=this,g=d.props,b=d.state,j=g.format,$=g.onBlur,_e=g.allowLeadingZeros,st=b.numAsString,rt=b.value;if(this.focusedElm=null,clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout),!j){isNaN(parseFloat(st))&&(st=""),_e||(st=fixLeadingZero(st));var ut=this.formatNumString(st);if(ut!==rt){this.updateValue({formattedValue:ut,numAsString:st,input:c.target,setCaretPosition:!1,event:c,source:"event"}),$(c);return}}$(c)},o.prototype.onKeyDown=function(c){var d=c.target,g=c.key,b=d.selectionStart,j=d.selectionEnd,$=d.value;$===void 0&&($="");var _e,st=this.props,rt=st.decimalScale,ut=st.fixedDecimalScale,gt=st.prefix,yt=st.suffix,wt=st.format,Ct=st.onKeyDown,Pt=rt!==void 0&&ut,At=this.getNumberRegex(!1,Pt),Tt=new RegExp("-"),kt=typeof wt=="string";if(this.selectionBeforeInput={selectionStart:b,selectionEnd:j},g==="ArrowLeft"||g==="Backspace"?_e=b-1:g==="ArrowRight"?_e=b+1:g==="Delete"&&(_e=b),_e===void 0||b!==j){Ct(c);return}var It=_e,Lt=kt?wt.indexOf("#"):gt.length,Ft=kt?wt.lastIndexOf("#")+1:$.length-yt.length;if(g==="ArrowLeft"||g==="ArrowRight"){var Nt=g==="ArrowLeft"?"left":"right";It=this.correctCaretPosition($,_e,Nt)}else if(g==="Delete"&&!At.test($[_e])&&!Tt.test($[_e]))for(;!At.test($[It])&&It<Ft;)It++;else if(g==="Backspace"&&!At.test($[_e])){if(b<=Lt+1&&$[0]==="-"&&typeof wt>"u"){var Ht=$.substring(1);this.updateValue({formattedValue:Ht,caretPos:It,input:d,event:c,source:"event"})}else if(!Tt.test($[_e])){for(;!At.test($[It-1])&&It>Lt;)It--;It=this.correctCaretPosition($,It,"left")}}(It!==_e||_e<Lt||_e>Ft)&&(c.preventDefault(),this.setPatchedCaretPosition(d,It,$)),c.isUnitTestRun&&this.setPatchedCaretPosition(d,It,$),Ct(c)},o.prototype.onMouseUp=function(c){var d=c.target,g=d.selectionStart,b=d.selectionEnd,j=d.value;if(j===void 0&&(j=""),g===b){var $=this.correctCaretPosition(j,g);$!==g&&this.setPatchedCaretPosition(d,$,j)}this.props.onMouseUp(c)},o.prototype.onFocus=function(c){var d=this;c.persist(),this.focusedElm=c.target,this.focusTimeout=setTimeout(function(){var g=c.target,b=g.selectionStart,j=g.selectionEnd,$=g.value;$===void 0&&($="");var _e=d.correctCaretPosition($,b);_e!==b&&!(b===0&&j===$.length)&&d.setPatchedCaretPosition(g,_e,$),d.props.onFocus(c)},0)},o.prototype.render=function(){var c=this.props,d=c.type,g=c.displayType,b=c.customInput,j=c.renderText,$=c.getInputRef,_e=c.format;c.thousandSeparator,c.decimalSeparator,c.allowedDecimalSeparators,c.thousandsGroupStyle,c.decimalScale,c.fixedDecimalScale,c.prefix,c.suffix,c.removeFormatting,c.mask,c.defaultValue,c.isNumericString,c.allowNegative,c.allowEmptyFormatting,c.allowLeadingZeros,c.onValueChange,c.isAllowed,c.customNumerals,c.onChange,c.onKeyDown,c.onMouseUp,c.onFocus,c.onBlur,c.value;var st=objectWithoutProperties(c,["type","displayType","customInput","renderText","getInputRef","format","thousandSeparator","decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","decimalScale","fixedDecimalScale","prefix","suffix","removeFormatting","mask","defaultValue","isNumericString","allowNegative","allowEmptyFormatting","allowLeadingZeros","onValueChange","isAllowed","customNumerals","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value"]),rt=st,ut=this.state,gt=ut.value,yt=ut.mounted,wt=yt&&addInputMode(_e)?"numeric":void 0,Ct=Object.assign({inputMode:wt},rt,{type:d,value:gt,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if(g==="text")return j?j(gt,rt)||null:React$2.createElement("span",Object.assign({},rt,{ref:$}),gt);if(b){var Pt=b;return React$2.createElement(Pt,Object.assign({},Ct,{ref:$}))}return React$2.createElement("input",Object.assign({},Ct,{ref:$}))},o}(React$2.Component);NumberFormat.defaultProps=defaultProps;const numberWithCommas=e=>jsxRuntimeExports.jsx(NumberFormat,{value:e,displayType:"text",thousandSeparator:!0}),Egc=()=>{const[e,o]=reactExports$1.useState(0);return reactExports$1.useEffect(async a=>{await fetch("https://api.coingecko.com/api/v3/simple/price?ids=egoras-credit&vs_currencies=usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=true&include_last_updated_at=true").then(d=>d.json()).then(d=>{const g=d["egoras-credit"].usd;console.log(g),o(g==="0"?"0":g)})},[]),jsxRuntimeExports.jsxs("div",{className:"egox_token_div",children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"Egochain (EGC) coin"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_para",children:"A Powerhouse for Innovation."})]}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area2",children:jsxRuntimeExports.jsx("img",{src:"/img/1_inch_token_image_dummy.png",alt:"",className:"egox_token_div_section1area2_img"})})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1_title",children:["$",e]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Current Price"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"74k"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Circulating Supply"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1_title",children:["$",numberWithCommas((e*74467.35244).toFixed(2))]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Market Cap"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"35k"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Holders"})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_title",children:"EGC Utility"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_paragraph",children:"Egochain offers a compelling blend of democratic governance and token scarcity. EGC holders directly influence the platform's trajectory through their votes for the Egochain Committee, a community-driven body responsible for the blockchain's stability and performance. Composed of elected members and consensus nodes, this committee ensures network liveliness and optimizes critical parameters. Additionally, EGC's indivisible units and limited total supply (74,467.35244 EGC) contribute to its distinct scarcity, enhancing its value proposition within the blockchain ecosystem."})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]})]})};var Menu={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(Menu,"__esModule",{value:!0});var default_1$b=Menu.default=void 0,_createSvgIcon$a=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$b=Menu.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Close={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1$a=Close.default=void 0,_createSvgIcon$9=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$a=Close.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var CallMade={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(CallMade,"__esModule",{value:!0});var default_1$9=CallMade.default=void 0,_createSvgIcon$8=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$9=CallMade.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");var KeyboardArrowDown={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(KeyboardArrowDown,"__esModule",{value:!0});var default_1$8=KeyboardArrowDown.default=void 0,_createSvgIcon$7=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$8=KeyboardArrowDown.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");var Info={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(Info,"__esModule",{value:!0});var default_1$7=Info.default=void 0,_createSvgIcon$6=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$7=Info.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var Description={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(Description,"__esModule",{value:!0});var default_1$6=Description.default=void 0,_createSvgIcon$5=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$6=Description.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description");var DocumentScanner={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(DocumentScanner,"__esModule",{value:!0});var default_1$5=DocumentScanner.default=void 0,_createSvgIcon$4=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$5=DocumentScanner.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M7 3H4v3H2V1h5zm15 3V1h-5v2h3v3zM7 21H4v-3H2v5h5zm13-3v3h-3v2h5v-5zm-1 0c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2zM15 8H9v2h6zm0 3H9v2h6zm0 3H9v2h6z"}),"DocumentScanner");var JoinLeft={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(JoinLeft,"__esModule",{value:!0});var default_1$4=JoinLeft.default=void 0,_createSvgIcon$3=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$4=JoinLeft.default=(0,_createSvgIcon$3.default)([(0,_jsxRuntime$3.jsx)("ellipse",{cx:"12",cy:"12",rx:"3",ry:"5.74"},"0"),(0,_jsxRuntime$3.jsx)("path",{d:"M7.5 12c0-.97.23-4.16 3.03-6.5C9.75 5.19 8.9 5 8 5c-3.86 0-7 3.14-7 7s3.14 7 7 7c.9 0 1.75-.19 2.53-.5-2.8-2.34-3.03-5.53-3.03-6.5M16 5c-.9 0-1.75.19-2.53.5.61.51 1.1 1.07 1.49 1.63.33-.08.68-.13 1.04-.13 2.76 0 5 2.24 5 5s-2.24 5-5 5c-.36 0-.71-.05-1.04-.13-.39.56-.88 1.12-1.49 1.63.78.31 1.63.5 2.53.5 3.86 0 7-3.14 7-7s-3.14-7-7-7"},"1")],"JoinLeft");var WaterDrop={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(WaterDrop,"__esModule",{value:!0});var default_1$3=WaterDrop.default=void 0,_createSvgIcon$2=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$3=WaterDrop.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8M7.83 14c.37 0 .67.26.74.62.41 2.22 2.28 2.98 3.64 2.87.43-.02.79.32.79.75 0 .4-.32.73-.72.75-2.13.13-4.62-1.09-5.19-4.12-.08-.45.28-.87.74-.87"}),"WaterDrop");const fadeIn=e=>({hidden:{opacity:0,y:e==="down"?-85:85},visible:{opacity:1,y:0}}),transition=()=>({duration:.35,delay:.1,ease:"easeIn"}),Header=()=>{const[e,o]=reactExports$1.useState(!1),a=()=>{o(!e)};return jsxRuntimeExports.jsxs("div",{className:"header_div",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"header_div_area",children:[jsxRuntimeExports.jsxs("a",{href:"/",className:"header_div_area_1",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"header_div_area_1_img"}),"Egochain"]}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div",children:["Resources"," ",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_div_icon"}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn("Up"),transition:transition(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"header_div_area_2_div_drop",children:[" ",jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egochain.org/egax/coin/info",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx("img",{src:"/egax_logo.png",alt:"",className:"header_div_area_2_link1Img"})," ","EGAX Coin"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egochain.org/egc/coin/info",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx("img",{src:"/egc_icon2.svg",alt:"",className:"header_div_area_2_link1Img"})," ","EGC Coin"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egochain.org/about",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$7,{className:"header_div_area_2_link1_icon"})," About"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egochain.org/whitepaper",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$6,{className:"header_div_area_2_link1_icon"})," ","Whitepaper"]})]})]}),jsxRuntimeExports.jsx("a",{href:"/wallet",className:"header_div_area_2_link1",children:"Ego Wallet"}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"header_div_area_2_link1",target:"_blank",children:["Developers",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div",children:["Products"," ",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_div_icon"}),jsxRuntimeExports.jsxs(motion.div,{variants:fadeIn("Up"),transition:transition(),initial:"hidden",whileInView:"visible",viewport:{once:!1},className:"header_div_area_2_div_drop",children:[jsxRuntimeExports.jsxs("a",{href:"https://egoswap.io",className:"header_div_area_2_link1",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})," ","Egoswap"," ",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon2"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoscan.io/",className:"header_div_area_2_link1",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$5,{className:"header_div_area_2_link1_icon"})," ","Explorer"," ",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon2"})]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egochain.org/",target:"_blank",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$3,{className:"header_div_area_2_link1_icon"})," ","Faucet"," ",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon2"})]})]})]}),jsxRuntimeExports.jsx(default_1$b,{className:"header_div_area_2_menu_icon",onClick:a})]})]})}),e?jsxRuntimeExports.jsx("div",{className:"headerMenuDiv",children:jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"headerMenuDiv_cont_1",children:jsxRuntimeExports.jsx(default_1$a,{className:"headerMenuDiv_cont_1_icon",onClick:a})}),jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont_body",children:[jsxRuntimeExports.jsx("a",{href:"/wallet",className:"headerMenuDiv_cont_body_link1",children:"Ego Wallet"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egochain.org/egax/coin/info",className:"headerMenuDiv_cont_body_link1",children:"EGAX Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egochain.org/egc/coin/info",className:"headerMenuDiv_cont_body_link1",children:"EGC Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egochain.org/about",className:"headerMenuDiv_cont_body_link1",children:"About"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egochain.org/whitepaper",className:"headerMenuDiv_cont_body_link1",children:"White paper"}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egochain.org/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Faucet",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",target:"_blank",className:"headerMenuDiv_cont_body_link1",children:[" ","Developer",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoswap.io",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Egoswap",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoscan.io/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Explorer",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egodao.org/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Stake",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]})]})]})}):null]})};var Twitter={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Twitter,"__esModule",{value:!0});var default_1$2=Twitter.default=void 0;_interopRequireWildcard$2(reactExports$1);var _createSvgIcon$1=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;function _getRequireWildcardCache$1(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache$1=function(c){return c?a:o})(e)}function _interopRequireWildcard$2(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache$1(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$2=Twitter.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter");var LinkedIn={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(LinkedIn,"__esModule",{value:!0});var default_1$1=LinkedIn.default=void 0;_interopRequireWildcard$1(reactExports$1);var _createSvgIcon=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;function _getRequireWildcardCache(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(_getRequireWildcardCache=function(c){return c?a:o})(e)}function _interopRequireWildcard$1(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=_getRequireWildcardCache(o);if(a&&a.has(e))return a.get(e);var c={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var b=d?Object.getOwnPropertyDescriptor(e,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=e[g]}return c.default=e,a&&a.set(e,c),c}default_1$1=LinkedIn.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn");const Footer=()=>{const[e,o]=reactExports$1.useState(new Date().getFullYear());return reactExports$1.useEffect(()=>{const a=setInterval(()=>{o(new Date().getFullYear())},1e3);return()=>clearInterval(a)},[]),jsxRuntimeExports.jsx("div",{className:"footerDiv",id:"footer",children:jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"footerDivArea",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1_cont1",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"footerDiv1_img2"}),"Egochain"]}),jsxRuntimeExports.jsx("div",{className:"footerDiv1_area1_cont2",children:jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1_cont2_links",children:[jsxRuntimeExports.jsxs("a",{href:"https://twitter.com/egorasHQ?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$2,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://t.me/s/egorasmarket?before=480",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$f,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$d,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/channel/UCHfi5EwXig46xp5Dx8hVBHQ",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$e,{className:"footerDiv1_area1_cont2_links_link1"})," "]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Eco-System"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egochain.org/egax/coin/info",className:"footerDiv1_area2_title_subLinks_div_link1",children:"EGAX Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egochain.org/egc/coin/info",className:"footerDiv1_area2_title_subLinks_div_link1",children:"EGC Coin"}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Developers",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoscan.io/",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Explorer",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Products"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:"/wallet",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Ego Wallet"}),jsxRuntimeExports.jsxs("a",{href:"https://egoswap.io",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Egoswap",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egochain.org/",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Faucet",jsxRuntimeExports.jsx(default_1$9,{className:"header_div_area_2_link1_icon"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Docs"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egochain.org/about",className:"footerDiv1_area2_title_subLinks_div_link1",children:"About"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egochain.org/whitepaper",className:"footerDiv1_area2_title_subLinks_div_link1",children:"White paper"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/privacy`:"https://egochain.org/privacy",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Privacy Policy"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/terms`:"https://egochain.org/terms",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Terms & conditions"})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1_last",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Need Help?"}),jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title_subLinks_div",children:jsxRuntimeExports.jsx("a",{href:"mailto:support@egoras.com",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:"support@egochain.com"})})]})]})]}),jsxRuntimeExports.jsx("hr",{className:"footer_hr"}),jsxRuntimeExports.jsxs("div",{className:"footer_lastDiv",children:["© ",e," Egochain.org"]})]})})})},Roadmap=()=>jsxRuntimeExports.jsxs("div",{className:"roadMapDiv",children:[" ",jsxRuntimeExports.jsx("section",{className:"roadmap",children:jsxRuntimeExports.jsx("div",{className:"section-timeline-4",children:jsxRuntimeExports.jsx("div",{className:"containercool-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_wrappercool-2",children:[jsxRuntimeExports.jsx("div",{className:"timeline_progresscool",children:jsxRuntimeExports.jsx("div",{className:"timeline_progress-barcool"})}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa61",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa62-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q1 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa65-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa67-718776cd",className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-xlarge",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Onboard 5,000 stakers to EgoDAO.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Launch of the Egoras Electric Vehicle (APEX).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Distribute EGAX block rewards to EgoDAO stakers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure listing on a Tier 2 exchange.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 250 tricycles through EgoPay using EGAX"]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa89",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa8a-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q2 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa8d-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Accumulate 50,000 Twitter followers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Reach 30,000 Telegram followers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Achieve 25,000 downloads of the EgoPay app.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Increase EGC & EGAX daily volume to 500,000 USD.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Begin mass production of the Egoras Electric Vehicle (APEX).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 300 tricycles through EgoPay using EGC & EGAX."]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa97",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa98-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q3 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa9b-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Sell 100 Egoras Electric Vehicles (APEX) using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure listings for EGC & EGAX on multiple Tier 2 exchanges.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Open 20 electric vehicle charging stations (charging fees payable with EGC & EGAX through EgoPay).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Grow Twitter following to 70,000.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 500 tricycles using EGC & EGAX through EgoPay."]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aaa4",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aaa5-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q4 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aaa8-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Open 40 additional electric vehicle charging stations (charging fees payable with EGC & EGAX through EgoPay).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 500 tricycles using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Achieve 100,000 downloads of the EgoPay app.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 400 Egoras Electric Vehicles (APEX) using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure a listing on a Tier 1 exchange."]})})})})]}),jsxRuntimeExports.jsx("div",{className:"overlay-fade-bottom-2"}),jsxRuntimeExports.jsx("div",{className:"overlay-fade-top-2"})]})})})})]}),RoadMapPage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"About"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1_para",children:["Egochain spearheads the revolution in next-generation electric vehicle technology through its pioneering decentralized operating system.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Leveraging the world's fastest blockchain specifically designed for real-world applications and readily deployable Web3 modules, Egochain fosters a robust ecosystem primed for mass adoption.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Its dApps boast unrivaled interoperability, scalability, and true decentralization, empowering millions to seamlessly integrate into the future of EV mobility."]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_2",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"home_div_section1_area_2_img"}),jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene"})]})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsx("section",{className:"egox_token_div_section2",children:jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_1_head",children:"Team"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_1_head_title",children:"Uniting to fuel a brighter tomorrow."}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_1_head_para",children:"Egochain is the product of Egoras Technologies, a team of over 200 dedicated full-time professionals led by this distinguished team below"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_card_body",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Prof Ndubuisi Ekekwe"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Board Chairman",jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links",children:[jsxRuntimeExports.jsx("a",{href:"https://en.wikipedia.org/wiki/Ndubuisi_Ekekwe",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx("img",{src:"/img/wiki_icon.png",alt:"",className:"egox_token_div_section2_area_body_cont1_links_link_img"})}),jsxRuntimeExports.jsx("a",{href:"https://twitter.com/ndekekwe?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$g,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})}),jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/ndubuisi-ekekwe-36068210",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Ugoji Harry"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["C.E.O & Founder",jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links",children:[jsxRuntimeExports.jsx("a",{href:"https://twitter.com/UgojiHarry",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$g,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})}),jsxRuntimeExports.jsx("a",{href:"https://ng.linkedin.com/in/harryugojiofficial",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Uzochukwu Igweneme"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Head of Human Resources(HR)",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://ng.linkedin.com/in/uzochukwu-igweneme?trk=public_profile_browsemap",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Isdore Ozuo"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Head Of Legal",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://ng.linkedin.com/in/isdore-ozuo-8ab21980?trk=public_profile_browsemap",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Onoseme (Moses) Mudiaga"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Head Of Media",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/onoseme-mudiaga-a3a5b05a/",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Ezigbo Odinaka"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Head Of Business Development",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/ezigbo-odinaka-vitalis-627570267/",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Ebri Goodness"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Lead Software Engineer",jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links",children:[jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/ebri-goodness-01a544209/?originalSubdomain=ng",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})}),jsxRuntimeExports.jsx("a",{href:"https://github.com/Ebrinix",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$d,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Ifeanyi Okwara"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Lead Frontend Engineer",jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links",children:[jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/samuel-ifeanyi-8a13481a9/",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})}),jsxRuntimeExports.jsx("a",{href:"https://github.com/cyntax-js",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$d,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Kingsley Goodluck"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Lead Backend Engineer",jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links",children:[jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/kingsley-goodluck-666401153/",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})}),jsxRuntimeExports.jsx("a",{href:"https://github.com/orgs/Hi-techsuite/people/itechsuite",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$d,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Franklin Obele"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Product Manager",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/franklin-obele-1572b6152/",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Chidubem Michael"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Full Stack Engineer / Lead Blockchain Developer",jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links",children:[jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/coda247/",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})}),jsxRuntimeExports.jsx("a",{href:"https://github.com/coda247",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$d,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Ajari Emmanuel"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Lead Robotics Egineer",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/ajari-emmanuel-7004a499/?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_card",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_title",children:"Chineleobi Adiele"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area_body_cont1_links_txt",children:["Lead Customer Care",jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_body_cont1_links",children:jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/chineleobi-adiele-430897169/?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app",className:"egox_token_div_section2_area_body_cont1_links_link",children:jsxRuntimeExports.jsx(default_1$1,{className:"egox_token_div_section2_area_body_cont1_links_link_icon"})})})]})]})]})]})})}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_title",children:"Road Map"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_body",children:jsxRuntimeExports.jsx(Roadmap,{})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse_roadmap"})]})]});var reactAmcharts4={},react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;var c=Object.getOwnPropertyNames(o).map(function(g){return o[g]});if(c.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(g){d[g]=g}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(e,o){for(var a,c=toObject(e),d,g=1;g<arguments.length;g++){a=Object(arguments[g]);for(var b in a)hasOwnProperty$1.call(a,b)&&(c[b]=a[b]);if(getOwnPropertySymbols){d=getOwnPropertySymbols(a);for(var j=0;j<d.length;j++)propIsEnumerable.call(a,d[j])&&(c[d[j]]=a[d[j]])}}return c};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n=typeof Symbol=="function"&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v$2=n?Symbol.for("react.provider"):60109,w$2=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,z=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,B=typeof Symbol=="function"&&Symbol.iterator;function C(e){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(e,o,a){this.props=e,this.context=o,this.refs=E,this.updater=a||D}F.prototype.isReactComponent={};F.prototype.setState=function(e,o){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(C(85));this.updater.enqueueSetState(this,e,o,"setState")};F.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function G(){}G.prototype=F.prototype;function H(e,o,a){this.props=e,this.context=o,this.refs=E,this.updater=a||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(e,o,a){var c,d={},g=null,b=null;if(o!=null)for(c in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(g=""+o.key),o)K.call(o,c)&&!L.hasOwnProperty(c)&&(d[c]=o[c]);var j=arguments.length-2;if(j===1)d.children=a;else if(1<j){for(var $=Array(j),_e=0;_e<j;_e++)$[_e]=arguments[_e+2];d.children=$}if(e&&e.defaultProps)for(c in j=e.defaultProps,j)d[c]===void 0&&(d[c]=j[c]);return{$$typeof:p,type:e,key:g,ref:b,props:d,_owner:J.current}}function N(e,o){return{$$typeof:p,type:e.type,key:o,ref:e.ref,props:e.props,_owner:e._owner}}function O(e){return typeof e=="object"&&e!==null&&e.$$typeof===p}function escape(e){var o={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(a){return o[a]})}var P=/\/+/g,Q=[];function R(e,o,a,c){if(Q.length){var d=Q.pop();return d.result=e,d.keyPrefix=o,d.func=a,d.context=c,d.count=0,d}return{result:e,keyPrefix:o,func:a,context:c,count:0}}function S(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Q.length&&Q.push(e)}function T(e,o,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case p:case q:g=!0}}if(g)return a(c,e,o===""?"."+U(e,0):o),1;if(g=0,o=o===""?".":o+":",Array.isArray(e))for(var b=0;b<e.length;b++){d=e[b];var j=o+U(d,b);g+=T(d,j,a,c)}else if(e===null||typeof e!="object"?j=null:(j=B&&e[B]||e["@@iterator"],j=typeof j=="function"?j:null),typeof j=="function")for(e=j.call(e),b=0;!(d=e.next()).done;)d=d.value,j=o+U(d,b++),g+=T(d,j,a,c);else if(d==="object")throw a=""+e,Error(C(31,a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a,""));return g}function V(e,o,a){return e==null?0:T(e,"",o,a)}function U(e,o){return typeof e=="object"&&e!==null&&e.key!=null?escape(e.key):o.toString(36)}function W(e,o){e.func.call(e.context,o,e.count++)}function aa(e,o,a){var c=e.result,d=e.keyPrefix;e=e.func.call(e.context,o,e.count++),Array.isArray(e)?X(e,c,a,function(g){return g}):e!=null&&(O(e)&&(e=N(e,d+(!e.key||o&&o.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+a)),c.push(e))}function X(e,o,a,c,d){var g="";a!=null&&(g=(""+a).replace(P,"$&/")+"/"),o=R(o,g,c,d),V(e,aa,o),S(o)}var Y={current:null};function Z(){var e=Y.current;if(e===null)throw Error(C(321));return e}var ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:function(e,o,a){if(e==null)return e;var c=[];return X(e,c,null,o,a),c},forEach:function(e,o,a){if(e==null)return e;o=R(null,null,o,a),V(e,W,o),S(o)},count:function(e){return V(e,function(){return null},null)},toArray:function(e){var o=[];return X(e,o,null,function(a){return a}),o},only:function(e){if(!O(e))throw Error(C(143));return e}};react_production_min.Component=F;react_production_min.Fragment=r;react_production_min.Profiler=u;react_production_min.PureComponent=H;react_production_min.StrictMode=t;react_production_min.Suspense=y;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;react_production_min.cloneElement=function(e,o,a){if(e==null)throw Error(C(267,e));var c=l({},e.props),d=e.key,g=e.ref,b=e._owner;if(o!=null){if(o.ref!==void 0&&(g=o.ref,b=J.current),o.key!==void 0&&(d=""+o.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for($ in o)K.call(o,$)&&!L.hasOwnProperty($)&&(c[$]=o[$]===void 0&&j!==void 0?j[$]:o[$])}var $=arguments.length-2;if($===1)c.children=a;else if(1<$){j=Array($);for(var _e=0;_e<$;_e++)j[_e]=arguments[_e+2];c.children=j}return{$$typeof:p,type:e.type,key:d,ref:g,props:c,_owner:b}};react_production_min.createContext=function(e,o){return o===void 0&&(o=null),e={$$typeof:w$2,_calculateChangedBits:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:v$2,_context:e},e.Consumer=e};react_production_min.createElement=M;react_production_min.createFactory=function(e){var o=M.bind(null,e);return o.type=e,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:x,render:e}};react_production_min.isValidElement=O;react_production_min.lazy=function(e){return{$$typeof:A,_ctor:e,_status:-1,_result:null}};react_production_min.memo=function(e,o){return{$$typeof:z,type:e,compare:o===void 0?null:o}};react_production_min.useCallback=function(e,o){return Z().useCallback(e,o)};react_production_min.useContext=function(e,o){return Z().useContext(e,o)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(e,o){return Z().useEffect(e,o)};react_production_min.useImperativeHandle=function(e,o,a){return Z().useImperativeHandle(e,o,a)};react_production_min.useLayoutEffect=function(e,o){return Z().useLayoutEffect(e,o)};react_production_min.useMemo=function(e,o){return Z().useMemo(e,o)};react_production_min.useReducer=function(e,o,a){return Z().useReducer(e,o,a)};react_production_min.useRef=function(e){return Z().useRef(e)};react_production_min.useState=function(e){return Z().useState(e)};react_production_min.version="16.14.0";react.exports=react_production_min;var reactExports=react.exports,extendStatics=function(e,o){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])},extendStatics(e,o)};function __extends(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics(e,o);function a(){this.constructor=e}e.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}var __assign$1=function(){return __assign$1=Object.assign||function(o){for(var a,c=1,d=arguments.length;c<d;c++){a=arguments[c];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(o[g]=a[g])}return o},__assign$1.apply(this,arguments)};function __awaiter(e,o,a,c){function d(g){return g instanceof a?g:new a(function(b){b(g)})}return new(a||(a=Promise))(function(g,b){function j(st){try{_e(c.next(st))}catch(rt){b(rt)}}function $(st){try{_e(c.throw(st))}catch(rt){b(rt)}}function _e(st){st.done?g(st.value):d(st.value).then(j,$)}_e((c=c.apply(e,o||[])).next())})}function __generator(e,o){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,d,g,b;return b={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function j(_e){return function(st){return $([_e,st])}}function $(_e){if(c)throw new TypeError("Generator is already executing.");for(;b&&(b=0,_e[0]&&(a=0)),a;)try{if(c=1,d&&(g=_e[0]&2?d.return:_e[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,_e[1])).done)return g;switch(d=0,g&&(_e=[_e[0]&2,g.value]),_e[0]){case 0:case 1:g=_e;break;case 4:return a.label++,{value:_e[1],done:!1};case 5:a.label++,d=_e[1],_e=[0];continue;case 7:_e=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(_e[0]===6||_e[0]===2)){a=0;continue}if(_e[0]===3&&(!g||_e[1]>g[0]&&_e[1]<g[3])){a.label=_e[1];break}if(_e[0]===6&&a.label<g[1]){a.label=g[1],g=_e;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(_e);break}g[2]&&a.ops.pop(),a.trys.pop();continue}_e=o.call(e,a)}catch(st){_e=[6,st],d=0}finally{c=g=0}if(_e[0]&5)throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}}function __values(e){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&e[o],c=0;if(a)return a.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&c>=e.length&&(e=void 0),{value:e&&e[c++],done:!e}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,o){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var c=a.call(e),d,g=[],b;try{for(;(o===void 0||o-- >0)&&!(d=c.next()).done;)g.push(d.value)}catch(j){b={error:j}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(b)throw b.error}}return g}function __spread(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(__read(arguments[o]));return e}typeof SuppressedError=="function"&&SuppressedError;var Percent=function(){function e(o){this._value=o}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return""+this._value+"%"},e}();function percent(e){return new Percent(e)}function isPercent(e){return e instanceof Percent}function isNaN$1(e){return Number(e)!==e}function getType(e){return{}.toString.call(e)}function getDefault(e,o){return e||o}function checkString(e){if(typeof e=="string")return!0;throw new Error("Expected a string but got "+getType(e))}function checkBoolean(e){if(typeof e=="boolean")return!0;throw new Error("Expected a boolean but got "+getType(e))}function checkNumber(e){if(typeof e=="number"){if(isNaN$1(e))throw new Error("Expected a number but got NaN")}else throw new Error("Expected a number but got "+getType(e));return!0}function checkObject(e){var o=getType(e);if(o==="[object Object]")return!0;throw new Error("Expected an object but got "+o)}function checkArray(e){if(Array.isArray(e))return!0;throw new Error("Expected an array but got "+getType(e))}function checkDate(e){var o=getType(e);if(o==="[object Date]")return!0;throw new Error("Expected a date but got "+o)}function castString(e){if(typeof e=="string")return e;if(typeof e=="number")return""+e;throw new Error("Expected a string or number but got "+getType(e))}function castNumber(e){if(typeof e=="string"){var o=+e;if(isNaN$1(o))throw new Error("Cannot cast string "+JSON.stringify(e)+" to a number");return o}else if(typeof e=="number"){if(isNaN$1(e))throw new Error("Expected a number but got NaN");return e}else{var a=getType(e);if(a==="[object Date]")return e.getTime();throw new Error("Expected a string, number, or date but got "+a)}}function toBoolean(e){return!!e}function toNumber(e){if(hasValue(e)&&!isNumber$1(e)){var o=Number(e);return isNaN$1(o)&&isString$1(e)&&e!=""?toNumber(e.replace(/[^0-9.\-]+/g,"")):o}return e}function toText(e){if(hasValue(e)&&!isString$1(e)){if(isNumber$1(e))return castString(e);if(isObject$1(e))return e.toString()}return e}function toNumberOrPercent(e){return!hasValue(e)||isNumber$1(e)||isPercent(e)?e:isString$1(e)&&e.indexOf("%")!=-1?percent(toNumber(e)):toNumber(e)}function hasValue(e){return e!=null}function getValue(e){if(hasValue(e))return e;throw new Error("Value doesn't exist")}function getValueDefault(e,o){return hasValue(e)?e:o}function isDate$1(e){return getType(e)==="[object Date]"}function isString$1(e){return typeof e=="string"}function isNumber$1(e){return typeof e=="number"&&Number(e)==e}function isObject$1(e){return typeof e=="object"&&e!=null}function isArray$1(e){return Array.isArray(e)}const Type=Object.freeze(Object.defineProperty({__proto__:null,castNumber,castString,checkArray,checkBoolean,checkDate,checkNumber,checkObject,checkString,getDefault,getType,getValue,getValueDefault,hasValue,isArray:isArray$1,isDate:isDate$1,isNaN:isNaN$1,isNumber:isNumber$1,isObject:isObject$1,isString:isString$1,toBoolean,toNumber,toNumberOrPercent,toText},Symbol.toStringTag,{value:"Module"}));var PI=Math.PI,HALFPI=PI/2,RADIANS=PI/180,DEGREES=180/PI;function toNumberRange(e,o,a){return hasValue(e)?(e=toNumber(e),fitToRange(e,o,a)):e}function round$1(e,o,a){if(!isNumber$1(o)||o<=0){var c=Math.round(e);return a&&c-e==.5&&c--,c}else{var d=Math.pow(10,o);return Math.round(e*d)/d}}function ceil(e,o){if(!isNumber$1(o)||o<=0)return Math.ceil(e);var a=Math.pow(10,o);return Math.ceil(e*a)/a}function stretch(e,o,a){return e*(a-o)+o}function fitToRange(e,o,a){if(isNumber$1(o)){if(isNumber$1(a)&&a<o){var c=a;a=o,o=c}e<o&&(e=o)}return isNumber$1(a)&&e>a&&(e=a),e}function sin(e){return round$1(Math.sin(RADIANS*e),10)}function tan(e){return round$1(Math.tan(RADIANS*e),10)}function cos(e){return round$1(Math.cos(RADIANS*e),10)}function max$1(e,o){return isNumber$1(e)?isNumber$1(o)&&o>e?o:e:isNumber$1(o)?o:null}function min$1(e,o){return isNumber$1(e)?isNumber$1(o)&&o<e?o:e:isNumber$1(o)?o:null}function closest(e,o){return e.reduce(function(a,c){return Math.abs(c-o)<Math.abs(a-o)?c:a})}function intersect(e,o){var a=getValue(e.start),c=getValue(o.start),d=getValue(e.end),g=getValue(o.end);return Math.max(a,c)<=Math.min(d,g)}function invertRange(e){var o=getValue(e.start),a=getValue(e.end);return{start:1-a,end:1-o}}function intersection(e,o){var a=getValue(e.start),c=getValue(o.start),d=getValue(e.end),g=getValue(o.end),b=Math.max(a,c),j=Math.min(d,g);if(!(j<b))return{start:b,end:j}}function getDistance(e,o){return e?(o||(o={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(e.x-o.x),2)+Math.pow(Math.abs(e.y-o.y),2))):0}function getHorizontalDistance(e,o){return e?(o||(o={x:0,y:0}),Math.abs(e.x-o.x)):0}function getVerticalDistance(e,o){return e?(o||(o={x:0,y:0}),Math.abs(e.y-o.y)):0}function getCubicCurveDistance(e,o,a,c,d){if(!e)return 0;o||(o={x:0,y:0});var g=0,b=e;if(d>0)for(var j=0;j<=d;j++){var $=getPointOnCubicCurve(e,o,a,c,j/d);g+=getDistance(b,$),b=$}return g}function getScale(e,o,a,c){var d=getDistance(o,c),g=getDistance(e,a);return Math.abs(g/d)}function getMidPoint(e,o,a){return isNumber$1(a)||(a=.5),{x:e.x+(o.x-e.x)*a,y:e.y+(o.y-e.y)*a}}function getRotation(e,o,a,c){var d=getAngle(o,c),g=getAngle(e,a),b=d-g;return b<0&&(b+=360),b}function getAngle(e,o){o||(o={x:e.x*2,y:e.y*2});var a=o.x-e.x,c=o.y-e.y,d=Math.atan2(c,a)*DEGREES;return d<0&&(d+=360),normalizeAngle(d)}function getCenterShift(e,o,a,c,d){var g=getRotation(o,a,c,d)-90;g<0&&(g+=360);var b=getDistance(o,c),j=Math.cos(g)/b+o.x,$=Math.cos(g)/b+o.y,_e={x:j-e.x,y:$-e.y};return _e}function getBBox(e){if(e){var o=e.length;if(o!==0){for(var a=void 0,c=void 0,d,g=void 0,b=0;b<o;b++){var j=e[b];(!isNumber$1(c)||j.x>c)&&(c=j.x),(!isNumber$1(a)||j.x<a)&&(a=j.x),(!isNumber$1(d)||j.y<d)&&(d=j.y),(!isNumber$1(g)||j.y>g)&&(g=j.y)}return{x:a,y:d,width:c-a,height:g-d}}}return{x:0,y:0,width:0,height:0}}function getCommonRectangle(e){var o=e.length;if(o!==0){for(var a=void 0,c=void 0,d=void 0,g=void 0,b=0;b<o;b++){var j=e[b];a=min$1(j.x,a),c=min$1(j.y,c),d=max$1(j.x+j.width,d),g=max$1(j.y+j.height,g)}return{x:a,y:c,width:d-a,height:g-c}}}function getPointOnQuadraticCurve(e,o,a,c){var d=(1-c)*(1-c)*e.x+2*(1-c)*c*a.x+c*c*o.x,g=(1-c)*(1-c)*e.y+2*(1-c)*c*a.y+c*c*o.y;return{x:d,y:g}}function getPointOnCubicCurve(e,o,a,c,d){var g={x:0,y:0},b=1-d,j=b*b,$=j*b;return g.x=e.x*$+a.x*3*j*d+c.x*3*b*d*d+o.x*d*d*d,g.y=e.y*$+a.y*3*j*d+c.y*3*b*d*d+o.y*d*d*d,g}function getCubicControlPointA(e,o,a,c,d,g){return d=adjustTension(d),g=adjustTension(g),{x:(-e.x+o.x/d+a.x)*d,y:(-e.y+o.y/g+a.y)*g}}function getCubicControlPointB(e,o,a,c,d,g){return d=adjustTension(d),g=adjustTension(g),{x:(o.x+a.x/d-c.x)*d,y:(o.y+a.y/g-c.y)*g}}function adjustTension(e){return 1-e+1e-5}function normalizeAngle(e){return e==360?360:e%360}function fitAngleToRange(e,o,a){if(o>a){var c=o;o=a,a=c}e=normalizeAngle(e);var d=(o-normalizeAngle(o))/360;e<o&&(e+=360*(d+1));var g=o+(a-o)/2+180,b=o+(a-o)/2-180;return e>a&&(e-360>o?e-=360:e<g?e=a:e=o),e<o&&(e>b?e=o:e=a),e}function getArcRect(e,o,a){var c=Number.MAX_VALUE,d=Number.MAX_VALUE,g=-Number.MAX_VALUE,b=-Number.MAX_VALUE,j=[];isNumber$1(a)||(a=1),j.push(getArcPoint(a,e)),j.push(getArcPoint(a,o));for(var $=Math.min(Math.floor(e/90)*90,Math.floor(o/90)*90),_e=Math.max(Math.ceil(e/90)*90,Math.ceil(o/90)*90),st=$;st<=_e;st+=90)st>=e&&st<=o&&j.push(getArcPoint(a,st));for(var rt=0;rt<j.length;rt++){var ut=j[rt];ut.x<c&&(c=ut.x),ut.y<d&&(d=ut.y),ut.x>g&&(g=ut.x),ut.y>b&&(b=ut.y)}return{x:c,y:d,width:g-c,height:b-d}}function getArcPoint(e,o){return{x:e*cos(o),y:e*sin(o)}}function isInRectangle(e,o){return e.x>=o.x&&e.x<=o.x+o.width&&e.y>=o.y&&e.y<=o.y+o.height}function getLineIntersection(e,o,a,c){var d=((e.x*o.y-o.x*e.y)*(a.x-c.x)-(e.x-o.x)*(a.x*c.y-a.y*c.x))/((e.x-o.x)*(a.y-c.y)-(e.y-o.y)*(a.x-c.x)),g=((e.x*o.y-o.x*e.y)*(a.y-c.y)-(e.y-o.y)*(a.x*c.y-a.y*c.x))/((e.x-o.x)*(a.y-c.y)-(e.y-o.y)*(a.x-c.x));return{x:d,y:g}}const Math$1=Object.freeze(Object.defineProperty({__proto__:null,DEGREES,HALFPI,PI,RADIANS,adjustTension,ceil,closest,cos,fitAngleToRange,fitToRange,getAngle,getArcPoint,getArcRect,getBBox,getCenterShift,getCommonRectangle,getCubicControlPointA,getCubicControlPointB,getCubicCurveDistance,getDistance,getHorizontalDistance,getLineIntersection,getMidPoint,getPointOnCubicCurve,getPointOnQuadraticCurve,getRotation,getScale,getVerticalDistance,intersect,intersection,invertRange,isInRectangle,max:max$1,min:min$1,normalizeAngle,round:round$1,sin,stretch,tan,toNumberRange},Symbol.toStringTag,{value:"Module"}));function indexOf(e,o){for(var a=e.length,c=0;c<a;++c)if(e[c]===o)return c;return-1}function any(e,o){for(var a=e.length,c=0;c<a;++c)if(o(e[c]))return!0;return!1}function map$1(e,o){for(var a=e.length,c=new Array(a),d=0;d<a;++d)c[d]=o(e[d],d);return c}function each$2(e,o){for(var a=e.length,c=0;c<a;++c)o(e[c],c)}function eachReverse(e,o){for(var a=e.length;a--;)o(e[a],a)}function eachContinue$2(e,o){for(var a=e.length,c=0;c<a&&o(e[c],c);++c);}function shiftLeft(e,o){for(var a=e.length,c=o;c<a;++c)e[c-o]=e[c];e.length=a-o}function last(e){var o=e.length;return o?e[o-1]:void 0}function first(e){return e[0]}function insert(e,o,a){a=fitToRange(a,0,e.length),e.splice(a,0,o)}function setIndex(e,o,a){remove(e,o),insert(e,o,a)}function pushAll(e,o){for(var a=o.length,c=0;c<a;++c)e.push(o[c])}function remove(e,o){var a=!1,c=e.indexOf(o);if(c!==-1){a=!0,e.splice(c,1);for(var d=e.length;c<d;)e[c]===o?(e.splice(c,1),--d):++c}return a}function move(e,o,a){var c=indexOf(e,o);c!==-1&&removeIndex(e,c),a==null?e.push(o):insertIndex(e,a,o)}function add$1(e,o,a){isNumber$1(a)?a===0?e.unshift(o):e.splice(a,0,o):e.push(o)}function replace(e,o,a){var c=e.indexOf(o);c!==-1&&e.splice(c,1),isNumber$1(a)?e.splice(a,0,o):e.push(o)}function toArray$2(e){return Array.isArray(e)?e:[e]}function has(e,o){return indexOf(e,o)!==-1}function copy$3(e){for(var o=e.length,a=new Array(o),c=0;c<o;++c)a[c]=e[c];return a}function slice(e,o,a){a===void 0&&(a=e.length);for(var c=new Array(a-o),d=o;d<a;++d)c[d-o]=e[d];return c}function insertIndex(e,o,a){e.splice(o,0,a)}function removeIndex(e,o){e.splice(o,1)}function getSortedIndex(e,o,a){for(var c=0,d=e.length,g=!1;c<d;){var b=c+d>>1,j=o(a,e[b]);j<0?d=b:(j===0&&(g=!0),c=b+1)}return{found:g,index:g?c-1:c}}function findIndex$1(e,o){for(var a=e.length,c=0;c<a;++c)if(o(e[c],c))return c;return-1}function find$1(e,o){var a=findIndex$1(e,o);if(a!==-1)return e[a]}function shuffle(e){for(var o=e.length,a,c;o!==0;)c=Math.floor(Math.random()*o),o-=1,a=e[o],e[o]=e[c],e[c]=a}function keepIf(e,o){for(var a=e.length,c=0;c<a;)o(e[c])?++c:(e.splice(c,1),--a)}const Array$1=Object.freeze(Object.defineProperty({__proto__:null,add:add$1,any,copy:copy$3,each:each$2,eachContinue:eachContinue$2,eachReverse,find:find$1,findIndex:findIndex$1,first,getSortedIndex,has,indexOf,insert,insertIndex,keepIf,last,map:map$1,move,pushAll,remove,removeIndex,replace,setIndex,shiftLeft,shuffle,slice,toArray:toArray$2},Symbol.toStringTag,{value:"Module"}));var Disposer=function(){function e(o){this._disposed=!1,this._dispose=o}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},e}(),MultiDisposer=function(e){__extends(o,e);function o(a){return e.call(this,function(){each$2(a,function(c){c.dispose()})})||this}return o}(Disposer),MutableValueDisposer=function(e){__extends(o,e);function o(){var a=e.call(this,function(){hasValue(a._disposer)&&(a._disposer.dispose(),a._disposer=void 0)})||this;return a}return o.prototype.get=function(){return this._value},o.prototype.set=function(a,c){hasValue(this._disposer)&&this._disposer.dispose(),this._disposer=c,this._value=a},o.prototype.reset=function(){this.set(void 0,void 0)},o}(Disposer),CounterDisposer=function(e){__extends(o,e);function o(){var a=e!==null&&e.apply(this,arguments)||this;return a._counter=0,a}return o.prototype.increment=function(){var a=this;return++this._counter,new Disposer(function(){--a._counter,a._counter===0&&a.dispose()})},o}(Disposer),pendingFrame=!1,nextQueue=[],readQueue=[],writeQueue=[],idleQueue=[],fps=1e3/60,raf=typeof requestAnimationFrame=="function"?function(e){requestAnimationFrame(e)}:function(e){setTimeout(e,fps)};function frameLoop(){for(var e=Date.now(),o=nextQueue.length,a=0;a<o;++a)nextQueue[a](e);shiftLeft(nextQueue,o);for(var a=0;a<readQueue.length;++a)readQueue[a](e);readQueue.length=0;for(var a=0;a<writeQueue.length;++a)writeQueue[a](e);writeQueue.length=0,nextQueue.length===0&&readQueue.length===0?pendingFrame=!1:raf(frameLoop)}function pendFrame(){pendingFrame||(pendingFrame=!0,raf(frameLoop))}function nextFrame(e){nextQueue.push(e),pendFrame()}function readFrame(e){readQueue.push(e),pendFrame()}function writeFrame(e){writeQueue.push(e),pendFrame()}function whenIdle(e){idleQueue.push(e)}function triggerIdle(){for(var e=Date.now(),o=idleQueue.length,a=0;a<o;++a)idleQueue.shift()(e)}var EventDispatcher=function(){function e(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var o=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{each$2(o,function(a){a.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}},e.prototype.hasListeners=function(){return this._listeners.length!==0},e.prototype.hasListenersByType=function(o){return any(this._listeners,function(a){return(a.type===null||a.type===o)&&!a.killed})},e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1},e.prototype.enableType=function(o){delete this._disabled[o]},e.prototype.disableType=function(o,a){a===void 0&&(a=1/0),this._disabled[o]=a},e.prototype._removeListener=function(o){if(this._iterating===0){var a=this._listeners.indexOf(o);if(a===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(a,1)}else this._killed.push(o)},e.prototype._removeExistingListener=function(o,a,c,d){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(function(g){g.once===o&&g.type===a&&(c==null||g.callback===c)&&g.context===d&&g.disposer.dispose()})},e.prototype.isEnabled=function(o){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(o)&&this._disabled[o]==null},e.prototype.has=function(o,a,c){var d=findIndex$1(this._listeners,function(g){return g.once!==!0&&g.type===o&&(a==null||g.callback===a)&&g.context===c});return d!==-1},e.prototype._shouldDispatch=function(o){if(this._disposed)throw new Error("EventDispatcher is disposed");var a=this._disabled[o];return isNumber$1(a)?(a<=1?delete this._disabled[o]:--this._disabled[o],!1):this._enabled},e.prototype._eachListener=function(o){var a=this;++this._iterating;try{each$2(this._listeners,o)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(each$2(this._killed,function(c){a._removeListener(c)}),this._killed.length=0)}},e.prototype.dispatchImmediately=function(o,a){this._shouldDispatch(o)&&this._eachListener(function(c){!c.killed&&(c.type===null||c.type===o)&&c.dispatch(o,a)})},e.prototype.dispatch=function(o,a){this._shouldDispatch(o)&&this._eachListener(function(c){!c.killed&&(c.type===null||c.type===o)&&whenIdle(function(){c.killed||c.dispatch(o,a)})})},e.prototype._on=function(o,a,c,d,g,b){var j=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(o,a,c,d);var $={type:a,callback:c,context:d,shouldClone:g,dispatch:b,killed:!1,once:o,disposer:new Disposer(function(){$.killed=!0,j._removeListener($)})};return this._listeners.push($),$},e.prototype.onAll=function(o,a,c){return c===void 0&&(c=!0),this._on(!1,null,o,a,c,function(d,g){return o.call(a,d,g)}).disposer},e.prototype.on=function(o,a,c,d){return d===void 0&&(d=!0),this._on(!1,o,a,c,d,function(g,b){return a.call(c,b)}).disposer},e.prototype.once=function(o,a,c,d){d===void 0&&(d=!0);var g=this._on(!0,o,a,c,d,function(b,j){g.disposer.dispose(),a.call(c,j)});return g.disposer},e.prototype.off=function(o,a,c){this._removeExistingListener(!1,o,a,c)},e.prototype.copyFrom=function(o){var a=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(o===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");each$2(o._listeners,function(c){!c.killed&&c.shouldClone&&(c.type===null?a.onAll(c.callback,c.context):c.once?a.once(c.type,c.callback,c.context):a.on(c.type,c.callback,c.context))})},e}(),TargetedEventDispatcher=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c.target=a,c}return o.prototype.copyFrom=function(a){var c=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(a===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");each$2(a._listeners,function(d){d.context!==a.target&&!d.killed&&d.shouldClone&&(d.type===null?c.onAll(d.callback,d.context):d.once?c.once(d.type,d.callback,d.context):c.on(d.type,d.callback,d.context))})},o}(EventDispatcher);function entries(e){return function(o){for(var a in e)if(hasKey(e,a)&&!o([a,e[a]]))break}}function keys(e){var o=[];for(var a in e)hasKey(e,a)&&o.push(a);return o}function keysOrdered(e,o){return keys(e).sort(o)}function hasKey(e,o){return{}.hasOwnProperty.call(e,o)}function getKey(e,o){return e[o]}function eachContinue$1(e,o){for(var a in e)if(hasKey(e,a)&&!o(a,e[a]))break}function each$1(e,o){eachContinue$1(e,function(a,c){return o(a,c),!0})}function eachOrdered(e,o,a){each$2(keysOrdered(e,a),function(c){o(c,e[c])})}function copy$2(e){return Object.assign({},e)}function merge$1(e,o){return Object.assign({},e,o)}function clone(e){return JSON.parse(JSON.stringify(e))}function copyProperties$1(e,o,a){each$2(a,function(c){hasValue(e[c])&&(o[c]=e[c])})}function softCopyProperties$1(e,o,a){each$2(a,function(c){hasValue(e[c])&&!hasValue(o[c])&&(o[c]=e[c])})}function forceCopyProperties(e,o,a){each$2(a,function(c){o[c]=e[c]})}function copyAllProperties(e,o){copyProperties$1(e,o,keys(e))}const Object$1=Object.freeze(Object.defineProperty({__proto__:null,clone,copy:copy$2,copyAllProperties,copyProperties:copyProperties$1,each:each$1,eachContinue:eachContinue$1,eachOrdered,entries,forceCopyProperties,getKey,hasKey,keys,keysOrdered,merge:merge$1,softCopyProperties:softCopyProperties$1},Symbol.toStringTag,{value:"Module"}));function fromArray(e){return function(o){for(var a=e.length,c=0;c<a&&o(e[c]);++c);}}function length(e){var o=0;return e(function(a){return++o,!0}),o}function toArray$1(e){var o=[];return e(function(a){return o.push(a),!0}),o}function eachContinue(e,o){e(o)}function each(e,o){e(function(a){return o(a),!0})}function sort(e,o){return fromArray(toArray$1(e).sort(o))}function map(e,o){return function(a){return e(function(c){return a(o(c))})}}function filter(e,o){return function(a){return e(function(c){return o(c)?a(c):!0})}}function concat(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return function(a){for(var c=!0,d=function(j){return c=a(j)},g=e.length,b=0;b<g&&(e[b](d),!!c);++b);}}function flatten(e){return function(o){var a=!0,c=function(d){return a=o(d)};e(function(d){return d(c),a})}}function indexed(e){return function(o){var a=0;e(function(c){return o([a++,c])})}}function findIndex(e,o){var a=!1,c=0;return e(function(d){return o(d)?(a=!0,!1):(++c,!0)}),a?c:-1}function find(e,o){var a;return e(function(c){return o(c)?(a=c,!1):!0}),a}function findMap(e,o){var a;return e(function(c){var d=o(c);return d!==null?(a=d,!1):!0}),a}function contains$1(e,o){var a=!1;return e(function(c){return o(c)?(a=!0,!1):!0}),a}function foldl(e,o,a){return e(function(c){return o=a(o,c),!0}),o}function min2(e,o){return e==null||o<e?o:e}function min(e){return foldl(e,null,min2)}function max2(e,o){return e==null||o>e?o:e}function max(e){return foldl(e,null,max2)}function join(e,o){o===void 0&&(o="");var a=!0,c="";return e(function(d){return a?a=!1:c+=o,c+=d,!0}),c}var ListIterator=function(){function e(o,a){this.createNewItems=!1,this.list=o,this._create=a,this.reset()}return e.prototype.reset=function(){this._listCopy=toArray$1(this.list.iterator())},e.prototype.clear=function(){this._listCopy.length=0},e.prototype.getFirst=function(){return this.returnItem(0)},e.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},e.prototype.find=function(o){var a=findIndex$1(this._listCopy,o);if(a!==-1){var c=this._listCopy[a];return remove(this._listCopy,c),c}else return this.getLast()},e.prototype.removeItem=function(o){return remove(this._listCopy,o)},e.prototype.returnItem=function(o){if(o>=0&&o<this._listCopy.length){var a=this._listCopy[o];return remove(this._listCopy,a),a}else if(this.createNewItems)return this._create()},e.prototype.iterator=function(){return fromArray(this._listCopy)},e}();const Iterator=Object.freeze(Object.defineProperty({__proto__:null,ListIterator,concat,contains:contains$1,each,eachContinue,filter,find,findIndex,findMap,flatten,foldl,fromArray,indexed,join,length,map,max,min,sort,toArray:toArray$1},Symbol.toStringTag,{value:"Module"}));function order$1(e,o){return e===o?0:e<o?-1:1}function repeat(e,o){return new Array(o+1).join(e)}function random$1(e){for(var o="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<e;c++)o+=a.charAt(Math.floor(Math.random()*a.length));return o}const String$1=Object.freeze(Object.defineProperty({__proto__:null,order:order$1,random:random$1,repeat},Symbol.toStringTag,{value:"Module"}));var DictionaryDisposer=function(e){__extends(o,e);function o(a){var c=this,d=a.events.on("removed",function(g){g.oldValue.dispose()},void 0,!1);return c=e.call(this,function(){d.dispose(),each(a.iterator(),function(g){var b=g[1];b.dispose()})})||this,c}return o}(Disposer),Dictionary=function(){function e(){this.events=new EventDispatcher,this._dictionary={}}return e.prototype.hasKey=function(o){return hasKey(this._dictionary,o)},e.prototype.getKey=function(o){return this._dictionary[o]},e.prototype.insertKey=function(o,a){if(hasKey(this._dictionary,o))throw new Error("Key "+o+" already exists in dictionary");this._dictionary[o]=a,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:o,newValue:a})},e.prototype.setKey=function(o,a){if(hasKey(this._dictionary,o)){var c=this._dictionary[o];c!==a&&(this._dictionary[o]=a,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:o,oldValue:c,newValue:a}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:c}))}else this._dictionary[o]=a,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:o,newValue:a})},e.prototype.updateKey=function(o,a){if(hasKey(this._dictionary,o)){var c=this._dictionary[o],d=a(c);c!==d&&(this._dictionary[o]=d,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:o,oldValue:c,newValue:d}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:c}))}else throw new Error("Key "+o+" doesn't exist in dictionary")},e.prototype.removeKey=function(o){if(hasKey(this._dictionary,o)){var a=this._dictionary[o];delete this._dictionary[o],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:o,oldValue:a}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:a})}},e.prototype.insertKeyIfEmpty=function(o,a){return this.hasKey(o)||this.insertKey(o,a()),this.getKey(o)},e.prototype.clear=function(){var o=this;this.events.isEnabled("removed")&&each$1(this._dictionary,function(a,c){o.events.dispatchImmediately("removed",{type:"removed",target:o,oldValue:c})}),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},e.prototype.copyFrom=function(o){var a=this;each(o.iterator(),function(c){a.setKey(c[0],c[1])})},e.prototype.iterator=function(){return entries(this._dictionary)},e.prototype[Symbol.iterator]=function(){var o,a,c,d;return __generator(this,function(g){switch(g.label){case 0:o=[];for(a in this._dictionary)o.push(a);c=0,g.label=1;case 1:return c<o.length?(d=o[c],hasKey(this._dictionary,d)?[4,[d,this._dictionary[d]]]:[3,3]):[3,4];case 2:g.sent(),g.label=3;case 3:return c++,[3,1];case 4:return[2]}})},e.prototype.each=function(o){each(this.iterator(),function(a){var c=__read(a,2),d=c[0],g=c[1];return o(d,g)})},e.prototype.sortedIterator=function(){return sort(this.iterator(),function(o,a){return order$1(o[0],a[0])})},e}(),DictionaryTemplate=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c.template=a,c}return Object.defineProperty(o.prototype,"template",{get:function(){return this._template},set:function(a){a.isTemplate=!0,this._template=a},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;each(a.iterator(),function(d){c.setKey(d[0],d[1].clone())})},o.prototype.create=function(a){var c=this;return this.insertKeyIfEmpty(a,function(){return c.template.clone()})},o}(Dictionary),Cache=function(){function e(){this._storage=new Dictionary,this.ttl=1e3}return e.prototype.set=function(o,a,c,d){var g=this._storage.insertKeyIfEmpty(o,function(){return new Dictionary}),b={touched:new Date().getTime(),ttl:isNumber$1(d)?d:this.ttl,value:c};g.setKey(a,b)},e.prototype.get=function(o,a,c){if(c===void 0&&(c=void 0),this._storage.hasKey(o)){var d=this._storage.getKey(o);if(d.hasKey(a)){var g=d.getKey(a);return g.ttl&&g.touched+g.ttl<new Date().getTime()&&(g.expired=!0),g.expired?(d.removeKey(a),c):g.value}else return c}else return c},e.prototype.clear=function(o){o?this._storage.removeKey(o):this._storage.clear()},e}(),cache=new Cache,Registry=function(){function e(){var o=this;this.events=new EventDispatcher,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],typeof addEventListener<"u"&&(addEventListener("beforeprint",function(){each$2(o.baseSprites,function(a){var c=a.paper.svg;c.setAttribute("viewBox","0 0 "+c.clientWidth+" "+c.clientHeight)})}),addEventListener("afterprint",function(){each$2(o.baseSprites,function(a){var c=a.paper.svg;c.removeAttribute("viewBox")})}))}return e.prototype.getUniqueId=function(){var o=this._uidCount;return this._uidCount+=1,"id-"+o},Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new Dictionary),this._map},enumerable:!0,configurable:!0}),e.prototype.setCache=function(o,a,c){cache.set(this.uid,o,a,c)},e.prototype.getCache=function(o,a){return a===void 0&&(a=void 0),cache.get(this.uid,o,a)},e.prototype.dispatch=function(o,a){this.events.isEnabled(o)&&(a?(a.type=o,a.target=a.target||this,this.events.dispatch(o,{type:o,target:this})):this.events.dispatch(o,{type:o,target:this}))},e.prototype.dispatchImmediately=function(o,a){this.events.isEnabled(o)&&(a?(a.type=o,a.target=a.target||this,this.events.dispatchImmediately(o,a)):this.events.dispatchImmediately(o,{type:o,target:this}))},e.prototype.getPlaceholder=function(o){return hasValue(this._placeholders[o])?this._placeholders[o]:(this._placeholders[o]="__amcharts_"+o+"_"+random$1(8)+"__",this._placeholders[o])},e.prototype.addToInvalidComponents=function(o){o.baseId?move(this.invalidDatas[o.baseId],o):move(this.invalidDatas.noBase,o)},e.prototype.removeFromInvalidComponents=function(o){o.baseId&&remove(this.invalidDatas[o.baseId],o),remove(this.invalidDatas.noBase,o)},e.prototype.addToInvalidSprites=function(o){o.baseId?add$1(this.invalidSprites[o.baseId],o):add$1(this.invalidSprites.noBase,o)},e.prototype.removeFromInvalidSprites=function(o){o.baseId&&remove(this.invalidSprites[o.baseId],o),remove(this.invalidSprites.noBase,o)},e.prototype.addToInvalidPositions=function(o){o.baseId?add$1(this.invalidPositions[o.baseId],o):add$1(this.invalidPositions.noBase,o)},e.prototype.removeFromInvalidPositions=function(o){o.baseId&&remove(this.invalidPositions[o.baseId],o),remove(this.invalidPositions.noBase,o)},e.prototype.addToInvalidLayouts=function(o){o.baseId?add$1(this.invalidLayouts[o.baseId],o):add$1(this.invalidLayouts.noBase,o)},e.prototype.removeFromInvalidLayouts=function(o){o.baseId&&remove(this.invalidLayouts[o.baseId],o),remove(this.invalidLayouts.noBase,o)},e}(),registry=new Registry;function is(e,o){var a=registry.registeredClasses[o];return a!=null&&e instanceof a}var IndexedIterable=function(){function e(o,a,c){this._array=o,this._start=a,this._end=c}return e.prototype.iterator=function(){var o=this;return function(a){if(o._start!==o._end)if(o._start<o._end)for(var c=o._start;c<o._end&&a(o._array[c]);++c);else for(var c=o._start-1;c>=o._end&&a(o._array[c]);--c);}},e.prototype.backwards=function(){return new e(this._array,this._end,this._start)},e.prototype.range=function(o,a){if(o<=a){if(this._start===this._end)return this;if(this._start<this._end){var c=a-o;return o=Math.max(this._start+o,this._start),a=Math.min(o+c,this._end),new e(this._array,o,a)}else{var c=a-o;return o=Math.max(this._start-o,this._end),a=Math.max(o-c,this._end),new e(this._array,o,a)}}else throw new Error("Start index must be lower than end index")},e}(),ListGrouper=function(e){__extends(o,e);function o(a,c,d){var g=e.call(this,[a.events.on("inserted",function(b){var j=b.newValue,$=g._getKey(j),_e=0;eachContinue(a.iterator(),function(st){return st===j?!1:(g._getKey(st)===$&&++_e,!0)}),g._insert(j,$,_e)},void 0,!1),a.events.on("removed",function(b){g._remove(b.oldValue)},void 0,!1)])||this;return g._keys=[],g._groups={},g._getKey=c,g._sort=d,each(a.iterator(),function(b){g._insert(b,c(b))}),g}return o.prototype._insert=function(a,c,d){if(this._groups[c]==null){this._groups[c]=[];var g=getSortedIndex(this._keys,this._sort,c),b=g.found,j=g.index;if(b)throw new Error("Key already exists: "+c);insertIndex(this._keys,j,c)}d==null?this._groups[c].push(a):insertIndex(this._groups[c],d,a)},o.prototype._remove=function(a){var c=this._getKey(a),d=this._groups[c];if(d!=null&&(remove(d,a),d.length===0)){delete this._groups[c];var g=getSortedIndex(this._keys,this._sort,c),b=g.found,j=g.index;if(b)removeIndex(this._keys,j);else throw new Error("Key doesn't exist: "+c)}},o.prototype.iterator=function(){var a=this;return flatten(map(fromArray(this._keys),function(c){return fromArray(a._groups[c])}))},o}(MultiDisposer),ListDisposer=function(e){__extends(o,e);function o(a,c){c===void 0&&(c=!0);var d=this;if(c){var g=a.events.on("removed",function(b){b.oldValue.dispose()},void 0,!1);d=e.call(this,function(){g.dispose(),each(a.iterator(),function(b){b.dispose()})})||this}else d=e.call(this,function(){each(a.iterator(),function(b){b.dispose()})})||this;return d}return o}(Disposer);function checkBounds(e,o){if(!(e>=0&&e<o))throw new Error("Index out of bounds: "+e)}var List=function(){function e(o){o===void 0&&(o=[]),this.events=new EventDispatcher,this._values=o}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype.contains=function(o){return this._values.indexOf(o)!==-1},e.prototype.removeValue=function(o){for(var a=0,c=this._values.length;a<c;)this._values[a]===o?(this.removeIndex(a),--c):++a},e.prototype.indexOf=function(o){return indexOf(this._values,o)},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.hasIndex=function(o){return o>=0&&o<this._values.length},e.prototype.getIndex=function(o){return this._values[o]},e.prototype.setIndex=function(o,a){checkBounds(o,this._values.length);var c=this._values[o];return c!==a&&(this._values[o]=a,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:o,oldValue:c,newValue:a}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:c}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:a})),c},e.prototype.insertIndex=function(o,a){checkBounds(o,this._values.length+1),insertIndex(this._values,o,a),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:o,newValue:a}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:a})},e.prototype._sortQuicksort=function(o,a,c){if(o<a){var d=this._sortPartition(o,a,c);this._sortQuicksort(o,d,c),this._sortQuicksort(d+1,a,c)}},e.prototype._sortPartition=function(o,a,c){for(var d=this._values,g=d[o],b=o-1,j=a+1;;){do++b;while(c(d[b],g)<0);do--j;while(c(d[j],g)>0);if(b>=j)return j;this.swap(b,j)}},e.prototype.sort=function(o){this._sortQuicksort(0,this._values.length-1,o)},e.prototype.swap=function(o,a){var c=this._values.length;if(checkBounds(o,c),checkBounds(a,c),o!==a){var d=this._values[o],g=this._values[a];this._values[o]=g,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:o,oldValue:d,newValue:g}),this._values[a]=d,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:a,oldValue:g,newValue:d})}},e.prototype.removeIndex=function(o){checkBounds(o,this._values.length);var a=this._values[o];return removeIndex(this._values,o),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:o,oldValue:a}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:a}),a},e.prototype.moveValue=function(o,a){var c=this.indexOf(o);if(c!==-1){var d=this._values[c];removeIndex(this._values,c),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:c,oldValue:d})}a==null?(a=this._values.length,this._values.push(o)):insertIndex(this._values,a,o),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:a,newValue:o}),c===-1&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:o})},e.prototype.push=function(o){var a=this._values.push(o)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:a,newValue:o}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:o}),o},e.prototype.unshift=function(o){this.insertIndex(0,o)},e.prototype.pushAll=function(o){var a=this;each$2(o,function(c){a.push(c)})},e.prototype.copyFrom=function(o){this.pushAll(o._values)},e.prototype.pop=function(){var o=this._values.length-1;return o<0?void 0:this.removeIndex(this._values.length-1)},e.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},e.prototype.setAll=function(o){var a=this,c=copy$3(this._values);this._values.length=0,each$2(o,function(d){a._values.push(d)}),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:c,newArray:this._values}),this.events.isEnabled("removed")&&each$2(c,function(d){a.events.dispatchImmediately("removed",{type:"removed",target:a,oldValue:d})}),this.events.isEnabled("inserted")&&each$2(this._values,function(d){a.events.dispatchImmediately("inserted",{type:"inserted",target:a,newValue:d})})},e.prototype.clear=function(){this.setAll([])},e.prototype.iterator=function(){return fromArray(this._values)},e.prototype[Symbol.iterator]=function(){var o,a;return __generator(this,function(c){switch(c.label){case 0:o=this._values.length,a=0,c.label=1;case 1:return a<o?[4,this._values[a]]:[3,4];case 2:c.sent(),c.label=3;case 3:return++a,[3,1];case 4:return[2]}})},e.prototype.each=function(o){each$2(this._values,o)},e.prototype.range=function(o,a){if(o<=a){var c=a-o;return o=Math.max(o,0),a=Math.min(o+c,this._values.length),new IndexedIterable(this._values,o,a)}else throw new Error("Start index must be lower than end index")},e.prototype.backwards=function(){return new IndexedIterable(this._values,this._values.length,0)},e}(),ListTemplate=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c.template=a,c}return Object.defineProperty(o.prototype,"template",{get:function(){return this._template},set:function(a){a.isTemplate=!0,this._template=a},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;each(a.iterator(),function(d){c.push(d.clone())})},o.prototype.create=function(a){var c=a!=null?new a:this.template.clone();return this.push(c),c},o.prototype.clone=function(){for(var a=new o(this.template),c=this.values,d=c.length,g=0;g<d;++g)a.push(c[g].clone());return a},o}(List),OrderedList=function(){function e(o){this._values=[],this.events=new EventDispatcher,o!=null&&this.setAll(o)}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype._insert=function(o){return this._values.push(o),this._values.length-1},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(o){return indexOf(this._values,o)},e.prototype.contains=function(o){return this.indexOf(o)!==-1},e.prototype.getIndex=function(o){return this._values[o]},Object.defineProperty(e.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),e.prototype.insert=function(o){var a=this._insert(o);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:a,newValue:o})},e.prototype.remove=function(o){var a=this.indexOf(o);if(a!==-1){var c=this._values[a];removeIndex(this._values,a),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:a,oldValue:c})}},e.prototype.setAll=function(o){var a=this;eachReverse(this._values,function(c,d){a._values.pop(),a.events.isEnabled("removed")&&a.events.dispatchImmediately("removed",{type:"removed",target:a,index:d,oldValue:c})}),each$2(o,function(c){a.insert(c)})},e.prototype.clear=function(){this.setAll([])},e.prototype.slice=function(o,a){var c=new e;return c._values=this._values.slice(o,a),c},e.prototype.findClosestIndex=function(o,a,c){c===void 0&&(c="any");var d=-1,g,b,j=0;return eachContinue(this.iterator(),function($){var _e=a($);if(c==="any"){if(_e===o)return d=j,!1;var st=Math.abs(o-_e);(!hasValue(b)||b>st)&&(d=j,g=_e,b=st)}else c==="left"&&_e<o?(!hasValue(g)||g<_e)&&(d=j,g=_e):c==="right"&&_e>=o&&(!hasValue(g)||g>=_e)&&(d=j,g=_e);return++j,!0}),d===-1&&(c==="left"?d=0:c==="right"&&(d=this.length-1)),d},e.prototype.iterator=function(){return fromArray(this._values)},e.prototype[Symbol.iterator]=function(){var o,a;return __generator(this,function(c){switch(c.label){case 0:o=this._values.length,a=0,c.label=1;case 1:return a<o?[4,this._values[a]]:[3,4];case 2:c.sent(),c.label=3;case 3:return++a,[3,1];case 4:return[2]}})},e.prototype.each=function(o){each$2(this._values,o)},e}(),SortedList=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c._ordering=a,c}return o.prototype._insert=function(a){var c=getSortedIndex(this._values,this._ordering,a).index;return insertIndex(this._values,c,a),c},o.prototype.indexOf=function(a){var c=getSortedIndex(this._values,this._ordering,a),d=c.found,g=c.index;return d?g:-1},o.prototype.update=function(a){var c=indexOf(this._values,a);if(c!==-1){var d=this._values.length-1;(c===0||this._ordering(this._values[c-1],a)<0)&&(c===d||this._ordering(a,this._values[c+1])<0)||(removeIndex(this._values,c),this._insert(a))}},o}(OrderedList),OrderedListTemplate=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c.template=a,c}return Object.defineProperty(o.prototype,"template",{get:function(){return this._template},set:function(a){a.isTemplate=!0,this._template=a},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;each(a.iterator(),function(d){c.insert(d.clone())})},o.prototype.slice=function(a,c){var d=new o(this.template);return d._values=this._values.slice(a,c),d},o.prototype.create=function(a){var c=a!=null?new a:this.template.clone();return this.insert(c),c},o}(OrderedList),SortedListTemplate=function(e){__extends(o,e);function o(a,c){var d=e.call(this,c)||this;return d.template=a,d}return Object.defineProperty(o.prototype,"template",{get:function(){return this._template},set:function(a){a.isTemplate=!0,this._template=a},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;each(a.iterator(),function(d){c.insert(d.clone())})},o.prototype.create=function(a){var c=a!=null?new a:this.template.clone();return this.insert(c),c},o}(SortedList);function order(e,o){return e===o?0:e<o?-1:1}const Number$1=Object.freeze(Object.defineProperty({__proto__:null,order},Symbol.toStringTag,{value:"Module"}));function reverse(e){switch(e){case 0:return 0;case-1:return 1;case 1:return-1}}function or(e,o){return e===0?o:e}var GlobalAdapter=function(){function e(){this._callbackId=0,this._callbacks=new SortedList(function(o,a){return or(order(o.priority,a.priority),order(o.id,a.id))})}return e.prototype.addAll=function(o,a,c,d,g){d===void 0&&(d=0),this._callbacks.insert({id:++this._callbackId,key:a,callback:c,priority:d,scope:g,type:o})},e.prototype.isEnabled=function(o,a){return any(this._callbacks.values,function(c){return c.key===a&&o instanceof c.type})},e.prototype.applyAll=function(o,a,c){var d=this._callbacks.values,g=d.length;if(g==0)return c;for(var b=0;b<g;++b){var j=d[b];j.key===a&&o instanceof j.type&&(c=j.callback.call(j.scope,c,o,a))}return c},e}(),globalAdapter=new GlobalAdapter,Adapter=function(){function e(o){this._callbackId=0,this._callbacks=new SortedList(function(a,c){return or(order(a.priority,c.priority),order(a.id,c.id))}),this._disabled={},this.object=o,this.events=this._callbacks.events}return e.prototype.add=function(o,a,c,d){c===void 0&&(c=0),this._callbacks.insert({id:++this._callbackId,key:o,callback:a,priority:c,scope:d})},e.prototype.has=function(o,a,c,d){return c===void 0&&(c=0),contains$1(this._callbacks.iterator(),function(g){return g.key===o&&g.callback===a&&g.priority===c&&g.scope===d})},e.prototype.remove=function(o,a){var c=this;each$2(toArray$1(this._callbacks.iterator()),function(d){d.key===o&&(!isNumber$1(a)||a===d.priority)&&c._callbacks.remove(d)})},e.prototype.enableKey=function(o){delete this._disabled[o]},e.prototype.disableKey=function(o,a){a===void 0&&(a=1/0),this._disabled[o]=a},e.prototype._hasListenersByType=function(o){return any(this._callbacks.values,function(a){return a.key===o})},e.prototype.isEnabled=function(o){return this._disabled[o]==null&&(this._hasListenersByType(o)||globalAdapter.isEnabled(this.object,o))},e.prototype._shouldDispatch=function(o){var a=this._disabled[o];return isNumber$1(a)?(a<=1?delete this._disabled[o]:--this._disabled[o],!1):!0},e.prototype.apply=function(o,a){if(this._shouldDispatch(o)){var c=this._callbacks.values,d=c.length;if(d>0)for(var g=0;g<d;++g){var b=c[g];b.key===o&&(a=b.callback.call(b.scope,a,this.object,o))}return a=globalAdapter.applyAll(this.object,o,a),a}else return a},e.prototype.keys=function(){return toArray$1(map(this._callbacks.iterator(),function(o){return o.key}))},e.prototype.copyFrom=function(o){var a=this;each(o._callbacks.iterator(),function(c){a.add(c.key,c.callback,c.priority,c.scope)}),each$1(o._disabled,function(c,d){a._disabled[c]=d})},e.prototype.clear=function(){this._callbacks.clear()},e}(),namedColors={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function rgb(e,o){var a;return namedColors[e]?a=namedColors[e]:e.charAt(0)==="#"?a=hexToRgb(e):e.match(/^rgba?\(/)&&(a=rgbaToRgb(e)),a||(a={r:0,g:0,b:0,a:1}),hasValue(o)&&(a.a=o),a}function hexToRgb(e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(o,function(c,d,g,b){return d+d+g+g+b+b});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:hexToRgbWithAlpha(e)}function hexToRgbWithAlpha(e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(o,function(c,d,g,b,j){return d+d+g+g+b+b+j+j});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),a:parseInt(a[4],16)/256}:void 0}function rgbaToRgb(e){e=e.replace(/[ ]/g,"");var o=e.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(o)o.push("1");else if(o=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!o)return;return{r:parseInt(o[1]),g:parseInt(o[2]),b:parseInt(o[3]),a:parseFloat(o[4])}}function rgbToHex(e){return"#"+pad2(e.r.toString(16))+pad2(e.g.toString(16))+pad2(e.b.toString(16))}function rgbToRGBA(e){return hasValue(e.a)&&e.a!==1?"rgba("+e.r+","+e.g+","+e.b+","+e.a+")":"rgb("+e.r+","+e.g+","+e.b+")"}function pad2(e){return e.length==1?"0"+e:""+e}function interpolate(e,o,a){return a=fitToRange(a,0,1),e?o?{r:e.r+Math.round((o.r-e.r)*a),g:e.g+Math.round((o.g-e.g)*a),b:e.b+Math.round((o.b-e.b)*a),a:(e.a||1)+Math.round(((o.a||1)-(e.a||1))*a)}:e:o||e}function lighten(e,o){return e&&{r:Math.max(0,Math.min(255,e.r+getLightnessStep(e.r,o))),g:Math.max(0,Math.min(255,e.g+getLightnessStep(e.g,o))),b:Math.max(0,Math.min(255,e.b+getLightnessStep(e.b,o))),a:e.a}}function getLightnessStep(e,o){var a=o>0?255-e:e;return Math.round(a*o)}function brighten(e,o){if(e){var a=Math.min(Math.max(e.r,e.g,e.b),230),c=getLightnessStep(a,o);return{r:Math.max(0,Math.min(255,Math.round(e.r+c))),g:Math.max(0,Math.min(255,Math.round(e.g+c))),b:Math.max(0,Math.min(255,Math.round(e.b+c))),a:e.a}}else return e}function getBrightnessStep(e,o){var a=255;return Math.round(a*o)}function saturate(e,o){if(e==null||o==1)return e;var a=rgbToHsl(e);return a.s=o,hslToRgb(a)}function hslToRgb(e){var o,a,c,d=e.h,g=e.s,b=e.l;if(g==0)o=a=c=b;else{var j=function(rt,ut,gt){return gt<0&&(gt+=1),gt>1&&(gt-=1),gt<.16666666666666666?rt+(ut-rt)*6*gt:gt<.5?ut:gt<.6666666666666666?rt+(ut-rt)*(.6666666666666666-gt)*6:rt},$=b<.5?b*(1+g):b+g-b*g,_e=2*b-$;o=j(_e,$,d+1/3),a=j(_e,$,d),c=j(_e,$,d-1/3)}return{r:Math.round(o*255),g:Math.round(a*255),b:Math.round(c*255)}}function rgbToHsl(e){var o=e.r/255,a=e.g/255,c=e.b/255,d=Math.max(o,a,c),g=Math.min(o,a,c),b=0,j=0,$=(d+g)/2;if(d===g)b=j=0;else{var _e=d-g;switch(j=$>.5?_e/(2-d-g):_e/(d+g),d){case o:b=(a-c)/_e+(a<c?6:0);break;case a:b=(c-o)/_e+2;break;case c:b=(o-a)/_e+4;break}b/=6}return{h:b,s:j,l:$}}function rgbToHsv(e){var o=e.r/255,a=e.g/255,c=e.b/255,d=Math.max(o,a,c),g=Math.min(o,a,c),b=0,j=0,$=d,_e=d-g;if(j=d==0?0:_e/d,d==g)b=0;else{switch(d){case o:b=(a-c)/_e+(a<c?6:0);break;case a:b=(c-o)/_e+2;break;case c:b=(o-a)/_e+4;break}b/=6}return{h:b,s:j,v:$}}function hsvToRgb(e){var o=0,a=0,c=0,d=e.h,g=e.s,b=e.v,j=Math.floor(d*6),$=d*6-j,_e=b*(1-g),st=b*(1-$*g),rt=b*(1-(1-$)*g);switch(j%6){case 0:o=b,a=rt,c=_e;break;case 1:o=st,a=b,c=_e;break;case 2:o=_e,a=b,c=rt;break;case 3:o=_e,a=st,c=b;break;case 4:o=rt,a=_e,c=b;break;case 5:o=b,a=_e,c=st;break}return{r:Math.round(o*255),g:Math.round(a*255),b:Math.round(c*255)}}function isLight(e){return(e.r*299+e.g*587+e.b*114)/1e3>=128}const Colors=Object.freeze(Object.defineProperty({__proto__:null,brighten,getBrightnessStep,getLightnessStep,hexToRgb,hexToRgbWithAlpha,hslToRgb,hsvToRgb,interpolate,isLight,lighten,pad2,rgb,rgbToHex,rgbToHsl,rgbToHsv,rgbToRGBA,rgbaToRgb,saturate},Symbol.toStringTag,{value:"Module"}));var Color=function(){function e(o){this._value=o}return Object.defineProperty(e.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._value?rgbToHex(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rgba",{get:function(){return this._value?rgbToRGBA(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._value!=null&&this._value.a!=null?this._value.a:1},set:function(o){this._value&&(this._value.a=o)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new e({r:255,g:255,b:255})),this._lightColor},set:function(o){this._lightColor=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new e({r:0,g:0,b:0})),this._darkColor},set:function(o){this._darkColor=o},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},e.prototype.lighten=function(o){return new e(lighten(this.rgb,o))},e.prototype.brighten=function(o){return new e(brighten(this.rgb,o))},e.prototype.saturate=function(o){return new e(saturate(this.rgb,o))},Object.defineProperty(e.prototype,"alternative",{get:function(){if(this.rgb!=null)return isLight(this.rgb)?this.darkColor:this.lightColor;throw new Error("Color does not exist")},enumerable:!0,configurable:!0}),e}();function color(e,o){if(!hasValue(e))return new Color(void 0);if(typeof e=="string"){var a="_color_"+e+"_"+(o||"1"),c=registry.getCache(a);if(c)return new Color({r:c.r,g:c.g,b:c.b,a:c.a});var d=rgb(e,o);return registry.setCache(a,d),new Color(d)}return e instanceof Color?(hasValue(o)&&(e.alpha=o),e):new Color(e)}function isColor(e){return e instanceof Color}function castColor(e){return color(e)}function toColor(e){return hasValue(e)&&!isColor(e)?castColor(e):e}var BaseObject=function(){function e(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return e.prototype.debug=function(){},Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid||(this._uid=registry.getUniqueId(),registry.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(o){this._id=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new Dictionary),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new Dictionary),this._delayedMap},enumerable:!0,configurable:!0}),e.prototype.addDelayedMap=function(o,a){var c=this.delayedMap;c.hasKey(a)||c.setKey(a,[]);var d=c.getKey(a);d.push({property:o,target:this})},e.prototype.processDelayedMap=function(){var o=this;this.delayedMap.each(function(a,c){if(o.map.hasKey(a)){var d=o.map.getKey(a);each$2(c,function(g){g.target[g.property]=d}),o.delayedMap.removeKey(a)}})},e.prototype.applyTheme=function(){var o=this;if(registry){var a=this.getCurrentThemes();a&&each$2(a,function(c,d){c(o)})}},Object.defineProperty(e.prototype,"themes",{get:function(){return this._themes},set:function(o){this._themes=o},enumerable:!0,configurable:!0}),e.prototype.getCurrentThemes=function(){return this.themes||registry.themes},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var o=this._disposers;for(this._disposers=null;o.length!==0;){var a=o.shift();a.dispose()}this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var c=this._uid;c!=null&&registry.map.removeKey(c)}},e.prototype.addDisposer=function(o){this._disposers.push(o)},e.prototype.removeDispose=function(o){if(!this._disposed){var a=indexOf(this._disposers,o);a>-1&&this._disposers.splice(a,1)}o.dispose()},e.prototype.clone=function(o){o||(o="clone-"+registry.getUniqueId());var a=new this.constructor;return a.cloneId=o,a.copyFrom(this),a},Object.defineProperty(e.prototype,"clones",{get:function(){return this._clones||(this._clones=new List),this._clones},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(o){o.clones.push(this),this.clonedFrom=o},Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(o){this._className=o},enumerable:!0,configurable:!0}),e.prototype.setCache=function(o,a,c){cache.set(this.uid,o,a,c)},e.prototype.getCache=function(o,a){return a===void 0&&(a=void 0),cache.get(this.uid,o,a)},e.prototype.clearCache=function(){cache.clear(this.uid)},e.prototype.setTimeout=function(o,a){var c=this,d=setTimeout(function(){c.removeDispose(g),o()},a),g=new Disposer(function(){clearTimeout(d)});return this._disposers.push(g),g},e.prototype.setInterval=function(o,a){var c=this,d=setInterval(function(){c.removeDispose(g),o()},a),g=new Disposer(function(){clearTimeout(d)});return this._disposers.push(g),g},Object.defineProperty(e.prototype,"config",{set:function(o){try{this.processConfig(o)}catch(a){this.raiseCriticalError(a)}},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(o){var a=this;if(o){var c=this;if(eachOrdered(o,function(g,b){var j=b;if(g=="callback"&&typeof b=="function"&&b.call(c),a.hasProperty(g)){var $;if(isObject$1(j)&&hasValue(j.type)&&(!isObject$1(c[g])||!hasValue(c[g].className)||j.forceCreate||c[g].className!=j.type)&&!a.asIs(g)?($=a.createClassInstance(j.type),$?c[g]=$:$=c[g]):$=c[g],$ instanceof Adapter)a.processAdapters($,j);else if($ instanceof EventDispatcher)a.processEvents($,j);else if(g=="locale"&&isString$1(j))window["am4lang_"+j]&&(c[g]=window["am4lang_"+j]);else if(g=="parent"&&isString$1(j)){var _e=a.map.getKey(j);_e?c[g]=_e:a.addDelayedMap("parent",j)}else if(a.asIs(g))c[g]=j;else if(a.asFunction(g)&&isString$1(j))if(hasValue(registry.registeredClasses[j]))c[g]=registry.registeredClasses[j];else throw Error("Invalid easing function: "+j);else if(j instanceof e)c[g]=j;else if($ instanceof e)$.config=j;else if($ instanceof ListTemplate||$ instanceof OrderedListTemplate||$ instanceof SortedListTemplate){if(isArray$1(j))$ instanceof ListTemplate?a.processListTemplate(j,$):a.processOrderedTemplate(j,$);else if(isObject$1(j))if(j instanceof e)$.template=j;else{var st=void 0;hasValue(j.template)?st=j.template:st=j,$.template instanceof e?$.template.config=st:each$1(st,function(rt,ut){var gt=$.template[rt];gt instanceof Adapter?a.processAdapters(gt,ut):gt instanceof EventDispatcher?a.processEvents(gt,ut):gt instanceof DictionaryTemplate?a.processDictionaryTemplate(gt,ut):$.template[rt]instanceof e?$.template[rt].config=ut:isObject$1(ut)&&hasValue(ut.type)?(gt=a.createClassInstance(ut.type),gt?(gt instanceof e&&(gt.config=ut),$.template[rt]=gt):$.template[rt]=ut):gt instanceof List?a.processList(ut,gt):$.template[rt]=a.maybeColorOrPercent(ut)}),hasValue(j.values)&&($ instanceof ListTemplate?a.processListTemplate(j.values,$):a.processOrderedTemplate(j.values,$))}}else $ instanceof List?g=="children"?a.processList(j,$,a):a.processList(j,$):$ instanceof DictionaryTemplate?a.processDictionaryTemplate($,j):$ instanceof Dictionary?a.processDictionary($,j):$ instanceof Color||$ instanceof Percent?c[g]=a.maybeColorOrPercent(j):isObject$1($)&&isObject$1(j)?copyAllProperties(j,$):(j=a.maybeColorOrPercent(j),c[g]=j)}else a.isReserved(g)||(c[g]=j)},this.configOrder),this.processingErrors.length){var d=this.processingErrors.join(`
`);throw this._processingErrors=[],Error(d)}}},e.prototype.maybeColorOrPercent=function(o){if(isString$1(o)){if(o.match(/^[\-]?[0-9.]+\%$/))return percent(toNumber(o));if(o.match(/^\#[0-9abcdef]{3,}$/i))return color(o)}return o},e.prototype.processAdapters=function(o,a){var c=this;isArray$1(a)?each$2(a,function(d,g){o.add(d.key,d.callback,d.priority||0,c)}):isObject$1(a)&&each$1(a,function(d,g){o.has(d,g)||o.add(d,g)})},e.prototype.processEvents=function(o,a){var c=this;isArray$1(a)?each$2(a,function(d,g){o.on(d.type,d.callback,c)}):isObject$1(a)&&each$1(a,function(d,g){o.has(d,g)||o.on(d,g)})},e.prototype.processDictionaryTemplate=function(o,a){isObject$1(a)&&each$1(a,function(c,d){var g;c=="template"?g=o.template:o.hasKey(c)?g=o.getKey(c):g=o.create(c),g instanceof e?g.config=d:isObject$1(g)&&isObject$1(d)?copyAllProperties(d,g):g.setKey(c,d)})},e.prototype.processDictionary=function(o,a){isObject$1(a)&&each$1(a,function(c,d){o.setKey(c,d)})},e.prototype.processListTemplate=function(o,a){var c=this;for(each$2(o,function(d,g){var b=c.getConfigEntryType(d),j;if(a.hasIndex(g)&&!d.forceCreate)j=a.getIndex(g);else if(d instanceof e){a.push(d);return}else b?j=a.create(b):j=a.create();d===j||isObject$1(d)&&(j instanceof e?j.config=d:isObject$1(j)&&isObject$1(d)?copyAllProperties(d,j):a.setIndex(a.indexOf(j),d))});o.length>a.length;)a.pop()},e.prototype.processOrderedTemplate=function(o,a){var c=this;each$2(o,function(d,g){var b=c.getConfigEntryType(d),j;b?j=a.create(b):j=a.create(),isObject$1(d)&&(j instanceof e?j.config=d:isObject$1(j)&&isObject$1(d)?copyAllProperties(d,j):a.insert(d))})},e.prototype.processList=function(o,a,c){var d=this;isArray$1(o)||(o=[o]);var g=a.length,b=0;for(each$2(o,function(j,$){if(isObject$1(j)){var _e=void 0;if($<g&&!j.forceCreate)_e=a.getIndex($);else if(j instanceof e){a.push(j);return}else b++,_e=d.createEntryInstance(j),c?_e.parent=c:a.push(_e);_e instanceof e?_e.config=j:isObject$1(_e)&&isObject$1(j)&&copyAllProperties(j,_e)}else a.hasIndex($)?a.setIndex($,j):a.push(j)});!c&&o.length+b<a.length;)a.pop()},e.prototype.configOrder=function(o,a){return o==a?0:o=="language"?-1:a=="language"?1:0},e.prototype.asIs=function(o){return indexOf(["locale"],o)!=-1},e.prototype.asFunction=function(o){return!1},e.prototype.createClassInstance=function(o){if(hasValue(registry.registeredClasses[o]))return new registry.registeredClasses[o];throw Error('Invalid type: "'+o+'".')},e.prototype.createEntryInstance=function(o){var a;return hasValue(o.type)&&(a=this.createClassInstance(o.type)),a||o},e.prototype.getConfigEntryType=function(o){if(hasValue(o.type)){if(hasValue(registry.registeredClasses[o.type]))return registry.registeredClasses[o.type];throw Error('Invalid type: "'+o.type+'".')}},e.prototype.hasProperty=function(o){return o in this},e.prototype.isReserved=function(o){return["type","forceCreate"].indexOf(o)!==-1},Object.defineProperty(e.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),e}(),BaseObjectEvents=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="BaseObjectEvents",a}return Object.defineProperty(o.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new EventDispatcher,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),o.prototype.dispatch=function(a,c){this._eventDispatcher&&this.events.isEnabled(a)&&(c?(c.type=a,c.target=c.target||this,this.events.dispatch(a,{type:a,target:this})):this.events.dispatch(a,{type:a,target:this}))},o.prototype.dispatchImmediately=function(a,c){this._eventDispatcher&&this.events.isEnabled(a)&&(c?(c.type=a,c.target=c.target||this,this.events.dispatchImmediately(a,c)):this.events.dispatchImmediately(a,{type:a,target:this}))},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),a._eventDispatcher&&this.events.copyFrom(a._eventDispatcher)},o}(BaseObject);function isSafari(){return/apple/i.test(navigator.vendor)}function isInternetExplorer(){return/MSIE |Trident\//.test(navigator.userAgent)}var PX="px",STRING="string",NUMBER="number",DATE="date",DURATION="duration",PLACEHOLDER="__§§§__",PLACEHOLDER2="__§§§§__";function used(e){}function copyProperties(e,o){return each$1(e,function(a,c){hasValue(c)&&(o[a]=c)}),o}function stripHash(e){return/^[^#]*/.exec(e)[0]}function getBaseURI(){var e="#";if(isSafari()){var o=document.baseURI;if(o){o=stripHash(o);var a=stripHash(location.href);o!==a&&(e=a+e)}}return e}function softCopyProperties(e,o){return each$1(e,function(a,c){hasValue(c)&&!hasValue(o[a])&&(o[a]=c)}),o}function copy$1(e,o){return each$1(e,function(a,c){o[a]=c}),o}function isNotEmpty(e){return hasValue(e)&&e.toString()!==""}function relativeToValue(e,o){return isNumber$1(e)?e:e!=null&&isNumber$1(e.value)&&isNumber$1(o)?o*e.value:0}function relativeRadiusToValue(e,o,a){var c;return isNumber$1(e)?(c=e,c<0&&(a?c=o+c:c=o-c)):e!=null&&isNumber$1(e.value)&&(c=o*e.value),c}function valueToRelative(e,o){return e instanceof Percent?e.value:e/o}function getPixelRatio(){var e=window.devicePixelRatio||1;return e}function camelToDashed(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function capitalize(e){var o=e.split("");return o[0]=o[0].toUpperCase(),o.join("")}function stringify(e){return JSON.stringify(e)}function escapeForRgex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function splitTextByCharCount(e,o,a,c,d){if(e.length<=o)return[e];var g=[];if(a){for(var b=-1,j=e.replace(/([,;:!?\\\/]+|[\s])/g,PLACEHOLDER+"$1"+PLACEHOLDER),$=j.split(PLACEHOLDER),_e=1;_e<$.length;_e++){var st=$[_e];(st=="."||st==",")&&$[_e-1].match(/[\w]+$/)&&($[_e-1]+=st,$[_e]="")}for(var _e=0;_e<$.length;_e++){var st=$[_e],rt=st.length;if(rt!==0){if(rt>o&&(a!==!0||d!=!1)){c&&(st=reverseString(st));var ut=st.match(new RegExp(".{1,"+o+"}","g"));if(ut){if(c)for(var gt=0;gt<ut.length;gt++)ut[gt]=reverseString(ut[gt]);g=g.concat(ut)}}else b===-1&&(g.push(""),b=0),g[b].length+rt+1>o&&g[b]!==""&&(g.push(""),b++),g[b]+=st;b=g.length-1}}}else{var ut=e.match(new RegExp(".{1,"+o+"}","g"));if(ut){if(c)for(var gt=0;gt<ut.length;gt++)c||(ut[gt]=reverseString(ut[gt]));g=ut}}return g.length==1&&a&&d&&g[0].length>o&&(g=[]),g}function truncateWithEllipsis(e,o,a,c,d){if(e.length<=o)return e;o-=a.length,o<1&&(o=1);var g=splitTextByCharCount(e,o,c,d);return(g[0]||"")+a}function trim$1(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function rtrim(e){return e.replace(/[\s\uFEFF\xA0]+$/g,"")}function ltrim(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}function reverseString(e){return e.split("").reverse().join("")}function unquote(e){var o=e.trim();return o=e.replace(/^'(.*)'$/,"$1"),o==e&&(o=e.replace(/^"(.*)"$/,"$1")),o}function padString(e,o,a){return o===void 0&&(o=0),a===void 0&&(a="0"),typeof e!="string"&&(e=e.toString()),o>e.length?Array(o-e.length+1).join(a)+e:e}function getFormat(e){if(typeof e>"u")return STRING;e=e.toLowerCase().replace(/^\[[^\]]*\]/,""),e=e.replace(/\[[^\]]+\]/,""),e=e.trim();var o=e.match(/\/(date|number|duration)$/);return o?o[1]:e===NUMBER?NUMBER:e===DATE?DATE:e===DURATION?DURATION:e.match(/[#0]/)?NUMBER:e.match(/[ymwdhnsqaxkzgtei]/)?DATE:STRING}function cleanFormat(e){return e.replace(/\/(date|number|duration)$/i,"")}function stripTags(e){return e&&e.replace(/<[^>]*>/g,"")}function plainText(e){return e&&stripTags((""+e).replace(/[\n\r]+/g,". "))}function numberToString(e){if(isNaN$1(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(e===0&&1/e===-1/0)return"-0";var o=e<0;e=Math.abs(e);var a=getValue(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+e)),c=a[1],d=a[2]||"",g;if(a[3]==null)g=d===""?c:c+"."+d;else{var b=+a[3];if(e<1){var j=b-1;g="0."+repeat("0",j)+c+d}else{var j=b-d.length;j===0?g=c+d:j<0?g=c+d.slice(0,j)+"."+d.slice(j):g=c+d+repeat("0",j)}}return o?"-"+g:g}function anyToDate(e){if(isDate$1(e)){var o=new Date(e);return o.setMilliseconds(e.getMilliseconds()),o}else{if(isNumber$1(e))return new Date(e);var a=Number(e);return isNumber$1(a)?new Date(a):new Date(e)}}function anyToNumber(e){if(isDate$1(e))return e.getTime();if(isNumber$1(e))return e;if(isString$1(e)){var o=Number(e);return isNumber$1(o)?o:void 0}}function getYearDay(e,o){var a=new Date(e.getFullYear(),0,0),c=e.getTime()-a.getTime()+(a.getTimezoneOffset()-e.getTimezoneOffset())*60*1e3,d=1e3*60*60*24;return Math.floor(c/d)}function getWeek(e,o){var a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),c=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-c);var d=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a.getTime()-d.getTime())/864e5+1)/7)}function getMonthWeek(e,o){var a=getWeek(new Date(e.getFullYear(),e.getMonth(),1)),c=getWeek(e);return c==1&&(c=53),c-a+1}function getDayFromWeek(e,o,a,c){a===void 0&&(a=1),c===void 0&&(c=!1);var d=new Date(o,0,4,0,0,0,0);c&&d.setUTCFullYear(o);var g=e*7+a-((d.getDay()||7)+3);return g}function get12Hours(e,o){return e>12?e-=12:e===0&&(e=12),hasValue(o)?e+(o-1):e}function getTimeZone(e,o,a,c){if(o===void 0&&(o=!1),a===void 0&&(a=!1),c===void 0&&(c=!1),c)return o?"Coordinated Universal Time":"UTC";var d=e.toLocaleString("UTC"),g=e.toLocaleString("UTC",{timeZoneName:o?"long":"short"}).substr(d.length);return a===!1&&(g=g.replace(/ (standard|daylight|summer|winter) /i," ")),g}function random(e,o){return Math.floor(Math.random()*(o-e))+e}function fitNumber(e,o,a){return e>a?a:e<o?o:e}function fitNumberRelative(e,o,a){var c=a-o;return(e>a||e<o)&&(e=o+(e-c*Math.floor(e/c))),e}function svgPointToSprite(e,o){var a=e.x,c=e.y,d=[];if(o){for(;hasValue(o.parent);)d.push(o),o=o.parent;d.reverse();for(var g=0;g<d.length;g++){var b=d[g],j=b.rotation,$=a-b.pixelX-b.ex,_e=c-b.pixelY-b.ey;b.dx&&(a-=b.dx),b.dy&&(c-=b.dy);var st=b.scale;b.group&&(st=b.group.scale),a=(cos(-j)*$-sin(-j)*_e)/st-b.pixelPaddingLeft,c=(cos(-j)*_e+sin(-j)*$)/st-b.pixelPaddingTop}}return{x:a,y:c}}function spritePointToSvg(e,o){var a=e.x,c=e.y;if(o)for(;hasValue(o.parent);){var d=o.rotation;a+=o.pixelPaddingLeft+o.ex,c+=o.pixelPaddingTop+o.ey;var g=o.scale;o.group&&(g=o.group.scale);var b=o.pixelX+(a*cos(d)-c*sin(d))*g,j=o.pixelY+(a*sin(d)+c*cos(d))*g;o.dx&&(b+=o.dx),o.dy&&(j+=o.dy),a=b,c=j,o=o.parent}return{x:a,y:c}}function spritePointToSprite(e,o,a){return svgPointToSprite(spritePointToSvg(e,o),a)}function svgRectToSprite(e,o){var a=svgPointToSprite(e,o),c=svgPointToSprite({x:e.x+e.width,y:e.y+e.height},o);return{x:a.x,y:a.y,width:c.x-a.x,height:c.y-a.y}}function spriteRectToSvg(e,o){var a=spritePointToSvg(e,o),c=spritePointToSvg({x:e.x+e.width,y:e.y+e.height},o);return{x:a.x,y:a.y,width:c.x-a.x,height:c.y-a.y}}function documentPointToSvg(e,o,a){try{var c=o.getBoundingClientRect();return isNumber$1(a)||(a=1),{x:(e.x-c.left)/a,y:(e.y-c.top)/a}}catch{return e}}function svgPointToDocument(e,o){try{var a=o.getBoundingClientRect();return{x:e.x+a.left,y:e.y+a.top}}catch{return e}}function documentPointToSprite(e,o){if(o&&o.htmlContainer){var a=documentPointToSvg(e,getValue(o.htmlContainer),o.svgContainer.cssScale);return svgPointToSprite(a,o)}else return e}function spritePointToDocument(e,o){if(o&&o.htmlContainer){var a=spritePointToSvg(e,o);return svgPointToDocument(a,getValue(o.htmlContainer))}else return e}function width(e){var o=getComputedStyle(e),a=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),c=parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth);return e.clientWidth-a-c}function height(e){var o=getComputedStyle(e),a=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),c=parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth);return e.clientHeight-a-c}function decimalPlaces(e){var o=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return o?Math.max(0,(o[1]?o[1].length:0)-(o[2]?+o[2]:0)):0}var urlRegexp=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function parseUrl(e){var o=urlRegexp.exec(e);return{protocol:o&&o[1]||"",separator:o&&o[2]||"",authority:o&&o[3]||"",domain:o&&o[4]||"",port:o&&o[5]||"",path:o&&o[6]||"",query:o&&o[7]||"",hash:o&&o[8]||""}}function serializeUrl(e){return e.protocol+e.separator+e.authority+e.domain+e.port+e.path+e.query+e.hash}function isRelativeUrl(e){return e.protocol===""&&e.separator===""&&e.authority===""&&e.domain===""&&e.port===""}function joinUrl(e,o){var a=parseUrl(e),c=parseUrl(o);if(isRelativeUrl(a))throw new Error("Left URL is not absolute");if(isRelativeUrl(c)){if(c.path!=="")if(c.path[0]==="/")a.path=c.path;else{var d=a.path.split(/\//),g=c.path.split(/\//);if(d.length===0?g.length!==0&&d.push(""):d.length>1&&d.pop(),pushAll(d,g),a.path=d.join("/"),a.path!==""&&a.path[0]!=="/")throw new Error("URL path must start with /")}return a.query=c.query,a.hash=c.hash,serializeUrl(a)}else return serializeUrl(c)}function isIE(){return!!window.MSInputMethodContext&&!!document.documentMode}const Utils=Object.freeze(Object.defineProperty({__proto__:null,anyToDate,anyToNumber,camelToDashed,capitalize,cleanFormat,copy:copy$1,copyProperties,decimalPlaces,documentPointToSprite,documentPointToSvg,escapeForRgex,fitNumber,fitNumberRelative,get12Hours,getBaseURI,getDayFromWeek,getFormat,getMonthWeek,getPixelRatio,getTimeZone,getWeek,getYearDay,height,isIE,isNotEmpty,joinUrl,ltrim,numberToString,padString,parseUrl,plainText,random,relativeRadiusToValue,relativeToValue,reverseString,rtrim,serializeUrl,softCopyProperties,splitTextByCharCount,spritePointToDocument,spritePointToSprite,spritePointToSvg,spriteRectToSvg,stringify,stripHash,stripTags,svgPointToDocument,svgPointToSprite,svgRectToSprite,trim:trim$1,truncateWithEllipsis,unquote,used,valueToRelative,width},Symbol.toStringTag,{value:"Module"}));function linear(e){return+e}registry.registeredClasses["ease.linear"]=linear;function quadIn(e){return e*e}registry.registeredClasses["ease.quadIn"]=quadIn;function quadOut(e){return e*(2-e)}registry.registeredClasses["ease.quadOut"]=quadOut;function quadInOut(e){return e*=2,(e<=1?e*e:--e*(2-e)+1)/2}registry.registeredClasses["ease.quadInOut"]=quadInOut;function polyIn(e,o){return Math.pow(e,o)}registry.registeredClasses["ease.polyIn"]=polyIn;function polyOut(e,o){return 1-Math.pow(1-e,o)}registry.registeredClasses["ease.polyOut"]=polyOut;function polyInOut(e,o){return e*=2,(e<=1?Math.pow(e,o):2-Math.pow(2-e,o))/2}registry.registeredClasses["ease.polyInOut"]=polyInOut;function polyIn3(e){return polyIn(e,3)}registry.registeredClasses["ease.polyIn3"]=polyIn3;function polyOut3(e){return polyOut(e,3)}registry.registeredClasses["ease.polyOut3"]=polyOut3;function polyInOut3(e){return polyInOut(e,3)}registry.registeredClasses["ease.polyInOut3"]=polyInOut3;function expIn(e){return Math.pow(2,10*e-10)}registry.registeredClasses["ease.expIn"]=expIn;function expOut(e){return 1-Math.pow(2,-10*e)}registry.registeredClasses["ease.expOut"]=expOut;function expInOut(e){return e*=2,(e<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}registry.registeredClasses["ease.expInOut"]=expInOut;function sinIn(e){return 1-Math.cos(e*HALFPI)}registry.registeredClasses["ease.sinIn"]=sinIn;function sinOut(e){return Math.sin(e*HALFPI)}registry.registeredClasses["ease.sinOut"]=sinOut;function sinInOut(e){return(1-Math.cos(PI*e))/2}registry.registeredClasses["ease.sinInOut"]=sinInOut;function cubicIn(e){return e*e*e}registry.registeredClasses["ease.cubicIn"]=cubicIn;function cubicOut(e){return--e*e*e+1}registry.registeredClasses["ease.cubicOut"]=cubicOut;function cubicInOut(e){return e*=2,(e<=1?e*e*e:(e-=2)*e*e+2)/2}registry.registeredClasses["ease.cubicInOut"]=cubicInOut;function circleIn(e){return 1-Math.sqrt(1-e*e)}registry.registeredClasses["ease.circleIn"]=circleIn;function circleOut(e){return Math.sqrt(1- --e*e)}registry.registeredClasses["ease.circleOut"]=circleOut;function circleInOut(e){return e*=2,(e<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}registry.registeredClasses["ease.circleInOut"]=circleInOut;var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(e){return 1-bounceOut(1-e)}registry.registeredClasses["ease.bounceIn"]=bounceIn;function bounceOut(e){return e=+e,e<b1?b0*e*e:e<b3?b0*(e-=b2)*e+b4:e<b6?b0*(e-=b5)*e+b7:b0*(e-=b8)*e+b9}registry.registeredClasses["ease.bounceOut"]=bounceOut;function bounceInOut(e){return e*=2,(e<=1?1-bounceOut(1-e):bounceOut(e-1)+1)/2}registry.registeredClasses["ease.bounceInOut"]=bounceInOut;var tau=2*Math.PI,amplitude=1,period=.3/tau,s=Math.asin(1/amplitude)*period;function elasticIn(e){return amplitude*Math.pow(2,10*--e)*Math.sin((s-e)/period)}registry.registeredClasses["ease.elasticIn"]=elasticIn;function elasticOut(e){return 1-amplitude*Math.pow(2,-10*(e=+e))*Math.sin((e+s)/period)}registry.registeredClasses["ease.elasticOut"]=elasticOut;function elasticInOut(e){return e=e*2-1,(e<0?amplitude*Math.pow(2,10*e)*Math.sin((s-e)/period):2-amplitude*Math.pow(2,-10*e)*Math.sin((s+e)/period))/2}registry.registeredClasses["ease.elasticInOut"]=elasticInOut;const Ease=Object.freeze(Object.defineProperty({__proto__:null,bounceIn,bounceInOut,bounceOut,circleIn,circleInOut,circleOut,cubicIn,cubicInOut,cubicOut,elasticIn,elasticInOut,elasticOut,expIn,expInOut,expOut,linear,polyIn,polyIn3,polyInOut,polyInOut3,polyOut,polyOut3,quadIn,quadInOut,quadOut,sinIn,sinInOut,sinOut},Symbol.toStringTag,{value:"Module"}));var SpriteState=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.transitionDuration=0,a.transitionEasing=cubicOut,a.properties={},a.propertyFields={},a.filters=new List,a.isTemplate=!1,a.className="SpriteState",a._disposers.push(new ListDisposer(a.filters)),a.applyTheme(),a}return Object.defineProperty(o.prototype,"adapter",{get:function(){var a=this;return this._adapterO||(this._adapterO=new Adapter(this),this._adapterO.events.on("inserted",function(c){a[c.newValue.key]=a[c.newValue.key]},void 0,!1),this._adapterO.events.on("removed",function(c){a[c.newValue.key]=a[c.newValue.key]},void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),o.prototype.getPropertyValue=function(a){var c=this.properties[a],d=this.sprite;if(d){var g=this.propertyFields[a];if(hasValue(g)&&(d.dataItem&&(c=d.dataItem.dataContext[g]),c==null&&(c="__unset")),hasValue(c))this._adapterO&&(c=this._adapterO.apply(a,c));else{var b=d.getPropertyValue(a);this._adapterO?c=this._adapterO.apply(a,b):c=b,c==b&&(c=void 0)}}return c},o.prototype.copyFrom=function(a){a&&a!=this&&(this.transitionDuration=a.transitionDuration,this.transitionEasing=a.transitionEasing,copyProperties(a.properties,this.properties),copyProperties(a.propertyFields,this.propertyFields),this.filters.copyFrom(a.filters),a._adapterO&&this.adapter.copyFrom(a._adapterO))},Object.defineProperty(o.prototype,"allValues",{get:function(){var a=this,c={};if(each$1(this.properties,function(b,j){c[b]=a.getPropertyValue(b)}),this._adapterO){var d=this._adapterO.keys();each$1(d,function(b,j){var $=a.getPropertyValue(j);c[j]=$})}var g=this.propertyFields;return each$1(g,function(b){var j=a.getPropertyValue(b);c[b]=j}),c},enumerable:!0,configurable:!0}),o.prototype.reset=function(){this.properties={},this.filters.clear()},o.prototype.processConfig=function(a){hasValue(a)&&hasValue(a.properties)&&each$1(a.properties,function(c,d){isString$1(d)&&(d.match(/^[0-9.\-]+\%$/)?a.properties[c]=percent(toNumber(d)):d.match(/^\#[0-9abcdef]{3,}$/i)&&(a.properties[c]=toColor(d)))}),e.prototype.processConfig.call(this,a)},o.prototype.asFunction=function(a){return a=="transitionEasing"||e.prototype.asIs.call(this,a)},o}(BaseObject);registry.registeredClasses.SpriteState=SpriteState;var SpriteEventDispatcher=function(e){__extends(o,e);function o(){var a=e!==null&&e.apply(this,arguments)||this;return a._interactionEvents=new Dictionary,a}return o.prototype._dispatchSpriteEvent=function(a){if(!(this.target.disabled||this.target.isTemplate)&&this.target.events.isEnabled(a.type)){var c=merge$1(a,{target:this.target});this.target.events.dispatchImmediately(c.type,c)}},o.prototype._dispatchSpritePointEvent=function(a){if(!(this.target.disabled||this.target.isTemplate)&&this.target.events.isEnabled(a.type)){var c=merge$1(a,{target:this.target,spritePoint:a.point?documentPointToSprite(a.point,this.target):void 0,svgPoint:this.target.getSvgPoint(a.point)});this.target.events.dispatchImmediately(c.type,c)}},o.prototype._addInteractionObjectEvent=function(a,c,d,g){var b=this,j=g+"-"+a,$=this._interactionEvents.insertKeyIfEmpty(j,function(){var _e=b.target.interactions.events.on(a,c,d,g);return new CounterDisposer(function(){b._interactionEvents.removeKey(j),_e.dispose()})});return $.increment()},o.prototype._on=function(a,c,d,g,b,j){var $=e.prototype._on.call(this,a,c,d,g,b,j),_e=[$.disposer];switch(c){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":_e.push(this._addInteractionObjectEvent(c,this._dispatchSpritePointEvent,this,b));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":_e.push(this._addInteractionObjectEvent(c,this._dispatchSpriteEvent,this,b));break}switch(c){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0;break}return $.disposer=new MultiDisposer(_e),$},o}(TargetedEventDispatcher),SVGDefaults=function(){function e(){}return e.opacity=1,e.strokeOpacity=1,e.strokeWidth=1,e.fillOpacity=1,e.fill=color("#000000"),e.stroke=color("#000000"),e.focusable=void 0,e.tabindex=0,e}(),options={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0};function animate(e,o){var a=!1,c=Date.now();function d(g){if(!a){var b=g-c;b>=e?o(1):(nextFrame(d),o(b/e))}}return nextFrame(d),new Disposer(function(){a=!0})}function getProgressNumber(e,o,a){return o+(a-o)*e}function getProgressPercent(e,o,a){return new Percent(getProgressNumber(e,o.percent,a.percent))}function getProgressColor(e,o,a){var c=new Color(interpolate(o.rgb,a.rgb,e));return o.alpha!=a.alpha&&(c.alpha=o.alpha+(a.alpha-o.alpha)*e),c}function getHybridProperty(e,o){return o+e.charAt(0).toUpperCase()+e.substr(1)}var AnimationDisposer=function(){function e(o){this._disposer=new Disposer(function(){for(;o.length!==0;)o[0].dispose()})}return e.prototype.isDisposed=function(){return this._disposer.isDisposed()},e.prototype.dispose=function(){this._disposer.dispose()},e}(),Animation=function(e){__extends(o,e);function o(a,c,d,g){var b=e.call(this)||this;return b.duration=0,b.easing=linear,b.progress=0,b._loop=0,b._pause=!1,b._delayTimeout=null,b._time=0,b._isFinished=!1,b.className="Animation",options.animationsEnabled===!1&&(d=0),b.object=a,b.animationOptions=toArray$2(c),b.duration=d,g&&(b.easing=g),b.applyTheme(),b}return o.prototype.debug=function(){},o.prototype.dispose=function(){e.prototype.dispose.call(this),this.pause()},o.prototype.delay=function(a){var c=this;if(a>0){this.pause(),move(this.object.animations,this);var d=setTimeout(function(){c._delayTimeout=null,c.start()},a);this._delayTimeout=new Disposer(function(){clearTimeout(d)})}return this},o.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,move(system.animations,this),move(this.object.animations,this),system.requestFrame()},o.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var a=this.animationOptions.length-1;a>=0;a--){var c=this.animationOptions[a];if(hasValue(c.from)||(c.childObject?c.from=c.childObject[c.property]:(c.from=this.object[c.property],hasValue(c.from)||(c.from=SVGDefaults[c.property]))),c.from==c.to)remove(this.animationOptions,c);else if(!hasValue(c.from)||!(c.from instanceof Percent)&&c.to instanceof Percent||c.from instanceof Percent&&!(c.to instanceof Percent))this.staticOptions.push(c),remove(this.animationOptions,c);else if(isNumber$1(c.to))if(c.updateMethod=getProgressNumber,c.from instanceof Percent){var d=this.object[getHybridProperty(c.property,"pixel")];isNaN(d)?(this.staticOptions.push(c),remove(this.animationOptions,c)):c.from=d}else isNaN(c.from)&&(this.staticOptions.push(c),remove(this.animationOptions,c));else if(c.to instanceof Color)c.from?c.updateMethod=getProgressColor:(this.staticOptions.push(c),remove(this.animationOptions,c));else if(c.to instanceof Percent){if(c.updateMethod=getProgressPercent,!isNaN(c.from)){var d=this.object[getHybridProperty(c.property,"relative")];isNaN(d)||(c.from=percent(d*100))}}else this.staticOptions.push(c),remove(this.animationOptions,c)}if(this.applyStaticOptions(),this.events.isEnabled("animationstarted")){var g={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",g)}return this.update(),this.duration===0&&this.end(),this},o.prototype.loop=function(a){return isNumber$1(a)||(a=1/0),this._loop=a,this},o.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),remove(system.animations,this),remove(this.object.animations,this),this},o.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},o.prototype.end=function(){if(this._loop==0&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")){var a={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",a)}return this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},o.prototype.kill=function(){this.pause(),this._isFinished=!0},o.prototype.isFinished=function(){return this._isFinished},o.prototype.applyStaticOptions=function(){var a=this;each$2(this.staticOptions,function(c){c.childObject?c.childObject[c.property]=a.progress==1?c.to:c.from:a.object[c.property]=a.progress==1?c.to:c.from})},o.prototype.stop=function(a){if(this.pause(),!a&&this.events.isEnabled("animationstopped")){var c={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",c)}return this},o.prototype.setProgress=function(a){var c=this;if(this._time=this.duration*a,each$2(this.animationOptions,function(g){if(g.updateMethod&&hasValue(g.from)){var b=g.updateMethod(a,g.from,g.to);g.childObject?g.childObject[g.property]=b:c.object[g.property]=b}}),this.progress=a,this.events.isEnabled("animationprogress")){var d={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",d)}system.requestFrame()},o.prototype.update=function(){if(!this._pause){var a=void 0;this._time=fitToRange(Date.now()-this._startTime,0,this.duration);var c=this._time/this.duration;a=this.easing(c),(this.duration==0||!isNumber$1(a)||c>=1)&&(a=1),this.setProgress(a),round$1(this._time/this.duration,6)==1&&this.end()}return this},Object.defineProperty(o.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),o.prototype.stopSameAnimations=function(){var a=this;each$2(copy$3(this.object.animations),function(c){if(c!==a&&!c.delayed){var d=[];each$2(a.animationOptions,function(g){each$2(c.animationOptions,function(b){g.property==b.property&&g.childObject==b.childObject&&(d.push(b),c.animationOptions.length==0&&c.kill())})}),each$2(d,function(g){remove(c.animationOptions,g)})}})},o.prototype.asFunction=function(a){return a=="easing"||e.prototype.asIs.call(this,a)},o}(BaseObjectEvents),SVGNS="http://www.w3.org/2000/svg",XMLNS="http://www.w3.org/2000/xmlns/",XLINK="http://www.w3.org/1999/xlink";function addEventListener$1(e,o,a,c){return e.addEventListener(o,a,c||!1),new Disposer(function(){e.removeEventListener(o,a,c||!1)})}function getElement(e){if(isString$1(e)){var o=document.getElementById(e);if(o==null&&(o=document.getElementsByClassName(e)[0]),o instanceof HTMLElement)return o}else if(e instanceof HTMLElement)return e}function addClass(e,o){if(e)if(e.classList){var a=o.split(" ");each$2(a,function(d){e.classList.add(d)})}else{var c=e.getAttribute("class");c?e.setAttribute("class",c.split(" ").filter(function(d){return d!==o}).join(" ")+" "+o):e.setAttribute("class",o)}}function removeClass(e,o){if(e)if(e.classList)e.classList.remove(o);else{var a=e.getAttribute("class");a&&e.setAttribute("class",a.split(" ").filter(function(c){return c!==o}).join(" "))}}function setStyle(e,o,a){e.style[o]=a}function getComputedStyle$1(e,o){return e.currentStyle?e.currentStyle[o]:document.defaultView.getComputedStyle(e,null).getPropertyValue(o)}function blur(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}function focus(e){if(e instanceof HTMLElement)e.focus();else{var o=document.createElement("input"),a=document.createElementNS(SVGNS,"foreignObject");a.appendChild(o),e.appendChild(a),o.focus(),o.disabled=!0,a.remove()}}function outerHTML(e){if(e.outerHTML)return e.outerHTML;var o=document.createElement("div"),a=e.cloneNode(!0);o.appendChild(a);var c=o.innerHTML;return c}function isElement(e){return e instanceof Object&&e&&e.nodeType===1}function contains(e,o){for(var a=o;;){if(e===a)return!0;if(a.parentNode==null){if(a.host==null)return!1;a=a.host}else a=a.parentNode}}function getShadowRoot(e){for(var o=e;;){if(o.parentNode==null)return o.host!=null?o:null;o=o.parentNode}}function getRoot(e){for(var o=e.ownerDocument,a=e;;){if(a.parentNode==null)return a===o||a.host!=null?a:null;a=a.parentNode}}function eventTarget(e){return typeof e.composedPath=="function"?e.composedPath()[0]:e.target}function copyAttributes(e,o){each$2(e.attributes,function(a){a.value!=null&&o.setAttribute(a.name,a.value)})}function fixPixelPerfect(e){readFrame(function(){try{var o=e.getBoundingClientRect(),a=o.left-Math.round(o.left),c=o.top-Math.round(o.top);a!==0&&writeFrame(function(){e.style.left=a+"px"}),c!==0&&writeFrame(function(){e.style.top=c+"px"})}catch{}})}var rootStylesheet;function getStylesheet(e){if(e==null){if(!hasValue(rootStylesheet)){var o=document.createElement("style");o.type="text/css",options.nonce!=""&&o.setAttribute("nonce",options.nonce),document.head.appendChild(o),rootStylesheet=o.sheet}return rootStylesheet}else{var o=document.createElement("style");return o.type="text/css",options.nonce!=""&&o.setAttribute("nonce",options.nonce),e.appendChild(o),o.sheet}}function appendStylesheet(e,o){var a=e.cssRules.length;return e.insertRule(o+"{}",a),e.cssRules[a]}var StyleRule=function(e){__extends(o,e);function o(a,c,d){var g=this,b=getStylesheet(a);return g=e.call(this,function(){var j=indexOf(b.cssRules,g._rule);if(j===-1)throw new Error("Could not dispose StyleRule");b.deleteRule(j)})||this,g._rule=appendStylesheet(b,c),each$1(d,function(j,$){g.setStyle(j,$)}),g}return Object.defineProperty(o.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(a){this._rule.selectorText=a},enumerable:!0,configurable:!0}),o.prototype._setVendorPrefixName=function(a,c){var d=this._rule.style;d.setProperty("-webkit-"+a,c,""),d.setProperty("-moz-"+a,c,""),d.setProperty("-ms-"+a,c,""),d.setProperty("-o-"+a,c,""),d.setProperty(a,c,"")},o.prototype.setStyle=function(a,c){a==="transition"?this._setVendorPrefixName(a,c):this._rule.style.setProperty(a,c,"")},o}(Disposer),styleId=0,StyleClass=function(e){__extends(o,e);function o(a,c,d){var g=this,b=hasValue(d)?d:"__style_"+ ++styleId+"__";return g=e.call(this,a,"."+b,c)||this,g._className=b,g}return Object.defineProperty(o.prototype,"className",{get:function(){return this._className},set:function(a){this._className=a,this.selector="."+a},enumerable:!0,configurable:!0}),o.prototype.toString=function(){return this._className},o}(StyleRule);function ready(e){if(document.readyState!=="loading")e();else{var o=function(){document.readyState!=="loading"&&(document.removeEventListener("readystatechange",o),e())};document.addEventListener("readystatechange",o)}}function findFont(e){var o=getComputedStyle$1(e,"font-family");if(o)return o;var a=e.parentElement||e.parentNode;return a?findFont(a):void 0}function findFontSize(e){var o=getComputedStyle$1(e,"font-size");if(o)return o;var a=e.parentElement||e.parentNode;return a?findFontSize(a):void 0}function isElementInViewport(e,o){var a=e.getBoundingClientRect(),c=isArray$1(o)?o:o?[o]:[];if(c.length){for(var d=0;d<c.length;d++){var g=c[d];if(!isElementInViewport(g))return!1;var b=g.getBoundingClientRect();if(a.top>=0&&a.left>=0&&a.top<=b.top+b.height&&a.left<=b.left+b.width)return!0}return!1}return a.top>=0&&a.left>=0&&a.top<=(window.innerHeight||document.documentElement.clientHeight)&&a.left<=(window.innerWidth||document.documentElement.clientWidth)}var AMElement=function(){function e(o){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,typeof o=="string"?this.node=document.createElementNS(SVGNS,o):this.node=o}return e.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(e.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),e.prototype.transform=function(){var o="translate("+this._x+","+this._y+")";if(this._scale!=1&&(o+=(o?" ":"")+"scale("+this._scale+")"),this._rotation!=0){var a="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(a="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),o+=(o?" ":"")+a}this._transformString=o,this.node.setAttribute("transform",o)},e.prototype.getBBox=function(){var o={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var a=this.node.getBBox();o.x=a.x,o.y=a.y,o.width=a.width,o.height=a.height}catch{}return o},e.prototype.moveTo=function(o){if(o){var a=o.x,c=o.y;(this._x!=a||this._y!=c)&&(this._x=a,this._y=c,this.transform())}},Object.defineProperty(e.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(o){this.node.innerHTML=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(o){this.node.textContent=o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(o){this._x!=o&&(this._x=o,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(o){this._y!=o&&(this._y=o,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(o){this._rotation!=o&&(this._rotation=o,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX},set:function(o){this._rotationX!=o&&(this._rotationX=o,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY},set:function(o){this._rotationY!=o&&(this._rotationY=o,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(o){this._scale!=o&&(this._scale=o,this.transform())},enumerable:!0,configurable:!0}),e.prototype.removeAttr=function(o){this.node.removeAttribute(o)},e.prototype.attr=function(o){var a=this;return each$1(o,function(c,d){hasValue(d)?a.node.setAttribute(c,d):a.node.removeAttribute(c)}),this},e.prototype.getAttr=function(o){return this.node.getAttribute(o)},e.prototype.attrNS=function(o,a,c){return this.node.setAttributeNS(o,a,c),this},e.prototype.getAttrNS=function(o,a){return this.node.getAttributeNS(o,a)},e.prototype.removeStyle=function(o){this.node.style[o]=null,delete this.node.style[o]},e.prototype.getStyle=function(o){return this.node.style[o]},e.prototype.addStyle=function(o){var a=this;return each$1(o,function(c,d){hasValue(d)?a.node.style[c]=d:a.removeStyle(c)}),this},e.prototype.addClass=function(o){addClass(this.node,o)},e.prototype.removeClass=function(o){removeClass(this.node,o)},e.prototype.setClass=function(o){this.node.setAttribute("class",o)},e.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype.dispose=function(){this.removeNode()},e}(),Group=function(e){__extends(o,e);function o(a){return e.call(this,a)||this}return o.prototype.add=function(a){a&&this.node.appendChild(a.node)},o.prototype.addToBack=function(a){if(a){var c=this.node.childNodes[0];c?c!=a.node&&this.node.insertBefore(a.node,c):this.node.appendChild(a.node)}},o.prototype.removeElement=function(a){if(a)try{a.node&&a.node.parentNode==this.node&&this.node.removeChild(a.node)}catch{}},o.prototype.hasChild=function(a){for(var c=0;c<this.node.childNodes.length;c++)if(this.node.childNodes[c]==a.node)return!0;return!1},Object.defineProperty(o.prototype,"content",{get:function(){return this.node.innerHTML},set:function(a){this.node.innerHTML=a},enumerable:!0,configurable:!0}),o.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var a=this.node.firstChild;a&&a.parentNode&&a.parentNode.removeChild(a)}},o.prototype.removeChildrenByTag=function(a){if(this.node.childNodes)for(var c=this.node.getElementsByTagName(a),d=0;d<c.length;d++)this.node.removeChild(c[d])},o}(AMElement),InterfaceColorSet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._purposes={stroke:color("#e5e5e5"),fill:color("#f3f3f3"),primaryButton:color("#6794dc"),primaryButtonHover:color("#6771dc"),primaryButtonDown:color("#68dc75"),primaryButtonActive:color("#68dc75"),primaryButtonText:color("#FFFFFF"),primaryButtonStroke:color("#FFFFFF"),secondaryButton:color("#d9d9d9"),secondaryButtonHover:color("#d9d9d9").brighten(-.25),secondaryButtonDown:color("#d9d9d9").brighten(-.35),secondaryButtonActive:color("#d9d9d9").brighten(.35),secondaryButtonText:color("#000000"),secondaryButtonStroke:color("#FFFFFF"),grid:color("#000000"),background:color("#ffffff"),alternativeBackground:color("#000000"),text:color("#000000"),alternativeText:color("#FFFFFF"),disabledBackground:color("#999999"),positive:color("#67dc75"),negative:color("#dc6788")},a.className="InterfaceColorSet",a.applyTheme(),a}return o.prototype.debug=function(){},o.prototype.getFor=function(a){return this._purposes[a]},o.prototype.setFor=function(a,c){this._purposes[a]=c},o}(BaseObject);registry.registeredClasses.InterfaceColorSet=InterfaceColorSet;var rules$1=new Dictionary;function popupCSS(e,o){o||(o="ampopup");var a=new InterfaceColorSet,c=a.getFor("text"),d=a.getFor("background");d.alpha=.8;var g=a.getFor("alternativeBackground");g.alpha=.05;var b=rules$1.insertKeyIfEmpty(o,function(){var j=new MultiDisposer([new StyleRule(e,"."+o,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new StyleRule(e,"."+o+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":d.hex,opacity:"0.5"}),new StyleRule(e,"."+o+"-header",{display:"block",width:"100%","min-height":"1.8em",background:g.rgba}),new StyleRule(e,"."+o+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new StyleRule(e,"."+o+"-content",{background:d.hex,"background-color":d.rgba,color:c.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new StyleRule(e,"."+o+"-inside",{padding:"1em"}),new StyleRule(e,"."+o+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new CounterDisposer(function(){rules$1.removeKey(o),j.dispose()})});return b.increment()}var InteractionObjectEventDispatcher=function(e){__extends(o,e);function o(){var a=e!==null&&e.apply(this,arguments)||this;return a._domEvents={},a}return o.prototype._addDOMEvent=function(a,c,d,g){var b=this;if(!this._domEvents[a]){var j=function($){d.call(g,c,$)};this.target.element.addEventListener(a,j,!1),this._domEvents[a]=new CounterDisposer(function(){delete b._domEvents[a],b.target.element.removeEventListener(a,j,!1)})}return this._domEvents[a].increment()},o.prototype._dispatchKeyboardEvent=function(a,c){this.target.events.isEnabled(a)&&this.target.events.dispatchImmediately(a,{type:a,target:this.target,event:c})},o.prototype._on=function(a,c,d,g,b,j){var $=e.prototype._on.call(this,a,c,d,g,b,j),_e=[$.disposer];switch(c){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":_e.push(this._addDOMEvent(c,c,this._dispatchKeyboardEvent,this));break;case"keyup":_e.push(this._addDOMEvent(c,c,this._dispatchKeyboardEvent,this));break;case"keypress":_e.push(this._addDOMEvent(c,c,this._dispatchKeyboardEvent,this));break;case"input":_e.push(this._addDOMEvent(c,c,this._dispatchKeyboardEvent,this));break}return $.disposer=new MultiDisposer(_e),$},o}(TargetedEventDispatcher),InteractionObject=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c._eventDispatcher=new InteractionObjectEventDispatcher(c),c.eventDisposers=new Dictionary,c.replacedStyles=new Dictionary,c._clickable=!1,c._contextMenuDisabled=!1,c._hoverable=!1,c._trackable=!1,c._draggable=!1,c._swipeable=!1,c._resizable=!1,c._wheelable=!1,c._inert=!1,c._isHover=!1,c.isRealHover=!1,c._isHoverByTouch=!1,c._isDown=!1,c._isFocused=!1,c._isTouchProtected=!1,c._inertiaOptions=new Dictionary,c.inertias=new Dictionary,c._hitOptions={},c._hoverOptions={},c._swipeOptions={},c._keyboardOptions={},c._mouseOptions={},c._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},c._disposers.push(c._eventDispatcher),c._element=a,c.className="InteractionObject",c._disposers.push(new DictionaryDisposer(c.inertias)),c._disposers.push(new DictionaryDisposer(c.eventDisposers)),c.applyTheme(),c}return Object.defineProperty(o.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isHover",{get:function(){return this._isHover},set:function(a){this.isHover!=a&&(this._isHover=a,a?getInteraction().overObjects.moveValue(this):(this.isRealHover=!1,getInteraction().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(a){this.isHoverByTouch!=a&&(this._isHoverByTouch=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new List),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDown",{get:function(){return this._isDown},set:function(a){this.isDown!=a&&(this._isDown=a,a?getInteraction().downObjects.moveValue(this):getInteraction().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new List),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isFocused",{get:function(){return this._isFocused},set:function(a){this.isFocused!=a&&(this._isFocused=a,a?getInteraction().focusedObject=this:getInteraction().focusedObject=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(a){this._isTouchProtected!=a&&(this._isTouchProtected=a,a?getInteraction().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&getInteraction().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"clickable",{get:function(){return this._clickable},set:function(a){this._clickable!==a&&(this._clickable=a,getInteraction().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(a){this._contextMenuDisabled!==a&&(this._contextMenuDisabled=a,getInteraction().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoverable",{get:function(){return this._hoverable},set:function(a){this._hoverable!==a&&(this._hoverable=a,getInteraction().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"trackable",{get:function(){return this._trackable},set:function(a){this._trackable!==a&&(this._trackable=a,getInteraction().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"draggable",{get:function(){return this._draggable},set:function(a){this._draggable!==a&&(this._draggable=a,getInteraction().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"swipeable",{get:function(){return this._swipeable},set:function(a){this._swipeable!==a&&(this._swipeable=a,getInteraction().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"resizable",{get:function(){return this._resizable},set:function(a){this._resizable!==a&&(this._resizable=a,getInteraction().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wheelable",{get:function(){return this._wheelable},set:function(a){this._wheelable!==a&&(this._wheelable=a,getInteraction().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inert",{get:function(){return this._inert},set:function(a){this._inert!==a&&(this._inert=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusable",{get:function(){return this._focusable},set:function(a){this._focusable!==a&&(this._focusable=a,this._focusable&&this.tabindex==-1&&(this._tabindex=1),getInteraction().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tabindex",{get:function(){return getValueDefault(this._tabindex,-1)},set:function(a){this._tabindex!==a&&(this._tabindex=a,a>-1&&(this.focusable=!0),getInteraction().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(a){this._element=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(a){this._originalPosition=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"originalScale",{get:function(){return getValueDefault(this._originalScale,1)},set:function(a){this._originalScale!==a&&(this._originalScale=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"originalAngle",{get:function(){return getValueDefault(this._originalAngle,0)},set:function(a){this._originalAngle!==a&&(this._originalAngle=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(a){this._inertiaOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(a){this._hitOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(a){this._hoverOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(a){this._swipeOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(a){this._keyboardOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(a){this._mouseOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(a){this._cursorOptions=a},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.inertiaOptions=a.inertiaOptions,this.hitOptions=a.hitOptions,this.hoverOptions=a.hoverOptions,this.swipeOptions=a.swipeOptions,this.keyboardOptions=a.keyboardOptions,this.cursorOptions=a.cursorOptions,this.contextMenuDisabled=a.contextMenuDisabled,getInteraction().applyCursorOverStyle(this)},o.prototype.setEventDisposer=function(a,c,d){var g=this.eventDisposers.getKey(a);c?g==null&&this.eventDisposers.setKey(a,d()):g!=null&&(g.dispose(),this.eventDisposers.removeKey(a))},o.prototype.dispose=function(){e.prototype.dispose.call(this);var a=getInteraction();a.overObjects.removeValue(this),a.downObjects.removeValue(this),a.trackedObjects.removeValue(this),a.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&a.unlockWheel(),a.focusedObject===this&&(a.focusedObject=void 0)},o}(BaseObjectEvents),InteractionKeyboardObject=function(){function e(o,a){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=o,this.keyboardEvent=a,this._startedOn=new Date().getTime(),getInteraction().processDragStart(o),system.animations.push(this),this.update()}return e.prototype.update=function(){var o=this.interaction,a=getInteraction().getKeyboardOption(o,"speed"),c=getInteraction().getKeyboardOption(o,"accelleration"),d=getInteraction().getKeyboardOption(o,"accellerationDelay"),g={x:0,y:0};this.keyboardEvent.shiftKey?(a*=.5,c=1):this.keyboardEvent.ctrlKey&&(a*=2);var b=new Date().getTime()-this._startedOn,j=b-d;if(c>0&&j>0){var $=b/d;b=d,g.x+=this.directionX*(a*c*$*j),g.y+=this.directionY*(a*c*$*j)}g.x+=this.directionX*(a*b),g.y+=this.directionY*(a*b),getInteraction().handleTransformMove(o,g,{x:0,y:0},this.keyboardEvent,!0,!1)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(getInteraction().processDragStop(this.interaction),remove(system.animations,this))},e}(),Inertia=function(e){__extends(o,e);function o(a,c,d,g){var b=e.call(this)||this;return b.animations=[],b.className="Inertia",b.interaction=a,b.type=c,b.point=d,b.startPoint=g,b._disposers.push(new AnimationDisposer(b.animations)),b}return Object.defineProperty(o.prototype,"x",{get:function(){return this.point.x},set:function(a){isNumber$1(a)&&(this.point.x=a,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.point.y},set:function(a){isNumber$1(a)&&(this.point.y=a,this.handleMove())},enumerable:!0,configurable:!0}),o.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var a={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1};this.interaction.events.dispatchImmediately("drag",a)}},o.prototype.done=function(){this.interaction.inertias.removeKey(this.type),this.type==="move"&&getInteraction().processDragStop(this.interaction),this.dispose()},o}(BaseObject),Keyboard=function(){function e(){}return e.prototype.getEventKey=function(o){var a=o.keyCode||o.which,c;switch(a){case 38:c="up";break;case 40:c="down";break;case 37:c="left";break;case 39:c="right";break;case 13:c="enter";break;case 27:c="esc";break;case 36:c="home";break;case 35:c="end";break;case 9:c="tab";break;case 17:c="ctrl";break;case 18:c="alt";break;case 16:c="shift";break;case 32:c="space";break;case 36:c="home";break;case 35:c="end";break;case 33:c="pgup";break;case 34:c="pgdn";break;case 45:c="ins";break;case 46:c="del";break;case 107:c="plus";break;case 109:c="minus";break;default:c="other";break}return c},e.prototype.isKey=function(o,a){var c=this.getEventKey(o);return isString$1(a)&&(a=[a]),a.indexOf(c)!==-1},e.prototype.shiftKey=function(o){return o.shiftKey},e.prototype.ctrlKey=function(o){return o.ctrlKey},e.prototype.altKey=function(o){return o.altKey},e.prototype.metaKey=function(o){return o.metaKey},e}(),keyboard=new Keyboard,timeUnitDurations={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function getNextUnit(e){switch(e){case"year":return;case"month":return"year";case"week":return"month";case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function getDuration(e,o){return hasValue(o)||(o=1),timeUnitDurations[e]*o}function now(){return new Date}function getTime(){return now().getTime()}function copy(e){return new Date(e.getTime())}function checkChange(e,o,a,c){e=new Date(e.getTime()),o=new Date(o.getTime());var d=0,g=0;!c&&a!="millisecond"&&(d=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-d),g=o.getTimezoneOffset(),o.setUTCMinutes(o.getUTCMinutes()-g));var b=!1;switch(a){case"year":e.getUTCFullYear()!=o.getUTCFullYear()&&(b=!0);break;case"month":(e.getUTCFullYear()!=o.getUTCFullYear()||e.getUTCMonth()!=o.getUTCMonth())&&(b=!0);break;case"day":(e.getUTCMonth()!=o.getUTCMonth()||e.getUTCDate()!=o.getUTCDate())&&(b=!0);break;case"hour":e.getUTCHours()!=o.getUTCHours()&&(b=!0);break;case"minute":e.getUTCMinutes()!=o.getUTCMinutes()&&(b=!0);break;case"second":e.getUTCSeconds()!=o.getUTCSeconds()&&(b=!0);break;case"millisecond":e.getTime()!=o.getTime()&&(b=!0);break}if(b)return!0;var j=getNextUnit(a);return j?(e.setUTCMinutes(e.getUTCMinutes()+d),o.setUTCMinutes(o.getUTCMinutes()+g),checkChange(e,o,j,c)):!1}function add(e,o,a,c){var d=0;switch(!c&&o!="millisecond"&&(d=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-d)),o){case"day":var g=e.getUTCDate();e.setUTCDate(g+a);break;case"second":var b=e.getUTCSeconds();e.setUTCSeconds(b+a);break;case"millisecond":var j=e.getUTCMilliseconds();e.setUTCMilliseconds(j+a);break;case"hour":var $=e.getUTCHours();e.setUTCHours($+a);break;case"minute":var _e=e.getUTCMinutes();e.setUTCMinutes(_e+a);break;case"year":var st=e.getUTCFullYear();e.setUTCFullYear(st+a);break;case"month":var rt=e.getUTCMonth();e.setUTCMonth(rt+a);break;case"week":var ut=e.getUTCDate();e.setUTCDate(ut+a*7);break}if(!c&&o!="millisecond"&&(e.setUTCMinutes(e.getUTCMinutes()+d),o=="day"||o=="week"||o=="month"||o=="year")){var gt=e.getTimezoneOffset();if(gt!=d){var yt=gt-d;e.setUTCMinutes(e.getUTCMinutes()+yt),e.getTimezoneOffset()!=gt&&e.setUTCMinutes(e.getUTCMinutes()-yt)}}return e}function round(e,o,a,c,d,g,b,j){b===void 0&&(b=0),isNumber$1(a)||(a=1);var $=0;switch(j&&["day","month","week","year"].indexOf(o)!=-1&&(e=setTimezone(e,j)),!d&&o!="millisecond"&&($=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-$)),o){case"day":var _e=e.getUTCDate();if(a>1){if(g){g=round(g,"day",1);var st=e.getTime()-g.getTime(),rt=Math.floor(st/getDuration("day")/a),ut=getDuration("day",rt*a);e.setTime(g.getTime()+ut-$*getDuration("minute"))}}else e.setUTCDate(_e);e.setUTCHours(0,0,0,0);break;case"second":var gt=e.getUTCSeconds();a>1&&(gt=Math.floor(gt/a)*a),e.setUTCSeconds(gt,0);break;case"millisecond":if(a==1)return e;var yt=e.getUTCMilliseconds();yt=Math.floor(yt/a)*a,e.setUTCMilliseconds(yt);break;case"hour":var wt=e.getUTCHours();a>1&&(wt=Math.floor(wt/a)*a),e.setUTCHours(wt,b,0,0);break;case"minute":var Ct=e.getUTCMinutes();yt=e.getUTCMilliseconds(),a>1&&(Ct=Math.floor(Ct/a)*a),e.setUTCMinutes(Ct,0,0);break;case"month":var Pt=e.getUTCMonth();a>1&&(Pt=Math.floor(Pt/a)*a),e.setUTCMonth(Pt,1),e.setUTCHours(0,b,0,0);break;case"year":var At=e.getUTCFullYear();a>1&&(At=Math.floor(At/a)*a),e.setUTCFullYear(At,0,1),e.setUTCHours(0,b,0,0);break;case"week":var Tt=e.getUTCDate(),kt=e.getUTCDay();isNumber$1(c)||(c=1),kt>=c?Tt=Tt-kt+c:Tt=Tt-(7+kt)+c,e.setUTCDate(Tt),e.setUTCHours(0,b,0,0);break}if(!d&&o!="millisecond"&&(e.setUTCMinutes(e.getUTCMinutes()+$),o=="day"||o=="week"||o=="month"||o=="year")){var It=e.getTimezoneOffset();if(It!=$){var Lt=It-$;e.setUTCMinutes(e.getUTCMinutes()+Lt)}}return e}function setTimezone(e,o){var a=new Date(e.toLocaleString("en-US",{timeZone:o}));return a}function getTimezoneMinutes(e){var o=new Date;o.setHours(0,0,0,0);var a=setTimezone(o,e);return a.getMinutes()}const Time=Object.freeze(Object.defineProperty({__proto__:null,add,checkChange,copy,getDuration,getNextUnit,getTime,getTimezoneMinutes,now,round,setTimezone,timeUnitDurations},Symbol.toStringTag,{value:"Module"}));var Interaction=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._globalEventsAdded=!1,a._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},a._usePointerEventsOnly=!1,a._useTouchEventsOnly=!1,a._addHoverEvents=!0,a._passiveSupported=!1,a._delayedEvents={out:[]},a.overObjects=new List,a.downObjects=new List,a.trackedObjects=new List,a.transformedObjects=new List,a.pointers=new Dictionary,a.inertiaOptions=new Dictionary,a.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},a.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},a.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},a.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},a.mouseOptions={sensitivity:1},a.className="Interaction",a.body=a.getInteraction(document.body),a._disposers.push(a.body),window.hasOwnProperty("PointerEvent")?(a._pointerEvents.pointerdown="pointerdown",a._pointerEvents.pointerup="pointerup",a._pointerEvents.pointermove="pointermove",a._pointerEvents.pointercancel="pointercancel",a._pointerEvents.pointerover="pointerover",a._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(a._pointerEvents.pointerdown="MSPointerDown",a._pointerEvents.pointerup="MSPointerUp",a._pointerEvents.pointermove="MSPointerMove",a._pointerEvents.pointercancel="MSPointerUp",a._pointerEvents.pointerover="MSPointerOver",a._pointerEvents.pointerout="MSPointerOut"):typeof matchMedia<"u"&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(a._addHoverEvents=!1,a._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)||a.fullFF()?a._usePointerEventsOnly=!0:a._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?a._pointerEvents.wheel="wheel":hasValue(document.onmousewheel)&&(a._pointerEvents.wheel="mousewheel"),a.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:polyOut3}),a.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:polyOut3}),a._passiveSupported=o.passiveSupported,a.applyTheme(),a}return o.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},o.prototype.debug=function(){},o.prototype.addGlobalEvents=function(){var a=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(addEventListener$1(document,this._pointerEvents.pointerdown,function(c){a.handleGlobalPointerDown(c)})),this._disposers.push(addEventListener$1(document,this._pointerEvents.pointermove,function(c){a.handleGlobalPointerMove(c)})),this._disposers.push(addEventListener$1(document,this._pointerEvents.pointerup,function(c){a.handleGlobalPointerUp(c)})),this._disposers.push(addEventListener$1(document,this._pointerEvents.pointercancel,function(c){a.handleGlobalPointerUp(c,!0)})),this._disposers.push(addEventListener$1(document,"mouseenter",function(c){!hasValue(c.relatedTarget)&&(c.buttons==0||c.which==0)&&a.handleDocumentLeave(c)}))),this._usePointerEventsOnly||(this._disposers.push(addEventListener$1(document,"touchstart",function(c){a.handleGlobalTouchStart(c)})),this._disposers.push(addEventListener$1(document,"touchmove",function(c){a.handleGlobalTouchMove(c)})),this._disposers.push(addEventListener$1(document,"touchend",function(c){a.handleGlobalTouchEnd(c)}))),this._disposers.push(addEventListener$1(document,"keydown",function(c){a.handleGlobalKeyDown(c)})),this._disposers.push(addEventListener$1(document,"keyup",function(c){a.handleGlobalKeyUp(c)})),this._globalEventsAdded=!0)},o.prototype.processClickable=function(a){this.processTouchable(a)},o.prototype.processContextMenu=function(a){a.contextMenuDisabled?a.eventDisposers.hasKey("contextMenuDisabled")||a.eventDisposers.setKey("contextMenuDisabled",addEventListener$1(a.element,"contextmenu",function(c){c.preventDefault()})):a.eventDisposers.hasKey("contextMenuDisabled")&&a.eventDisposers.getKey("contextMenuDisabled").dispose()},o.prototype.processHoverable=function(a){var c=this;if(a.hoverable||a.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(a),!a.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&a.eventDisposers.setKey("hoverable",new MultiDisposer([addEventListener$1(a.element,this._pointerEvents.pointerout,function(g){return c.handlePointerOut(a,g)}),addEventListener$1(a.element,this._pointerEvents.pointerover,function(g){return c.handlePointerOver(a,g)})])),a.trackable;else{var d=a.eventDisposers.getKey("hoverable");d!=null&&(d.dispose(),a.eventDisposers.removeKey("hoverable"))}this.processTouchable(a)},o.prototype.processMovable=function(a){(a.draggable||a.swipeable||a.trackable||a.resizable)&&(!this.isGlobalElement(a)&&!a.isTouchProtected&&this.prepElement(a),this.applyCursorOverStyle(a)),this.processTouchable(a)},o.prototype.processTrackable=function(a){this.processHoverable(a),this.processMovable(a),a.trackable?this.trackedObjects.moveValue(a):this.trackedObjects.removeValue(a)},o.prototype.processDraggable=function(a){this.processMovable(a)},o.prototype.processSwipeable=function(a){this.processMovable(a)},o.prototype.processResizable=function(a){this.processMovable(a)},o.prototype.processWheelable=function(a){var c=this;if(a.wheelable)a.eventDisposers.hasKey("wheelable")||a.eventDisposers.setKey("wheelable",new MultiDisposer([addEventListener$1(a.element,this._pointerEvents.wheel,function(g){return c.handleMouseWheel(a,g)},this._passiveSupported?{passive:!1}:!1),a.events.on("out",function(g){a.wheelable&&c.unlockWheel()}),a.events.on("over",function(g){a.wheelable&&c.lockWheel()})]));else{var d=a.eventDisposers.getKey("wheelable");d!=null&&(d.dispose(),a.eventDisposers.removeKey("wheelable"))}},o.prototype.processFocusable=function(a){var c=this;if(a.focusable===!0&&a.tabindex>-1&&!this._useTouchEventsOnly)a.eventDisposers.hasKey("focusable")||a.eventDisposers.setKey("focusable",new MultiDisposer([addEventListener$1(a.element,"focus",function(g){return c.handleFocus(a,g)}),addEventListener$1(a.element,"blur",function(g){return c.handleBlur(a,g)}),addEventListener$1(a.element,this._pointerEvents.pointerdown,function(g){return c.handleFocusBlur(a,g)}),addEventListener$1(a.element,"touchstart",function(g){return c.handleFocusBlur(a,g)},this._passiveSupported?{passive:!1}:!1)]));else{var d=a.eventDisposers.getKey("focusable");d!=null&&(d.dispose(),a.eventDisposers.removeKey("focusable"))}},o.prototype.processTouchable=function(a){var c=this;if(a.clickable||a.hoverable||a.trackable||a.draggable||a.swipeable||a.resizable)this.addGlobalEvents(),a.eventDisposers.hasKey("touchable")||(!this._useTouchEventsOnly&&!this._usePointerEventsOnly?a.eventDisposers.setKey("touchable",new MultiDisposer([addEventListener$1(a.element,this._pointerEvents.pointerdown,function(g){return c.handlePointerDown(a,g)}),addEventListener$1(a.element,"touchstart",function(g){return c.handleTouchDown(a,g)},this._passiveSupported?{passive:!1}:!1)])):this._useTouchEventsOnly?this._usePointerEventsOnly||a.eventDisposers.setKey("touchable",addEventListener$1(a.element,"touchstart",function(g){return c.handleTouchDown(a,g)},this._passiveSupported?{passive:!1}:!1)):a.eventDisposers.setKey("touchable",addEventListener$1(a.element,this._pointerEvents.pointerdown,function(g){return c.handlePointerDown(a,g)})));else{var d=a.eventDisposers.getKey("touchable");d!=null&&(d.dispose(),a.eventDisposers.removeKey("touchable"))}},o.prototype.handleFocus=function(a,c){if(!a.focusable){c.preventDefault();return}if(a.isFocused=!0,a.events.isEnabled("focus")&&!system.isPaused){var d={type:"focus",target:a,event:c};a.events.dispatchImmediately("focus",d)}},o.prototype.handleFocusBlur=function(a,c){a.focusable!==!1&&this.getHitOption(a,"noFocus")&&a.events.once("focus",function(){a.events.disableType("blur"),blur(),a.sprite&&a.sprite.handleBlur(),a.events.enableType("blur")})},o.prototype.handleBlur=function(a,c){if(!a.focusable){c.preventDefault();return}if(a.isFocused=!1,a.events.isEnabled("blur")&&!system.isPaused){var d={type:"blur",target:a,event:c};a.events.dispatchImmediately("blur",d)}},o.prototype.handleGlobalKeyDown=function(a){if(this.focusedObject){if(keyboard.isKey(a,"esc"))blur();else if(this.focusedObject.draggable&&keyboard.isKey(a,["up","down","left","right"])){a.preventDefault();var c=this.focusedObject,d="interactionKeyboardObject";if(c.eventDisposers.hasKey(d))return;var g=new InteractionKeyboardObject(c,a);switch(c.eventDisposers.setKey(d,g),keyboard.getEventKey(a)){case"up":g.directionY=-1;break;case"down":g.directionY=1;break;case"left":g.directionX=-1;break;case"right":g.directionX=1;break}}}},o.prototype.handleGlobalKeyUp=function(a){var c="interactionKeyboardObject";if(this.focusedObject){var d=this.focusedObject.eventDisposers.getKey(c);d!=null&&(a.preventDefault(),d.dispose(),this.focusedObject.eventDisposers.removeKey(c));var g=this.focusedObject.sprite;keyboard.isKey(a,"enter")&&g&&(g.events.isEnabled("hit")||g.events.isEnabled("toggled")?this.focusedObject.dispatchImmediately("hit"):g.showTooltipOn=="hit"&&this.focusedObject.dispatchImmediately("up"))}},o.prototype.handleGlobalPointerMove=function(a){var c=this.getPointer(a);if(c.point=this.getPointerPoint(a),this.events.isEnabled("track")&&!system.isPaused){var d={type:"track",target:this,event:a,pointer:c,touch:c.touch};this.events.dispatchImmediately("track",d)}this.addBreadCrumb(c,c.point),this.handleGlobalMove(c,a)},o.prototype.handleGlobalPointerDown=function(a){this.processDelayed();var c=this.getPointer(a);if(this.events.isEnabled("down")&&!system.isPaused){var d={type:"down",target:this,event:a,pointer:c,touch:c.touch};this.events.dispatchImmediately("down",d)}},o.prototype.preventTouchAction=function(a){a.defaultPrevented||a.preventDefault()},o.prototype.handleGlobalPointerUp=function(a,c){c===void 0&&(c=!1);var d=this.getPointer(a);if(this.events.isEnabled("up")&&!system.isPaused){var g={type:"up",target:this,event:a,pointer:d,touch:d.touch};this.events.dispatchImmediately("up",g)}this.handleGlobalUp(d,a,c)},o.prototype.handleGlobalTouchMove=function(a){for(var c=0;c<a.changedTouches.length;c++){var d=this.getPointer(a.changedTouches[c]);if(d.point=this.getPointerPoint(a.changedTouches[c]),this.events.isEnabled("track")&&!system.isPaused){var g={type:"track",target:this,event:a,pointer:d,touch:d.touch};this.events.dispatchImmediately("track",g)}this.addBreadCrumb(d,d.point),this.handleGlobalMove(d,a)}},o.prototype.handleGlobalTouchStart=function(a){this.processDelayed();for(var c=0;c<a.changedTouches.length;c++){var d=this.getPointer(a.changedTouches[c]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!system.isPaused){var g={type:"down",target:this,event:a,pointer:d,touch:d.touch};this.events.dispatchImmediately("down",g)}}},o.prototype.handleGlobalTouchEnd=function(a){for(var c=0;c<a.changedTouches.length;c++){var d=this.getPointer(a.changedTouches[c]);if(this.events.isEnabled("up")&&!system.isPaused){var g={type:"up",target:this,event:a,pointer:d,touch:d.touch};this.events.dispatchImmediately("up",g)}this.handleGlobalUp(d,a)}},o.prototype.handlePointerDown=function(a,c){var d=this.getPointer(c);!d.touch&&c.which!=1&&c.which!=3||(d.button=c.which,this.resetPointer(d,c),this.handleDown(a,d,c))},o.prototype.handlePointerOver=function(a,c){var d=this.getPointer(c);this.handleOver(a,d,c)},o.prototype.handlePointerOut=function(a,c){var d=this.getPointer(c);this.handleOut(a,d,c)},o.prototype.handleMouseWheel=function(a,c){var d=this.getPointer(c);d.point=this.getPointerPoint(c);var g=0,b=0,j=1;if(c.deltaMode==1&&(j=50),j*=this.getMouseOption(a,"sensitivity"),c instanceof WheelEvent)g=Math.round(-1*c.wheelDeltaX||c.deltaX*j),b=Math.round(-1*c.wheelDeltaY||c.deltaY*j);else throw new Error("Invalid event type");this.handleWheel(a,d,g,b,c)},o.prototype.handleTouchDown=function(a,c){for(var d=0;d<c.changedTouches.length;d++){var g=this.getPointer(c.changedTouches[d]);this.maybePreventDefault(a,c,g),this.resetPointer(g,c.changedTouches[d]),this.handleDown(a,g,c)}},o.prototype.handleHit=function(a,c,d){var g=getTime();if(a.lastHit&&a.lastHit>=g-this.getHitOption(a,"doubleHitTime")){if(g-a.lastHit<100)return;if(a.lastHit=void 0,a.lastHitPointer=void 0,a.events.isEnabled("doublehit")&&!system.isPaused){var b={type:"doublehit",target:a,point:c.point,event:d,touch:c.touch};a.events.dispatchImmediately("doublehit",b)}}else if(a.lastHit=g,a.lastHitPointer=c,c.button===3){if(a.events.isEnabled("rightclick")&&!system.isPaused){var b={type:"rightclick",target:a,event:d};a.events.dispatchImmediately("rightclick",b)}}else if(a.events.isEnabled("hit")&&!system.isPaused){var b={type:"hit",target:a,event:d,point:c.point,touch:c.touch};a.events.dispatchImmediately("hit",b)}},o.prototype.handleOver=function(a,c,d,g){if(a.hoverable){var b=!1;if(this.shouldCancelHovers(c)&&this.areTransformed()&&this.moved(c,this.getHitOption(a,"hitTolerance"))&&(b=!0,this.cancelAllHovers(d)),this.processDelayed(),a.overPointers.moveValue(c),!a.isRealHover&&(b||(a.isHover=!0,a.isRealHover=!0,this.overObjects.moveValue(a)),this.handleTrack(this.body,c,d,!0),a.events.isEnabled("over")&&!system.isPaused&&!b)){var j={type:"over",target:a,event:d,pointer:c,touch:c.touch};a.events.dispatchImmediately("over",j)}}},o.prototype.handleOut=function(a,c,d,g,b){var j=this;if(g===void 0&&(g=!1),b===void 0&&(b=!1),!!a.hoverable&&(a.overPointers.removeValue(c),a.isHover&&(!a.hasDelayedOut||b))){if(g&&a.overPointers.length)return;if(c&&c.touch&&!b&&!this.old(c)){var $=this.getHoverOption(a,"touchOutBehavior");if($=="leave"){this._delayedEvents.out.push({type:"out",io:a,pointer:c,event:d,keepUntil:getTime()+500}),a.hasDelayedOut=!0;return}else if($=="delay"&&this.getHoverOption(a,"touchOutDelay")){this._delayedEvents.out.push({type:"out",io:a,pointer:c,event:d,keepUntil:getTime()+500,timeout:this.setTimeout(function(){j.handleOut(a,c,d,!0)},this.getHoverOption(a,"touchOutDelay"))});return}}if(a.isHover=!1,this.overObjects.removeValue(a),!a.isDisposed()&&a.events.isEnabled("out")&&!system.isPaused){var _e={type:"out",target:a,event:d,pointer:c,touch:c.touch};a.events.dispatchImmediately("out",_e)}a.overPointers.clear(),a.hasDelayedOut=!1}},o.prototype.processDelayed=function(){for(var a;a=this._delayedEvents.out.pop(),!!a;)a.timeout&&a.timeout.dispose(),this.handleOut(a.io,a.pointer,a.event,!1,!0)},o.prototype.handleDown=function(a,c,d){if(this.maybePreventDefault(a,d,c),a.inert&&this.stopInertia(a),this.handleOver(a,c,d,!0),a.downPointers.moveValue(c),this.applyCursorDownStyle(a,c),a.isDown||(a.focusable!==!1&&this.getHitOption(a,"noFocus")&&this.focusedObject&&blur(),a.isDown=!0,this.downObjects.moveValue(a),a.draggable&&this.processDragStart(a,c,d),a.resizable&&this.processResizeStart(a,c,d)),a.events.isEnabled("down")&&!system.isPaused){var g={type:"down",target:a,event:d,pointer:c,touch:c.touch};a.events.dispatchImmediately("down",g)}},o.prototype.handleGlobalUp=function(a,c,d){var g=this;d===void 0&&(d=!1);var b=this.downObjects.values.slice();b.sort(function(j,$){if(j&&$){var _e=j.element.compareDocumentPosition($.element);return _e&Node.DOCUMENT_POSITION_CONTAINED_BY?1:_e&Node.DOCUMENT_POSITION_CONTAINS?-1:0}else return 0}),each$2(b,function(j){j&&j.downPointers.contains(a)&&g.handleUp(j,a,c,d)})},o.prototype.handleDocumentLeave=function(a){var c=this;each(this.downObjects.backwards().iterator(),function(d){d.downPointers.each(function(g){c.handleUp(d,g,a)})})},o.prototype.handleUp=function(a,c,d,g){if(g===void 0&&(g=!1),this.restoreCursorDownStyle(a,c),a.downPointers.removeValue(c),(c&&c.touch||this._useTouchEventsOnly)&&this.handleOut(a,c,d,!0),a.isDown){if(a.downPointers.length==0&&(a.isDown=!1,this.downObjects.removeValue(a)),a.events.isEnabled("up")&&!system.isPaused&&c){var b={type:"up",target:a,event:d,pointer:c,touch:c.touch};a.events.dispatchImmediately("up",b)}g||(a.swipeable&&this.swiped(a,c)?this.handleSwipe(a,c,d):(a.clickable&&!this.moved(c,this.getHitOption(a,"hitTolerance"))&&this.handleHit(a,c,d),a.inert&&this.moved(c,this.getHitOption(a,"hitTolerance"))?this.handleInertia(a,c):a.draggable&&this.processDragStop(a,c,d),a.resizable&&this.processResizeStop(a,c,d)))}},o.prototype.maybePreventDefault=function(a,c,d){hasValue(c)&&(a.draggable||a.swipeable||a.trackable||a.resizable)&&!this.isGlobalElement(a)&&c.cancelable!==!1&&(!a.isTouchProtected||!d||!d.touch)&&c.preventDefault()},o.prototype.cancelAllHovers=function(a){var c=this;each(this.overObjects.backwards().iterator(),function(d){if(d){var g=d.overPointers.getIndex(0);c.handleOut(d,g,a,!0,!0)}})},o.prototype.shouldCancelHovers=function(a){return options.disableHoverOnTransform=="always"||options.disableHoverOnTransform=="touch"&&a.touch},o.prototype.handleGlobalMove=function(a,c){var d=this;if(!a.touch){var g=eventTarget(a.lastEvent);each(this.overObjects.backwards().iterator(),function(b){if(b&&b.overPointers.contains(a)&&b.hoverable){var j=!1;b.element&&a.lastEvent&&contains(b.element,g)||(j=!0),j&&d.handleOut(b,a,c,!0)}})}each(this.transformedObjects.backwards().iterator(),function(b){b.downPointers.contains(a)&&!(b.swipeable&&d.swiping(b,a))&&(b.draggable||b.resizable)&&d.handleTransform(b,c)}),each(this.trackedObjects.backwards().iterator(),function(b){b.overPointers.contains(a)||d.handleTrack(b,a,c)})},o.prototype.handleTrack=function(a,c,d,g){if(g===void 0&&(g=!1),!(!g&&!this.moved(c,0))&&a.events.isEnabled("track")&&!system.isPaused){var b={type:"track",target:a,event:d,point:c.point,pointer:c,touch:c.touch};a.events.dispatchImmediately("track",b)}},o.prototype.handleSwipe=function(a,c,d){if(a.events.isEnabled("swipe")&&!system.isPaused){var g={type:"swipe",target:a,event:d,touch:c.touch};a.events.dispatchImmediately("swipe",g)}if(c.startPoint.x<c.point.x){if(a.events.isEnabled("swiperight")&&!system.isPaused){var g={type:"swiperight",target:a,event:d,touch:c.touch};a.events.dispatchImmediately("swiperight",g)}}else if(a.events.isEnabled("swipeleft")&&!system.isPaused){var g={type:"swipeleft",target:a,event:d,touch:c.touch};a.events.dispatchImmediately("swipeleft",g)}},o.prototype.handleWheel=function(a,c,d,g,b){var j={x:d,y:g};a.events.isEnabled("wheel")&&!system.isPaused&&a.events.dispatchImmediately("wheel",{type:"wheel",target:a,event:b,point:c.point,shift:j}),d<0?a.events.isEnabled("wheelleft")&&!system.isPaused&&a.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:a,event:b,point:c.point,shift:j}):d>0?a.events.isEnabled("swiperight")&&!system.isPaused&&a.events.dispatchImmediately("wheelright",{type:"wheelright",target:a,event:b,point:c.point,shift:j}):g<0?a.events.isEnabled("wheelup")&&!system.isPaused&&a.events.dispatchImmediately("wheelup",{type:"wheelup",target:a,event:b,point:c.point,shift:j}):g>0&&a.events.isEnabled("wheeldown")&&!system.isPaused&&a.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:a,event:b,point:c.point,shift:j})},o.prototype.handleInertia=function(a,c){a.draggable&&a.downPointers.length===0&&this.handleMoveInertia(a,c),a.resizable&&a.downPointers.length>1&&this.handleResizeInertia(a,c)},o.prototype.handleMoveInertia=function(a,c){var d=a,g="move",b={x:c.point.x,y:c.point.y},j={x:c.startPoint.x,y:c.startPoint.y},$=new Inertia(d,g,b,j),_e=this.getTrailPoint(c,getTime()-this.getInertiaOption(a,"move","time"));if(typeof _e>"u"){this.processDragStop(a,c,c.lastUpEvent);return}var st=this.getInertiaOption(a,"move","factor"),rt=[{to:c.point.x+(c.point.x-_e.point.x)*st,property:"x"},{to:c.point.y+(c.point.y-_e.point.y)*st,property:"y"}],ut=new Animation($,rt,this.getInertiaOption(a,"move","duration"),this.getInertiaOption(a,"move","easing")).start();this._disposers.push(ut.events.on("animationended",function(gt){$.done()})),a.inertias.setKey("move",$)},o.prototype.handleResizeInertia=function(a,c){},o.prototype.handleTransform=function(a,c){var d=a.downPointers.getIndex(0),g=null,b=null;d&&(g=d.point,b=d.startPoint);var j,$,_e;$={x:a.originalPosition.x,y:a.originalPosition.y},_e=$;for(var st=!0,rt=1;rt<a.downPointers.length;rt++){var ut=a.downPointers.getIndex(rt);if(b.x!=ut.startPoint.x&&b.y!=ut.startPoint.y){st=!1,j=ut,$=j.point,_e=j.startPoint;break}}var gt=d&&this.moved(d,0);if(a.draggable&&d&&d.dragStartEvents&&d.dragStartEvents.length&&gt&&a.events.isEnabled("dragstart")&&!system.isPaused&&a.events.dispatchImmediately("dragstart",d.dragStartEvents.shift()),st&&a.draggable)this.handleTransformMove(a,g,b,c,gt,d.touch),this.shouldCancelHovers(d)&&this.moved(d,this.getHitOption(a,"hitTolerance"))&&this.cancelAllHovers(c);else{var yt=j&&this.moved(j,0);(this.shouldCancelHovers(d)&&this.moved(d,this.getHitOption(a,"hitTolerance"))||this.shouldCancelHovers(j)&&this.moved(j,this.getHitOption(a,"hitTolerance")))&&this.cancelAllHovers(c),a.draggable&&a.resizable?(this.handleTransformMove(a,g,b,c,gt&&yt,d.touch),this.handleTransformResize(a,g,b,$,_e,c,gt&&yt,d.touch)):(a.draggable&&this.handleTransformMove(a,g,b,c,gt,d.touch),a.resizable&&(!st||c.ctrlKey)&&this.handleTransformResize(a,g,b,$,_e,c,gt&&yt,d.touch))}},o.prototype.handleTransformMove=function(a,c,d,g,b,j){if(b&&a.events.isEnabled("drag")&&!system.isPaused&&(!a.isTouchProtected||!j)){var $={type:"drag",target:a,event:g,shift:{x:c.x-d.x,y:c.y-d.y},startPoint:d,point:c,touch:j};a.events.dispatchImmediately("drag",$)}},o.prototype.handleTransformResize=function(a,c,d,g,b,j,$,_e){if(a.events.isEnabled("resize")&&!system.isPaused&&(!a.isTouchProtected||!_e)){var st={type:"resize",target:a,event:j,scale:getScale(c,d,g,b),startPoint1:d,point1:c,startPoint2:b,point2:g,touch:_e};a.events.dispatchImmediately("resize",st)}},o.prototype.processDragStart=function(a,c,d){this.transformedObjects.moveValue(a),this.shouldCancelHovers(c)&&this.cancelAllHovers(d);var g={type:"dragstart",target:a,event:d,touch:c?c.touch:!1};c&&(c.dragTarget=a),c&&c.dragStartEvents?c.dragStartEvents.push(g):system.isPaused||a.dispatchImmediately("dragstart",g)},o.prototype.processDragStop=function(a,c,d){if(c||(c=this.getDragPointer(a)),c&&(c.dragTarget=void 0),this.transformedObjects.removeValue(a),(!c||this.moved(c,0))&&a.events.isEnabled("dragstop")&&!system.isPaused){var g={type:"dragstop",target:a,touch:c?c.touch:!1};a.events.dispatchImmediately("dragstop",g)}},o.prototype.processResizeStart=function(a,c,d){this.transformedObjects.moveValue(a)},o.prototype.processResizeStop=function(a,c,d){this.transformedObjects.removeValue(a)},o.prototype.dragStart=function(a,c){c||(c=this.getDragPointer(a)),c&&this.handleDown(a,c,c.lastDownEvent)},o.prototype.dragStop=function(a,c,d){c||(c=this.getDragPointer(a)),c&&!d&&this.handleGlobalUp(c,c.lastUpEvent,d)},o.prototype.getDragPointer=function(a){return a?a.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},o.prototype.getPointerId=function(a){var c="";return hasValue(a.identifier)?c=""+a.identifier:hasValue(a.pointerId)?c=""+a.pointerId:c="m",c.replace("-","")},o.prototype.getPointerPoint=function(a){return{x:a.clientX,y:a.clientY}},o.prototype.getPointer=function(a){var c=this.getPointerId(a),d=this.getPointerPoint(a),g;return this.pointers.hasKey(c)?(g=this.pointers.getKey(c),g.touch=this.isPointerTouch(a)):(g={id:c,touch:this.isPointerTouch(a),startPoint:d,startTime:getTime(),point:d,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(g,d),this.pointers.setKey(c,g)),g.lastEvent=a,this.lastPointer=g,g},o.prototype.isPointerTouch=function(a){if(typeof Touch<"u"&&a instanceof Touch)return!0;if(typeof PointerEvent<"u"&&a instanceof PointerEvent&&hasValue(a.pointerType))switch(a.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(a instanceof MouseEvent)}else if(hasValue(a.type)&&a.type.match(/^mouse/))return!1;return!0},o.prototype.resetPointer=function(a,c){var d=this.getPointerPoint(c);a.startTime=getTime(),a.startPoint={x:d.x,y:d.y},a.point={x:d.x,y:d.y},a.track=[],a.swipeCanceled=!1},o.prototype.addBreadCrumb=function(a,c){a.track.push({timestamp:getTime(),point:c})},o.prototype.lockDocument=function(){this.prepElement(this.body)},o.prototype.unlockDocument=function(){this.transformedObjects.length==0&&this.restoreAllStyles(this.body)},o.prototype.lockElement=function(a){this.prepElement(a)},o.prototype.unlockElement=function(a){this.restoreAllStyles(a)},o.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,this._passiveSupported?{passive:!1}:!1)},o.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},o.prototype.isLocalElement=function(a,c,d){var g=this.getCache("local_pointer_"+a.id);if(hasValue(g))return g;var b=getRoot(c)||document;if(b.elementFromPoint){var j=b.elementFromPoint(a.point.x,a.point.y),$=j&&contains(c,j);return this.setCache("local_pointer_"+a.id+"_"+d,$,100),$}return!1},o.prototype.wheelLockEvent=function(a){return a.preventDefault(),!1},o.prototype.prepElement=function(a){var c=a.element;if(c){for(var d=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],g=0;g<d.length;g++)d[g]in c.style&&this.setTemporaryStyle(a,d[g],"none");this.setTemporaryStyle(a,"tapHighlightColor","rgba(0, 0, 0, 0)")}},o.prototype.unprepElement=function(a){var c=a.element;if(c){for(var d=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],g=0;g<d.length;g++)d[g]in c.style&&this.restoreStyle(a,d[g]);this.restoreStyle(a,"tapHighlightColor")}},o.prototype.getHitOption=function(a,c){var d=a.hitOptions[c];return typeof d>"u"&&(d=this.hitOptions[c]),d},o.prototype.getHoverOption=function(a,c){var d=a.hoverOptions[c];return typeof d>"u"&&(d=this.hoverOptions[c]),d},o.prototype.getSwipeOption=function(a,c){var d=a.swipeOptions[c];return typeof d>"u"&&(d=this.swipeOptions[c]),d},o.prototype.getKeyboardOption=function(a,c){var d=a.keyboardOptions[c];return typeof d>"u"&&(d=this.keyboardOptions[c]),d},o.prototype.getMouseOption=function(a,c){var d=a.mouseOptions[c];return typeof d>"u"&&(d=this.mouseOptions[c]),d},o.prototype.getInertiaOption=function(a,c,d){var g=a.inertiaOptions.getKey(c),b;return g&&hasValue(g[d])?b=g[d]:b=this.inertiaOptions.getKey(c)[d],b},o.prototype.stopInertia=function(a){for(var c,d=["move","resize"],g=0;g<d.length;g++)if(c=d[g],a.inertias.hasKey(c)){var b=a.inertias.getKey(c);if(b){b.dispose();continue}}},o.prototype.swiping=function(a,c){var d=getTime();return c.swipeCanceled||!a.swipeable?!1:Math.abs(c.startPoint.y-c.point.y)<this.getSwipeOption(a,"verticalThreshold")&&c.startTime>d-this.getSwipeOption(a,"time")},o.prototype.swiped=function(a,c){var d=getTime();return c.swipeCanceled?!1:Math.abs(c.startPoint.x-c.point.x)>this.getSwipeOption(a,"horizontalThreshold")&&Math.abs(c.startPoint.y-c.point.y)<this.getSwipeOption(a,"verticalThreshold")&&c.startTime>d-this.getSwipeOption(a,"time")},o.prototype.applyCursorOverStyle=function(a){var c=a.cursorOptions;if(hasValue(c.overStyle))for(var d=0;d<c.overStyle.length;d++)setStyle(a.element,c.overStyle[d].property,c.overStyle[d].value)},o.prototype.applyCursorDownStyle=function(a,c){if(!(c&&c.touch)){var d=a.cursorOptions.downStyle;if(a.downPointers.contains(c)&&hasValue(d))for(var g=0;g<d.length;g++)this.setTemporaryStyle(this.body,d[g].property,d[g].value),this.setTemporaryStyle(a,d[g].property,d[g].value)}},o.prototype.restoreCursorDownStyle=function(a,c){if(!(c&&c.touch)){var d=a.cursorOptions.downStyle;if(a.downPointers.contains(c)&&hasValue(d))for(var g=0;g<d.length;g++)this.restoreStyle(this.body,d[g].property),this.restoreStyle(a,d[g].property)}},o.prototype.setGlobalStyle=function(a){for(var c=getInteraction().body,d=isArray$1(a)?a:[a],g=0;g<d.length;g++)this.setTemporaryStyle(c,d[g].property,d[g].value)},o.prototype.restoreGlobalStyle=function(a){for(var c=getInteraction().body,d=isArray$1(a)?a:[a],g=0;g<d.length;g++)this.restoreStyle(c,d[g].property)},o.prototype.isGlobalElement=function(a){return document.body===a.element},o.prototype.moved=function(a,c,d){var g=this.getShift(a);return Math.abs(g.x)>c||Math.abs(g.y)>c},o.prototype.old=function(a,c){return c===void 0&&(c=300),getTime()-a.startTime>c},o.prototype.getShift=function(a){return{x:a.startPoint.x-a.point.x,y:a.startPoint.y-a.point.y}},o.prototype.getTrailPoint=function(a,c){for(var d,g=0;g<a.track.length;g++)if(a.track[g].timestamp>=c){d=a.track[g];break}return d},o.prototype.pointerExists=function(a,c){var d=!1;return a.each(function(g){g!=c&&(d=g.point.x==c.point.x&&g.point.y==c.point.y)}),d},o.prototype.getInteraction=function(a){return new InteractionObject(a)},o.prototype.setTemporaryStyle=function(a,c,d){var g=a.element;hasValue(g.style[c])&&!a.replacedStyles.hasKey(c)&&a.replacedStyles.setKey(c,g.style[c]),setStyle(g,c,d)},o.prototype.restoreStyle=function(a,c){a.replacedStyles.hasKey(c)?(a.element.style[c]=a.replacedStyles.getKey(c),a.replacedStyles.removeKey(c)):delete a.element.style[c]},o.prototype.restoreAllStyles=function(a){each(a.replacedStyles.iterator(),function(c){var d=c[0],g=c[1];a.element.style[d]=g,a.replacedStyles.removeKey(d)})},o.prototype.dispose=function(){this.isDisposed()||(e.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},o.prototype.log=function(a,c,d){{if(c.changedTouches){for(var g=0;g<c.changedTouches.length;g++)this.logTouch(a,c.type,c.changedTouches[g]);return}var b="";if(c.pointerType)switch(c.pointerType){case 2:b="touch";break;case 4:b="mouse";break;default:b=c.pointerType;break}else typeof TouchEvent<"u"&&c instanceof TouchEvent?b="touch":c.type.match(/^mouse/)?b="mouse":b="???";var j="";hasValue(c.identifier)?j=c.identifier:hasValue(c.pointerId)?j=c.pointerId:j="???",console.log(d?a+" ("+d.uid+")  "+c.type+"  "+b+"  "+j:a+"  "+c.type+"  "+b+"  "+j)}},o.prototype.areTransformed=function(a){var c=this.transformedObjects.length;if(a)for(var d=isArray$1(a)?a:[a],g=0;g<d.length;g++)this.transformedObjects.contains(d[g])&&c--;return c>0},o.prototype.logTouch=function(a,c,d){console.log(a+"  "+c+"  touch  "+d.identifier)},Object.defineProperty(o,"passiveSupported",{get:function(){var a=this;if(this._passiveSupported==null)try{var c=Object.defineProperty({},"passive",{get:function(){a._passiveSupported=!0}});window.addEventListener("test",c,c),window.removeEventListener("test",c,c)}catch{this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),o}(BaseObjectEvents),interaction=null;function getInteraction(){return interaction==null&&(interaction=new Interaction),interaction}var Popup=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.adapter=new Adapter(a),a._elements={},a._IOs={},a._content="",a._title="",a._classPrefix="ampopup",a._defaultStyles=!0,a._showCurtain=!1,a._draggable=!0,a._align="center",a._dynamicResize=!0,a._verticalAlign="middle",a._shift={x:0,y:0},a._tempShift={x:0,y:0},a._readerTitle="",a._closable=!0,a._cssLoaded=!1,a._fitTo="window",a.isTemplate=!1,a._sized=!1,a.className="Popup",a}return o.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},o.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},o.prototype.dispose=function(){this.close(),e.prototype.dispose.call(this)},o.prototype.positionElement=function(a){var c=this;a===void 0&&(a=!0),this._elements.wrapper&&setTimeout(function(){if(c._elements.wrapper){if(a||!c._sized){c._elements.wrapper.style.opacity="0.01",c._elements.wrapper.style.left="0",c._elements.wrapper.style.top="0",c._elements.wrapper.style.margin="0 0 0 0",c._elements.wrapper.style.width="",c._elements.wrapper.style.height="";var d=c._elements.wrapper.getBoundingClientRect();c._elements.wrapper.style.width=d.width+"px",c._elements.wrapper.style.height=d.height+"px",c._sized=!0}if(c.dynamicResize)for(var g=c._elements.wrapper.getElementsByTagName("img"),b=0;b<g.length;b++){var j=g[b];if(!j.complete){j.addEventListener("load",function(){c.positionElement(!0)});break}}setTimeout(function(){if(c._elements.wrapper){var $;switch((a||!c._sized)&&c._bbox?$=c._bbox:($=c._elements.wrapper.getBoundingClientRect(),c._elements.wrapper.style.opacity=""),c.align){case"left":c._elements.wrapper.style.left="0",c._elements.wrapper.style.right="auto",c._elements.wrapper.style.marginLeft=c.toStyle(c._shift.x+c._tempShift.x);break;case"center":c._elements.wrapper.style.left="50%",c._elements.wrapper.style.right="auto",c._elements.wrapper.style.marginLeft=c.toStyle(Math.round(-$.width/2)+(c._shift.x+c._tempShift.x));break;case"right":c._elements.wrapper.style.left="auto",c._elements.wrapper.style.right="0",c._elements.wrapper.style.marginLeft=c.toStyle(c._shift.x+c._tempShift.x);break;default:c._elements.wrapper.style.left=c.toStyle(c.left)||"auto",c._elements.wrapper.style.right=c.toStyle(c.right)||"auto",c._elements.wrapper.style.marginLeft=c.toStyle(c._shift.x+c._tempShift.x);break}switch(c.verticalAlign){case"top":c._elements.wrapper.style.top="0",c._elements.wrapper.style.bottom="auto",c._elements.wrapper.style.marginTop=c.toStyle(c._shift.y+c._tempShift.y);break;case"middle":c._elements.wrapper.style.top="50%",c._elements.wrapper.style.bottom="auto",c._elements.wrapper.style.marginTop=c.toStyle(Math.round(-$.height/2)+(c._shift.y+c._tempShift.y));break;case"bottom":c._elements.wrapper.style.top="auto",c._elements.wrapper.style.bottom="0",c._elements.wrapper.style.marginTop=c.toStyle(c._shift.y+c._tempShift.y);break;default:c._elements.wrapper.style.top=c.toStyle(c.top)||"auto",c._elements.wrapper.style.bottom=c.toStyle(c.bottom)||"auto",c._elements.wrapper.style.marginTop=c.toStyle(c._shift.y+c._tempShift.y);break}}},1)}},1)},o.prototype.setupDragging=function(){var a=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",function(c){a._tempShift.x=c.shift.x,a._tempShift.y=c.shift.y,a.positionElement(!1)}),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",function(c){a._shift.x+=a._tempShift.x,a._shift.y+=a._tempShift.y,a._tempShift.x=0,a._tempShift.y=0,a.positionElement(!1)})):this._IOs.header&&(getInteraction().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},o.prototype.toStyle=function(a){return hasValue(a)?isNumber$1(a)?""+a+"px":a.toString():null},Object.defineProperty(o.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(a){this._classPrefix=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(a){this._content!=a&&(this._content=a,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=a,this.positionElement())},enumerable:!0,configurable:!0}),o.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},o.prototype.createContentElement=function(){if(!this._elements.wrapper){var a=this.getClassNames(),c=document.createElement("div");c.className=a.contentClass,c.style.opacity="0.01";var d=document.createElement("a");d.className=a.closeClass;var g=document.createElement("div");g.className=a.headerClass;var b=document.createElement("div");b.innerHTML=this.title,b.className=a.titleClass,this.title||(b.style.display="none");var j=document.createElement("div");j.className=a.insideClass,j.innerHTML=this.content,this._IOs.wrapper=getInteraction().getInteraction(c),this._IOs.header=getInteraction().getInteraction(g),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=getInteraction().getInteraction(d),this._disposers.push(this._IOs.close),d.style.visibility="hidden",c.setAttribute("role","dialog"),g.appendChild(d),g.appendChild(b),c.appendChild(g),c.appendChild(j),this.container.appendChild(c),this._elements.wrapper=c,this._elements.header=g,this._elements.content=j,this._elements.title=b,this._elements.close=d,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(o.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(a){this._title!=a&&(this._title=a,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=a,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",this._readerTitle!=""?this._readerTitle:this.title)},set:function(a){this._readerTitle!=a&&(this._readerTitle=a,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(a){a!==this._closable&&(this._closable=a,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(a){a!=this._fitTo&&(this._fitTo=a,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(a){this._defaultStyles!=a&&(this._defaultStyles=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(a){this._showCurtain!=a&&(this._showCurtain=a,this._elements.curtain&&(this._elements.curtain.style.display=a?"block":"none"))},enumerable:!0,configurable:!0}),o.prototype.createCurtainElement=function(){var a=this.getClassNames(),c=document.createElement("div");c.className=a.curtainClass,this.container.appendChild(c),this._IOs.curtain=getInteraction().getInteraction(c),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),c.style.display=this.showCurtain?"block":"none",this._elements.curtain=c},Object.defineProperty(o.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(a){this._draggable!=a&&(this._draggable=a,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(a){this._dynamicResize!=a&&(this._dynamicResize=a,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(a){this._align!=a&&(this._align=a,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(a){this._verticalAlign!=a&&(this._verticalAlign=a,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(a){this.left!=a&&(this._left=a,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(a){this.right!=a&&(this._right=a,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(a){this.top!=a&&(this._top=a,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(a){this.bottom!=a&&(this._bottom=a,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),o.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(popupCSS(getShadowRoot(this.container),this.classPrefix)),each$1(this._elements,function(a,c){c.style.display=""}),this._cssLoaded=!0)},o.prototype.applyEvents=function(){var a=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var c=[getInteraction().body.events.on("keyup",function(d){keyboard.isKey(d.event,"esc")&&a.closable&&a.close()}),this._IOs.close.events.on("hit",function(d){a.close()})];c.push(this._IOs.curtain.events.on("hit",function(d){a.showCurtain&&a.closable&&a.close()})),this._disposers.push(new MultiDisposer(c))}else this._IOs.close.element.style.visibility="hidden"},o.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},o.prototype.releasePointers=function(){hasValue(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},o.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.container=a.container,this.sprite=a.sprite,this.classPrefix=a.classPrefixRaw,this.content=a.content,this.title=a.title,this.readerTitle=a.readerTitle,this.defaultStyles=a.defaultStyles,this.showCurtain=a.showCurtain,this.align=a.align,this.verticalAlign=a.verticalAlign,this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.adapter.copyFrom(a.adapter)},o}(BaseObjectEvents),Modal=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.adapter=new Adapter(a),a.className="Modal",a.showCurtain=!0,a.draggable=!1,a}return o}(Popup);function log(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];options.verbose&&console&&console.log.apply(console,__spread(e))}function warn(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];options.suppressWarnings||console&&console.warn.apply(console,__spread(e))}var Native=function(){function e(){var o=this;this._targets=[],this._observer=new ResizeObserver(function(a){each$2(a,function(c){each$2(o._targets,function(d){d.target===c.target&&d.callback()})})})}return e.prototype.addTarget=function(o,a){this._observer.observe(o,{box:"content-box"}),this._targets.push({target:o,callback:a})},e.prototype.removeTarget=function(o){this._observer.unobserve(o),keepIf(this._targets,function(a){return a.target!==o})},e}(),Raf=function(){function e(){this._targets=[]}return e.prototype.addTarget=function(o,a){var c=this;if(this._targets.length===0){var d=null,g=function(){var j=Date.now();(d===null||j>d+e.delay)&&(d=j,each$2(c._targets,function($){var _e=$.target.getBoundingClientRect();(_e.width!==$.size.width||_e.height!==$.size.height)&&($.size=_e,$.callback())})),c._timer=requestAnimationFrame(g)};this._timer=requestAnimationFrame(g)}var b=o.getBoundingClientRect();this._targets.push({target:o,callback:a,size:b})},e.prototype.removeTarget=function(o){keepIf(this._targets,function(a){return a.target!==o}),this._targets.length===0&&cancelAnimationFrame(this._timer)},e.delay=200,e}(),observer=null;function makeSensor(){return observer===null&&(typeof ResizeObserver<"u"?observer=new Native:observer=new Raf),observer}var ResizeSensor=function(){function e(o,a){this._disposed=!1,this._sensor=makeSensor(),this._element=o,this._sensor.addTarget(o,a)}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(e.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),e.prototype.reset=function(){warn("resizeSensor.reset() is no longer needed and can be removed")},e}(),svgContainers=[],SVGContainer=function(){function e(o,a){var c=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=o,a||(this._printing=!1,this.initSensor(),this._disposers.push(addEventListener$1(window,"beforeprint",function(){c._printing=!0})),this._disposers.push(addEventListener$1(window,"afterprint",function(){c._printing=!1}))),svgContainers.push(this);var d=document.createElement("div"),g=d.style;g.width="100%",g.height="100%",g.position="relative",o.appendChild(d),this.SVGContainer=d}return e.prototype.initSensor=function(){var o=this;this.resizeSensor&&this.resizeSensor.dispose();var a=function(){o.autoResize&&!o._printing&&o.measure()};this.resizeSensor=new ResizeSensor(this.htmlElement,a),this._disposers.push(this.resizeSensor)},e.prototype.measure=function(){var o=width(this.htmlElement),a=height(this.htmlElement),c=this.container;c&&((this.width!=o||this.height!=a)&&(this.width=o,this.height=a,o>0&&(c.maxWidth=o),a>0&&(c.maxHeight=a),fixPixelPerfect(this.SVGContainer)),c.maxWidth||(c.maxWidth=0),c.maxHeight||(c.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(o){this._container=o,this.measure()},enumerable:!0,configurable:!0}),e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||remove(svgContainers,this),each$2(this._disposers,function(o){o.dispose()})},Object.defineProperty(e.prototype,"hideOverflow",{set:function(o){o?this.SVGContainer.style.overflow="hidden":this.SVGContainer.style.overflow=""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return hasValue(this._modal)||(this._modal=new Modal,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),e.prototype.openModal=function(o,a){this.closeModal();var c=this.modal;return c.content=o,c.readerTitle=a||"",c.title=a||"",c.open(),c},e.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(e.prototype,"popups",{get:function(){if(!hasValue(this._popups)){var o=new Popup;o.container=this.SVGContainer,this._popups=new ListTemplate(o),this._disposers.push(new ListDisposer(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(o,a){var c=this.popups.create();return c.content=o,hasValue(a)&&(c.title=a),c.open(),c},e.prototype.closeAllPopups=function(){this.popups.each(function(o){o.close()})},Object.defineProperty(e.prototype,"readerAlertElement",{get:function(){if(!hasValue(this._readerAlertElement)){var o=document.createElement("div");o.setAttribute("role","alert"),o.style.zIndex="-100000",o.style.opacity="0",o.style.position="absolute",o.style.top="0",this.SVGContainer.appendChild(o),this._readerAlertElement=o}return this._readerAlertElement},enumerable:!0,configurable:!0}),e.prototype.readerAlert=function(o){this.readerAlertElement.innerHTML=o},e.prototype.checkTransform=function(o){if(window.getComputedStyle){if(o&&o.style){var a=window.getComputedStyle(o,null);if(a){var c=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform");if(c&&c!=="none"){var d=c.split("(")[1].split(")")[0].split(","),g=Number(d[0]),b=Number(d[1]),j=Math.sqrt(g*g+b*b);isNaN(j)||(this.cssScale*=j)}}}o.parentNode&&o.parentNode instanceof HTMLElement&&this.checkTransform(o.parentNode)}},e}(),Paper=function(){function e(o,a){this.container=o,this.id=a;var c=document.createElementNS(SVGNS,"svg");c.setAttribute("version","1.1"),c.setAttributeNS(XMLNS,"xmlns",SVGNS),c.setAttributeNS(XMLNS,"xmlns:xlink",XLINK),c.setAttribute("role","group"),this.container.appendChild(c),this.defs=document.createElementNS(SVGNS,"defs"),c.appendChild(this.defs),c.style.width="100%",c.style.height="100%",c.style.overflow="visible",this.svg=c}return e.prototype.add=function(o){return new AMElement(o)},e.prototype.addGroup=function(o){return new Group(o)},e.prototype.append=function(o){o&&this.svg.appendChild(o.node)},e.prototype.appendDef=function(o){o&&this.defs.appendChild(o.node)},e.prototype.foreignObject=function(){var o=new AMElement("foreignObject");return o},e.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},e}(),ghostPaper=null;function getGhostPaper(){if(ghostPaper===null){var e=document.createElement("div");e.hidden=!0,e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.zIndex="-1000000",document.body.appendChild(e);var o=new SVGContainer(e,!0);ghostPaper=new Paper(o.SVGContainer,"ghost")}return ghostPaper}var Pattern=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._elements=new List,a.properties={},a.className="Pattern",a.width=10,a.height=10,a.x=0,a.y=0,a.patternUnits="userSpaceOnUse";var c=new InterfaceColorSet;return a.backgroundFill=c.getFor("background"),a.backgroundOpacity=0,a.fillOpacity=1,a.fill=c.getFor("alternativeBackground"),a.stroke=c.getFor("alternativeBackground"),a.strokeOpacity=1,a.strokeWidth=1,a.shapeRendering="crispEdges",a.rotation=0,a.element=a.paper.addGroup("pattern"),a.id="pattern-"+registry.getUniqueId(),a.element.attr({id:a.id}),a._disposers.push(a.element),a._disposers.push(new ListDisposer(a._elements)),a.patternUnits=a.patternUnits,a.width=a.width,a.height=a.height,a.applyTheme(),a}return o.prototype.draw=function(){var a=this,c=this.element;if(c){c.removeChildNodes();var d=this.paper.add("rect");d.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),c.add(d),c.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),each(this._elements.iterator(),function(g){g.rotation=a.rotation,g.rotationX=a.properties.rotationX,g.rotationY=a.properties.rotationY,a.element.add(g)})}},o.prototype.animate=function(a,c,d){return new Animation(this,a,c,d).start()},o.prototype.addElement=function(a){this._elements.push(a),this._disposers.push(a)},o.prototype.removeElement=function(a){this._elements.removeValue(a),this.removeDispose(a)},Object.defineProperty(o.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(a){this.properties.fillOpacity=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fill",{get:function(){return this.properties.fill},set:function(a){this.properties.fill=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(a){this.properties.backgroundFill=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(a){this.properties.backgroundOpacity=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(a){this.properties.stroke=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(a){this.properties.strokeOpacity=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(a){this.properties.strokeWidth=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(a){this.properties.shapeRendering=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(a){this.properties.rotation=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(a){this.properties.patternUnits=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this.properties.width},set:function(a){this.properties.width=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.properties.height},set:function(a){this.properties.height=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x",{get:function(){return this.properties.x},set:function(a){this.properties.x=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.properties.y},set:function(a){this.properties.y=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(a){this._paper!=a&&(this._paper=a,this.draw(),a.appendDef(this.element))},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;e.prototype.copyFrom.call(this,a),each$1(a.properties,function(d,g){c[d]=g})},Object.defineProperty(o.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(a){this.properties.strokeDashArray=a,this.draw()},enumerable:!0,configurable:!0}),o.prototype.processConfig=function(a){if(a&&hasValue(a.elements)&&isArray$1(a.elements))for(var c=0,d=a.elements.length;c<d;c++){var g=a.elements[c];if(hasValue(g.type)){var b=this.createEntryInstance(g);b instanceof BaseObject&&(b.config=g),this.addElement(hasValue(g.typeProperty)?b[g.typeProperty]:b.element)}}e.prototype.processConfig.call(this,a)},o}(BaseObject);registry.registeredClasses.Pattern=Pattern;var LinearGradient=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._stops=new List,a._rotation=0,a.className="LinearGradient",a._stops.events.on("setIndex",a.validate,a),a._stops.events.on("inserted",a.validate,a),a.element=a.paper.addGroup("linearGradient"),a.id="gradient-"+registry.getUniqueId(),a.element.attr({id:a.id}),a._disposers.push(a.element),a.applyTheme(),a}return o.prototype.validate=function(){var a=this,c=(this._rotation+90)*RADIANS,d=Math.round(50+Math.sin(c+Math.PI)*50)+"%",g=Math.round(50+Math.cos(c)*50)+"%",b=Math.round(50+Math.sin(c)*50)+"%",j=Math.round(50+Math.cos(c+Math.PI)*50)+"%",$=this.element;$.removeChildNodes(),$.attr({x1:d,x2:b,y1:g,y2:j}),each(indexed(this._stops.iterator()),function(_e){var st=_e[0],rt=_e[1],ut=rt.offset;isNumber$1(ut)||(ut=st/(a._stops.length-1));var gt=a.paper.add("stop");hasValue(rt.color)&&gt.attr({"stop-color":rt.color.toString()}),isNumber$1(rt.opacity)&&gt.attr({"stop-opacity":rt.opacity}),isNumber$1(ut)&&gt.attr({offset:ut}),$.add(gt)})},o.prototype.clear=function(){this._stops.clear()},o.prototype.addColor=function(a,c,d){this._stops.push({color:a,opacity:c,offset:d})},Object.defineProperty(o.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(a){this._paper!=a&&(this._paper=a,this.validate(),a.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation=a,this.validate()},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.stops.copyFrom(a.stops),this._rotation=a.rotation},Object.defineProperty(o.prototype,"gradientUnits",{set:function(a){this.element.attr({gradientUnits:a})},enumerable:!0,configurable:!0}),o}(BaseObject);registry.registeredClasses.LinearGradient=LinearGradient;var RadialGradient=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._stops=new List,a.element=a.paper.addGroup("radialGradient"),a.id="gradient-"+registry.getUniqueId(),a.element.attr({id:a.id}),a._disposers.push(a.element),a.applyTheme(),a}return o.prototype.draw=function(){var a=this,c=this.element;if(isNumber$1(this.cx)){var d=this.cx;d instanceof Percent&&(d=d.percent+"%"),c.attr({cx:d})}if(isNumber$1(this.cy)){var d=this.cy;d instanceof Percent&&(d=d.percent+"%"),c.attr({cy:d})}if(this.fx){var d=this.fx;d instanceof Percent&&(d=d.percent+"%"),c.attr({fx:d})}if(this.fy){var d=this.fy;d instanceof Percent&&(d=d.percent+"%"),c.attr({fy:d})}c.removeChildNodes(),each(indexed(this._stops.iterator()),function(g){var b=g[0],j=g[1],$=j.offset;isNumber$1($)||($=b/(a._stops.length-1));var _e=a.paper.add("stop");hasValue(j.color)&&_e.attr({"stop-color":j.color.toString()}),isNumber$1(j.opacity)&&_e.attr({"stop-opacity":j.opacity}),isNumber$1($)&&_e.attr({offset:$}),c.add(_e)})},o.prototype.addColor=function(a,c,d){this._stops.push({color:a,opacity:c,offset:d}),this.draw()},Object.defineProperty(o.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(a){this._paper!=a&&(this._paper=a,this.draw(),a.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cx",{get:function(){return this._cx},set:function(a){this._cx=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cy",{get:function(){return this._cy},set:function(a){this._cy=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fx",{get:function(){return this._fx},set:function(a){this._fx=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fy",{get:function(){return this._fy},set:function(a){this._fy=a,this.draw()},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.stops.copyFrom(a.stops),this.cx=a.cx,this.cy=a.cy,this.fx=a.fx,this.fy=a.fy},Object.defineProperty(o.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),o.prototype.clear=function(){this._stops.clear()},o}(BaseObject);registry.registeredClasses.RadialGradient=RadialGradient;var MouseCursorStyle=function(){function e(){}return e.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],e.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],e.pointer=[{property:"cursor",value:"pointer"}],e.default=[{property:"cursor",value:"default"}],e.horizontalResize=[{property:"cursor",value:"ew-resize"}],e.verticalResize=[{property:"cursor",value:"ns-resize"}],e.notAllowed=[{property:"cursor",value:"not-allowed"}],e.text=[{property:"cursor",value:"text"}],e}();const en={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"μ",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){var o="th";if(e<11||e>13)switch(e%10){case 1:o="st";break;case 2:o="nd";break;case 3:o="rd";break}return o},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};var Language=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.adapter=new Adapter(a),a._locale=en,a._defaultLocale=en,a.className="Language",hasValue(options.defaultLocale)&&(a.locale=options.defaultLocale),a.applyTheme(),a}return o.prototype.getLocale=function(a){return a==null&&(a=this._locale),this.adapter.apply("locale",{locale:a}).locale},o.prototype.translate=function(a,c){for(var d=[],g=2;g<arguments.length;g++)d[g-2]=arguments[g];c=this.getLocale(c);var b=a,j=this.getTranslations(c),$=j[a];if($===null)b="";else if(hasValue($))$&&(b=$);else if(c!==this._defaultLocale)return this.translate.apply(this,__spread([a,this._defaultLocale],d));if(d.length)for(var _e=d.length,st=0;st<_e;++st)b=b.split("%"+(st+1)).join(d[st]);return this.adapter.apply("translate",{translation:b,locale:c}).translation},o.prototype.translateAny=function(a,c){for(var d=[],g=2;g<arguments.length;g++)d[g-2]=arguments[g];return this.translate.apply(this,__spread([a,c],d))},o.prototype.setTranslationAny=function(a,c,d){var g=d||this.locale;g[a]=c},o.prototype.translateEmpty=function(a,c){for(var d=[],g=2;g<arguments.length;g++)d[g-2]=arguments[g];var b=this.translate.apply(this,__spread([a,c],d));return b==a?"":b},o.prototype.translateFunc=function(a,c){c=this.getLocale(c);var d=this.getTranslations(c),g=d[a];return g??(c!==this._defaultLocale?this.translateFunc(a,this._defaultLocale):function(){return""})},o.prototype.translateAll=function(a,c){var d=this;return this.isDefault()?a:map$1(a,function(g){return d.translate(g,c)})},o.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(o.prototype,"locale",{get:function(){return this._locale},set:function(a){if(this._locale!=a&&(this._locale=a,this.events.isEnabled("localechanged"))){var c={type:"localechanged",locale:a,target:this};this.events.dispatchImmediately("localechanged",c)}},enumerable:!0,configurable:!0}),o.prototype.getTranslations=function(a){return this.adapter.apply("translations",{translations:a,locale:a}).translations},o}(BaseObjectEvents),TextFormatter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.adapter=new Adapter(a),a.className="TextFormatter",a.applyTheme(),a}return o.prototype.debug=function(){},o.prototype.format=function(a,c){hasValue(c)||(c="svg");var d="";a=this.escape(a);var g=a.match(/\[([^\]]*?)\]/gm);if(!g)return this.wrap(a,"",c);for(var b=a.split(/\[[^\[\]]*\]/),j=0,$=b.length;j<$;j++){var _e=b[j];if(_e!==""){_e=this.adapter.apply("chunk",_e);var st="";j>0&&(st=g[j-1].replace("[","").replace("]","")),d+=this.wrap(_e,st,c)}}return d=this.unescape(d),this.cleanUp(d)},o.prototype.escape=function(a){return a.replace(/\[\[/g,registry.getPlaceholder("1")).replace(/([^\/\]]{1})\]\]/g,"$1"+registry.getPlaceholder("2")).replace(/\]\]/g,registry.getPlaceholder("2")).replace(/\{\{/g,registry.getPlaceholder("3")).replace(/\}\}/g,registry.getPlaceholder("4")).replace(/\'\'/g,registry.getPlaceholder("5"))},o.prototype.unescape=function(a){return a.replace(new RegExp(registry.getPlaceholder("1"),"g"),"[[").replace(new RegExp(registry.getPlaceholder("2"),"g"),"]]").replace(new RegExp(registry.getPlaceholder("3"),"g"),"{{").replace(new RegExp(registry.getPlaceholder("4"),"g"),"}}").replace(new RegExp(registry.getPlaceholder("5"),"g"),"''")},o.prototype.cleanUp=function(a){return a.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},o.prototype.wrap=function(a,c,d){switch((c===""||c==="/")&&(c=""),d){case"html":return this.wrapHtml(a,this.translateStyleShortcuts(c));default:return this.wrapSvg(a,this.translateStyleShortcuts(c))}},o.prototype.wrapSvg=function(a,c){return c===""?"<tspan>"+a+"</tspan>":"<tspan style='"+c+"'>"+a+"</tspan>"},o.prototype.getSvgElement=function(a,c){var d=new AMElement("tspan");return d.textContent=a,c&&d.node.setAttribute("style",c),d},o.prototype.wrapHtml=function(a,c){return c===""?"<span>"+a+"</span>":"<span style='"+this.styleSvgToHtml(c)+"'>"+a+"</span>"},o.prototype.getHtmlElement=function(a,c){var d=document.createElement("span");return d.innerHTML=a,c&&d.setAttribute("style",c),d},o.prototype.styleSvgToHtml=function(a){return a=a.replace(/fill:/,"color:"),a},o.prototype.translateStyleShortcuts=function(a){if(a==""||a=="[ ]")return"";var c=registry.getCache("translateStyleShortcuts_"+a);if(c)return c;var d=a.match(/('[^']*')|("[^"]*")/gi);if(d)for(var g=0;g<d.length;g++)a=a.replace(d[g],d[g].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var b=a.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!b)return a;for(var g=0;g<b.length;g++)b[g].match(/^bold$/i)?b[g]="font-weight:"+b[g]:b[g]=="/"?b[g]="":b[g].match(/:/)?b[g]=b[g].replace(/\+/g," "):b[g]="fill:"+b[g];var j=b.join(";");return registry.setCache("translateStyleShortcuts_"+a,j),j},o.prototype.chunk=function(a,c,d){c===void 0&&(c=!1),d===void 0&&(d=!1);var g=[];a=this.escape(a);for(var b=c?a.split("'"):[a],j=0;j<b.length;j++){var $=b[j];if($!=="")if(j%2===0){$=$.replace(/\]\[/g,"]"+PLACEHOLDER+"["),$=$.replace(/\[\]/g,"[ ]");for(var _e=$.split(/[\[\]]+/),st=0;st<_e.length;st++){var rt=this.cleanUp(this.unescape(_e[st]));rt!==PLACEHOLDER&&rt!==""&&(st%2===0?g.push({type:"value",text:this.adapter.apply("chunk",rt)}):g.push({type:d?"value":"format",text:"["+rt+"]"}))}}else for(var _e=$.split(/[\[\]]+/),st=0;st<_e.length;st++){var rt=this.cleanUp(this.unescape(_e[st]));rt!==""&&(st%2===0?g.push({type:"text",text:rt}):this.isImage(rt)?g.push({type:"image",text:"["+rt+"]"}):g.push({type:"format",text:"["+rt+"]"}))}}return g},o.prototype.isImage=function(a){return!!a.match(/img[ ]?:/)},o}(BaseObject),formatter;function getTextFormatter(){return formatter==null&&(formatter=new TextFormatter),formatter}registry.registeredClasses.TextFormatter=TextFormatter;var NumberFormatter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._negativeBase=0,a._numberFormat="#,###.#####",a._outputFormat="svg",a._smallNumberThreshold=1,a._forceLTR=!1,a.className="NumberFormatter",a.applyTheme(),a}return o.prototype.dispose=function(){e.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(o.prototype,"language",{get:function(){return this._language||(this.sprite?this._language=this.sprite.language:this._language=new Language),this._language},set:function(a){this._language=a},enumerable:!0,configurable:!0}),o.prototype.format=function(a,c,d){(typeof c>"u"||isString$1(c)&&c.toLowerCase()==="number")&&(c=this._numberFormat);var g,b=Number(a);if(isObject$1(c))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,c).format(b):new Intl.NumberFormat(void 0,c).format(b)}catch{return"Invalid"}else{c=cleanFormat(c);var j=this.parseFormat(c,this.language),$=void 0;b>this._negativeBase?$=j.positive:b<this._negativeBase?$=j.negative:$=j.zero,hasValue(d)&&!$.mod&&($=clone($),$.decimals.active=b==0?0:d),g=$.template.split(PLACEHOLDER).join(this.applyFormat(b,$))}return this.forceLTR&&(g="‎"+g),g},o.prototype.parseFormat=function(a,c){var d=this,g=this.getCache(a);if(hasValue(g))return g;var b={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:c.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:c.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:c.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:c.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:c.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:c.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}};a=a.replace("||",PLACEHOLDER2);var j=a.split("|");return b.positive.source=j[0],typeof j[2]>"u"?b.zero=b.positive:b.zero.source=j[2],typeof j[1]>"u"?b.negative=b.positive:b.negative.source=j[1],each$1(b,function($,_e){if(!_e.parsed){if(typeof d.getCache(_e.source)<"u"){b[$]=d.getCache(_e.source);return}var st=_e.source;st.toLowerCase()==="number"&&(st=isString$1(d._numberFormat)?d._numberFormat:"#,###.#####");for(var rt=getTextFormatter().chunk(st,!0),ut=0;ut<rt.length;ut++){var gt=rt[ut];if(gt.text=gt.text.replace(PLACEHOLDER2,"|"),gt.type==="value"){var yt=gt.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);if(yt)if(yt===null||yt[0]==="")_e.template+=gt.text;else{var wt=yt[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);wt&&(_e.mod=wt[0].toLowerCase(),_e.modSpacing=!!yt[0].match(/[ ]{1}[abespABESP%‰!]{1}$/));var Ct=yt[0].split(".");if(Ct[0]!==""){_e.thousands.active=(Ct[0].match(/0/g)||[]).length,_e.thousands.passive=(Ct[0].match(/\#/g)||[]).length+_e.thousands.active;var Pt=Ct[0].split(",");Pt.length===1||(_e.thousands.interval=getValue(Pt.pop()).length,_e.thousands.interval===0&&(_e.thousands.interval=-1))}typeof Ct[1]>"u"||(_e.decimals.active=(Ct[1].match(/0/g)||[]).length,_e.decimals.passive=(Ct[1].match(/\#/g)||[]).length+_e.decimals.active),_e.template+=gt.text.split(yt[0]).join(PLACEHOLDER)}}else _e.template+=gt.text}d.setCache(_e.source,_e),_e.parsed=!0}}),this.setCache(a,b),b},o.prototype.applyFormat=function(a,c){var d=a<0;a=Math.abs(a);var g="",b="",j=c.mod?c.mod.split(""):[];if(j.indexOf("b")!==-1){var $=this.applyPrefix(a,this.bytePrefixes,j.indexOf("!")!==-1);a=$[0],g=$[1],b=$[2],c.modSpacing&&(b=" "+b)}else if(j.indexOf("a")!==-1){var _e=this.applyPrefix(a,a<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,j.indexOf("!")!==-1);a=_e[0],g=_e[1],b=_e[2],c.modSpacing&&(b=" "+b)}else if(j.indexOf("p")!==-1){var st=Math.min(a.toString().length+2,21);a=parseFloat(a.toPrecision(st)),g=this.language.translate("_percentPrefix")||"",b=this.language.translate("_percentSuffix")||"",g==""&&b==""&&(b="%")}else if(j.indexOf("%")!==-1){var st=min$1(a.toString().length+2,21);a*=100,a=parseFloat(a.toPrecision(st)),b="%"}else if(j.indexOf("‰")!==-1){var st=min$1(a.toString().length+3,21);a*=1e3,a=parseFloat(a.toPrecision(st)),b="‰"}if(j.indexOf("e")!==-1){var rt=void 0;c.decimals.passive>=0?rt=a.toExponential(c.decimals.passive).split("e"):rt=a.toExponential().split("e"),a=Number(rt[0]),b="e"+rt[1],c.modSpacing&&(b=" "+b)}else if(c.decimals.passive===0)a=Math.round(a);else if(c.decimals.passive>0){var ut=Math.pow(10,c.decimals.passive);a=Math.round(a*ut)/ut}var gt="",yt=numberToString(a).split("."),wt=yt[0];if(wt.length<c.thousands.active&&(wt=Array(c.thousands.active-wt.length+1).join("0")+wt),c.thousands.interval>0){for(var Ct=[],Pt=wt.split("").reverse().join(""),At=0,Tt=wt.length;At<=Tt;At+=c.thousands.interval){var kt=Pt.substr(At,c.thousands.interval).split("").reverse().join("");kt!==""&&Ct.unshift(kt)}wt=Ct.join(c.thousands.separator)}gt+=wt,yt.length===1&&yt.push("");var It=yt[1];return It.length<c.decimals.active&&(It+=Array(c.decimals.active-It.length+1).join("0")),It!==""&&(gt+=c.decimals.separator+It),gt===""&&(gt="0"),a!==0&&d&&j.indexOf("s")===-1&&(gt="-"+gt),g&&(gt=g+gt),b&&(gt+=b),gt},o.prototype.applyPrefix=function(a,c,d){d===void 0&&(d=!1);for(var g=a,b="",j="",$=!1,_e=1,st=0,rt=c.length;st<rt;st++)c[st].number<=a&&(c[st].number===0?g=0:(g=a/c[st].number,_e=c[st].number),b=c[st].prefix,j=c[st].suffix,$=!0);return!$&&d&&c.length&&a!=0&&(g=a/c[0].number,b=c[0].prefix,j=c[0].suffix,$=!0),$&&(g=parseFloat(g.toPrecision(min$1(_e.toString().length+Math.floor(g).toString().replace(/[^0-9]*/g,"").length,21)))),[g,b,j]},o.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(o.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(a){this._numberFormat=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(a){this._intlLocales=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(a){this._negativeBase=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bigNumberPrefixes",{get:function(){return hasValue(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(a){this._bigNumberPrefixes=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smallNumberPrefixes",{get:function(){return hasValue(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(a){this._smallNumberPrefixes=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(a){this._smallNumberThreshold=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bytePrefixes",{get:function(){return hasValue(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(a){this._bytePrefixes=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(a){this._outputFormat=a.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"forceLTR",{get:function(){return this._forceLTR},set:function(a){this._forceLTR=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),o.prototype.escape=function(a){return a.replace("||",PLACEHOLDER2)},o.prototype.unescape=function(a){return a.replace(PLACEHOLDER2,"|")},o}(BaseObject);registry.registeredClasses.NumberFormatter=NumberFormatter;var DateFormatter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._dateFormat="yyyy-MM-dd",a._inputDateFormat="yyyy-MM-dd",a._utc=!1,a.timezoneMinutes=0,a._firstDayOfWeek=1,a.months=["January","February","March","April","May","June","July","August","September","October","November","December"],a.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a._outputFormat="svg",a.capitalize=!0,a.className="DateFormatter",a.applyTheme(),a}return Object.defineProperty(o.prototype,"language",{get:function(){return this._language},set:function(a){this._language=a,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),o.prototype.format=function(a,c,d){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Language),(typeof c>"u"||c==="")&&(c=this._dateFormat);var g,b;if(isString$1(a)?b=this.parse(a):b=anyToDate(a),isObject$1(c))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,c).format(b):new Intl.DateTimeFormat(void 0,c).format(b)}catch{return"Invalid"}else{c=cleanFormat(c);var j=this.parseFormat(c);if(hasValue(this.timezoneOffset)?b.setMinutes(b.getMinutes()+b.getTimezoneOffset()-this.timezoneOffset):hasValue(this.timezone)&&d!==!1&&(b=setTimezone(b,this.timezone)),!isNumber$1(b.getTime()))return this.language.translate("Invalid date");g=this.applyFormat(b,j,this.language),this.capitalize&&(g=g.replace(/^.{1}/,g.substr(0,1).toUpperCase()))}return g},o.prototype.parseFormat=function(a){var c=this.getCache(a);if(hasValue(c))return c;for(var d={template:"",parts:[]},g=getTextFormatter().chunk(a,!0),b=0;b<g.length;b++){var j=g[b];if(j.type==="value"){j.text.match(/^date$/i)&&isString$1(this._dateFormat)&&(j.text=this._dateFormat);var $=j.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if($)for(var _e=0;_e<$.length;_e++)d.parts.push($[_e]),j.text=j.text.replace($[_e],PLACEHOLDER)}d.template+=j.text}return this.setCache(a,d),d},o.prototype.applyFormat=function(a,c,d){var g=c.template,b,j,$,_e,st,rt,ut,gt,yt=a.getTimezoneOffset(),wt=a.getTime();this.utc?(b=a.getUTCFullYear(),j=a.getUTCMonth(),$=a.getUTCDay(),_e=a.getUTCDate(),st=a.getUTCHours(),rt=a.getUTCMinutes(),ut=a.getUTCSeconds(),gt=a.getUTCMilliseconds()):(b=a.getFullYear(),j=a.getMonth(),$=a.getDay(),_e=a.getDate(),st=a.getHours(),rt=a.getMinutes(),ut=a.getSeconds(),gt=a.getMilliseconds());for(var Ct=0,Pt=c.parts.length;Ct<Pt;Ct++){var At="";switch(c.parts[Ct]){case"G":At=d.translate(b<0?"_era_bc":"_era_ad");break;case"yyyy":At=Math.abs(b).toString(),b<0&&(At+=d.translate("_era_bc"));break;case"yyy":case"yy":case"y":At=Math.abs(b).toString().substr(-c.parts[Ct].length),b<0&&(At+=d.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var Tt=getWeek(a),kt=b;Tt==1&&$>4&&kt--,c.parts[Ct]=="YYYY"?At=Math.abs(kt).toString():At=Math.abs(kt).toString().substr(-c.parts[Ct].length),kt<0&&(At+=d.translate("_era_bc"));break;case"u":break;case"q":At=""+Math.ceil((a.getMonth()+1)/3);break;case"MMMMM":At=d.translate(this.months[j]).substr(0,1);break;case"MMMM":At=d.translate(this.months[j]);break;case"MMM":At=d.translate(this.monthsShort[j]);break;case"MM":At=padString(j+1,2,"0");break;case"M":At=(j+1).toString();break;case"ww":At=padString(getWeek(a,this.utc),2,"0");break;case"w":At=getWeek(a,this.utc).toString();break;case"W":At=getMonthWeek(a,this.utc).toString();break;case"dd":At=padString(_e,2,"0");break;case"d":At=_e.toString();break;case"DD":case"DDD":At=padString(getYearDay(a,this.utc).toString(),c.parts[Ct].length,"0");break;case"D":At=getYearDay(a,this.utc).toString();break;case"F":break;case"g":break;case"t":At=d.translateFunc("_dateOrd").call(this,_e);break;case"E":At=($||7).toString();break;case"EE":At=padString(($||7).toString(),2,"0");break;case"EEE":case"eee":At=d.translate(this.weekdaysShort[$]);break;case"EEEE":case"eeee":At=d.translate(this.weekdays[$]);break;case"EEEEE":case"eeeee":At=d.translate(this.weekdays[$]).substr(0,1);break;case"e":case"ee":At=($-this.firstDayOfWeek+1).toString(),c.parts[Ct]=="ee"&&(At=padString(At,2,"0"));break;case"a":st>=12?At=d.translate("PM"):At=d.translate("AM");break;case"aa":st>=12?At=d.translate("P.M."):At=d.translate("A.M.");break;case"aaa":st>=12?At=d.translate("P"):At=d.translate("A");break;case"h":At=get12Hours(st).toString();break;case"hh":At=padString(get12Hours(st),2,"0");break;case"H":At=st.toString();break;case"HH":At=padString(st,2,"0");break;case"K":At=get12Hours(st,0).toString();break;case"KK":At=padString(get12Hours(st,0),2,"0");break;case"k":At=(st+1).toString();break;case"kk":At=padString(st+1,2,"0");break;case"m":At=rt.toString();break;case"mm":At=padString(rt,2,"0");break;case"s":At=ut.toString();break;case"ss":At=padString(ut,2,"0");break;case"S":case"SS":case"SSS":At=Math.round(gt/1e3*Math.pow(10,c.parts[Ct].length)).toString();break;case"x":At=wt.toString();break;case"n":case"nn":case"nnn":At=padString(gt,c.parts[Ct].length,"0");break;case"z":At=getTimeZone(a,!1,!1,this.utc);break;case"zz":At=getTimeZone(a,!0,!1,this.utc);break;case"zzz":At=getTimeZone(a,!1,!0,this.utc);break;case"zzzz":At=getTimeZone(a,!0,!0,this.utc);break;case"Z":case"ZZ":var It=Math.abs(yt)/60,Lt=Math.floor(It),Ft=It*60-Lt*60;this.utc&&(Lt=0,Ft=0),c.parts[Ct]=="Z"?(At="GMT",At+=yt>0?"-":"+",At+=padString(Lt,2)+":"+padString(Ft,2)):(At=yt>0?"-":"+",At+=padString(Lt,2)+padString(Ft,2));break;case"i":At=a.toISOString();break;case"I":At=a.toUTCString();break}g=g.replace(PLACEHOLDER,At)}return g},o.prototype.parse=function(a,c){if(hasValue(c)||(c=this.inputDateFormat),a instanceof Date)return a;if(typeof a=="number")return new Date(a);typeof a!="string"&&(a=a.toString()),this.language||(this.sprite?this.language=this.sprite.language:this.language=new Language);var d,g="";c=cleanFormat(c),c=c.substr(0,a.length);for(var b=this.parseFormat(c),j={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},$={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},_e=0,st=0,rt=0;rt<b.parts.length;rt++){switch(st=rt+_e+1,b.parts[rt]){case"yyyy":case"YYYY":g+="([0-9]{4})",j.year=st;break;case"yyy":case"YYY":g+="([0-9]{3})",j.year3=st;break;case"yy":case"YY":g+="([0-9]{2})",j.year2=st;break;case"y":case"Y":g+="([0-9]{1})",j.year1=st;break;case"MMMM":g+="("+this.getStringList(this.months).join("|")+")",j.monthLong=st;break;case"MMM":g+="("+this.getStringList(this.monthsShort).join("|")+")",j.monthShort=st;break;case"MM":case"M":g+="([0-9]{2}|[0-9]{1})",j.month=st;break;case"ww":case"w":g+="([0-9]{2}|[0-9]{1})",j.week=st;break;case"dd":case"d":g+="([0-9]{2}|[0-9]{1})",j.day=st;break;case"DDD":case"DD":case"D":g+="([0-9]{3}|[0-9]{2}|[0-9]{1})",j.yearDay=st;break;case"dddd":g+="("+this.getStringList(this.weekdays).join("|")+")",j.weekdayLong=st;break;case"ddd":g+="("+this.getStringList(this.weekdaysShort).join("|")+")",j.weekdayShort=st;break;case"aaa":case"aa":case"a":g+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",j.am=st;break;case"hh":case"h":g+="([0-9]{2}|[0-9]{1})",j.hour12Base1=st;break;case"HH":case"H":g+="([0-9]{2}|[0-9]{1})",j.hourBase0=st;break;case"KK":case"K":g+="([0-9]{2}|[0-9]{1})",j.hour12Base0=st;break;case"kk":case"k":g+="([0-9]{2}|[0-9]{1})",j.hourBase1=st;break;case"mm":case"m":g+="([0-9]{2}|[0-9]{1})",j.minute=st;break;case"ss":case"s":g+="([0-9]{2}|[0-9]{1})",j.second=st;break;case"SSS":case"SS":case"S":g+="([0-9]{3}|[0-9]{2}|[0-9]{1})",j.millisecond=st,j.millisecondDigits=b.parts[rt].length;break;case"nnn":case"nn":case"n":g+="([0-9]{3}|[0-9]{2}|[0-9]{1})",j.millisecond=st;break;case"x":g+="([0-9]{1,})",j.timestamp=st;break;case"Z":g+="GMT([-+]+[0-9]{2}:[0-9]{2})",j.zone=st;break;case"ZZ":g+="([\\-+]+[0-9]{2}[0-9]{2})",j.zone=st;break;case"i":g+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)",j.iso=st,_e+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":_e--;break}g+="[^0-9]*"}var ut=new RegExp(g),gt=a.match(ut);if(gt){if(j.year>-1&&($.year=parseInt(gt[j.year])),j.year3>-1){var yt=parseInt(gt[j.year3]);yt+=1e3,$.year=yt}if(j.year2>-1){var yt=parseInt(gt[j.year2]);yt>50?yt+=1e3:yt+=2e3,$.year=yt}if(j.year1>-1){var yt=parseInt(gt[j.year1]);yt=Math.floor(new Date().getFullYear()/10)*10+yt,$.year=yt}if(j.monthLong>-1&&($.month=this.resolveMonth(gt[j.monthLong])),j.monthShort>-1&&($.month=this.resolveShortMonth(gt[j.monthShort])),j.month>-1&&($.month=parseInt(gt[j.month])-1),j.week>-1&&j.day===-1&&($.month=0,$.day=getDayFromWeek(parseInt(gt[j.week]),$.year,1,this.utc)),j.day>-1&&($.day=parseInt(gt[j.day])),j.yearDay>-1&&($.month=0,$.day=parseInt(gt[j.yearDay])),j.hourBase0>-1&&($.hour=parseInt(gt[j.hourBase0])),j.hourBase1>-1&&($.hour=parseInt(gt[j.hourBase1])-1),j.hour12Base0>-1){var yt=parseInt(gt[j.hour12Base0]);yt==11&&(yt=0),j.am>-1&&!this.isAm(gt[j.am])&&(yt+=12),$.hour=yt}if(j.hour12Base1>-1){var yt=parseInt(gt[j.hour12Base1]);yt==12&&(yt=0),j.am>-1&&!this.isAm(gt[j.am])&&(yt+=12),$.hour=yt}if(j.minute>-1&&($.minute=parseInt(gt[j.minute])),j.second>-1&&($.second=parseInt(gt[j.second])),j.millisecond>-1){var yt=parseInt(gt[j.millisecond]);j.millisecondDigits==2?yt*=10:j.millisecondDigits==1&&(yt*=100),$.millisecond=yt}if(j.timestamp>-1){$.timestamp=parseInt(gt[j.timestamp]);var wt=new Date($.timestamp);$.year=wt.getUTCFullYear(),$.month=wt.getUTCMonth(),$.day=wt.getUTCDate(),$.hour=wt.getUTCHours(),$.minute=wt.getUTCMinutes(),$.second=wt.getUTCSeconds(),$.millisecond=wt.getUTCMilliseconds()}j.zone>-1&&($.offset=this.resolveTimezoneOffset(new Date($.year,$.month,$.day),gt[j.zone])),j.iso>-1&&($.year=toNumber(gt[j.iso+0]),$.month=toNumber(gt[j.iso+1])-1,$.day=toNumber(gt[j.iso+2]),$.hour=toNumber(gt[j.iso+3]),$.minute=toNumber(gt[j.iso+4]),$.second=toNumber(gt[j.iso+5]),$.millisecond=toNumber(gt[j.iso+6]),gt[j.iso+7]=="Z"||gt[j.iso+7]=="z"?$.utc=!0:gt[j.iso+7]!=""&&($.offset=this.resolveTimezoneOffset(new Date($.year,$.month,$.day),gt[j.iso+7]))),$.utc?d=new Date(Date.UTC($.year,$.month,$.day,$.hour,$.minute,$.second,$.millisecond)):d=new Date($.year,$.month,$.day,$.hour,$.minute+$.offset,$.second,$.millisecond)}else d=new Date(a);return d},o.prototype.resolveTimezoneOffset=function(a,c){var d=c.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/);if(d){var g=getValue(c.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)),b=g[1],j=g[2],$=g[3],_e=parseInt(j)*60+parseInt($);b=="+"&&(_e*=-1);var st=(a||new Date).getTimezoneOffset(),rt=_e-st;return rt}return 0},o.prototype.resolveMonth=function(a){var c=this.months.indexOf(a);return c>-1||this.language&&!this.language.isDefault()&&(c=this.language.translateAll(this.months).indexOf(a),c>-1)?c:0},o.prototype.resolveShortMonth=function(a){var c=this.monthsShort.indexOf(a);return c>-1||(c=this.months.indexOf(a),c>-1)||this.language&&!this.language.isDefault()&&(c=this.language.translateAll(this.monthsShort).indexOf(a),c>-1)?c:0},o.prototype.isAm=function(a){var c=this.getStringList(["AM","A.M.","A"]);return c.indexOf(a.toUpperCase())>-1},o.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},o.prototype.getStringList=function(a){for(var c=[],d=0;d<a.length;d++)this.language?c.push(escapeForRgex(this.language.translate(a[d]))):c.push(escapeForRgex(a[d]));return c},Object.defineProperty(o.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(a){this._dateFormat=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(a){this._inputDateFormat=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(a){this._intlLocales=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"utc",{get:function(){return this._utc},set:function(a){this._utc=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(a){this._timezoneOffset!=a&&(this._timezoneOffset=a,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timezone",{get:function(){return this._timezone},set:function(a){this._timezone!=a&&(this._timezone=a,this.timezoneMinutes=getTimezoneMinutes(a),this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(a){this._firstDayOfWeek=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(a){this._outputFormat=a.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),o}(BaseObject);registry.registeredClasses.DateFormatter=DateFormatter;var DurationFormatter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._negativeBase=0,a._baseUnit="second",a._outputFormat="svg",a._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},a._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},a.className="DurationFormatter",a.applyTheme(),a}return o.prototype.format=function(a,c,d){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Language);var g=d||this._baseUnit;(typeof c>"u"||c==="")&&(hasValue(this.durationFormat)?c=this.durationFormat:c=this.getFormat(toNumber(a),null,g)),c=cleanFormat(c);var b=this.parseFormat(c,g),j=Number(a),$;j>this._negativeBase?$=b.positive:j<this._negativeBase?$=b.negative:$=b.zero;var _e=this.applyFormat(j,$);return $.color!==""&&(this._outputFormat==="svg"?_e="<tspan fill='"+$.color+"'>"+_e+"</tspan>":this._outputFormat==="html"&&(_e="<span style='color: "+$.color+";'>"+_e+"</span>")),_e},o.prototype.parseFormat=function(a,c){var d=this,g=this.getCache(a);if(hasValue(g))return g;var b=c||this._baseUnit,j={positive:{color:"",template:"",parts:[],source:"",baseUnit:b,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:b,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:b,parsed:!1,absolute:!1}};a=a.replace("||",PLACEHOLDER2);var $=a.split("|");return j.positive.source=$[0],typeof $[2]>"u"?j.zero=j.positive:j.zero.source=$[2],typeof $[1]>"u"?j.negative=j.positive:j.negative.source=$[1],each$1(j,function(_e,st){if(!st.parsed){if(typeof d.getCache(st.source)<"u"){j[_e]=d.getCache(st.source);return}var rt=st.source,ut=[];ut=st.source.match(/^\[([^\]]*)\]/),ut&&ut.length&&ut[0]!==""&&(rt=st.source.substr(ut[0].length),st.color=ut[1]);for(var gt=getTextFormatter().chunk(rt,!0),yt=0;yt<gt.length;yt++){var wt=gt[yt];if(wt.text=wt.text.replace(PLACEHOLDER2,"|"),wt.type==="value"){wt.text.match(/[yYMdDwhHKkmsSn]+a/)&&(st.absolute=!0,wt.text=wt.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var Ct=wt.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(Ct)for(var Pt=0;Pt<Ct.length;Pt++)hasValue(Ct[Pt])||(Ct[Pt]=d._unitAliases[Ct[Pt]]),st.parts.push(Ct[Pt]),wt.text=wt.text.replace(Ct[Pt],PLACEHOLDER)}st.template+=wt.text}d.setCache(st.source,st),st.parsed=!0}}),this.setCache(a,j),j},o.prototype.applyFormat=function(a,c){var d=!c.absolute&&a<this._negativeBase;a=Math.abs(a);for(var g=this.toTimeStamp(a,c.baseUnit),b=c.template,j=0,$=c.parts.length;j<$;j++){var _e=c.parts[j],st=this.toTimeUnit(_e.substr(0,1)),rt=_e.length,ut=Math.floor(g/this._unitValues[st]);b=b.replace(PLACEHOLDER,padString(ut,rt,"0")),g-=ut*this._unitValues[st]}return d&&(b="-"+b),b},o.prototype.toTimeStamp=function(a,c){return a*this._unitValues[c]},o.prototype.toTimeUnit=function(a){switch(a){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},o.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(o.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(a){this._baseUnit=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(a){this._outputFormat=a.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),o.prototype.getFormat=function(a,c,d){if(hasValue(this.durationFormat))return this.durationFormat;if(d||(d=this.baseUnit),hasValue(c)&&a!=c){a=Math.abs(a),c=Math.abs(c);var g=this.getValueUnit(max$1(a,c),d);return this.durationFormats[d][g]}else{var b=this.getValueUnit(a,d);return this.durationFormats[d][b]}},o.prototype.getValueUnit=function(a,c){c||(c=this.baseUnit);var d,g=this.getMilliseconds(a,c);return eachContinue$1(this._unitValues,function(b,j){if(b==c||d){var $=g/j;if($<=1)return d||(d=b),!1;d=b}return!0}),d},o.prototype.getMilliseconds=function(a,c){return c||(c=this.baseUnit),a*this._unitValues[c]},Object.defineProperty(o.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(a){this._durationFormat!=a&&(this._durationFormat=a,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(a){this._durationFormats=a,this.invalidateSprite()},enumerable:!0,configurable:!0}),o}(BaseObject);registry.registeredClasses.DurationFormatter=DurationFormatter;var rules=new Dictionary;function exportCSS(e,o){var a=o||"amexport",c=new InterfaceColorSet,d=rules.insertKeyIfEmpty(a,function(){var g=new MultiDisposer([new StyleRule(e,"."+a+"-menu *",{"box-sizing":"border-box"}),new StyleRule(e,"."+a+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new StyleRule(e,"."+a+"-menu-level-0."+a+"-left",{right:"auto",left:"5px"}),new StyleRule(e,"."+a+"-menu-level-0."+a+"-right",{right:"5px",left:"auto"}),new StyleRule(e,"."+a+"-menu-level-0."+a+"-top",{top:"5px",bottom:"auto"}),new StyleRule(e,"."+a+"-menu-level-0."+a+"-bottom",{top:"auto",bottom:"5px"}),new StyleRule(e,"."+a+"-item."+a+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new StyleRule(e,"div:hover > div > ."+a+"-menu ."+a+"-item."+a+"-item-level-0, ."+a+"-item."+a+"-item-level-0.active",{opacity:"0.9"}),new StyleRule(e,"."+a+"-item."+a+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new StyleRule(e,"."+a+"-item."+a+"-item-level-0:before",{display:"block"}),new StyleRule(e,"."+a+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":c.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:c.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new StyleRule(e,"."+a+"-left ."+a+"-item",{margin:"1px 0 0 1px"}),new StyleRule(e,"."+a+"-item:hover, ."+a+"-item.active",{background:c.getFor("secondaryButtonHover").hex,color:c.getFor("secondaryButtonText").hex}),new StyleRule(e,"."+a+"-item > ."+a+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new StyleRule(e,"."+a+"-left ."+a+"-item > ."+a+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new StyleRule(e,"."+a+"-right ."+a+"-item > ."+a+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new StyleRule(e,"."+a+"-top ."+a+"-item > ."+a+"-menu",{top:"-1px",bottom:"auto"}),new StyleRule(e,"."+a+"-bottom ."+a+"-item > ."+a+"-menu",{top:"auto",bottom:"0"}),new StyleRule(e,"."+a+"-item > ."+a+"-menu",{display:"none"}),new StyleRule(e,"."+a+"-item:hover > ."+a+"-menu, ."+a+"-item.active > ."+a+"-menu",{display:"block"}),new StyleRule(e,"."+a+"-item:hover > ."+a+"-menu > ."+a+"-item, ."+a+"-item.active > ."+a+"-menu > ."+a+"-item",{opacity:"1"}),new StyleRule(e,"."+a+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new StyleRule(e,"."+a+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new StyleRule(e,"."+a+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new StyleRule(e,"."+a+"-item-level-0 > ."+a+"-icon",{padding:"0.1em 0.2em"}),new StyleRule(e,"."+a+"-clickable",{cursor:"pointer"})]);return new CounterDisposer(function(){rules.removeKey(a),g.dispose()})});return d.increment()}var Validatable=function(e){__extends(o,e);function o(){var a=e!==null&&e.apply(this,arguments)||this;return a._validateDisposer=null,a}return o.prototype.invalidate=function(){this._validateDisposer===null&&(this._validateDisposer=registry.events.on("exitframe",this.validate,this))},o.prototype.validate=function(){this._validateDisposer!==null&&(this._validateDisposer.dispose(),this._validateDisposer=null)},o.prototype.dispose=function(){this._validateDisposer!==null&&(this._validateDisposer.dispose(),this._validateDisposer=null),e.prototype.dispose.call(this)},o}(BaseObjectEvents),ExportMenu=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.adapter=new Adapter(a),a.closeDelay=1e3,a.closeOnClick=!0,a._language=new MutableValueDisposer,a._menuTag="ul",a._itemTag="li",a._labelTag="a",a._iconTag="img",a._classPrefix="amexport",a._defaultStyles=!0,a._align="right",a._verticalAlign="top",a._tabindex=0,a._ignoreNextClose=!1,a._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],a.className="ExportMenu",a._disposers.push(a._language),a.invalidate(),a.applyTheme(),a}return o.prototype.validate=function(){this.draw(),e.prototype.validate.call(this)},o.prototype.draw=function(){var a=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),getValue(this._container).appendChild(this._element);for(var c=this.adapter.apply("items",{items:this._items}).items,d=c.length,g=0;g<d;g++)this.drawBranch(this._element,c[g],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(getInteraction().body.events.on("down",function(b){b.pointer.touch||(a._ignoreNextClose=!1),a.close()})),this._disposers.push(getInteraction().body.events.on("keydown",function(b){var j=keyboard.getEventKey(b.event);switch(j){case"esc":a.close();break;case"up":case"down":case"left":case"right":a._currentSelection&&b.event.preventDefault(),a.moveSelection(j);break}})),this.defaultStyles&&this.loadDefaultCSS()},o.prototype.drawBranch=function(a,c,d){var g=this;if(c=this.adapter.apply("branch",{branch:c,level:d}).branch,c.unsupported!==!0){c.ascendants||(c.ascendants=new List);var b=c.type,j=this.createItemElement(d,b),$;c.icon?($=this.createIconElement(d,b),$.src=c.icon,(c.label||c.title)&&($.title=c.title||c.label)):c.svg?($=this.createSvgElement(d,b,c.svg),(c.label||c.title)&&($.title=c.title||c.label)):($=this.createLabelElement(d,b),$.innerHTML=c.label?this.language.translate(c.label):"",c.title&&($.title=c.title));var _e=this.getReaderLabel(c,$.innerHTML);$.setAttribute("aria-label",_e),j.appendChild($),c.interactions=getInteraction().getInteraction(j),c.element=j,this.typeClickable(b)&&(c.interactions.events.on("hit",function(Ct){if(g.events.isEnabled("hit")&&!g.isDisposed()){var Pt={type:"hit",event:Ct.event,target:g,branch:c};g.events.dispatchImmediately("hit",Pt)}}),c.interactions.events.on("keyup",function(Ct){if(keyboard.isKey(Ct.event,"enter")&&g.events.isEnabled("enter")){var Pt={type:"enter",event:Ct.event,target:g,branch:c};g.events.dispatchImmediately("enter",Pt)}}));{var st=this.getSubMenu(c);st!=null&&(c.interactions.events.on("keyup",function(Ct){keyboard.isKey(Ct.event,"enter")&&(g.selectBranch(st[0]),g.setFocus(st[0]))}),c.interactions.events.on("hit",function(Ct){g.selectBranch(c)}))}c.interactions.events.on("over",function(Ct){if(Ct.pointer.touch&&(g._ignoreNextClose=!0),g.selectBranch(c),g.events.isEnabled("over")){var Pt={type:"over",event:Ct.event,target:g,branch:c};g.events.dispatchImmediately("over",Pt)}}),c.interactions.events.on("out",function(Ct){if(!g.isDisposed()&&(Ct.pointer.touch||g.delayUnselectBranch(c),g.events.isEnabled("out"))){var Pt={type:"out",event:Ct.event,target:g,branch:c};g.events.dispatchImmediately("out",Pt)}}),c.interactions.events.on("focus",function(Ct){g.selectBranch(c)}),c.interactions.events.on("blur",function(Ct){g.delayUnselectBranch(c)});var rt=d+1;if(c.menu){var ut=this.createMenuElement(rt);c.submenuElement=ut;for(var gt=c.menu.length,yt=0;yt<gt;yt++){var wt=new List;c.menu[yt].ascendants=wt,c.ascendants.length&&wt.copyFrom(c.ascendants),wt.push(c),this.drawBranch(ut,c.menu[yt],rt)}if(ut.innerHTML=="")return;j.appendChild(ut)}c.hidden&&this.hideBranch(c),c.id&&j.setAttribute("id",c.id),c.color&&(j.style.backgroundColor=c.color.hex),a.appendChild(j)}},o.prototype.createMenuElement=function(a){var c=document.createElement(this.menuTag);return c.className=this.getMenuItemClass(a),a===0?c.setAttribute("role","menubar"):c.setAttribute("role","menu"),c},o.prototype.getMenuItemClass=function(a){var c=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+a;return a===0&&(c+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:c,level:a}).className},o.prototype.createItemElement=function(a,c){var d=document.createElement(this.itemTag),g=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+a+" "+this.classPrefix+"-item-"+(c||"blank");return d.className=this.adapter.apply("itemClass",{className:g,level:a,type:c}).className,d.setAttribute("role","menuitem"),d.setAttribute("tabindex",this.tabindex.toString()),d},o.prototype.createLabelElement=function(a,c){var d=document.createElement(this.labelTag),g=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+a+" "+this.classPrefix+"-item-"+(c||"blank");return this.typeClickable(c)&&(g+=" "+this.classPrefix+"-clickable"),d.className=this.adapter.apply("labelClass",{className:g,level:a,type:c}).className,d},o.prototype.createIconElement=function(a,c){var d=document.createElement(this.iconTag),g=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+a+" "+this.classPrefix+"-item-"+(c||"blank");return this.typeClickable(c)&&(g+=" "+this.classPrefix+"-clickable"),d.className=this.adapter.apply("labelClass",{className:g,level:a,type:c}).className,d.setAttribute("tabindex",this.tabindex.toString()),d.setAttribute("role","menuitem"),d},o.prototype.createSvgElement=function(a,c,d){var g=new DOMParser,b=g.parseFromString(d,"image/svg+xml").documentElement,j=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+a+" "+this.classPrefix+"-item-"+(c||"blank");return this.typeClickable(c)&&(j+=" "+this.classPrefix+"-clickable"),b.setAttribute("class",this.adapter.apply("labelClass",{className:j,level:a,type:c}).className),b.setAttribute("tabindex",this.tabindex.toString()),b.setAttribute("role","menuitem"),b},o.prototype.dispose=function(){this._disposed||(e.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},o.prototype.typeClickable=function(a){return hasValue(a)},o.prototype.hasSubMenu=function(a){return!!(a.menu&&a.menu.length)},o.prototype.getSubMenu=function(a){if(a.menu&&a.menu.length)return a.menu},o.prototype.getReaderLabel=function(a,c){return c=stripTags(c),a.ascendants.length==0?(c=c=="..."?this.language.translate("Export"):c,c+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(a)?c+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":a.type=="print"?c=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(a.type)&&(c=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,c)),this.adapter.apply("rederLabel",{label:c,branch:a}).label},Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(a){this._container=a,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"items",{get:function(){return this._items},set:function(a){this._items=a,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tag",{set:function(a){this._menuTag=a,this._itemTag=a=="ul"?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(a){this._align=a,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(a){this._verticalAlign=a,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(a){this._classPrefix=a,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(a){this._defaultStyles!=a&&(this._defaultStyles=a,a&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),o.prototype.loadDefaultCSS=function(){this._disposers.push(exportCSS(getShadowRoot(this.container),this.classPrefix)),this._element&&(this._element.style.display="")},Object.defineProperty(o.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(a){this._tabindex=a,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"language",{get:function(){var a=this,c=this._language.get();return c==null&&(c=new Language,this._language.set(c,c.events.on("localechanged",function(d){a.invalidate()}))),c},set:function(a){var c=this;this._language.set(a,a.events.on("localechanged",function(d){c.invalidate()})),this.invalidate()},enumerable:!0,configurable:!0}),o.prototype.close=function(){var a=this;if(!this.isDisposed()){if(this._ignoreNextClose){this._ignoreNextClose=!1;return}if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout(function(){a._element.style.pointerEvents="auto"},100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var c=this._element.getElementsByClassName("active"),d=c.length,g=d-1;g>=0;g--)c[g]&&removeClass(c[g],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},o.prototype.selectBranch=function(a){var c=this;if(!this.isDisposed()&&(a.closeTimeout&&(this.removeDispose(a.closeTimeout),a.closeTimeout=void 0),addClass(a.element,"active"),a.submenuElement&&a.submenuElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==a&&this._currentSelection.ascendants&&each(concat(fromArray([this._currentSelection]),this._currentSelection.ascendants.iterator()),function(g){!a.ascendants.contains(g)&&a!==g&&c.unselectBranch(g,!0)}),each(a.ascendants.iterator(),function(g){g.closeTimeout&&(c.removeDispose(g.closeTimeout),g.closeTimeout=void 0),addClass(g.element,"active")}),this._currentSelection=a,this.events.isEnabled("branchselected"))){var d={type:"branchselected",target:this,branch:a};this.events.dispatchImmediately("branchselected",d)}},o.prototype.unselectBranch=function(a,c){if(!this.isDisposed()&&(removeClass(a.element,"active"),a.submenuElement&&a.submenuElement.removeAttribute("aria-expanded"),this._currentSelection==a&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected"))){var d={type:"branchunselected",target:this,branch:a};this.events.dispatchImmediately("branchunselected",d)}},o.prototype.delayUnselectBranch=function(a,c){var d=this;this.isDisposed()||(a.closeTimeout&&(this.removeDispose(a.closeTimeout),a.closeTimeout=void 0),a.closeTimeout=this.setTimeout(function(){d.unselectBranch(a,c)},this.closeDelay),c!==!0&&a.ascendants&&each(a.ascendants.iterator(),function(g){d.delayUnselectBranch(g,!0)}))},o.prototype.moveSelection=function(a){if(!this.isDisposed()&&this._currentSelection){var c;if(a=="up")c=this.getPrevSibling(this._currentSelection);else if(a=="down")c=this.getNextSibling(this._currentSelection);else if(a=="left"&&this.align=="right"||a=="right"&&this.align=="left"){var d=this.getSubMenu(this._currentSelection);d!=null&&(c=d[0])}else(a=="right"&&this.align=="right"||a=="left"&&this.align=="left")&&(c=this.getParentItem(this._currentSelection));c&&c!==this._currentSelection&&(this.selectBranch(c),this.setFocus(c),this._currentSelection=c)}},o.prototype.getSiblings=function(a){var c=this.getParentItem(a);return c&&c.menu?c.menu:[]},o.prototype.getParentItem=function(a){if(a.ascendants&&a.ascendants.length)return a.ascendants.getIndex(a.ascendants.length-1)},o.prototype.getNextSibling=function(a){var c=this.getSiblings(a);if(c.length>1){var d=c.indexOf(a)+1;return d=c.length==d?0:d,c[d].unsupported?this.getNextSibling(c[d]):c[d]}else return a},o.prototype.getPrevSibling=function(a){var c=this.getSiblings(a);if(c.length>1){var d=c.indexOf(a)-1;return d=d==-1?c.length-1:d,c[d].unsupported?this.getPrevSibling(c[d]):c[d]}else return a},o.prototype.setFocus=function(a){if(a.interactions)try{a.interactions.element.focus()}catch{}},o.prototype.setBlur=function(a){if(a.interactions)try{a.interactions.element.blur()}catch{}},o.prototype.hideBranch=function(a){a.element.style.display="none"},o.prototype.showBranch=function(a){a.element.style.display=""},Object.defineProperty(o.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),o}(Validatable);function load(e,o,a){return new Promise(function(c,d){var g=hasValue(a)&&a.responseType=="blob",b=new XMLHttpRequest;if(b.onload=function(){if(b.status===200){var _e=void 0,st;if(g){st=b.response,readBlob(st).then(function(ut){var gt={xhr:b,error:!1,response:ut,blob:st,type:b.getResponseHeader("Content-Type"),target:o};c(gt)});return}else _e=b.responseText||b.response;var rt={xhr:b,error:!1,response:_e,blob:st,type:b.getResponseHeader("Content-Type"),target:o};c(rt)}else d({xhr:b,error:!0,type:b.getResponseHeader("Content-Type"),target:o})},b.onerror=function(){d({xhr:b,error:!0,type:b.getResponseHeader("Content-Type"),target:o})},b.open("GET",e,!0),a&&a.withCredentials&&(b.withCredentials=!0),hasValue(a)){if(hasValue(a.requestHeaders))for(var j=0;j<a.requestHeaders.length;j++){var $=a.requestHeaders[j];b.setRequestHeader($.key,$.value)}hasValue(a.responseType)&&(b.responseType=a.responseType)}b.send()})}function readBlob(e){return new Promise(function(o,a){var c=new FileReader;c.onload=function(d){o(c.result)},c.onerror=function(d){a(d)},c.readAsText(e)})}const Net=Object.freeze(Object.defineProperty({__proto__:null,load,readBlob},Symbol.toStringTag,{value:"Module"}));var pdfmakePromise;function _pdfmake(){return __awaiter(this,void 0,void 0,function(){var e,o,a,c;return __generator(this,function(d){switch(d.label){case 0:return[4,Promise.all([__vitePreload(()=>import("./pdfmake-aUPq6Zf4.js").then(g=>g.p),__vite__mapDeps([])),__vitePreload(()=>import("./vfs_fonts-lRrH9To1.js"),__vite__mapDeps([]))])];case 1:return e=d.sent(),o=e[0].default||e[0],a=e[1].default||e[1],c=window,c.pdfMake=c.pdfMake||{},c.pdfMake.vfs=a,o.vfs=a,[2,o]}})})}var fontFamilySrcRegexp=/src: ([^;]+);/;function supportsBlobUri(){return window.navigator.msSaveOrOpenBlob!=null}function blobToDataUri(e){return new Promise(function(o,a){var c=new FileReader;c.onload=function(d){o(c.result)},c.onerror=function(d){a(d)},c.readAsDataURL(e)})}function getCssRules(e){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:o=e.sheet,a.label=1;case 1:return a.trys.push([1,2,,4]),[2,o.cssRules];case 2:return a.sent(),[4,new Promise(function(c,d){e.addEventListener("load",function(){c(o.cssRules)},!0),e.addEventListener("error",function(g){d(g)},!0),setTimeout(function(){d(new Error("Timeout while waiting for <style> to load"))},1e4)})];case 3:return[2,a.sent()];case 4:return[2]}})})}function loadStylesheet(e,o,a){return __awaiter(this,void 0,void 0,function(){var c,d,g,b;return __generator(this,function(j){switch(j.label){case 0:return j.trys.push([0,2,,3]),[4,load(o)];case 1:return c=j.sent(),[3,3];case 2:return d=j.sent(),console.error("Failed to load stylesheet",o,d),[2];case 3:g=e.createElement("style"),g.textContent=c.response,options.nonce!=""&&g.setAttribute("nonce",options.nonce),e.head.appendChild(g),j.label=4;case 4:return j.trys.push([4,,7,8]),[4,getCssRules(g)];case 5:return b=j.sent(),[4,eachStylesheet(e,o,b,a)];case 6:return j.sent(),[3,8];case 7:return e.head.removeChild(g),[7];case 8:return[2]}})})}function eachStylesheet(e,o,a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$;return __generator(this,function(_e){switch(_e.label){case 0:for(d=[],g=a.length,b=0;b<g;b++)j=a[b],j.type===CSSRule.IMPORT_RULE?($=j.href,$&&($=joinUrl(o,$),d.push(loadStylesheet(e,$,c)))):c(o,j);return d.length?[4,Promise.all(d)]:[3,2];case 1:_e.sent(),_e.label=2;case 2:return[2]}})})}function eachStylesheets(e){return __awaiter(this,void 0,void 0,function(){var o,a;return __generator(this,function(c){switch(c.label){case 0:o=document.createElement("iframe"),o.src="about:blank",o.setAttribute("title",""),document.head.appendChild(o),c.label=1;case 1:return c.trys.push([1,,3,4]),a=o.contentDocument,[4,Promise.all(map$1(document.styleSheets,function(d){var g=d.href;return g==null?eachStylesheet(a,location.href,d.cssRules,e):(g=joinUrl(location.href,g),loadStylesheet(a,g,e))}))];case 2:return c.sent(),[3,4];case 3:return document.head.removeChild(o),[7];case 4:return[2]}})})}var Export=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c.adapter=new Adapter(c),c._formatOptions=new Dictionary,c._extraSprites=[],c._validateSprites=[],c.dataFieldsOrder=[],c._dynamicDataFields=!0,c._removedObjects=new List,c._hiddenObjects=[],c._objectsAlreadyHidden=!1,c._filePrefix="amCharts",c.useWebFonts=!0,c.useRetina=!0,c.useSimplifiedExport=!0,c.timeoutDelay=2e3,c._exportRunning=!1,c._prevHasData=!1,c._container=a,c.className="Export",c._formatOptions.setKey("png",{}),c._formatOptions.setKey("jpg",{quality:.8}),c._formatOptions.setKey("gif",{}),c._formatOptions.setKey("svg",{}),c._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),c._formatOptions.setKey("json",{indent:2,useLocale:!0}),c._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:"",addBOM:!0}),c._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),c._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),c._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),c._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),c.adapter.add("options",function(d){var g=c._formatOptions.getKey(d.type);return d.options?d.options=merge$1(g,d.options):d.options=g,d}),c.applyTheme(),c.dispatchImmediately("inited"),c}return Object.defineProperty(o.prototype,"menu",{get:function(){return this._menu},set:function(a){var c=this;this._menu&&this.removeDispose(this._menu),this._menu=a,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",function(d){return d.branch.unsupported=!c.typeSupported(d.branch.type),d}),this._menu.events.on("hit",function(d){c.export(d.branch.type,d.branch.options),c.menu.close()}),this._menu.events.on("enter",function(d){c.export(d.branch.type,d.branch.options),c.menu.close()}),this._menu.events.on("over",function(d){c._disablePointers()}),this._menu.events.on("out",function(d){setTimeout(function(){c._releasePointers()},10)}),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",function(d){return d.classPrefix=options.classNamePrefix+d.classPrefix,d}),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),o.prototype.typeSupported=function(a){var c=!0,d=this.getFormatOptions(a);return hasValue(d)&&d.disabled?c=!1:a==="pdf"||(a==="xlsx"?c=!!this._hasData():(a=="print"&&!window.print||["json","csv","html","pdfdata"].indexOf(a)!==-1&&!this._hasData())&&(c=!1)),this.adapter.apply("supported",{supported:c,type:a}).supported},o.prototype._hasData=function(){return this.data&&this.data.length},o.prototype._getFunction=function(a){switch(a){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},o.prototype.export=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$,_e=this;return __generator(this,function(st){switch(st.label){case 0:return a=="custom"?(this.handleCustom(c),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&(d={type:"exportstarted",target:this,format:a,options:c},this.events.dispatchImmediately("exportstarted",d)),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout(function(){if(_e.events.isEnabled("exporttimedout")){var rt={type:"exporttimedout",target:_e,format:a,options:c};_e.events.dispatchImmediately("exporttimedout",rt)}_e.showTimeout()},this.timeoutDelay)),this.hideNonExportableSprites(),g=this._getFunction(a),c=this.adapter.apply("options",{options:c,type:a}).options,g=this.adapter.apply("exportFunction",{func:g,type:a,options:c}).func,[4,g.call(this,a,c)]);case 1:return b=st.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),b?(this.events.isEnabled("exportfinished")&&(j={type:"exportfinished",target:this,format:a,options:c},this.events.dispatchImmediately("exportfinished",j)),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),a==="print"?[2,this.print(b,c,this.adapter.apply("title",{title:this.title,options:c}).title)]:a=="pdfdata"?[2,this.download(b,this.filePrefix+".pdf")]:[2,this.download(b,this.filePrefix+"."+a,c&&c.addBOM)]):(this.events.isEnabled("error")&&($={type:"error",target:this,format:a,options:c},this.events.dispatchImmediately("error",$)),[2,!1])}})})},o.prototype.unsupported=function(a,c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){return[2,""]})})},o.prototype.handleCustom=function(a){hasValue(a)&&hasValue(a.callback)&&a.callback.call(a.callbackTarget||this,a)},o.prototype.getPrint=function(a,c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){return[2,this.getImage("png",c)]})})},o.prototype.getFontFamilies=function(){return __awaiter(this,void 0,void 0,function(){var a,c,d,g,b=this;return __generator(this,function(j){switch(j.label){case 0:return a=this.getDOMURL(),c=[],d=[],[4,eachStylesheets(function($,_e){if(_e.type===CSSRule.FONT_FACE_RULE){var st=_e.cssText,rt=fontFamilySrcRegexp.exec(st);if(rt!==null){var ut=rt[1].split(/ *, */).map(function(gt){return __awaiter(b,void 0,void 0,function(){var yt,wt,Ct,Pt,At,Tt;return __generator(this,function(kt){switch(kt.label){case 0:return yt=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(gt),yt!==null?[3,1]:[2,gt];case 1:if(wt=yt[2],Ct=joinUrl($,yt[1]),this.webFontFilter&&!Ct.match(this.webFontFilter))return[2,null];kt.label=2;case 2:return kt.trys.push([2,7,,8]),[4,load(Ct,void 0,{responseType:"blob"})];case 3:return Pt=kt.sent(),supportsBlobUri()?(At=a.createObjectURL(Pt.blob),c.push(At),[3,6]):[3,4];case 4:return[4,blobToDataUri(Pt.blob)];case 5:At=kt.sent(),kt.label=6;case 6:return[2,'url("'+At+'")'+wt];case 7:return Tt=kt.sent(),console.error("Failed to load font",Ct,Tt),[2,null];case 8:return[2]}})})});d.push(Promise.all(ut).then(function(gt){return gt=gt.filter(function(yt){return yt!=null}),gt.length===0?"":st.replace(fontFamilySrcRegexp,"src: "+gt.join(", ")+";")}))}}})];case 1:return j.sent(),[4,Promise.all(d)];case 2:return g=j.sent(),[2,{blobs:c,cssText:g.filter(function($){return!!$}).join(`
`)}]}})})},o.prototype.getImage=function(a,c,d){return __awaiter(this,void 0,void 0,function(){var g,b,j,$,_e,st,st;return __generator(this,function(rt){switch(rt.label){case 0:return g=this._objectsAlreadyHidden,g||this.hideNonExportableSprites(),hasValue(c)||(c=this.getFormatOptions(a)),[4,this.awaitValidSprites()];case 1:return rt.sent(),[4,this.simplifiedImageExport()];case 2:if(!rt.sent())return[3,10];b=void 0,rt.label=3;case 3:return rt.trys.push([3,7,,9]),[4,this.getCanvas(c)];case 4:return b=rt.sent(),d===!1?[3,6]:[4,this.addExtras(b,c)];case 5:j=rt.sent(),this.disposeCanvas(b),b=j,rt.label=6;case 6:return $=b.toDataURL(this.getContentType(a),c.quality),this.disposeCanvas(b),g||this.restoreNonExportableSprites(),[2,$];case 7:return _e=rt.sent(),console.error(_e.message+`
`+_e.stack),warn("Simple export failed, falling back to advanced export"),b&&this.disposeCanvas(b),[4,this.getImageAdvanced(a,c,d)];case 8:return st=rt.sent(),g||this.restoreNonExportableSprites(),[2,st];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(a,c,d)];case 11:return st=rt.sent(),g||this.restoreNonExportableSprites(),[2,st];case 12:return[2]}})})},o.prototype.addExtras=function(a,c,d){return __awaiter(this,void 0,void 0,function(){var g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt=this;return __generator(this,function(kt){switch(kt.label){case 0:return this.extraSprites.length?(g=0,b=0,j=a.width,$=a.height,_e=0,st=0,[4,Promise.all(map$1(this.extraSprites,function(It){return __awaiter(Tt,void 0,void 0,function(){var Lt,Ft,Nt,Ht;return __generator(this,function(dr){switch(dr.label){case 0:return It instanceof Sprite?Lt={sprite:It,position:"bottom"}:Lt=It,Lt.position=Lt.position||"bottom",Lt.marginTop=Lt.marginTop||0,Lt.marginRight=Lt.marginRight||0,Lt.marginBottom=Lt.marginBottom||0,Lt.marginLeft=Lt.marginLeft||0,d?[4,Lt.sprite.exporting.getCanvasAdvanced(c)]:[3,2];case 1:return Ft=dr.sent(),[3,4];case 2:return[4,Lt.sprite.exporting.getCanvas(c)];case 3:Ft=dr.sent(),dr.label=4;case 4:return Nt=Ft.width+Lt.marginLeft+Lt.marginRight,Ht=Ft.height+Lt.marginTop+Lt.marginBottom,Lt.position=="top"?(j=Lt.crop?$:max$1(j,Nt),b+=Ht):Lt.position=="right"?($=Lt.crop?$:max$1($,Ht),_e+=Nt):Lt.position=="left"?($=Lt.crop?$:max$1($,Ht),g+=Nt):Lt.position==="bottom"&&(j=Lt.crop?$:max$1(j,Nt),st+=Ht),[2,{canvas:Ft,position:Lt.position,left:Lt.marginLeft,top:Lt.marginTop,width:Nt,height:Ht}]}})})}))]):[3,2];case 1:return rt=kt.sent(),ut=this.getDisposableCanvas(),ut.width=g+j+_e,ut.height=b+$+st,gt=ut.getContext("2d"),yt=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),yt&&(gt.fillStyle=yt.toString(),gt.fillRect(0,0,ut.width,ut.height)),wt=g,Ct=b,Pt=wt+j,At=Ct+$,each$2(rt,function(It){It.position=="top"?(Ct-=It.height,gt.drawImage(It.canvas,g+It.left,Ct+It.top)):It.position=="right"?(gt.drawImage(It.canvas,Pt+It.left,b+It.top),Pt+=It.width):It.position=="left"?(wt-=It.width,gt.drawImage(It.canvas,wt+It.left,b+It.top)):It.position==="bottom"&&(gt.drawImage(It.canvas,g+It.left,At+It.top),At+=It.height),Tt.disposeCanvas(It.canvas)}),gt.drawImage(a,g,b),[2,ut];case 2:return[2,a]}})})},o.prototype.getCanvas=function(a){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt;return __generator(this,function(kt){switch(kt.label){case 0:hasValue(a)||(a={}),c=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),d=this.getDOMURL(),g=null,b=null,kt.label=1;case 1:return kt.trys.push([1,,4,5]),$=this.sprite.pixelWidth,_e=this.sprite.pixelHeight,st=findFont(this.sprite.dom),rt=findFontSize(this.sprite.dom),ut=a.scale||1,gt=this.getPixelRatio(a),ut=this.getAdjustedScale($*gt,_e*gt,ut,a),j=this.getDisposableCanvas(),j.style.width=$*ut+"px",j.style.height=_e*ut+"px",j.width=$*ut,j.height=_e*ut,yt=j.getContext("2d"),c&&(yt.fillStyle=c.toString(),yt.fillRect(0,0,$*ut,_e*ut)),wt=[],this.useWebFonts&&wt.push(this.getFontFamilies().then(function(It){return b=It.blobs,It.cssText})),wt.push(this.imagesToDataURI(this.sprite.dom,a)),wt.push(this.prepForeignObjects(this.sprite.dom,a)),[4,Promise.all(wt)];case 2:return Ct=kt.sent(),Pt=this.normalizeSVG("<style>"+Ct[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),a,$,_e,ut,st,rt),At=new Blob([Pt],{type:"image/svg+xml"}),g=d.createObjectURL(At),[4,this.loadNewImage(g,$*ut*gt,_e*ut*gt,"anonymous")];case 3:return Tt=kt.sent(),yt.drawImage(Tt,0,0),[3,5];case 4:return g!==null&&d.revokeObjectURL(g),b!==null&&each$2(b,function(It){d.revokeObjectURL(It)}),this.restoreRemovedObjects(),[7];case 5:return[2,j]}})})},o.prototype.getCanvasAdvanced=function(a){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j,$,_e,st,rt,ut,gt;return __generator(this,function(yt){switch(yt.label){case 0:return hasValue(a)||(a={}),[4,this.imagesToDataURI(this.sprite.dom,a)];case 1:return yt.sent(),c=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return d=yt.sent(),g=this.sprite.pixelWidth,b=this.sprite.pixelHeight,j=findFont(this.sprite.dom),$=findFontSize(this.sprite.dom),_e=a.scale||1,st=this.getPixelRatio(a),_e=this.getAdjustedScale(g*st,b*st,_e,a),rt=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),a,g,b,_e,j,$,c),ut=this.getDisposableCanvas(),ut.style.width=g*st*_e+"px",ut.style.height=b*st*_e+"px",ut.width=g*st*_e,ut.height=b*st*_e,gt={useCORS:!0},st!=1&&(gt.ignoreDimensions=!0,gt.scaleWidth=g*st*_e,gt.scaleHeight=b*st*_e),[4,d.fromString(ut.getContext("2d"),rt,gt).render()];case 3:return yt.sent(),[2,ut]}})})},o.prototype.getImageAdvanced=function(a,c,d){return __awaiter(this,void 0,void 0,function(){var g,b,j;return __generator(this,function($){switch($.label){case 0:return g=this._objectsAlreadyHidden,g||this.hideNonExportableSprites(),hasValue(c)||(c=this.getFormatOptions(a)),[4,this.getCanvasAdvanced(c)];case 1:return b=$.sent(),d===!1?[3,3]:[4,this.addExtras(b,c,!0)];case 2:b=$.sent(),$.label=3;case 3:return j=b.toDataURL(this.getContentType(a),c.quality),this.disposeCanvas(b),g||this.restoreNonExportableSprites(),[2,j]}})})},o.prototype.getDisposableCanvas=function(){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="-10000px",document.body.appendChild(a),a},o.prototype.disposeCanvas=function(a){document.body.contains(a)&&document.body.removeChild(a)},o.prototype.getPixelRatio=function(a){return this.useRetina?getPixelRatio():1},o.prototype.getAdjustedScale=function(a,c,d,g){if(!g)return d;var b=a*d,j=a*d,$,_e;return g.maxWidth&&b>g.maxWidth&&($=g.maxWidth/a),g.maxHeight&&j>g.maxHeight&&(_e=g.maxHeight/c),$||_e?min$1($,_e):(g.minWidth&&b<g.minWidth&&($=g.minWidth/a),g.minHeight&&j<g.minHeight&&(_e=g.minHeight/c),$||_e?max$1($,_e):d)},o.prototype.imagesToDataURI=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$,_e;return __generator(this,function(st){switch(st.label){case 0:if(d=a.querySelectorAll("image"),!d.length)return[3,2];for(g=[],b=d.length,j=0;j<b;j++)$=d[j],_e=$.getAttributeNS(o.XLINK,"href"),_e&&(_e.indexOf("data:image")!==-1||(_e.indexOf(".svg")!==-1?g.push(this.svgToDataURI($,c)):g.push(this.imageToDataURI($,c))));return[4,Promise.all(g)];case 1:return st.sent(),[2];case 2:return[2]}})})},o.prototype.prepForeignObjects=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b;return __generator(this,function(j){if(d=a.querySelectorAll("foreignObject"),d.length)for(g=d.length,b=0;b<g;b++)this.temporarilyRemoveObject(d[b]);return[2]})})},o.prototype.imageToDataURI=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b;return __generator(this,function(j){switch(j.label){case 0:return j.trys.push([0,2,,3]),[4,this.loadNewImage(a.getAttributeNS(o.XLINK,"href"),null,null,"anonymous")];case 1:d=j.sent(),g=document.createElement("canvas"),g.width=d.width,g.height=d.height,g.getContext("2d").drawImage(d,0,0);try{return b=g.toDataURL(),a.setAttribute("href",b),[2,b]}catch{return c.keepTainted!==!1&&this.temporarilyRemoveObject(a),[2,void 0]}return[3,3];case 2:return j.sent(),(!c||c.keepTainted!==!1)&&this.temporarilyRemoveObject(a),[2,void 0];case 3:return[2]}})})},o.prototype.svgToDataURI=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j;return __generator(this,function($){switch($.label){case 0:d=a.getAttributeNS(o.XLINK,"href"),$.label=1;case 1:return $.trys.push([1,3,,4]),[4,load(d)];case 2:return g=$.sent(),b=this.adapter.apply("charset",{charset:"base64",type:"svg",options:c}).charset,j=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+b+","+btoa(g.response),options:c}).data,a.setAttributeNS(o.XLINK,"href",j),[2,j];case 3:return $.sent(),(!c||c.keepTainted!==!1)&&this.temporarilyRemoveObject(a),[2,void 0];case 4:return[2]}})})},o.prototype.temporarilyRemoveObject=function(a,c){var d=a.parentElement||a.parentNode;c||(c=this.sprite.paper.add("g").node),d.insertBefore(c,a),a.textContent,d.removeChild(a),this._removedObjects.push({element:a,placeholder:c})},o.prototype.restoreRemovedObjects=function(){for(var a;a=this._removedObjects.pop(),!!a;){var c=a.placeholder.parentElement||a.placeholder.parentNode;c.insertBefore(a.element,a.placeholder)}},o.prototype.simplifiedImageExport=function(){return __awaiter(this,void 0,void 0,function(){var a,c,d,g,b,j,$;return __generator(this,function(_e){switch(_e.label){case 0:if(this.useSimplifiedExport===!1)return[2,!1];if(a=registry.getCache("simplifiedImageExport"),a===!1||a===!0)return[2,a];_e.label=1;case 1:_e.trys.push([1,6,,7]),c=document.createElement("canvas"),c.width=1,c.height=1,d=c.getContext("2d"),g=this.getDOMURL(),b=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),j=g.createObjectURL(b),$=void 0,_e.label=2;case 2:return _e.trys.push([2,4,,5]),[4,this.loadNewImage(j,1,1)];case 3:return $=_e.sent(),[3,5];case 4:return _e.sent(),[2,!1];case 5:d.drawImage($,0,0),g.revokeObjectURL(j);try{return registry.setCache("simplifiedImageExport",!0),[2,!0]}catch{return registry.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return _e.sent(),registry.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}})})},o.prototype.loadNewImage=function(a,c,d,g){return new Promise(function(b,j){var $;c&&d?$=new Image(c,d):$=new Image,g&&$.setAttribute("crossOrigin",g),$.onload=function(){b($)};function _e(){if(g){var st=$.src;$.onerror=function(){j(new Error('Loading image "'+a+'" failed'))},$.removeAttribute("crossorigin"),$.src="",$.src=st}else j(new Error('Loading image "'+a+'" failed'))}$.onabort=_e,$.onerror=_e,$.src=a})},o.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},o.prototype.getSVG=function(a,c,d){return d===void 0&&(d=!0),__awaiter(this,void 0,void 0,function(){var g,b,j,$,_e,st,rt,ut,gt,yt;return __generator(this,function(wt){switch(wt.label){case 0:return g=this._objectsAlreadyHidden,g||this.hideNonExportableSprites(),hasValue(c)||(c=this.getFormatOptions("svg")),[4,this.awaitValidSprites()];case 1:return wt.sent(),b=this.sprite.pixelWidth,j=this.sprite.pixelHeight,$=findFont(this.sprite.dom),_e=findFontSize(this.sprite.dom),st=c.scale||1,rt=this.getPixelRatio(c),st=this.getAdjustedScale(b*rt,j*rt,st,c),ut=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),c,b,j,st,$,_e),gt=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:c}).charset,yt=this.adapter.apply("getSVG",{data:d?"data:"+this.getContentType(a)+";"+gt+","+encodeURIComponent(ut):ut,options:c}).data,g||this.restoreNonExportableSprites(),[2,yt]}})})},o.prototype.normalizeSVG=function(a,c,d,g,b,j,$,_e){var st="";d&&(st+='width="'+Math.round(d*(b||1))+'px" '),g&&(st+='height="'+Math.round(g*(b||1))+'px" ');var rt="";j&&(rt+="font-family: "+j.replace(/"/g,"")+";"),$&&(rt+="font-size: "+$+";"),b&&(st+='viewBox="0 0 '+d+" "+g+'" ');var ut=[],gt=a.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(gt)for(var yt=0;yt<gt.length;yt++)a=a.replace(gt[yt],PLACEHOLDER),ut.push(gt[yt]);a.match(/<svg/)?st!==""&&(a=a.replace(/(<svg[^>]*)width="[^"]*"/,"$1"),a=a.replace(/(<svg[^>]*)height="[^"]*"/,"$1"),a=a.replace(/(<svg)/,"$1"+st)):a='<?xml version="1.0" encoding="utf-8"?><svg '+st+' style="'+rt+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+a+"</svg>",_e&&(a=a.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+_e.rgba+'"/>')),isInternetExplorer()&&(a=a.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var wt=new RegExp("url\\("+escapeForRgex(getBaseURI()),"g");if(a=a.replace(wt,"url(#"),a=a.replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),ut.length)for(var yt=0;yt<ut.length;yt++)a=a.replace(PLACEHOLDER,ut[yt]);return a=this.adapter.apply("normalizeSVG",{data:a,options:c}).data,a},o.prototype.serializeElement=function(a){return new XMLSerializer().serializeToString(a)},o.prototype.getPDF=function(a,c){return __awaiter(this,void 0,void 0,function(){function d(Ct){var Pt={};Pt.normal=Ct.normal.path,wt[Ct.normal.path]=Ct.normal.bytes,Ct.bold?(Pt.bold=Ct.bold.path,wt[Ct.bold.path]=Ct.bold.bytes):Pt.bold=Ct.normal.path,Ct.italics?(Pt.italics=Ct.italics.path,wt[Ct.italics.path]=Ct.italics.bytes):Pt.italics=Ct.normal.path,Ct.bolditalics?(Pt.bolditalics=Ct.bolditalics.path,wt[Ct.bolditalics.path]=Ct.bolditalics.bytes):Pt.bolditalics=Ct.normal.path,yt[Ct.name]=Pt}var g,b,j,$,_e,st,rt,ut,gt,yt,wt;return __generator(this,function(Ct){switch(Ct.label){case 0:return[4,this.getImage(c.imageFormat||"png",c)];case 1:return g=Ct.sent(),[4,this.pdfmake];case 2:return b=Ct.sent(),j=[30,30,30,30],$={pageSize:c.pageSize||"A4",pageOrientation:c.pageOrientation||"portrait",pageMargins:c.pageMargins||j,defaultStyle:{font:c.font?c.font.name:void 0},content:[]},_e=this.adapter.apply("title",{title:this.title,options:c}).title,st=0,_e&&($.content.push({text:_e,fontSize:c.fontSize||14,bold:!0,margin:[0,0,0,15]}),st+=50),c.addURL&&($.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:c.fontSize,margin:[0,0,0,15]}),st+=50),a!="pdfdata"&&$.content.push({image:g,alignment:c.align||"left",fit:this.getPageSizeFit($.pageSize,$.pageMargins,st)}),a=="pdfdata"||c.addData?(ut=(rt=$.content).push,gt={},[4,this.getPDFData("pdf",c)]):[3,4];case 3:ut.apply(rt,[(gt.table=Ct.sent(),gt.fontSize=c.fontSize||14,gt)]),Ct.label=4;case 4:return $=this.adapter.apply("pdfmakeDocument",{doc:$,options:c}).doc,yt=null,wt=null,c.font&&(yt={},wt={},d(c.font),c.extraFonts&&each$2(c.extraFonts,d)),[4,new Promise(function(Pt,At){b.createPdf($,null,yt,wt).getDataUrl(function(Tt){Pt(Tt)})})];case 5:return[2,Ct.sent()]}})})},o.prototype.getPDFData=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$,_e,st=this;return __generator(this,function(rt){if(d={body:[]},g=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,b=this.data,c.pivot)j=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,eachOrdered(g,function(ut,gt){var yt=[];c.addColumnNames&&yt.push(gt);for(var wt=b.length,Ct=0;Ct<wt;Ct++){var Pt=b[Ct][ut];yt.push(st.convertToSpecialFormat(ut,Pt,c,!0))}d.body.push(st.getPDFDataRow(yt,c,void 0,!0))},function(ut,gt){var yt=j.indexOf(ut),wt=j.indexOf(gt);return yt>wt?1:yt<wt?-1:0});else for(c.addColumnNames&&(d.body.push(this.getPDFDataRow(g,c,void 0,!0)),d.headerRows=1),$=b.length,_e=0;_e<$;_e++)d.body.push(this.getPDFDataRow(b[_e],c,g));return[2,this.adapter.apply("pdfmakeTable",{table:d,options:c}).table]})})},o.prototype.getPDFDataRow=function(a,c,d,g){var b=this;g===void 0&&(g=!1);var j=[];d||(d=a);var $=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return eachOrdered(d,function(_e,st){var rt=b.convertEmptyValue(_e,a[_e],c),ut=g?rt:b.convertToSpecialFormat(_e,rt,c);ut=""+ut,j.push(ut)},function(_e,st){var rt=$.indexOf(_e),ut=$.indexOf(st);return rt>ut?1:rt<ut?-1:0}),j},o.prototype.getPageSizeFit=function(a,c,d){d===void 0&&(d=0);var g=[0,0,0,0];typeof c=="number"?g=[c,c,c,c]:c.length==2?g=[c[0],c[1],c[0],c[1]]:c.length==4&&(g=c);var b={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},j=b[a];return j[0]-=g[0]+g[2],j[1]-=g[1]+g[3]+d,j},o.prototype.getExcel=function(a,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$,_e,st,rt,ut,gt,yt=this;return __generator(this,function(wt){switch(wt.label){case 0:return hasValue(c)||(c=this.getFormatOptions("xlsx")),[4,this.xlsx];case 1:if(d=wt.sent(),g=this.adapter.apply("xlsxWorkbookOptions",{xlsx:d,options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,b=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{xlsx:d,name:this.title||this.language.translate("Data")}).name),j={SheetNames:[b],Sheets:{}},$=[],_e=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,c.pivot)st=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,eachOrdered(_e,function(Ct,Pt){var At=[];c.addColumnNames&&At.push(Pt);for(var Tt=yt.data.length,kt=0;kt<Tt;kt++){var It=yt.data[kt][Ct];At.push(yt.convertToSpecialFormat(Ct,It,c,!0))}$.push(yt.getExcelRow(At,c,void 0,!0))},function(Ct,Pt){var At=st.indexOf(Ct),Tt=st.indexOf(Pt);return At>Tt?1:At<Tt?-1:0});else for(c.addColumnNames&&$.push(this.getExcelRow(_e,c,void 0,!0)),rt=this.data.length,ut=0;ut<rt;ut++)$.push(this.getExcelRow(this.data[ut],c,_e));return j.Sheets[b]=d.utils.aoa_to_sheet($),j=this.adapter.apply("xlsxWorkbook",{xlsx:d,workbook:j,options:c}).workbook,gt=this.adapter.apply("getExcel",{data:"data:"+this.getContentType(a)+";base64,"+d.write(j,g),options:c}).data,[2,gt]}})})},o.prototype.normalizeExcelSheetName=function(a){return a=a.replace(/([:\\\/?*\[\]]+)/g," "),truncateWithEllipsis(a,31,"...",!0)},o.prototype.getExcelRow=function(a,c,d,g){var b=this;g===void 0&&(g=!1);var j=[];d||(d=a);var $=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return eachOrdered(d,function(_e,st){var rt=b.convertEmptyValue(_e,a[_e],c),ut=g?rt:b.convertToSpecialFormat(_e,rt,c,!0);j.push(ut)},function(_e,st){var rt=$.indexOf(_e),ut=$.indexOf(st);return rt>ut?1:rt<ut?-1:0}),j},o.prototype.getCSV=function(a,c,d){return d===void 0&&(d=!0),__awaiter(this,void 0,void 0,function(){var g,b,j,$,_e,st,rt,ut,gt,yt,wt=this;return __generator(this,function(Ct){if(hasValue(c)||(c=this.getFormatOptions("csv")),g="",b=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,j="",$=this.data,c.pivot)_e=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,eachOrdered(b,function(Pt,At){var Tt=[];c.addColumnNames&&Tt.push(At);for(var kt=$.length,It=0;It<kt;It++){var Lt=$[It][Pt];Tt.push(wt.convertToSpecialFormat(Pt,Lt,c,!0))}g+=j+wt.getCSVRow(Tt,c,void 0,!0),j=`
`},function(Pt,At){var Tt=_e.indexOf(Pt),kt=_e.indexOf(At);return Tt>kt?-1:Tt<kt?1:0});else{for(st=$.length,rt=0;rt<st;rt++)ut=this.getCSVRow($[rt],c,b),c.reverse?g=ut+j+g:g+=j+ut,j=`
`;c.addColumnNames&&(g=this.getCSVRow(b,c,void 0,!0)+j+g)}return gt=this.adapter.apply("charset",{charset:"charset=utf-8",type:a,options:c}).charset,yt=this.adapter.apply("getCSV",{data:d?"data:"+this.getContentType(a)+";"+gt+","+encodeURIComponent(g):g,options:c}).data,[2,yt]})})},o.prototype.getCSVRow=function(a,c,d,g){var b=this;g===void 0&&(g=!1);var j=c.separator||",",$=[];d||(d=a);var _e=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return eachOrdered(d,function(st,rt){var ut=b.convertEmptyValue(st,a[st],c),gt=g?ut:b.convertToSpecialFormat(st,ut,c);gt=""+gt,gt=gt.replace(/"/g,'""'),(c.forceQuotes||gt.search(new RegExp(`"|
|`+j,"g"))>=0)&&(gt='"'+gt+'"'),$.push(gt)},function(st,rt){var ut=_e.indexOf(st),gt=_e.indexOf(rt);return ut>gt?1:ut<gt?-1:0}),$.join(j)},o.prototype.getHTML=function(a,c,d){return d===void 0&&(d=!0),__awaiter(this,void 0,void 0,function(){var g,b,j,$,_e,st,rt,ut,gt=this;return __generator(this,function(yt){if(hasValue(c)||(c=this.getFormatOptions("html")),g="<table>",c.tableClass&&(g='<table class="'+c.tableClass+'">'),b=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,j=this.data,c.pivot)$=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,g+=`
<tbody>`,eachOrdered(b,function(wt,Ct){var Pt=[];c.addColumnNames&&Pt.push(Ct);for(var At=j.length,Tt=0;Tt<At;Tt++){var kt=j[Tt][wt];Pt.push(gt.convertToSpecialFormat(wt,kt,c,!0))}g+=`
`+gt.getHTMLRow(Pt,c,void 0,!0)},function(wt,Ct){var Pt=$.indexOf(wt),At=$.indexOf(Ct);return Pt>At?-1:Pt<At?1:0}),g+=`
</tbody>`;else{for(c.addColumnNames&&(g+=`
<thead>
`+this.getHTMLRow(b,c,void 0,!0,!0)+`
</thead>`),g+=`
<tbody>`,_e=j.length,st=0;st<_e;st++)g+=`
`+this.getHTMLRow(j[st],c,b);g+=`
</tbody>`}return g+=`
</table>`,rt=this.adapter.apply("charset",{charset:"charset=utf-8",type:a,options:c}).charset,ut=this.adapter.apply("getHTML",{data:d?"data:"+this.getContentType(a)+";"+rt+","+encodeURIComponent(g):g,options:c}).data,[2,ut]})})},o.prototype.getHTMLRow=function(a,c,d,g,b){var j=this;g===void 0&&(g=!1),b===void 0&&(b=!1);var $="	<tr>";c.rowClass&&($='	<tr class="'+c.rowClass+'">'),d||(d=a);var _e=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,st=b?"th":"td",rt=!0;return eachOrdered(d,function(ut,gt){var yt=j.convertEmptyValue(ut,a[ut],c),wt=g?yt:j.convertToSpecialFormat(ut,yt,c);wt=""+wt,wt=wt.replace(/[\u00A0-\u9999<>\&]/gim,function(Pt){return"&#"+Pt.charCodeAt(0)+";"});var Ct=st;c.pivot&&rt&&(Ct="th"),c.cellClass?$+=`
		<`+Ct+' class="'+c.cellClass+'">'+wt+"</"+Ct+">":$+=`
		<`+Ct+">"+wt+"</"+Ct+">",rt=!1},function(ut,gt){var yt=_e.indexOf(ut),wt=_e.indexOf(gt);return yt>wt?1:yt<wt?-1:0}),$+=`
	</tr>`,$},o.prototype.getJSON=function(a,c,d){return d===void 0&&(d=!0),__awaiter(this,void 0,void 0,function(){var g,b,j,$,_e,st,rt,ut,gt,yt=this;return __generator(this,function(wt){if(hasValue(c)||(c=this.getFormatOptions("json")),b=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"json"}).dataFields,this._dynamicDataFields)g=this.data;else for(g=[],j=this.data,$=function(Ct,Pt){var At=j[Pt];if(typeof At=="object"){var Tt={};each$1(At,function(kt,It){hasValue(b[kt])&&(Tt[b[kt]]=yt.convertToSpecialFormat(kt,It,c))}),g.push(Tt)}},_e=j.length,st=0;st<_e;st++)$(_e,st);return rt=JSON.stringify(g,function(Ct,Pt){return typeof Pt=="object"&&each$1(Pt,function(At,Tt){Pt[At]=yt.convertToSpecialFormat(At,Tt,c)}),Pt},c.indent),ut=this.adapter.apply("charset",{charset:"charset=utf-8",type:a,options:c}).charset,gt=this.adapter.apply("getJSON",{data:d?"data:"+this.getContentType(a)+";"+ut+","+encodeURIComponent(rt):rt,options:c}).data,[2,gt]})})},o.prototype.convertToSpecialFormat=function(a,c,d,g){if(typeof c=="number")if(this.isDateField(a))c=new Date(c);else{if(this.isDurationField(a))return this.durationFormatter.format(c,this.durationFormat);if(this.isNumberField(a)&&this.numberFormat)return this.numberFormatter.format(c,this.numberFormat)}return c instanceof Date?d.useTimestamps?c=c.getTime():d.useLocale?g||(c=c.toLocaleString()):c=this.dateFormatter.format(c,this.dateFormat):isString$1(c)&&this.isDateField(a)&&this.dateFormat&&(c=this.dateFormatter.format(this.dateFormatter.parse(c),this.dateFormat)),c},o.prototype.convertEmptyValue=function(a,c,d){return hasValue(c)?c:d.emptyAs},o.prototype.download=function(a,c,d){return d===void 0&&(d=!1),__awaiter(this,void 0,void 0,function(){var Ct,Pt,j,g,st,rt,ut,gt,b,Ct,Pt,j,$,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At,Tt;return __generator(this,function(kt){if(this.msBlobDownloadSupport()){if(Ct=a.split(";"),Pt=Ct.shift().replace(/data:/,""),a=decodeURIComponent(Ct.join(";").replace(/^[^,]*,/,"")),["image/svg+xml","application/json","text/csv"].indexOf(Pt)==-1)try{j=atob(a),a=j}catch{return[2,!1]}else return g=new Blob([a],{type:Pt}),window.navigator.msSaveBlob(g,c),[2,!0];for(st=new Array(a.length),rt=0;rt<a.length;++rt)ut=a.charCodeAt(rt),st[rt]=ut;gt=new Blob([new Uint8Array(st)],{type:Pt}),window.navigator.msSaveBlob(gt,c)}else if(this.blobDownloadSupport()){if(b=document.createElement("a"),b.download=c,document.body.appendChild(b),Ct=a.split(";"),Pt=Ct.shift().replace(/data:/,""),a=decodeURIComponent(Ct.join(";").replace(/^[^,]*,/,"")),["image/svg+xml","application/json","text/csv","text/html"].indexOf(Pt)==-1)try{j=atob(a),a=j}catch{return[2,!1]}else return d&&(a="\uFEFF"+a),$=new Blob([a],{type:Pt}),_e=window.URL.createObjectURL($),b.href=_e,b.download=c,b.click(),setTimeout(function(){document.body.removeChild(b),window.URL.revokeObjectURL(_e)},100),[2,!0];for(st=new Array(a.length),rt=0;rt<a.length;++rt)ut=a.charCodeAt(rt),st[rt]=ut;d&&(st=[239,187,191].concat(st)),gt=new Blob([new Uint8Array(st)],{type:Pt}),yt=window.URL.createObjectURL(gt),b.href=yt,b.download=c,document.body.appendChild(b),b.click(),document.body.removeChild(b),setTimeout(function(){window.URL.revokeObjectURL(yt)},100)}else this.linkDownloadSupport()?(wt=document.createElement("a"),wt.download=c,wt.href=a,document.body.appendChild(wt),wt.click(),document.body.removeChild(wt)):this.legacyIE()?(Ct=a.match(/^data:(.*);[ ]*([^,]*),(.*)$/),Ct.length===4&&(Ct[2]=="base64"?Ct[1].match(/^image\//)&&this.showModal('<img src="'+a+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(Pt=void 0,c.match(/\.svg$/)?Pt="image/svg+xml":(Pt="text/plain",c+=".txt"),At=document.createElement("iframe"),At.width="1px",At.height="1px",At.style.display="none",document.body.appendChild(At),Tt=At.contentDocument,Tt.open(Pt,"replace"),Tt.write(decodeURIComponent(Ct[3])),Tt.close(),Tt.execCommand("SaveAs",!0,c),document.body.removeChild(At)))):window.location.href=a;return[2,!0]})})},o.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},o.prototype.linkDownloadSupport=function(){var a=registry.getCache("linkDownloadSupport");if(a===!1||a===!0)return a;var c=document.createElement("a"),d=typeof c.download<"u";return registry.setCache("linkDownloadSupport",d),d},o.prototype.blobDownloadSupport=function(){return hasValue(window.Blob)},o.prototype.msBlobDownloadSupport=function(){return hasValue(window.navigator.msSaveOrOpenBlob)},o.prototype.legacyIE=function(){var a=document.createElement("div");return a.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",a.getElementsByTagName("i").length==1},o.prototype.print=function(a,c,d){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(g){return c.printMethod=="css"?[2,this.printViaCSS(a,c,d)]:[2,this.printViaIframe(a,c,d)]})})},o.prototype.printViaCSS=function(a,c,d){return __awaiter(this,void 0,void 0,function(){var g,b,j,$,_e;return __generator(this,function(st){return g=document.documentElement.scrollTop||document.body.scrollTop,b=new StyleRule(getShadowRoot(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),d&&document&&document.title&&(j=document.title,document.title=d),$=new Image,$.src=a,$.style.maxWidth="100%",$.style.display="block",$.style.position="relative",$.style.visibility="visible",$.style.opacity="1",$.style.clipPath="none",document.body.appendChild($),this.setTimeout(function(){window.print()},50),_e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,_e&&c.delay<1e3?c.delay=1e3:c.delay<100&&(c.delay=100),this.setTimeout(function(){document.body.removeChild($),b.dispose(),j&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=g},c.delay||500),[2,!0]})})},o.prototype.printViaIframe=function(a,c,d){return __awaiter(this,void 0,void 0,function(){var g,b,j;return __generator(this,function($){return g=document.createElement("iframe"),g.style.visibility="hidden",document.body.appendChild(g),g.contentWindow.document.open(),g.contentWindow.document.close(),b=new Image,b.src=a,b.style.maxWidth="100%",b.style.height="auto",d&&(g.contentWindow.document.title=d),g.contentWindow.document.body.appendChild(b),g.load=function(){g.contentWindow.document.body.appendChild(b)},this.setTimeout(function(){try{g.contentWindow.document.execCommand("print",!1,null)||g.contentWindow.print()}catch{g.contentWindow.print()}},c.delay||50),j=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,j&&c.delay<1e3?c.delay=1e3:c.delay<100&&(c.delay=100),this.setTimeout(function(){document.body.removeChild(g)},c.delay+50||100),[2,!0]})})},o.prototype.findBackgroundColor=function(a){var c=1,d=getComputedStyle$1(a,"background-color");if((d.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||d=="transparent")&&(c=0),c==0){var g=a.parentElement;return g?this.findBackgroundColor(g):color("#fff")}else return color(d,c)},Object.defineProperty(o.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(a){this._container=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(a){this._sprite=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(a){this._extraSprites=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(a){this._validateSprites=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(a){this._data=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(a){this._dataFields=a,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),o.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var a=this.data.length>0;this._prevHasData!=a&&(this._prevHasData=a,this.menu&&this.menu.invalidate())},Object.defineProperty(o.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new DateFormatter,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(a){this._dateFormatter=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(a){this._dateFormat=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new List),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(a){this._dateFields=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new NumberFormatter,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(a){this._numberFormatter=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(a){this._numberFormat=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new List),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(a){this._numberFields=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new DurationFormatter,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(a){this._durationFormatter=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(a){this._durationFormat=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new List),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(a){this._durationFields=a},enumerable:!0,configurable:!0}),o.prototype.generateDataFields=function(){var a=this;this._dataFields={},this.data.length&&each$2(this.data,function(c){each$1(c,function(d,g){hasValue(a._dataFields[d])||(a._dataFields[d]=a.adapter.apply("dataFieldName",{name:d,field:d}).name)})})},o.prototype.isDateField=function(a){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(a),field:a}).isDateField},o.prototype.isNumberField=function(a){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(a),field:a}).isNumberField},o.prototype.isDurationField=function(a){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(a),field:a}).isDurationField},o.prototype.getContentType=function(a){var c="";switch(a){case"png":case"gif":c="image/"+a;break;case"jpg":c="image/jpeg";break;case"svg":c="image/svg+xml";break;case"csv":c="text/csv";break;case"json":c="application/json";break;case"html":c="text/html";break;case"pdf":case"pdfdata":c="application/pdf";break;case"xlsx":c="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break}return this.adapter.apply("contentType",{contentType:c,type:a}).contentType},Object.defineProperty(o.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(a){this._filePrefix=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(a){this._backgroundColor=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(a){this._title=a},enumerable:!0,configurable:!0}),o.prototype.showPreloader=function(){var a=this.preloader;a&&(a.progress=.5,a.label.text="...")},o.prototype.hidePreloader=function(){var a=this.preloader;a&&(a.progress=1)},Object.defineProperty(o.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),o.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},o.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(o.prototype,"language",{get:function(){return this._language||(this._language=new Language),this._language},set:function(a){this._language=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"modal",{get:function(){return this._modal||(this._modal=new Modal,this._modal.adapter.add("classPrefix",function(a){return a=options.classNamePrefix+a,a})),this._modal},enumerable:!0,configurable:!0}),o.prototype.showModal=function(a,c){this.hideModal(),this.hidePreloader();var d=this.modal;d.container=this.sprite.svgContainer.SVGContainer,d.content=a,d.readerTitle=c,d.open()},o.prototype.hideModal=function(){this._modal&&this.modal.close()},o.prototype._canvg=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(c){switch(c.label){case 0:return[4,__vitePreload(()=>import("./index-QEzWnjbC.js"),__vite__mapDeps([]))];case 1:return a=c.sent(),a.default!=null?[2,a.default]:[2,a]}})})},Object.defineProperty(o.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pdfmake",{get:function(){return pdfmakePromise==null&&(pdfmakePromise=_pdfmake()),pdfmakePromise},enumerable:!0,configurable:!0}),o.prototype._xlsx=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,__vitePreload(()=>import("./xlsx-vJBe0Lau.js"),__vite__mapDeps([]))];case 1:return[2,a.sent()]}})})},Object.defineProperty(o.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),o.prototype.setFormatOptions=function(a,c){this._formatOptions.setKey(a,c)},o.prototype.getFormatOptions=function(a){return this._formatOptions.getKey(a)},Object.defineProperty(o.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),o.prototype._disablePointers=function(){hasValue(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},o.prototype._releasePointers=function(){hasValue(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},o.prototype.hideNonExportableSprites=function(){var a=this;if(!this._objectsAlreadyHidden){var c=this.sprite.svgContainer;c&&each$2(c.nonExportableSprites,function(d){!d.isHidden&&!d.isHiding&&d.visible&&a._hiddenObjects.push(d),d.hide(0)}),this._objectsAlreadyHidden=!0}},o.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(each$2(this._hiddenObjects,function(a){a.show(0)}),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},o.prototype.awaitValidSprites=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(c){switch(c.label){case 0:return a=[],this.validateSprites.length&&each$2(this.validateSprites,function(d,g){d.invalid&&a.push(new Promise(function(b,j){d.events.once("validated",function($){b()})}))}),a.length?[4,Promise.all(a)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},o.prototype.processConfig=function(a){registry.registeredClasses.ExportMenu=ExportMenu,a&&(hasValue(a.menu)&&!hasValue(a.menu.type)&&(a.menu.type="ExportMenu"),hasValue(a.dataFields)&&isObject$1(a.dataFields)&&(this.dataFields=a.dataFields,delete a.dataFields)),e.prototype.processConfig.call(this,a)},o.XLINK="http://www.w3.org/1999/xlink",o}(Validatable),visualProperties=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],Sprite=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.properties={},a._eventDispatcher=new SpriteEventDispatcher(a),a._bindings={},a._isTemplate=!1,a._isPath=!1,a._inited=!1,a._ready=!1,a.isHiding=!1,a._isHidden=!1,a.isShowing=!1,a.isStandaloneInstance=!1,a._isActive=!1,a._mask=new MutableValueDisposer,a._positionPrecision=3,a._language=new MutableValueDisposer,a._exporting=new MutableValueDisposer,a._exportable=!0,a._bbox={x:0,y:0,width:0,height:0},a.invalid=!1,a.positionInvalid=!1,a.propertyFields={},a.applyOnClones=!1,a._measuredWidthSelf=0,a._measuredHeightSelf=0,a.maxLeft=0,a.maxRight=0,a.maxTop=0,a.maxBottom=0,a.maxLeftSelf=0,a.maxRightSelf=0,a.maxTopSelf=0,a.maxBottomSelf=0,a._isDragged=!1,a._isResized=!1,a._disabled=!1,a._internalDisabled=!1,a._updateDisabled=!1,a._internalDefaultsApplied=!1,a.rollOutDelay=0,a.isBaseSprite=!1,a.shouldClone=!0,a.appeared=!1,a.ex=0,a.ey=0,a.dragWhileResize=!1,a.measureFailed=!1,a.preventShow=!1,a.cloneTooltip=!0,a.className="Sprite",a._disposers.push(a._eventDispatcher),a.uid,a.group=a.paper.addGroup("g"),a.setPropertyValue("scale",1),a.setPropertyValue("rotation",0),a.setPropertyValue("align","none"),a.setPropertyValue("valign","none"),a.setPropertyValue("pixelPerfect",!1),a.setPropertyValue("visible",!0),a.setPropertyValue("tooltipPosition","fixed"),a.setPropertyValue("verticalCenter","none"),a.setPropertyValue("horizontalCenter","none"),a.setPropertyValue("tooltipX",percent(50)),a.setPropertyValue("tooltipX",percent(50)),a.setPropertyValue("marginTop",0),a.setPropertyValue("marginBottom",0),a.setPropertyValue("marginLeft",0),a.setPropertyValue("marginRight",0),a.setPropertyValue("dx",0),a.setPropertyValue("dy",0),a.setPropertyValue("paddingTop",0),a.setPropertyValue("paddingBottom",0),a.setPropertyValue("paddingRight",0),a.setPropertyValue("paddingLeft",0),a.setPropertyValue("togglable",!1),a.setPropertyValue("hidden",!1),a.setPropertyValue("urlTarget","_self"),a.setPropertyValue("alwaysShowTooltip",!1),a.setPropertyValue("showTooltipOn","hover"),a._prevMeasuredWidth=0,a._prevMeasuredHeight=0,a._measuredWidth=0,a._measuredHeight=0,a._isMeasured=!0,a.invalidate(),a.applyTheme(),a._disposers.push(a.events),a._disposers.push(a.group),a._disposers.push(a._mask),a._disposers.push(a._language),a._disposers.push(a._exporting),a._disposers.push(new Disposer(function(){each$1(a._bindings,function(c,d){d.dispose()})})),a.setPropertyValue("interactionsEnabled",!0),a}return Object.defineProperty(o.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Adapter(this)),this._adapterO},enumerable:!0,configurable:!0}),o.prototype.applyTheme=function(){e.prototype.applyTheme.call(this),options.autoSetClassName&&this.setClassName()},o.prototype.getCurrentThemes=function(){var a=this._themes;if(a)return a;var c=this._parent;return c?c.getCurrentThemes():registry.themes},o.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},o.prototype.invalidate=function(){this.disabled||this._isTemplate||this.__disabled||this.invalid||(this.invalid=!0,registry.addToInvalidSprites(this),system.requestFrame())},o.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,registry.removeFromInvalidSprites(this),this.afterDraw()},o.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,registry.addToInvalidPositions(this),system.requestFrame())},o.prototype.validatePosition=function(){var a=this.pixelX,c=this.pixelY,d=this.dx,g=this.dy,b=a+d,j=c+g;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var $=this.measure(),_e=this.group.transformString;this.group.moveTo({x:b,y:j}),this.group.rotation=this.rotation,this.nonScaling?this.group.scale=this.scale/this.globalScale:this.group.scale=this.scale,(_e!=this.group.transformString||$)&&(_e==null?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),(this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.updateTooltipPosition()),a+d==b&&c+g==j&&(registry.removeFromInvalidPositions(this),this.positionInvalid=!1);var st=this._maskRectangle;st&&this._clipElement.moveTo({x:st.x-a,y:st.y-c})},o.prototype.beforeDraw=function(){},o.prototype.draw=function(){},o.prototype.afterDraw=function(){var a,c;if((this.isMeasured||this.horizontalCenter!=="none"||this.verticalCenter!=="none")&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var d=__values(this._adapterO.keys()),g=d.next();!g.done;g=d.next()){var b=g.value;switch(b){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[b]=this[b];break}}}catch(j){a={error:j}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}this.showTooltipOn=="always"&&(this.visible&&!this.disabled&&!this.__disabled?this.showTooltip():this.hideTooltip(0))},o.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},o.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},o.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},o.prototype.updateFilterScale=function(){var a=this;each(this.filters.iterator(),function(c){c.scale=a.globalScale})},o.prototype.removeFromInvalids=function(){registry.removeFromInvalidSprites(this),registry.removeFromInvalidPositions(this)},o.prototype.copyFrom=function(a){var c=this;e.prototype.copyFrom.call(this,a),this.isMeasured=a.isMeasured,this.states.copyFrom(a.states),a.filters.length>0&&a.filters.each(function(d){c.filters.push(d.clone())}),a._adapterO&&this.adapter.copyFrom(a._adapterO),a._interaction&&this.interactions.copyFrom(a.interactions),a._plugins&&this.plugins.copyFrom(a.plugins),this.configField=a.configField,this.applyOnClones=a.applyOnClones,this.disabled=a.disabled,this.virtualParent=a.virtualParent,this.exportable=a.exportable,a._tooltip&&(this._tooltip?this._tooltip.copyFrom(a.tooltip):a.cloneTooltip?this.tooltip=a.tooltip.clone():this._tooltip=a.tooltip),this._showSystemTooltip=a.showSystemTooltip,copyProperties(a.propertyFields,this.propertyFields),copyProperties(a.properties,this),a.fillModifier&&(this.fillModifier=a.fillModifier.clone()),a.strokeModifier&&(this.strokeModifier=a.strokeModifier.clone()),a.focusFilter&&(this.focusFilter=a.focusFilter.clone())},o.prototype.dispose=function(){if(!this.isDisposed()){if(this.showTooltipOn=="always"&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(e.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var a=this._clones.length-1;a>=0;a--){var c=this._clones.getIndex(a);c.dispose()}this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var d=this.stroke;d&&!(d instanceof Color)&&d.dispose&&(this.clonedFrom&&this.clonedFrom.stroke==d||d.dispose());var g=this.fill;if(g&&!(g instanceof Color)&&g.dispose&&(this.clonedFrom&&this.clonedFrom.fill==g||g.dispose()),hasValue(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var b=this._filters.getIndex(0);b.dispose(),this._filters.removeValue(b)}this._alwaysShowDisposers=void 0}},Object.defineProperty(o.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(a){a=toBoolean(a),this._isTemplate!=a&&(this._isTemplate=a,this instanceof Container&&each(this.children.iterator(),function(c){c.isTemplate=a}),a?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showSystemTooltip",{get:function(){return hasValue(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:this._parent?this._parent.showSystemTooltip:!1},set:function(a){a=toBoolean(a),this._showSystemTooltip!=a&&(this._showSystemTooltip=a,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topParent",{get:function(){if(this._topParent)return this._topParent;if(this._parent)return this._parent.topParent},set:function(a){this._topParent=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return this._parent},set:function(a){if(!this._isTemplate){this.paper;var c=this._parent;c!=a&&(c&&c.children.removeValue(this),this._parent=a,a?(this.topParent=a.topParent,a.isTemplate&&(this.isTemplate=!0),this.baseId=a.baseId,a.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=a.tooltipContainer),this._dataItem||(this.dataItem=a.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),o.prototype.handleAlwaysShow=function(){this.showTooltip()},o.prototype.handleAlwaysShowTooltip=function(){var a=this,c=this._alwaysShowDisposers;if(c&&each$2(c,function(g){g.dispose()}),this._alwaysShowDisposers=[],this.showTooltipOn=="always")for(;a!=null;){var d=a.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(d),this._alwaysShowDisposers.push(d),a=a.parent}},Object.defineProperty(o.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(a){this._virtualParent=a,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),o.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var a=this.fill;a&&a.element&&this.paper.appendDef(a.element);var c=this.stroke;if(c&&c.element&&this.paper.appendDef(c.element),this.fillModifier&&this.fill instanceof Color){var d=this.fillModifier.modify(this.fill);d&&d.element&&this.paper.appendDef(d.element)}if(this.strokeModifier&&this.stroke instanceof Color){var g=this.strokeModifier.modify(this.stroke);g&&g.element&&this.paper.appendDef(g.element)}this._clipPath&&this.paper.appendDef(this._clipPath),this._exportable===!1&&(this.exportable=!1)},Object.defineProperty(o.prototype,"map",{get:function(){var a=this.topParent;return a?a.map:(this._map||(this._map=new Dictionary),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"delayedMap",{get:function(){var a=this.topParent;return a?a.delayedMap:(this._delayedMap||(this._delayedMap=new Dictionary),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(a){if(this._id!=a){if(this._id=a,this.map.hasKey(a))throw Error("Duplicate id ("+a+") used on multiple objects.");this.map.setKey(a,this),options.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paper",{get:function(){if(this._paper)return this._paper;var a=this._parent;return a?a.paper:getGhostPaper()},set:function(a){this.setPaper(a)},enumerable:!0,configurable:!0}),o.prototype.setPaper=function(a){var c=this._paper;return c!=a?(this._paper=a,this.appendDefs(),!0):!1},Object.defineProperty(o.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var a=this._parent;if(a)return a.htmlContainer},set:function(a){this._htmlContainer=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filters",{get:function(){return this._filters||(this._filters=new List,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new ListDisposer(this._filters))),this._filters},enumerable:!0,configurable:!0}),o.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},o.prototype.setSVGAttribute=function(a){this.group.attr(a)},o.prototype.removeSVGAttribute=function(a){this.group.removeAttr(a)},o.prototype.setClassName=function(){var a=this.className,c=options.classNamePrefix;this.element&&this.element.addClass(c+a),this.group.addClass(c+a+"-group"),hasValue(this.id)&&this.group.addClass(c+this.id),this.userClassName&&this.group.addClass(this.userClassName)},o.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},o.prototype.updateClipPath=function(){var a=this._clipElement;a&&a.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},o.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var a=registry.getUniqueId();this._clipPath.attr({id:a}),this.group.attr({"clip-path":'url("'+getBaseURI()+a+'")'})}},o.prototype.applyMask=function(){var a=this.mask;if(this._clipPath&&a)if(a instanceof Container){this._clipElement.attr({width:max$1(0,a.pixelWidth),height:max$1(0,a.pixelHeight)});var c=spritePointToSprite({x:a.pixelX,y:a.pixelY},a.parent,this);this._clipPath.x=c.x,this._clipPath.y=c.y}else a.element&&a.element!=this._clipElement&&(this._clipElement=a.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=a.scale,this._clipPath.x=a.pixelX,this._clipPath.y=a.pixelY,this._clipPath.rotation=a.rotation},o.prototype.applyFilters=function(){var a=this;if(this._filters&&this._filters.length>0){var c=100,d=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var g="filter-"+this.uid;this.filterElement.attr({id:g}),each(this.filters.iterator(),function($){$.sprite=a,$.paper=a.paper,a.filterElement.attr({filterUnits:$.filterUnits}),$.appendPrimitives(a.filterElement),$.width>c&&(c=$.width),$.height>d&&(d=$.height),$.scale=a.globalScale});var b=c+"%",j=d+"%";this.filterElement.attr({width:b,height:j,x:-(c-100)/2+"%",y:-(d-100)/2+"%"}),this.group.attr({filter:'url("'+getBaseURI()+g+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},o.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},o.prototype.setElement=function(a){this.element=a,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(a){this.removeElement(),this._element=a,this.group.add(a),a.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),options.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"svgContainer",{get:function(){if(this._svgContainer)return this._svgContainer;if(this._parent)return this._parent.svgContainer},set:function(a){this._svgContainer=a},enumerable:!0,configurable:!0}),o.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var a=this.element.getBBox();this._bbox={x:a.x,y:a.y,width:a.width,height:a.height}}},o.prototype.updateCenter=function(){if(this.element){var a=this.element.transformString,c=this.bbox,d=0,g=0,b=c.x,j=c.y,$=c.width,_e=c.height,st=this.pixelPaddingLeft,rt=this.pixelPaddingRight,ut=this.pixelPaddingTop,gt=this.pixelPaddingBottom,yt=max$1($+st+rt,this.pixelWidth),wt=max$1(_e+ut+gt,this.pixelHeight),Ct=c.x,Pt=c.x+yt,At=c.y,Tt=c.y+wt,kt=this.horizontalCenter,It=this.verticalCenter;switch(kt){case"none":d=b+st;break;case"left":d=st;break;case"middle":d=st-($+rt+st)/2;break;case"right":d=-rt-$;break}switch(It){case"none":g=j+ut;break;case"top":g=ut;break;case"middle":g=ut-(_e+gt+ut)/2;break;case"bottom":g=-gt-_e;break}this._measuredHeight=wt,this._measuredWidth=yt;var Lt=round$1(d-b,this._positionPrecision,!0),Ft=round$1(g-j,this._positionPrecision,!0);this.ex=Lt-st,this.ey=Ft-ut,this.maxLeft=Ct+Lt-st,this.maxRight=Pt+Lt-st,this.maxTop=At+Ft-ut,this.maxBottom=Tt+Ft-ut,this.pixelPerfect&&options.pixelPerfectPrecision==0&&(Lt-=.5,Ft-=.5),this.element.moveTo({x:Lt,y:Ft}),a!=this.element.transformString&&this.dispatchImmediately("transformed")}},o.prototype.measure=function(){this.updateCenter();var a=this._measuredWidth,c=this._measuredHeight,d=this.maxLeft,g=this.maxRight,b=this.maxTop,j=this.maxBottom;this._measuredWidthSelf=a,this._measuredHeightSelf=c;var $=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,this.rotation!==0||this.scale!==1||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var _e=this.paper.svg,st=_e.createSVGMatrix(),rt=this.rotation,ut=this.scale;this.nonScaling&&(ut=this.scale/this.globalScale),st.a=cos(rt)*ut,st.c=-sin(rt)*ut,st.e=0,st.b=sin(rt)*ut,st.d=cos(rt)*ut,st.f=0;var gt=_e.createSVGPoint();gt.x=d,gt.y=b;var yt=_e.createSVGPoint();yt.x=g,yt.y=b;var wt=_e.createSVGPoint();wt.x=g,wt.y=j;var Ct=_e.createSVGPoint();Ct.x=d,Ct.y=j;var Pt=gt.matrixTransform(st),At=yt.matrixTransform(st),Tt=wt.matrixTransform(st),kt=Ct.matrixTransform(st);d=Math.min(Pt.x,At.x,Tt.x,kt.x),g=Math.max(Pt.x,At.x,Tt.x,kt.x),b=Math.min(Pt.y,At.y,Tt.y,kt.y),j=Math.max(Pt.y,At.y,Tt.y,kt.y),a=g-d,c=j-b,this.maxLeft=round$1(d,$,!0),this.maxRight=round$1(g,$,!0),this.maxTop=round$1(b,$,!0),this.maxBottom=round$1(j,$,!0)}return this._measuredWidth=round$1(a,$,!0),this._measuredHeight=round$1(c,$,!0),this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight?(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.tooltip&&this.tooltip.visible&&(hasValue(this.tooltipText)||hasValue(this.tooltipHTML))&&this.updateTooltipPosition(),!0):!1},o.prototype.insertBefore=function(a){var c=this._parent;if(c){var d=c.children.indexOf(a);d!==-1&&(c.children.moveValue(this,d),c.sortChildren())}return this},o.prototype.insertAfter=function(a){var c=this._parent;if(c){var d=c.children.indexOf(a);d!==-1&&(c.children.moveValue(this,d+1),c.sortChildren())}return this},o.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},o.prototype.getRelativeX=function(a){return a instanceof Percent?a.value:this._parent?a/this._parent.innerWidth:0},o.prototype.getRelativeY=function(a){return a instanceof Percent?a.value:this._parent?a/this._parent.innerHeight:0},o.prototype.getPixelX=function(a){var c=0;if(isNumber$1(a))c=a;else if(a instanceof Percent){var d=a.value;this._parent&&(c=round$1(this._parent.innerWidth*d,this._positionPrecision,!0))}return c},o.prototype.getPixelY=function(a){var c=0;if(isNumber$1(a))c=a;else if(a instanceof Percent){var d=a.value;this._parent&&(c=round$1(this._parent.innerHeight*d,this._positionPrecision,!0))}return c},o.prototype.moveTo=function(a,c,d,g){this.isDragged&&!g||(a&&(isNumber$1(a.x)&&this.setPropertyValue("x",round$1(a.x,this._positionPrecision,!0)),isNumber$1(a.y)&&this.setPropertyValue("y",round$1(a.y,this._positionPrecision,!0))),isNumber$1(c)&&(this.rotation=c),isNumber$1(d)&&(this.scale=d),this.invalidatePosition())},Object.defineProperty(o.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(a){var c=this;this._mask.get()!==a&&(a?(this.createClipPath(),a instanceof Container?this._clipElement=this.paper.add("rect"):(a.isMeasured=!1,a.element&&(this._clipElement=a.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(a,new MultiDisposer([a.events.on("maxsizechanged",function(){c.inited&&c.applyMask()},void 0,!1),a.events.on("validated",this.applyMask,this,!1),a.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(a){a?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:a.width,height:a.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(a){a=toBoolean(a),a||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=a&&(this._isMeasured=a,this.invalidatePosition())},enumerable:!0,configurable:!0}),o.prototype.hitTest=function(a){this.invalid&&this.validate(),a.invalid&&a.validate();var c=this.pixelX+this.maxLeft,d=this.pixelY+this.maxTop,g=c+this.maxRight,b=d+this.maxBottom,j=a.pixelX+a.maxLeft,$=a.pixelY+a.maxTop,_e=j+a.maxRight,st=$+a.maxBottom;return!(j>g||_e<c||$>b||st<d)},Object.defineProperty(o.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),o.prototype.isReady=function(){return this._ready},Object.defineProperty(o.prototype,"states",{get:function(){if(!this._states){var a=new SpriteState;this._states=new DictionaryTemplate(a),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new DictionaryDisposer(this._states)),this._disposers.push(a)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var a=this.states.create("hidden");a.properties.opacity=0,a.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultState",{get:function(){if(!this.states.getKey("default")){var a=this.states.create("default");a.properties.opacity=1}return this.states.getKey("default")},enumerable:!0,configurable:!0}),o.prototype.processState=function(a){var c=a.newValue;if(c.sprite=this,c.name=a.key,(this.states.hasKey("hover")||this.showTooltipOn=="hover"&&(hasValue(this.tooltipHTML)||hasValue(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||this.showTooltipOn=="hover"&&(hasValue(this.tooltipHTML)||hasValue(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var d=this.clones.values,g=d.length,b=0;b<g;++b){var j=d[b];j.isDisposed()||j.states.setKey(c.name,c)}},Object.defineProperty(o.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),o.prototype.getSvgPoint=function(a){try{var c=this.htmlContainer.getBoundingClientRect();return{x:a.x-c.left,y:a.y-c.top}}catch{return a}},o.prototype.animate=function(a,c,d){return new Animation(this,a,c,d).start()},o.prototype.setState=function(a,c,d){var g;if(a instanceof SpriteState)this.states.setKey(a.name,a),g=a;else if(g=this.states.getKey(a),!g)return;if(g.name=="hover"){if(this.isHidden)return;this.isHover=!0}return g.name=="hidden"?this.isHiding=!0:this.visible||this.setVisibility(g.properties.visible||this.defaultState.properties.visible),g.name=="active"&&(this.isActive=!0),isNumber$1(c)||(c=g.transitionDuration),hasValue(d)||(d=g.transitionEasing),this.transitTo(g,c,d)},o.prototype.applyCurrentState=function(a){var c=this.setState(this.defaultState,a);return this.isHover&&(c=this.setState("hover",a)),this.isDown&&this.interactions.downPointers.length&&(c=this.setState("down",a)),this.isFocused=this.isFocused,this.isActive&&(c=this.setState("active",a),this.isHover&&this.states.hasKey("hoverActive")&&(c=this.setState("hoverActive",a))),c},o.prototype.transitTo=function(a,c,d){var g=this,b=[],j=a.allValues,$;if(each$1(j,function(st,rt){var ut=g[st];if(rt!=ut&&g.defaultState.properties[st]==null&&(g.defaultState.properties[st]=ut),rt!="__unset"){var gt={from:ut,to:rt,property:st};b.push(gt)}}),b.length>0&&($=this.animate(b,c,d),$&&!$.isFinished()?this._disposers.push($.events.on("animationended",function(){g.dispatchImmediately("transitionended")})):this.dispatchImmediately("transitionended")),a.filters.length>0){var _e=[];each(a.filters.iterator(),function(st){var rt=st.clone();_e.push(rt);var ut=[];each(g.filters.iterator(),function(gt){gt.className==rt.className&&(contains$1(g.defaultState.filters.iterator(),function(yt){return yt.className===rt.className})||g.defaultState.filters.push(gt),each$1(rt.properties,function(yt,wt){var Ct=gt.properties[yt];Ct!=wt&&ut.push({property:yt,from:Ct,to:wt})}))}),rt.animate(ut,c,d)}),this.filters.clear(),this.filters.pushAll(_e)}return $},o.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(o.prototype,"isHover",{get:function(){return this.isInteractive()?this.interactions.isHover:!1},set:function(a){a=toBoolean(a),a!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=a,a?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDown",{get:function(){return this.isInteractive()?this.interactions.isDown:!1},set:function(a){a=toBoolean(a),this.isInteractive()&&this.isDown!=a&&(this.interactions.isDown=a,a?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isFocused",{get:function(){return this.isInteractive()?this.interactions.isFocused:!1},set:function(a){a=toBoolean(a),this.focusable&&this.isFocused!=a&&this.isInteractive()&&(this.interactions.isFocused=a,a===!0?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isActive",{get:function(){return this._isActive},set:function(a){this.setActive(a)},enumerable:!0,configurable:!0}),o.prototype.setActive=function(a){a=toBoolean(a),this._isActive!==a&&(this._isActive=a,a&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(o.prototype,"disabled",{get:function(){var a=this.getPropertyValue("disabled");return hasValue(a)?a:this.virtualParent?this.virtualParent.disabled:this._parent?this._parent.disabled:!1},set:function(a){this.setDisabled(a)},enumerable:!0,configurable:!0}),o.prototype.setDisabled=function(a){a=toBoolean(a);var c=this.getPropertyValue("disabled");if(c!=a){if(this.setPropertyValue("disabled",a,!0),a)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var d=this._parent.element;d.hasChild(this.group)||d.add(this.group)}this instanceof Container?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),system.requestFrame(),!0}return!1},Object.defineProperty(o.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(a){this._internalDisabled!=a&&(this._internalDisabled=a,this._updateDisabled=!0,this.invalidatePosition(),a||this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new NumberFormatter,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(a){this._numberFormatter=a,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new DateFormatter,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(a){this._dateFormatter=a,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new DurationFormatter,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(a){this._durationFormatter=a,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"language",{get:function(){var a=this._language.get();return a||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(a=new Language,this.language=a,a))},set:function(a){var c=this;this._language.get()!==a&&this._language.set(a,a.events.on("localechanged",function(d){if(c._numberFormatter&&(c._numberFormatter.language=c.language),c._dateFormatter&&(c._dateFormatter.language=c.language),c._durationFormatter&&(c._durationFormatter.language=c.language),c._exporting.get()){var g=c._exporting.get();g.numberFormatter.language=c.language,g.dateFormatter.language=c.language,g.durationFormatter.language=c.language,g.language=c.language}c instanceof Container&&c.deepInvalidate()}))},enumerable:!0,configurable:!0}),o.prototype.populateString=function(a,c){if(hasValue(a)){a=castString(a),a=getTextFormatter().escape(a);var d=a.match(/\{([^}]+)\}/g),g=void 0;if(d)for(g=0;g<d.length;g++){var b=d[g].replace(/\{([^}]+)\}/,"$1"),j=this.getTagValue(b,"",c);hasValue(j)||(j=""),a=a.split(d[g]).join(j)}a=getTextFormatter().unescape(a)}else a="";return this._adapterO?this._adapterO.apply("populateString",a):a},o.prototype.getTagValue=function(a,c,d){var g;hasValue(d)||(d=this.dataItem);for(var b=[],j=/([^.]+)\(([^)]*)\)|([^.]+)/g,$;$=j.exec(a),$!==null;)if($[3])b.push({prop:$[3]});else{var _e=[];if(trim$1($[2])!="")for(var st=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,rt=void 0;rt=st.exec($[2]),rt!==null;)_e.push(rt[1]||rt[2]||rt[3]);b.push({method:$[1],params:_e})}if(d){g=this.getTagValueFromObject(b,d.values),(!hasValue(g)||isObject$1(g))&&(g=this.getTagValueFromObject(b,d));var ut=d.dataContext;!hasValue(g)&&ut&&(g=this.getTagValueFromObject(b,d.dataContext),hasValue(g)||(g=this.getTagValueFromObject([{prop:a}],ut)),!hasValue(g)&&ut.dataContext&&(g=this.getTagValueFromObject(b,ut.dataContext))),!hasValue(g)&&d.component&&d.component.dataItem!==d&&(g=d.component.getTagValue(a,c))}return hasValue(g)||(g=this.getTagValueFromObject(b,this.populateStringFrom||this)),!hasValue(g)&&this._parent&&(g=this._parent.getTagValue(a,c)),g},o.prototype.getTagValueFromObject=function(a,c,d){for(var g=c,b=!1,j=0,$=a.length;j<$;j++){var _e=a[j];if(_e.prop){if(g=g[_e.prop],!hasValue(g))return}else switch(_e.method){case"formatNumber":var st=anyToNumber(g);hasValue(st)&&(g=this.numberFormatter.format(st,d||_e.params[0]||void 0),b=!0);break;case"formatDate":var rt=void 0;if(isString$1(g)?rt=this.dateFormatter.parse(g):rt=anyToDate(g),!isDate$1(rt)||isNaN$1(rt.getTime()))return;hasValue(rt)&&(g=this.dateFormatter.format(rt,d||_e.params[0]||void 0),b=!0);break;case"formatDuration":var ut=anyToNumber(g);hasValue(ut)&&(g=this.durationFormatter.format(ut,d||_e.params[0]||void 0,_e.params[1]||void 0),b=!0);break;case"urlEncode":case"encodeURIComponent":g=encodeURIComponent(g);break;default:g[_e.method]&&g[_e.method].apply(this,_e.params);break}}if(!b){var gt=[{method:"",params:d}];if(!hasValue(d))isNumber$1(g)?(gt[0].method="formatNumber",gt[0].params=""):isDate$1(g)&&(gt[0].method="formatDate",gt[0].params="");else{var yt=getFormat(d);yt===NUMBER?gt[0].method="formatNumber":yt===DATE?gt[0].method="formatDate":yt===DURATION&&(gt[0].method="formatDuration")}gt[0].method&&(g=this.getTagValueFromObject(gt,g))}return g},Object.defineProperty(o.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(a){this.setDataItem(a)},enumerable:!0,configurable:!0}),o.prototype.setDataItem=function(a){var c=this;if(this._dataItem!=a){if(this._dataItem=a,a){if(this.configField){var d=a.dataContext;d&&(this.config=d[this.configField],!this.config&&d.dataContext&&(this.config=d.dataContext[this.configField]))}var g=a.dataContext;if(g){var b=g.dataContext;each$1(this.propertyFields,function(j,$){if(hasValue(g[$])){var _e=c;_e[j]=g[$]}else if(b){var st=b[$];if(hasValue(st)){var _e=c;_e[j]=st}}})}}this.invalidate()}},o.prototype.getPropertyValue=function(a){var c=this.properties[a];return this._isTemplate||(this._adapterO&&(c=this._adapterO.apply(a,c)),c=globalAdapter.applyAll(this,a,c)),c},o.prototype.setColorProperty=function(a,c,d){var g=this.properties[a];return c instanceof Color&&g instanceof Color&&c.toString()==g.toString()?!1:this.setPropertyValue(a,c,d)},o.prototype.setPercentProperty=function(a,c,d,g,b,j){if(c=toNumberOrPercent(c),isNumber$1(c))return isNumber$1(b)&&(c=round$1(c,b,j)),this.setPropertyValue(a,c,d,g);var $=this.properties[a];return c instanceof Percent&&$ instanceof Percent&&c.value==$.value?!1:this.setPropertyValue(a,c,d,g)},o.prototype.setPropertyValue=function(a,c,d,g){if(this.properties[a]!==c&&!this.isDisposed()){if(this.properties[a]=c,this.events.isEnabled("propertychanged")){var b={type:"propertychanged",target:this,property:a};this.events.dispatchImmediately("propertychanged",b)}if(d&&this.invalidate(),g&&this.invalidatePosition(),this.applyOnClones)for(var j=this.clones.values,$=j.length,_e=0;_e<$;++_e){var st=j[_e];st.isDisposed()||(st[a]=c)}return!0}return!1},o.prototype.bind=function(a,c,d,g){var b=this;d===void 0&&(d=a),hasValue(this._bindings[a])&&this._bindings[a].dispose(),this[a]=c[d],this._bindings[a]=c.events.on("propertychanged",function(j){if(j.property===d){var $=c[d];g&&($=g($)),b[a]=$}})},o.prototype.observe=function(a,c,d,g){var b=this;return new MultiDisposer(map$1(toArray$2(a),function(j){return b.events.on("propertychanged",function($){$.property===j&&c.call(d,$)},d,g)}))},o.prototype.applyAccessibility=function(){var a=this.readerTitle,c=this.readerDescription,d=this.role,g=this.readerHidden,b=this.readerChecked,j=this.readerControls,$=this.readerLive,_e=this.readerOrientation,st=this.readerValueNow,rt=this.readerValueText,ut=[],gt=[],yt=this.readerLabelledBy;yt&&ut.push(yt);var wt=this.readerDescribedBy;if(wt&&gt.push(wt),a)if(ut.length||this.showSystemTooltip){var Ct=this.titleElement,Pt=this.uid+"-title";Ct.node.textContent!=a&&(Ct.node.textContent=a,Ct.attr({id:Pt})),ut.push(Pt)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":a});else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(c){var At=this.descriptionElement,Tt=this.uid+"-description";At.node.textContent!=c&&(At.node.textContent=c,At.attr({id:Tt})),gt.push(Tt)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);ut.length?this.setSVGAttribute({"aria-labelledby":ut.join(" ")}):this.removeSVGAttribute("aria-labelledby"),gt.length?this.setSVGAttribute({"aria-describedby":gt.join(" ")}):this.removeSVGAttribute("aria-describedby"),d?this.setSVGAttribute({role:d}):this.removeSVGAttribute("role"),g?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),b?this.setSVGAttribute({"aria-checked":"true"}):b===!1?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),j?this.setSVGAttribute({"aria-controls":j}):this.removeSVGAttribute("aria-controls"),$?this.setSVGAttribute({"aria-live":$}):this.removeSVGAttribute("aria-live"),_e?this.setSVGAttribute({"aria-orientation":_e}):this.removeSVGAttribute("aria-orientation"),st?this.setSVGAttribute({"aria-valuenow":st}):this.removeSVGAttribute("aria-valuenow"),rt?this.setSVGAttribute({"aria-valuetext":rt}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(o.prototype,"readerTitle",{get:function(){var a=this.getPropertyValue("readerTitle");return hasValue(a)&&this.dataItem?this.populateString(a):a},set:function(a){a=toText(a),this.setPropertyValue("readerTitle",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerDescription",{get:function(){var a=this.getPropertyValue("readerDescription");return hasValue(a)&&this.dataItem?this.populateString(a):this.getPropertyValue("readerDescription")},set:function(a){a=toText(a),this.setPropertyValue("readerDescription",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(a){a=toText(a),this.setPropertyValue("role",a)&&(this.applyAccessibility(),a=="slider"&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(a){a=toBoolean(a),this.setPropertyValue("readerHidden",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(a){a=toBoolean(a),this.setPropertyValue("readerChecked",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(a){a=toText(a),this.setPropertyValue("readerControls",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(a){a=toText(a),this.setPropertyValue("readerLive",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(a){a=toText(a),this.setPropertyValue("readerLabelledBy",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(a){a=toText(a),this.setPropertyValue("readerDescribedBy",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(a){a=toText(a),this.setPropertyValue("readerOrientation",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(a){a=toText(a),this.setPropertyValue("readerValueNow",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(a){a=toText(a),this.setPropertyValue("readerValueText",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"interactions",{get:function(){if(!this._interaction){var a=getInteraction().getInteraction(this.dom);this._interaction=a,a.clickable=this.clickable,a.hoverable=this.hoverable,a.trackable=this.trackable,a.draggable=this.draggable,a.swipeable=this.swipeable,a.resizable=this.resizable,a.wheelable=this.wheelable,a.contextMenuDisabled=this.contextMenuDisabled,a.inert=this.inert,a.sprite=this,this._disposers.push(a)}return this._interaction},enumerable:!0,configurable:!0}),o.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(o.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(a){var c=this;a=toBoolean(a),this.setPropertyValue("focusable",a)&&(!a&&!this.isInteractive()||(this.interactions.focusable=a,a?(this.setSVGAttribute({focusable:a}),hasValue(this._tabindex)||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",a,function(){return new MultiDisposer([c.events.on("blur",c.handleBlur,c,!1),c.events.on("focus",c.handleFocus,c,!1)])})))},enumerable:!0,configurable:!0}),o.prototype.handleFocus=function(a){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},o.prototype.handleBlur=function(a){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(o.prototype,"focusFilter",{get:function(){var a=this._focusFilter;if(a)return a;if(this.virtualParent)return this.virtualParent.focusFilter;if(this._parent)return this._parent.focusFilter},set:function(a){this._focusFilter=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(a){a!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tabindex",{get:function(){var a=this._tabindex;if(a!=null)return a;if(this.virtualParent)return this.virtualParent.tabindex;if(this._parent)return this._parent.tabindex},set:function(a){a=toNumber(a),this.setPropertyValue("tabindex",a)&&isNumber$1(a)&&(this.interactions.tabindex=a,this.setSVGAttribute({tabindex:a}),this._tabindex=a,this.focusable=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(a){var c=this;a=toBoolean(a),this.setPropertyValue("draggable",a)&&(!a&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.draggable=a,this.interactions.setEventDisposer("sprite-draggable",a,function(){return new MultiDisposer([c.events.on("down",c.handleDown,c,!1),c.events.on("dragstart",c.handleDragStart,c,!1),c.events.on("drag",c.handleDragMove,c,!1),c.events.on("dragstop",c.handleDragStop,c,!1)])})))},enumerable:!0,configurable:!0}),o.prototype.handleDragStart=function(a){(!this.interactions.isTouchProtected||!a.touch)&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},o.prototype.dragStart=function(a){this._isDragged=!0,getInteraction().dragStart(this.interactions,a)},o.prototype.handleDragStop=function(a){(!this.interactions.isTouchProtected||!a.touch)&&(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},o.prototype.dragStop=function(a,c){this._isDragged=!1,getInteraction().dragStop(this.interactions,a,c)},o.prototype.handleDragMove=function(a){if(!this.interactions.isTouchProtected||!a.touch){var c=this.interactions.originalPosition;if(c&&this._isDragged){var d=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:c.x+a.shift.x/d,y:c.y+a.shift.y/d},void 0,void 0,!0)}this.dispatchImmediately("dragged",a)}},Object.defineProperty(o.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(a){a=toBoolean(a),this.setPropertyValue("inert",a)&&(!a&&!this.isInteractive()||(this.interactions.inert=a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(a){var c=this;a=toBoolean(a),this.setPropertyValue("hoverable",a)&&(!a&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.hoverable=a,this.interactions.setEventDisposer("sprite-hoverable",a,function(){return new MultiDisposer([c.events.on("over",c.handleOver,c,!1),c.events.on("out",c.handleOut,c,!1)])})))},enumerable:!0,configurable:!0}),o.prototype.handleOver=function(a){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var c=void 0;a&&a.pointer&&(c=documentPointToSvg(a.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),this.showTooltipOn=="hover"&&this.showTooltip(c)}else this.showTooltipOn=="hover"&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},o.prototype.handleOut=function(a){var c=this;if(this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover){this._outTimeout=this.setTimeout(function(){c.tooltip.isHover||(c.tooltip.targetSprite==c&&c.hideTooltip(),c._outTimeout=c.setTimeout(c.handleOutReal.bind(c),c.rollOutDelay))},10);return}this.showTooltipOn=="hover"&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay)},o.prototype.handleOutReal=function(){!this.isHidden&&!this.isHiding&&this.states.hasKey("hover")&&this.applyCurrentState()},Object.defineProperty(o.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),o.prototype.handleDown=function(a){this.interactions.downPointers.length===1&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},o.prototype.handleUp=function(a){var c=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),this.showTooltipOn=="hit"&&(this.updateTooltipPosition(a.pointer?a.pointer.point:void 0),this._disposers.push(registry.events.once("exitframe",function(){c.showTooltip()})),this._disposers.push(getInteraction().body.events.once("down",function(d){c.hideTooltip()})))},Object.defineProperty(o.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(a){var c=this;a=toBoolean(a),this.setPropertyValue("clickable",a)&&(!a&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.clickable=a,this.interactions.setEventDisposer("sprite-clickable",a,function(){return new MultiDisposer([c.events.on("down",c.handleDown,c,!1),c.events.on("up",c.handleUp,c,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(a){var c=this;a=toBoolean(a),this.setPropertyValue("togglable",a)&&(!a&&!this.isInteractive()||this.interactions.setEventDisposer("sprite-togglable",a,function(){return c.events.on("hit",c.handleToggle,c,!1)}))},enumerable:!0,configurable:!0}),o.prototype.handleToggle=function(a){this.isActive=!this.isActive},Object.defineProperty(o.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(a){a=toBoolean(a),this.setPropertyValue("contextMenuDisabled",a)&&(this.interactions.contextMenuDisabled=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(a){this.setPropertyValue("url",a)&&(this._urlDisposer&&this._urlDisposer.dispose(),isNotEmpty(a)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=MouseCursorStyle.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(a){this.setBaseId(a)},enumerable:!0,configurable:!0}),o.prototype.setBaseId=function(a){a!=this._baseId&&(this.invalid&&(this.invalid=!1,registry.removeFromInvalidSprites(this),this.invalidate()),this._baseId=a)},Object.defineProperty(o.prototype,"baseSprite",{get:function(){if(this.isBaseSprite)return this;if(this._parent)return this._parent.baseSprite},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(a){this.setPropertyValue("urlTarget",a)},enumerable:!0,configurable:!0}),o.prototype.urlHandler=function(a){if(isNotEmpty(this.url)){var c=this.populateString(this.url);this.urlTarget==="_self"?window.location.href=c:window.open(c,this.urlTarget)}},Object.defineProperty(o.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(a){a=toBoolean(a),this.setPropertyValue("swipeable",a)&&(this.applyCursorStyle(),!a&&!this.isInteractive()||(this.interactions.swipeable=a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(a){a=toBoolean(a),this.setPropertyValue("trackable",a)&&(!a&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.trackable=a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(a){this.setPropertyValue("wheelable",a)&&(!a&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.wheelable=a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(a){var c=this;a=toBoolean(a),this.setPropertyValue("resizable",a)&&(!a&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.resizable=a,this.interactions.setEventDisposer("sprite-resizable",a,function(){return new MultiDisposer([c.events.on("down",c.handleDown,c,!1),c.events.on("resize",c.handleResize,c,!1)])})))},enumerable:!0,configurable:!0}),o.prototype.handleResize=function(a){if((!this.interactions.isTouchProtected||!a.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*a.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var c=documentPointToSvg(a.point1,this.htmlContainer,this.svgContainer.cssScale),d=documentPointToSvg(a.point2,this.htmlContainer,this.svgContainer.cssScale),g=getMidPoint(c,d),b=documentPointToSprite(a.startPoint1,this._parent),j=documentPointToSprite(a.startPoint2,this._parent),$=this.interactions.originalPosition,_e=this.interactions.originalScale;if($){var st={x:(b.x-$.x)/_e,y:(b.y-$.y)/_e},rt={x:(j.x-$.x)/_e,y:(j.y-$.y)/_e},ut=getMidPoint(st,rt),gt=svgPointToSprite(g,this._parent);this.moveTo({x:gt.x-ut.x*this.scale,y:gt.y-ut.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(o.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cursorOverStyle",{set:function(a){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=a,getInteraction().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cursorDownStyle",{set:function(a){this.cursorOptions.downStyle=a},enumerable:!0,configurable:!0}),o.prototype.applyCursorStyle=function(){},Object.defineProperty(o.prototype,"interactionsEnabled",{get:function(){var a=this.getPropertyValue("interactionsEnabled");return a===!1?!1:this.virtualParent?this.virtualParent.interactionsEnabled:this._parent?this._parent.interactionsEnabled:!0},set:function(a){if(a=toBoolean(a),this.setPropertyValue("interactionsEnabled",a)){var c=null;a?this.group.node.style.pointerEvents="":c="none",this.group.node.style.pointerEvents=c}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"exporting",{get:function(){return this.getExporting()},set:function(a){this._exporting.set(a,a)},enumerable:!0,configurable:!0}),o.prototype.getExporting=function(){var a=this._exporting.get();if(a)return a;if(this.isStandaloneInstance||!this._parent)a=new Export(this.svgContainer.SVGContainer),a.sprite=this,a.language=this.language,a.numberFormatter=this.numberFormatter,a.dateFormatter=this.dateFormatter,a.durationFormatter=this.durationFormatter,this._exporting.set(a,a);else return this._parent.exporting;return a},Object.defineProperty(o.prototype,"exportable",{get:function(){return this._exportable},set:function(a){var c=this.svgContainer;this._exportable=a,c&&(a?remove(c.nonExportableSprites,this):indexOf(c.nonExportableSprites,this)==-1&&c.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),o.prototype.modalPrefix=function(a){return a=options.classNamePrefix+a,a},Object.defineProperty(o.prototype,"modal",{get:function(){var a=this.svgContainer;if(a){var c=a.modal;return c.adapter.has("classPrefix",this.modalPrefix)||c.adapter.add("classPrefix",this.modalPrefix),c}},enumerable:!0,configurable:!0}),o.prototype.openModal=function(a,c){var d=this.svgContainer;if(d)return d.openModal(a,c)},o.prototype.closeModal=function(){var a=this.svgContainer;a&&a.closeModal()},Object.defineProperty(o.prototype,"popups",{get:function(){var a=this.svgContainer;if(a){var c=a.popups;return c.template.sprite=this,c.template.adapter.has("classPrefix",this.modalPrefix)||c.template.adapter.add("classPrefix",this.modalPrefix),c}},enumerable:!0,configurable:!0}),o.prototype.openPopup=function(a,c){var d=this.svgContainer;if(d)return d.openPopup(a,c)},o.prototype.closeAllPopups=function(){var a=this.svgContainer;a&&a.closeAllPopups()},Object.defineProperty(o.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(a){this.isDragged||this.setPercentProperty("x",a,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelX",{get:function(){var a=fitToRange(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(a){isNumber$1(a)&&(a=round$1(a,this._positionPrecision,!0),this.setPropertyValue("minX",a,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(a){isNumber$1(a)&&(a=round$1(a,this._positionPrecision,!0),this.setPropertyValue("maxX",a,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(a){this.isDragged||this.setPercentProperty("y",a,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelY",{get:function(){var a=fitToRange(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(a){isNumber$1(a)&&(a=round$1(a,this._positionPrecision,!0),this.setPropertyValue("minY",a,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(a){isNumber$1(a)&&(a=round$1(a,this._positionPrecision,!0),this.setPropertyValue("maxY",a,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(a){isNumber$1(a)&&(a=round$1(a,this._positionPrecision,!0),this.setPropertyValue("dx",a,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(a){isNumber$1(a)&&(a=round$1(a,this._positionPrecision,!0),this.setPropertyValue("dy",a,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(a){a=toNumber(a),isNumber$1(a)||(a=0),this.setPropertyValue("rotation",a,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(a){a=toText(a),this.setPropertyValue("align",a)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(a){a=toText(a),this.setPropertyValue("valign",a)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(a){a=toText(a),this.setPropertyValue("horizontalCenter",a)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(a){a=toText(a),this.setPropertyValue("verticalCenter",a)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxWidth",{get:function(){var a=this.getPropertyValue("maxWidth");if(!isNumber$1(a)&&this._parent){var c=this._parent.maxWidth;return this._parent.layout!="absolute"&&this.align!="none"&&this.align!=null&&(c=c-this.pixelMarginLeft-this.pixelMarginRight),c}return a},set:function(a){this.setMaxWidth(a)},enumerable:!0,configurable:!0}),o.prototype.setMaxWidth=function(a){var c=this.maxWidth,d=this.maxHeight;if(this.setPropertyValue("maxWidth",a)){isNumber$1(this.relativeWidth)&&this.invalidate();var g={type:"maxsizechanged",target:this,previousWidth:c,previousHeight:d};this.dispatchImmediately("maxsizechanged",g)}},Object.defineProperty(o.prototype,"maxHeight",{get:function(){var a=this.getPropertyValue("maxHeight");if(!isNumber$1(a)&&this._parent){var c=this._parent.maxHeight;return this._parent.layout!="absolute"&&this.valign!="none"&&this.valign!=null&&(c=c-this.pixelMarginTop-this.pixelMarginBottom),c}return a},set:function(a){this.setMaxHeight(a)},enumerable:!0,configurable:!0}),o.prototype.setMaxHeight=function(a){var c=this.maxWidth,d=this.maxHeight;if(this.setPropertyValue("maxHeight",a)){isNumber$1(this.relativeHeight)&&this.invalidate();var g={type:"maxsizechanged",target:this,previousWidth:c,previousHeight:d};this.dispatchImmediately("maxsizechanged",g)}},Object.defineProperty(o.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(a){this.setPropertyValue("minWidth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(a){this.setPropertyValue("minHeight",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(a){var c=this.setPercentProperty("width",a,!0,!1,this._positionPrecision,!0);c&&(this.percentWidth=void 0,this.relativeWidth=void 0,a instanceof Percent?(this.percentWidth=a.percent,isNumber$1(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(a),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(a){var c=this.setPercentProperty("height",a,!0,!1,this._positionPrecision,!0);c&&(this.percentHeight=void 0,this._relativeHeight=void 0,a instanceof Percent?(this.percentHeight=a.percent,isNumber$1(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(a),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelWidth",{get:function(){var a;isNumber$1(this.percentWidth)?a=this.maxWidth:isNumber$1(this._pixelWidth)?a=this._pixelWidth:a=0;var c=this.minWidth;c!=null&&a<c&&(a=c);var d=round$1(a,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",d):d},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelHeight",{get:function(){var a;isNumber$1(this.percentHeight)?a=this.maxHeight:isNumber$1(this._pixelHeight)?a=this._pixelHeight:a=0;var c=this.minHeight;c!=null&&a<c&&(a=c);var d=round$1(a,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",d):d},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeWidth",{get:function(){var a=this._relativeWidth;if(isNumber$1(a))return this._adapterO?this._adapterO.apply("relativeWidth",a):a},set:function(a){this._relativeWidth!=a&&(this._relativeWidth=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeHeight",{get:function(){var a=this._relativeHeight;if(isNumber$1(a))return this._adapterO?this._adapterO.apply("relativeHeight",a):a},set:function(a){this._relativeHeight!=a&&(this._relativeHeight=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"outerWidth",{get:function(){var a=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"outerHeight",{get:function(){var a=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerWidth",{get:function(){var a=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerHeight",{get:function(){var a=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"globalScale",{get:function(){var a=this.scale;return this._parent&&(a=a*this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(a){a=toNumber(a),a<0&&(a=0),a!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",a,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),o.prototype.margin=function(a,c,d,g){return this.marginTop=a,this.marginRight=c,this.marginBottom=d,this.marginLeft=g,this},Object.defineProperty(o.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(a){this.setPercentProperty("marginLeft",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(a){this.setPercentProperty("marginRight",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(a){this.setPercentProperty("marginTop",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(a){this.setPercentProperty("marginBottom",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelMarginRight",{get:function(){var a=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeMarginRight",{get:function(){var a=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelMarginLeft",{get:function(){var a=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeMarginLeft",{get:function(){var a=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelMarginTop",{get:function(){var a=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeMarginTop",{get:function(){var a=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelMarginBottom",{get:function(){var a=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",a):a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeMarginBottom",{get:function(){var a=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",a):a},enumerable:!0,configurable:!0}),o.prototype.padding=function(a,c,d,g){return this.paddingTop=a,this.paddingRight=c,this.paddingBottom=d,this.paddingLeft=g,this},Object.defineProperty(o.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(a){this.setPercentProperty("paddingLeft",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(a){this.setPercentProperty("paddingRight",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(a){this.setPercentProperty("paddingTop",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(a){this.setPercentProperty("paddingBottom",a,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(a){this.setPath(a)},enumerable:!0,configurable:!0}),o.prototype.setPath=function(a){return this.setPropertyValue("path",a)?(this._adapterO&&(a=this._adapterO.apply("path",a)),this._isPath||((!this.element||this.element.node&&!(this.element.node instanceof SVGPathElement))&&(this.element=this.paper.add("path")),this._isPath=!0),hasValue(a)?this.element.attr({d:a}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0):!1},Object.defineProperty(o.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(a){this.setPropertyValue("fillModifier",a)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(a){this.setPropertyValue("strokeModifier",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(a){a=toNumberRange(a,0,1),this.setPropertyValue("fillOpacity",a)&&this.setSVGAttribute({"fill-opacity":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(a){this.setFill(a)},enumerable:!0,configurable:!0}),o.prototype.setFill=function(a){if((!isObject$1(a)||"r"in a)&&(a=toColor(a)),this.setColorProperty("fill",a)||this.fillModifier){if(a instanceof Color&&this.fillModifier&&(a=this.fillModifier.modify(a)),this.realFill=a,a instanceof Color)this.setSVGAttribute({fill:a.toString()});else if(!hasValue(a))this.removeSVGAttribute("fill");else if(a instanceof Pattern||a instanceof LinearGradient||a instanceof RadialGradient){var c=a;c.paper=this.paper,this.setSVGAttribute({fill:'url("'+getBaseURI()+c.id+'")'})}}},Object.defineProperty(o.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(a){a=toNumberRange(a,0,1),this.setPropertyValue("opacity",a)&&this.setSVGAttribute({opacity:a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(a){this.setStroke(a)},enumerable:!0,configurable:!0}),o.prototype.setStroke=function(a){if((!isObject$1(a)||"r"in a)&&(a=toColor(a)),this.setColorProperty("stroke",a)||this.strokeModifier){if(a instanceof Color&&this.strokeModifier&&(a=this.strokeModifier.modify(a)),this.realStroke=a,a instanceof Color)a.hex=="none"?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:a.toString()});else if(!hasValue(a))this.removeSVGAttribute("stroke");else if(a instanceof Pattern||a instanceof LinearGradient||a instanceof RadialGradient){var c=a;c.paper=this.paper,this.setSVGAttribute({stroke:'url("'+getBaseURI()+c.id+'")'})}}},Object.defineProperty(o.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(a){a=toNumberRange(a,0,1),this.setPropertyValue("strokeOpacity",a)&&this.setSVGAttribute({"stroke-opacity":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(a){a=toBoolean(a),this.setPropertyValue("nonScalingStroke",a)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(a){a=toBoolean(a),this.setPropertyValue("nonScaling",a,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(a){a=toNumber(a),this.setPropertyValue("strokeWidth",a,!0),this.nonScalingStroke&&(isNumber$1(a)||(a=1),a=a/this.globalScale),this.setSVGAttribute({"stroke-width":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(a){a=toText(a),this.setPropertyValue("strokeDasharray",a)&&this.setSVGAttribute({"stroke-dasharray":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(a){a=toNumber(a),this.setPropertyValue("strokeDashoffset",a)&&this.setSVGAttribute({"stroke-dashoffset":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(a){this.setPropertyValue("strokeLinecap",a)&&this.setSVGAttribute({"stroke-linecap":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(a){this.setPropertyValue("strokeLinejoin",a)&&this.setSVGAttribute({"stroke-linejoin":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(a){a=toText(a),this.setPropertyValue("shapeRendering",a)&&this.setSVGAttribute({"shape-rendering":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(a){a=toBoolean(a),a?this._positionPrecision=options.pixelPerfectPrecision:this._positionPrecision=3,this.setPropertyValue("pixelPerfect",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rtl",{get:function(){return hasValue(this._rtl)?this._rtl:this._topParent?this._topParent.rtl:!1},set:function(a){a=toBoolean(a),this.isBaseSprite&&(this.topParent.rtl=a),this._rtl=a},enumerable:!0,configurable:!0}),o.prototype.show=function(a){return this.showReal(a)},o.prototype.showReal=function(a){var c=this;if(!this.preventShow){var d,g=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||g.opacity!=null&&this.opacity<g.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),isNumber$1(a)||(a=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,d=this.applyCurrentState(a),d&&!d.isFinished()?(this._showHideDisposer=d.events.on("animationended",function(){c.isShowing=!1}),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var b=this.defaultState.properties.visible;hasValue(b)||(b=!0),this.visible=b,this.readerHidden=!1,this.dispatchImmediately("shown")}return d}},o.prototype.hide=function(a){return this.hideReal(a)},o.prototype.hideReal=function(a){var c=this,d;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var g=this.hiddenState;g?(d=this.setState(g,a,void 0),d&&!d.isFinished()?(this._hideAnimation=d,this._showHideDisposer=d.events.on("animationended",function(){c.isHiding=!1,c._isHidden=!0,g.properties.visible==!1&&(c.visible=!1)},this),this._disposers.push(this._showHideDisposer),this._disposers.push(d)):(this.isHiding=!1,this._isHidden=!0)):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return isNumber$1(a)||(a=this.hiddenState.transitionDuration),d},Object.defineProperty(o.prototype,"visible",{get:function(){return this.getVisibility()},set:function(a){a=toBoolean(a),this.setVisibility(a)},enumerable:!0,configurable:!0}),o.prototype.getVisibility=function(){var a=this.getPropertyValue("visible");return hasValue(a)||(a=!0),a},o.prototype.setVisibility=function(a){if(this.setPropertyValue("visible",a)&&(a?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged"))){var c={type:"visibilitychanged",target:this,visible:a};this.events.dispatchImmediately("visibilitychanged",c)}},Object.defineProperty(o.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(a){a=toNumber(a),this.setPropertyValue("zIndex",a)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),o.prototype.toFront=function(){var a=this._parent;a&&a.children.indexOf(this)!=a.children.length-1&&(a.children.moveValue(this,a.children.length-1),this.dispatch("zIndexChanged"))},o.prototype.toBack=function(){var a=this._parent;a&&a.children.indexOf(this)!=0&&(a.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(o.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(a){this.setPropertyValue("userClassName",a)&&(!a&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltip",{get:function(){if(this._tooltip)return this._tooltip;if(this.virtualParent)return this.virtualParent.tooltip;if(this._parent)return this._parent.tooltip},set:function(a){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=a,a&&(a.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipDataItem",{get:function(){var a=this._tooltipDataItem;return a||this.dataItem},set:function(a){this._tooltipDataItem=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(a){this._tooltipColorSource=a},enumerable:!0,configurable:!0}),o.prototype.showTooltip=function(a){this.showTooltipOn=="always"&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!a&&this.tooltipPosition=="pointer"&&this.isHover&&(a=documentPointToSvg(getInteraction().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var c=this;c!=null;){if(!c.visible||c.disabled||c.__disabled){this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0);return}c=c.parent}if(hasValue(this.tooltipText)||hasValue(this.tooltipHTML)){var d=this.tooltip,g=this.tooltipDataItem;if(d){d.targetSprite=this;var b=this,j=this.tooltipColorSource;if((d.getStrokeFromObject||d.getFillFromObject)&&j&&(j.isTemplate?g&&eachContinue$2(g.sprites,function(gt){return gt.clonedFrom==j?(b=gt,!1):!0}):b=j),d.getStrokeFromObject){for(var $=this.stroke,_e=b;_e.parent!=null&&($=_e.stroke,$==null&&(_e=_e.parent),$==null););$ instanceof Color?d.background.animate({property:"stroke",to:$},d.animationDuration):d.background.stroke=$}if(d.dataItem=g,d.label.populateStringFrom=this,d.getFillFromObject){for(var st=this.fill,_e=b;_e.parent!=null;)if(st=_e.fill,st==null||st instanceof Color&&st.rgb==null)_e=_e.parent;else if(st!=null)break;st==null&&(st=color("#000000")),st instanceof Color&&d.visible?d.background.animate({property:"fill",to:st},d.animationDuration):d.background.fill=st,d.autoTextColor&&st instanceof Color&&(d.label.fill=st.alternative)}var rt="";if(this.tooltipHTML&&(d.html=this.tooltipHTML,rt=this.tooltipHTML),this.tooltipText&&(d.text=this.tooltipText,rt=this.tooltipText),this.updateTooltipPosition(a))if(d.readerDescribedBy=this.uidAttr(),d.label.invalid&&d.label.validate(),rt!=null&&rt!=""&&d.label.currentText!=""){d&&!d.parent&&(d.parent=this.tooltipContainer);var ut=d.defaultState.transitionDuration;return ut<=0&&(ut=1),d.show(ut),d.currentSprite=this,!0}else this.hideTooltip(0);else this.hideTooltip(0)}}return!1},o.prototype.updateTooltipPosition=function(a){var c=this;if(this.tooltipPosition=="pointer"){if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=getInteraction().body.events.on("track",function(g){return c.pointTooltipTo(documentPointToSvg(g.point,c.svgContainer.SVGContainer,c.svgContainer.cssScale),!0)}),a)return this.pointTooltipTo(a,!0)}else{var d=spritePointToSvg({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(d)}},o.prototype.pointTooltipTo=function(a,c){var d=this.tooltip;return d&&this.topParent&&(d.showInViewport||isInRectangle(a,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))?(d.pointTo(a,c),!0):!1},o.prototype.hideTooltip=function(a){if(this.showTooltipOn!="always"){var c=this.tooltip;c&&(c.targetSprite==this&&(c.targetSprite=void 0),c.hide(a),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(o.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(a){a=toText(a),this.hoverable=!0,this.setPropertyValue("tooltipHTML",a)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(a){a=toText(a),a&&(this.hoverable=!0),this.setPropertyValue("tooltipText",a)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipContainer",{get:function(){if(this._tooltipContainer)return this._tooltipContainer;if(this._parent)return this._parent.tooltipContainer},set:function(a){this._tooltipContainer=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(a){this.setPercentProperty("tooltipX",a)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"alwaysShowTooltip",{get:function(){return this.getPropertyValue("showTooltipOn")=="always"},set:function(a){a=toBoolean(a),a&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(a){this.setPropertyValue("showTooltipOn",a)&&(a=="hit"&&(this.clickable=!0),this.tooltip&&(a=="always"?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(a){this.setPropertyValue("tooltipPosition",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(a){this.setPercentProperty("tooltipY",a)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),o.prototype.getTooltipX=function(){var a=this.getPropertyValue("tooltipX");hasValue(a)||(a=percent(50));var c;return isNumber$1(a)&&(c=a),a instanceof Percent&&(c=this.maxLeftSelf+this._measuredWidthSelf*a.value-this.pixelPaddingLeft-this.ex),isNumber$1(c)||(c=0),c},o.prototype.getTooltipY=function(){var a=this.getPropertyValue("tooltipY");hasValue(a)||(a=percent(50));var c;return isNumber$1(a)&&(c=a),a instanceof Percent&&(c=this.maxTopSelf+this._measuredHeightSelf*a.value-this.pixelPaddingTop-this.ey),isNumber$1(c)||(c=0),c},o.prototype.raiseCriticalError=function(a,c){this.svgContainer&&(this._adapterO?this.modal.content=this._adapterO.apply("criticalError",a).message:this.modal.content=a.message,c?this.modal.closable=!0:this.disabled=!0,options.suppressErrors||this.modal.open()),options.verbose&&console.log(a)},o.prototype.processConfig=function(a){a&&(hasValue(a.tooltipColorSource)&&isString$1(a.tooltipColorSource)&&this.map.hasKey(a.tooltipColorSource)&&(a.tooltipColorSource=this.map.getKey(a.tooltipColorSource)),hasValue(a.cursorOverStyle)&&isString$1(a.cursorOverStyle)&&(a.cursorOverStyle=this.getCursorStyle(a.cursorOverStyle)),hasValue(a.cursorDowntyle)&&isString$1(a.cursorDowntyle)&&(a.cursorDowntyle=this.getCursorStyle(a.cursorDowntyle)),hasValue(a.cursorOptions)&&(hasValue(a.cursorOptions.overStyle)&&isString$1(a.cursorOptions.overStyle)&&(a.cursorOptions.overStyle=this.getCursorStyle(a.cursorOptions.overStyle)),hasValue(a.cursorOptions.downStyle)&&isString$1(a.cursorOptions.downStyle)&&(a.cursorOptions.downStyle=this.getCursorStyle(a.cursorOptions.downStyle)))),e.prototype.processConfig.call(this,a),this.processDelayedMap()},o.prototype.getCursorStyle=function(a){switch(a){case"grab":return MouseCursorStyle.grab;case"grabbing":return MouseCursorStyle.grabbing;case"pointer":return MouseCursorStyle.pointer;case"horizontalResize":return MouseCursorStyle.horizontalResize;case"verticalResize":return MouseCursorStyle.verticalResize;default:return MouseCursorStyle.default}},o.prototype.configOrder=function(a,c){return a==c?0:a=="tooltipColorSource"?1:c=="tooltipColorSource"?-1:e.prototype.configOrder.call(this,a,c)},Object.defineProperty(o.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:this._parent?this._parent.isHidden:!1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(a){a=toBoolean(a),this.setShowOnInit(a)},enumerable:!0,configurable:!0}),o.prototype.setShowOnInit=function(a){this.setPropertyValue("showOnInit",a)&&(this.isTemplate||(a&&!this.inited&&!this.hidden?(this._showOnInitDisposer=new MultiDisposer([registry.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer)):this._showOnInitDisposer&&this._showOnInitDisposer.dispose()))},o.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},o.prototype.appear=function(){var a=this;if(this.appeared=!1,!this.hidden&&!this.isHidden&&this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var c=this.show();c&&!c.isFinished()?this.addDisposer(c.events.on("animationended",function(){a.appeared=!0,a.dispatch("appeared")})):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(o.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(a){a=toBoolean(a),this.setPropertyValue("hidden",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"plugins",{get:function(){var a=this;return this._plugins||(this._plugins=new List,this._disposers.push(this._plugins.events.on("inserted",function(c){c.newValue.target=a,c.newValue.init()})),this._disposers.push(new ListDisposer(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),o.prototype._systemUpdate=function(a){this.validate()},o.prototype._systemCheckIfValidate=function(){return!0},o.prototype._systemValidatePositions=function(){this.validatePosition()},o.prototype._systemValidateLayouts=function(){},o}(BaseObjectEvents);registry.registeredClasses.Sprite=Sprite;var Rectangle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Rectangle",a.element=a.paper.add("rect"),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this._positionPrecision;this.pixelPerfect&&(a=0);var c=round$1(this.innerWidth,a),d=round$1(this.innerHeight,a);this.element.attr({width:c,height:d})},o.prototype.measureElement=function(){},Object.defineProperty(o.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Rectangle=Rectangle;var Container=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._childrenByLayout=[],a._childrenDisposers=new Dictionary,a.hasFocused=!1,a.setStateOnSprites=[],a.layoutInvalid=!1,a._absoluteWidth=0,a._absoluteHeight=0,a._shouldBeReady=[],a._tapToActivate=!1,a.tapTimeout=3e3,a.className="Container",a._element=a.paper.addGroup("g"),a.group.add(a.element),a.setPropertyValue("pixelPerfect",!1),a.setPropertyValue("layout","absolute"),a.setPropertyValue("fixedWidthGrid",!1),a.setPropertyValue("verticalCenter","none"),a.setPropertyValue("horizontalCenter","none"),a._positionPrecision=4,a._disposers.push(new DictionaryDisposer(a._childrenDisposers)),a.children.events.on("inserted",a.handleChildAdded,a),a.children.events.on("removed",a.handleChildRemoved,a),a.applyTheme(),a}return o.prototype.handleChildAdded=function(a){this.processChild(a.newValue)},o.prototype.processChild=function(a){try{this._childrenDisposers.insertKey(a.uid,new MultiDisposer([a.events.on("transformed",this.handleChildTransform,this),a.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch{}if(this.element){var c=this.element;c.add(a.group)}a.parent=this,a.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:a}),this.invalidate()},o.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},o.prototype.handleChildRemoved=function(a){var c=a.oldValue;if(this._childrenDisposers.removeKey(c.uid),this.element){var d=this.element;d.removeElement(c.group)}c.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:c})},o.prototype.handleChildTransform=function(a){var c=a.target;c.isMeasured&&this.invalidateLayout()},o.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||this.layout=="none"||this.__disabled||(this.layoutInvalid=!0,registry.addToInvalidLayouts(this),system.requestFrame())},o.prototype.invalidate=function(){e.prototype.invalidate.call(this),this.invalidateLayout()},o.prototype.deepInvalidate=function(){e.prototype.invalidate.call(this),each$2(this._childrenByLayout,function(a){a instanceof o?a.deepInvalidate():a.invalidate()}),this.invalidateLayout()},Object.defineProperty(o.prototype,"children",{get:function(){return this._children||(this._children=new List),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(a){this.setPropertyValue("minWidth",a)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(a){this.setPropertyValue("minHeight",a)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),o.prototype.removeElement=function(){},o.prototype.sortChildren=function(){var a=this;if(this._childrenByLayout=[],this.layout=="none"||this.layout=="absolute"||!this.layout)this._childrenByLayout=this.children.values;else{var c=[],d=[];each(this.children.iterator(),function(g){a.layout=="horizontal"||a.layout=="grid"?isNumber$1(g.percentWidth)?d.push(g):c.push(g):a.layout=="vertical"&&isNumber$1(g.percentHeight)?d.push(g):c.push(g)}),this._childrenByLayout=c.concat(d)}this.calculateRelativeSize()},o.prototype.calculateRelativeSize=function(){var a=this,c=0,d=0;each$2(this._childrenByLayout,function(g){g.isMeasured&&(isNumber$1(g.percentWidth)&&(c+=g.percentWidth),isNumber$1(g.percentHeight)&&(d+=g.percentHeight))}),each$2(this._childrenByLayout,function(g){g.isMeasured&&(a.layout=="horizontal"&&(isNumber$1(g.percentWidth)&&(g.relativeWidth=g.percentWidth/c),isNumber$1(g.percentHeight)&&(g.relativeHeight=g.percentHeight/100)),a.layout=="vertical"&&(isNumber$1(g.percentHeight)&&(g.relativeHeight=g.percentHeight/d),isNumber$1(g.percentWidth)&&(g.relativeWidth=g.percentWidth/100)),a.layout=="grid"&&(isNumber$1(g.percentHeight)&&(g.relativeHeight=g.percentHeight/100),isNumber$1(g.percentWidth)&&(g.relativeWidth=g.percentWidth/100))),(a.layout=="absolute"||!g.isMeasured)&&(isNumber$1(g.percentWidth)&&(g.relativeWidth=g.percentWidth/100),isNumber$1(g.percentHeight)&&(g.relativeHeight=g.percentHeight/100))})},o.prototype.addChildren=function(){if(this.element){var a=copy$3(this.children.values),c=a.map(function($,_e){return{idx:_e,data:$}});c.sort(function($,_e){var st=$.data.zIndex||0,rt=_e.data.zIndex||0;return st<rt?-1:st>rt?1:$.idx-_e.idx}),a=c.map(function($){return $.data});var d=this.element,g=!0;if(d.node&&d.node.childNodes){for(var b=0,j=d.node.childNodes.length;b<j;b++)if(d.node.childNodes[b]!=a[b].group.node){g=!1;break}}g||(each$2(a,function($){$.group&&d.add($.group)}),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},o.prototype.createChild=function(a){var c=new a;return c.parent=this,c},o.prototype.removeChildren=function(){for(;this.children.length>0;){var a=this.children.getIndex(0);a.parent=void 0,this.children.removeValue(a)}},o.prototype.disposeChildren=function(){for(;this.children.length>0;){var a=this.children.getIndex(0);a.dispose(),this.children.removeValue(a)}},Object.defineProperty(o.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(a){this._background&&this.background!=a&&this.removeDispose(this._background),a&&(this._background=a,this._disposers.push(a),this.processBackground())},enumerable:!0,configurable:!0}),o.prototype.handleGlobalScale=function(){e.prototype.handleGlobalScale.call(this),this.children.each(function(a){a.handleGlobalScale()})},o.prototype.createBackground=function(){return new Rectangle},o.prototype.processBackground=function(){var a=this._background;a&&(a.isMeasured=!1,this._background.fill=new InterfaceColorSet().getFor("background"),a.parent=this,a.isMeasured=!1,this.children.removeValue(a),this._disposers.push(a),this.group.addToBack(this._background.group))},o.prototype.validateLayout=function(){var a=this;registry.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var c=0,d=0,g=!0;this.children&&(this.sortChildren(),each$2(this._childrenByLayout,function(b){var j,$;if(isNumber$1(b.relativeWidth)?(j=round$1(a._availableWidth*b.relativeWidth,2),a.layout=="horizontal"&&(j-=b.pixelMarginRight+b.pixelMarginLeft)):a.layout=="horizontal"&&b.invalid&&b.validate(),isNumber$1(b.relativeHeight)?($=round$1(a._availableHeight*b.relativeHeight,2),a.layout=="vertical"&&($-=b.pixelMarginTop+b.pixelMarginBottom)):a.layout=="vertical"&&b.invalid&&b.validate(),b.invalid==!1){if(isNumber$1(b.relativeWidth)&&(b.maxWidth=j),isNumber$1(b.relativeHeight)&&(b.maxHeight=$),b.isMeasured){a.layout=="horizontal"&&(isNumber$1(b.percentWidth)||b.measuredWidth>0&&(a._availableWidth-=b.measuredWidth+b.pixelMarginLeft+b.pixelMarginRight)),a.layout=="vertical"&&(isNumber$1(b.percentHeight)||b.measuredHeight>0&&(a._availableHeight-=b.measuredHeight+b.pixelMarginTop+b.pixelMarginBottom));var _e=b.measuredWidth,st=b.measuredHeight;b.align!="none"&&(_e+=b.pixelMarginLeft+b.pixelMarginRight),b.valign!="none"&&(st+=b.pixelMarginTop+b.pixelMarginBottom),c=Math.max(c,_e),d=Math.max(d,st)}}else b.isMeasured&&(isNumber$1(b.relativeWidth)&&b.maxWidth!=j&&(b.maxWidth=j,g=!1),isNumber$1(b.relativeHeight)&&b.maxHeight!=$&&(b.maxHeight=$,g=!1))})),this._absoluteWidth=c,this._absoluteHeight=d,g&&this.arrange()},o.prototype.arrange=function(){var a=this,c=this.children,d=0,g=0,b=max$1(this.innerWidth,this._absoluteWidth),j=max$1(this.innerHeight,this._absoluteHeight),$,_e,st,rt,ut=this.pixelPaddingLeft,gt=this.pixelPaddingRight,yt=this.pixelPaddingTop,wt=this.pixelPaddingBottom,Ct=0,Pt=0,At=0,Tt=0,kt=[],It=[],Lt,Ft,Nt,Ht=this.maxWidth,dr=this.maxHeight,hs=this.minWidth,us=this.minHeight,hn=copy$3(c.values);if(this.reverseOrder&&hn.reverse(),this.layout=="grid"){Ft=Ht,Lt=1;for(var un=0,bo=hn.length;un<bo;un++){var _s=hn[un];if(_s.isMeasured&&!_s.disabled&&!_s.__disabled){var gn=_s.measuredWidth;gn<Ft&&(Ft=gn),gn>Lt&&(Lt=gn)}}Ft=fitToRange(Ft,1,Ht),Lt=fitToRange(Lt,1,Ht),this.fixedWidthGrid?Nt=Ht/Lt:Nt=Ht/Ft,Nt=max$1(1,Math.floor(Nt)),Nt=min$1(this.maxColumns,Nt),kt=this.getColumnWidth(hn,Nt,Lt)}for(var Gr,ds,Zn,Nn,un=0,bo=hn.length;un<bo;un++){var _s=hn[un];if(_s.isMeasured&&!_s.disabled&&!_s.__disabled){var Qn=void 0,bu=void 0,ou=_s.pixelMarginLeft,g0=_s.pixelMarginRight,Su=_s.pixelMarginTop,l1=_s.pixelMarginBottom,B0=_s.measuredWidth,a1=_s.measuredHeight,q1=void 0,ox=void 0,U_=void 0,tS=void 0;switch(this.layout){case"none":break;case"absolute":switch(_s.align){case"left":Qn=ou-_s.maxLeft;break;case"center":Qn=(b-B0)/2-_s.maxLeft;break;case"right":Qn=b-g0-_s.maxRight;break;default:_s.x instanceof Percent||(Qn=_s.pixelX);break}switch(_s.valign){case"top":bu=Su-_s.maxTop;break;case"middle":bu=(j-a1)/2-_s.maxTop;break;case"bottom":bu=j-l1-_s.maxBottom;break;default:_s.y instanceof Percent||(bu=_s.pixelY);break}break;case"vertical":switch(_s.align){case"left":Qn=ou-_s.maxLeft;break;case"center":Qn=(b-B0)/2-_s.maxLeft;break;case"right":Qn=b-g0-_s.maxRight;break;default:Qn=_s.pixelX;break}bu=Pt+Su-_s.maxTop,Pt=bu+_s.maxBottom+l1;break;case"horizontal":switch(_s.valign){case"top":bu=Su-_s.maxTop;break;case"middle":bu=(j-a1)/2-_s.maxTop;break;case"bottom":bu=j-l1-_s.maxBottom;break;default:bu=_s.pixelY;break}Qn=Ct+ou-_s.maxLeft,Ct=Qn+_s.maxRight+g0;break;case"grid":switch(Qn=Ct+ou-_s.maxLeft,_s.valign){case"top":bu=Pt+Su-_s.maxTop;break;case"middle":bu=Pt+(j-a1)/2-_s.maxTop;break;case"bottom":bu=Pt+j-l1-_s.maxBottom;break;default:bu=Pt-_s.maxTop;break}Ct+=kt[Tt],It[At]=max$1(It[At],a1),Tt++;var iS=kt[Tt];if(isNumber$1(iS)||(iS=Lt),Ct>min$1(this.innerWidth,Ht)-iS+1&&Tt<Nt){Nt=Tt,Ct=0,Pt=0,At=0,Tt=0,kt=this.getColumnWidth(hn,Nt,Lt),It=[],un=-1;continue}Tt>=Nt&&(Tt=0,Pt+=It[At],At++,Ct=0);break}this.layout!=="none"&&(_s.moveTo({x:Qn,y:bu}),q1=Qn+_s.maxLeft-ou,ox=Qn+_s.maxRight+g0,U_=bu+_s.maxTop-Su,tS=bu+_s.maxBottom+l1,(ox>_e||!isNumber$1(_e))&&(_e=ox),(q1<$||!isNumber$1($))&&($=q1),(U_<st||!isNumber$1(st))&&(st=U_),(tS>rt||!isNumber$1(rt))&&(rt=tS),(ox>ds||!isNumber$1(ds))&&(ds=ox),(q1<Gr||!isNumber$1(Gr))&&(Gr=q1),(U_<Zn||!isNumber$1(Zn))&&(Zn=U_),(tS>Nn||!isNumber$1(Nn))&&(Nn=Nn))}else _s.validatePosition()}if(this.layout=="none"){var wA=this.bbox;$=wA.x,_e=wA.x+wA.width,st=wA.y,rt=wA.y+wA.height}isNumber$1($)||($=0,Gr=0),isNumber$1(_e)||(_e=this._availableWidth,ds=_e),isNumber$1(st)||(st=0,Zn=0),isNumber$1(rt)||(rt=this._availableHeight,Nn=rt),isNumber$1(Zn)||(Zn=0),isNumber$1(Nn)||(Nn=Zn),isNumber$1(Gr)||(Gr=0),isNumber$1(ds)||(ds=Gr),d=_e-$,g=rt-st,isNumber$1(this.relativeWidth)&&(d=Ht-ut-gt,$=0,_e=d),isNumber$1(this.relativeHeight)&&(g=dr-yt-wt,st=0,rt=g),isNumber$1(this._pixelWidth)&&($=0,d=this._pixelWidth-ut-gt),isNumber$1(hs)&&d<hs&&($=0,d=this.minWidth-ut-gt),isNumber$1(this._pixelHeight)&&(st=0,g=this._pixelHeight-yt-wt),isNumber$1(us)&&g<us&&(st=0,g=us-yt-wt);var pO=ds-Gr,aR=Nn-Zn;if(this.layout!="none"&&(this.contentAlign||this.contentValign)&&c.length>0){var fD,AA,oI=d,mO=g;oI<pO&&(oI=pO),mO<aR&&(mO=aR),this.contentAlign=="center"&&(fD=(oI-pO)/2),this.contentAlign=="right"&&(fD=oI-pO),this.contentValign=="middle"&&(AA=(mO-aR)/2),this.contentValign=="bottom"&&(AA=mO-aR),isNumber$1(fD)&&each(c.iterator(),function(X3){var sR=X3.maxLeft,N_=fD;a.layout=="horizontal"&&(X3.x=X3.pixelX+N_),a.layout=="grid"&&(X3.x=X3.pixelX+N_),a.layout=="vertical"&&(N_+=X3.pixelMarginLeft,X3.align=="none"&&(X3.x=N_-sR)),a.layout=="absolute"&&(N_+=X3.pixelMarginLeft,X3.align=="none"&&(X3.x=N_-sR))}),isNumber$1(AA)&&each(c.iterator(),function(X3){var sR=X3.maxTop,N_=AA;a.layout=="horizontal"&&(N_+=X3.pixelMarginTop,X3.valign=="none"&&(X3.y=N_-sR)),a.layout=="grid"&&(N_+=X3.pixelMarginTop,X3.y=N_-sR),a.layout=="vertical"&&(X3.y=X3.pixelY+N_),a.layout=="absolute"&&(N_+=X3.pixelMarginTop,X3.valign=="none"&&(X3.y=N_-sR))})}var sp=this.bbox;d=max$1(d,hs),g=max$1(g,us),this.contentWidth=d,this.contentHeight=g,d=min$1(d,Ht),g=min$1(g,dr),this._bbox={x:$,y:st,width:d,height:g};var xu=this.maxLeft,ux=this.maxTop,tA=this.maxBottom,au=this.maxRight;if(this.measure(),(xu!=this.maxLeft||au!=this.maxRight||ux!=this.maxTop||tA!=this.maxBottom)&&this.events.isEnabled("transformed")){var C3={type:"transformed",target:this};sp&&(C3.dummyData=sp.width+" "+d+"  "+sp.height+" "+g),this.events.dispatchImmediately("transformed",C3)}this.dispatchImmediately("layoutvalidated")},o.prototype.updateCenter=function(){e.prototype.updateCenter.call(this),this.updateBackground()},o.prototype.updateBackground=function(){var a=this._background;a&&(a.x=this.maxLeft,a.y=this.maxTop,a.width=this.maxRight-this.maxLeft,a.height=this.maxBottom-this.maxTop)},o.prototype.getColumnWidth=function(a,c,d){var g=this,b=[],j=0;return each$2(a,function($){$.isMeasured&&!$.disabled&&!$.__disabled&&(g.fixedWidthGrid?b[j]=d:b[j]=max$1(b[j],$.measuredWidth+$.pixelMarginRight+$.pixelMarginLeft),j++,j==c&&(j=0))}),b},Object.defineProperty(o.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(a){this.setPropertyValue("layout",a)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(a){this.setPropertyValue("contentValign",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(a){this.setPropertyValue("contentAlign",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(a){this.setPropertyValue("fixedWidthGrid",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(a){this.setPropertyValue("maxColumns",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(a){this.setPropertyValue("reverseOrder",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(a){this.setPropertyValue("setStateOnChildren",a,!0)},enumerable:!0,configurable:!0}),o.prototype.fitsToBounds=function(a){var c=a.x,d=a.y,g=.5;return c>=-g&&c<=this.pixelWidth+g&&d>=-g&&d<=this.pixelHeight+g},o.prototype.copyFrom=function(a){var c=this;e.prototype.copyFrom.call(this,a),this.layout=a.layout,this.setStateOnChildren=a.setStateOnChildren,a._background&&(this.background=a._background.clone(),this.background.copyFrom(a._background)),each(a.children.iterator(),function(d){if(d.shouldClone){var g=d.clone();g.parent=c}})},Object.defineProperty(o.prototype,"preloader",{get:function(){var a=this._preloader;if(a)return a;if(this.parent)return this.parent.preloader},set:function(a){this._preloader&&this.removeDispose(this._preloader),this._preloader=a,a&&(a.parent=this.tooltipContainer,this._disposers.push(a))},enumerable:!0,configurable:!0}),o.prototype.setPaper=function(a){var c=this,d=e.prototype.setPaper.call(this,a);return d&&(this._background&&(this._background.paper=a,this._background.topParent=this.topParent),this.children.each(function(g){g.setPaper(a),g.topParent=c.topParent})),d},o.prototype.removeFromInvalids=function(){e.prototype.removeFromInvalids.call(this),registry.removeFromInvalidLayouts(this)},o.prototype.setDataItem=function(a){this._dataItem!=a&&(each(this.children.iterator(),function(c){c.dataItem=a}),this._background&&(this._background.dataItem=a)),e.prototype.setDataItem.call(this,a)},o.prototype.measureElement=function(){this.disabled||this.isTemplate||this.layout=="none"||this.__disabled||this.validateLayout()},Object.defineProperty(o.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(a){this.setPropertyValue("fontFamily",a,!0)&&(this.setSVGAttribute({"font-family":a}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(a){this.setPropertyValue("fontSize",a,!0)&&(this.setSVGAttribute({"font-size":a}),this.invalidateLabels())},enumerable:!0,configurable:!0}),o.prototype.invalidateLabels=function(){this.children.each(function(a){a.hardInvalidate?(a.hardInvalidate(),a.events.once("validated",a.handleValidate,a,!1)):a instanceof o&&a.invalidateLabels()})},Object.defineProperty(o.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(a){this.setPropertyValue("fontWeight",a),this.setSVGAttribute({"font-weight":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(a){this.setPropertyValue("textDecoration",a),this.setSVGAttribute({"text-decoration":a})},enumerable:!0,configurable:!0}),o.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),e.prototype.dispose.call(this)},o.prototype.setState=function(a,c,d){var g=a;return a instanceof SpriteState&&(g=a.name),this.setStateOnChildren&&each(this.children.iterator(),function(b){b.setState(g,c,d),g!="active"&&(b.isActive=!1)}),this._background&&this._background.setState(g),this.setStateOnSprites.length&&each$2(this.setStateOnSprites,function(b){b.setState(g,c,d)}),e.prototype.setState.call(this,a,c,d)},o.prototype.setActive=function(a){e.prototype.setActive.call(this,a),this._background&&(this._background.isActive=a)},o.prototype.dispatchReady=function(){var a=this;if(!this.isReady()&&!this.isDisposed()){var c=!0;eachContinue(this.children.iterator(),function(d){return!d.__disabled&&!d.disabled&&!d.isReady()?(c=!1,!1):!0}),eachContinue$2(this._shouldBeReady,function(d){return!d.__disabled&&!d.disabled&&!d.isReady()?(c=!1,!1):!0}),c?e.prototype.dispatchReady.call(this):registry.events.once("exitframe",function(){a.dispatchReady(),system.requestFrame()},void 0,!1)}},o.prototype._systemUpdate=function(a){this.children.each(function(c){c.invalid&&(c._systemCheckIfValidate()?c.dataItem&&c.dataItem.component&&c.dataItem.component.dataInvalid?a.push(c):c.validate():a.push(c))}),e.prototype._systemUpdate.call(this,a)},o.prototype._systemValidatePositions=function(){this.children.each(function(a){a.positionInvalid&&a.validatePosition()}),e.prototype._systemValidatePositions.call(this)},o.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(o.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(a){this._tapToActivate!=a&&this.setTapToActivate(a)},enumerable:!0,configurable:!0}),o.prototype.setTapToActivate=function(a){var c=this;this._tapToActivate=a,this.interactions.isTouchProtected=a,a&&this.interactions.setEventDisposer("container-tapToActivate",a,function(){return new MultiDisposer([c.events.on("hit",c.handleTapToActivate,c,!1),c.events.on("down",c.initTapTimeout,c,!1),c.events.on("track",c.initTapTimeout,c,!1),getInteraction().body.events.on("down",function(d){getInteraction().isLocalElement(d.pointer,c.paper.svg,c.uid)||c.handleTapToActivateDeactivation()},c,!1)])}),getInteraction()},o.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},o.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},o.prototype.initTapTimeout=function(){var a=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout(function(){a.handleTapToActivateDeactivation()},this.tapTimeout))},o.prototype.moveHtmlContainer=function(a){var c=getElement(a);if(c){this.htmlContainer=c;var d=this.svgContainer;d.htmlElement=c,d.htmlElement.appendChild(d.SVGContainer),d.initSensor(),d.measure()}else isString$1(a)&&a!=""&&system.log("html container '"+a+"' not found")},o.prototype.hasLicense=function(){if(options.commercialLicense)return!0;for(var a=0;a<options.licenses.length;a++)if(options.licenses[a].match(/^CH.{5,}/i))return!0;return!1},o}(Sprite);registry.registeredClasses.Container=Container;var System=function(){function e(){this._isPaused=!1,this.animations=[],this.uid=registry.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return e.prototype.reportTime=function(o,a){this.dummyCounter<6,a&&(this.time=Date.now())},e.prototype.update=function(){var o=this;if(!this._isPaused){this._frameRequested=!1;var a=Date.now();registry.dispatchImmediately("enterframe");var c=[];for(var d in registry.invalidDatas)if(hasKey(registry.invalidDatas,d)){for(var g=registry.invalidDatas[d];g.length>0;){var b=g[0],j=b.dataProvider;if(b.isDisposed())remove(g,b);else if(j&&j.dataInvalid)try{if(j.validateData(),j.dataValidationProgress<1)break}catch(rt){remove(g,j),j.raiseCriticalError(rt)}else try{if(b.validateData(),b.dataValidationProgress<1)break}catch(rt){remove(g,b),b.raiseCriticalError(rt)}}if(Date.now()-a>this.updateStepDuration)break}for(;registry.invalidRawDatas.length>0;){var b=registry.invalidRawDatas[0];if(b.isDisposed())remove(registry.invalidRawDatas,b);else try{b.validateRawData()}catch(ut){remove(registry.invalidRawDatas,b),b.raiseCriticalError(ut)}}for(;registry.invalidDataItems.length>0;){var b=registry.invalidDataItems[0],j=b.dataProvider;if(!(b.isDisposed()||b.dataInvalid||j&&j.dataInvalid))try{b.validateDataItems()}catch(gt){remove(registry.invalidDataItems,b),b.raiseCriticalError(gt)}remove(registry.invalidDataItems,b)}for(;registry.invalidDataRange.length>0;){var b=registry.invalidDataRange[0],j=b.dataProvider;if(!(b.isDisposed()||b.dataInvalid||j&&j.dataInvalid))try{b.validateDataRange(),b.skipRangeEvent||b.dispatchImmediately("datarangechanged"),b.skipRangeEvent=!1}catch(gt){remove(registry.invalidDataRange,b),b.raiseCriticalError(gt)}remove(registry.invalidDataRange,b)}var $=[];each$1(registry.invalidLayouts,function(rt){o.validateLayouts(rt)}),each$1(registry.invalidPositions,function(rt){o.validatePositions(rt)});var _e=!1;if(a=Date.now(),each$1(registry.invalidSprites,function(rt,ut){for(var gt=0;ut.length>0;){if(o.validateLayouts(rt),o.validatePositions(rt),gt++,gt==5){if(Date.now()-a>o.updateStepDuration)break;gt=0}var yt=ut[ut.length-1];if(yt&&!yt.isDisposed()){if(!yt._systemCheckIfValidate())$.push(yt);else if(!o.checkIfValidate2(yt))$.push(yt);else try{yt._systemUpdate($)}catch(wt){yt.invalid=!1,remove(ut,yt),yt.raiseCriticalError(wt)}yt.invalid=!1}remove(ut,yt)}registry.invalidSprites[rt]=registry.invalidSprites[rt].concat($)}),each$1(registry.invalidSprites,function(rt,ut){ut.length>0&&(_e=!0)}),each$1(registry.invalidDatas,function(rt,ut){ut.length>0&&(_e=!0)}),each$2(copy$3(this.animations),function(rt){rt.update()}),each$1(registry.invalidLayouts,function(rt){o.validateLayouts(rt)}),each$1(registry.invalidPositions,function(rt){o.validatePositions(rt)}),triggerIdle(),each$1(registry.invalidLayouts,function(rt){o.validateLayouts(rt)}),each$1(registry.invalidPositions,function(rt){o.validatePositions(rt)}),registry.dispatchImmediately("exitframe"),(_e||this.animations.length>0||c.length>0)&&this.requestFrame(),this.updateStepDuration<200){var st=!0;each$1(registry.invalidDatas,function(rt,ut){ut.length>0&&(st=!1)}),each$1(registry.invalidSprites,function(rt,ut){ut.length>0&&(st=!1)}),st&&(this.updateStepDuration=200)}}},e.prototype.checkIfValidate2=function(o){return!(o.dataItem&&o.dataItem.component&&o.dataItem.component.dataInvalid&&!o.dataItem.component.isTemplate)},e.prototype.requestFrame=function(){var o=this;this._frameRequested||(raf(function(){o.update()}),this._frameRequested=!0)},e.prototype.softInvalidate=function(o){var a=this;o.children.each(function(c){c instanceof Container&&a.softInvalidate(c),c.measureFailed&&(is(c,"Label")?c.hardInvalidate():c.invalidate(),c.measureFailed=!1)})},e.prototype.validatePositions=function(o){for(var a=registry.invalidPositions[o];a.length>0;){var c=a[a.length-1];if(c.isDisposed())remove(a,c);else try{c._systemValidatePositions()}catch(d){c.positionInvalid=!1,remove(a,c),c.raiseCriticalError(d)}}},e.prototype.validateLayouts=function(o){for(var a=registry.invalidLayouts[o];a.length>0;){var c=a[a.length-1];if(c.isDisposed())remove(a,c);else try{c.children.each(function(d){d._systemValidateLayouts()}),c.validateLayout()}catch(d){c.layoutInvalid=!1,remove(a,c),c.raiseCriticalError(d)}}},e.prototype.log=function(o){log(o)},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},set:function(o){this._isPaused=o,o||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),e.VERSION="4.10.38",e}(),system=new System,DataParser=function(){function e(){}return e.prototype.parse=function(o){return[]},Object.defineProperty(e.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),e.prototype.maybeToNumber=function(o,a){return this.options.numberFields.indexOf(o)!==-1?anyToNumber(a):a},Object.defineProperty(e.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),e.prototype.maybeToDate=function(o,a){return this.options.dateFields.indexOf(o)!==-1?this.options.dateFormatter.parse(a,this.dateFormat):a},e.prototype.maybeToEmpty=function(o){return(!hasValue(o)||o=="")&&hasValue(this.options.emptyAs)?this.options.emptyAs:o},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new DateFormatter,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),e}(),separators=[",",";","	"],CSVParser=function(e){__extends(o,e);function o(){var a=e!==null&&e.apply(this,arguments)||this;return a.contentType="text/csv",a.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},a}return o.isCSV=function(a){return!!o.getDelimiterFromData(a)},o.getDelimiterFromData=function(a){var c=a.split(`
`),d=c.length,g;return each$2(separators,function(b){for(var j=0,$=0,_e=0;_e<d;++_e)if(j=c[_e].split(b).length,j>1){if($===0)$=j;else if(j!=$){$=0;break}}else{$=0;break}$&&(g=b)}),g},o.prototype.parse=function(a){this.options.delimiter||(this.options.delimiter=o.getDelimiterFromData(a));var c=this.CSVToArray(a,this.options.delimiter),d=hasValue(this.options.emptyAs),g=this.parsableNumbers,b=this.parsableDates,j=[],$=[],_e,st;for(st=0;st<this.options.skipRows;st++)c.shift();if(this.options.useColumnNames){$=c.shift();for(var rt=0;rt<$.length;rt++)_e=hasValue($[rt])?$[rt].replace(/^\s+|\s+$/gm,""):"",_e===""&&(_e="col"+rt),$[rt]=_e}for(var ut;ut=this.options.reverse?c.pop():c.shift(),!!ut;)if(!(this.options.skipEmpty&&ut.length===1&&ut[0]==="")){var gt={};for(st=0;st<ut.length;st++)_e=$[st]===void 0?"col"+st:$[st],gt[_e]=ut[st]===""?this.options.emptyAs:ut[st],d&&(gt[_e]=this.maybeToEmpty(gt[_e])),g&&(gt[_e]=this.maybeToNumber(_e,gt[_e])),b&&(gt[_e]=this.maybeToDate(_e,gt[_e]));j.push(gt)}return j},o.prototype.CSVToArray=function(a,c){c=c||",";for(var d=new RegExp("(\\"+c+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+c+"\\r\\n]*))","gi"),g=[[]],b=null;b=d.exec(a),!!b;){var j=b[1];j.length&&j!==c&&g.push([]);var $=void 0;b[2]?$=b[2].replace(new RegExp('""',"g"),'"'):$=b[3],g[g.length-1].push($)}return g},o}(DataParser),JSONParser=function(e){__extends(o,e);function o(){var a=e!==null&&e.apply(this,arguments)||this;return a.contentType="application/json",a.options={},a}return o.isJSON=function(a){try{return JSON.parse(a),!0}catch{return!1}},o.prototype.parse=function(a){var c=this,d;try{hasValue(JSON)&&(d=JSON.parse(a))}catch{return}var g=hasValue(this.options.emptyAs),b=this.parsableNumbers,j=this.parsableDates;if(Array.isArray(d)&&(b||j||g))for(var $=function(rt,ut){var gt=d[rt];each$1(gt,function(yt,wt){g&&(gt[yt]=c.maybeToEmpty(gt[yt])),b&&(gt[yt]=c.maybeToNumber(yt,gt[yt])),j&&(gt[yt]=c.maybeToDate(yt,gt[yt]))})},_e=0,st=d.length;_e<st;_e++)$(_e,st);return d},o}(DataParser),DataLoader=function(){function e(){this.adapter=new Adapter(this)}return e.prototype.load=function(o){var a=Array.isArray(o)?o:[o],c=map$1(a,function(d){return d.dispatchImmediately("started"),d.dispatchImmediately("loadstarted"),load(d.url,d,d.requestOptions)});Promise.all(c).then(function(d){each$2(d,function(g){var b=g.target;b.dispatchImmediately("loadended"),g.error?b.events.isEnabled("error")&&b.events.dispatchImmediately("error",{type:"error",code:g.xhr.status,message:b.language.translate("Unable to load file: %1",null,b.url),target:b}):b.processData(g.response,g.type),b.dispatchImmediately("ended")})}).catch(function(d){d.target&&(d.target.dispatchImmediately("loadended"),d.target.events.isEnabled("error")&&d.target.events.dispatchImmediately("error",{type:"error",code:d.xhr.status,message:d.target.language.translate("Unable to load file: %1",null,d.target.url),target:d.target}),d.target.dispatchImmediately("ended"))})},e.prototype.getParserByType=function(o){var a=this.adapter.apply("getParserByType",{parser:null,type:o}).parser;if(a)return a;if(o=="csv"||o=="text/csv"||o=="application/vnd.ms-excel")return new CSVParser;if(o=="json"||o=="application/json")return new JSONParser},e.prototype.getParserByData=function(o,a){var c=this.adapter.apply("getParserByData",{parser:null,data:o,type:a}).parser;if(!c){if(c=this.getParserByType(a),c)return c;if(JSONParser.isJSON(o))return this.getParserByType("json");if(CSVParser.isCSV(o))return this.getParserByType("csv")}return c},e}(),dataLoader=new DataLoader,DataSource=function(e){__extends(o,e);function o(a,c){var d=e.call(this)||this;return d.adapter=new Adapter(d),d._requestOptions={},d._incremental=!1,d._incrementalParams={},d._keepCount=!1,d._updateCurrentData=!1,d.showPreloader=!0,d.className="DataSource",a&&(d.url=a),c&&(typeof c=="string"?d.parser=dataLoader.getParserByType(c):d.parser=c),d}return o.prototype.processData=function(a,c){if(this.dispatchImmediately("parsestarted"),!this.parser&&(this.parser=dataLoader.getParserByData(a,c),!this.parser)){if(this.events.isEnabled("parseerror")){var d={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",d)}this.dispatchImmediately("parseended");return}if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",a))),!hasValue(this.data)&&this.events.isEnabled("parseerror")){var g={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",g)}this.dispatchImmediately("parseended"),hasValue(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date},Object.defineProperty(o.prototype,"url",{get:function(){var a=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(a=this.addUrlParams(a,this.incrementalParams)),this.adapter.apply("url",a)},set:function(a){this._url=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(a){this._requestOptions=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"parser",{get:function(){return this._parser||(this._parser=new JSONParser),this.adapter.apply("parser",this._parser)},set:function(a){this._parser=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(a){var c=this;this._reloadFrequency!=a&&(this._reloadFrequency=a,a?hasValue(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",function(d){c._reloadTimeout=setTimeout(function(){c.load()},c.reloadFrequency)})):hasValue(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(a){this._incremental=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(a){this._incrementalParams=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(a){this._keepCount=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(a){this._updateCurrentData=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new Language,this.language)},set:function(a){this._language=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new DateFormatter,this.dateFormatter)},set:function(a){this._dateFormatter=a},enumerable:!0,configurable:!0}),o.prototype.timestampUrl=function(a){var c=new Date().getTime().toString(),d={};return d[c]="",this.addUrlParams(a,d)},o.prototype.dispose=function(){e.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),hasValue(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},o.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),dataLoader.load(this))},o.prototype.addUrlParams=function(a,c){var d=a.match(/\?/)?"&":"?",g=[];return each$1(c,function(b,j){j!=""?g.push(b+"="+encodeURIComponent(j)):g.push(b)}),g.length?a+d+g.join("&"):a},o.prototype.processConfig=function(a){registry.registeredClasses.json=JSONParser,registry.registeredClasses.JSONParser=JSONParser,registry.registeredClasses.csv=CSVParser,registry.registeredClasses.CSVParser=CSVParser,e.prototype.processConfig.call(this,a)},o}(BaseObjectEvents),Responsive=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._rules=new List,a._appliedRules={},a._appliedTargets=[],a._useDefault=!0,a.adapter=new Adapter(a),a._enabled=!1,a._responsiveDisposers=[],a._noStates=[],a.className="Responsive",a.rules.events.on("inserted",function(){a.checkRules()},!0),a.rules.events.on("removed",function(){a.checkRules()},!0),a._disposers.push(a.rules.events),a.applyTheme(),a}return Object.defineProperty(o.prototype,"component",{get:function(){return this._component},set:function(a){var c=this;a!=this._component&&(this.disposeResponsiveHandlers(),this._component=a,this._responsiveDisposers.push(getValue(this.component).events.on("sizechanged",function(){c.checkRules()},this)),this._responsiveDisposers.push(getValue(this.component).events.once("datavalidated",function(){c._component.isReady()&&c.checkRules(!0)},this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(a){this._enabled!=a&&(this._enabled=a,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(a){this._useDefault!=a&&(this._useDefault=a,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(a){this._rules=a,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",defaultRules)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"allRules",{get:function(){var a=new List;return this.useDefault&&a.copyFrom(this.defaultRules),a.copyFrom(this.rules),this.adapter.apply("allRules",a)},enumerable:!0,configurable:!0}),o.prototype.isApplied=function(a){var c=this._appliedRules[a];return hasValue(c)?c:!1},o.prototype.checkRules=function(a){var c=this;a===void 0&&(a=!1);var d=this.allRules;if(!(!d||d.length==0)){var g=!1,b=getValue(this.component);if(!(b.pixelWidth==0||b.pixelHeight==0)&&(each(d.iterator(),function(j){j.id||(j.id=registry.getUniqueId());var $=j.relevant(b);($&&!c.isApplied(j.id)||!$&&c.isApplied(j.id))&&(g=!0),c._appliedRules[j.id]=$}),a&&(g=!0),g)){if(!this.component.isReady()){b.hidden=!0,b.events.once("ready",function(j){j.target.show(0),c._applyRules()});return}this.dispatchImmediately("ruleschanged"),this._applyRules()}}},o.prototype._applyRules=function(){var a=this;this._timeout&&this._timeout.dispose(),this._timeout=this.setTimeout(function(){a.applyRules()},10)},o.prototype.applyRules=function(a){var c=this,d=hasValue(a)?a:getValue(this.component),g=!1;if(this.enabled){var b=!1;each(this.allRules.iterator(),function(j){var $=c.getState(j,d);$&&(g||(indexOf(c._appliedTargets,d.uid)!==-1&&d.setState(c.getDefaultState(d),0),g=!0),c.isApplied(getValue(j.id))&&($.transitionDuration=0,c.setTargetState(d,$),c.dispatchImmediately("ruleapplied",{rule:j}),b=!0))}),b?replace(this._appliedTargets,d.uid):remove(this._appliedTargets,d.uid)}d.children&&each(d.children.iterator(),function(j){c.applyRules(j)})},o.prototype.getState=function(a,c){var d="responsive-"+a.id,g=c.uid+"_"+d;if(indexOf(this._noStates,g)===-1){if(c.states.hasKey(d))return c.states.getKey(d);var b=a.state(c,d);return b||this._noStates.push(g),b}},o.prototype.getDefaultState=function(a){return a.states.hasKey("responsive-default")?a.states.getKey("responsive-default"):a.states.create("responsive-default")},o.prototype.setTargetState=function(a,c){var d=this,g=this.getDefaultState(a);each$1(c.properties,function(b,j){hasValue(g.properties[b])||(g.properties[b]=d.getValue(a,b))}),a.setState(c)},o.prototype.getValue=function(a,c){var d=a.getPropertyValue(c);return!hasValue(d)&&hasValue(a[c])&&(d=a[c]),d},o.prototype.dispose=function(){this.disposeResponsiveHandlers(),e.prototype.dispose.call(this)},o.prototype.disposeResponsiveHandlers=function(){for(var a=this._responsiveDisposers.pop();a;)a.dispose(),a=this._responsiveDisposers.pop()},o}(BaseObjectEvents),defaultRules=new List;defaultRules.events.on("inserted",function(e){e.newValue.id=registry.getUniqueId()});var ResponsiveBreakpoints=function(){function e(){}return e.widthXXS=function(o){return o.pixelWidth<=e.XXS},e.widthXS=function(o){return o.pixelWidth<=e.XS},e.widthS=function(o){return o.pixelWidth<=e.S},e.widthM=function(o){return o.pixelWidth<=e.M},e.widthL=function(o){return o.pixelWidth<=e.L},e.widthXL=function(o){return o.pixelWidth<=e.XL},e.widthXXL=function(o){return o.pixelWidth<=e.XXL},e.heightXXS=function(o){return o.pixelHeight<=e.XXS},e.heightXS=function(o){return o.pixelHeight<=e.XS},e.heightS=function(o){return o.pixelHeight<=e.S},e.heightM=function(o){return o.pixelHeight<=e.M},e.heightL=function(o){return o.pixelHeight<=e.L},e.heightXL=function(o){return o.pixelHeight<=e.XL},e.heightXXL=function(o){return o.pixelHeight<=e.XXL},e.isXXS=function(o){return o.pixelWidth<=e.XXS&&o.pixelHeight<=e.XXS},e.isXS=function(o){return o.pixelWidth<=e.XS&&o.pixelHeight<=e.XS},e.isS=function(o){return o.pixelWidth<=e.S&&o.pixelHeight<=e.S},e.isM=function(o){return o.pixelWidth<=e.M&&o.pixelHeight<=e.M},e.isL=function(o){return o.pixelWidth<=e.L&&o.pixelHeight<=e.L},e.isXL=function(o){return o.pixelWidth<=e.XL&&o.pixelHeight<=e.XL},e.isXXL=function(o){return o.pixelWidth<=e.XXL&&o.pixelHeight<=e.XXL},e.maybeXXS=function(o){return o.pixelWidth<=e.XXS||o.pixelHeight<=e.XXS},e.maybeXS=function(o){return o.pixelWidth<=e.XS||o.pixelHeight<=e.XS},e.maybeS=function(o){return o.pixelWidth<=e.S||o.pixelHeight<=e.S},e.maybeM=function(o){return o.pixelWidth<=e.M||o.pixelHeight<=e.M},e.maybeL=function(o){return o.pixelWidth<=e.L||o.pixelHeight<=e.L},e.maybeXL=function(o){return o.pixelWidth<=e.XL||o.pixelHeight<=e.XL},e.maybeXXL=function(o){return o.pixelWidth<=e.XXL||o.pixelHeight<=e.XXL},e.XXS=100,e.XS=200,e.S=300,e.M=400,e.L=600,e.XL=800,e.XXL=1e3,e}(),DataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._disabled=!1,a.hasProperties=!1,a.values={},a.categories={},a.dates={},a.locations={},a.workingLocations={},a.properties={},a.sprites=[],a.isTemplate=!1,a._index=null,a._visible=!0,a._hidden=!1,a._ignoreMinMax=!1,a.hasChildren={},a.isHiding=!1,a._valueAnimations={},a._locationAnimations={},a.className="DataItem",a.applyTheme(),a}return Object.defineProperty(o.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Adapter(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"index",{get:function(){return this.component&&this._index!=null?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visible",{get:function(){return this._hidden?!1:this._visible},set:function(a){a&&(this.hidden=!1),this._visible!=a&&this.setVisibility(a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hidden",{get:function(){return this._hidden},set:function(a){this._hidden!=a&&(this._hidden=a,a?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"__disabled",{get:function(){return this._disabled},set:function(a){this._disabled=a,each$2(this.sprites,function(c){c.__disabled=a})},enumerable:!0,configurable:!0}),o.prototype.setVisibility=function(a,c){if(each$2(this.sprites,function(g){a?g.visible=g.defaultState.properties.visible:g.hiddenState?g.visible=g.hiddenState.properties.visible:g.visible=!1}),this._visible=a,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")){var d={type:"visibilitychanged",target:this,visible:a};this.events.dispatchImmediately("visibilitychanged",d)}},o.prototype.show=function(a,c,d){var g=this;if(!this.hidden){this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer);var b;return d&&each$2(d,function(j){b=g.setWorkingValue(j,g.values[j].value,a,c)}),each$2(this.sprites,function(j){var $=j.show(a);$!=null&&!$.isFinished()&&(g._disposers.push($),c!=null&&c>0&&$.delay(c))}),b}},o.prototype.dispose=function(){e.prototype.dispose.call(this),each$2(this.sprites,function(a){a.dispose()}),this.sprites=[]},o.prototype.hide=function(a,c,d,g){var b=this;if(this.isHiding=!0,each$2(this.sprites,function($){var _e=$.hide(a);_e!=null&&!_e.isFinished()&&(b._disposers.push(_e),c!=null&&c>0&&_e.delay(c))}),isNumber$1(d)&&g){var j;if(each$2(g,function($){var _e=b.setWorkingValue($,d,a,c);_e&&(j=_e)}),j&&!j.isFinished())return this._hideDisposer=j.events.on("animationended",function(){b.setVisibility(!1,!0),b.isHiding=!1}),this._disposers.push(this._hideDisposer),j;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},o.prototype.getDuration=function(a){if(!isNumber$1(a)){var c=this.component;c&&(a=c.interpolationDuration)}if(a!=null)return this._adapterO?this._adapterO.apply("duration",a):a},o.prototype.getValue=function(a,c){if(a&&this.component){c||(c=this.component.dataFields[a+"Show"],c||(c="value"));var d=this.values[a][c];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:d,field:a}).value:d}},o.prototype.getWorkingValue=function(a){if(a&&this.component){var c=this.component.dataFields[a+"Show"];return c||(c="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[a][c],field:a}).workingValue:this.values[a][c]}},o.prototype.getActualWorkingValue=function(a){return this.values[a].workingValue},o.prototype.setValue=function(a,c,d,g){var b=this.values[a].value,j=this.getDuration(d);if(c=toNumber(c),b!==c){if(this.values[a].value=c,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")){var $={type:"valuechanged",target:this,property:a};this.events.dispatchImmediately("valuechanged",$)}this.component&&this.component.handleDataItemValueChange(this,a)}this.setWorkingValue(a,c,j,g)},o.prototype.setCalculatedValue=function(a,c,d){var g=this.values[a][d];if(g!==c&&isNumber$1(c)){if(this.values[a][d]=c,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")){var b={type:"calculatedvaluechanged",target:this,property:a};this.events.dispatchImmediately("calculatedvaluechanged",b)}this.component&&this.component.handleDataItemCalculatedValueChange(this,a)}},o.prototype.setWorkingValue=function(a,c,d,g){if(isNumber$1(this.values[a].value)){var b=this.getDuration(d),j=this.values[a].workingValue;if(b!=null&&b>0&&isNumber$1(j)&&this.component)if(j!=c){var $=this.animate({childObject:this.values[a],property:"workingValue",from:j,to:c,dummyData:a},b,this.component.interpolationEasing);return g!=null&&$.delay(g),$.events.on("animationstarted",this.handleInterpolationProgress,this),$.events.on("animationprogress",this.handleInterpolationProgress,this),$.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[a]=$,$}else{var _e=this._valueAnimations[a];_e&&_e.stop(),this.values[a].workingValue=c}else{var _e=this._valueAnimations[a];if(_e&&_e.stop(),this.values[a].workingValue=c,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var st={type:"workingvaluechanged",target:this,property:a};this.events.dispatchImmediately("workingvaluechanged",st)}this.component&&this.component.handleDataItemWorkingValueChange(this,a)}}},o.prototype.setLocation=function(a,c,d,g){var b=this.locations[a];if(b!==c){if(this.locations[a]=c,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")){var j={type:"locationchanged",target:this,property:a};this.events.dispatchImmediately("locationchanged",j)}this.component&&this.component.handleDataItemValueChange(this,a),this.setWorkingLocation(a,c,d,g)}},o.prototype.setWorkingLocation=function(a,c,d,g){var b=this.getDuration(d),j=this.workingLocations[a];if(b!=null&&b>0&&isNumber$1(j)&&this.component)if(j!=c){var $=this.animate({childObject:this.workingLocations,property:a,from:j,to:c,dummyData:a},b,this.component.interpolationEasing);return g!=null&&$.delay(g),$.events.on("animationstarted",this.handleInterpolationProgress,this),$.events.on("animationprogress",this.handleInterpolationProgress,this),$.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[a]=$,$}else{var _e=this._locationAnimations[a];_e&&_e.stop(),this.workingLocations[a]=c}else{var _e=this._locationAnimations[a];if(_e&&_e.stop(),this.workingLocations[a]=c,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")){var st={type:"workinglocationchanged",target:this,property:a};this.events.dispatchImmediately("workinglocationchanged",st)}this.component&&this.component.handleDataItemWorkingLocationChange(this,a)}},o.prototype.setDate=function(a,c,d){!isDate$1(c)&&this.component&&(c=this.component.dateFormatter.parse(c));var g=this.dates[a];g!==c&&(this.dates[a]=c,this.setValue(a,c.getTime(),d))},o.prototype.getDate=function(a){return this._adapterO?this._adapterO.apply("date",{date:this.dates[a],field:a}).date:this.dates[a]},o.prototype.setProperty=function(a,c){if(this.properties[a]!==c){if(this.hasProperties=!0,this.properties[a]=c,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var d={type:"propertychanged",target:this,property:a,value:c};this.events.dispatchImmediately("propertychanged",d)}this.component&&this.component.handleDataItemPropertyChange(this,a)}},o.prototype.setCategory=function(a,c){isString$1(c)||(c=castString(c)),this.categories[a]!==c&&(this.categories[a]=c)},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),a.dataContext&&(this.dataContext=copy$1(a.dataContext,{})),copyProperties(a.locations,this.locations),a._adapterO&&this.adapter.copyFrom(a._adapterO),this.component=a.component},Object.defineProperty(o.prototype,"opacity",{set:function(a){each$2(this.sprites,function(c){c.opacity=a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(a){if(this._ignoreMinMax=a,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var c={type:"propertychanged",target:this,property:"ignoreMinMax",value:a};this.events.dispatchImmediately("propertychanged",c)}this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),o.prototype.animate=function(a,c,d){return new Animation(this,a,c,d).start()},o.prototype.handleInterpolationProgress=function(a){var c=a.target,d=c.animationOptions[0];if(d){if(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var g={type:"workingvaluechanged",target:this,property:d.dummyData};this.events.dispatchImmediately("workingvaluechanged",g)}this.component&&this.component.handleDataItemWorkingValueChange(this,d.dummyData)}},o.prototype.hasValue=function(a){for(var c=0,d=a.length;c<d;c++){var g=this.values[a[c]];if(!g||!hasValue(g.value))return!1}return!0},Object.defineProperty(o.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataContext",{get:function(){return this._dataContext},set:function(a){this._dataContext=a},enumerable:!0,configurable:!0}),o.prototype.addSprite=function(a){a.dataItem&&a.dataItem!=this&&remove(a.dataItem.sprites,a),this.visible||a.hide(0),this.isHiding&&a.hide(),this.sprites.push(a),a.dataItem=this},o}(BaseObjectEvents),Component=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.dataFields={},a._dataSources={},a._parseDataFrom=0,a._dataDisposers=[],a._currentDataSetId="",a._start=0,a._end=1,a.skipRangeEvent=!1,a.rangeChangeDuration=0,a.rangeChangeEasing=cubicOut,a.parsingStepDuration=50,a.dataInvalid=!1,a.rawDataInvalid=!1,a.dataRangeInvalid=!1,a.dataItemsInvalid=!1,a.interpolationDuration=0,a.interpolationEasing=cubicOut,a.sequencedInterpolation=!0,a.sequencedInterpolationDelay=0,a.dataValidationProgress=0,a._addAllDataItems=!0,a._usesData=!0,a.className="Component",a.minZoomCount=1,a.maxZoomCount=0,a._dataItems=new OrderedListTemplate(a.createDataItem()),a._dataItems.events.on("inserted",a.handleDataItemAdded,a,!1),a._dataItems.events.on("removed",a.handleDataItemRemoved,a,!1),a._disposers.push(new ListDisposer(a._dataItems)),a._disposers.push(a._dataItems.template),a.invalidateData(),a.dataUsers.events.on("inserted",a.handleDataUserAdded,a,!1),a._disposers.push(new MultiDisposer(a._dataDisposers)),a._start=0,a._end=1,a.maxZoomDeclination=1,a.applyTheme(),a}return o.prototype.createDataItem=function(){return new DataItem},o.prototype.handleDataUserAdded=function(a){var c=a.newValue;c.dataProvider=this},o.prototype.handleDataItemValueChange=function(a,c){this.dataItemsInvalid||this.invalidateDataItems()},o.prototype.handleDataItemWorkingValueChange=function(a,c){},o.prototype.handleDataItemWorkingLocationChange=function(a,c){},o.prototype.handleDataItemCalculatedValueChange=function(a,c){},o.prototype.handleDataItemPropertyChange=function(a,c){},o.prototype.processDataItem=function(a,c){var d=this;if(a){c||(c={}),a.dataContext=c;var g=!1;each$1(this.dataFields,function(b,j){var $=b,_e=c[j];if(d._adapterO&&d._adapterO.isEnabled("dataContextValue")&&(_e=d._adapterO.apply("dataContextValue",{field:$,value:_e,dataItem:a}).value),hasValue(_e))if(g=!0,a.hasChildren[$]){var st=d.createDataItem();st.copyFrom(d.mainDataSet.template);var rt=new OrderedListTemplate(st);rt.events.on("inserted",d.handleDataItemAdded,d,!1),rt.events.on("removed",d.handleDataItemRemoved,d,!1),d._dataDisposers.push(new ListDisposer(rt));for(var ut=_e.length,gt=0;gt<ut;gt++){var yt=_e[gt],wt=rt.create();wt.parent=a,d.processDataItem(wt,yt)}var Ct=a;Ct[$]=rt}else a[$]=_e}),each$1(this.propertyFields,function(b,j){var $=b,_e=c[j];hasValue(_e)&&(g=!0,a.setProperty($,_e))}),!this._addAllDataItems&&!g&&this.mainDataSet.remove(a)}},o.prototype.updateDataItem=function(a){var c=this;if(a){var d=a.dataContext;each$1(this.dataFields,function(g,b){var j=g,$=d[b];if(c._adapterO&&($=c._adapterO.apply("dataContextValue",{field:j,value:$,dataItem:a}).value),hasValue($))if(a.hasChildren[j]){var _e=a,st=_e[j];st.each(function(rt){c.updateDataItem(rt)})}else a[j]=$}),each$1(this.propertyFields,function(g,b){var j=g,$=d[b];hasValue($)&&a.setProperty(j,$)})}},o.prototype.validateDataElements=function(){for(var a=this.endIndex,c=this.startIndex;c<a;c++){var d=this.dataItems.getIndex(c);d&&this.validateDataElement(d)}},o.prototype.validate=function(){this.validateDataElements(),e.prototype.validate.call(this)},o.prototype.validateDataElement=function(a){},o.prototype.addData=function(a,c,d){var g=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),d||(a instanceof Array?each$2(a,function(b){g.data.push(b)}):this.data.push(a)),this.inited)this.removeData(c,d);else if(isNumber$1(c))for(;c>0;)this.data.shift(),c--;this.invalidateData()},o.prototype.removeData=function(a,c){if(isNumber$1(a)&&a>0){for(;a>0;){var d=this.mainDataSet.getIndex(0);d&&this.mainDataSet.remove(d),this.dataUsers.each(function(g){if(!g.data||g.data.length==0){var b=g.mainDataSet.getIndex(0);b&&g.mainDataSet.remove(b)}}),c||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,a--}this.invalidateDataItems()}},o.prototype.invalidateData=function(){this.disabled||this.isTemplate||(registry.addToInvalidComponents(this),system.requestFrame(),this.dataInvalid=!0,each(this.dataUsers.iterator(),function(a){a.invalidateDataItems()}))},o.prototype.invalidateDataUsers=function(){each(this.dataUsers.iterator(),function(a){a.invalidate()})},o.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(move(registry.invalidDataItems,this),system.requestFrame(),this.dataItemsInvalid=!0,each(this.dataUsers.iterator(),function(a){a.invalidateDataItems()}))},o.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,move(registry.invalidDataRange,this),system.requestFrame())},o.prototype.validateDataRange=function(){remove(registry.invalidDataRange,this),this.dataRangeInvalid=!1,(this.startIndex!=this._prevStartIndex||this.endIndex!=this._prevEndIndex)&&(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},o.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},o.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},o.prototype.appendDataItems=function(){for(var a=this.endIndex,c=this.startIndex;c<a;c++){var d=this.dataItems.getIndex(c);d&&(d.__disabled=!1)}for(var c=0;c<this.startIndex;c++){var d=this.dataItems.getIndex(c);d&&(d.__disabled=!0)}for(var c=this.endIndex;c<this.dataItems.length;c++){var d=this.dataItems.getIndex(c);d&&(d.__disabled=!0)}},o.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(move(registry.invalidRawDatas,this),system.requestFrame(),this.rawDataInvalid=!0,each(this.dataUsers.iterator(),function(a){a.invalidateRawData()}))},o.prototype.validateRawData=function(){var a=this;remove(registry.invalidRawDatas,this),each(this.mainDataSet.iterator(),function(c){c&&a.updateDataItem(c)})},o.prototype.dispose=function(){var a=this;this.mainDataSet.template.clones.clear(),each$1(this._dataSources,function(c,d){a.removeDispose(d)}),this.disposeData(),e.prototype.dispose.call(this)},o.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),each$2(this._dataDisposers,function(a){a.dispose()}),each(this.dataUsers.iterator(),function(a){a.disposeData()}),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},o.prototype.getDataItem=function(a){return this.mainDataSet.create()},o.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,registry.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem){var a=this.dataItem.dataContext;this._data=a[this.dataFields.data]}if(this._parseDataFrom===0&&this.data.length>0&&this.disposeData(),this.data.length>0){var c=this.preloader;each(this.dataUsers.iterator(),function(rt){rt._startIndex=void 0,rt._endIndex=void 0});var d=0,g=Date.now(),b=this._parseDataFrom,j=this.data.length,$=function(){var rt=_e.data[b];if(_e._usesData){var ut=_e.getDataItem(rt);_e.processDataItem(ut,rt)}if(_e.dataUsers.each(function(yt){if(yt.data.length==0){var wt=yt.getDataItem(rt);yt.processDataItem(wt,rt)}}),d++,d==100){d=0;var gt=Date.now()-g;if(gt>_e.parsingStepDuration&&b<_e.data.length-10)return _e._parseDataFrom=b+1,c&&(b/_e.data.length>.5&&!c.visible||(c.progress=b/_e.data.length)),_e.dataValidationProgress=b/_e.data.length,b=_e.data.length,_e.invalidateData(),{value:void 0}}},_e=this;for(b;b<j;b++){var st=$();if(typeof st=="object")return st.value}c&&(c.progress=1),this.dataUsers.each(function(rt){(rt.hidden||rt.appeared&&!rt.visible&&rt.stacked)&&rt.hide(0)})}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},o.prototype.validateDataItems=function(){remove(registry.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(o.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(a){this.setData(a)},enumerable:!0,configurable:!0}),o.prototype.setData=function(a){this.isDisposed()||(this._parseDataFrom=0,this.disposeData(),this._data=a,a&&a.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated")))},o.prototype.getDataSource=function(a){var c=this;return hasValue(this._dataSources[a])||(this._dataSources[a]=new DataSource,this._dataSources[a].component=this,this.setDataSourceEvents(this._dataSources[a],a),this._dataSources[a].adapter.add("dateFields",function(d){return c.dataSourceDateFields(d)}),this._dataSources[a].adapter.add("numberFields",function(d){return c.dataSourceNumberFields(d)}),this.events.on("inited",function(){c.loadData(a)},this,!1)),this._dataSources[a]},Object.defineProperty(o.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(a){var c=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=a,this._dataSources.data.component=this,this.events.on("inited",function(){c.loadData("data")},this,!1),this.setDataSourceEvents(a,"data")},enumerable:!0,configurable:!0}),o.prototype.loadData=function(a){this._dataSources[a].load()},o.prototype.dataSourceDateFields=function(a){return a},o.prototype.dataSourceNumberFields=function(a){return a},o.prototype.populateDataSourceFields=function(a,c,d){return each$2(d,function(g){c[g]&&indexOf(a,c[g])===-1&&a.push(c[g])}),a},o.prototype.setDataSourceEvents=function(a,c){var d=this;a.events.on("started",function(g){var b=d.preloader;b&&(b.progress=0)},void 0,!1),a.events.on("loadstarted",function(g){var b=d.preloader;b&&(b.progress=.25)},void 0,!1),a.events.on("loadended",function(g){var b=d.preloader;b&&(b.progress=.5)},void 0,!1),a.events.on("parseended",function(g){var b=d.preloader;b&&(b.progress=.75)},void 0,!1),a.events.on("ended",function(g){var b=d.preloader;b&&(b.progress=1)},void 0,!1),a.events.on("error",function(g){var b=d.preloader;b&&(b.progress=1),d.openModal(g.message)},void 0,!1),c&&a.events.on("done",function(g){var b=d.preloader;b&&(b.progress=1),c=="data"&&!isArray$1(g.data)&&(g.data=[g.data]),a.incremental&&c=="data"&&d.data.length?d.addData(g.data,a.keepCount?g.data.length:0):a.updateCurrentData&&c=="data"&&d.data.length?(each$2(d.data,function(j,$){hasValue(g.data[$])&&each$1(j,function(_e,st){hasValue(g.data[$][_e])&&(j[_e]=g.data[$][_e])})}),d.invalidateRawData()):d[c]=g.data})},Object.defineProperty(o.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new Responsive,this._responsive.component=this),this._responsive},set:function(a){this._responsive=a,this._responsive.component=this},enumerable:!0,configurable:!0}),o.prototype.zoom=function(a,c,d,g){var b=this;c===void 0&&(c=!1),d===void 0&&(d=!1);var j=a.start,$=a.end,_e=a.priority;if(a.start==a.end&&(a.start=a.start-.5/this.maxZoomFactor,a.end=a.end+.5/this.maxZoomFactor),_e=="end"&&$==1&&j!=0&&j<this.start&&(_e="start"),_e=="start"&&j==0&&$>this.end&&(_e="end"),isNumber$1(g)||(g=this.maxZoomDeclination),!isNumber$1(j)||!isNumber$1($))return{start:this.start,end:this.end};if(this._finalStart!=j||this._finalEnd!=$){var st=this.maxZoomFactor/this.minZoomCount,rt=this.maxZoomFactor/this.maxZoomCount;if(_e=="start"?(this.maxZoomCount>0&&1/($-j)<rt&&($=j+1/rt),1/($-j)>st&&($=j+1/st),$>1&&$-j<1/st&&(j=$-1/st)):(this.maxZoomCount>0&&1/($-j)<rt&&(j=$-1/rt),1/($-j)>st&&(j<=0?$=j+1/st:j=$-1/st),j<0&&$-j<1/st&&($=j+1/st)),j<-g&&(j=-g),1/($-j)>st&&($=j+1/st),$>1+g&&($=1+g),1/($-j)>st&&(j=$-1/st),this._finalEnd=$,this._finalStart=j,this.skipRangeEvent=c,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!d){var ut=this.rangeChangeAnimation;if(ut&&ut.progress<1){var gt=ut.animationOptions;if(gt.length>1){if(gt[0].to==j&&gt[1].to==$)return{start:j,end:$};ut.isDisposed()||ut.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),ut=this.animate([{property:"start",to:j},{property:"end",to:$}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=ut,ut&&!ut.isFinished()?ut.events.on("animationended",function(){b.dispatchImmediately("rangechangeended")}):this.dispatchImmediately("rangechangeended")}else this.start=j,this.end=$,this.dispatch("rangechangeended")}return{start:j,end:$}},o.prototype.zoomToIndexes=function(a,c,d,g){if(!(!isNumber$1(a)||!isNumber$1(c))){var b=a/this.dataItems.length,j=c/this.dataItems.length;this.zoom({start:b,end:j},d,g)}},Object.defineProperty(o.prototype,"zoomFactor",{get:function(){return fitToRange(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(a){this.setPropertyValue("maxZoomFactor",a)&&(a==1&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(a){this.setPropertyValue("maxZoomDeclination",a)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startIndex",{get:function(){return isNumber$1(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(a){this._startIndex=fitToRange(Math.round(a),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),o.prototype.indexToPosition=function(a){return a/this.dataItems.length},Object.defineProperty(o.prototype,"endIndex",{get:function(){var a=this.dataItems.length;return(!isNumber$1(this._endIndex)||this._endIndex>a)&&(this._endIndex=a),this._endIndex},set:function(a){this._endIndex=fitToRange(Math.round(a),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(a){if(this._start!=a){this._start=a;var c=Math.max(0,Math.floor(this.dataItems.length*a)||0);this._startIndex=Math.min(c,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(a){this._end!=a&&(this._end=a,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*a)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),o.prototype.removeFromInvalids=function(){e.prototype.removeFromInvalids.call(this),registry.removeFromInvalidComponents(this),remove(registry.invalidDataItems,this),remove(registry.invalidDataRange,this),remove(registry.invalidRawDatas,this)},Object.defineProperty(o.prototype,"dataItems",{get:function(){if(this._currentDataSetId!=""){var a=this.dataSets.getKey(this._currentDataSetId);if(a)return a}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new Dictionary),this._dataSets},enumerable:!0,configurable:!0}),o.prototype.setDataSet=function(a){if(this._currentDataSetId!=a){var c=this.dataSets.getKey(a);if(c)return this.dataItems.each(function(d){d.__disabled=!0}),this._currentDataSetId=a,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(d){d.__disabled=!1}),!0;if(this._currentDataSetId!="")return this.dataItems.each(function(d){d.__disabled=!0}),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(d){d.__disabled=!1}),!0}return!1},Object.defineProperty(o.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),o.prototype._updateDataItemIndexes=function(a){for(var c=this.mainDataSet.values,d=c.length,g=a;g<d;++g)c[g]._index=g},o.prototype.handleDataItemAdded=function(a){a.newValue.component=this,this._updateDataItemIndexes(a.index),this.dataItemsInvalid||this.invalidateDataItems()},o.prototype.handleDataItemRemoved=function(a){this._updateDataItemIndexes(a.index),this.dataItemsInvalid||this.invalidateDataItems()},o.prototype.bindDataField=function(a,c){this.dataFields[a]=c,this.invalidateDataRange()},o.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},o.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(o.prototype,"dataUsers",{get:function(){var a=this;return this._dataUsers||(this._dataUsers=new List,this._disposers.push(new Disposer(function(){each(a._dataUsers.iterator(),function(c){c.dispose()})}))),this._dataUsers},enumerable:!0,configurable:!0}),o.prototype.clone=function(){var a=e.prototype.clone.call(this);return a.dataFields=copyProperties(this.dataFields,{}),a},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.data=a.data,this.sequencedInterpolation=a.sequencedInterpolation,this.sequencedInterpolationDelay=a.sequencedInterpolationDelay,this.interpolationDuration=a.interpolationDuration,this.interpolationEasing=a.interpolationEasing},o.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},o.prototype.getExporting=function(){var a=e.prototype.getExporting.call(this);return a.adapter.has("data",this._exportData,-1,this)||(a.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",function(c){a.handleDataUpdated()})),a},o.prototype._exportData=function(a){return a.data=this.data,a},o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return c&&this.invalidateData(),c},o.prototype.setShowOnInit=function(a){a!=this.getPropertyValue("showOnInit")&&(a&&!this.inited&&!this.hidden?(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2)):this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2)),e.prototype.setShowOnInit.call(this,a)},o.prototype.setBaseId=function(a){a!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,registry.removeFromInvalidComponents(this),this._baseId=a,this.invalidateData()),e.prototype.setBaseId.call(this,a)},Object.defineProperty(o.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(a){this.setPropertyValue("minZoomCount",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(a){this.setPropertyValue("maxZoomCount",a)},enumerable:!0,configurable:!0}),o.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},o.prototype.asFunction=function(a){return a=="interpolationEasing"||a=="rangeChangeEasing"||e.prototype.asIs.call(this,a)},o}(Container);registry.registeredClasses.Component=Component;var Label=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.isOversized=!1,a.className="Label",a.fill=new InterfaceColorSet().getFor("text"),a.wrap=!1,a.truncate=!1,a.fullWords=!0,a.ellipsis="…",a.textAlign="start",a.textValign="top",a.layout="absolute",a.baseLineRatio=-.27,a._positionPrecision=1,a.events.on("maxsizechanged",function(){a.inited&&a.handleMaxSize()},a,!1),a.events.once("validated",a.handleValidate,a,!1),a.applyTheme(),a}return o.prototype.afterDraw=function(){e.prototype.afterDraw.call(this),this.validatePosition()},o.prototype.setPaper=function(a){var c=e.prototype.setPaper.call(this,a);return c&&this.hardInvalidate(),c},o.prototype.handleValidate=function(){(this.currentText||this.text)&&(this.bbox.width==0||this.bbox.height==0)&&registry.events.once("exitframe",this.hardInvalidate,this)},o.prototype.handleMaxSize=function(){(this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized)&&this.invalidate()},o.prototype.arrange=function(){},o.prototype.updateCurrentText=function(){var a,c;isNotEmpty(this.html)&&this.paper.supportsForeignObject()?(a="html",c=this.html):(a="svg",c=this.text),isObject$1(c)&&(c=c.toString()),hasValue(c)&&c!==""&&(c=this.populateString(c,this.dataItem)),a=="html"?this._adapterO&&(c=this._adapterO.apply("htmlOutput",c)):this._adapterO&&(c=this._adapterO.apply("textOutput",c));var d=c!=this.currentText||a!=this._currentFormat;return this.currentText=c,this._currentFormat=a,d},o.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},o.prototype.getLineBBox=function(a){var c=a&&a.element,d=c&&c.node;d&&d.parentNode&&(a.bbox=c.getBBox())},o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.bbox.width,c=this.bbox.height,d=this.topParent;if(d&&(!d.maxWidth||!d.maxHeight)){d.events.once("maxsizechanged",this.hardInvalidate,this,!1);return}var g=max$1(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),b=max$1(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),j=b+","+g+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(!(!this.updateCurrentText()&&this.inited&&this._prevStatus==j)){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var $=this._currentFormat,_e=this.currentText;if(!hasValue(_e)||_e==""){this.element.attr({display:"none"});return}var st=_e.split(`
`);this._prevStatus=j,this.textAlign=this.textAlign;var rt=this.group.getAttr("display");if(rt=="none"&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),$==="svg"){this.element.removeAttr("display");var ut=this.element;this.resetBBox();for(var gt=0,yt="",wt=0;wt<st.length;wt++){var Ct=st[wt];if(Ct==""){var Pt=this.getSVGLineElement("",0);Pt.add(this.getSvgElement(".",getTextFormatter().translateStyleShortcuts(yt))),ut.add(Pt);var At=Math.ceil(Pt.getBBox().height);At>0&&(gt+=At),ut.removeElement(Pt);var Tt=this.getLineInfo(wt);Tt&&(Tt.text="",Tt.element.textContent="");continue}var kt=getTextFormatter().chunk(Ct,null,this.ignoreFormatting),It=0,Lt=!0,Ft=!1,Nt=this.getLineInfo(wt);Nt?(Nt.text="",Nt.element.textContent=""):(Nt={text:"",element:this.getSVGLineElement("",0),complex:!1},ut.add(Nt.element)),Nt.element.removeAttr("display"),Nt.element.removeChildren(),this.textPathElement&&Nt.element.add(this.textPathElement);for(var Ht=0;Ht<kt.length;Ht++){Ht&&(Nt.complex=!0);var dr=kt[Ht];if(dr.type==="format")yt=dr.text;else{if(Ft)continue;if(Nt.text=dr.text,Nt.style=getTextFormatter().translateStyleShortcuts(yt),this.textPathElement?this.getSvgElement(Nt.text,Nt.style,this.textPathElement):this.getSvgElement(Nt.text,Nt.style,Nt.element),this.getLineBBox(Nt),Nt.bbox.width=Math.ceil(Nt.bbox.width),It<Nt.bbox.height&&(It=Nt.bbox.height),(this.wrap||this.truncate)&&Nt.bbox.width>g){this.isOversized=!0;var hs=Nt.element.textContent,us=Nt.bbox.width/hs.length,hn=min$1(Math.ceil((Nt.bbox.width-g)/us),hs.length);if(this.truncate){var un=!1,bo=Nt.element.node;if(bo&&bo.childNodes)for(var _s=Nt.element.node.childNodes.length-1;_s>=0;_s--){var gn=Nt.element.node.childNodes[_s];if(un&&Nt.bbox.width<=g&&(gn.textContent+=" "+this.ellipsis,Nt.bbox=Nt.element.getBBox(),Nt.bbox.width=Math.floor(Nt.bbox.width),Nt.bbox.width<=g))break;un=!1;var Gr=gn.textContent;for(hs=Nt.element.textContent,hn=min$1(Math.ceil((Nt.bbox.width-g)/us),hs.length);Nt.bbox.width>g&&hn<=hs.length&&hn>0;){var ds=max$1(hs.length-hn-this.ellipsis.length,1);ds<=1&&(hn=0,_s>0&&(un=!0,Nt.element.node.removeChild(gn))),Gr=truncateWithEllipsis(Gr,ds,this.ellipsis,this.fullWords,this.rtl),Gr.length>ds&&this.fullWords&&(Gr=truncateWithEllipsis(Gr,ds,this.ellipsis,!1,this.rtl)),gn.textContent=Gr,Nt.bbox=Nt.element.getBBox(),Nt.bbox.width=Math.floor(Nt.bbox.width),hn=Math.ceil(hn*1.1)}Ft=!0}}else{var Zn=Nt.element.node;if(Zn){for(var Nn=Nt.element.node.lastChild,Qn=void 0;Nt.bbox.width>g&&hn<=hs.length&&hn>0;){var ds=max$1(dr.text.length-hn,1);if(Lt?Qn=splitTextByCharCount(dr.text,ds,!0,this.rtl):(Qn=splitTextByCharCount(dr.text,ds,!0,this.rtl,!1),(Qn[0].length>ds||ds===1)&&(Nt.element.node.removeChild(Nn),hn=0)),hn>0){var bu=Qn.shift();Lt&&(bu=trim$1(bu)),Nn.textContent=getTextFormatter().cleanUp(bu)}Nt.bbox=Nt.element.getBBox(),Nt.bbox.width=Math.floor(Nt.bbox.width),hn++}if(Qn.length>0){var ou="";hasValue(Qn)&&(this.rtl?ou+=Qn.join("")+yt:ou+=yt+Qn.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var g0=Ht+1;g0<kt.length;g0++)kt[g0].type=="value"?ou+=kt[g0].text.replace(/([\[\]]{1})/g,"$1$1"):ou+=kt[g0].text;st.splice(wt+1,0,ou)}Ft=!0}}}this.bbox.width<Nt.bbox.width&&(this.bbox.width=Nt.bbox.width),this.bbox.height=gt+It,this.textPathElement?Nt.element.attr({dy:-this.paddingBottom.toString()}):Nt.element.attr({x:"0",y:gt+It,dy:round$1(this.baseLineRatio*It,3).toString()}),Lt=!1}}var Su=Nt.element.node;if(Su){var Nn=Su.lastChild;Nn&&(Nn.textContent=this.rtl?ltrim(Nn.textContent):rtrim(Nn.textContent))}gt+=It,this.addLineInfo(Nt,wt)}this.maybeHideOversized(),this.measureFailed=!1,(this.bbox.width==0||this.bbox.height==0)&&(this.measureFailed=!0),this._measuredWidth=round$1(max$1(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=round$1(max$1(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,(c!=this._measuredHeight||a!=this._measuredWidth)&&this.dispatch("transformed"),this.hideUnused(st.length)}else{this.element.removeAttr("display"),this.resetBBox();var ut=this.element;ut.removeChildren(),this.setCache("lineInfo",[],0);var l1=this.paper.foreignObject();ut.add(l1),this.maxWidth&&l1.attr({width:this.maxWidth-this.pixelPaddingLeft-this.pixelPaddingRight}),this.maxHeight&&l1.attr({height:this.maxHeight-this.pixelPaddingTop-this.pixelPaddingBottom});var B0=this.getHTMLLineElement(_e);l1.node.appendChild(B0),B0.style.display="inline-block";var a1=B0.clientWidth,q1=B0.clientHeight;B0.style.display="block",this._bbox={x:0,y:0,width:a1,height:q1},l1.attr({width:a1+1,height:q1}),this.maybeHideOversized(),this._measuredWidth=max$1(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=max$1(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(B0.style.overflow="hidden"),(a1>g||q1>b)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),rt=="none"&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}},o.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},o.prototype.alignSVGText=function(){var a=this.element,c=a.node.children||a.node.childNodes;if(!(!c||c&&c.length==0)){var d=this._measuredWidth,g=this._measuredHeight;this.pixelPaddingLeft,this.pixelPaddingRight,this.pixelPaddingTop,this.pixelPaddingBottom,this.rtl?a.attr({direction:"rtl"}):a.removeAttr("direction");for(var b=c.length-1;b>=0;b--){var j=c[b];if(j.setAttribute("text-anchor",this.textAlign),this.textPathElement)j.removeAttribute("x"),j.removeAttribute("y");else{switch(this.textAlign){case"middle":j.setAttribute("x",(d/2).toString()+"px");break;case"end":this.rtl||j.setAttribute("x",d.toString());break;default:this.rtl?j.setAttribute("x",d.toString()):j.removeAttribute("text-anchor");break}var $=toNumber(j.getAttribute("y"));switch(this.textValign){case"middle":j.setAttribute("y",(($||0)+(g-this.bbox.height)/2).toString());break;case"bottom":j.setAttribute("y",(($||0)+g-this.bbox.height).toString());break;default:j.setAttribute("y",($||0).toString());break}}}}},o.prototype.getSVGLineElement=function(a,c){var d=this.paper.addGroup("text");return d.textContent=a,d.attr({x:"0"}),hasValue(c)&&d.attr({y:c.toString()}),(this.truncate||this.wrap)&&d.attr({overflow:"hidden"}),d},Object.defineProperty(o.prototype,"rtl",{get:function(){return hasValue(this._rtl)?this._rtl:this._topParent?this._topParent.rtl:!1},set:function(a){a=toBoolean(a),this._rtl=a,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),o.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},o.prototype.getHTMLLineElement=function(a){var c=document.createElement("div");switch(c.innerHTML=a,this.textAlign){case"middle":c.style.textAlign="center";break;case"end":c.style.textAlign="right";break}return this.wrap?c.style.wordWrap="break-word":c.style.whiteSpace="nowrap",this.rtl&&(c.style.direction="rtl"),hasValue(this.fill)&&(c.style.color=this.fill.toString()),c},o.prototype.setStyles=function(){var a=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?a.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(a.removeStyle("webkitUserSelect"),a.removeStyle("msUserSelect"))},o.prototype.hideUnused=function(a){this.initLineCache();var c=this.getCache("lineInfo");if(c.length>=a)for(var d=a;d<c.length;d++){var g=c[d];g&&g.element&&g.element.attr({display:"none"})}},Object.defineProperty(o.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(a){this.setPropertyValue("text",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(a){this.setPropertyValue("path",a,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:a}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(XLINK,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:a}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(a){this.setPropertyValue("locationOnPath",a),this.textPathElement&&this.textPathElement.attr({startOffset:a*100+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(a){this.setPropertyValue("baseLineRatio",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(a){this.resetBBox(),this.setPropertyValue("wrap",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(a){this.resetBBox(),this.setPropertyValue("truncate",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(a){this.setPropertyValue("fullWords",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(a){this.setPropertyValue("ellipsis",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(a){this.setPropertyValue("selectable",a,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(a){this.setPropertyValue("textAlign",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(a){this.setPropertyValue("textValign",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(a){if(this.setPropertyValue("html",a,!0),!hasValue(a)){var c=this.element;c.removeChildrenByTag("foreignObject")}},enumerable:!0,configurable:!0}),o.prototype.setFill=function(a){if(e.prototype.setFill.call(this,a),this.html)for(var c=this.element,d=c.node.getElementsByTagName("div"),g=0;g<d.length;g++){var b=d[g];hasValue(this.fill)&&(b.style.color=this.fill.toString())}},Object.defineProperty(o.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(a){this.setPropertyValue("hideOversized",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(a){this.setPropertyValue("ignoreFormatting",a,!0)},enumerable:!0,configurable:!0}),o.prototype.measureElement=function(){},o.prototype.getLineInfo=function(a){this.initLineCache();var c=this.getCache("lineInfo");return c.length>a?c[a]:void 0},o.prototype.addLineInfo=function(a,c){this.initLineCache(),this.getCache("lineInfo")[c]=a},o.prototype.initLineCache=function(){hasValue(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},o.prototype.setDataItem=function(a){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),a&&(this._sourceDataItemEvents=new MultiDisposer([a.events.on("valuechanged",this.invalidate,this,!1),a.events.on("workingvaluechanged",this.invalidate,this,!1),a.events.on("calculatedvaluechanged",this.invalidate,this,!1),a.events.on("propertychanged",this.invalidate,this,!1)])),e.prototype.setDataItem.call(this,a)},Object.defineProperty(o.prototype,"availableWidth",{get:function(){return hasValue(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"availableHeight",{get:function(){return hasValue(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),o.prototype.getSvgElement=function(a,c,d){var g=this.paper.add("tspan");if(g.textContent=a,c)if(options.nonce&&d){var b="amcharts_element_style_"+btoa(c).replace(/[^\w]*/g,"");g.node.setAttribute("class",b);var j=document.createElementNS(SVGNS,"defs");d.node.appendChild(j);var $=document.createElement("style");$.type="text/css",$.innerHTML="."+b+" { "+c+"}",$.setAttribute("nonce",options.nonce),j.appendChild($)}else g.node.setAttribute("style",c);return d&&d.add(g),g},o.prototype.deepInvalidate=function(){e.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(o.prototype,"readerTitle",{get:function(){var a=this.getPropertyValue("readerTitle");return a?this.dataItem&&(a=this.populateString(a)):a=this.populateString(plainText(isNotEmpty(this.html)?this.html:this.text)),a},set:function(a){a=toText(a),this.setPropertyValue("readerTitle",a)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.Label=Label;defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,o){if(e instanceof Label&&e.parent&&e.parent.isBaseSprite){var a=e.states.create(o);return a.properties.disabled=!0,a}return null}});var RoundedRectangle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RoundedRectangle",a.element=a.paper.add("path"),a.cornerRadius(3,3,3,3),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.innerWidth,c=this.innerHeight;if(isNumber$1(a)&&isNumber$1(c)){var d=min$1(a,c)/2,g=relativeToValue(this.cornerRadiusTopLeft,d),b=relativeToValue(this.cornerRadiusTopRight,d),j=relativeToValue(this.cornerRadiusBottomRight,d),$=relativeToValue(this.cornerRadiusBottomLeft,d),_e=min$1(Math.abs(a/2),Math.abs(c/2)),st=fitToRange(g,0,_e),rt=fitToRange(b,0,_e),ut=fitToRange(j,0,_e),gt=fitToRange($,0,_e),yt="M"+st+",0 L"+(a-rt)+",0",wt=" L"+gt+","+c,Ct=" L0,"+st,Pt=" L"+a+","+(c-ut),At=" a"+rt+","+rt+" 0 0 1 "+rt+","+rt,Tt=" a"+ut+","+ut+" 0 0 1 -"+ut+","+ut,kt=" a"+gt+","+gt+" 0 0 1 -"+gt+",-"+gt,It=" a"+st+","+st+" 0 0 1 "+st+",-"+st,Lt=yt+At+Pt+Tt+wt+kt+Ct+It+" Z";this.path=Lt}},o.prototype.cornerRadius=function(a,c,d,g){this.cornerRadiusTopLeft=a,this.cornerRadiusTopRight=c,this.cornerRadiusBottomLeft=d,this.cornerRadiusBottomRight=g},Object.defineProperty(o.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(a){this.setPercentProperty("cornerRadiusTopLeft",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(a){this.setPercentProperty("cornerRadiusTopRight",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(a){this.setPercentProperty("cornerRadiusBottomRight",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(a){this.setPercentProperty("cornerRadiusBottomLeft",a,!0)},enumerable:!0,configurable:!0}),o.prototype.measureElement=function(){},Object.defineProperty(o.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.RoundedRectangle=RoundedRectangle;var Button=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Button",a.tooltipY=0,a.iconPosition="left",a.layout="horizontal",a.contentAlign="center",a.contentValign="middle",a.padding(8,16,8,16),a.setStateOnChildren=!0;var c=new InterfaceColorSet,d=a.background;d.fill=c.getFor("secondaryButton"),d.stroke=c.getFor("secondaryButtonStroke"),d.fillOpacity=1,d.strokeOpacity=1,d.cornerRadius(3,3,3,3),a.label=new Label,a.label.fill=c.getFor("secondaryButtonText"),a.label.shouldClone=!1;var g=d.states.create("hover");g.properties.fillOpacity=1,g.properties.fill=c.getFor("secondaryButtonHover");var b=d.states.create("down");return b.transitionDuration=100,b.properties.fill=c.getFor("secondaryButtonDown"),b.properties.fillOpacity=1,a.role="button",a.focusable=!0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"icon",{get:function(){return this._icon},set:function(a){var c=this._icon;c&&(c.parent=void 0),a&&(this._icon=a,a.parent=this,a.interactionsEnabled=!1,a.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(a){this.setPropertyValue("iconPosition",a),this.icon&&(a=="left"?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){return this._label},set:function(a){this._label&&this.removeDispose(this._label),this._label=a,a&&(a.parent=this,a.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),o.prototype.createBackground=function(){return new RoundedRectangle},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),a.label&&this.label.copyFrom(a.label),a.icon&&(this.icon=a.icon.clone())},o}(Container);registry.registeredClasses.Button=Button;var Circle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Circle",a.element=a.paper.add("circle"),a.setPercentProperty("radius",percent(100)),a.setPropertyValue("horizontalCenter","middle"),a.setPropertyValue("verticalCenter","middle"),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelRadius",{get:function(){return relativeToValue(this.radius,min$1(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),o.prototype.measureElement=function(){var a=this.pixelRadius;this._bbox={x:-a,y:-a,width:a*2,height:a*2}},o}(Sprite);registry.registeredClasses.Circle=Circle;var Ellipse=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Ellipse",a.element=a.paper.add("ellipse"),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(o.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(a){this.height=a*2,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(a){this.width=a*2,this.invalidate()},enumerable:!0,configurable:!0}),o}(Circle);registry.registeredClasses.Ellipse=Ellipse;var Image$1=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Image",a.element=a.paper.add("image"),a.applyTheme(),a.width=50,a.height=50,a}return o.prototype.draw=function(){if(e.prototype.draw.call(this),this.href){var a=this.innerWidth,c=this.innerHeight;isNumber$1(this.widthRatio)&&(a=c*this.widthRatio,this.width=a),isNumber$1(this.heightRatio)&&(c=a*this.heightRatio,this.height=c),this.element.attr({width:a,height:c}),this.element.attrNS(XLINK,"xlink:href",this.href)}},Object.defineProperty(o.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(a){this.setPropertyValue("href",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(a){this.setPropertyValue("widthRatio",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(a){this.setPropertyValue("heightRatio",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Image=Image$1;var Line=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Line",a.element=a.paper.add("line"),a.fill=color(),a.x1=0,a.y1=0,a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this),this.x1==this.x2||this.y1==this.y2?this.pixelPerfect=!0:this.pixelPerfect=!1,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(o.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(a){isNumber$1(a)||(a=0);var c=0;this.pixelPerfect&&this.stroke instanceof LinearGradient&&(c=1e-5),this.setPropertyValue("x1",a,!0),this.element.attr({x1:a+c})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x2",{get:function(){var a=this.getPropertyValue("x2");return isNumber$1(a)||(a=this.pixelWidth),a},set:function(a){isNumber$1(a)||(a=0),this.setPropertyValue("x2",a,!0),this.element.attr({x2:a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(a){isNumber$1(a)||(a=0);var c=0;this.pixelPerfect&&this.stroke instanceof LinearGradient&&(c=1e-5),this.setPropertyValue("y1",a,!0),this.element.attr({y1:a+c})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y2",{get:function(){var a=this.getPropertyValue("y2");return isNumber$1(a)||(a=this.pixelHeight),a},set:function(a){isNumber$1(a)||(a=0),this.setPropertyValue("y2",a,!0),this.element.attr({y2:a})},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a){var c={x:this.x1,y:this.y1},d={x:this.x2,y:this.y2},g=getMidPoint(c,d,a),b=getAngle(c,d);return{x:g.x,y:g.y,angle:b}},o}(Sprite);registry.registeredClasses.Line=Line;var PointedShape=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PointedShape",a.pointerBaseWidth=15,a.pointerLength=10,a.pointerY=0,a.pointerX=0,a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this),isNumber$1(this.pointerX)||(this.pointerX=this.pixelWidth/2),isNumber$1(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(o.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(a){this.setPropertyValue("pointerBaseWidth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(a){this.setPropertyValue("pointerLength",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(a){this.setPropertyValue("pointerX",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(a){this.setPropertyValue("pointerY",a,!0)},enumerable:!0,configurable:!0}),o}(Sprite),PointedRectangle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PointedRectangle",a.element=a.paper.add("path"),a.cornerRadius=6,a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.cornerRadius,c=this.innerWidth,d=this.innerHeight;if(c>0&&d>0){var g=this.pointerX,b=this.pointerY,j=this.pointerBaseWidth/2,$=min$1(c/2,d/2),_e=fitToRange(a,0,$),st=fitToRange(a,0,$),rt=fitToRange(a,0,$),ut=fitToRange(a,0,$),gt=0,yt=0,wt=c,Ct=0,Pt=c,At=d,Tt=0,kt=d,It=void 0,Lt=void 0,Ft=void 0,Nt=void 0,Ht=(g-gt)*(At-yt)-(b-yt)*(Pt-gt),dr=(g-Tt)*(Ct-kt)-(b-kt)*(wt-Tt);if(Ht>0&&dr>0){var hs=fitToRange(g,_e+j,c-j-st);b=fitToRange(b,-1/0,0),It="M"+_e+",0 L"+(hs-j)+",0 L"+g+","+b+" L"+(hs+j)+",0 L"+(c-st)+",0"}else It="M"+_e+",0 L"+(c-st)+",0";if(Ht<0&&dr<0){var hs=fitToRange(g,ut+j,c-j-rt);b=fitToRange(b,d,1/0),Ft=" L"+(c-rt)+","+d+" L"+(hs+j)+","+d+" L"+g+","+b+" L"+(hs-j)+","+d+" L"+ut+","+d}else Ft=" L"+ut+","+d;if(Ht<0&&dr>0){var us=fitToRange(b,_e+j,d-ut-j);g=fitToRange(g,-1/0,0),Nt=" L0,"+(d-ut)+" L0,"+(us+j)+" L"+g+","+b+" L0,"+(us-j)+" L0,"+_e}else Nt=" L0,"+_e;if(Ht>0&&dr<0){var us=fitToRange(b,st+j,d-j-rt);g=fitToRange(g,c,1/0),Lt=" L"+c+","+st+" L"+c+","+(us-j)+" L"+g+","+b+" L"+c+","+(us+j)+" L"+c+","+(d-rt)}else Lt=" L"+c+","+(d-rt);var hn=" a"+st+","+st+" 0 0 1 "+st+","+st,un=" a"+rt+","+rt+" 0 0 1 -"+rt+","+rt,bo=" a"+ut+","+ut+" 0 0 1 -"+ut+",-"+ut,_s=" a"+_e+","+_e+" 0 0 1 "+_e+",-"+_e;this.path=It+hn+Lt+un+Ft+bo+Nt+_s}},Object.defineProperty(o.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(a){this.setPropertyValue("cornerRadius",a,!0)},enumerable:!0,configurable:!0}),o}(PointedShape);function polyline(e){var o=lineTo(e[0]),a={x:0,y:0},c=options.minPolylineStep;isNumber$1(c)||(c=.5);for(var d=0,g=e.length;d<g;d++){var b=e[d];getDistance(b,a)>c&&(o+=lineTo(b),a=b)}return o}function moveTo(e){return" M"+round$1(e.x,4)+","+round$1(e.y,4)+" "}function lineTo(e){return" L"+round$1(e.x,4)+","+round$1(e.y,4)+" "}function quadraticCurveTo(e,o){return" Q"+round$1(o.x,4)+","+round$1(o.y,4)+" "+round$1(e.x,4)+","+round$1(e.y,4)}function cubicCurveTo(e,o,a){return" C"+round$1(o.x,4)+","+round$1(o.y,4)+" "+round$1(a.x,4)+","+round$1(a.y,4)+" "+round$1(e.x,4)+","+round$1(e.y,4)}function closePath(){return" Z"}function arcTo(e,o,a,c){if(o==0)return"";isNumber$1(c)||(c=a);var d="",g=",",b=Math.ceil(Math.abs(o)/180),j=1;o<0&&(j=0);var $=0,_e=0,st=-cos(e)*a,rt=-sin(e)*c;if(o<.5&&a>3e3){var ut=e+o,gt=round$1(cos(ut)*a,4),yt=round$1(sin(ut)*c,4);return lineTo({x:gt,y:yt})}for(var wt=0;wt<b;wt++){var ut=e+o/b*(wt+1),gt=round$1(cos(ut)*a+st-$,4),yt=round$1(sin(ut)*c+rt-_e,4);d+=" a"+a+g+c+g+0+g+0+g+j+g+gt+g+yt,$=gt,_e=yt}return d}function arc(e,o,a,c,d,g,b){if(o==0||(isNumber$1(c)||(c=0),a==0&&c<=0))return"";if(a<c){var j=a;a=c,c=j,isNumber$1(d)&&(d=d/c*a)}o=min$1(o,360),o==360&&(g=0,b=0);var $=e+o,_e=sin(min$1(o,45)/2);d=isNumber$1(d)?d:a,g=g||0,b=isNumber$1(b)?b:g;var st=d/a*c,rt=d/a*g,ut=d/a*b;g=fitToRange(g,0,(a-c)/2),rt=fitToRange(rt,0,(d-st)/2),b=fitToRange(b,0,(a-c)/2),ut=fitToRange(ut,0,(d-st)/2),g=round$1(fitToRange(g,0,a*_e),4),rt=round$1(fitToRange(rt,0,d*_e),4),b=round$1(fitToRange(b,0,c*_e),4),ut=round$1(fitToRange(ut,0,st*_e),4);var gt=Math.asin(g/a/2)*DEGREES*2,yt=Math.asin(rt/d/2)*DEGREES*2;c<b&&(c=b),st<ut&&(st=ut);var wt=Math.asin(b/c/2)*DEGREES*2,Ct=Math.asin(ut/st/2)*DEGREES*2;isNumber$1(wt)||(wt=0),isNumber$1(Ct)||(Ct=0);var Pt=e+o/2,At={x:round$1(cos(Pt)*c,4),y:sin(Pt)*st},Tt={x:cos(e)*(c+b),y:sin(e)*(st+ut)},kt={x:cos(e)*(a-g),y:sin(e)*(d-rt)},It={x:cos($)*(a-g),y:sin($)*(d-rt)},Lt={x:cos($)*(c+b),y:sin($)*(st+ut)},Ft={x:cos(e+gt)*a,y:sin(e+yt)*d},Nt={x:cos($-wt)*c,y:sin($-Ct)*st};b+=b*sin(wt/2),ut+=ut*sin(Ct/2),wt>($-e)/2&&(Nt=At);var Ht="";return o==360?Ht=moveTo(kt):(Ht=moveTo(Tt),Ht+=lineTo(kt),Ht+=arcToPoint(Ft,g,rt,!0)),Ht+=arcTo(e+gt,o-2*gt,a,d),isNumber$1(c)&&c!=0?(o==360&&g==0?Ht+=moveTo(Lt):(Ht+=arcToPoint(It,g,rt,!0),Ht+=lineTo(Lt),Ht+=arcToPoint(Nt,b,ut,!0)),Ht+=arcTo($-wt,-(o-2*wt),c,st),(o<360||g>0)&&(Ht+=arcToPoint(Tt,b,ut,!0)),Ht+=lineTo(Tt)):(Ht+=arcToPoint(It,g,rt,!0),o<360&&(Ht+=lineTo(Tt))),Ht}function arcToPoint(e,o,a,c,d,g){if(o==0)return"";g=g||0,d=!!d,c=!!c;var b=",",j=+c,$=+d;return" A"+o+b+a+b+g+b+$+b+j+b+round$1(e.x,4)+b+round$1(e.y,4)}function rectangle(e,o,a,c){return isNumber$1(a)||(a=0),isNumber$1(c)||(c=0),moveTo({x:a,y:c})+lineTo({x:a+e,y:c})+lineTo({x:a+e,y:c+o})+lineTo({x:a,y:c+o})+closePath()}function rectToPath(e,o){var a=",",c=" L";return o?"M"+e.x+a+e.y+c+e.x+a+(e.y+e.height)+c+(e.x+e.width)+a+(e.y+e.height)+c+(e.x+e.width)+a+e.y+c+e.x+a+e.y:"M"+e.x+a+e.y+c+(e.x+e.width)+a+e.y+c+(e.x+e.width)+a+(e.y+e.height)+c+e.x+a+(e.y+e.height)+c+e.x+a+e.y}function pathToPoints(e,o){var a=getGhostPaper(),c=a.add("path").node;if(c.setAttribute("d",e),c.getPointAtLength&&c.getTotalLength){for(var d=c.getTotalLength(),g=[],b=0;b<o;b++){var j=c.getPointAtLength(b/o*d);g.push({x:j.x,y:j.y})}return g}c.remove()}function spiralPoints(e,o,a,c,d,g,b,j,$){isNumber$1(j)||(j=0),isNumber$1(j)||($=j);for(var _e=d+.01,st=j*RADIANS,rt=[];_e<a+b;){var ut=g;if(ut/2>_e&&(ut=2*_e),st+=2*Math.asin(ut/2/_e),st*DEGREES>$+(a-d)/b*360)break;var gt=st*DEGREES,yt={x:e+_e*Math.cos(st),y:o+_e*c/a*Math.sin(st)};rt.push(yt),_e=d+gt/360*b}return rt.shift(),rt}function pointsToPath(e){if(!e||e.length==0)return"";var o=moveTo(e[0]);if(e&&e.length>0)for(var a=1;a<e.length;a++)o+=lineTo(e[a]);return o}const Path=Object.freeze(Object.defineProperty({__proto__:null,arc,arcTo,arcToPoint,closePath,cubicCurveTo,lineTo,moveTo,pathToPoints,pointsToPath,polyline,quadraticCurveTo,rectToPath,rectangle,spiralPoints},Symbol.toStringTag,{value:"Module"}));var Polyline=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._distance=0,a.className="Polyline",a.element=a.paper.add("path"),a.shapeRendering="auto",a.fill=color(),a.strokeOpacity=1,a.applyTheme(),a}return o.prototype.makePath=function(){this._distance=0;var a=this.segments;if(a&&a.length>0){for(var c="",d=0,g=a.length;d<g;d++){var b=a[d];if(b.length>0){c+=moveTo(b[0]);for(var j=1;j<b.length;j++){var $=b[j];c+=lineTo($),this._distance+=getDistance(b[j-1],$)}}}this.path=c}this._realSegments=a},Object.defineProperty(o.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(a){this.setPropertyValue("segments",a),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a){var c=0;a<0&&(a=Math.abs(a),c=180);var d=this._realSegments;if(d){for(var g=this.distance,b=0,j=void 0,$=0,_e=0,st=void 0,rt=void 0,ut=0;ut<d.length;ut++){var gt=d[ut];if(gt.length>1){for(var yt=1;yt<gt.length;yt++)if(st=gt[yt-1],rt=gt[yt],$=b/g,j=getDistance(st,rt),b+=j,_e=b/g,$<=a&&_e>a){ut=d.length;break}}else gt.length==1&&(st=gt[0],rt=gt[0],$=0,_e=1)}if(st&&rt){var wt=(a-$)/(_e-$),Ct=getMidPoint(st,rt,wt);return{x:Ct.x,y:Ct.y,angle:c+getAngle(st,rt)}}}return{x:0,y:0,angle:0}},Object.defineProperty(o.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Polyline=Polyline;var Polyarc=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Polyarc",a.controlPointDistance=.5,a.controlPointPosition=.5,a.applyTheme(),a}return o.prototype.makePath=function(){this._distance=0;var a=this.segments;if(a&&a.length>0){var c="";this._realSegments=[];for(var d=0,g=a.length;d<g;d++){var b=a[d],j=[];if(this._realSegments.push(j),b.length>0){c+=moveTo(b[0]);for(var $=1;$<b.length;$++){var _e=b[$-1],st=b[$],rt=getDistance(st,_e),ut=rt*this.controlPointDistance,gt=this.controlPointPosition,yt=-getAngle(_e,st),wt=_e.x+(st.x-_e.x)*gt*.5-ut*sin(yt),Ct=_e.y+(st.y-_e.y)*gt*.5-ut*cos(yt),Pt={x:wt,y:Ct},At=_e.x+(st.x-_e.x)*gt*1.5-ut*sin(yt),Tt=_e.y+(st.y-_e.y)*gt*1.5-ut*cos(yt),kt={x:At,y:Tt};c+=cubicCurveTo(st,Pt,kt);var It=Math.ceil(rt),Lt=_e;if(It>0)for(var Ft=0;Ft<=It;Ft++){var Nt=getPointOnCubicCurve(_e,st,Pt,kt,Ft/It);j.push(Nt),this._distance+=getDistance(Lt,Nt),Lt=Nt}else j.push(_e)}}}this.path=c}},Object.defineProperty(o.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(a){this.setPropertyValue("controlPointPosition",a),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(a){this.setPropertyValue("controlPointDistance",a),this.makePath()},enumerable:!0,configurable:!0}),o}(Polyline);registry.registeredClasses.Polyarc=Polyarc;var Morpher=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;return c._bboxes=[],c.morphDuration=800,c.morphEasing=cubicOut,c.morphToSingle=!0,c.scaleRatio=1,c.className="Morpher",c.morphable=a,c.applyTheme(),c}return o.prototype.morphToPolygon=function(a,c,d){var g=this.morphable.currentPoints;if(g&&a){this.sortPoints(g),this.sortPoints(a),this._morphFromPointsReal=[],this._morphToPointsReal=[],hasValue(c)||(c=this.morphDuration),hasValue(d)||(d=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(a,g),this._morphToPointsReal=this.normalizePoints(g,a),this.morphable.currentPoints=this._morphFromPointsReal;var b=new Animation(this,{property:"morphProgress",from:0,to:1},c,d);return this._disposers.push(b),b.start(),b}},o.prototype.normalizePoints=function(a,c){for(var d=0,g=a.length;d<g;d++){var b=a[d][0],j=a[d][1],$=getValue(getBBox(b)),_e=$.x+$.width,st=$.y+$.height;if(c[d]||(c[d]=[]),b&&!c[d][0]&&(c[d][0]=[{x:_e,y:st},{x:_e,y:st}]),c[d][0]){c[d][0]=this.addPoints(c[d][0],b.length);for(var rt=1/0,ut=0,gt=0;gt<c[d][0].length;gt++){var yt=getDistance(c[d][0][gt],b[0]);yt<rt&&(ut=gt,rt=yt)}var wt=c[d][0].slice(0,ut),Ct=c[d][0].slice(ut);c[d][0]=Ct.concat(wt)}j&&(c[d][1]||(c[d][1]=[{x:_e,y:st},{x:_e,y:st}]),c[d][1]=this.addPoints(c[d][1],j.length))}return c},o.prototype.sortPoints=function(a){a.sort(function(j,$){var _e=getValue(getBBox(j[0])),st=getValue(getBBox($[0]));return _e.width*_e.height>st.width*st.height?-1:1});for(var c=[],d=0,g=a.length;d<g;d++){var b=a[d][0];b&&c.push(getValue(getBBox(b)))}return getCommonRectangle(c)},o.prototype.morphToCircle=function(a,c,d){var g=this.morphable.points,b=this.sortPoints(g);this._morphFromPointsReal=[],this._morphToPointsReal=[],hasValue(c)||(c=this.morphDuration),hasValue(d)||(d=this.morphEasing);for(var j=0,$=g.length;j<$;j++){var _e=g[j][0],st=g[j][1];if(this._morphFromPointsReal[j]=[],this._morphToPointsReal[j]=[],_e){var rt=_e,ut=_e,gt=getValue(getBBox(ut));this.morphToSingle&&(gt=getValue(b));var yt=gt.x+gt.width/2,wt=gt.y+gt.height/2,Ct=a;isNumber$1(Ct)||(Ct=Math.min(gt.width/2,gt.height/2)),rt=[];var Pt=getAngle({x:yt,y:wt},_e[0]),At=100;_e.length>At&&(At=_e.length),ut=this.addPoints(_e,At),At=ut.length;for(var Tt=360/(At-1),kt=0;kt<At;kt++){var It=Tt*kt+Pt,Lt={x:yt+Ct*cos(It),y:wt+Ct*sin(It)};rt[kt]=Lt}if(st&&st.length>0)for(var Ft=0,Nt=st.length;Ft<Nt;Ft++)rt.push({x:yt,y:wt});this._morphFromPointsReal[j][0]=ut,this._morphToPointsReal[j][0]=rt}}this.morphable.currentPoints=this._morphFromPointsReal;var Ht=new Animation(this,{property:"morphProgress",from:0,to:1},c,d);return this._disposers.push(Ht),Ht.start(),Ht},o.prototype.addPoints=function(a,c){for(var d=Math.round(c/a.length),g=[],b=0,j=a.length;b<j;b++){var $=a[b],_e=void 0;b==a.length-1?_e=a[0]:_e=a[b+1],g.push($);for(var st=1;st<d;st++){var rt=st/d,ut={x:$.x+(_e.x-$.x)*rt,y:$.y+(_e.y-$.y)*rt};g.push(ut)}g.length+a.length-b==c&&(d=0)}if(g.length<c&&a.length>0)for(var gt=a[a.length-1],st=g.length;st<c;st++)g.push({x:gt.x,y:gt.y});return g},o.prototype.morphToRectangle=function(a,c,d,g){var b=this.morphable.points;this.sortPoints(b),this._morphFromPointsReal=[],this._morphToPointsReal=[],hasValue(d)||(d=this.morphDuration),hasValue(g)||(g=this.morphEasing);for(var j=0,$=b.length;j<$;j++){var _e=b[j][0],st=b[j][1];if(this._morphFromPointsReal[j]=[],this._morphToPointsReal[j]=[],_e){var rt=_e,ut=_e,gt=this._bboxes[j];this.morphToSingle;var yt=gt.x,wt=gt.y,Ct=a,Pt=c;if(isNumber$1(Ct)||(Ct=gt.width),isNumber$1(Pt)||(Pt=gt.height),rt=[{x:yt,y:wt},{x:yt+Ct,y:wt},{x:yt+Ct,y:wt+Pt},{x:yt,y:wt+Pt}],rt=this.addPoints(rt,_e.length),_e.length<4)for(var At=_e.length;At<4;At++)rt.push({x:_e[At].x,y:_e[At].y});if(st&&st.length>0)for(var Tt=gt.x+gt.width/2,kt=gt.y+gt.height/2,It=0,Lt=st.length;It<Lt;It++)rt.push({x:Tt,y:kt});this._morphFromPointsReal[j][0]=ut,this._morphToPointsReal[j][0]=rt}}this.morphable.currentPoints=this._morphFromPointsReal;var Ft=new Animation(this,{property:"morphProgress",from:0,to:1},d,g);return this._disposers.push(Ft),Ft.start(),Ft},Object.defineProperty(o.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(a){this._morphProgress=a;var c=[];if(a!=null){var d=this._morphFromPointsReal,g=this._morphToPointsReal;if(d!=null&&g!=null)for(var b=0,j=d.length;b<j;b++){var $=[];c.push($);var _e=d[b][0],st=d[b][1],rt=g[b][0],ut=g[b][1];if(_e&&_e.length>0&&rt&&rt.length>0){for(var gt=[],yt=0,wt=_e.length;yt<wt;yt++){var Ct=_e[yt],Pt=rt[yt],At={x:Ct.x+(Pt.x*this.scaleRatio-Ct.x)*a,y:Ct.y+(Pt.y*this.scaleRatio-Ct.y)*a};gt.push(At)}$[0]=gt}if(st&&st.length>0&&ut&&ut.length>0){for(var Tt=[],kt=0,It=st.length;kt<It;kt++){var Ct=st[kt],Pt=ut[kt],At={x:Ct.x+(Pt.x*this.scaleRatio-Ct.x)*a,y:Ct.y+(Pt.y*this.scaleRatio-Ct.y)*a};Tt.push(At)}$[1]=Tt}}}this.morphable.currentPoints=c},enumerable:!0,configurable:!0}),o.prototype.morphBack=function(a,c){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,hasValue(a)||(a=this.morphDuration),hasValue(c)||(c=this.morphEasing);var d=new Animation(this,{property:"morphProgress",from:0,to:1},a,c);return this._disposers.push(d),d.start(),d},Object.defineProperty(o.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),o}(BaseObject),Polygon=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Polygon",a.element=a.paper.add("path"),a.shapeRendering="auto",a._currentPoints=[],a.applyTheme(),a}return Object.defineProperty(o.prototype,"points",{get:function(){var a=this.getPropertyValue("points"),c=this.path;if(c&&(!a||a.length==0)){for(var d=c.slice(1,c.length-1),g=d.split("ZM"),b=0;b<g.length;b++){var j=g[b];if(j.length>0){var $=j.split("M"),_e=$[0],st=$[1];if(_e&&_e.length>0){var rt=_e.split("L");if(rt.length>0){var ut=[],gt=[ut];a.push(gt);for(var yt=0;yt<rt.length;yt++){var wt=rt[yt].split(",");ut.push({x:+wt[0],y:+wt[1]})}if(st&&st.length>0){var Ct=st.split("L");if(Ct.length>0){var Pt=[];gt.push(Pt);for(var yt=Ct.length-1;yt>=0;yt--){var wt=Ct[yt].split(",");Pt.push({x:+wt[0],y:+wt[1]})}}}}}}}this.setPropertyValue("points",a),this._currentPoints=a}return a},set:function(a){this.setPropertyValue("points",a,!0),this._currentPoints=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currentPoints",{get:function(){return(!this._currentPoints||this._currentPoints.length==0)&&this.path&&(this._currentPoints=this.points),this._currentPoints},set:function(a){this._currentPoints!=a&&(this._currentPoints=a,this.draw())},enumerable:!0,configurable:!0}),o.prototype.draw=function(){var a="",c=this._currentPoints,d,g,b,j;if(c.length>0){for(var $=0,_e=c.length;$<_e;$++){var st=c[$][0],rt=c[$][1];if(st&&st.length>0){var ut=st[0];a+=moveTo(ut);for(var gt=0;gt<st.length;gt++)ut=st[gt],a+=lineTo(ut),(!isNumber$1(g)||g<ut.x)&&(g=ut.x),(!isNumber$1(d)||d>ut.x)&&(d=ut.x),(!isNumber$1(b)||b>ut.y)&&(b=ut.y),(!isNumber$1(j)||j<ut.y)&&(j=ut.y)}if(rt&&rt.length>0){var ut=rt[0];a+=moveTo(ut);for(var yt=0,wt=rt.length;yt<wt;yt++)ut=rt[yt],a+=lineTo(ut)}}a&&(a+=closePath()),this.bbox.x=d,this.bbox.y=b,this.bbox.width=g-d,this.bbox.height=j-b,e.prototype.setPath.call(this,a)}},o.prototype.setPath=function(a){return e.prototype.setPath.call(this,a)?(this.points=[],this._bbox=this.group.getBBox(),!0):!1},o.prototype.measureElement=function(){},Object.defineProperty(o.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new Morpher(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Polygon=Polygon;var Polyspline=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Polyspline",a.tensionX=.5,a.tensionY=.5,a.applyTheme(),a}return o.prototype.makePath=function(){this._distance=0;var a=this.segments,c=this.tensionX,d=this.tensionY;if(this.allPoints=[],a&&a.length>0){var g="";this._realSegments=[];for(var b=0,j=a.length;b<j;b++){var $=a[b],_e=[];if(this._realSegments.push(_e),$.length>0){var st=$[0],rt=$[$.length-1],ut=!1;round$1(st.x,3)==round$1(rt.x)&&round$1(st.y)==round$1(rt.y)&&(ut=!0),g+=moveTo($[0]);for(var gt=0;gt<$.length-1;gt++){var yt=$[gt-1],wt=$[gt],Ct=$[gt+1],Pt=$[gt+2];gt===0?yt=$[gt]:gt==$.length-2&&(Pt=$[gt+1]),Pt||(Pt=Ct),gt===0?ut?yt=$[$.length-2]:yt=$[b]:gt==$.length-2&&(ut?Pt=$[1]:Pt=$[gt+1]);var At=getCubicControlPointA(yt,wt,Ct,Pt,c,d),Tt=getCubicControlPointB(yt,wt,Ct,Pt,c,d);g+=cubicCurveTo(Ct,At,Tt);var kt=Math.ceil(getCubicCurveDistance(wt,Ct,At,Tt,20))*1.2,It=wt;if(kt>0)for(var Lt=0;Lt<=kt;Lt++){var Ft=getPointOnCubicCurve(wt,Ct,At,Tt,Lt/kt);if(!(Ft.x==It.x&&Ft.y==It.y)){_e.push(Ft);var Nt=round$1(getAngle(It,Ft),5);this._distance+=getDistance(It,Ft),this.allPoints[Math.floor(this._distance)]={x:Ft.x,y:Ft.y,angle:Nt},It=Ft}}else _e.push(yt)}}var Ht=this.allPoints;if(Ht.length>1){for(var dr=0;dr<Ht.length;dr++)if(!Ht[dr]){if(dr>1)Ht[dr]=Ht[dr-1];else for(var hs=1;hs<Ht.length;hs++)if(Ht[hs]){Ht[dr]=Ht[hs];break}}}}this.path=g}},o.prototype.getClosestPointIndex=function(a){var c=this.allPoints,d,g=1/0;if(c.length>1)for(var b=1;b<c.length;b++){var j=getDistance(a,c[b]);j<g&&(d=b,g=j)}return d},Object.defineProperty(o.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(a){this.setPropertyValue("tensionX",a),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(a){this.setPropertyValue("tensionY",a,!0),this.makePath()},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a,c){var d=0,g=this.allPoints,b=g.length;if(isNumber$1(a)||(a=0),b>1){if(c&&b>3){if(a<0){a<-.01&&(a=-.01);var j=g[0],$=g[1],_e=j.x-(j.x-$.x)*b*a,st=j.y-(j.y-$.y)*b*a;return{x:_e,y:st,angle:getAngle(j,$)}}else if(a>1){a>1.01&&(a=1.01);var j=g[g.length-2],$=g[g.length-3],_e=j.x+(j.x-$.x)*b*(a-1),st=j.y+(j.y-$.y)*b*(a-1);return{x:_e,y:st,angle:getAngle(j,{x:_e,y:st})}}else if(a==1){var rt=g[g.length-1];return{x:rt.x,y:rt.y,angle:rt.angle}}}else a<0&&(a=Math.abs(a),d=180),a>=1&&(a=.9999999999999);var ut=g[Math.floor(a*b)];return{x:ut.x,y:ut.y,angle:ut.angle+d}}else if(b==1){var ut=g[0];return{x:ut.x,y:ut.y,angle:ut.angle}}else return{x:0,y:0,angle:0}},o}(Polyline);registry.registeredClasses.Polyspline=Polyspline;var Slice=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Slice",a.setPropertyValue("cornerRadius",0),a.setPropertyValue("startAngle",0),a.setPercentProperty("innerRadius",0),a.setPercentProperty("radius",0),a.setPropertyValue("arc",0),a.setPropertyValue("shiftRadius",0),a.strokeOpacity=1,a.setPropertyValue("layout","none"),a.slice=a.createChild(Sprite),a.slice.isMeasured=!1,a._disposers.push(a.slice),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.radiusY;this.radius>0&&a==0&&(a=.01),this.slice.path=arc(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,a,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof RadialGradient&&this.updateGradient(this.realFill),this.realStroke instanceof RadialGradient&&this.updateGradient(this.realStroke)},o.prototype.updateGradient=function(a){a.element.attr({gradientUnits:"userSpaceOnUse"}),a.element.attr({r:this.radius}),a.cx=0,a.cy=0,a.element.attr({radius:this.radius})},Object.defineProperty(o.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;if(this.isMeasured){var a=getArcRect(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),c=getArcRect(this.startAngle,this.startAngle+this.arc,this.radius);return getCommonRectangle([a,c])}else return{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",normalizeAngle(a),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(a){isNumber$1(a)||(a=0),this.setPropertyValue("arc",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){var a=this.getPropertyValue("radius");return isNumber$1(a)||(a=0),a},set:function(a){this.setPropertyValue("radius",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radiusY",{get:function(){var a=this.getPropertyValue("radiusY");return isNumber$1(a)||(a=this.radius),a},set:function(a){this.setPropertyValue("radiusY",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){return relativeToValue(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(a){this.setPropertyValue("cornerRadius",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(a){this.setPropertyValue("innerCornerRadius",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(a){this.setPropertyValue("shiftRadius",a),a=this.getPropertyValue("shiftRadius"),this.dx=a*this.radius*this.ix,this.dy=a*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ix",{get:function(){return cos(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"iy",{get:function(){return sin(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),o.prototype.getTooltipX=function(){var a=this.getPropertyValue("tooltipX");if(isNumber$1(a))return a;var c=.5;a instanceof Percent&&(c=a.value);var d=relativeToValue(this.innerRadius,this.radius);return this.ix*(d+(this.radius-d)*c)},o.prototype.getTooltipY=function(){var a=this.getPropertyValue("tooltipY");if(isNumber$1(a))return a;var c=.5;a instanceof Percent&&(c=a.value);var d=relativeToValue(this.innerRadius,this.radius);return this.iy*(d+(this.radius-d)*c)+this.slice.dy},o}(Container);registry.registeredClasses.Slice=Slice;var Preloader=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Preloader",a.width=percent(100),a.height=percent(100);var c=new InterfaceColorSet,d=a.createChild(Container);d.shouldClone=!1;var g=d.createChild(Slice);g.shouldClone=!1,g.radius=53,g.arc=360,g.fill=c.getFor("fill"),g.fillOpacity=.8,g.innerRadius=42,g.isMeasured=!1,a.backgroundSlice=g;var b=d.createChild(Slice);b.shouldClone=!1,b.radius=50,b.innerRadius=45,b.fill=c.getFor("alternativeBackground"),b.fillOpacity=.2,b.isMeasured=!1,a.progressSlice=b;var j=d.createChild(Label);j.shouldClone=!1,j.horizontalCenter="middle",j.verticalCenter="middle",j.isMeasured=!1,j.fill=c.getFor("text"),j.align="center",j.valign="middle",j.textAlign="middle",j.fillOpacity=.4,a.label=j,a.background.opacity=1,a.background.fill=c.getFor("background"),a.contentAlign="center",a.contentValign="middle",a.delay=300;var $=a.states.create("hidden");return $.properties.opacity=0,a.visible=!1,a.hide(0),a.__disabled=!0,a._disposers.push(a.backgroundSlice),a._disposers.push(a.progressSlice),a._disposers.push(a.label),a._disposers.push(d),a}return Object.defineProperty(o.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(a){var c=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",a),this.progressSlice.arc=360*a,this.label&&(this.label.text=Math.round(a*100)+"%"),a>=1?(this._started&&(this._started=void 0),registry.events.once("enterframe",function(){var d=c.hide();d&&!d.isFinished()?d.events.once("animationended",function(){c.__disabled=!0}):c.__disabled=!0}),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):a>0&&(this.delay?this._started?this._started+this.delay<=new Date().getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=new Date().getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(a){this.setPropertyValue("delay",a)},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.Preloader=Preloader;var ResizeButton=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="ResizeButton",a.orientation="horizontal",a.layout="absolute",a.horizontalCenter="middle",a.verticalCenter="middle",a.draggable=!0,a.padding(8,8,8,8),a.background.cornerRadius(20,20,20,20);var c=new Sprite;c.element=a.paper.add("path");var d=moveTo({x:-2,y:-6});return d+=lineTo({x:-2,y:6}),d+=moveTo({x:2,y:-6}),d+=lineTo({x:2,y:6}),c.path=d,c.pixelPerfect=!0,c.padding(0,4,0,4),c.stroke=new InterfaceColorSet().getFor("alternativeText"),c.strokeOpacity=.7,a.icon=c,a.label.dispose(),a.label=void 0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"orientation",{set:function(a){var c=this.icon;c&&(a=="horizontal"?c.rotation=0:c.rotation=-90)},enumerable:!0,configurable:!0}),o}(Button);registry.registeredClasses.ResizeButton=ResizeButton;var CloseButton=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="CloseButton",a.padding(8,8,8,8),a.showSystemTooltip=!0,a.width=30,a.height=30;var c=new InterfaceColorSet;a.cursorOverStyle=MouseCursorStyle.pointer;var d=a.background;d.cornerRadius(20,20,20,20);var g=c.getFor("background");d.fill=g,d.stroke=c.getFor("primaryButton"),d.strokeOpacity=1,d.strokeWidth=1;var b=c.getFor("primaryButtonActive"),j=d.states.getKey("hover");j.properties.strokeWidth=3,j.properties.fill=g;var $=d.states.getKey("down");$.properties.stroke=b,$.properties.fill=g;var _e=new Sprite;return _e.element=a.paper.add("path"),_e.stroke=d.stroke,a.icon=_e,a.applyTheme(),a}return o.prototype.validate=function(){e.prototype.validate.call(this);var a=this.pixelWidth/3,c=this.pixelHeight/3,d=moveTo({x:-a/2,y:-c/2});d+=lineTo({x:a/2,y:c/2}),d+=moveTo({x:a/2,y:-c/2}),d+=lineTo({x:-a/2,y:c/2}),this.icon.path=d,this.invalidateLayout()},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},o}(Button);registry.registeredClasses.CloseButton=CloseButton;var SwitchButton=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="SwitchButton",a.tooltipY=0,a.layout="horizontal",a.contentAlign="center",a.contentValign="middle",a.padding(8,16,8,16),a.setStateOnChildren=!0,a.states.create("active");var c=new InterfaceColorSet,d=new Label;d.fillOpacity=.3;var g=d.states.create("active");g.properties.fillOpacity=1,d.isActive=!0,a.leftLabel=d;var b=new Button,j=new Circle;b.contentValign="none",b.padding(0,0,0,0),j.radius=10,b.icon=j,b.icon.valign="middle",b.label=void 0;var $=percent(100);b.background.cornerRadius($,$,$,$),b.width=j.radius*3.5,b.height=j.radius*2.1,b.marginLeft=8,b.marginRight=8,b.togglable=!0,j.dx=-j.radius*.7,j.fill=c.getFor("primaryButton");var _e=j.states.create("hover");_e.properties.fill=c.getFor("primaryButtonHover");var st=j.states.create("active");st.properties.fill=c.getFor("primaryButtonActive"),st.properties.dx=j.radius*.7,a.switchButton=b,a.events.on("toggled",function(){a.leftLabel.isActive=!a.isActive,a.rightLabel.isActive=a.isActive});var rt=new Label;rt.fillOpacity=.3;var ut=rt.states.create("active");return ut.properties.fillOpacity=1,a.rightLabel=rt,a.role="button",a.focusable=!0,rt.valign="middle",d.valign="middle",b.valign="middle",a.applyTheme(),a}return Object.defineProperty(o.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(a){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=a,a&&(a.parent=this,a.interactionsEnabled=!1,a.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(a){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=a,a&&(a.parent=this,a.interactionsEnabled=!1,a.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"switchButton",{get:function(){return this._switchButton},set:function(a){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=a,a&&(a.parent=this,a.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),a.leftLabel&&this.leftLabel.copyFrom(a.leftLabel),a.rightLabel&&this.rightLabel.copyFrom(a.rightLabel),a.switchButton&&this.switchButton.copyFrom(a.switchButton)},o}(Container);registry.registeredClasses.SwitchButton=SwitchButton;var Scrollbar=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._previousStart=0,a._previousEnd=1,a._prevStart=0,a._prevEnd=1,a._isBusy=!1,a._skipRangeEvents=!1,a.updateWhileMoving=!0,a.className="Scrollbar",a.minHeight=12,a.minWidth=12,a.animationDuration=0,a.animationEasing=cubicOut,a.margin(10,10,10,10);var c=new InterfaceColorSet,d=a.background;return d.cornerRadius(10,10,10,10),d.fill=c.getFor("fill"),d.fillOpacity=.5,a.showSystemTooltip=!0,a.startGrip=new ResizeButton,a.endGrip=new ResizeButton,a.events.on("transformed",function(){a.updateThumb()},a,!1),a.start=0,a.end=1,a.role="scrollbar",a.thumb.role="slider",a.thumb.readerLive="polite",a.startGrip.role="slider",a.endGrip.role="slider",a.events.once("inited",function(){a._previousStart=void 0,a.dispatchRangeChange()},void 0,!1),a.hideGrips=!1,a.orientation="horizontal",a.setSVGAttribute({"aria-valuemin":"0"}),a.setSVGAttribute({"aria-valuemax":"100"}),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.orientation==="horizontal"?(hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),hasValue(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),hasValue(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),hasValue(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),hasValue(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),hasValue(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),hasValue(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},o.prototype.validateLayout=function(){this.updateSize(),e.prototype.validateLayout.call(this),this.updateExtremes()},o.prototype.processBackground=function(){e.prototype.processBackground.call(this);var a=this.background;a.clickable=!0,a.events.on("hit",this.handleBgHit,this,void 0)},o.prototype.handleBgHit=function(a){this.makeBusy();var c=a.spritePoint;c=spritePointToSprite(c,this.background,this);var d=this.thumb;if(this.orientation=="horizontal"){var g=c.x-d.pixelWidth/2;g=fitToRange(g,0,this.innerWidth-d.pixelWidth),this._thumbAnimation=d.animate({property:"x",to:g},this.animationDuration,this.animationEasing)}else{var b=c.y-d.pixelHeight/2;b=fitToRange(b,0,this.innerHeight-d.pixelHeight),this._thumbAnimation=d.animate({property:"y",to:b},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},o.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},o.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},o.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),this.animationDuration*1.1)},o.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},o.prototype.dispatchRangeChange=function(){(this._previousEnd!=this.end||this._previousStart!=this.start)&&(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},o.prototype.updateThumb=function(a){if(a===void 0&&(a=!0),!!this.parent){var c=this.thumb,d=this.start,g=this.end,b=this.startGrip,j=this.endGrip,$=this.adapter.apply("positionValueDirection",{flipped:!1}).flipped,_e=$?"To %1":"From %1",st=$?"From %1":"To %1",rt,ut;if(this.orientation=="horizontal"){var gt=this.innerWidth;c.width=gt*(g-d),c.maxX=gt-c.pixelWidth,c.x=d*gt,b.moveTo({x:c.pixelX,y:0},void 0,void 0,!0),j.moveTo({x:c.pixelX+c.pixelWidth,y:0},void 0,void 0,!0),rt=this.adapter.apply("positionValue",{value:Math.round(d*100)+"%",position:d}).value,ut=this.adapter.apply("positionValue",{value:Math.round(g*100)+"%",position:g}).value,b.readerTitle=this.language.translate(_e,void 0,rt),b.readerValueNow=""+Math.round(d*100),b.readerValueText=b.readerTitle,j.readerTitle=this.language.translate(st,void 0,ut),j.readerValueNow=""+Math.round(g*100),j.readerValueText=j.readerTitle}else{var yt=this.innerHeight;c.height=yt*(g-d),c.maxY=yt-c.pixelHeight,c.y=(1-g)*yt,b.moveTo({x:0,y:c.pixelY+c.pixelHeight},void 0,void 0,!0),j.moveTo({x:0,y:c.pixelY},void 0,void 0,!0),rt=this.adapter.apply("positionValue",{value:Math.round((1-d)*100)+"%",position:1-d}).value,ut=this.adapter.apply("positionValue",{value:Math.round((1-g)*100)+"%",position:1-g}).value,b.readerTitle=this.language.translate(st,void 0,rt),b.readerValueNow=""+Math.round(d*100),b.readerValueText=b.readerTitle,j.readerTitle=this.language.translate(_e,void 0,ut),j.readerValueNow=""+Math.round(g*100),j.readerValueText=j.readerTitle}c.readerTitle=this.language.translate("From %1 to %2",void 0,rt,ut),c.readerValueNow=""+Math.round(d*100),c.readerValueText=c.readerTitle,this.readerValueNow=""+Math.round(d*100),this.readerValueText=c.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&a&&this.dispatchRangeChange()}},o.prototype.updateExtremes=function(){var a=this.orientation,c=0,d=0,g=0,b=0;a=="horizontal"?(g=this.innerWidth,d=b=this.innerHeight/2):(b=this.innerHeight,c=g=this.innerWidth/2);var j=this.startGrip;j.minX=c,j.maxX=g,j.minY=d,j.maxY=b;var $=this.endGrip;$.minX=c,$.maxX=g,$.minY=d,$.maxY=b;var _e=this.thumb;_e.minX=c,_e.maxX=g,_e.minY=d,_e.maxY=b},o.prototype.updateSize=function(){var a=this.orientation,c=this.startGrip;c&&(c.orientation=a),this.endGrip&&(this.endGrip.orientation=a);var d=this.thumb;d&&(a=="horizontal"?(isNumber$1(this._pixelWidth)||this.width instanceof Percent||(this.width=percent(100)),hasValue(this.percentHeight)&&(this.height=this.minHeight),d.height=this.innerHeight,d.verticalCenter="middle",d.horizontalCenter="left"):(isNumber$1(this._pixelHeight)||this.height instanceof Percent||(this.height=percent(100)),hasValue(this.percentWidth)&&(this.width=this.minWidth),d.width=this.innerWidth,d.verticalCenter="top",d.horizontalCenter="middle"))},Object.defineProperty(o.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(a){this._isBusy||(this.__start=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"__start",{get:function(){return this._start},set:function(a){this._start=this.getPosition(a),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(a){this._isBusy||(this.__end=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"__end",{get:function(){return this._end},set:function(a){this._end=this.getPosition(a),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),o.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},o.prototype.fixRange=function(a){(a.start!=round$1(this._start,2)||a.end!=round$1(this._end,2))&&(this._start=a.start,this._end=a.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},o.prototype.getPosition=function(a){return fitToRange(round$1(a,4),0,1)},Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a)&&(a==="horizontal"?(this.startGrip.cursorOverStyle=MouseCursorStyle.horizontalResize,this.endGrip.cursorOverStyle=MouseCursorStyle.horizontalResize):(this.startGrip.cursorOverStyle=MouseCursorStyle.verticalResize,this.endGrip.cursorOverStyle=MouseCursorStyle.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),o.prototype.updateByOrientation=function(){},Object.defineProperty(o.prototype,"startGrip",{get:function(){return this._startGrip},set:function(a){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=a,this.processGrip(a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endGrip",{get:function(){return this._endGrip},set:function(a){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=a,this.processGrip(a)},enumerable:!0,configurable:!0}),o.prototype.processGrip=function(a){a.parent=this,a.isMeasured=!1,a.focusable=!0,a.shouldClone=!1,a.zIndex=100,a.events.on("drag",this.handleGripDrag,this,!1),a.events.on("dragstop",this.makeUnbusy,this,!1),a.events.on("down",this.makeBusy,this,!1),a.events.on("up",this.makeUnbusy,this,!1),this._disposers.push(a)},o.prototype.handleGripDrag=function(a){this.makeBusy(),a.target===this._startGrip?this._usingGrip="start":this._usingGrip="end",this.orientation=="horizontal"?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(o.prototype,"thumb",{get:function(){if(!this._thumb){var a=new Button;a.background.cornerRadius(10,10,10,10),a.padding(0,0,0,0),this.thumb=a}return this._thumb},set:function(a){var c=this;a&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=a,a.parent=this,a.isMeasured=!1,a.inert=!0,a.draggable=!0,a.clickable=!0,a.hoverable=!0,a.focusable=!0,a.shouldClone=!1,a.zIndex=0,a.cursorOverStyle=MouseCursorStyle.grab,a.cursorDownStyle=MouseCursorStyle.grabbing,a.events.on("dragstart",this.makeBusy,this,!1),a.events.on("dragstop",this.makeUnbusy,this,!1),a.events.on("positionchanged",this.handleThumbPosition,this,!1),a.events.on("sizechanged",this.handleThumbPosition,this,!1),a.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(getInteraction().body.events.on("keyup",function(d){keyboard.isKey(d.event,["space","enter"])&&c.thumb.isFocused&&(d.event.preventDefault(),c.handleDoubleClick())})),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),o.prototype.handleDoubleClick=function(){this.makeBusy();var a=0,c=1;this.start!=0||this.end!=1?(this._prevStart=this.start,this._prevEnd=this.end):(a=this._prevStart,c=this._prevEnd);var d=this.animate([{property:"__start",to:a},{property:"__end",to:c}],this.animationDuration,this.animationEasing);d&&!d.isFinished()?(d.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=d):this.makeUnbusy()},o.prototype.handleThumbPosition=function(){var a=this.thumb;if(this.orientation=="horizontal"){var c=this.innerWidth,d=a.innerWidth,g=a.pixelX;this._start=g/c,this._end=(g+d)/c,this.updateThumb()}else{var b=this.innerHeight,j=a.innerHeight,$=a.pixelY;$+j>b&&($=b-j,a.y=$),this._start=1-($+j)/b,this._end=1-$/b,this.updateThumb()}},o.prototype.createBackground=function(){return new RoundedRectangle},Object.defineProperty(o.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(a){var c=this;this._hideGrips=a,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),a?(this._overDisposer=this.events.on("over",function(){c.startGrip.show(),c.endGrip.show()},void 0,!1),this._outDisposer=this.events.on("out",function(){c.startGrip.hide(),c.endGrip.hide()},void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(a){this.setPropertyValue("animationDuration",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(a){this.setPropertyValue("animationEasing",a)},enumerable:!0,configurable:!0}),o.prototype.asFunction=function(a){return a=="animationEasing"||e.prototype.asIs.call(this,a)},o}(Container);registry.registeredClasses.Scrollbar=Scrollbar;var Slider=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Slider",a.thumb.opacity=0,a.thumb.interactionsEnabled=!1,a.endGrip.opacity=0,a.endGrip.interactionsEnabled=!1,a.startGrip.events.on("drag",function(){a.endGrip.x=a.startGrip.x,a.endGrip.y=a.startGrip.y}),a.applyTheme(),a}return Object.defineProperty(o.prototype,"__end",{get:function(){return this._start},set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"end",{get:function(){return this._start},set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"start",{get:function(){return this._start},set:function(a){this._isBusy||(this.__start=a)},enumerable:!0,configurable:!0}),o}(Scrollbar);registry.registeredClasses.Slider=Slider;var TextLink=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="TextLink",a.selectable=!0;var c=new InterfaceColorSet;a.fill=c.getFor("primaryButton").brighten(.3);var d=a.states.create("hover");d.properties.fill=c.getFor("primaryButtonHover").brighten(.3);var g=a.states.create("down");return g.properties.fill=c.getFor("primaryButtonDown").brighten(.3),a.cursorOverStyle=MouseCursorStyle.pointer,a.applyTheme(),a}return o}(Label);registry.registeredClasses.TextLink=TextLink;var Filter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.properties={},a.isTemplate=!1,a._scale=1,a._nonScaling=!0,a.className="Filter",a.filterPrimitives=new List,a.properties.filterUnits="objectBoundingBox",a.filterPrimitives.events.on("inserted",function(c){a._disposers.push(c.newValue)}),a.width=120,a.height=120,a.applyTheme(),a}return o.prototype.appendPrimitives=function(a){each(this.filterPrimitives.iterator(),function(c){a.add(c)})},o.prototype.animate=function(a,c,d){var g=new Animation(this,a,c,d).start();return g},Object.defineProperty(o.prototype,"width",{get:function(){return this.properties.width},set:function(a){this.properties.width=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.properties.height},set:function(a){this.properties.height=a},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;e.prototype.copyFrom.call(this,a),each$1(a.properties,function(d,g){c[d]=g})},Object.defineProperty(o.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(a){this._paper!=a&&(this._paper=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scale",{get:function(){return this._scale},set:function(a){this._scale=a,this.updateScale()},enumerable:!0,configurable:!0}),o.prototype.updateScale=function(){},Object.defineProperty(o.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(a){this.properties.filterUnits=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(a){this._nonScaling=a,a||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sprite",{set:function(a){this.setSprite(a)},enumerable:!0,configurable:!0}),o.prototype.setSprite=function(a){this._sprite&&this._sprite!=a&&this._sprite.filters.removeValue(this),this._sprite=a},o}(BaseObject),DropShadowFilter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="DropShadowFilter",a.color=color("#000"),a.feGaussianBlur=a.paper.add("feGaussianBlur"),a.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),a.filterPrimitives.push(a.feGaussianBlur),a.feOffset=a.paper.add("feOffset"),a.feOffset.attr({result:"offsetBlur"}),a.filterPrimitives.push(a.feOffset),a.feFlood=a.paper.add("feFlood"),a.feFlood.attr({"flood-color":a.color}),a.filterPrimitives.push(a.feFlood),a.feComposite=a.paper.add("feComposite"),a.feComposite.attr({in2:"offsetBlur",operator:"in"}),a.filterPrimitives.push(a.feComposite),a.feMerge=a.paper.addGroup("feMerge"),a.feMerge.add(a.paper.add("feMergeNode")),a.feMerge.add(a.paper.add("feMergeNode").attr({in:"SourceGraphic"})),a.filterPrimitives.push(a.feMerge),a.width=200,a.height=200,a.blur=1.5,a.dx=3,a.dy=3,a.opacity=.5,a.applyTheme(),a}return Object.defineProperty(o.prototype,"color",{get:function(){return this.properties.color},set:function(a){this.properties.color=a,this.feFlood&&this.feFlood.attr({"flood-color":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(a){this.properties.opacity=a,this.feFlood.attr({"flood-opacity":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dx",{get:function(){return this.properties.dx},set:function(a){this.properties.dx=a,this.feOffset.attr({dx:a/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dy",{get:function(){return this.properties.dy},set:function(a){this.properties.dy=a,this.feOffset.attr({dy:a/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"blur",{get:function(){return this.properties.blur},set:function(a){this.properties.blur=a,this.feGaussianBlur.attr({stdDeviation:a/this.scale})},enumerable:!0,configurable:!0}),o.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},o}(Filter);registry.registeredClasses.DropShadowFilter=DropShadowFilter;var Tooltip=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},a._pointTo={x:0,y:0},a.fitPointerToBounds=!1,a._verticalOrientation="up",a.fixDoc=!0,a.className="Tooltip",a.isMeasured=!1,a.getFillFromObject=!0,a.margin(5,5,5,5),a.defaultState.transitionDuration=1,a.hiddenState.transitionDuration=1;var c=a.background;c.interactionsEnabled=!1,c.fillOpacity=.9,c.strokeWidth=1,c.strokeOpacity=1,c.stroke=color("#ffffff"),c.cornerRadius=3,c.pointerLength=6,c.pointerBaseWidth=10;var d=new DropShadowFilter;d.dy=1,d.dx=1,d.opacity=.5,c.filters.push(d),a.autoTextColor=!0;var g=a.createChild(Label);return g.shouldClone=!1,a.label=g,g.padding(7,12,4,12),g.interactionsEnabled=!1,g.horizontalCenter="middle",g.fill=color("#ffffff"),a._disposers.push(g),a.label.events.on("sizechanged",a.drawBackground,a),a.label.zIndex=1,a.pointerOrientation="vertical",a.animationDuration=0,a.animationEasing=cubicOut,a.setPropertyValue("showInViewport",!1),a.role="tooltip",a.visible=!1,a.opacity=0,a.x=0,a.y=0,a.events.on("visibilitychanged",a.handleVisibility,a),a.applyTheme(),a}return o.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(o.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(a){this.setPropertyValue("getStrokeFromObject",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(a){this.setPropertyValue("autoTextColor",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(a){var c=this;this.setPropertyValue("keepTargetHover",a,!0)&&a&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",function(d){c.targetSprite&&c.targetSprite.hoverable&&(c.targetSprite.isHover=!0)})),this._disposers.push(this.events.on("out",function(d){c.targetSprite&&c.targetSprite.hoverable&&(c.targetSprite.isHover=!1)})))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(a){this.setPropertyValue("showInViewport",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(a){this.setPropertyValue("getFillFromObject",a,!0)},enumerable:!0,configurable:!0}),o.prototype.createBackground=function(){return new PointedRectangle},Object.defineProperty(o.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(a){this.setPropertyValue("pointerOrientation",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(a){this.setPropertyValue("animationDuration",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(a){this.setPropertyValue("animationEasing",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"html",{get:function(){return this.label.html},set:function(a){this.label.html!=a&&(this.label.html=a,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"text",{get:function(){return this.label.text},set:function(a){this.label.text!=a&&(this.label.text=a,this.invalidate())},enumerable:!0,configurable:!0}),o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.label;a.invalid&&a.validate();var c=this._pointTo.x,d=this._pointTo.y,g=this._boundingRect,b=a.measuredWidth,j=a.measuredHeight,$=this.background.pointerLength,_e,st;if(this.ignoreBounds&&(g=void 0),g&&this.fixDoc&&b>g.width){spritePointToDocument({x:g.x,y:g.y},this.parent);var rt=spritePointToDocument({x:g.x+g.width,y:g.y+g.height},this.parent),ut=document.body.offsetWidth;document.body.offsetHeight,rt.x>ut/2?g.x=g.width-b:g.width=g.x+b}var gt=this.pointerOrientation;gt=="horizontal"||gt=="left"||gt=="right"?(st=-j/2,gt=="horizontal"?g&&c>g.x+g.width/2?_e=-b/2-$:_e=b/2+$:gt=="left"?_e=b/2+$:_e=-b/2-$):(g&&(_e=fitToRange(0,g.x-c+b/2,g.x-c+g.width-b/2)),gt=="vertical"?g&&d>g.y+j+$?(st=-j-$,this._verticalOrientation="up"):(st=$,this._verticalOrientation="down"):gt=="down"?(st=-j-$,this._verticalOrientation="up"):(st=$,this._verticalOrientation="down")),g&&(st=fitToRange(st,g.y-d,g.y+g.height-j-d)),a.x=_e,a.y=st,this.drawBackground()},o.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},o.prototype.drawBackground=function(){var a=this.label,c=this.background,d=a.measuredWidth,g=a.measuredHeight,b=this._boundingRect,j=d,$=a.pixelX-d/2,_e=g,st=a.pixelY,rt=this._pointTo.x,ut=this._pointTo.y,gt=b.x-rt,yt=gt+b.width,wt=b.y-ut,Ct=wt+b.height;c.x=$,c.y=st,c.width=j,c.height=_e,this.fitPointerToBounds?(c.pointerX=fitToRange(-c.x,gt-c.x,yt-c.x),c.pointerY=fitToRange(-c.y,wt-c.y,Ct-c.y)):(c.pointerX=-c.x,c.pointerY=-c.y),c.validate()},o.prototype.delayedPointTo=function(a,c){var d=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=registry.events.once("exitframe",function(){d.pointTo(a,c)}),this.addDisposer(this._pointToDisposer)},o.prototype.pointTo=function(a,c){(this._pointTo.x!=a.x||this._pointTo.y!=a.y)&&(this._pointTo=a,this.invalidate(),!this.visible||c?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):this.pixelX==0&&this.pixelY==0?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new Animation(this,[{property:"x",to:a.x,from:this.pixelX},{property:"y",to:a.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},o.prototype.setBounds=function(a){var c=this._boundingRect;(c.x!=a.x||c.y!=a.y||c.width!=a.width||c.height!=a.height)&&(this._boundingRect=a,this.invalidate())},Object.defineProperty(o.prototype,"boundingContainer",{set:function(a){this._boundingContainer=a,a.events.on("sizechanged",this.updateBounds,this),a.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),o.prototype.updateBounds=function(){var a=this._boundingContainer,c=spriteRectToSvg({x:a.pixelX,y:a.pixelY,width:a.maxWidth,height:a.maxHeight},a);this.setBounds(c)},Object.defineProperty(o.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(a){this.setPropertyValue("ignoreBounds",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.label.copyFrom(a.label),a._boundingRect&&(this._boundingRect=a._boundingRect)},o.prototype.asFunction=function(a){return a=="animationEasing"||e.prototype.asIs.call(this,a)},o}(Container);registry.registeredClasses.Tooltip=Tooltip;var Trapezoid=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Trapezoid",a.element=a.paper.add("path"),a.topSide=percent(100),a.bottomSide=percent(100),a.leftSide=percent(100),a.rightSide=percent(100),a.isMeasured=!1,a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.pixelWidth,c=this.pixelHeight,d=relativeToValue(this.topSide,a),g=relativeToValue(this.bottomSide,a),b=relativeToValue(this.leftSide,c),j=relativeToValue(this.rightSide,c),$=(a-d)/2,_e=(c-b)/2,st=a-(a-d)/2,rt=(c-j)/2,ut=a-(a-g)/2,gt=c-(c-j)/2,yt=(a-g)/2,wt=c-(c-b)/2,Ct="",Pt="",At="",Tt="";if(hasValue(this.horizontalNeck)){var kt=this.horizontalNeck.value;Ct=lineTo({x:a*kt,y:Math.max(_e,rt)}),At=lineTo({x:a*kt,y:Math.min(gt,wt)})}if(hasValue(this.verticalNeck)){var It=this.verticalNeck.value;Pt=lineTo({x:Math.min(st,ut),y:c*It}),Tt=lineTo({x:Math.max($,yt),y:c*It})}var Lt=moveTo({x:$,y:_e})+Ct+lineTo({x:st,y:rt})+Pt+lineTo({x:ut,y:gt})+At+lineTo({x:yt,y:wt})+Tt;this.path=Lt},Object.defineProperty(o.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(a){this.setPercentProperty("topSide",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(a){this.setPercentProperty("bottomSide",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(a){this.setPercentProperty("leftSide",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(a){this.setPercentProperty("rightSide",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(a){this.setPropertyValue("horizontalNeck",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(a){this.setPropertyValue("verticalNeck",a,!0)},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Trapezoid=Trapezoid;var Triangle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Triangle",a.element=a.paper.add("path"),a.direction="top",a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.pixelWidth,c=this.pixelHeight,d;switch(this.direction){case"right":d=moveTo({x:0,y:0})+lineTo({x:a,y:c/2})+lineTo({x:0,y:c})+closePath();break;case"left":d=moveTo({x:a,y:0})+lineTo({x:0,y:c/2})+lineTo({x:a,y:c})+closePath();break;case"bottom":d=moveTo({x:0,y:0})+lineTo({x:a,y:0})+lineTo({x:a/2,y:c})+closePath();break;case"top":d=moveTo({x:a/2,y:0})+lineTo({x:a,y:c})+lineTo({x:0,y:c})+closePath();break}this.path=d},Object.defineProperty(o.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(a){this.setPropertyValue("direction",a,!0)},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Triangle=Triangle;var Tension=function(){function e(o,a){this._tensionX=o,this._tensionY=a}return e.prototype.smooth=function(o){for(var a=o.length-1;a>0;a--){var c=o[a],d=o[a-1];Math.abs(c.x-d.x)<.1&&Math.abs(c.y-d.y)<.1&&o.splice(a-1,1)}var g=this._tensionX,b=this._tensionY;if(o.length<3||g>=1&&b>=1)return polyline(o);var j=o[0],$=o[o.length-1],_e=!1;round$1(j.x,3)==round$1($.x)&&round$1(j.y)==round$1($.y)&&(_e=!0);for(var st="",a=0,rt=o.length-1;a<rt;a++){var c=o[a-1],d=o[a],ut=o[a+1],gt=o[a+2];a===0?_e?c=o[o.length-2]:c=o[a]:a==o.length-2&&(_e?gt=o[1]:gt=o[a+1]);var yt=getCubicControlPointA(c,d,ut,gt,g,b),wt=getCubicControlPointB(c,d,ut,gt,g,b);st+=cubicCurveTo(ut,yt,wt)}return st},e}();function wavedLine(e,o,a,c,d,g){var b=e.x,j=e.y,$=o.x,_e=o.y,st=getDistance(e,o);g&&(a=st/Math.round(st/a));var rt=registry.getCache(stringify(["wavedLine",e.x,o.x,e.y,o.y,a,c]));if(!rt){if(st>0){var ut=Math.atan2(_e-j,$-b),gt=Math.cos(ut),yt=Math.sin(ut),wt=a*gt,Ct=a*yt;if(a<=1||c<=1)rt=lineTo(o);else{var Pt=Math.round(2*st/a),At=[],Tt=1;$<b&&(Tt*=-1),_e<j&&(Tt*=-1);for(var kt=0;kt<=Pt;kt++){Tt*=-1;var It=b+kt*wt/2+Tt*c/2*yt,Lt=j+kt*Ct/2-Tt*c/2*gt;At.push({x:It,y:Lt})}rt=new Tension(d,d).smooth(At)}}else rt="";registry.setCache(stringify(["wavedLine",e.x,o.x,e.y,o.y,a,c]),rt)}return rt}var Monotone=function(){function e(o,a){this._reversed=o,this._closed=a.closed}return e.prototype._curve=function(o,a,c,d,g,b){var j=(a-o)/3;return this._reversed?cubicCurveTo({x:d,y:a},{x:c+j*g,y:o+j},{x:d-j*b,y:a-j}):cubicCurveTo({x:a,y:d},{x:o+j,y:c+j*g},{x:a-j,y:d-j*b})},e.prototype.smooth=function(o){var a=this,c=NaN,d=NaN,g=NaN,b=NaN,j=NaN,$=0,_e="";switch(each$2(o,function(st){var rt=st.x,ut=st.y;if(a._reversed){var gt=rt;rt=ut,ut=gt}var yt=NaN;if(!(rt===d&&ut===b)){switch($){case 0:$=1,a._reversed?_e+=lineTo({x:ut,y:rt}):_e+=lineTo({x:rt,y:ut});break;case 1:$=2;break;case 2:$=3,_e+=a._curve(c,d,g,b,slope2(c,d,g,b,yt=slope3(c,d,g,b,rt,ut)),yt);break;default:_e+=a._curve(c,d,g,b,j,yt=slope3(c,d,g,b,rt,ut));break}c=d,d=rt,g=b,b=ut,j=yt}}),$){case 2:this._reversed?_e+=lineTo({x:b,y:d}):_e+=lineTo({x:d,y:b});break;case 3:_e+=this._curve(c,d,g,b,j,slope2(c,d,g,b,j));break}return this._closed&&(_e+=closePath()),_e},e}();function sign(e){return e<0?-1:1}function slope2(e,o,a,c,d){var g=o-e;return g?(3*(c-a)/g-d)/2:d}function slope3(e,o,a,c,d,g){var b=o-e,j=d-o,$=(c-a)/(b||j<0&&-0),_e=(g-c)/(j||b<0&&-0),st=($*j+_e*b)/(b+j);return(sign($)+sign(_e))*Math.min(Math.abs($),Math.abs(_e),.5*Math.abs(st))||0}var MonotoneX=function(e){__extends(o,e);function o(a){return e.call(this,!1,a)||this}return o}(Monotone),MonotoneY=function(e){__extends(o,e);function o(a){return e.call(this,!0,a)||this}return o}(Monotone),Basis=function(){function e(o){this._closed=o.closed}return e.prototype.smooth=function(o){var a=this,c=NaN,d=NaN,g=NaN,b=NaN,j=NaN,$=NaN,_e=NaN,st=NaN,rt=NaN,ut=NaN,gt=0,yt="",wt=function(Pt,At){yt+=cubicCurveTo({x:(c+4*d+Pt)/6,y:($+4*_e+At)/6},{x:(2*c+d)/3,y:(2*$+_e)/3},{x:(c+2*d)/3,y:($+2*_e)/3})},Ct=function(Pt){var At=Pt.x,Tt=Pt.y;switch(gt){case 0:gt=1,a._closed?(g=At,st=Tt):yt+=lineTo({x:At,y:Tt});break;case 1:gt=2,a._closed&&(b=At,rt=Tt);break;case 2:if(gt=3,a._closed){j=At,ut=Tt,yt+=moveTo({x:(c+4*d+At)/6,y:($+4*_e+Tt)/6});break}else yt+=lineTo({x:(5*c+d)/6,y:(5*$+_e)/6});default:wt(At,Tt);break}c=d,d=At,$=_e,_e=Tt};if(each$2(o,Ct),this._closed)switch(gt){case 1:yt+=moveTo({x:g,y:st}),yt+=closePath();break;case 2:yt+=moveTo({x:(g+2*b)/3,y:(st+2*rt)/3}),yt+=lineTo({x:(b+2*g)/3,y:(rt+2*st)/3}),yt+=closePath();break;case 3:Ct({x:g,y:st}),Ct({x:b,y:rt}),Ct({x:j,y:ut});break}else{switch(gt){case 3:wt(d,_e);case 2:yt+=lineTo({x:d,y:_e});break}yt+=closePath()}return yt},e}(),WavedCircle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="WavedCircle",a.element=a.paper.add("path"),a.waveLength=16,a.waveHeight=4,a.fill=void 0,a.fillOpacity=0,a.tension=.8,a.applyTheme(),a}return o.prototype.draw=function(){var a="",c=this.pixelRadius;if(c>0){var d=this.getPoints(c);a=moveTo(d[0])+new Tension(this.tension,this.tension).smooth(d)}var g=this.pixelInnerRadius;if(g>0){var d=this.getPoints(g);d.reverse(),a+=moveTo(d[0])+new Tension(this.tension,this.tension).smooth(d)}this.path=a},o.prototype.getPoints=function(a){for(var c=a*Math.PI*2,d=this.waveHeight/2,g=c/Math.round(c/this.waveLength),b=g/2,j=[],$=c/g,_e=0;_e<=$;_e++){var st=_e*g/c*360,rt=(_e*g+b)/c*360;j.push({x:(a-d)*cos(st),y:(a-d)*sin(st)}),j.push({x:(a+d)*cos(rt),y:(a+d)*sin(rt)})}return j.pop(),j},Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){return relativeToValue(this.innerRadius,min$1(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(a){this.setPropertyValue("waveLength",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(a){this.setPropertyValue("waveHeight",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(a){this.setPropertyValue("tension",a),this.invalidate()},enumerable:!0,configurable:!0}),o}(Circle);registry.registeredClasses.WavedCircle=WavedCircle;var WavedLine=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="WavedLine",a.element=a.paper.add("path"),a.waveLength=16,a.waveHeight=4,a.tension=.8,a.pixelPerfect=!1,a.fill=color(),a.applyTheme(),a}return o.prototype.draw=function(){var a={x:this.x1,y:this.y1},c={x:this.x2,y:this.y2};this.path=moveTo(a)+wavedLine(a,c,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(o.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(a){this.setPropertyValue("waveLength",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(a){this.setPropertyValue("waveHeight",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(a){this.setPropertyValue("tension",a),this.invalidate()},enumerable:!0,configurable:!0}),o}(Line),WavedRectangle=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="WavedRectangle",a.element=a.paper.add("path"),a.waveLength=16,a.waveHeight=4,a.tension=.8,a.setPropertyValue("wavedLeft",!0),a.setPropertyValue("wavedRight",!0),a.setPropertyValue("wavedTop",!0),a.setPropertyValue("wavedBottom",!0),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.pixelWidth,c=this.pixelHeight;if(a>0&&c>0){var d={x:0,y:0},g={x:a,y:0},b={x:a,y:c},j={x:0,y:c},$=Math.min(a,this.waveLength),_e=Math.min(c,this.waveHeight),st=Math.min(c,this.waveLength),rt=Math.min(a,this.waveHeight),ut="",gt="",yt="",wt="";this.wavedTop&&(ut=wavedLine(d,g,$,_e,this.tension,!0)),this.wavedRight&&(gt=wavedLine(g,b,st,rt,this.tension,!0)),this.wavedBottom&&(yt=wavedLine(b,j,$,_e,this.tension,!0)),this.wavedLeft&&(wt=wavedLine(j,d,st,rt,this.tension,!0)),this.path=moveTo(d)+ut+lineTo(g)+gt+lineTo(b)+yt+lineTo(j)+wt+"z"}},Object.defineProperty(o.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(a){this.setPropertyValue("waveLength",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(a){this.setPropertyValue("waveHeight",a),this.invalidate()},enumerable:!0,configurable:!0}),o.prototype.setWavedSides=function(a,c,d,g){this.wavedTop=a,this.wavedRight=c,this.wavedBottom=d,this.wavedLeft=g},Object.defineProperty(o.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(a){this.setPropertyValue("tension",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(a){this.setPropertyValue("wavedRight",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(a){this.setPropertyValue("wavedLeft",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(a){this.setPropertyValue("wavedTop",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(a){this.setPropertyValue("wavedBottom",a,!0)},enumerable:!0,configurable:!0}),o}(Rectangle),ZoomOutButton=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="ZoomOutButton",a.padding(9,9,9,9),a.showSystemTooltip=!0;var c=new InterfaceColorSet,d=a.background;d.cornerRadius(20,20,20,20),d.fill=c.getFor("primaryButton"),d.stroke=c.getFor("primaryButtonStroke"),d.strokeOpacity=0,d.states.getKey("hover").properties.fill=c.getFor("primaryButtonHover"),d.states.getKey("down").properties.fill=c.getFor("primaryButtonActive");var g=new Sprite;g.element=a.paper.add("path");var b=moveTo({x:0,y:0});return b+=lineTo({x:11,y:0}),g.path=b,g.pixelPerfect=!0,g.padding(8,3,8,3),g.stroke=c.getFor("primaryButtonText"),a.icon=g,a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},o}(Button);registry.registeredClasses.ZoomOutButton=ZoomOutButton;var PlayButton=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="PlayButton",a.padding(12,12,12,12),a.showSystemTooltip=!0;var c=new InterfaceColorSet,d=a.background;d.cornerRadius(25,25,25,25),d.fill=c.getFor("primaryButton"),d.stroke=c.getFor("primaryButtonStroke"),d.strokeOpacity=0,d.states.getKey("hover").properties.fill=c.getFor("primaryButtonHover"),d.states.getKey("down").properties.fill=c.getFor("primaryButtonActive");var g=new Triangle;g.direction="right",g.width=9,g.height=11,g.marginLeft=1,g.marginRight=1,g.horizontalCenter="middle",g.verticalCenter="middle",g.stroke=c.getFor("primaryButtonText"),g.fill=g.stroke,a.icon=g;var b=new RoundedRectangle;b.width=11,b.height=11,b.horizontalCenter="middle",b.verticalCenter="middle",b.cornerRadius(0,0,0,0),b.stroke=c.getFor("primaryButtonText"),b.fill=g.stroke,a.togglable=!0;var j=a.states.create("active");return j.transitionDuration=0,j.properties.icon=b,a.defaultState.transitionDuration=0,a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},o}(Button);registry.registeredClasses.PlayButton=PlayButton;var ColorModifier=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ColorModifier",a.applyTheme(),a}return o.prototype.modify=function(a){return a},o}(BaseObject);registry.registeredClasses.ColorModifier=ColorModifier;var GradientModifier=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.lightnesses=[],a.brightnesses=[],a.opacities=[],a.offsets=[],a.className="GradientModifier",a.applyTheme(),a}return Object.defineProperty(o.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(a){this._lightnesses=a,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(a){this._brightnesses=a,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"opacities",{get:function(){return this._opacities},set:function(a){this._opacities=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"offsets",{get:function(){return this._offsets},set:function(a){this._offsets=a},enumerable:!0,configurable:!0}),o.prototype.modify=function(a){this.gradient.clear();var c=0;this.opacities&&(c=max$1(c,this.opacities.length)),this.lightnesses&&(c=max$1(c,this.lightnesses.length)),this.brightnesses&&(c=max$1(c,this.brightnesses.length));for(var d=1,g,b,j=0;j<c;j++){var $=a;this.opacities&&isNumber$1(this.opacities[j])&&(d=this.opacities[j]),this.lightnesses&&isNumber$1(this.lightnesses[j])&&(g=this.lightnesses[j],b=void 0),this.brightnesses&&isNumber$1(this.brightnesses[j])&&(b=this.brightnesses[j],g=void 0),isNumber$1(b)?$=a.brighten(this.brightnesses[j]):isNumber$1(g)&&($=a.lighten(this.lightnesses[j]));var _e=this.offsets[j];this.gradient.addColor($,d,_e)}return this.gradient},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this._offsets=a.offsets,this._brightnesses=a.brightnesses,this._lightnesses=a.lightnesses,this._opacities=a.opacities},o}(ColorModifier);registry.registeredClasses.GradientModifier=GradientModifier;var LinearGradientModifier=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="LinearGradientModifier",a.gradient=new LinearGradient,a.applyTheme(),a}return o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.gradient=a.gradient.clone()},o}(GradientModifier);registry.registeredClasses.LinearGradientModifier=LinearGradientModifier;var Cone=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Cone",a.angle=30,a.radius=percent(100),a.topRadius=percent(100),a.top=a.createChild(Ellipse),a.top.shouldClone=!1,a.bottom=a.createChild(Ellipse),a.bottom.shouldClone=!1,a.body=a.createChild(Sprite),a.body.shouldClone=!1,a.body.setElement(a.paper.add("path")),a.layout="none",a.bodyFillModifier=new LinearGradientModifier,a.bodyFillModifier.lightnesses=[0,-.25,0],a.body.fillModifier=a.bodyFillModifier,a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this),copyProperties$1(this,this.top,visualProperties),copyProperties$1(this,this.bottom,visualProperties),copyProperties$1(this,this.body,visualProperties);var a=this.innerWidth,c=this.innerHeight,d=this.bottom,g=this.top,b=this.angle,j,$,_e;this.orientation=="horizontal"?(j=c/2,d.y=c/2,d.x=0,g.y=c/2,g.x=a,$=(90-b)/90,_e=0,this.bodyFillModifier.gradient.rotation=90):($=0,_e=(90-b)/90,j=a/2,d.y=c,d.x=a/2,g.x=a/2,this.bodyFillModifier.gradient.rotation=0);var st=this.radius.value*j,rt=this.topRadius.value*j;d.radius=st-st*$,d.radiusY=st-st*_e,g.radius=rt-rt*$,g.radiusY=rt-rt*_e;var ut;this.orientation=="horizontal"?ut=moveTo({x:0,y:c/2-d.radiusY})+arcTo(-90,-180,d.radius,d.radiusY)+lineTo({x:a,y:c/2+g.radiusY})+arcTo(90,180,g.radius,g.radiusY)+closePath():ut=moveTo({x:a/2-g.radius,y:0})+arcTo(180,-180,g.radius,g.radiusY)+lineTo({x:a/2+d.radius,y:c})+arcTo(0,180,d.radius,d.radiusY)+closePath(),this.body.path=ut},Object.defineProperty(o.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(a){this.setPropertyValue("angle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPropertyValue("radius",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(a){this.setPropertyValue("topRadius",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a,!0)},enumerable:!0,configurable:!0}),o}(Container),LightenFilter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="LightenFilter",a.feColorMatrix=a.paper.add("feColorMatrix"),a.feColorMatrix.attr({type:"matrix"}),a.filterPrimitives.push(a.feColorMatrix),a.lightness=0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(a){this.properties.lightness=a;var c=a+1;this.feColorMatrix.attr({values:c+" 0 0 0 0 0 "+c+" 0 0 0 0 0 "+c+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),o}(Filter);registry.registeredClasses.LightenFilter=LightenFilter;var Rectangle3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.angle=30,a.depth=30,a.className="Rectangle3D",a.layout="none";var c=a.createChild(Sprite);c.shouldClone=!1,c.setElement(a.paper.add("path")),c.isMeasured=!1,a.sideBack=c,a._disposers.push(a.sideBack);var d=a.createChild(Sprite);d.shouldClone=!1,d.setElement(a.paper.add("path")),d.isMeasured=!1,a.sideBottom=d,a._disposers.push(a.sideBottom);var g=a.createChild(Sprite);g.shouldClone=!1,g.setElement(a.paper.add("path")),g.isMeasured=!1,a.sideLeft=g,a._disposers.push(a.sideLeft);var b=a.createChild(Sprite);b.shouldClone=!1,b.setElement(a.paper.add("path")),b.isMeasured=!1,a.sideRight=b,a._disposers.push(a.sideRight);var j=a.createChild(Sprite);j.shouldClone=!1,j.setElement(a.paper.add("path")),j.isMeasured=!1,a.sideTop=j,a._disposers.push(a.sideTop);var $=a.createChild(Sprite);return $.shouldClone=!1,$.setElement(a.paper.add("path")),$.isMeasured=!1,a.sideFront=$,a._disposers.push(a.sideFront),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.innerWidth,c=this.innerHeight,d=this.depth,g=this.angle,b=sin(g),j=cos(g),$={x:0,y:0},_e={x:a,y:0},st={x:a,y:c},rt={x:0,y:c},ut={x:d*j,y:-d*b},gt={x:d*j+a,y:-d*b},yt={x:d*j+a,y:-d*b+c},wt={x:d*j,y:-d*b+c};this.sideFront.path=moveTo($)+lineTo(_e)+lineTo(st)+lineTo(rt)+closePath(),this.sideBack.path=moveTo(ut)+lineTo(gt)+lineTo(yt)+lineTo(wt)+closePath(),this.sideLeft.path=moveTo($)+lineTo(ut)+lineTo(wt)+lineTo(rt)+closePath(),this.sideRight.path=moveTo(_e)+lineTo(gt)+lineTo(yt)+lineTo(st)+closePath(),this.sideBottom.path=moveTo(rt)+lineTo(wt)+lineTo(yt)+lineTo(st)+closePath(),this.sideTop.path=moveTo($)+lineTo(ut)+lineTo(gt)+lineTo(_e)+closePath()},Object.defineProperty(o.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(a){this.setPropertyValue("depth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(a){this.setPropertyValue("angle",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setFill=function(a){e.prototype.setFill.call(this,a),(!isObject$1(a)||"r"in a)&&(a=toColor(a));var c;if(a instanceof Color)c=a.hex;else if(a instanceof LinearGradient||a instanceof RadialGradient)c=a.stops.getIndex(0).color.hex;else{var d=new LightenFilter;d.lightness=-.2,this.sideBack.filters.push(d);var g=d.clone();g.lightness=-.4,this.sideLeft.filters.push(g);var b=d.clone();b.lightness=-.2,this.sideRight.filters.push(b);var j=d.clone();j.lightness=-.1,this.sideTop.filters.push(j);var $=d.clone();$.lightness=-.5,this.sideBottom.filters.push($)}c&&(this.sideBack.fill=color(c).lighten(-.2),this.sideLeft.fill=color(c).lighten(-.4),this.sideRight.fill=color(c).lighten(-.2),this.sideTop.fill=color(c).lighten(-.1),this.sideBottom.fill=color(c).lighten(-.5))},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.sideBack.copyFrom(a.sideBack),this.sideLeft.copyFrom(a.sideLeft),this.sideRight.copyFrom(a.sideRight),this.sideTop.copyFrom(a.sideTop),this.sideBottom.copyFrom(a.sideBottom)},o}(Container),Slice3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Slice3D",a.layout="none";var c=a.createChild(Sprite);a.edge=c,c.shouldClone=!1,c.isMeasured=!1,c.toBack(),a.angle=30,a.depth=20;var d=a.createChild(Sprite);a.sideA=d,d.shouldClone=!1,d.isMeasured=!1;var g=a.createChild(Sprite);return a.sideB=g,g.shouldClone=!1,g.isMeasured=!1,a.applyTheme(),a}return o.prototype.setFill=function(a){e.prototype.setFill.call(this,a);var c;if(a instanceof Color)c=a.hex;else if(a instanceof LinearGradient||a instanceof RadialGradient)c=a.stops.getIndex(0).color.hex;else{var d=new LightenFilter;d.lightness=-.25,this.edge.filters.push(d),this.sideA.filters.push(d.clone()),this.sideB.filters.push(d.clone())}if(c){var g=color(c).lighten(-.25);this.edge.fill=g,this.sideA.fill=g,this.sideB.fill=g,this.edge.stroke=g,this.sideA.stroke=g,this.sideB.stroke=g}},o.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,e.prototype.draw.call(this),this.arc!==0&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var a=this.startAngle,c=this.arc,d=this.pixelInnerRadius||0,g=this.radiusY||0,b=this.radius,j=a+c,$=g/b*d,_e={x:cos(a)*d,y:sin(a)*$},st={x:cos(a)*b,y:sin(a)*g},rt={x:cos(j)*b,y:sin(j)*g},ut={x:cos(j)*d,y:sin(j)*$},gt=this.depth,yt={x:_e.x,y:_e.y-gt},wt={x:st.x,y:st.y-gt},Ct={x:rt.x,y:rt.y-gt},Pt={x:ut.x,y:ut.y-gt},At="",Tt=Math.ceil(c/5),kt=c/Tt,It=a,Lt=wt,Ft=0;Ft<Tt;Ft++)if(It+=kt,It>0&&It<180){At+=moveTo(Lt);var Nt={x:cos(It)*b,y:sin(It)*g-gt};At+=lineTo({x:Lt.x,y:Lt.y+gt}),At+=arcToPoint({x:Nt.x,y:Nt.y+gt},b,g,!0),At+=lineTo(Nt),At+=arcToPoint(Lt,b,g),At+="z",Lt=Nt}else{At+=moveTo(Lt);var Nt={x:cos(It)*b,y:sin(It)*g-gt};At+=arcToPoint(Nt,b,g,!0),At+=lineTo({x:Nt.x,y:Nt.y+gt}),At+=arcToPoint({x:Lt.x,y:Lt.y+gt},b,g),At+=lineTo(Lt),At+="z",Lt=Nt}Lt=yt,It=a;for(var Ft=0;Ft<Tt;Ft++)if(It+=kt,It>0&&It<180){At+=moveTo(Lt);var Nt={x:cos(It)*d,y:sin(It)*$-gt};At+=lineTo({x:Lt.x,y:Lt.y+gt}),At+=arcToPoint({x:Nt.x,y:Nt.y+gt},d,$,!0),At+=lineTo(Nt),At+=arcToPoint(Lt,d,$),At+="z",Lt=Nt}else{At+=moveTo(Lt);var Nt={x:cos(It)*d,y:sin(It)*$-gt};At+=arcToPoint(Nt,d,$,!0),At+=lineTo({x:Nt.x,y:Nt.y+gt}),At+=arcToPoint({x:Lt.x,y:Lt.y+gt},d,$),At+=lineTo(Lt),At+="z",Lt=Nt}this.edge.path=At,this.sideA.path=moveTo(_e)+lineTo(st)+lineTo(wt)+lineTo(yt)+closePath(),this.sideB.path=moveTo(rt)+lineTo(ut)+lineTo(Pt)+lineTo(Ct)+closePath(),this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-gt}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(o.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(a){this.setPropertyValue("depth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){var a=this.getPropertyValue("angle");return isNumber$1(a)||(a=0),a},set:function(a){this.setPropertyValue("angle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radiusY",{get:function(){var a=this.getPropertyValue("radiusY");return isNumber$1(a)||(a=this.radius-this.radius*this.angle/90),a},set:function(a){this.setPropertyValue("radiusY",a,!0)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.edge.copyFrom(a.edge),this.sideA.copyFrom(a.sideA),this.sideB.copyFrom(a.sideB)},o}(Slice),RadialGradientModifier=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadialGradientModifier",a.gradient=new RadialGradient,a.applyTheme(),a}return o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.gradient=a.gradient.clone()},o}(GradientModifier);registry.registeredClasses.RadialGradientModifier=RadialGradientModifier;var LinePattern=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.properties.gap=0,a._line=a.paper.add("path"),a.addElement(a._line),a}return o.prototype.draw=function(){if(e.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var a=this.width,c=this.height,d="";if(!this.gap)Math.round(this.rotation/90)!=this.rotation/90?(d=moveTo({x:-a,y:c/2})+lineTo({x:a*2,y:c/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):d=moveTo({x:0,y:0})+lineTo({x:a,y:0});else for(var g=this.gap+this.strokeWidth,b=this.height/g,j=-b/2;j<b*1.5;j++)Math.round(this.rotation/90)!=this.rotation/90?(d+=moveTo({x:-a,y:(j+.5)*g})+lineTo({x:a*2,y:(j+.5)*g}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):d+=moveTo({x:-a,y:j*g})+lineTo({x:a*2,y:j*g});this._line.attr({d})}},Object.defineProperty(o.prototype,"gap",{get:function(){return this.properties.gap},set:function(a){this.properties.gap=a,this.draw()},enumerable:!0,configurable:!0}),o}(Pattern);registry.registeredClasses.LinePattern=LinePattern;var CirclePattern=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.properties.radius=2,a._circle=a.paper.add("circle"),a.addElement(a._circle),a.shapeRendering="auto",a}return o.prototype.draw=function(){e.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(o.prototype,"radius",{get:function(){return this.properties.radius},set:function(a){this.properties.radius=a,this.draw()},enumerable:!0,configurable:!0}),o}(Pattern);registry.registeredClasses.CirclePattern=CirclePattern;var RectPattern=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.rectHeight=1,a.rectWidth=1,a._rect=a.paper.add("rect"),a.addElement(a._rect),a}return o.prototype.draw=function(){e.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(o.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(a){this.properties.rectWidth=a,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(a){this.properties.rectHeight=a,this.draw()},enumerable:!0,configurable:!0}),o}(Pattern);registry.registeredClasses.RectPattern=RectPattern;var ColorizeFilter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ColorizeFilter",a.feColorMatrix=a.paper.add("feColorMatrix"),a.feColorMatrix.attr({type:"matrix"}),a.filterPrimitives.push(a.feColorMatrix),a.intensity=1,a.applyTheme(),a}return o.prototype.applyFilter=function(){var a=this.intensity,c=1-a,d,g,b,j=this.color;j&&j.rgb?(d=j.rgb.r/255*a,g=j.rgb.g/255*a,b=j.rgb.b/255*a):(d=0,g=0,b=0),this.feColorMatrix.attr({values:c+" 0 0 0 "+d+" 0 "+c+" 0 0 "+g+" 0 0 "+c+" 0 "+b+" 0 0 0 1 0"})},Object.defineProperty(o.prototype,"color",{get:function(){return this.properties.color},set:function(a){this.properties.color=a,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(a){this.properties.intensity=a,this.applyFilter()},enumerable:!0,configurable:!0}),o}(Filter);registry.registeredClasses.ColorizeFilter=ColorizeFilter;var DesaturateFilter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="DesaturateFilter",a.feColorMatrix=a.paper.add("feColorMatrix"),a.feColorMatrix.attr({type:"saturate"}),a.filterPrimitives.push(a.feColorMatrix),a.width=120,a.height=120,a.saturation=0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(a){this.properties.saturation=a,this.feColorMatrix.attr({values:a.toString()})},enumerable:!0,configurable:!0}),o}(Filter);registry.registeredClasses.DesaturateFilter=DesaturateFilter;var BlurFilter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="BlurFilter",a.feGaussianBlur=a.paper.add("feGaussianBlur"),a.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),a.filterPrimitives.push(a.feGaussianBlur),a.width=200,a.height=200,a.blur=1.5,a.applyTheme(),a}return Object.defineProperty(o.prototype,"blur",{get:function(){return this.properties.blur},set:function(a){this.properties.blur=a,this.feGaussianBlur.attr({stdDeviation:a/this.scale})},enumerable:!0,configurable:!0}),o}(Filter);registry.registeredClasses.BlurFilter=BlurFilter;var FocusFilter=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="FocusFilter",a.feFlood=a.paper.add("feFlood"),a.feFlood.attr({"flood-color":new InterfaceColorSet().getFor("primaryButtonHover"),result:"base"}),a.filterPrimitives.push(a.feFlood),a.feMorphology=a.paper.add("feMorphology"),a.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),a.filterPrimitives.push(a.feMorphology),a.feColorMatrix=a.paper.add("feColorMatrix"),a.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),a.filterPrimitives.push(a.feColorMatrix),a.feComposite=a.paper.add("feComposite"),a.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),a.filterPrimitives.push(a.feComposite),a.feBlend=a.paper.add("feBlend"),a.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),a.filterPrimitives.push(a.feBlend),a.width=130,a.height=130,a.applyTheme(),a}return Object.defineProperty(o.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(a){this.properties.stroke=a,this.feFlood.attr({"flood-color":a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(a){this.properties.strokeWidth=a,this.feMorphology.attr({radius:a})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(a){this.properties.opacity=a,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+a+" 0"})},enumerable:!0,configurable:!0}),o.prototype.setSprite=function(a){this._sprite&&this._sprite!=a&&this._sprite.group.removeStyle("outline"),a.group.addStyle({outline:"none"}),e.prototype.setSprite.call(this,a)},o}(Filter),ColorSet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._list=[],a._currentStep=0,a._startIndex=0,a._currentPass=0,a.baseColor=new Color({r:103,g:183,b:220}),a.stepOptions={},a.passOptions={brighten:-.2},a.step=1,a.minColors=20,a.minLightness=.2,a.maxLightness=.9,a.shuffle=!1,a.wrap=!0,a.reuse=!1,a.saturation=1,a.className="ColorSet",a.applyTheme(),a}return Object.defineProperty(o.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(a){this._list=a,this.reset()},enumerable:!0,configurable:!0}),o.prototype.getReusableColor=function(a){if(this._list.length==0)return this.generate(1),this.list[0];var c=a-Math.floor(a/this._list.length)*this.list.length;return this.list[c]},o.prototype.next=function(){var a;return this.list.length<=this._currentStep?this.reuse?a=this.getReusableColor(this._currentStep):(this.generate(max$1(this.minColors,this._currentStep+1)),a=this.list[this._currentStep]):a=this.list[this._currentStep],this._currentStep+=this.step,a.saturate(this.saturation)},o.prototype.getIndex=function(a){var c;return this.list.length<=a?this.reuse?c=this.getReusableColor(a):(this.generate(this.minColors),c=this.getIndex(a)):c=this.list[a],c.saturate(this.saturation)},o.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(o.prototype,"currentStep",{get:function(){return this._currentStep},set:function(a){this._currentStep=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startIndex",{get:function(){return this._startIndex},set:function(a){this._startIndex=a,this.reset()},enumerable:!0,configurable:!0}),o.prototype.generate=function(a){var c=this.currentColor,d=rgbToHsl(getValue(c.rgb)),g=hasValue(this.stepOptions.hue)?this.stepOptions.hue:1/a,b={brighten:0,lighten:0,hue:d.h,lightness:d.l,saturation:d.s},j=[],$=this.list.length==0?0:1;if(this.reuse)for(var _e=$;_e<=a;_e++)j.push(rgbToHsl(getValue(this._list[_e].rgb)).h);else for(var _e=$;_e<=a;_e++){var st=d.h+g*_e;this.wrap&&st>1&&(st-=1),j.push(st)}this.shuffle&&j.sort(function(yt,wt){return Math.random()-.5});for(var _e=0;_e<a;_e++){this.reuse?d=rgbToHsl(getValue(this._list[_e].rgb)):d.h=j.shift(),this.applyStepOptions(d,b,_e,this._currentPass);var rt=color(hslToRgb(d)),ut=(this.stepOptions.brighten||0)*_e+(this.passOptions.brighten||0)*this._currentPass;ut!=0&&(this.wrap?ut=fitNumberRelative(ut,this.minLightness,this.maxLightness):ut=fitNumber(ut,this.minLightness,this.maxLightness),rt=rt.brighten(ut));var gt=(this.stepOptions.lighten||0)*_e+(this.passOptions.lighten||0)*this._currentPass;gt!=0&&(this.wrap?gt=fitNumberRelative(gt,this.minLightness,this.maxLightness):gt=fitNumber(gt,this.minLightness,this.maxLightness),rt=rt.lighten(gt)),this._list.push(rt)}this._currentPass++},Object.defineProperty(o.prototype,"currentColor",{get:function(){return this._list.length==0?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),o.prototype.applyStepOptions=function(a,c,d,g){a.l=c.lightness+(this.stepOptions.lightness||0)*d+(this.passOptions.lightness||0)*g,this.wrap?(a.l>1?a.l=a.l-Math.floor(a.l):a.l<0&&(a.l=-(a.l-Math.floor(a.l))),a.l=fitNumberRelative(a.l,this.minLightness,this.maxLightness)):(a.l>1?a.l=1:a.l<0&&(a.l=0),a.l=fitNumber(a.l,this.minLightness,this.maxLightness))},o.prototype.processConfig=function(a){if(a){if(hasValue(a.list)&&isArray$1(a.list))for(var c=0,d=a.list.length;c<d;c++)a.list[c]instanceof Color||(a.list[c]=color(a.list[c]));hasValue(a.baseColor)&&!(a.baseColor instanceof Color)&&(a.baseColor=color(a.baseColor))}e.prototype.processConfig.call(this,a)},o}(BaseObject);registry.registeredClasses.ColorSet=ColorSet;var PatternSet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._list=[],a._currentStep=0,a._startIndex=0,a._currentPass=0,a.baseColor=new Color({r:103,g:183,b:220}),a.className="PatternSet";var c=new InterfaceColorSet;return a.list=[a.getLinePattern(1e3,45,1,6),a.getRectPattern(10,0,4),a.getLinePattern(1e3,-45,1,6),a.getCirclePattern(11,2,!0),a.getLinePattern(6,90,1),a.getRectPattern(12,45,6,!0),a.getLinePattern(6,0,1),a.getRectPattern(7,0,4),a.getLinePattern(1e3,45,2,3,"4,2"),a.getCirclePattern(9,3,!1),a.getLinePattern(1e3,-45,2,3,"4,2"),a.getRectPattern(10,45,Math.sqrt(50)),a.getLinePattern(1e3,-45,2,1),a.getRectPattern(10,0,9),a.getLinePattern(1e3,45,2,1),a.getLinePattern(1e3,0,3,1),a.getRectPattern(10,45,10),a.getLinePattern(1e3,90,3,1)],a.baseColor=c.getFor("stroke"),a.applyTheme(),a}return o.prototype.getLinePattern=function(a,c,d,g,b){var j=new LinePattern;return j.width=a,j.height=a,j.stroke=this.baseColor,j.gap=g,j.strokeDasharray=b,j.strokeWidth=d,j.rotation=c,j},o.prototype.getRectPattern=function(a,c,d,g){var b=new RectPattern;return b.width=a,b.height=a,b.rectWidth=d,b.rectHeight=d,g?(b.stroke=this.baseColor,b.strokeWidth=1,b.fillOpacity=0):(b.fill=this.baseColor,b.strokeWidth=0),c!=0&&(b.shapeRendering="auto"),b.rotation=c,b},o.prototype.getCirclePattern=function(a,c,d){var g=new CirclePattern;return g.width=a,g.height=a,g.shapeRendering="auto",g.radius=c,d?(g.stroke=this.baseColor,g.strokeWidth=1,g.fillOpacity=0):(g.fill=this.baseColor,g.strokeWidth=0),g},Object.defineProperty(o.prototype,"list",{get:function(){return this._list},set:function(a){this._list=a,this.reset()},enumerable:!0,configurable:!0}),o.prototype.next=function(){var a=this.getIndex(this.currentStep);return this._currentStep++,a},o.prototype.getIndex=function(a){for(var c;this.list.length<=a;)this.generatePatterns();return c=this.list[a],c.clone()},o.prototype.generatePatterns=function(){var a=this.list.length/(this._currentPass+1);this._currentPass++;for(var c=0;c<a;c++)this.list.push(this.list[c].clone())},o.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(o.prototype,"currentStep",{get:function(){return this._currentStep},set:function(a){this._currentStep=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startIndex",{get:function(){return this._startIndex},set:function(a){this._startIndex=a,this.reset()},enumerable:!0,configurable:!0}),o.prototype.processConfig=function(a){e.prototype.processConfig.call(this,a)},o}(BaseObject);registry.registeredClasses.PatternSet=PatternSet;var Plugin=function(){function e(){this._disposed=!1,this._disposers=[]}return e.prototype.init=function(){},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var o=this._disposers;for(this._disposers=null;o.length!==0;){var a=o.shift();a.dispose()}}},e}(),AmChartsLogo=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="AmChartsLogo",a.valign="bottom";var c=.3;a.opacity=.3,a.defaultState.properties.opacity=.4,a.url="https://www.amcharts.com/",a.urlTarget="_blank",a.showSystemTooltip=!0,a.readerTitle="Chart created using amCharts library",a.width=220*c,a.height=70*c,a.background.opacity=0;var d=color("#474758");new InterfaceColorSet().getFor("background").alternative.hex=="#ffffff"&&(d=color("#ffffff"));var g=new LinearGradient;g.addColor(d),g.addColor(d,1,.75),g.addColor(color("#3cabff"),1,.755),g.rotation=-10;var b=g,j=a.createChild(Polyspline);j.shouldClone=!1,j.isMeasured=!1,j.segments=[[{x:50*c,y:50*c},{x:90*c,y:50*c},{x:120*c,y:20*c},{x:135*c,y:35*c},{x:150*c,y:20*c},{x:180*c,y:50*c},{x:200*c,y:50*c}]],j.strokeWidth=6*c,j.tensionX=.8,j.tensionY=1,j.stroke=color("#3cabff");var $=a.createChild(Polyspline);$.shouldClone=!1,$.isMeasured=!1,$.segments=[[{x:20*c,y:50*c},{x:50*c,y:50*c},{x:90*c,y:12*c},{x:133*c,y:50*c},{x:170*c,y:50*c},{x:200*c,y:50*c}]],$.strokeWidth=6*c,$.tensionX=.75,$.tensionY=1,$.stroke=b,a._disposers.push($);var _e=new DesaturateFilter;a.filters.push(_e);var st=new DesaturateFilter;st.saturation=1;var rt=a.states.create("hover");return rt.properties.opacity=1,rt.filters.push(st),a.applyTheme(),a}return o}(Container);function createChild(e,o){var a=getElement(e),c=!1;if(a||(a=document.createElement("div"),a.style.width="200px",a.style.height="200px",a.style.top="0",a.style.left="0",a.style.visibility="hidden",a.style.position="absolute",document.body.appendChild(a),c=!0),a){a.innerHTML="";var d=new SVGContainer(a),g=new Paper(d.SVGContainer,"svg-"+(svgContainers.length-1)),b=new Container;b.htmlContainer=a,b.svgContainer=d,b.width=percent(100),b.height=percent(100),b.background.fillOpacity=0,b.paper=g,g.append(b.group),c&&ready(function(){b.moveHtmlContainer(e)}),b.relativeWidth=1,b.relativeHeight=1,d.container=b;var j=b.createChild(o);j.topParent=b;var $=j.uid;registry.invalidSprites[$]=[],registry.invalidDatas[$]=[],registry.invalidPositions[$]=[],registry.invalidLayouts[$]=[],b.baseId=$,j.isBaseSprite=!0,j.focusFilter=new FocusFilter,registry.baseSprites.push(j),registry.baseSpritesByUid[$]=j,j.maskRectangle={x:0,y:0,width:Math.max(d.width||0,0),height:Math.max(d.height||0,0)},b.events.on("maxsizechanged",function(Tt){(Tt.previousWidth==0||Tt.previousHeight==0)&&b.deepInvalidate(),j.maskRectangle&&(j.maskRectangle={x:0,y:0,width:Math.max(d.width||0,0),height:Math.max(d.height||0,0)})});var _e=null,st=function(){j.isDisposed()?_e=null:getRoot(j.dom)==null?(options.autoDispose?(b.htmlContainer=void 0,d.htmlElement=void 0,j.dispose()):warn("Chart was not disposed",j.uid),_e=null):_e=window.setTimeout(st,1e3)};st(),j.addDisposer(new Disposer(function(){_e!==null&&clearTimeout(_e),remove(registry.baseSprites,j),registry.baseSpritesByUid[j.uid]=void 0})),j.addDisposer(b);var rt=b.createChild(Container);rt.topParent=b,rt.width=percent(100),rt.height=percent(100),rt.isMeasured=!1,b.tooltipContainer=rt,j.tooltip=new Tooltip,j.tooltip.hide(0),j.tooltip.setBounds({x:0,y:0,width:rt.maxWidth,height:rt.maxHeight}),rt.events.on("maxsizechanged",function(){getValue(j.tooltip).setBounds({x:0,y:0,width:rt.maxWidth,height:rt.maxHeight})},void 0,!1);var ut=new Preloader;if(ut.events.on("inited",function(){ut.__disabled=!0},void 0,!1),b.preloader=ut,j instanceof Container&&!j.hasLicense()){var gt=rt.createChild(AmChartsLogo);rt.events.on("maxsizechanged",function(Tt){rt.maxWidth<=100||rt.maxHeight<=50?gt.hide():(gt.isHidden||gt.isHiding)&&gt.show()},void 0,!1),j.logo=gt,gt.align="left",gt.valign="bottom"}if(j.numberFormatter,b.isStandaloneInstance=!0,options.onlyShowOnViewport)if(isElementInViewport(a,options.viewportTarget))options.queue&&addToQueue(j);else{j.__disabled=!0,j.tooltipContainer.__disabled=!0;var yt=[addEventListener$1(window,"DOMContentLoaded",function(){viewPortHandler(j)}),addEventListener$1(window,"load",function(){viewPortHandler(j)}),addEventListener$1(window,"resize",function(){viewPortHandler(j)}),addEventListener$1(window,"scroll",function(){viewPortHandler(j)})];if(options.viewportTarget)for(var wt=isArray$1(options.viewportTarget)?options.viewportTarget:options.viewportTarget?[options.viewportTarget]:[],Ct=0;Ct<wt.length;Ct++){var Pt=wt[Ct];yt.push(addEventListener$1(Pt,"resize",function(){viewPortHandler(j)})),yt.push(addEventListener$1(Pt,"scroll",function(){viewPortHandler(j)}))}var At=new MultiDisposer(yt);j.addDisposer(At),j.vpDisposer=At}else options.queue&&addToQueue(j);return j}else throw system.log("html container not found"),new Error("html container not found")}function disposeAllCharts(){for(;registry.baseSprites.length!==0;)registry.baseSprites.pop().dispose()}function addToQueue(e){registry.queue.indexOf(e)==-1&&(e.__disabled=!0,e.tooltipContainer.__disabled=!0,e.events.disableType("appeared"),registry.queue.length==0&&(registry.events.once("exitframe",function(){queueHandler(e)}),system.requestFrame()),e.addDisposer(new Disposer(function(){removeFromQueue(e)})),registry.queue.push(e))}function removeFromQueue(e){var o=registry.queue.indexOf(e);if(o>=0){registry.queue.splice(registry.queue.indexOf(e),1);var a=registry.queue[o];a&&queueHandler(a)}}function viewPortHandler(e){e.__disabled&&isElementInViewport(e.htmlContainer,options.viewportTarget)&&(e.vpDisposer&&e.vpDisposer.dispose(),addToQueue(e))}function queueHandler(e){e&&e.tooltipContainer&&(e.__disabled=!1,e.tooltipContainer.__disabled=!1,e.events.enableType("appeared"),e.dispatch("removedfromqueue"),e.showOnInit&&e.events.on("appeared",function(){removeFromQueue(e)}),e.vpDisposer&&e.vpDisposer.dispose(),e instanceof Container&&e.invalidateLabels(),e.tooltipContainer&&e.tooltipContainer.invalidateLayout(),e instanceof Component?(e.invalidateData(),e.reinit(),e.events.once("datavalidated",function(){e.showOnInit?e.appear():removeFromQueue(e)})):(e.reinit(),e.events.once("inited",function(){removeFromQueue(e)}),e.showOnInit&&e.appear()))}function create(e,o){var a;isString$1(o)&&(hasValue(registry.registeredClasses[o])?o=registry.registeredClasses[o]:(o=registry.registeredClasses.Container,a=new Error("Class ["+o+"] is not loaded.")));var c=createChild(e,o);return a&&c.raiseCriticalError(a),c}function createFromConfig(e,o,a){hasValue(a)||(a=e.type,delete e.type),hasValue(o)||(o=e.container,delete e.container);var c,d;isString$1(a)&&hasValue(registry.registeredClasses[a])?c=registry.registeredClasses[a]:typeof a!="function"?(c=Container,d=new Error("Class ["+a+"] is not loaded.")):c=a;var g=createChild(o,c);return d?g.raiseCriticalError(d):g.config=e,g}function createDeferred(e,o){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];return new Promise(function(d,g){registry.deferred.push({scope:o,callback:e,args:a,resolve:d}),registry.deferred.length==1&&processNextDeferred()})}function processNextDeferred(){var e,o=registry.deferred[0];if(o){var a=(e=o.callback).call.apply(e,__spread([o.scope],o.args));a.events.on("ready",function(){o.resolve(a),registry.deferred.shift(),options.deferredDelay?setTimeout(processNextDeferred,options.deferredDelay):processNextDeferred()})}}function useTheme(e){registry.themes.indexOf(e)===-1&&registry.themes.push(e)}function unuseTheme(e){remove(registry.themes,e)}function unuseAllThemes(){registry.themes=[]}function addLicense(e){options.licenses.push(e)}const core=Object.freeze(Object.defineProperty({__proto__:null,AMElement,Adapter,Animation,BaseObject,BaseObjectEvents,Basis,BlurFilter,Button,CSVParser,Cache,Circle,CirclePattern,CloseButton,Color,ColorModifier,ColorSet,ColorizeFilter,Component,Cone,Container,CounterDisposer,DATE,DURATION,DataItem,DataLoader,DataParser,DataSource,DateFormatter,DesaturateFilter,Dictionary,DictionaryDisposer,DictionaryTemplate,Disposer,DropShadowFilter,DurationFormatter,Ellipse,EventDispatcher,Export,ExportMenu,Filter,FocusFilter,GlobalAdapter,Group,Image:Image$1,IndexedIterable,Inertia,Interaction,InteractionKeyboardObject,InteractionObject,InteractionObjectEventDispatcher,InterfaceColorSet,JSONParser,Keyboard,Label,Language,LightenFilter,Line,LinePattern,LinearGradient,LinearGradientModifier,List,ListDisposer,ListGrouper,ListIterator,ListTemplate,Modal,Morpher,MouseCursorStyle,MultiDisposer,MutableValueDisposer,NUMBER,NumberFormatter,OrderedList,OrderedListTemplate,PLACEHOLDER,PLACEHOLDER2,PX,Paper,Pattern,PatternSet,Percent,PlayButton,Plugin,PointedRectangle,PointedShape,Polyarc,Polygon,Polyline,Polyspline,Popup,Preloader,RadialGradient,RadialGradientModifier,RectPattern,Rectangle,Rectangle3D,Registry,ResizeButton,Responsive,ResponsiveBreakpoints,RoundedRectangle,STRING,SVGContainer,SVGDefaults,Scrollbar,Slice,Slice3D,Slider,SortedList,SortedListTemplate,Sprite,SpriteEventDispatcher,SpriteState,StyleClass,StyleRule,SwitchButton,System,TargetedEventDispatcher,Tension,TextFormatter,TextLink,Tooltip,Trapezoid,Triangle,Validatable,WavedCircle,WavedLine,WavedRectangle,ZoomOutButton,addClass,addLicense,animate,array:Array$1,blur,cache,castColor,castNumber,castString,checkBoolean,checkNumber,checkObject,checkString,color,colors:Colors,copyAttributes,create,createDeferred,createFromConfig,dataLoader,defaultRules,disposeAllCharts,ease:Ease,fixPixelPerfect,focus,getElement,getInteraction,getTextFormatter,globalAdapter,is,isArray:isArray$1,isColor,isElement,isNaN:isNaN$1,isNumber:isNumber$1,isObject:isObject$1,isPercent,isString:isString$1,iter:Iterator,join,keyboard,math:Math$1,max,min,net:Net,nextFrame,number:Number$1,object:Object$1,options,or,outerHTML,path:Path,percent,readFrame,ready,registry,removeClass,reverse,string:String$1,system,time:Time,triggerIdle,type:Type,unuseAllThemes,unuseTheme,useTheme,utils:Utils,viewPortHandler,whenIdle,writeFrame},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(core);var theme$1=function(e){is(e,"SpriteState")&&(e.transitionDuration=400),is(e,"Component")&&(e.rangeChangeDuration=500,e.interpolationDuration=500,e.sequencedInterpolation=!1,is(e,"SankeyDiagram")&&(e.sequencedInterpolation=!0),is(e,"FunnelSeries")&&(e.sequencedInterpolation=!0)),is(e,"Chart")&&(e.defaultState.transitionDuration=2e3,e.hiddenState.transitionDuration=1e3),is(e,"Tooltip")&&(e.animationDuration=400,e.defaultState.transitionDuration=400,e.hiddenState.transitionDuration=400),is(e,"Scrollbar")&&(e.animationDuration=500),is(e,"Series")&&(e.defaultState.transitionDuration=1e3,e.hiddenState.transitionDuration=700,e.hiddenState.properties.opacity=1,e.showOnInit=!0),is(e,"MapSeries")&&(e.hiddenState.properties.opacity=0),is(e,"PercentSeries")&&(e.hiddenState.properties.opacity=0),is(e,"FunnelSlice")&&(e.defaultState.transitionDuration=800,e.hiddenState.transitionDuration=1e3,e.hiddenState.properties.opacity=1),is(e,"Slice")&&(e.defaultState.transitionDuration=700,e.hiddenState.transitionDuration=1e3,e.hiddenState.properties.opacity=1),is(e,"Preloader")&&(e.hiddenState.transitionDuration=2e3),is(e,"Column")&&(e.defaultState.transitionDuration=700,e.hiddenState.transitionDuration=1e3,e.hiddenState.properties.opacity=1),is(e,"Column3D")&&(e.hiddenState.properties.opacity=0)};const animated=Object.freeze(Object.defineProperty({__proto__:null,default:theme$1},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(animated);Object.defineProperty(reactAmcharts4,"__esModule",{value:!0});var default_1=reactAmcharts4.default=void 0,_react=_interopRequireWildcard(reactExports),_propTypes=_interopRequireDefault(propTypesExports),am4core=_interopRequireWildcard(require$$2),_animated=_interopRequireDefault(require$$3);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var o={};if(e!=null){for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};c.get||c.set?Object.defineProperty(o,a,c):o[a]=e[a]}}return o.default=e,o}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var a=0;a<o.length;a++){var c=o[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,o,a){return o&&_defineProperties(e.prototype,o),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,o){return o&&(typeof o=="object"||typeof o=="function")?o:_assertThisInitialized(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(e)}function _inherits(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&_setPrototypeOf(e,o)}function _setPrototypeOf(e,o){return _setPrototypeOf=Object.setPrototypeOf||function(c,d){return c.__proto__=d,c},_setPrototypeOf(e,o)}am4core.useTheme(_animated.default);let AmChart4Wrapper=function(e){_inherits(o,e);function o(a){var c;_classCallCheck(this,o),c=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,a));const{id:d}=a;return c.id=`__amcharts4_${d}_${Date.now()}__`,c}return _createClass(o,[{key:"componentDidMount",value:function(){const{chartTypeClass:c,config:d}=this.props;this.chart=am4core.createFromConfig(d,this.id,c)}},{key:"componentDidUpdate",value:function(c){const{chartTypeClass:d,config:g}=this.props;g!==c.config&&(this.chart.dispose(),this.chart=am4core.createFromConfig(g,this.id,d))}},{key:"render",value:function(){return _react.default.createElement("div",{id:this.id,style:{width:"100%",height:"100%"}})}}]),o}(_react.PureComponent);AmChart4Wrapper.propTypes={config:_propTypes.default.object.isRequired,chartTypeClass:_propTypes.default.object.isRequired,id:_propTypes.default.string.isRequired};var _default$1=AmChart4Wrapper;default_1=reactAmcharts4.default=_default$1;var Grip=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Grip";var c=new InterfaceColorSet;a.layout="absolute",a.padding(10,10,10,10),a.margin(3,3,3,3),a.background.fillOpacity=.3,a.background.cornerRadius(10,10,10,10);var d=new Sprite;d.element=a.paper.add("path");var g=moveTo({x:-6,y:0});return g+=lineTo({x:6,y:0}),g+=moveTo({x:-8,y:-6}),g+=lineTo({x:0,y:-12}),g+=lineTo({x:8,y:-6}),g+=moveTo({x:-8,y:6}),g+=lineTo({x:0,y:12}),g+=lineTo({x:8,y:6}),d.path=g,d.strokeWidth=2,d.fillOpacity=0,d.pixelPerfect=!0,d.padding(0,4,0,4),d.stroke=c.getFor("text"),d.strokeOpacity=.7,d.align="center",d.valign="middle",a.icon=d,a.label.dispose(),a.label=void 0,a.position="right",a.autoHideDelay=3e3,a.events.on("shown",function(b){a._autoHideTimeout&&a._autoHideTimeout.dispose(),a.autoHideDelay&&(a._autoHideTimeout=a.setTimeout(function(){a.hide()},a.autoHideDelay))}),a.events.on("down",function(b){a._autoHideTimeout&&a._autoHideTimeout.dispose()}),a.events.on("out",function(b){a.autoHideDelay&&(a._autoHideTimeout=a.setTimeout(function(){a.hide()},a.autoHideDelay))}),a.applyTheme(),a}return Object.defineProperty(o.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(a){if(this.setPropertyValue("position",a))switch(a){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=percent(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=percent(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=percent(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=percent(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=percent(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(a){this.setPropertyValue("autoHideDelay",a)},enumerable:!0,configurable:!0}),o}(Button);registry.registeredClasses.Grip=Grip;var ChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ChartDataItem",a.applyTheme(),a}return o}(DataItem),Chart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;if(a._legend=new MutableValueDisposer,a.constructor===o)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");a.className="Chart";var c=new Label;a.titles=new ListTemplate(c),a._disposers.push(new ListDisposer(a.titles)),a._disposers.push(c),a.width=percent(100),a.height=percent(100),a.layout="vertical";var d=a.createChild(Container);d.shouldClone=!1,d.layout="vertical",d.width=percent(100),d.height=percent(100),a.chartAndLegendContainer=d;var g=d.createChild(Container);return g.shouldClone=!1,g.width=percent(100),g.height=percent(100),a.chartContainer=g,a.showOnInit=!0,a._disposers.push(a._legend),a.titles.events.on("inserted",function(b){a.processTitle(b),a.updateReaderTitleReferences()},a,!1),a.titles.events.on("removed",function(b){a.updateReaderTitleReferences()},a,!1),a.role="region",a.defaultState.transitionDuration=1,a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},o.prototype.draw=function(){this.fixLayout(),e.prototype.draw.call(this)},o.prototype.fixLayout=function(){var a=this.legend;if(a){var c=this.chartAndLegendContainer,d=this.chartContainer;switch(d.x=void 0,d.y=void 0,a.position!="absolute"&&(a.x=void 0,a.y=void 0),a.position){case"left":c.layout="horizontal",a.toBack();break;case"right":c.layout="horizontal",a.toFront();break;case"top":c.layout="vertical",a.toBack();break;case"bottom":c.layout="vertical",a.toFront();break;case"absolute":a.isMeasured=!1;break}}},o.prototype.feedLegend=function(){},o.prototype.processTitle=function(a){var c=a.newValue;return c.parent=this,c.toBack(),c.shouldClone=!1,c.align="center",c.uidAttr(),c},o.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var a=[];each(this.titles.iterator(),function(c){a.push(c.uid)}),this.setSVGAttribute({"aria-labelledby":a.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(o.prototype,"legend",{get:function(){return this._legend.get()},set:function(a){this.setLegend(a)},enumerable:!0,configurable:!0}),o.prototype.setLegend=function(a){var c=this;this._legend.get()!==a&&(a?(a.parent=this.chartAndLegendContainer,this._legend.set(a,a.events.on("propertychanged",function(d){d.property=="position"&&c.fixLayout()},void 0,!1)),a.addDisposer(new Disposer(function(){c.legend=void 0}))):this._legend.reset(),this.feedLegend())},o.prototype.dispose=function(){this.legend&&this.legend.dispose(),e.prototype.dispose.call(this)},o.prototype.processConfig=function(a){a&&hasValue(a.legend)&&!hasValue(a.legend.type)&&(a.legend.type="Legend"),e.prototype.processConfig.call(this,a)},o.prototype.copyFrom=function(a){this.titles.copyFrom(a.titles),this.chartContainer.copyFrom(a.chartContainer),a.legend&&(this.legend=a.legend.clone(),this.legend.removeChildren()),e.prototype.copyFrom.call(this,a)},Object.defineProperty(o.prototype,"dragGrip",{get:function(){var a=this;if(!this._dragGrip){var c=this.tooltipContainer.createChild(Grip);c.align="right",c.valign="middle",c.hide(0),c.events.on("down",function(d){d.touch&&(a.interactionsEnabled=!1)}),c.events.on("up",function(d){a.interactionsEnabled=!0}),this.events.on("down",function(d){d.touch&&c.show()}),this._dragGrip=c}return this._dragGrip},set:function(a){this._dragGrip=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(a){this.parent.focusable=a},enumerable:!0,configurable:!0}),o}(Component);registry.registeredClasses.Chart=Chart;defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(e,o){if(e instanceof Chart){var a=e.states.create(o);return e.pixelPaddingLeft>10&&(a.properties.paddingLeft=10),e.pixelPaddingRight>10&&(a.properties.paddingRight=10),a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,o){if(e instanceof Chart){var a=e.states.create(o);return e.pixelPaddingTop>10&&(a.properties.paddingTop=10),e.pixelPaddingBottom>10&&(a.properties.paddingBottom=10),a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.widthXXS,state:function(e,o){if(e instanceof Chart){var a=e.states.create(o);return a.properties.paddingLeft=0,a.properties.paddingRight=0,a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXXS,state:function(e,o){if(e instanceof Chart){var a=e.states.create(o);return a.properties.paddingTop=0,a.properties.paddingBottom=0,a}return null}});var Bullet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Bullet",a.isMeasured=!1,a.tooltipX=0,a.tooltipY=0,a.layout="none",a.applyOnClones=!0,a.copyToLegendMarker=!0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(a){if(this.setPropertyValue("locationX",a)){var c=this.dataItem;c&&c.component&&c.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(a){if(this.setPropertyValue("locationY",a)){var c=this.dataItem;c&&c.component&&c.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(a){this.setPropertyValue("xField",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(a){this.setPropertyValue("yField",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(a){this.setPropertyValue("isDynamic",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(a){this.setPropertyValue("copyToLegendMarker",a)},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.Bullet=Bullet;defaultRules.push({relevant:ResponsiveBreakpoints.isXS,state:function(e,o){if(e instanceof Bullet){var a=e.states.create(o);return a.properties.disabled=!0,a}return null}});var LegendDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.childrenCreated=!1,a.className="LegendDataItem",a.applyTheme(),a}return Object.defineProperty(o.prototype,"label",{get:function(){var a=this;if(!this._label){var c=this.component.labels.create();this._label=c,this.addSprite(c),this._disposers.push(c),c.parent=this.itemContainer,this._disposers.push(new Disposer(function(){hasValue(a.component)&&a.component.labels.removeValue(c)}))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){return this.properties.color},set:function(a){this.setProperty("color",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"valueLabel",{get:function(){var a=this;if(!this._valueLabel){var c=this.component.valueLabels.create();this._valueLabel=c,this.addSprite(c),this._disposers.push(c),c.parent=this.itemContainer,this._disposers.push(new Disposer(function(){hasValue(a.component)&&a.component.valueLabels.removeValue(c)}))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"itemContainer",{get:function(){var a=this;if(!this._itemContainer){var c=this.component,d=c.itemContainers.create();d.parent=c,this._itemContainer=d,this.addSprite(d),this._disposers.push(d),d.togglable&&d.events.on("toggled",function(j){c.toggleDataItem(j.target.dataItem)},void 0,!1),d.focusable&&(d.events.on("hit",function(j){c.focusedItem=void 0},void 0,!1),d.events.on("focus",function(j){c.focusedItem=j.target.dataItem},void 0,!1),d.events.on("blur",function(j){c.focusedItem=void 0},void 0,!1)),this._disposers.push(new Disposer(function(){hasValue(a.component)&&a.component.itemContainers.removeValue(d)})),this.dataContext.uidAttr&&(d.readerControls=this.dataContext.uidAttr(),d.readerLabelledBy=this.dataContext.uidAttr());var g=this.dataContext;if((g instanceof DataItem||g instanceof Sprite)&&!g.isDisposed()){var b=function(j){d.readerChecked=j.visible,d.events.disableType("toggled"),d.isActive=!j.visible,d.events.enableType("toggled")};g.addDisposer(new Disposer(function(){a.component&&a.component.dataItems.remove(a)})),g instanceof Sprite?(d.addDisposer(g.events.on("visibilitychanged",b,void 0,!1)),d.addDisposer(g.events.on("hidden",function(j){d.readerChecked=!1,d.events.disableType("toggled"),d.isActive=!0,d.events.enableType("toggled")},void 0,!1)),d.addDisposer(g.events.on("shown",function(j){d.readerChecked=!0,d.events.disableType("toggled"),d.isActive=!1,d.events.enableType("toggled")},void 0,!1))):d.addDisposer(g.events.on("visibilitychanged",b,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"marker",{get:function(){var a=this;if(!this._marker){var c=this.component.markers.create();this._marker=c,c.parent=this.itemContainer,this.addSprite(c),this._disposers.push(c),this._disposers.push(new Disposer(function(){hasValue(a.component)&&a.component.markers.removeValue(c)}))}return this._marker},enumerable:!0,configurable:!0}),o}(DataItem),LegendSettings=function(){function e(){this.createMarker=!0}return e}(),Legend=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Legend",a.layout="grid",a.setPropertyValue("useDefaultMarker",!1),a.setPropertyValue("scrollable",!1),a.setPropertyValue("contentAlign","center");var c=new Container;c.applyOnClones=!0,c.padding(8,0,8,0),c.margin(0,10,0,10),c.layout="horizontal",c.clickable=!0,c.focusable=!0,c.role="switch",c.togglable=!0,c.cursorOverStyle=MouseCursorStyle.pointer,c.background.fillOpacity=0,a.itemContainers=new ListTemplate(c),a._disposers.push(new ListDisposer(a.itemContainers)),a._disposers.push(a.itemContainers.template),a._disposers.push(getInteraction().body.events.on("keyup",function(st){if(keyboard.isKey(st.event,"enter")&&a.focusedItem){var rt=a.focusedItem,ut=rt.itemContainer;ut.togglable?a.toggleDataItem(rt):ut.clickable&&ut.events.isEnabled("hit")&&(ut.dispatchImmediately("hit",{event:st}),a.focusedItem=rt)}},a));var d=new InterfaceColorSet,g=new Container;g.width=23,g.height=23,g.interactionsEnabled=!1,g.applyOnClones=!0,g.setStateOnChildren=!0,g.background.fillOpacity=0,g.background.strokeOpacity=0,g.propertyFields.fill="fill",g.valign="middle";var b=d.getFor("disabledBackground");g.events.on("childadded",function(st){var rt=st.newValue,ut=rt.states.create("active");ut.properties.stroke=b,ut.properties.fill=b}),a.markers=new ListTemplate(g),a._disposers.push(new ListDisposer(a.markers)),a._disposers.push(a.markers.template);var j=g.createChild(RoundedRectangle);j.width=percent(100),j.height=percent(100),j.applyOnClones=!0,j.propertyFields.fill="fill",j.strokeOpacity=0;var $=new Label;$.text="{name}",$.margin(0,5,0,5),$.valign="middle",$.applyOnClones=!0,$.states.create("active").properties.fill=d.getFor("disabledBackground"),a.labels=new ListTemplate($),a._disposers.push(new ListDisposer(a.labels)),a._disposers.push(a.labels.template),$.interactionsEnabled=!1,$.truncate=!0,$.fullWords=!1;var _e=new Label;return _e.margin(0,5,0,0),_e.valign="middle",_e.width=50,_e.align="right",_e.textAlign="end",_e.applyOnClones=!0,_e.states.create("active").properties.fill=d.getFor("disabledBackground"),_e.interactionsEnabled=!1,a.valueLabels=new ListTemplate(_e),a._disposers.push(new ListDisposer(a.valueLabels)),a._disposers.push(a.valueLabels.template),a.position="bottom",c.states.create("active"),c.setStateOnChildren=!0,a.role="group",a.events.on("layoutvalidated",a.handleScrollbar,a,!1),a.events.on("parentset",function(){var st=a.parent;st&&a._disposers.push(st.events.on("maxsizechanged",function(){a.scrollable&&a.setTimeout(function(){a.updateMasks(),a.handleScrollbar(),a._handleWheelReal(1)},100)}))}),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},o.prototype.createDataItem=function(){return new LegendDataItem},o.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),e.prototype.validateDataElements.call(this)},o.prototype.validateDataElement=function(a){e.prototype.validateDataElement.call(this,a);var c=a.itemContainer,d=a.marker;a.label;var g=a.valueLabel;c.readerChecked=a.dataContext.visible,a.dataContext.legendDataItem=a;var b=a.label.maxWidth;a.label.width instanceof Percent||(a.label.width=void 0),b>0&&(a.label.maxWidth=b),g.align=="right"&&(g.width=void 0);var j=a.dataContext.legendSettings,$=a.dataContext;$.createLegendMarker&&(!this.useDefaultMarker||!($ instanceof Sprite))?a.childrenCreated||($.createLegendMarker(d),a.childrenCreated=!0):this.markers.template.propertyFields.fill=void 0,$.updateLegendValue&&$.updateLegendValue(),$.component&&$.component.updateLegendValue&&$.component.updateLegendValue($),g.invalid&&g.validate(),g.text==""||g.text==null?g.__disabled=!0:g.__disabled=!1,j&&(j.itemValueText!=null||j.valueText!=null)&&(g.__disabled=!1);var _e=a.dataContext.visible;_e===void 0&&(_e=!0),_e=toBoolean(_e),a.dataContext.visible=_e,c.events.disableType("toggled"),c.isActive=!_e,c.isActive?c.setState("active",0):c.setState("default",0),c.events.enableType("toggled")},o.prototype.afterDraw=function(){var a=this,c=this.getPropertyValue("maxWidth"),d=0;this.labels.each(function(rt){rt.invalid&&(rt.maxWidth=void 0,rt.validate()),rt.measuredWidth+rt.pixelMarginLeft+rt.pixelMarginRight>d&&(d=rt.measuredWidth+rt.pixelMarginLeft+rt.pixelMarginRight)});var g=0;this.valueLabels.each(function(rt){rt.invalid&&rt.validate(),rt.measuredWidth+rt.pixelMarginLeft+rt.pixelMarginRight>g&&(g=rt.measuredWidth+rt.pixelMarginLeft+rt.pixelMarginRight)});var b=0;this.markers.each(function(rt){rt.invalid&&rt.validate(),rt.measuredWidth+rt.pixelMarginLeft+rt.pixelMarginRight>b&&(b=rt.measuredWidth+rt.pixelMarginLeft+rt.pixelMarginRight)});var j=this.itemContainers.template,$=j.pixelMarginRight+j.pixelMarginLeft,_e,st=d+g+b;isNumber$1(c)?(c=c-$,c>st&&(c=st),_e=c-b-g):_e=d,this.labels.each(function(rt){(a.valueLabels.template.align=="right"||rt.measuredWidth>_e)&&(rt.width instanceof Percent||(rt.width=Math.min(rt.maxWidth,_e-rt.pixelMarginLeft-rt.pixelMarginRight),rt.maxWidth=rt.width))}),this.valueLabels.template.align=="right"&&this.valueLabels.each(function(rt){rt.width=g-rt.pixelMarginRight-rt.pixelMarginLeft}),e.prototype.afterDraw.call(this)},o.prototype.handleScrollbar=function(){var a=this.scrollbar;if(this.scrollable&&a){var c=this.maxHeight;a.height=c,a.x=this.measuredWidth-a.pixelWidth-a.pixelMarginLeft,this.contentHeight>c?(a.visible=!0,a.thumb.height=a.height*c/this.contentHeight,this.paddingRight=a.pixelWidth+a.pixelMarginLeft+a.pixelMarginRight):(a.thumb.height=a.height*c/this.contentHeight,this.paddingRight=a.pixelWidth+a.pixelMarginLeft+a.pixelMarginRight,a.visible=!1,a.start=0,a.end=1),a.handleThumbPosition(),this.updateMasks()}},Object.defineProperty(o.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(a){this.setPropertyValue("position",a)&&(a=="left"||a=="right"?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",isNumber$1(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=percent(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(a){this.setPropertyValue("useDefaultMarker",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(a){if(this.setPropertyValue("scrollable",a,!0))if(a){var c=this.createChild(Scrollbar);this.scrollbar=c,c.isMeasured=!1,c.orientation="vertical",c.endGrip.__disabled=!0,c.startGrip.__disabled=!0,c.visible=!1,c.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(c.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),o.prototype.handleWheel=function(a){this._handleWheelReal(a.shift.y)},o.prototype._handleWheelReal=function(a){var c=this.scrollbar;if(c){var d=a/1e3*this.measuredHeight/this.contentHeight,g=c.end-c.start;a>0?(c.start=max$1(0,c.start-d),c.end=c.start+g):(c.end=min$1(1,c.end-d),c.start=c.end-g)}},o.prototype.updateMasks=function(){var a=this;this.scrollbar&&this.itemContainers.each(function(c){c.dy=-a.scrollbar.thumb.pixelY*a.contentHeight/a.maxHeight,c.maskRectangle={x:0,y:-c.dy,width:a.measuredWidth,height:a.maxHeight}}),this.invalidatePosition()},o.prototype.toggleDataItem=function(a){var c=a.dataContext;!c.visible||c.isHiding||c instanceof Sprite&&c.isHidden?(a.color=a.colorOrig,c.appeared=!0,a.itemContainer.isActive=!1,c.hidden===!0&&(c.hidden=!1),c.show?c.show():c.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,a.label.readerTitle))):(a.itemContainer.isActive=!0,c.appeared=!0,c.hide?c.hide():c.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,a.label.readerTitle)),a.color=new InterfaceColorSet().getFor("disabledBackground"))},Object.defineProperty(o.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),o.prototype.handleDataItemPropertyChange=function(a,c){a.valueLabel.invalidate(),a.label.invalidate()},o}(Component);registry.registeredClasses.Legend=Legend;defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(e,o){if(e instanceof Legend&&(e.position=="left"||e.position=="right")){var a=e.states.create(o);return a.properties.position="bottom",a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,o){if(e instanceof Legend&&(e.position=="top"||e.position=="bottom")){var a=e.states.create(o);return a.properties.position="right",a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.isXS,state:function(e,o){if(e instanceof Legend){var a=e.states.create(o);return a.properties.disabled=!0,a}return null}});var SeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SeriesDataItem",a.values.value={},a.values.value={},a.applyTheme(),a}return Object.defineProperty(o.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new Dictionary,this._disposers.push(new DictionaryDisposer(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),o.prototype.dispose=function(){this.bullets.clear(),e.prototype.dispose.call(this)},Object.defineProperty(o.prototype,"value",{get:function(){return this.values.value.value},set:function(a){this.setValue("value",a)},enumerable:!0,configurable:!0}),o}(DataItem),Series=function(e){__extends(o,e);function o(){var a=e.call(this)||this;if(a._ignoreMinMax=!1,a._showBullets=!0,a.legendSettings=new LegendSettings,a._tmin=new Dictionary,a._tmax=new Dictionary,a._smin=new Dictionary,a._smax=new Dictionary,a.dataItemsByAxis=new Dictionary,a.skipFocusThreshold=20,a._itemReaderTextChanged=!1,a.calculatePercent=!1,a.usePercentHack=!0,a.autoDispose=!0,a.simplifiedProcessing=!1,a.constructor===o)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");a.className="Series",a.isMeasured=!1,a.layout="none",a.shouldClone=!1,a.setPropertyValue("hidden",!1),a.axisRanges=new List,a.axisRanges.events.on("inserted",a.processAxisRange,a,!1),a.minBulletDistance=0,a.mainContainer=a.createChild(Container),a.mainContainer.shouldClone=!1,a.mainContainer.mask=a.createChild(Sprite),a._disposers.push(a.mainContainer);var c=a.mainContainer.createChild(Container);return a._shouldBeReady.push(c),c.shouldClone=!1,c.layout="none",c.virtualParent=a,a._disposers.push(c),a.bulletsContainer=c,a.tooltip=new Tooltip,a.tooltip.virtualParent=a,a._disposers.push(a.tooltip),a.hiddenState.transitionEasing=cubicIn,a.dataItem=a.createDataItem(),a._disposers.push(a.dataItem),a.dataItem.component=a,a.role="group",a.applyTheme(),a}return o.prototype.applyTheme=function(){e.prototype.applyTheme.call(this),options.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},o.prototype.createDataItem=function(){return new SeriesDataItem},Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(a){this._chart=a},enumerable:!0,configurable:!0}),o.prototype.positionBullet=function(a){},o.prototype.processBullet=function(a){var c=this,d=a.newValue;d.isTemplate=!0,this.events.once("datavalidated",function(g){c.itemsFocusable()&&(d.focusable=!0)}),this.invalidate()},o.prototype.removeBullet=function(a){var c=a.oldValue;this.dataItems.each(function(d){var g=d.bullets.getKey(c.uid);g&&g.dispose()}),this.invalidate()},o.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.processValues(!1)},o.prototype.getFirstValue=function(a,c){for(var d=c;d>=0;d--){var g=this.dataItems.getIndex(d),b=g.getActualWorkingValue(a);if(isNumber$1(b))return b}return null},o.prototype.getAbsoluteFirstValue=function(a){for(var c=0;c<this.dataItems.length;c++){var d=this.dataItems.getIndex(c),g=d.values[a].value;if(isNumber$1(g))return g}return null},o.prototype.rangeChangeUpdate=function(){e.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},o.prototype.processValues=function(a){var c=this;if(!this.simplifiedProcessing){var d=this.dataItems,g={},b={},j={},$={},_e={},st={},rt={},ut={},gt={},yt={},wt=max$1(0,this.startIndex);wt=min$1(wt,this.dataItems.length);var Ct=min$1(this.endIndex,this.dataItems.length);if(isNumber$1(wt)||(wt=0),isNumber$1(Ct)||(Ct=this.dataItems.length),wt>0){var Pt=d.getIndex(wt-1);each$1(Pt.values,function(Ft,Nt){var Ht=Pt.getActualWorkingValue(Ft);isNumber$1(Ht)&&(ut[Ft]=Ht)})}for(var At=function(Ft){var Nt=d.getIndex(Ft);each$1(Nt.values,function(Ht,dr){var hs=Nt.getActualWorkingValue(Ht);if(isNumber$1(hs)){isNumber$1(g[Ht])||(g[Ht]=0),g[Ht]++,isNumber$1(b[Ht])||(b[Ht]=0),b[Ht]+=hs,isNumber$1(j[Ht])||(j[Ht]=0),j[Ht]+=Math.abs(hs),isNumber$1(st[Ht])||(st[Ht]=hs),rt[Ht]=hs,isNumber$1($[Ht])?$[Ht]>hs&&($[Ht]=hs):$[Ht]=hs,isNumber$1(_e[Ht])?_e[Ht]<hs&&(_e[Ht]=hs):_e[Ht]=hs,isNumber$1(gt[Ht])||(gt[Ht]=c.getFirstValue(Ht,wt)),isNumber$1(yt[Ht])||(yt[Ht]=c.getAbsoluteFirstValue(Ht)),Nt.setCalculatedValue(Ht,hs-gt[Ht],"change"),Nt.setCalculatedValue(Ht,(hs-gt[Ht])/gt[Ht]*100,"changePercent"),Nt.setCalculatedValue(Ht,hs-yt[Ht],"startChange"),Nt.setCalculatedValue(Ht,(hs-yt[Ht])/yt[Ht]*100,"startChangePercent");var us=ut[Ht];isNumber$1(us)||(us=hs),Nt.setCalculatedValue(Ht,hs-us,"previousChange"),Nt.setCalculatedValue(Ht,(hs-us)/us*100,"previousChangePercent"),ut[Ht]=hs}})},Tt=wt;Tt<Ct;Tt++)At(Tt);if(this.calculatePercent)for(var kt=function(Ft){var Nt=d.getIndex(Ft);each$1(Nt.values,function(Ht){var dr=j[Ht],hs=Nt.getActualWorkingValue(Ht);if(isNumber$1(hs))if(dr>0){c.usePercentHack&&hs==dr&&(dr=Nt.values[Ht].value);var us=hs/dr*100;Nt.setCalculatedValue(Ht,us,"percent")}else Nt.setCalculatedValue(Ht,0,"percent")})},Tt=wt;Tt<Ct;Tt++)kt(Tt);if(wt>0){var It=d.getIndex(wt-1);each$1(It.values,function(Ft){var Nt=It.values[Ft].value;It.setCalculatedValue(Ft,Nt-st[Ft],"change"),It.setCalculatedValue(Ft,(Nt-st[Ft])/st[Ft]*100,"changePercent")})}var Lt=this.dataItem;each$1(Lt.values,function(Ft){Lt.setCalculatedValue(Ft,b[Ft],"sum"),Lt.setCalculatedValue(Ft,j[Ft],"absoluteSum"),Lt.setCalculatedValue(Ft,b[Ft]/g[Ft],"average"),Lt.setCalculatedValue(Ft,st[Ft],"open"),Lt.setCalculatedValue(Ft,rt[Ft],"close"),Lt.setCalculatedValue(Ft,$[Ft],"low"),Lt.setCalculatedValue(Ft,_e[Ft],"high"),Lt.setCalculatedValue(Ft,g[Ft],"count")})}},o.prototype.validate=function(){isIE()&&this.filters.clear(),each(this.axisRanges.iterator(),function(g){g.validate()}),e.prototype.validate.call(this);var a=this.bulletsContainer;if(a.fill=this.fill,a.stroke=this.stroke,a.x=this.pixelX,a.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var c=0;c<this.startIndex;c++){var d=this.dataItems.getIndex(c);d&&d.bullets.each(function(g,b){b.__disabled=!0})}for(var c=this.dataItems.length-1;c>this.endIndex;c--){var d=this.dataItems.getIndex(c);d&&d.bullets.each(function(j,$){$.__disabled=!0})}}else this.bulletsContainer.children.each(function(g){g.__disabled=!0});this.updateTooltipBounds()},o.prototype.updateTooltipBounds=function(){if(this.topParent){var a=0,c=0,d=this.topParent.maxWidth,g=this.topParent.maxHeight,b={x:a,y:c,width:d,height:g};this.tooltip.setBounds(b)}},o.prototype.shouldCreateBullet=function(a,c){return!0},o.prototype.validateDataElement=function(a){var c=this;e.prototype.validateDataElement.call(this,a),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each(function(d){var g=a.bullets.getKey(d.uid);if(c.shouldCreateBullet(a,d)){if(!g){var b=d.propertyFields.disabled,j=a.dataContext;b&&j&&j[b]===!1?(d.applyOnClones=!1,d.disabled=!1,g=d.clone(),d.disabled=!0,d.applyOnClones=!0):g=d.clone(),g.shouldClone=!1,a.addSprite(g),(!c.visible||c.isHiding)&&g.hide(0)}var $=g.dataItem;if($!=a){$&&$.bullets.setKey(d.uid,void 0);var _e=c.itemReaderText;g instanceof Bullet&&(_e||(_e="{"+g.xField+"}: {"+g.yField+"}"),g.isDynamic&&(a.events.on("workingvaluechanged",g.deepInvalidate,g,!1),c.dataItem.events.on("workingvaluechanged",g.deepInvalidate,g,!1)),g.deepInvalidate()),g.focusable&&(g.events.on("focus",function(st){g.readerTitle=c.populateString(_e,g.dataItem)},void 0,!1),g.events.on("blur",function(st){g.readerTitle=""},void 0,!1)),g.hoverable&&(g.events.on("over",function(st){g.readerTitle=c.populateString(_e,g.dataItem)},void 0,!1),g.events.on("out",function(st){g.readerTitle=""},void 0,!1))}g.parent=c.bulletsContainer,a.bullets.setKey(d.uid,g),g.maxWidth=a.itemWidth,g.maxHeight=a.itemHeight,g.__disabled=!1,c.positionBullet(g)}else g&&(g.__disabled=!0)})):this.bulletsContainer.visible=!1},o.prototype.handleDataItemWorkingValueChange=function(a,c){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(o.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(a){this._ignoreMinMax=a,this.invalidateDataItems()},enumerable:!0,configurable:!0}),o.prototype.createMask=function(){},o.prototype.processAxisRange=function(a){this.rangesContainer||(this.rangesContainer=this.createChild(Container),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var c=a.newValue;c&&(c.contents.parent=this.rangesContainer,c.isRange=!0,c.events.on("valuechanged",this.invalidateDataItems,this,!1))},o.prototype.getAxisField=function(a){},o.prototype.showTooltipAtPosition=function(a,c){},Object.defineProperty(o.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(a){this.setPropertyValue("minBulletDistance",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new ListTemplate(new Bullet),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new ListDisposer(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),o.prototype.createLegendMarker=function(a){},Object.defineProperty(o.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(a){this.setPropertyValue("hiddenInLegend",a)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(a){this.setPropertyValue("name",a);var c=this.legendDataItem;c&&(c.component.invalidate(),c.component.invalidateRawData()),this.readerTitle=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"itemReaderText",{get:function(){var a=this._itemReaderText;return a||(this.tooltipText?a=plainText(this.tooltipText):this.tooltipHTML&&(a=plainText(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",a):a},set:function(a){this._itemReaderText=a,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),o.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(o.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(a){this._legendDataItem=a,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),o.prototype.updateLegendValue=function(a,c){if(this.legendDataItem){var d=this.legendSettings,g=this.legendDataItem,b=g.label,j=g.valueLabel;a&&!a.isDisposed()||c?(j&&(d.itemValueText&&(j.text=d.itemValueText),j.dataItem=a),b&&(d.itemLabelText&&(b.text=d.itemLabelText),b.dataItem=a)):(b&&((d.labelText||d.itemLabelText!=null)&&(b.text=d.labelText),b.dataItem=this.dataItem),j&&((d.valueText||d.itemValueText!=null)&&(j.text=d.valueText),j.dataItem=this.dataItem))}},o.prototype.copyFrom=function(a){this.bullets.copyFrom(a.bullets),this.bulletsContainer.copyFrom(a.bulletsContainer),this.calculatePercent=a.calculatePercent,this.usePercentHack=a.usePercentHack,this.simplifiedProcessing=a.simplifiedProcessing,e.prototype.copyFrom.call(this,a)},o.prototype.raiseCriticalError=function(a){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",a).message,this._chart.modal.closable=!1,options.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),options.verbose&&console.log(a)},o.prototype.applyFilters=function(){var a=this;e.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),each(this.filters.iterator(),function(c){a.bulletsContainer.filters.push(c.clone())})},Object.defineProperty(o.prototype,"heatRules",{get:function(){var a=this;return this._heatRules||(this._heatRules=new List,this._heatRules.events.on("inserted",function(c){var d=c.newValue,g=d.target;if(g){var b=d.dataField;hasValue(b)||(b="value");var j=a.dataItem,$=d.property,_e=toNumber(d.minValue),st=toNumber(d.maxValue);!isNumber$1(_e)&&!isNumber$1(st)&&a.dataItem.events.on("calculatedvaluechanged",function(rt){rt.property==b&&each(a.dataItems.iterator(),function(ut){var gt=!1;each$2(ut.sprites,function(yt){if(yt.clonedFrom==g){var wt=yt;wt[$]=wt[$],gt=!0}}),gt||each$2(ut.sprites,function(yt){yt instanceof Container&&each(yt.children.iterator(),function(wt){if(wt.className==g.className){var Ct=wt;Ct[$]=Ct[$]}else wt instanceof Container&&wt.deepInvalidate()})})})}),a.dataItems.template.events.on("workingvaluechanged",function(rt){if(rt.property==b){var ut=rt.target,gt=!1;each$2(ut.sprites,function(yt){if(yt.clonedFrom==g){var wt=yt;wt[$]=wt[$],gt=!0}}),gt||each$2(ut.sprites,function(yt){yt instanceof Container&&each(yt.children.iterator(),function(wt){if(wt.className==g.className){var Ct=wt;Ct[$]=Ct[$]}else wt instanceof Container&&wt.deepInvalidate()})})}}),g.adapter.add($,function(rt,ut,gt){var yt=toNumber(d.minValue),wt=toNumber(d.maxValue),Ct=d.min,Pt=d.max;if(ut instanceof Sprite){var At=ut,Tt=At.propertyFields[gt];if(Tt&&ut.dataItem){var kt=ut.dataItem.dataContext;if(kt&&hasValue(kt[Tt]))return rt}}var It=ut.dataItem;if(isNumber$1(yt)||(yt=j.values[b].low),isNumber$1(wt)||(wt=j.values[b].high),It){var Lt=It.values[b];if(Lt){var Ft=It.getActualWorkingValue(b);if(hasValue(Ct)&&hasValue(Pt)&&isNumber$1(yt)&&isNumber$1(wt)&&isNumber$1(Ft)){var Nt=void 0;if(d.logarithmic?Nt=(Math.log(Ft)*Math.LOG10E-Math.log(yt)*Math.LOG10E)/(Math.log(wt)*Math.LOG10E-Math.log(yt)*Math.LOG10E):Nt=(Ft-yt)/(wt-yt),isNumber$1(Ft)&&(!isNumber$1(Nt)||Math.abs(Nt)==1/0)&&(Nt=.5),isNumber$1(Ct))return Ct+(Pt-Ct)*Nt;if(Ct instanceof Color)return new Color(interpolate(Ct.rgb,Pt.rgb,Nt))}}}return rt})}})),this._heatRules},enumerable:!0,configurable:!0}),o.prototype.processConfig=function(a){var c;if(a){if(hasValue(a.bullets)&&isArray$1(a.bullets))for(var d=0,g=a.bullets.length;d<g;d++){var b=a.bullets[d];hasValue(b.type)||(b.type="Bullet")}hasValue(a.heatRules)&&isArray$1(a.heatRules)&&(c=a.heatRules,delete a.heatRules)}if(e.prototype.processConfig.call(this,a),c){for(var d=0,g=c.length;d<g;d++){var j=c[d],$=this;if(hasValue(j.target)&&isString$1(j.target))if(this.map.hasKey(j.target))$=this.map.getKey(j.target);else for(var _e=j.target.split("."),st=0;st<_e.length;st++)if($ instanceof List){var rt=$.getIndex(toNumber(_e[st]));rt?$=rt:$=$[_e[st]]}else{var ut=_e[st].match(/^(.*)\[([0-9]+)\]/);ut?$[ut[1]]instanceof List?$=$[ut[1]].getIndex(toNumber(ut[2])):$=$[ut[1]][toNumber(ut[2])]:$=$[_e[st]]}j.target=$,hasValue(j.min)&&(j.min=this.maybeColorOrPercent(j.min)),hasValue(j.max)&&(j.max=this.maybeColorOrPercent(j.max))}e.prototype.processConfig.call(this,{heatRules:c})}},o.prototype.configOrder=function(a,c){return a==c?0:a=="heatRules"?1:c=="heatRules"?-1:e.prototype.configOrder.call(this,a,c)},o.prototype.setVisibility=function(a){e.prototype.setVisibility.call(this,a),this.bulletsContainer.visible=a},o}(Component);registry.registeredClasses.Series=Series;registry.registeredClasses.SeriesDataItem=SeriesDataItem;var SerialChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SerialChartDataItem",a.applyTheme(),a}return o}(ChartDataItem),SerialChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._exitDP={},a.className="SerialChart",a.colors=new ColorSet,a._usesData=!1;var c=a.chartContainer.createChild(Container);c.shouldClone=!1,c.width=percent(100),c.height=percent(100),c.isMeasured=!1,c.layout="none",c.zIndex=2,a.seriesContainer=c;var d=a.chartContainer.createChild(Container);return d.shouldClone=!1,d.width=percent(100),d.height=percent(100),d.isMeasured=!1,d.zIndex=3,d.layout="none",a.bulletsContainer=d,a.applyTheme(),a}return o.prototype.dispose=function(){e.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(o.prototype,"series",{get:function(){return this._series||(this._series=new ListTemplate(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new ListDisposer(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),o.prototype.handleSeriesRemoved=function(a){var c=a.oldValue;this.dataUsers.removeValue(c),this.dataUsers.each(function(_e){_e.invalidateDataItems()}),this._exitDP[c.uid]&&(this._exitDP[c.uid].dispose(),delete this._exitDP[c.uid]),c.autoDispose?c.dispose():(c.parent=void 0,c.bulletsContainer.parent=void 0);var d=this.legend;if(d){for(var g=this.legend.dataItems,b=g.length-1;b>=0;b--){var j=g.getIndex(b);j&&j.dataContext==c&&d.dataItems.remove(j)}for(var b=d.data.length-1;b>=0;b--){var $=d.data[b];$&&$==c&&remove(d.data,$)}}},o.prototype.handleSeriesAdded=function(a){var c=this,d=a.newValue;d.isDisposed()||(d.chart=this,d.parent=this.seriesContainer,d.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(d),d.addDisposer(new Disposer(function(){c.dataUsers.removeValue(d)})),this.handleSeriesAdded2(d),this.handleLegendSeriesAdded(d))},o.prototype.handleLegendSeriesAdded=function(a){a.hiddenInLegend||this.legend&&this.legend.addData(a)},o.prototype.handleSeriesAdded2=function(a){var c=this;this.dataInvalid||(this._exitDP[a.uid]=registry.events.once("exitframe",function(){(!a.data||a.data.length==0)&&(a.data=c.data,a.showOnInit&&(a.reinit(),a.setPropertyValue("showOnInit",!1),a.showOnInit=!0),a.isDisposed()||a.events.once("datavalidated",function(){a.data==c.data&&(a._data=[])}))}),this._disposers.push(this._exitDP[a.uid]))},o.prototype.feedLegend=function(){var a=this.legend;if(a){var c=[];each(this.series.iterator(),function(d){d.hiddenInLegend||c.push(d)}),a.dataFields.name="name",a.data=c}},o.prototype.createSeries=function(){return new Series},Object.defineProperty(o.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(a){this.setPropertyValue("colors",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(a){this.setPropertyValue("patterns",a,!0)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.series.copyFrom(a.series)},o.prototype.appear=function(){e.prototype.appear.call(this),this.series.each(function(a){a.showOnInit&&a.inited&&a.appear()})},o}(Chart);registry.registeredClasses.SerialChart=SerialChart;var AxisBreak=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._axis=new MutableValueDisposer,a.dataItems=new List,a.className="AxisBreak",a.breakSize=.01,a.marginLeft=-5,a.marginRight=-5,a.marginTop=-5,a.marginBottom=-5;var c=new InterfaceColorSet,d=new WavedLine;d.fill=c.getFor("background"),d.stroke=color(),d.fillOpacity=.9,d.zIndex=0,a._fillShape=d;var g=new WavedLine;g.fill=color(),g.stroke=c.getFor("grid"),g.strokeOpacity=.3,g.zIndex=1,a._startLine=g;var b=new WavedLine;return b.fill=color(),b.stroke=color("#000000"),b.strokeOpacity=.3,b.zIndex=2,a._endLine=b,a._disposers.push(a._axis),a.applyTheme(),a}return o.prototype.dispose=function(){e.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(o.prototype,"startLine",{get:function(){return this._startLine},set:function(a){this._startLine&&this._startLine.dispose(),this._startLine=a,this.addBreakSprite(a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endLine",{get:function(){return this._endLine},set:function(a){this._endLine&&this._endLine.dispose(),this._endLine=a,this.addBreakSprite(a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fillShape",{get:function(){return this._fillShape},set:function(a){this._fillShape&&this._fillShape.dispose(),this._fillShape=a,this.addBreakSprite(a)},enumerable:!0,configurable:!0}),o.prototype.addBreakSprite=function(a){a.parent=this,a.isMeasured=!1,this._disposers.push(a)},Object.defineProperty(o.prototype,"axis",{get:function(){return this._axis.get()},set:function(a){if(this._axis.get()!==a){this._axis.set(a,a.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),a.renderer.createBreakSprites(this);var c=a.axisBreaks.template;this.startLine.copyFrom(c.startLine),this.endLine.copyFrom(c.endLine),this.fillShape.copyFrom(c.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(a){this.setPropertyValue("breakSize",a)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startPoint",{get:function(){var a=this.axis.renderer;if(a)return a.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endPoint",{get:function(){var a=this.axis.renderer;if(a)return a.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),o.prototype.draw=function(){if(e.prototype.draw.call(this),this.axis){var a=this.axis.renderer;a.updateBreakElement(this)}},Object.defineProperty(o.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(a){this.setPropertyValue("startValue",a)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(a){this.setPropertyValue("endValue",a)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.AxisBreak=AxisBreak;var AxisDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="AxisDataItem",a.applyTheme(),a}return Object.defineProperty(o.prototype,"grid",{get:function(){if(!this._grid){var a=this.component;if(a){var c=void 0,d;if(this.isRange){if(c=a.axisRanges.template.grid,c.disabled)return;d=c.clone()}else{if(c=a.renderer.grid.template,c.disabled)return;d=a.renderer.grid.create(),this._disposers.push(new Disposer(function(){a.renderer.grid.removeValue(d)}))}this.grid=d,d.shouldClone=!1,this._disposers.push(d),d.axis=this.component}}return this._grid},set:function(a){this._grid&&this._grid!=a&&(remove(this.sprites,this._grid),this._grid.dataItem=void 0),a&&(a.dataItem&&a.dataItem!=this&&(remove(a.dataItem.sprites,a),a.dataItem.grid=void 0),this.addSprite(a)),this._grid=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tick",{get:function(){if(!this._tick){var a=this.component;if(a){var c=void 0,d;if(this.isRange){if(c=a.axisRanges.template.tick,c.disabled)return;d=c.clone()}else{if(c=a.renderer.ticks.template,c.disabled)return;d=a.renderer.ticks.create(),this._disposers.push(new Disposer(function(){a.renderer.ticks.removeValue(d)}))}this.tick=d,d.axis=this.component,d.shouldClone=!1,this._disposers.push(d)}}return this._tick},set:function(a){this._tick&&this._tick!=a&&(remove(this.sprites,this._tick),this._tick.dataItem=void 0),a&&(a.dataItem&&a.dataItem!=this&&(remove(a.dataItem.sprites,a),a.dataItem.tick=void 0),this.addSprite(a)),this._tick=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){if(!this._label){var a=this.component;if(a){var c=void 0,d;if(this.isRange){if(c=a.axisRanges.template.label,c.disabled)return;d=c.clone()}else{if(c=a.renderer.labels.template,c.disabled)return;d=a.renderer.labels.create(),this._disposers.push(new Disposer(function(){a.renderer.labels.removeValue(d)}))}this._disposers.push(d),this.label=d,d.shouldClone=!1,d.axis=this.component,d.virtualParent=a}}return this._label},set:function(a){this._label&&this._label!=a&&(remove(this.sprites,this._label),this._label.dataItem=void 0),a&&(a.dataItem&&a.dataItem!=this&&(remove(a.dataItem.sprites,a),a.dataItem.label=void 0),this.addSprite(a)),this._label=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"axisFill",{get:function(){if(!this._axisFill){var a=this.component;if(a){var c=void 0,d;if(this.isRange){if(c=a.axisRanges.template.axisFill,!this.isTemplate&&c.disabled)return;d=c.clone()}else{if(c=a.renderer.axisFills.template,c.disabled)return;d=a.renderer.axisFills.create(),this._disposers.push(new Disposer(function(){a.renderer.axisFills.removeValue(d)}))}this.axisFill=d,d.shouldClone=!1,this._disposers.push(d)}}return this._axisFill},set:function(a){this._axisFill&&this._axisFill!=a&&(remove(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),a&&(a.dataItem&&a.dataItem!=this&&(remove(a.dataItem.sprites,a),a.dataItem.axisFill=void 0),a.axis=this.component,this.addSprite(a)),this._axisFill=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"text",{get:function(){return this._text},set:function(a){this._text=a,this._label&&(this._label.text=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contents",{get:function(){if(!this._contents){var a=new Container;this.addSprite(a),a.isMeasured=!1,this._contents=a;var c=this.component;if(c){var d=c.renderer.createFill(this.component);d.disabled=!1,d.axis=c,this.addSprite(d),this._mask=d,a.mask=d}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(a){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),a&&a.dataItems.push(this),this._axisBreak=a},enumerable:!0,configurable:!0}),o.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},o.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},o.prototype.hasProperty=function(a){return a=="component"?!0:e.prototype.hasProperty.call(this,a)},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.text=a.text,a.bullet&&(this.bullet=a.bullet.clone()),this.minPosition=a.minPosition,this.maxPosition=a.maxPosition},o.prototype.setVisibility=function(a,c){e.prototype.setVisibility.call(this,a,c),this._contents&&(this._contents.visible=a)},Object.defineProperty(o.prototype,"bullet",{get:function(){return this._bullet},set:function(a){this._bullet&&this._bullet!=a&&(remove(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=a,a&&this.addSprite(a)},enumerable:!0,configurable:!0}),o}(DataItem),AxisItemLocation;(function(e){e[e.Start=0]="Start",e[e.Middle=.5]="Middle",e[e.End=1]="End"})(AxisItemLocation||(AxisItemLocation={}));var Axis=function(e){__extends(o,e);function o(){var a=e.call(this)||this;if(a._gridCount=10,a._series=new List,a.autoDispose=!0,a._axisItemCount=0,a.constructor===o)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");a.hideTooltipWhileZooming=!0,a.minWidth=1e-4,a.minHeight=1e-4,a.className="Axis",a.shouldClone=!1,a.setPropertyValue("cursorTooltipEnabled",!0),a.toggleZoomOutButton=!0,a.zoomable=!0;var c=new InterfaceColorSet;a.title=new Label,a.title.shouldClone=!1,a._disposers.push(a.title),a.setPropertyValue("startLocation",0),a.setPropertyValue("endLocation",1),a._dataItemsIterator=new ListIterator(a.dataItems,function(){return a.dataItems.create()}),a._dataItemsIterator.createNewItems=!0;var d=new Tooltip;a._disposers.push(d),d.label.padding(5,10,5,10),d.background.pointerLength=5,d.fitPointerToBounds=!0,d.background.filters.clear(),d.virtualParent=a;var g=d.background;return g.cornerRadius=0,g.fill=c.getFor("alternativeBackground"),g.stroke=g.fill,g.strokeWidth=1,g.fillOpacity=1,d.label.fill=c.getFor("alternativeText"),a.tooltip=d,a.readerHidden=!0,a.events.on("rangechangestarted",function(){a.series.each(function(b){b.hideTooltipWhileZooming&&(b.tooltip.hide(),b.tooltip.preventShow=!0)}),a.hideTooltipWhileZooming&&(a.tooltip.hide(),a.tooltip.preventShow=!0)},void 0,!1),a.events.on("rangechangeended",function(){a.series.each(function(b){b.hideTooltipWhileZooming&&(b.tooltip.hide(),b.tooltip.preventShow=!1)}),a.hideTooltipWhileZooming&&(a.tooltip.hide(),a.tooltip.preventShow=!1)},void 0,!1),a.applyTheme(),a}return o.prototype.fillRule=function(a,c){isNumber$1(c)||(c=a.index),c/2==Math.round(c/2)?(a.axisFill.__disabled=!0,a.axisFill.opacity=0):(a.axisFill.opacity=1,a.axisFill.__disabled=!1)},o.prototype.createDataItem=function(){return new AxisDataItem},o.prototype.invalidateLayout=function(){e.prototype.invalidateLayout.call(this),each(this.series.iterator(),function(a){a.invalidateLayout()})},o.prototype.invalidateSeries=function(){each(this.series.iterator(),function(a){a.invalidate()})},o.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},o.prototype.updateGridCount=function(){if(this.renderer){var a=this.axisLength/this.renderer.minGridDistance;a!=this._gridCount&&(this._gridCount=a,this.clearCache())}},o.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),e.prototype.validateLayout.call(this),this.updateGridCount();var a=this.renderer;a&&(a.updateAxisLine(),a.updateTooltip(),a.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},o.prototype.initRenderer=function(){},o.prototype.appendDataItem=function(a){var c=this.renderer,d=a.tick;d&&(d.above?d.parent=c.bulletsContainer:d.parent=c.gridContainer),a.label&&(a.label.parent=c);var g=a.axisFill;g&&(g.above?g.parent=c.bulletsContainer:g.parent=c.gridContainer);var b=a.grid;b&&(b.above?b.parent=c.bulletsContainer:b.parent=c.gridContainer),a.bullet&&(a.bullet.parent=c.bulletsContainer)},o.prototype.validate=function(){e.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},o.prototype.validateAxisRanges=function(){var a=this;each(this.axisRanges.iterator(),function(c){a.appendDataItem(c),a.validateDataElement(c),c.grid&&c.grid.validate(),c.tick&&c.tick.validate(),c.axisFill&&c.axisFill.validate(),c.label&&c.label.validate()})},o.prototype.validateBreaks=function(){this._axisBreaks&&each(this._axisBreaks.iterator(),function(a){a.invalidate()})},o.prototype.processBreak=function(a){var c=a.newValue;c.parent=this.renderer.breakContainer,c.axis=this},o.prototype.registerSeries=function(a){var c=this;return this.series.moveValue(a),new MultiDisposer([new Disposer(function(){c.series.removeValue(a)}),this.events.on("lengthchanged",a.invalidate,a,!1),this.events.on("lengthchanged",a.createMask,a,!1),this.events.on("startchanged",a.invalidate,a,!1),this.events.on("endchanged",a.invalidate,a,!1)])},Object.defineProperty(o.prototype,"renderer",{get:function(){return this._renderer},set:function(a){if(a!=this._renderer){this._renderer=a,a.chart=this.chart,a.axis=this,a.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(a.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var c=this.renderer.labels.create();this._disposers.push(c),c.dataItem=this.dataItems.template.clone(),c.text="L",c.parent=this.renderer,c.shouldClone=!1,c.fillOpacity=0,c.opacity=0,c.strokeOpacity=0,c.interactionsEnabled=!1,c.validate(),this.ghostLabel=c,this.events.on("beforedatavalidated",function(){c.text="L"},void 0,!1)}},enumerable:!0,configurable:!0}),o.prototype.positionToAngle=function(a){return this.renderer.positionToAngle(a)},o.prototype.pointToPosition=function(a){return this.renderer.pointToPosition(a)},o.prototype.positionToCoordinate=function(a){return this.renderer.positionToCoordinate(a)},o.prototype.getAnyRangePath=function(a,c){return this.renderer.getPositionRangePath(a,c)},o.prototype.anyToPosition=function(a){return 0},o.prototype.anyToPoint=function(a){return{x:0,y:0,angle:0}},o.prototype.getPositionRangePath=function(a,c){return this.renderer?this.renderer.getPositionRangePath(a,c):""},Object.defineProperty(o.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(a){this.setPropertyValue("cursorTooltipEnabled",a)&&(a&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(a){this.setPropertyValue("toggleZoomOutButton",a)},enumerable:!0,configurable:!0}),o.prototype.hideTooltip=function(a){e.prototype.hideTooltip.call(this,a),this._tooltipPosition=void 0},o.prototype.showTooltipAtPosition=function(a,c){var d=this._tooltip;if(!d||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(c||(a=this.toAxisPosition(a)),!isNumber$1(a)||a<this.start||a>this.end){d.hide(0),this._tooltipPosition=void 0;return}var g=this.renderer;d.parent||(d.parent=this.tooltipContainer);var b=g.tooltipLocation,j=this.getCellStartPosition(a),$=this.getCellEndPosition(a);if(this.tooltipPosition=="fixed"&&(a=j+($-j)*b),a=fitToRange(a,this.start,this.end),this._tooltipPosition!=a){this._tooltipPosition=a;var _e=g.tooltipLocation2,st=g.positionToPoint(j,_e),rt=g.positionToPoint($,_e);this.currentItemStartPoint=st,this.currentItemEndPoint=rt,g.fullWidthTooltip&&(d.width=rt.x-st.x,d.height=rt.y-st.y);var ut=g.positionToPoint(a,_e),gt=spritePointToSvg(ut,this.renderer.line);d.text=this.getTooltipText(a),d.text&&(d.delayedPointTo(gt),d.show())}(!this.cursorTooltipEnabled||this.tooltip.disabled)&&d.hide(0)}},o.prototype.toAxisPosition=function(a){if(a=this.renderer.toAxisPosition(a),a!=null)return a=a*(this.end-this.start),this.renderer.inversed?a=this.end-a:a=this.start+a,a},o.prototype.toGlobalPosition=function(a){return this.renderer.inversed?a=this.end-a:a=a-this.start,a/(this.end-this.start)},o.prototype.getTooltipText=function(a){},o.prototype.updateTooltip=function(a,c){var d=this._tooltip;d&&(d.fixDoc=!1,d.pointerOrientation=a,d.setBounds(spriteRectToSvg(c,this.renderer.line)))},o.prototype.roundPosition=function(a,c,d){return a},o.prototype.getCellStartPosition=function(a){return a},o.prototype.getCellEndPosition=function(a){return a},Object.defineProperty(o.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var a=this.createDataItem();a.isRange=!0,a.axisFill=this.renderer.axisFills.template.clone(),a.grid=this.renderer.grid.template.clone(),a.tick=this.renderer.ticks.template.clone(),a.label=this.renderer.labels.template.clone(),a.isTemplate=!0,a.component=this,a.axisFill.disabled=!1,a.tick.disabled=!1,a.grid.disabled=!1,a.label.disabled=!1,this._axisRanges=new ListTemplate(a),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new ListDisposer(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),o.prototype.processAxisRange=function(a){var c=a.newValue;c.component=this,c.isRange=!0},Object.defineProperty(o.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new SortedListTemplate(this.createAxisBreak(),function(a,c){return order(a.adjustedStartValue,c.adjustedStartValue)}),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new ListDisposer(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),o.prototype.createAxisBreak=function(){return new AxisBreak},Object.defineProperty(o.prototype,"series",{get:function(){return this._series||(this._series=new List),this._series},enumerable:!0,configurable:!0}),o.prototype.processSeriesDataItems=function(){},o.prototype.processSeriesDataItem=function(a,c){},o.prototype.postProcessSeriesDataItems=function(a){},o.prototype.postProcessSeriesDataItem=function(a){},o.prototype.updateAxisBySeries=function(){},o.prototype.hideUnusedDataItems=function(){var a=this,c=this._dataItemsIterator;c.createNewItems=!1,each(c.iterator(),function(d){a.validateDataElement(d),d.__disabled=!0}),c.clear(),c.createNewItems=!0},o.prototype.getSeriesDataItem=function(a,c,d){},o.prototype.getAngle=function(a,c,d,g,b){},o.prototype.getX=function(a,c,d,g,b){},o.prototype.getPositionX=function(a,c,d,g,b){},o.prototype.getY=function(a,c,d,g,b){},o.prototype.getPositionY=function(a,c,d,g,b){},Object.defineProperty(o.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),o.prototype.dataChangeUpdate=function(){},o.prototype.seriesDataChangeUpdate=function(a){},o.prototype.adjustDifference=function(a,c){var d=c-a;if(isNumber$1(d))return this._axisBreaks&&eachContinue(this._axisBreaks.iterator(),function(g){var b=g.adjustedStartValue,j=g.adjustedEndValue;if(isNumber$1(b)&&isNumber$1(j)){if(b>c)return!1;if(j>=a&&isNumber$1(b)&&isNumber$1(j)){var $=g.breakSize,_e=intersection({start:b,end:j},{start:a,end:c});_e&&(d-=(_e.end-_e.start)*(1-$))}return!0}}),d},o.prototype.isInBreak=function(a){if(this._axisBreaks)return find(this._axisBreaks.iterator(),function(c){return a>=c.adjustedStartValue&&a<=c.adjustedEndValue})},o.prototype.fixAxisBreaks=function(){var a=this;if(this._axisBreaks){var c=this._axisBreaks;if(c.length>0){each$2(toArray$1(c.iterator()),function(b){var j=min$1(b.startValue,b.endValue),$=max$1(b.startValue,b.endValue);b.adjustedStartValue=j,b.adjustedEndValue=$,a._axisBreaks.update(b)});var d=c.first,g=Math.min(d.startValue,d.endValue);each(c.iterator(),function(b){var j=b.adjustedStartValue,$=b.adjustedEndValue;j<g&&(j=g,$<g&&($=g)),b.adjustedStartValue=j,b.adjustedEndValue=$})}}},Object.defineProperty(o.prototype,"startIndex",{get:function(){return 0},set:function(a){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(a){},enumerable:!0,configurable:!0}),o.prototype.getPositionLabel=function(a){return Math.round(a*100)+"%x"},Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(a){this._chart=a},enumerable:!0,configurable:!0}),o.prototype.createSeriesRange=function(a){var c=this.axisRanges.create();return c.component=this,c.axisFill=this.renderer.axisFills.template.clone(),c.axisFill.disabled=!1,c.axisFill.fillOpacity=0,c.grid=this.renderer.grid.template.clone(),c.grid.disabled=!0,c.tick=this.renderer.ticks.template.clone(),c.tick.disabled=!0,c.label=this.renderer.labels.template.clone(),c.label.disabled=!0,c.addDisposer(new Disposer(function(){a.axisRanges.removeValue(c)})),a.axisRanges.push(c),c},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.renderer?this.renderer.copyFrom(a.renderer):a.renderer&&(this.renderer=a.renderer.clone(),this._disposers.push(this.renderer)),a.title&&(this.title?this.title.copyFrom(a.title):(this.title=a.title.clone(),this.title.parent=this),this._disposers.push(this.title))},o.prototype.resetIterators=function(){this._dataItemsIterator.reset()},o.prototype.processConfig=function(a){if(a&&hasValue(a.axisRanges)&&isArray$1(a.axisRanges))for(var c=0,d=a.axisRanges.length;c<d;c++){var g=a.axisRanges[c];hasValue(g.series)&&isString$1(g.series)&&this.map.hasKey(g.series)&&(a.axisRanges[c]=this.createSeriesRange(this.map.getKey(g.series)),delete g.series,a.axisRanges[c].config=g)}e.prototype.processConfig.call(this,a)},o.prototype.configOrder=function(a,c){return a==c?0:a=="title"?1:c=="title"||a=="component"?-1:c=="component"?1:e.prototype.configOrder.call(this,a,c)},Object.defineProperty(o.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(a){this.setPropertyValue("startLocation",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(a){this.setPropertyValue("endLocation",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return this.renderer&&(this.renderer.gridContainer.disabled=a),c},Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(a){this._title&&this._title!=a&&this._title.dispose(),a&&(this._title=a,a.parent=this,a.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(a){this.setPropertyValue("hideTooltipWhileZooming",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(a){this.setPropertyValue("zoomable",a)},enumerable:!0,configurable:!0}),o}(Component);registry.registeredClasses.Axis=Axis;registry.registeredClasses.AxisDataItem=AxisDataItem;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,o){if(e instanceof Axis&&e.tooltip){var a=e.states.create(o);return a.properties.cursorTooltipEnabled=!1,a}return null}});var AxisLine=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="AxisLine",a.element=a.paper.add("path");var c=new InterfaceColorSet;return a.stroke=c.getFor("grid"),a.strokeOpacity=.15,a.pixelPerfect=!0,a.fill=color(),a.applyTheme(),a.interactionsEnabled=!1,a}return o}(Sprite);registry.registeredClasses.AxisLine=AxisLine;var AxisFill=function(e){__extends(o,e);function o(a){var c=e.call(this)||this;c.axis=a,c.element=c.paper.add("path"),c.className="AxisFill",c.isMeasured=!1,c.location=0,c.above=!1;var d=new InterfaceColorSet;return c.fill=d.getFor("alternativeBackground"),c.fillOpacity=0,c.applyTheme(),c}return o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return this.axis&&this.axis.invalidateDataItems(),c},o.prototype.draw=function(){e.prototype.draw.call(this),!(this.__disabled||this.disabled)&&this.axis&&isNumber$1(this.startPosition)&&isNumber$1(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(o.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(a){this.setPropertyValue("startPosition",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(a){this.setPropertyValue("endPosition",a),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(a){this.setPropertyValue("location",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setPath=function(a){return this.setPropertyValue("path",a)?(this.element.attr({d:a}),!0):!1},Object.defineProperty(o.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(a){this.setPropertyValue("above",a,!0)},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.AxisFill=AxisFill;var Grid$1=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Grid",a.element=a.paper.add("path"),a.location=.5,a.isMeasured=!1,a.above=!1;var c=new InterfaceColorSet;return a.stroke=c.getFor("grid"),a.pixelPerfect=!0,a.strokeOpacity=.15,a.fill=color(),a.applyTheme(),a}return Object.defineProperty(o.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(a){this.setPropertyValue("location",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(a){this.setPropertyValue("above",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return this.axis&&this.axis.invalidateDataItems(),c},o}(Sprite);registry.registeredClasses.Grid=Grid$1;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,o){if(e instanceof Grid$1){var a=e.states.create(o);return a.properties.disabled=!0,a}return null}});var AxisLabel=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="AxisLabel",a.isMeasured=!1,a.padding(10,10,10,10),a.location=.5,a.applyTheme(),a}return Object.defineProperty(o.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(a){this.setPropertyValue("location",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(a){this.setPropertyValue("inside",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return this.axis&&this.axis.invalidateDataItems(),c},o}(Label);registry.registeredClasses.AxisLabel=AxisLabel;var Tick=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="Tick";var c=new InterfaceColorSet;return a.fillOpacity=0,a.length=6,a.strokeOpacity=.2,a.stroke=c.getFor("grid"),a.isMeasured=!1,a.nonScalingStroke=!0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(a){this.setPropertyValue("length",a,!0)},enumerable:!0,configurable:!0}),o}(Sprite);registry.registeredClasses.Tick=Tick;var AxisTick=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="AxisTick",a.element=a.paper.add("path"),a.location=.5,a.above=!1,a.isMeasured=!1,a.pixelPerfect=!0,a.strokeOpacity=0,a.length=5,a.applyTheme(),a}return Object.defineProperty(o.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(a){this.setPropertyValue("location",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(a){this.setPropertyValue("inside",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(a){this.setPropertyValue("above",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return this.axis&&this.axis.invalidateDataItems(),c},o}(Tick);registry.registeredClasses.AxisTick=AxisTick;var AxisRenderer=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._chart=new MutableValueDisposer,a.className="AxisRenderer",a.minGridDistance=50,a.inside=!1,a.inversed=!1,a.tooltipLocation=.5,a.fullWidthTooltip=!1,a.cellStartLocation=0,a.cellEndLocation=1,a.minLabelPosition=0,a.maxLabelPosition=1,a.shouldClone=!1;var c=a.createChild(Container);c.shouldClone=!1,c.layout="none",c.virtualParent=a,c.width=percent(100),c.height=percent(100),a.gridContainer=c,c.events.on("maxsizechanged",function(){a.inited&&a.invalidateAxisItems()},a,!1);var d=a.createChild(Container);d.shouldClone=!1,d.isMeasured=!1,d.layout="none",d.width=percent(100),d.height=percent(100),a.breakContainer=d;var g=a.createChild(Container);g.shouldClone=!1,g.isMeasured=!1,g.layout="none",g.width=percent(100),g.height=percent(100),a.bulletsContainer=g,a.line=a.createChild(AxisLine),a.line.shouldClone=!1,a.line.strokeOpacity=0;var b=a.createChild(Grid$1);b.shouldClone=!1,a.baseGrid=b;var j=a._disposers;return j.push(b),j.push(a.line),j.push(c),j.push(d),j.push(g),j.push(a._chart),a.ticks.template.disabled=!0,a.axisFills.template.disabled=!0,a.axisFills.template.interactionsEnabled=!1,a.applyTheme(),a}return Object.defineProperty(o.prototype,"axis",{get:function(){return this._axis},set:function(a){this.setAxis(a)},enumerable:!0,configurable:!0}),o.prototype.setAxis=function(a){this._axis=a,this.baseGrid.parent=a,this.line.parent=a,this.gridContainer.bind("opacity",a)},o.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},o.prototype.updateTooltip=function(){},Object.defineProperty(o.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),o.prototype.positionItem=function(a,c){a&&a.moveTo(c)},o.prototype.positionToPoint=function(a,c){return{x:0,y:0}},o.prototype.positionToAngle=function(a){return 0},o.prototype.positionToCoordinate=function(a){var c,d=this.axis,g=d.axisFullLength;return d.renderer.inversed?c=(d.end-a)*g:c=(a-d.start)*g,c},o.prototype.updateGridContainer=function(){},o.prototype.getHeight=function(){var a=this.gridContainer;return a.parent?a.parent.pixelHeight:this.gridContainer.pixelHeight||0},o.prototype.getWidth=function(){var a=this.gridContainer;return a.parent?a.parent.pixelWidth:this.gridContainer.pixelWidth||0},o.prototype.coordinateToPosition=function(a,c){var d,g=this.axis,b=g.axisFullLength;return g.renderer.inversed?d=g.end-a/b:d=a/b+g.start,round$1(d,5)},o.prototype.pointToPosition=function(a){return 0},o.prototype.getPositionRangePath=function(a,c){return""},o.prototype.invalidateAxisItems=function(){var a=this.axis;a&&a.invalidateDataItems()},o.prototype.updateGridElement=function(a,c,d){},o.prototype.updateTickElement=function(a,c,d){},o.prototype.updateBullet=function(a,c,d){},o.prototype.updateLabelElement=function(a,c,d,g){},o.prototype.updateFillElement=function(a,c,d){a.startPosition=c,a.endPosition=d},o.prototype.updateAxisLine=function(){},o.prototype.updateBaseGridElement=function(){},o.prototype.updateBreakElement=function(a){this.positionItem(a.startLine,a.startPoint),this.toggleVisibility(a.startLine,a.startPosition,0,1),this.positionItem(a.endLine,a.endPoint),this.toggleVisibility(a.endLine,a.endPosition,0,1)},Object.defineProperty(o.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(a){this.setPropertyValue("minGridDistance",a)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart.get()},set:function(a){this._chart.set(a,null)},enumerable:!0,configurable:!0}),o.prototype.toggleVisibility=function(a,c,d,g){var b=this.axis,j=a.dataItem;j&&j instanceof AxisDataItem&&(isNumber$1(j.minPosition)&&(d=j.minPosition),isNumber$1(j.maxPosition)&&(g=j.maxPosition));var $=b.start+(b.end-b.start)*(d-1e-4),_e=b.start+(b.end-b.start)*(g+1e-4);a.disabled||(c<$||c>_e?a.__disabled=!0:a.__disabled=!1)},o.prototype.createBreakSprites=function(a){},Object.defineProperty(o.prototype,"axisFills",{get:function(){if(!this._axisFills){var a=this.createFill(this.axis);this._axisFills=new ListTemplate(a),a.applyOnClones=!0,a.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new ListDisposer(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),o.prototype.createFill=function(a){return new AxisFill(a)},Object.defineProperty(o.prototype,"grid",{get:function(){if(!this._grid){var a=this.createGrid();this._grid=new ListTemplate(a),a.applyOnClones=!0,a.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new ListDisposer(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),o.prototype.createGrid=function(){return new Grid$1},Object.defineProperty(o.prototype,"ticks",{get:function(){if(!this._ticks){var a=this.createTick();a.applyOnClones=!0,a.isMeasured=!1,a.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new ListTemplate(a),this._disposers.push(new ListDisposer(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),o.prototype.createTick=function(){return new AxisTick},Object.defineProperty(o.prototype,"labels",{get:function(){if(!this._labels){var a=this.createLabel();this._labels=new ListTemplate(a),a.applyOnClones=!0,a.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new ListDisposer(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),o.prototype.createLabel=function(){return new AxisLabel},Object.defineProperty(o.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(a){this.setPropertyValue("inside",a)&&this.axis&&this.axis.invalidate(),a?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(a){this.setPropertyValue("opposite",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(a){this.setPropertyValue("fullWidthTooltip",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(a){this.setPropertyValue("tooltipLocation",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(a){this.setPropertyValue("tooltipLocation2",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(a){this.setPropertyValue("cellStartLocation",a)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(a){this.setPropertyValue("cellEndLocation",a)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(a){this.setPropertyValue("inversed",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(a){this.setPropertyValue("minLabelPosition",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(a){this.setPropertyValue("maxLabelPosition",a,!0)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.grid.template.copyFrom(a.grid.template),this.ticks.template.copyFrom(a.ticks.template),this.labels.template.copyFrom(a.labels.template),this.axisFills.template.copyFrom(a.axisFills.template),this.line.copyFrom(a.line),this.baseGrid.copyFrom(a.baseGrid)},o.prototype.toAxisPosition=function(a){return a},o.prototype.setVisibility=function(a){e.prototype.setVisibility.call(this,a),this.bulletsContainer.visible=a},o}(Container);registry.registeredClasses.AxisRenderer=AxisRenderer;var AxisBullet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="AxisBullet",a.location=.5,a.isMeasured=!1,a.applyTheme(),a}return Object.defineProperty(o.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(a){this.setPropertyValue("location",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setDisabled=function(a){var c=e.prototype.setDisabled.call(this,a);return this.axis&&this.axis.invalidateDataItems(),c},o}(Container);registry.registeredClasses.AxisBullet=AxisBullet;var AxisRendererY=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="AxisRendererY",a.minGridDistance=40,a.opposite=!1,a.height=percent(100),a.labels.template.verticalCenter="middle",a.applyTheme(),a}return o.prototype.setAxis=function(a){e.prototype.setAxis.call(this,a),a.layout="horizontal"},o.prototype.updateGridContainer=function(){var a=this.axis;if(a){var c=this.gridContainer;c.y=a.pixelY,c.height=a.axisLength}},o.prototype.toAxisPosition=function(a){var c=this.axis;if(c){var d=1-a,g=c.relativePositionSprite,b=c.pixelY;if(g?b=spritePointToSprite({x:0,y:this.pixelY},this.parent,g).y:g=c.parent,g){var j=b/g.innerHeight,$=c.axisLength/g.innerHeight;return 1-(d-j)/$}}return a},o.prototype.processRenderer=function(){e.prototype.processRenderer.call(this);var a=this.axis;if(a){var c=a.title;c.valign="middle",a.height instanceof Percent||(a.height=percent(100)),this.opposite?(c.rotation=90,this.line.toBack(),c.toFront()):(c.rotation=-90,c.toBack(),this.line.toFront())}},o.prototype.updateTooltip=function(){var a=this.axis;if(a){var c=2e3,d=0,g=0,b=c,j=this.axisLength;this.opposite?this.inside&&(d=-c,b=c):this.inside||(d=-c,b=c),this.axis.updateTooltip("horizontal",{x:d,y:g,width:b,height:j})}},Object.defineProperty(o.prototype,"axisLength",{get:function(){var a=this.axis;return a.measuredHeight-a.pixelPaddingTop-a.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a,c){return{x:0,y:this.positionToCoordinate(a)}},o.prototype.pointToPosition=function(a){return this.coordinateToPosition(a.y,a.x)},o.prototype.coordinateToPosition=function(a,c){var d,g=this.axis,b=g.axisFullLength;return g.renderer.inversed?d=1-g.start-a/b:d=a/b+(1-g.end),round$1(d,5)},o.prototype.getPositionRangePath=function(a,c){var d=fitToRange(this.positionToCoordinate(a),0,this.axisLength),g=fitToRange(this.positionToCoordinate(c),0,this.axisLength),b=Math.abs(g-d),j=this.getWidth(),$=Math.min(d,g),_e=0;return rectToPath({x:_e,y:$,width:j,height:b},!0)},o.prototype.updateGridElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);a.path=moveTo({x:0,y:0})+lineTo({x:this.getWidth(),y:0}),this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateTickElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c),b=a.length;try{this.axis.title.measuredWidth}catch{}g.x=spritePointToSprite({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.opposite?b*=a.inside?-1:1:b*=a.inside?1:-1,a.path=moveTo({x:0,y:0})+lineTo({x:b,y:0}),this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateAxisLine=function(){this.line.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.axisLength})},o.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var a=this.axis,c=this.getWidth(),d=this.axisLength,g=a.basePoint.y,b=this.baseGrid;if(g<-.2||g>d+.2)b.hide(0);else{var j=spritePointToSprite({x:0,y:0},this.gridContainer,b.parent).x;b.path=moveTo({x:0,y:0})+lineTo({x:c,y:0}),b.moveTo({x:j,y:g}),b.show(0)}},o.prototype.updateLabelElement=function(a,c,d,g){hasValue(g)||(g=a.location),c=c+(d-c)*g,a.isMeasured=!a.inside;var b=this.positionToPoint(c),j,$=0,_e=this.gridContainer.maxWidth;this.opposite?(a.inside?(j="right",a.align=="left"&&($=-_e,j="left"),a.align=="center"&&($=-_e/2,j="middle")):j="left",b.x=0+$):(a.inside?(j="left",a.align=="right"&&($=_e,j="right"),a.align=="center"&&($=_e/2,j="middle")):j="right",b.x=this.measuredWidth+$),a.rotation==0&&(a.horizontalCenter=j),this.positionItem(a,b),this.toggleVisibility(a,c,this.minLabelPosition,this.maxLabelPosition)},o.prototype.updateBreakElement=function(a){e.prototype.updateBreakElement.call(this,a);var c=a.startLine,d=a.endLine,g=a.fillShape,b=a.startPoint,j=a.endPoint,$=a.pixelMarginLeft,_e=this.getWidth()-a.pixelMarginLeft-a.pixelMarginRight;b.y=fitToRange(b.y,-1,this.axisLength+1),j.y=fitToRange(j.y,-1,this.axisLength+1),b.y==j.y&&(b.y<0||b.y>this.axisLength)?a.fillShape.__disabled=!0:a.fillShape.__disabled=!1;var st=Math.abs(_e-$);c.x=$,c.height=0,c.width=st,d.x=$,d.height=0,d.width=st,g.width=st,g.height=Math.abs(j.y-b.y),g.x=$,g.y=j.y},o.prototype.createBreakSprites=function(a){a.startLine=new WavedLine,a.endLine=new WavedLine;var c=new WavedRectangle;c.setWavedSides(!0,!1,!0,!1),a.fillShape=c},o.prototype.positionToCoordinate=function(a){var c,d=this.axis,g=d.axisFullLength;return d.renderer.inversed?c=(a-d.start)*g:c=(d.end-a)*g,c},o.prototype.updateBullet=function(a,c,d){var g=.5;a instanceof AxisBullet&&(g=a.location),c=c+(d-c)*g;var b=this.positionToPoint(c);b.x=spritePointToSprite({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(a,b),this.toggleVisibility(a,c,0,1)},o}(AxisRenderer);registry.registeredClasses.AxisRendererY=AxisRendererY;defaultRules.push({relevant:ResponsiveBreakpoints.widthS,state:function(e,o){if(e instanceof AxisRendererY){var a=e.states.create(o);return a.properties.inside=!0,a.properties.maxLabelPosition=.9,a.properties.minLabelPosition=.1,a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(e,o){if(e instanceof AxisRendererY){var a=e.states.create(o);return a.properties.disabled=!0,a}return null}});var ValueAxisBreak=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ValueAxisBreak",a.applyTheme(),a}return Object.defineProperty(o.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),o}(AxisBreak);registry.registeredClasses.ValueAxisBreak=ValueAxisBreak;var ValueAxisDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ValueAxisDataItem",a.values.value={},a.values.endValue={},a.applyTheme(),a}return Object.defineProperty(o.prototype,"value",{get:function(){return this.values.value.value},set:function(a){this.setValue("value",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(a){this.setValue("endValue",a)},enumerable:!0,configurable:!0}),o}(AxisDataItem),ValueAxis=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._stepDecimalPlaces=0,a._prevStepDecimalPlaces=0,a._adjustLabelPrecision=!0,a._baseValue=0,a._adjustedStart=0,a._adjustedEnd=1,a._extremesChanged=!1,a._deltaMinMax=1,a._dsc=!1,a.calculateTotals=!1,a.className="ValueAxis",a.axisFieldName="value",a.setPropertyValue("maxZoomFactor",1e3),a.setPropertyValue("extraMin",0),a.setPropertyValue("extraMax",0),a.setPropertyValue("strictMinMax",!1),a.setPropertyValue("maxPrecision",Number.MAX_VALUE),a.setPropertyValue("adjustLabelPrecision",!0),a.setPropertyValue("extraTooltipPrecision",0),a.keepSelection=!1,a.includeRangesInMinMax=!1,a.applyTheme(),a}return o.prototype.fillRule=function(a){var c=a.value,d=a.component;a.axisFill.disabled||(round$1(c/d.step/2,5)==Math.round(c/d.step/2)?a.axisFill.__disabled=!0:a.axisFill.__disabled=!1)},o.prototype.createDataItem=function(){return new ValueAxisDataItem},o.prototype.createAxisBreak=function(){return new ValueAxisBreak},o.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(this._start!=0&&this.dispatchImmediately("startchanged"),this._end!=1&&this.dispatchImmediately("endchanged"),(this._start!=0||this._end!=1)&&this.dispatchImmediately("startendchanged")):(this._start!=0||this._end!=1)&&(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},o.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var a=this.series.getIndex(0),c=a.startIndex;if(a.dataItems.length>0){c>0&&c--;var d=a.endIndex;d<a.dataItems.length&&d++;for(var g=function($){var _e={},st={};b.series.each(function(rt){if(!rt.excludeFromTotal){var ut=rt.dataItems.getIndex($);ut&&each$1(ut.values,function(gt){var yt=ut.values[gt].workingValue;isNumber$1(yt)&&(isNumber$1(_e[gt])?_e[gt]+=Math.abs(yt):_e[gt]=Math.abs(yt),isNumber$1(st[gt])?st[gt]+=yt:st[gt]=yt)})}}),b.series.each(function(rt){if(!rt.excludeFromTotal){var ut=rt.dataItems.getIndex($);ut&&each$1(ut.values,function(gt){var yt=ut.values[gt].workingValue;isNumber$1(yt)&&(ut.setCalculatedValue(gt,_e[gt],"total"),ut.setCalculatedValue(gt,100*yt/_e[gt],"totalPercent"),ut.setCalculatedValue(gt,st[gt],"sum"))})}})},b=this,j=c;j<d;++j)g(j)}}},o.prototype.validate=function(){this.axisLength<=0||(e.prototype.validate.call(this),this.getMinMax(),isNumber$1(this._minAdjusted)||this.dataItems.each(function(a){a.value=null}),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},o.prototype.calculateZoom=function(){if(isNumber$1(this.min)&&isNumber$1(this.max)){var a=this.positionToValue(this.start),c=this.positionToValue(this.end),d=this.adjustDifference(a,c),g=this.adjustMinMax(a,c,d,this._gridCount,!0),b=decimalPlaces(g.step);this._stepDecimalPlaces=b,a=round$1(a,b),c=round$1(c,b),g=this.adjustMinMax(a,c,d,this._gridCount,!0);var j=g.step;if(this.syncWithAxis){var $=this.getCache(a+"-"+c);isNumber$1($)&&(j=$)}else a=g.min,c=g.max;(this._minZoomed!=a||this._maxZoomed!=c||this._step!=j||this._dsc)&&(this._dsc=!1,this._minZoomed=a,this._maxZoomed=c,this._step=j,this.dispatchImmediately("selectionextremeschanged"))}},o.prototype.fixSmallStep=function(a){return 1+a==1?(a*=2,this.fixSmallStep(a)):a},o.prototype.validateAxisElements=function(){var a=this;if(isNumber$1(this.max)&&isNumber$1(this.min)){var c=this.minZoomed-this._step*2;if(!this.logarithmic)c=Math.floor(c/this._step)*this._step;else{var d=Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E;d>1?c=Math.pow(10,Math.log(this.min)*Math.LOG10E):(c=Math.floor(this.minZoomed/this._step)*this._step,c==0&&(c=this.minZoomed))}var g=this._maxZoomed+this._step;this.resetIterators();var b=this._dataItemsIterator;if(this._step==0)return;this._step=this.fixSmallStep(this._step);var j=0,$=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;c<=g;){var _e=this.isInBreak(c);if(!_e){var st=b.find(function(Ct){return Ct.value===c});st.__disabled&&(st.__disabled=!1),this.appendDataItem(st),st.axisBreak=void 0,(st.value!=c||$)&&(st.value=c,st.text=this.formatLabel(c),st.label&&st.label.invalid&&st.label.validate(),st.value>=this.min&&st.value<=this.max&&st.label&&(this.axisLetter=="Y"&&st.label.measuredWidth>this.ghostLabel.measuredWidth||this.axisLetter=="X"&&st.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=st.label.currentText,this.ghostLabel.validate())),this.validateDataElement(st)}j++;var rt=c;if(!this.logarithmic)c+=this._step;else{var d=Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E;d>1?c=Math.pow(10,Math.log(this.min)*Math.LOG10E+j):c+=this._step}var ut=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(ut<1){var gt=Math.round(Math.abs(Math.log(Math.abs(ut))*Math.LOG10E))+2;if(gt=Math.min(13,gt),c=round$1(c,gt),rt==c){c=g;break}}}var yt=this._axisBreaks;if(yt){var wt=this.renderer;each(yt.iterator(),function(Ct){if(Ct.breakSize>0&&getDistance(Ct.startPoint,Ct.endPoint)>wt.minGridDistance)for(var Pt=Ct.adjustedMin;Pt<=Ct.adjustedMax;){if(Pt>=Ct.adjustedStartValue&&Pt<=Ct.adjustedEndValue){var At=b.find(function(Tt){return Tt.value===Pt});At.__disabled&&(At.__disabled=!1),a.appendDataItem(At),At.axisBreak=Ct,At.value!=Pt&&(At.value=Pt,At.text=a.formatLabel(Pt),At.label&&At.label.invalid&&At.label.validate()),a.validateDataElement(At)}Pt+=Ct.adjustedStep}})}}},o.prototype.validateDataElement=function(a){e.prototype.validateDataElement.call(this,a),a.itemIndex=this._axisItemCount,this._axisItemCount++;var c=this.renderer,d=a.value,g=a.endValue,b=this.valueToPosition(d);a.position=b;var j=b,$=this.valueToPosition(d+this._step);isNumber$1(g)&&(j=this.valueToPosition(g),$=j),a.point=c.positionToPoint(b);var _e=a.tick;_e&&!_e.disabled&&c.updateTickElement(_e,b,j);var st=a.grid;st&&!st.disabled&&c.updateGridElement(st,b,j);var rt=a.label;rt&&!rt.disabled&&c.updateLabelElement(rt,b,j);var ut=a.axisFill;ut&&!ut.disabled&&(c.updateFillElement(ut,b,$),a.isRange||this.fillRule(a)),a.bullet&&c.updateBullet(a.bullet,b,j);var gt=a.mask;gt&&c.updateFillElement(gt,b,$)},o.prototype.formatLabel=function(a){return this.adjustLabelPrecision&&a!=0?this.numberFormatter.format(a,void 0,this._stepDecimalPlaces):this.numberFormatter.format(a)},Object.defineProperty(o.prototype,"basePoint",{get:function(){var a=this.baseValue,c=this.valueToPosition(a),d=this.renderer.positionToPoint(c);return d},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseValue",{get:function(){var a=this._baseValue;return this.logarithmic&&(a=this.min),this._adapterO?this._adapterO.apply("baseValue",a):a},set:function(a){this._baseValue=a,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),o.prototype.anyToPosition=function(a){return this.valueToPosition(a)},o.prototype.valueToPoint=function(a){var c=this.valueToPosition(a),d=this.renderer.positionToPoint(c),g=this.renderer.positionToAngle(c);return{x:d.x,y:d.y,angle:g}},o.prototype.anyToPoint=function(a){return this.valueToPoint(a)},o.prototype.valueToPosition=function(a){if(isNumber$1(a)){var c=this.min,d=this.max;if(isNumber$1(c)&&isNumber$1(d)){var g=this._difference,b=this._axisBreaks;b&&b.length>0&&eachContinue(b.iterator(),function(_e){var st=_e.adjustedStartValue,rt=_e.adjustedEndValue;if(isNumber$1(st)&&isNumber$1(rt)){if(a<st)return!1;if(intersect({start:st,end:rt},{start:c,end:d})){st=Math.max(st,c),rt=Math.min(rt,d);var ut=_e.breakSize;a>rt?c+=(rt-st)*(1-ut):a<st||(a=st+(a-st)*ut)}}return!0});var j=void 0;if(!this.logarithmic)j=(a-c)/g;else{var $=this.treatZeroAs;isNumber$1($)&&a<=$&&(a=$),j=(Math.log(a)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}return j}}return 0},o.prototype.invalidateLabels=function(){e.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each(function(a){a.value=void 0}),this.invalidate())},o.prototype.positionToValue=function(a){var c=this.min,d=this.max;if(isNumber$1(c)&&isNumber$1(d)){var g=d-c,b=null,j=this._axisBreaks;return j&&j.length>0&&eachContinue(j.iterator(),function($){var _e=$.startPosition,st=$.endPosition,rt=$.adjustedStartValue,ut=$.adjustedEndValue;if(isNumber$1(rt)&&isNumber$1(ut)){if(rt>d)return!1;if(intersect({start:rt,end:ut},{start:c,end:d})){rt=max$1(rt,c),ut=min$1(ut,d);var gt=$.breakSize;if(g-=(ut-rt)*(1-gt),a>st)c+=(ut-rt)*(1-gt);else if(!(a<_e)){var yt=(a-_e)/(st-_e);return b=rt+yt*(ut-rt),!1}}return!0}}),isNumber$1(b)||(this.logarithmic?b=Math.pow(Math.E,(a*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):b=a*g+c),b}},o.prototype.xToValue=function(a){return this.positionToValue(this.pointToPosition({x:a,y:0}))},o.prototype.yToValue=function(a){return this.positionToValue(this.pointToPosition({x:0,y:a}))},o.prototype.pointToPosition=function(a){return this.renderer instanceof AxisRendererY?1-this.renderer.pointToPosition(a):this.renderer.pointToPosition(a)},o.prototype.animateMinMax=function(a,c){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:a},{property:"_maxAdjusted",from:this._maxAdjusted,to:c}],this.rangeChangeDuration,this.rangeChangeEasing)},o.prototype.getMinMax=function(){var a=this;this.updateGridCount();var c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if((!isNumber$1(this._minDefined)||!isNumber$1(this._maxDefined))&&(this.series.each(function(ut){if(!ut.ignoreMinMax){var gt=ut.min(a);isNumber$1(gt)&&gt<c&&(c=gt);var yt=ut.max(a);isNumber$1(yt)&&yt>d&&(d=yt)}}),this.includeRangesInMinMax&&this.axisRanges.each(function(ut){if(!ut.ignoreMinMax){var gt=min$1(ut.value,ut.endValue),yt=max$1(ut.value,ut.endValue);(gt<c||!isNumber$1(c))&&(c=gt),(yt>d||!isNumber$1(d))&&(d=yt)}})),this.logarithmic){var g=this.treatZeroAs;isNumber$1(g)&&c<=0&&(c=g),c<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0)}if(c==0&&d==0&&(d=.9,c=-.9),isNumber$1(this._minDefined)&&(c=this._minDefined),isNumber$1(this._maxDefined)&&(d=this._maxDefined),this._adapterO&&(c=this._adapterO.apply("min",c)),this._adapterO&&(d=this._adapterO.apply("max",d)),!(!isNumber$1(c)||!isNumber$1(d))){this._minReal=c,this._maxReal=d,c==Number.POSITIVE_INFINITY&&(c=void 0),d==Number.NEGATIVE_INFINITY&&(d=void 0);var b=this.adjustDifference(c,d);if(c=this.fixMin(c),d=this.fixMax(d),d-c<=1/Math.pow(10,15)){if(d-c!=0)this._deltaMinMax=(d-c)/2;else{var j=Math.log(Math.abs(d))*Math.LOG10E,$=Math.pow(10,Math.floor(j));$=$/10,this._deltaMinMax=$}c-=this._deltaMinMax,d+=this._deltaMinMax}c-=(d-c)*this.extraMin,d+=(d-c)*this.extraMax;var _e=this.strictMinMax;isNumber$1(this._maxDefined)&&(_e=!0);var st=this.adjustMinMax(c,d,b,this._gridCount,_e);if(c=st.min,d=st.max,b=d-c,st=this.adjustMinMax(c,d,d-c,this._gridCount,!0),c=st.min,d=st.max,this.strictMinMax&&(isNumber$1(this._minDefined)?c=this._minDefined:c=this._minReal,isNumber$1(this._maxDefined)?d=this._maxDefined:d=this._maxReal,d-c<=1e-8&&(c-=this._deltaMinMax,d+=this._deltaMinMax),c-=(d-c)*this.extraMin,d+=(d-c)*this.extraMax),this._adapterO&&(c=this._adapterO.apply("min",c)),this._adapterO&&(d=this._adapterO.apply("max",d)),this._step=st.step,!isNumber$1(c)&&!isNumber$1(d)&&(this.start=0,this.end=1,this.renderer.labels.each(function(ut){ut.dataItem.text=""})),(this._minAdjusted!=c||this._maxAdjusted!=d)&&isNumber$1(c)&&isNumber$1(d)){var rt=this._minMaxAnimation;if(this._extremesChanged&&isNumber$1(this._minAdjusted)&&isNumber$1(this._maxAdjusted)&&this.inited){if(rt&&!rt.isFinished()&&this._finalMax==d&&this._finalMin==c)return;this._finalMin=c,this._finalMax=d,rt=this.animateMinMax(c,d),rt&&!rt.isFinished()?(rt.events.on("animationprogress",this.validateDataItems,this),rt.events.on("animationended",function(){a.series.each(function(ut){ut.validate()}),a.validateDataItems(),a.handleSelectionExtremesChange()}),this._minMaxAnimation=rt):this.series.each(function(ut){ut.invalidate()}),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(rt&&!rt.isFinished()&&this._finalMax==d&&this._finalMin==c)return;this._minAdjusted=c,this._maxAdjusted=d,this._finalMin=c,this._finalMax=d,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged"),this._saveMinMax(c,d)}}this._extremesChanged=!1,this._difference=this.adjustDifference(c,d)}},o.prototype.fixMin=function(a){return a},o.prototype.fixMax=function(a){return a},o.prototype.adjustMinMax=function(a,c,d,g,b){g<=1&&(g=1),g=Math.round(g);var j=a,$=c;d===0&&(d=Math.abs(c));var _e=Math.log(Math.abs(d))*Math.LOG10E,st=Math.pow(10,Math.floor(_e));st=st/10;var rt=st;b&&(rt=0),this.logarithmic?(a<=0&&(a=this.baseValue),a==1/0&&(a=1),c==-1/0&&(c=10),this.strictMinMax?(this._minDefined>0?a=this._minDefined:a=a,this._maxDefined>0&&(c=c)):(a=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E)),c=Math.pow(10,Math.ceil(Math.log(Math.abs(c))*Math.LOG10E)))):(b?(a=Math.floor(a/st)*st,c=Math.ceil(c/st)*st):(a=Math.ceil(a/st)*st-rt,c=Math.floor(c/st)*st+rt),a<0&&j>=0&&(a=0),c>0&&$<=0&&(c=0)),_e=Math.log(Math.abs(d))*Math.LOG10E,st=Math.pow(10,Math.floor(_e)),st=st/10;var ut=Math.ceil(d/g/st)*st,gt=Math.pow(10,Math.floor(Math.log(Math.abs(ut))*Math.LOG10E)),yt=Math.ceil(ut/gt);yt>5?yt=10:yt<=5&&yt>2&&(yt=5),ut=Math.ceil(ut/(gt*yt))*gt*yt,this.maxPrecision<Number.MAX_VALUE&&ut!=ceil(ut,this.maxPrecision)&&(ut=ceil(ut,this.maxPrecision));var wt=0;if(gt<1&&(wt=Math.round(Math.abs(Math.log(Math.abs(gt))*Math.LOG10E))+1,ut=round$1(ut,wt)),!this.logarithmic){var Ct=Math.floor(a/ut);a=round$1(ut*Ct,wt);var Pt=void 0;b?Pt=Math.floor(c/ut):Pt=Math.ceil(c/ut),Pt==Ct&&Pt++,c=round$1(ut*Pt,wt),c<$&&(c=c+ut),a>j&&(a=a-ut)}return{min:a,max:c,step:ut}},Object.defineProperty(o.prototype,"min",{get:function(){var a=this._minAdjusted;return isNumber$1(a)||(a=this._minDefined),a},set:function(a){this._minDefined!=a&&(this._minDefined=a,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(a){this.setPropertyValue("extraMin",a)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(a){this.setPropertyValue("extraMax",a)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"max",{get:function(){var a=this._maxAdjusted;return isNumber$1(a)||(a=this._maxDefined),a},set:function(a){this._maxDefined!=a&&(this._maxDefined=a,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(a){this.setPropertyValue("adjustLabelPrecision",a)&&this.invalidate()},enumerable:!0,configurable:!0}),o.prototype.registerSeries=function(a){return new MultiDisposer([e.prototype.registerSeries.call(this,a),a.events.on("extremeschanged",this.handleExtremesChange,this,!1),a.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",a.invalidate,a,!1)])},o.prototype.handleSelectionExtremesChange=function(){var a=this,c,d,g=!0;if(each(this.series.iterator(),function(gt){if(!gt.ignoreMinMax&&!gt.isHidden&&!gt.outOfRange){gt.visible&&!gt.isHiding&&(g=!1);var yt=gt.selectionMin(a),wt=gt.selectionMax(a);isNumber$1(yt)&&(!isNumber$1(c)||yt<c)&&(c=yt),isNumber$1(wt)&&(!isNumber$1(d)||wt>d)&&(d=wt)}}),this.includeRangesInMinMax&&this.axisRanges.each(function(gt){if(!gt.ignoreMinMax){var yt=min$1(gt.value,gt.endValue),wt=max$1(gt.value,gt.endValue);yt<c&&(c=yt),wt>d&&(d=wt)}}),isNumber$1(this._minDefined)?this.strictMinMax?c=this._minDefined:c=this.min:this.strictMinMax&&(c=this._minReal),isNumber$1(this._maxDefined)?this.strictMinMax?d=this._maxDefined:d=this.max:this.strictMinMax&&(d=this._maxReal),c==d){c-=this._deltaMinMax,d+=this._deltaMinMax;var b=this.adjustMinMax(c,d,0,this._gridCount,this.strictMinMax);c=b.min,d=b.max}var j=this.adjustDifference(c,d),$=this.adjustMinMax(c,d,j,this._gridCount);c=$.min,d=$.max,c-=(d-c)*this.extraMin,d+=(d-c)*this.extraMax,c=fitToRange(c,this.min,this.max),d=fitToRange(d,this.min,this.max),j=this.adjustDifference(c,d),$=this.adjustMinMax(c,d,j,this._gridCount,!0),c=$.min,d=$.max,this.strictMinMax&&(c=max$1(c,this._minDefined),d=min$1(d,this._maxDefined));var _e=$.step;this.syncWithAxis&&($=this.syncAxes(c,d,_e),c=$.min,d=$.max,this.invalidate()),_e=$.step,this._difference=this.adjustDifference(this.min,this.max);var st=this.valueToPosition(c),rt=this.valueToPosition(d);g&&!this.syncWithAxis&&(st=0,rt=1);var ut=0;this.syncWithAxis?(ut=5,this.setCache(c+"-"+d,_e)):((this._step!=_e||this._minZoomed!=c||this._maxZoomed!=d)&&(this._dsc=!0),this._step=_e,this._minZoomed=c,this._maxZoomed=d),this.keepSelection||this.zoom({start:st,end:rt},!1,!1,ut)},Object.defineProperty(o.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(a){this.setPropertyValue("strictMinMax",a)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(a){this.setPropertyValue("logarithmic",a)&&(this.invalidate(),this.series.each(function(c){c.invalidateDataItems()}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(a){this.setPropertyValue("keepSelection",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(a){this.setPropertyValue("includeRangesInMinMax",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(a){this.setPropertyValue("maxPrecision",a)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(a){this.setPropertyValue("extraTooltipPrecision",a)&&this.invalidate()},enumerable:!0,configurable:!0}),o.prototype.handleExtremesChange=function(){var a=this;if(this._extremesChanged=!0,this.getMinMax(),this.ghostLabel){var c=0;this.dataItems.each(function(d){d.label&&d.label.pixelWidth>c&&(a.ghostLabel.text=d.label.currentText)})}},o.prototype.getX=function(a,c,d,g,b){return this.renderer.positionToPoint(this.getPositionX(a,c,d,g,b)).x},o.prototype.getPositionX=function(a,c,d,g,b){var j=a.getWorkingValue(c);hasValue(g)||(g="valueX");var $=a.getValue(g,"stack");isNumber$1(j)||(j=this.baseValue,this.logarithmic&&$>0&&(j=0));var _e=this.valueToPosition(j+$);return b&&(_e=fitToRange(_e,b.start,b.end)),_e},o.prototype.getY=function(a,c,d,g,b){return this.renderer.positionToPoint(this.getPositionY(a,c,d,g,b)).y},o.prototype.getPositionY=function(a,c,d,g,b){var j=a.getWorkingValue(c);hasValue(g)||(g="valueY");var $=a.getValue(g,"stack");isNumber$1(j)||(j=this.baseValue,this.logarithmic&&$>0&&(j=0));var _e=this.valueToPosition(j+$);return b&&(_e=fitToRange(_e,b.start,b.end)),_e},o.prototype.getAngle=function(a,c,d,g,b){var j=a.getWorkingValue(c),$=a.getValue(g,"stack");isNumber$1(j)||(j=this.baseValue);var _e=this.valueToPosition(j+$);return b&&(_e=fitToRange(_e,b.start,b.end)),this.positionToAngle(_e)},o.prototype.getAnyRangePath=function(a,c,d){var g=this.valueToPosition(a),b=this.valueToPosition(c);return this.getPositionRangePath(g,b)},o.prototype.getTooltipText=function(a){var c=round$1(this.positionToValue(a),this._stepDecimalPlaces+this.extraTooltipPrecision),d=this.tooltip.numberFormatter.format(c);return this._adapterO?this._adapterO.apply("getTooltipText",d):d},o.prototype.zoomToValues=function(a,c,d,g){var b=(a-this.min)/(this.max-this.min),j=(c-this.min)/(this.max-this.min);this.zoom({start:b,end:j},d,g)},Object.defineProperty(o.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:max$1(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:min$1(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),o.prototype.fixAxisBreaks=function(){var a=this;e.prototype.fixAxisBreaks.call(this);var c=this._axisBreaks;c&&c.length>0&&c.each(function(d){var g=d.adjustedStartValue,b=d.adjustedEndValue,j=b-g,$=Math.ceil(j*d.breakSize)*a._gridCount/(a.max-a.min),_e=a.adjustMinMax(g,b,j,$,!0);d.adjustedStep=_e.step,d.adjustedMin=_e.min,d.adjustedMax=_e.max}),this._difference=this.adjustDifference(this.min,this.max)},o.prototype.getPositionLabel=function(a){var c=this.positionToValue(a);return this.numberFormatter.format(c)},o.prototype.showTooltipAt=function(a){this.showTooltipAtPosition(this.valueToPosition(a))},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.min=a.min,this.max=a.max,this.calculateTotals=a.calculateTotals,this._baseValue=a.baseValue},Object.defineProperty(o.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(a){var c=this;this.setPropertyValue("syncWithAxis",a,!0)&&a&&(this._disposers.push(a.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(a.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(a.events.on("startendchanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",function(){c.clearCache(),c._disposers.push(registry.events.once("exitframe",function(){c.handleSelectionExtremesChange()}))},this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(a){this.setPropertyValue("treatZeroAs",a,!0)},enumerable:!0,configurable:!0}),o.prototype.syncAxes=function(a,c,d){var g=this.syncWithAxis;if(g){isNumber$1(a)||(a=this.min),isNumber$1(c)||(c=this.max),isNumber$1(d)||(d=this._step);var b=Math.round((g.maxZoomed-g.minZoomed)/g.step),j=Math.round((c-a)/d);if(isNumber$1(b)&&isNumber$1(j))for(var $=!1,_e=0,st=(c-a)*.01,rt=a,ut=c,gt=d;$!=!0;)if($=this.checkSync(rt,ut,gt,b),_e++,_e>1e3&&($=!0),$)a=rt,c=ut,d=gt;else{_e/3==Math.round(_e/3)?(rt=a-st*_e,a>=0&&rt<0&&(rt=0)):(ut=c+st*_e,ut<=0&&ut>0&&(ut=0));var yt=this.adjustMinMax(rt,ut,ut-rt,this._gridCount,!0);rt=yt.min,ut=yt.max,gt=yt.step}}return{min:a,max:c,step:d}},o.prototype.checkSync=function(a,c,d,g){for(var b=(c-a)/d,j=1;j<g;j++)if(round$1(b/j,1)==g||b*j==g)return!0;return!1},o.prototype.processConfig=function(a){a&&hasValue(a.syncWithAxis)&&isString$1(a.syncWithAxis)&&(this.map.hasKey(a.syncWithAxis)?a.syncWithAxis=this.map.getKey(a.syncWithAxis):(this.processingErrors.push('[ValueAxis] No axis with id "'+a.syncWithAxis+'" found for `syncWithAxis`'),delete a.xAxis)),e.prototype.processConfig.call(this,a)},o.prototype._saveMinMax=function(a,c){},o}(Axis);registry.registeredClasses.ValueAxis=ValueAxis;registry.registeredClasses.ValueAxisDataItem=ValueAxisDataItem;var DateAxisBreak=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="DateAxisBreak",a.applyTheme(),a}return Object.defineProperty(o.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(a){this.setPropertyValue("startDate",a)&&(this.startValue=a.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(a){this.setPropertyValue("endDate",a)&&(this.endValue=a.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),o}(ValueAxisBreak);registry.registeredClasses.DateAxisBreak=DateAxisBreak;var DateAxisDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="DateAxisDataItem",a.applyTheme(),a.values.date={},a.values.endDate={},a}return Object.defineProperty(o.prototype,"date",{get:function(){return this.dates.date},set:function(a){this.setDate("date",a),this.value=a.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(a){this.setDate("endDate",a),this.endValue=a.getTime()},enumerable:!0,configurable:!0}),o}(ValueAxisDataItem),DateAxis=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._gapBreaks=!1,a.gridIntervals=new List,a.groupIntervals=new List,a.dateFormats=new Dictionary,a.periodChangeDateFormats=new Dictionary,a._baseIntervalReal={timeUnit:"day",count:1},a._prevSeriesTime={},a._minDifference={},a._firstWeekDay=1,a.groupMin={},a.groupMax={},a._intervalMax={},a._intervalMin={},a.className="DateAxis",a.setPropertyValue("markUnitChange",!0),a.snapTooltip=!0,a.tooltipPosition="pointer",a.setPropertyValue("groupData",!1),a.groupCount=200,a.events.on("parentset",a.getDFFormatter,a,!1),a.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),a.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),a.axisFieldName="date",a.applyTheme(),a}return o.prototype.fillRule=function(a){var c=a.value,d=a.component,g=d._gridInterval,b=getDuration(g.timeUnit,g.count);Math.round((c-d.min)/b)/2==Math.round(Math.round((c-d.min)/b)/2)?a.axisFill.__disabled=!0:a.axisFill.__disabled=!1},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},o.prototype.createDataItem=function(){return new DateAxisDataItem},o.prototype.createAxisBreak=function(){return new DateAxisBreak},o.prototype.validateDataItems=function(){var a=this.start,c=this.end,d=this.baseDuration,g=(this.max-this.min)/d;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),e.prototype.validateDataItems.call(this);var b=getDuration(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/b),this._deltaMinMax=this.baseDuration/2;var j=(this.max-this.min)/d;a=a+(c-a)*(1-g/j),this.zoom({start:a,end:c},!1,!0)},o.prototype.handleSelectionExtremesChange=function(){},o.prototype.getIntervalMax=function(a){return this._intervalMax[a.timeUnit+a.count]},o.prototype.getIntervalMin=function(a){return this._intervalMin[a.timeUnit+a.count]},o.prototype.calculateZoom=function(){var a=this;e.prototype.calculateZoom.call(this);var c=this.adjustDifference(this._minZoomed,this._maxZoomed),d=!1;if(this.groupData&&hasValue(c)){var g=this.mainBaseInterval,b=this.getIntervalMin(g),j=this.getIntervalMax(g),$=b+(j-b)*this.start,_e=b+(j-b)*this.end,st=this.adjustDifference($,_e),rt=st+(this.startLocation+(1-this.endLocation))*this.baseDuration,ut=void 0;this.groupInterval?ut=__assign$1({},this.groupInterval):(ut=this.chooseInterval(0,rt,this.groupCount,this.groupIntervals),getDuration(ut.timeUnit,ut.count)<getDuration(g.timeUnit,g.count)&&(ut=__assign$1({},g))),this._groupInterval=ut;var gt=ut.timeUnit+ut.count;this._currentDataSetId!=gt&&(this._currentDataSetId=gt,this.dispatch("groupperiodchanged")),this.series.each(function(wt){wt.baseAxis==a&&wt.setDataSet(a._currentDataSetId)&&(d=!0)})}var yt=this.chooseInterval(0,c,this._gridCount);getDuration(yt.timeUnit,yt.count)<this.baseDuration&&(yt=__assign$1({},this.baseInterval)),this._gridInterval=yt,this._nextGridUnit=getNextUnit(yt.timeUnit),this._intervalDuration=getDuration(yt.timeUnit,yt.count),this._gridDate=round(new Date(this.minZoomed-getDuration(yt.timeUnit,yt.count)),yt.timeUnit,yt.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),each(this.series.iterator(),function(wt){if(wt.baseAxis==a){var Ct=wt.getAxisField(a),Pt=round(new Date(a._minZoomed+a.baseDuration*.05),a.baseInterval.timeUnit,a.baseInterval.count,a._firstWeekDay,a._df.utc,void 0,a._df.timezoneMinutes,a._df.timezone).getTime(),At=Pt.toString(),Tt=wt.dataItemsByAxis.getKey(a.uid).getKey(At+wt.currentDataSetId),kt=0;a.start!=0&&(Tt?(Tt=a.findFirst(Tt,Pt,Ct),kt=Tt.index):kt=wt.dataItems.findClosestIndex(a._minZoomed,function(dr){return dr[Ct]},"left"));var It=a.baseInterval,Lt=add(round(new Date(a._maxZoomed),It.timeUnit,It.count,a._firstWeekDay,a._df.utc,void 0,a._df.timezoneMinutes,a._df.timezone),It.timeUnit,It.count,a._df.utc).getTime(),Ft=Lt.toString(),Nt=wt.dataItemsByAxis.getKey(a.uid).getKey(Ft+wt.currentDataSetId),Ht=wt.dataItems.length;a.end!=1&&(Nt?Ht=Nt.index:(Lt-=1,Ht=wt.dataItems.findClosestIndex(Lt,function(dr){return dr[Ct]},"right"),Ht++)),wt.max(a)<Pt?(wt.startIndex=wt.dataItems.length,wt.endIndex=wt.dataItems.length,wt.outOfRange=!0):wt.min(a)>Lt?(wt.startIndex=0,wt.endIndex=0,wt.outOfRange=!0):(wt.outOfRange=!1,wt.startIndex=kt,wt.endIndex=Ht),!d&&wt.dataRangeInvalid&&wt.validateDataRange()}})},o.prototype.findFirst=function(a,c,d){var g=a.index;if(g>0){var b=a.component,j=b.dataItems.getIndex(g-1),$=j[d];return!$||$.getTime()<c?a:this.findFirst(j,c,d)}else return a},o.prototype.validateData=function(){e.prototype.validateData.call(this),isNumber$1(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(o.prototype,"minDifference",{get:function(){var a=this,c=Number.MAX_VALUE;return this.series.each(function(d){c>a._minDifference[d.uid]&&(c=a._minDifference[d.uid])}),(c==Number.MAX_VALUE||c==0)&&(c=getDuration("day")),c},enumerable:!0,configurable:!0}),o.prototype.seriesDataChangeUpdate=function(a){this._minDifference[a.uid]=Number.MAX_VALUE},o.prototype.postProcessSeriesDataItems=function(a){var c=this;this._firstWeekDay=this.getFirstWeekDay(),a?this.seriesGroupUpdate(a):this.series.each(function(d){c.seriesGroupUpdate(d)}),this.addEmptyUnitsBreaks()},o.prototype.seriesGroupUpdate=function(a){var c=this;JSON.stringify(a._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(a._baseInterval[this.uid]=this.mainBaseInterval,a.mainDataSet.each(function(d){c.postProcessSeriesDataItem(d)}),this.groupData&&this.groupSeriesData(a))},o.prototype.groupSeriesData=function(a){var c=this;if(a.baseAxis==this&&a.dataItems.length>0&&!a.dataGrouped){a.bulletsContainer.removeChildren();var d=[],g=this.mainBaseInterval,b=getDuration(g.timeUnit,g.count);this.groupIntervals.each(function(j){var $=getDuration(j.timeUnit,j.count);($>b&&$<c.max-c.min||c.groupInterval)&&d.push(j)}),a._dataSets&&(a._dataSets.each(function(j,$){$.each(function(_e){_e.dispose()}),$.clear()}),a._dataSets.clear()),a.dataGrouped=!0,each$2(d,function(j){var $="date"+c.axisLetter,_e=j.timeUnit+j.count,st=new OrderedListTemplate(a.mainDataSet.template.clone());a.dataSets.setKey(_e,st);var rt=a.mainDataSet,ut=Number.NEGATIVE_INFINITY,gt=0,yt,wt=[];each$1(a.dataFields,function(Pt,At){var Tt=Pt;Tt!=$&&Tt.indexOf("Show")==-1&&wt.push(Tt)});var Ct;rt.each(function(Pt){var At=Pt.getDate($);if(At){var Tt=At.getTime();Ct=round(new Date(Tt),j.timeUnit,j.count,c._df.firstDayOfWeek,c._df.utc,void 0,c._df.timezoneMinutes,c._df.timezone);var kt=Ct.getTime();ut<kt?(yt&&a._adapterO&&each$2(wt,function(It){yt.values[It].value=a._adapterO.apply("groupDataItem",{dataItem:yt,interval:j,dataField:It,date:Ct,value:yt.values[It].value}).value,yt.values[It].workingValue=yt.values[It].value}),yt=st.create(),yt.dataContext={},yt.setWorkingLocation("dateX",a.dataItems.template.locations.dateX,0),yt.setWorkingLocation("openDateX",a.dataItems.template.locations.openDateX,0),yt.setWorkingLocation("dateY",a.dataItems.template.locations.dateY,0),yt.setWorkingLocation("openDateY",a.dataItems.template.locations.openDateY,0),yt.component=a,yt.setDate($,Ct),yt._index=gt,gt++,each$2(wt,function(It){var Lt=Pt.values[It];if(Lt){var Ft=Lt.value;a._adapterO&&(Ft=a._adapterO.apply("groupValue",{dataItem:Pt,interval:j,dataField:It,date:Ct,value:Ft}).value);var Nt=yt.values[It];isNumber$1(Ft)?(Nt.value=Ft,Nt.workingValue=Ft,Nt.open=Ft,Nt.close=Ft,Nt.low=Ft,Nt.high=Ft,Nt.sum=Ft,Nt.average=Ft,Nt.count=1):Nt.count=0}}),c.postProcessSeriesDataItem(yt,j),each$1(a.propertyFields,function(It,Lt){var Ft=It,Nt=Pt.properties[It];hasValue(Nt)&&(yt.hasProperties=!0,yt.setProperty(Ft,Nt))}),yt.groupDataItems=[Pt],ut=kt):yt&&(each$2(wt,function(It){var Lt=a.groupFields[It],Ft=Pt.values[It];if(Ft){var Nt=Ft.value;if(a._adapterO&&(Nt=a._adapterO.apply("groupValue",{dataItem:Pt,interval:j,dataField:It,date:Ct,value:Nt}).value),isNumber$1(Nt)){var Ht=yt.values[It];isNumber$1(Ht.open)||(Ht.open=Nt),Ht.close=Nt,(Ht.low>Nt||!isNumber$1(Ht.low))&&(Ht.low=Nt),(Ht.high<Nt||!isNumber$1(Ht.high))&&(Ht.high=Nt),isNumber$1(Ht.sum)?Ht.sum+=Nt:Ht.sum=Nt,Ht.count++,Ht.average=Ht.sum/Ht.count,isNumber$1(Ht[Lt])&&(Ht.value=Ht[Lt],Ht.workingValue=Ht.value)}}}),copyProperties(Pt.properties,yt.properties),each$1(a.propertyFields,function(It,Lt){var Ft=It,Nt=Pt.properties[It];hasValue(Nt)&&(yt.hasProperties=!0,yt.setProperty(Ft,Nt))}),yt.groupDataItems.push(Pt))}yt&&copyProperties(Pt.dataContext,yt.dataContext)}),yt&&a._adapterO&&each$2(wt,function(Pt){yt.values[Pt].value=a._adapterO.apply("groupDataItem",{dataItem:yt,interval:j,dataField:Pt,date:Ct,value:yt.values[Pt].value}).value,yt.values[Pt].workingValue=yt.values[Pt].value})}),this.calculateZoom()}},o.prototype.getDFFormatter=function(){this._df=this.dateFormatter},o.prototype.postProcessSeriesDataItem=function(a,c){var d=this,g="";c?g=c.timeUnit+c.count:c=this.mainBaseInterval;var b=a.component,j=b.dataItemsByAxis.getKey(this.uid);each$1(a.dates,function($){var _e=a.getDate($),st=_e.getTime(),rt=round(new Date(st),c.timeUnit,c.count,d._firstWeekDay,d._df.utc,void 0,d._df.timezoneMinutes,d._df.timezone),ut=rt.getTime(),gt=add(new Date(ut),c.timeUnit,c.count,d._df.utc);a.setCalculatedValue($,ut,"open"),a.setCalculatedValue($,gt.getTime(),"close"),j.setKey(ut+g,a)})},o.prototype.addEmptyUnitsBreaks=function(){var a=this;if(this.skipEmptyPeriods&&isNumber$1(this.min)&&isNumber$1(this.max)){var c=this.baseInterval.timeUnit,d=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var g=round(new Date(this.min),c,d,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),b=void 0,j=function(){add(g,c,d,$._df.utc);var _e=g.getTime(),st=_e.toString(),rt=contains$1($.series.iterator(),function(ut){return!!ut.dataItemsByAxis.getKey(a.uid).getKey(st+ut.currentDataSetId)});rt?b&&(b.endDate=new Date(_e-1),b=void 0):b||(b=$.axisBreaks.create(),b.startDate=new Date(_e),$._gapBreaks=!0)},$=this;g.getTime()<this.max-this.baseDuration;)j()}},o.prototype.fixAxisBreaks=function(){var a=this;e.prototype.fixAxisBreaks.call(this);var c=this._axisBreaks;c&&c.length>0&&c.each(function(d){var g=Math.ceil(a._gridCount*(Math.min(a.end,d.endPosition)-Math.max(a.start,d.startPosition))/(a.end-a.start));d.gridInterval=a.chooseInterval(0,d.adjustedEndValue-d.adjustedStartValue,g);var b=round(new Date(d.adjustedStartValue),d.gridInterval.timeUnit,d.gridInterval.count,a._firstWeekDay,a._df.utc,void 0,a._df.timezoneMinutes,a._df.timezone);b.getTime()>d.startDate.getTime()&&add(b,d.gridInterval.timeUnit,d.gridInterval.count,a._df.utc),d.gridDate=b})},o.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},o.prototype.getGridDate=function(a,c){var d=this._gridInterval.timeUnit,g=this._gridInterval.count;round(a,d,1,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);var b=a.getTime(),j=copy(a),$=add(j,d,c,this._df.utc).getTime(),_e=this.isInBreak($);_e&&_e.endDate&&(j=new Date(_e.endDate.getTime()),round(j,d,g,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),j.getTime()<_e.endDate.getTime()&&add(j,d,g,this._df.utc),$=j.getTime());var st=this.adjustDifference(b,$),rt=Math.round(st/getDuration(d));return rt<g?this.getGridDate(a,c+g):j},o.prototype.getBreaklessDate=function(a,c,d){var g=new Date(a.endValue);round(g,c,d,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),add(g,c,d,this._df.utc);var b=g.getTime();return a=this.isInBreak(b),a?this.getBreaklessDate(a,c,d):g},o.prototype.validateAxisElements=function(){var a=this;if(isNumber$1(this.max)&&isNumber$1(this.min)){this.calculateZoom();var c=this._gridDate.getTime(),d=this._gridInterval.timeUnit,g=this._gridInterval.count,b=copy(this._gridDate),j=this._dataItemsIterator;this.resetIterators();for(var $=function(){var rt=_e.getGridDate(copy(b),g);c=rt.getTime();var ut=copy(rt);ut=add(ut,d,g,_e._df.utc);var gt=_e.dateFormats.getKey(d);_e.markUnitChange&&b&&checkChange(rt,b,_e._nextGridUnit,_e._df.utc)&&d!=="year"&&(gt=_e.periodChangeDateFormats.getKey(d));var yt=_e._df.format(rt,gt),wt=j.find(function(Ct){return Ct.text===yt});wt.__disabled&&(wt.__disabled=!1),_e.appendDataItem(wt),wt.axisBreak=void 0,wt.date=rt,wt.endDate=ut,wt.text=yt,_e.validateDataElement(wt),b=rt},_e=this;c<=this._maxZoomed;)$();var st=this.renderer;this._axisBreaks&&each(this._axisBreaks.iterator(),function(rt){if(rt.breakSize>0){var ut=rt.gridInterval.timeUnit,gt=rt.gridInterval.count;if(getDistance(rt.startPoint,rt.endPoint)>st.minGridDistance*4)for(var yt=rt.gridDate.getTime(),wt,Ct=0,Pt=function(){var At=copy(rt.gridDate);if(yt=add(At,ut,gt*Ct,a._df.utc).getTime(),Ct++,yt>rt.adjustedStartValue&&yt<rt.adjustedEndValue){var Tt=copy(At);Tt=add(Tt,ut,gt,a._df.utc);var kt=a.dateFormats.getKey(ut);a.markUnitChange&&wt&&checkChange(At,wt,a._nextGridUnit,a._df.utc)&&ut!=="year"&&(kt=a.periodChangeDateFormats.getKey(ut));var It=a._df.format(At,kt),Lt=j.find(function(Ft){return Ft.text===It});Lt.__disabled&&(Lt.__disabled=!1),a.appendDataItem(Lt),Lt.axisBreak=rt,rt.dataItems.moveValue(Lt),Lt.date=At,Lt.endDate=Tt,Lt.text=It,wt=At,a.validateDataElement(Lt)}};yt<=rt.adjustedMax;)Pt()}})}},o.prototype.validateDataElement=function(a){if(a.itemIndex=this._axisItemCount,this._axisItemCount++,isNumber$1(this.max)&&isNumber$1(this.min)){var c=this.renderer,d=a.value,g=a.endValue;isNumber$1(g)||(g=d);var b=this.valueToPosition(d),j=this.valueToPosition(g),$=j;!a.isRange&&this._gridInterval.count>this.baseInterval.count&&(j=b+(j-b)/(this._gridInterval.count/this.baseInterval.count)),a.position=b;var _e=a.tick;_e&&!_e.disabled&&c.updateTickElement(_e,b,j);var st=a.grid;st&&!st.disabled&&c.updateGridElement(st,b,j);var rt=a.axisFill;rt&&!rt.disabled&&(c.updateFillElement(rt,b,$),a.isRange||this.fillRule(a));var ut=a.mask;ut&&c.updateFillElement(ut,b,j),a.bullet&&c.updateBullet(a.bullet,b,j);var gt=a.label;if(gt&&!gt.disabled){var yt=gt.location;yt==0&&(this._gridInterval.count==1&&this._gridInterval.timeUnit!="week"&&!a.isRange?yt=.5:yt=0),c.updateLabelElement(gt,b,j,yt)}}},Object.defineProperty(o.prototype,"baseDuration",{get:function(){return getDuration(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),o.prototype.adjustMinMax=function(a,c){return{min:a,max:c,step:this.baseDuration}},o.prototype.fixMin=function(a){var c=this.baseInterval,d=round(new Date(a),c.timeUnit,c.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime(),g=add(new Date(d),c.timeUnit,c.count,this._df.utc).getTime();return d+(g-d)*this.startLocation},o.prototype.fixMax=function(a){var c=this.baseInterval,d=round(new Date(a),c.timeUnit,c.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime(),g=add(new Date(d),c.timeUnit,c.count,this._df.utc).getTime();return d+(g-d)*this.endLocation},o.prototype.chooseInterval=function(a,c,d,g){g||(g=this.gridIntervals);var b=g.getIndex(a),j=getDuration(b.timeUnit,b.count),$=g.length-1;if(a>=$)return __assign$1({},g.getIndex($));var _e=Math.ceil(c/j);return c<j&&a>0?__assign$1({},g.getIndex(a-1)):_e<=d?__assign$1({},g.getIndex(a)):a+1<g.length?this.chooseInterval(a+1,c,d,g):__assign$1({},g.getIndex(a))},o.prototype.formatLabel=function(a){return this._df.format(a)},o.prototype.dateToPosition=function(a){return this.valueToPosition(a.getTime())},o.prototype.anyToPosition=function(a){return a instanceof Date?this.dateToPosition(a):this.valueToPosition(a)},o.prototype.dateToPoint=function(a){var c=this.dateToPosition(a),d=this.renderer.positionToPoint(c),g=this.renderer.positionToAngle(c);return{x:d.x,y:d.y,angle:g}},o.prototype.anyToPoint=function(a){return a instanceof Date?this.dateToPoint(a):this.valueToPoint(a)},o.prototype.positionToDate=function(a){return new Date(this.positionToValue(a))},o.prototype.getPositionX=function(a,c,d,g,b){var j=this.getTimeByLocation(a,c,d);isNumber$1(j)||(j=this.baseValue);var $=this.valueToPosition(j);return b&&($=fitToRange($,b.start,b.end)),$},o.prototype.getPositionY=function(a,c,d,g,b){var j=this.getTimeByLocation(a,c,d),$=a.getValue("valueX","stack");isNumber$1(j)||(j=this.baseValue);var _e=this.valueToPosition(j+$);return b&&(_e=fitToRange(_e,b.start,b.end)),_e},o.prototype.getAngle=function(a,c,d,g,b){var j=this.getTimeByLocation(a,c,d),$=a.getValue(g,"stack");isNumber$1(j)||(j=this.baseValue);var _e=this.valueToPosition(j+$);return b&&(_e=fitToRange(_e,b.start,b.end)),this.positionToAngle(_e)},o.prototype.getTimeByLocation=function(a,c,d){if(hasValue(c)){isNumber$1(d)||(d=a.workingLocations[c],isNumber$1(d)||(d=0));var g=a.values[c].open,b=a.values[c].close,j=a.values[c].workingValue,$=a.values[c].value,_e=$-j;if(g-=_e,b-=_e,isNumber$1(g)&&isNumber$1(b))return g+(b-g)*d}},o.prototype.processSeriesDataItem=function(a,c){var d=a.component,g,b=a["date"+c];if(isNumber$1(this.timezoneOffset)?(b.setTime(b.getTime()+(b.getTimezoneOffset()-this.timezoneOffset)*6e4),a.setValue("date"+c,b.getTime(),0)):hasValue(this.timezone)&&(b=setTimezone(b,this.timezone),a.setValue("date"+c,b.getTime(),0),a["date"+c]=b),b)g=b.getTime();else return;var j=a["openDate"+c],$=this._prevSeriesTime[d.uid],_e;if(j&&(_e=j.getTime()),isNumber$1(_e)){var st=Math.abs(g-_e);this._minDifference[d.uid]>st&&(this._minDifference[d.uid]=st)}var rt=g-$;rt>0&&this._minDifference[d.uid]>rt&&(this._minDifference[d.uid]=rt),this._prevSeriesTime[d.uid]=g,d._baseInterval[this.uid]&&this.postProcessSeriesDataItem(a)},o.prototype.updateAxisBySeries=function(){e.prototype.updateAxisBySeries.call(this);var a=this.chooseInterval(0,this.minDifference,1);this.minDifference>=getDuration("day",27)&&a.timeUnit=="week"&&(a.timeUnit="month",a.count=1),a.timeUnit=="month"&&(this.minDifference>=getDuration("day",29*2)&&a.count==1&&(a.count=2),this.minDifference>=getDuration("day",29*3)&&a.count==2&&(a.count=3),this.minDifference>=getDuration("day",29*6)&&a.count==5&&(a.count=6)),this.minDifference>=getDuration("hour",23)&&a.timeUnit=="hour"&&(a.timeUnit="day",a.count=1),this.minDifference>=getDuration("week",1)-getDuration("hour",1)&&a.timeUnit=="day"&&(a.timeUnit="week",a.count=1),this.minDifference>=getDuration("year",1)-getDuration("day",1.01)&&a.timeUnit=="month"&&(a.timeUnit="year",a.count=1),this._baseIntervalReal=a,this._mainBaseInterval=a},Object.defineProperty(o.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(a){JSON.stringify(this._baseInterval)!=JSON.stringify(a)&&(this._baseInterval=a,this._mainBaseInterval=a,isNumber$1(a.count)||(a.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(a){if(a){var c=this.axisBreaks.template;c.startLine.disabled=!0,c.endLine.disabled=!0,c.fillShape.disabled=!0,c.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",a)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(a){this.setPropertyValue("tooltipDateFormat",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(a){this.setPropertyValue("markUnitChange",a)&&this.invalidateData()},enumerable:!0,configurable:!0}),o.prototype.getTooltipText=function(a){var c,d=this.positionToDate(a);if(d=round(d,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),this.tooltipDate=d,hasValue(this.tooltipDateFormat))c=this._df.format(d,this.tooltipDateFormat,["day","month","week","year"].indexOf(this.baseInterval.timeUnit)==-1);else{var g=this.dateFormats.getKey(this.baseInterval.timeUnit);g?c=this._df.format(d,g):c=this.getPositionLabel(a)}return this._adapterO?this._adapterO.apply("getTooltipText",c):c},o.prototype.roundPosition=function(a,c,d){var g=this.baseInterval,b=g.timeUnit,j=g.count,$=this.positionToDate(a);if(round($,b,j,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),c>0&&add($,b,c*j,this._df.utc),d>0&&d<1&&$.setTime($.getTime()+this.baseDuration*d),this.isInBreak($.getTime()))for(;$.getTime()<this.max&&(add($,b,j,this._df.utc),!!this.isInBreak($.getTime())););return this.dateToPosition($)},o.prototype.getCellStartPosition=function(a){return this.roundPosition(a,0)},o.prototype.getCellEndPosition=function(a){return this.roundPosition(a,1)},o.prototype.getSeriesDataItem=function(a,c,d){var g=this.positionToValue(c),b=.5;this.axisLetter=="Y"?b=a.dataItems.template.locations.dateY:b=a.dataItems.template.locations.dateX;var j=g-b*this.baseDuration,$=round(new Date(g),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),_e=round(new Date(g+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);_e.getTime()>$.getTime()&&Math.abs(_e.getTime()-j)<Math.abs(j-$.getTime())&&($=_e);var st=a.dataItemsByAxis.getKey(this.uid),rt=st.getKey($.getTime()+a.currentDataSetId);if(!rt&&d){var ut;this.axisLetter=="Y"?ut="dateY":ut="dateX",rt=a.dataItems.getIndex(a.dataItems.findClosestIndex($.getTime(),function(gt){return gt[ut]?gt[ut].getTime():-1/0},"any"))}return rt},o.prototype.getPositionLabel=function(a){var c=this.positionToDate(a);return this._df.format(c,this.getCurrentLabelFormat())},o.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},o.prototype.initRenderer=function(){e.prototype.initRenderer.call(this);var a=this.renderer;a&&(a.ticks.template.location=0,a.grid.template.location=0,a.labels.template.location=0,a.baseGrid.disabled=!0)},Object.defineProperty(o.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),o.prototype.animateMinMax=function(a,c){var d=this,g=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:a},{property:"_maxAdjusted",from:this._maxAdjusted,to:c}],this.rangeChangeDuration,this.rangeChangeEasing);return g.events.on("animationprogress",function(){d.dispatch("extremeschanged")}),g},o.prototype.handleExtremesChange=function(){if(e.prototype.handleExtremesChange.call(this),this.groupData){var a=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[a]=this._finalMin,this.groupMax[a]=this._finalMax}},o.prototype.zoomToDates=function(a,c,d,g,b){a=this._df.parse(a),c=this._df.parse(c),this.zoomToValues(a.getTime(),c.getTime(),d,g,b)},o.prototype.zoomToValues=function(a,c,d,g,b){var j=this;if(this.groupData){var st=this.adjustDifference(a,c),rt=!1;c==this.max&&(rt=!0);var ut=!1;if(a==this.min&&(ut=!0),hasValue(st)){var gt=this.mainBaseInterval,yt=this.chooseInterval(0,st,this.groupCount,this.groupIntervals);(yt.timeUnit==gt.timeUnit&&yt.count<gt.count||getDuration(yt.timeUnit,1)<getDuration(gt.timeUnit,1))&&(yt=__assign$1({},gt));var wt=yt.timeUnit+yt.count,Ct=this.groupMin[wt],Pt=this.groupMax[wt];(!isNumber$1(Ct)||!isNumber$1(Pt))&&(Ct=Number.POSITIVE_INFINITY,Pt=Number.NEGATIVE_INFINITY,this.series.each(function(kt){var It=kt.min(j),Lt=kt.max(j);if(kt._dataSets){var Ft=kt._dataSets.getKey(yt.timeUnit+yt.count);if(Ft){var Nt=Ft.getIndex(0),Ht=Ft.getIndex(Ft.length-1);Nt&&(kt.xAxis==j?It=Nt.dateX.getTime():kt.yAxis==j&&(It=Nt.dateY.getTime())),Ht&&(kt.xAxis==j?Lt=Ht.dateX.getTime():kt.yAxis==j&&(Lt=Ht.dateY.getTime()))}}Lt=round(add(new Date(Lt),yt.timeUnit,1,j._df.utc),yt.timeUnit,1,j._df.firstDayOfWeek,j._df.utc,void 0,j._df.timezoneMinutes,j._df.timezone).getTime(),It<Ct&&(Ct=It),Lt>Pt&&(Pt=Lt)}),this.groupMin[wt]=Ct,this.groupMax[wt]=Pt),a=fitToRange(a,Ct,Pt),c=fitToRange(c,Ct,Pt),b&&(rt&&(a=c-st,a=fitToRange(a,Ct,Pt)),ut&&(c=a+st,c=fitToRange(c,Ct,Pt)));var $=(a-Ct)/(Pt-Ct),_e=(c-Ct)/(Pt-Ct);this.zoom({start:$,end:_e},d,g)}}else{var $=this.valueToPosition(a),_e=this.valueToPosition(c);this.zoom({start:$,end:_e},d,g)}},o.prototype.asIs=function(a){return a=="baseInterval"||e.prototype.asIs.call(this,a)},o.prototype.copyFrom=function(a){var c=this;e.prototype.copyFrom.call(this,a),this.dateFormats=a.dateFormats,this.periodChangeDateFormats=a.periodChangeDateFormats,this.groupIntervals.clear(),a.groupIntervals.each(function(d){c.groupIntervals.push(__assign$1({},d))}),this.gridIntervals.clear(),a.gridIntervals.each(function(d){c.gridIntervals.push(__assign$1({},d))}),a._baseInterval&&(this.baseInterval=a._baseInterval)},o.prototype.showTooltipAtPosition=function(a,c){var d=this;if(c||(a=this.toAxisPosition(a)),this.snapTooltip){var g=this.positionToDate(a),b=g.getTime(),j;if(this.series.each(function(st){if(st.baseAxis==d){var rt=d.getSeriesDataItem(st,a,!0);if(rt){var ut=void 0;st.xAxis==d&&(ut=rt.dateX),st.yAxis==d&&(ut=rt.dateY),j?Math.abs(j.getTime()-b)>Math.abs(ut.getTime()-b)&&(j=ut):j=ut}}}),j){var $=j.getTime();j=round(new Date($),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),$=j.getTime();var _e=this.renderer.tooltipLocation;_e==0&&(_e=1e-4),j=new Date(j.getTime()+this.baseDuration*_e),a=this.dateToPosition(j),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each(function(st){var rt=st.dataItemsByAxis.getKey(d.uid).getKey($+st.currentDataSetId),ut=st.showTooltipAtDataItem(rt);ut?d.chart._seriesPoints.push({series:st,point:ut}):(st.tooltipText||st.tooltipHTML)&&st.hideTooltip()})}}e.prototype.showTooltipAtPosition.call(this,a,!0)},Object.defineProperty(o.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(a){this.setPropertyValue("snapTooltip",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(a){var c=this;this.setPropertyValue("groupData",a)&&(this.series.each(function(d){d.setDataSet(""),a&&!d.dataGrouped&&d.inited&&(d._baseInterval[c.uid]=c.mainBaseInterval,c.groupSeriesData(d))}),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(a){this.setPropertyValue("groupInterval",a)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(a){this.setPropertyValue("groupCount",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(a){this.setPropertyValue("timezoneOffset",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(a){this.setPropertyValue("timezone",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),o.prototype.makeGap=function(a,c){var d=a.component;if(a&&c&&!d.connect&&isNumber$1(d.autoGapCount)&&d.baseAxis==this){var g=a.dates["date"+this.axisLetter],b=c.dates["date"+this.axisLetter];if(g&&b){var j=g.getTime(),$=b.getTime();if(j-$>d.autoGapCount*this.baseDuration)return!0}}return!1},Object.defineProperty(o.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),o.prototype._saveMinMax=function(a,c){var d=this.groupInterval;d||(d=this.mainBaseInterval);var g=d.timeUnit+d.count;this._intervalMin[g]=a,this._intervalMax[g]=c},o}(ValueAxis);registry.registeredClasses.DateAxis=DateAxis;registry.registeredClasses.DateAxisDataItem=DateAxisDataItem;var AxisRendererX=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="AxisRendererX",a.minGridDistance=120,a.opposite=!1,a.rotation=0,a.width=percent(100),a.labels.template.horizontalCenter="middle",a.applyTheme(),a}return o.prototype.setAxis=function(a){e.prototype.setAxis.call(this,a),a.layout="vertical"},o.prototype.updateGridContainer=function(){var a=this.axis;if(a){var c=this.gridContainer;c.x=a.pixelX,c.width=a.axisLength}},o.prototype.processRenderer=function(){e.prototype.processRenderer.call(this);var a=this.axis;if(a){a.width instanceof Percent||(a.width=percent(100)),this.line;var c=a.title;c.rotation=0,c.align="center",this.opposite?(this.line.toFront(),c.toBack()):(c.toFront(),this.toBack(),this.line.toBack())}},o.prototype.updateTooltip=function(){var a=this.axis;if(a){var c=1e3,d=this.line.pixelX,g=this.line.pixelY,b=this.axisLength,j=c;this.opposite?this.inside||(g=-c,j=c):this.inside&&(g=-c,j=c),this.axis.updateTooltip("vertical",{x:d,y:g,width:b,height:j})}},o.prototype.updateLabelElement=function(a,c,d,g){hasValue(g)||(g=a.location),c=c+(d-c)*g;var b=this.positionToPoint(c);a.isMeasured=!a.inside;var j=0,$,_e=this.gridContainer.maxHeight;this.opposite?(a.inside?($="top",a.valign=="bottom"&&(j=_e,$="bottom"),a.valign=="middle"&&(j=_e/2,$="middle")):$="bottom",b.y=j):(a.inside?($="bottom",a.valign=="top"&&(j=-_e,$="top"),a.valign=="middle"&&(j=-_e/2,$="middle")):$="top",b.y+=j),a.rotation==0&&(a.verticalCenter=$),this.positionItem(a,b),this.toggleVisibility(a,c,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(o.prototype,"axisLength",{get:function(){var a=this.axis;return a.measuredWidth-a.pixelPaddingRight-a.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a,c){return{x:this.positionToCoordinate(a),y:0}},o.prototype.pointToPosition=function(a){return this.coordinateToPosition(a.x,a.y)},o.prototype.getPositionRangePath=function(a,c){var d=fitToRange(this.positionToCoordinate(a),0,this.axisLength),g=fitToRange(this.positionToCoordinate(c),0,this.axisLength),b=Math.abs(g-d),j=this.getHeight(),$=Math.min(d,g),_e=0;return rectToPath({x:$,y:_e,width:b,height:j},!0)},o.prototype.updateBreakElement=function(a){e.prototype.updateBreakElement.call(this,a);var c=a.startLine,d=a.endLine,g=a.fillShape,b=a.startPoint,j=a.endPoint,$=a.pixelMarginLeft,_e=this.getHeight()-a.pixelMarginTop-a.pixelMarginBottom;b.x=fitToRange(b.x,-1,this.axisLength+1),j.x=fitToRange(j.x,-1,this.axisLength+1),b.x==j.x&&(b.x<0||b.x>this.axisLength)?a.fillShape.__disabled=!0:a.fillShape.__disabled=!1,c.y=$,c.width=0,c.height=_e,d.y=$,d.width=0,d.height=_e,g.height=_e,g.width=Math.abs(j.x-b.x),g.y=$,g.x=b.x},o.prototype.updateGridElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);a.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.getHeight()}),this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateTickElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c),b=a.length;g.y=spritePointToSprite({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.opposite?b*=a.inside?1:-1:b*=a.inside?-1:1,a.path=moveTo({x:0,y:0})+lineTo({x:0,y:b}),this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateAxisLine=function(){this.line.path=moveTo({x:0,y:0})+lineTo({x:this.axisLength,y:0})},o.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var a=this.axis,c=this.getHeight(),d=this.axisLength,g=this.baseGrid,b=a.basePoint.x;if(b<-.2||b>d+.2)g.hide(0);else{var j=spritePointToSprite({x:0,y:0},this.gridContainer,g.parent).y;g.path=moveTo({x:0,y:0})+lineTo({x:0,y:c}),g.moveTo({x:b,y:j}),g.show(0)}},o.prototype.createBreakSprites=function(a){a.startLine=new WavedLine,a.endLine=new WavedLine;var c=new WavedRectangle;c.setWavedSides(!1,!0,!1,!0),a.fillShape=c},o.prototype.toAxisPosition=function(a){var c=a,d=this.axis;if(d){var g=d.relativePositionSprite,b=d.pixelX;if(g?b=spritePointToSprite({x:this.pixelX,y:0},this.parent,g).x:g=d.parent,g){var j=b/g.innerWidth,$=d.axisLength/g.innerWidth;return(c-j)/$}}return a},o.prototype.updateBullet=function(a,c,d){var g=.5;a instanceof AxisBullet&&(g=a.location),c=c+(d-c)*g;var b=this.positionToPoint(c);b.y=spritePointToSprite({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(a,b),this.toggleVisibility(a,c,0,1)},o}(AxisRenderer);registry.registeredClasses.AxisRendererX=AxisRendererX;defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,o){if(e instanceof AxisRendererX){var a=e.states.create(o);return a.properties.inside=!0,a.properties.maxLabelPosition=.9,a.properties.minLabelPosition=.1,a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXXS,state:function(e,o){if(e instanceof AxisRendererX){var a=e.states.create(o);return a.properties.disabled=!0,a}return null}});var CategoryAxisBreak=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="CategoryAxisBreak",a.properties.startLocation=.5,a.properties.endLocation=.5,a.applyTheme(),a}return Object.defineProperty(o.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(a){this.setPropertyValue("startCategory",a)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(a){this.setPropertyValue("endCategory",a)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startValue",{get:function(){var a=this.getPropertyValue("startCategory");return a?this.axis.categoryToIndex(a):this.getPropertyValue("startValue")},set:function(a){this.setPropertyValue("startValue",a)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endValue",{get:function(){var a=this.getPropertyValue("endCategory");return a?this.axis.categoryToIndex(a):this.getPropertyValue("endValue")},set:function(a){this.setPropertyValue("endValue",a)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(a){this.setPropertyValue("startLocation",a)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(a){this.setPropertyValue("endLocation",a)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),o}(AxisBreak);registry.registeredClasses.CategoryAxisBreak=CategoryAxisBreak;var CategoryAxisDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.seriesDataItems={},a.className="CategoryAxisDataItem",a.text="{category}",a.locations.category=0,a.locations.endCategory=1,a.deltaPosition=0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(a){var c=this.properties.category;this.setProperty("category",a),hasValue(c)&&c!=a&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(a){this.setProperty("endCategory",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(a){a!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",a),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),o}(AxisDataItem),CategoryAxis=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.dataItemsByCategory=new Dictionary,a.className="CategoryAxis",a.axisFieldName="category",a._lastDataItem=a.createDataItem(),a._lastDataItem.component=a,a._disposers.push(a._lastDataItem),a.applyTheme();var c=a.dataItemsByCategory;return a.addDisposer(a.mainDataSet.events.on("removed",function(d){c.removeKey(d.oldValue.category)})),a}return o.prototype.createDataItem=function(){return new CategoryAxisDataItem},o.prototype.createAxisBreak=function(){return new CategoryAxisBreak},o.prototype.processSeriesDataItem=function(a,c){e.prototype.processSeriesDataItem.call(this,a,c);var d=a["category"+this.axisLetter];if(hasValue(d)){var g=this.dataItemsByCategory.getKey(d);if(g){var b=a.component.uid,j=g.seriesDataItems[b];j||(j=[],g.seriesDataItems[b]=j),j.push(a)}}else a.component.dataItems.remove(a)},o.prototype.validateDataRange=function(){var a=this;e.prototype.validateDataRange.call(this),each(this._series.iterator(),function(c){if(c.xAxis instanceof o&&c.yAxis instanceof o)c.invalidateDataRange();else{var d=a.positionToIndex(a.start),g=a.positionToIndex(a.end);g>=a.dataItems.length&&g--;for(var b=c.uid,j=void 0,$=void 0,_e=d;_e<=g;_e++){var st=a.dataItems.getIndex(_e);if(st){var rt=st.seriesDataItems[b];if(rt)for(var ut=0;ut<rt.length;ut++){var gt=rt[ut];if(gt){var yt=gt.index;(!isNumber$1(j)||yt<j)&&(j=yt),(!isNumber$1($)||yt>$)&&($=yt)}}}}isNumber$1(j)?c.startIndex=j:c.start=a.start,isNumber$1($)?c.endIndex=$+1:c.end=a.end,a._axisBreaks&&a._axisBreaks.length>0&&c.invalidateDataRange()}})},o.prototype.validate=function(){var a=this;e.prototype.validate.call(this);var c=this.dataItems.length,d=fitToRange(Math.floor(this.start*c-1),0,c),g=fitToRange(Math.ceil(this.end*c),0,c);this.renderer.invalid&&this.renderer.validate();var b=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),j=Math.min(this.dataItems.length,Math.ceil((g-d)/b));if(this._startIndex=Math.floor(d/j)*j,this._endIndex=Math.ceil(this.end*c),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=j,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),d=max$1(0,this._startIndex-this._frequency),g=min$1(this.dataItems.length,this._endIndex+this._frequency);for(var $=0,_e=0;_e<d;_e++){var st=this.dataItems.getIndex(_e);st.__disabled=!0}for(var _e=g,rt=this.dataItems.length;_e<rt;_e++){var st=this.dataItems.getIndex(_e);st.__disabled=!0}for(var _e=d;_e<g;_e++)if(_e<this.dataItems.length){var st=this.dataItems.getIndex(_e);if(_e/this._frequency==Math.round(_e/this._frequency)){var ut=this.isInBreak(_e);ut||(this.appendDataItem(st),this.validateDataElement(st,$)),$++}else st.__disabled=!0}if(this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,$+1,this.dataItems.length),this._axisBreaks){var gt=this._axisBreaks;gt.each(function(yt){var wt=yt.adjustedStartValue,Ct=yt.adjustedEndValue;if(intersect({start:wt,end:Ct},{start:a._startIndex,end:a._endIndex})){for(var Pt=wt;Pt<=Ct;Pt++){var At=a.dataItems.getIndex(Pt);At.__disabled=!0}var Tt=fitToRange(Math.ceil(a._frequency/yt.breakSize),1,Ct-wt),kt=0;if(yt.breakSize>0)for(var Pt=wt;Pt<=Ct;Pt=Pt+Tt){var At=a.dataItems.getIndex(Pt);At.__disabled=!1,a.appendDataItem(At),a.validateDataElement(At,kt),kt++}}})}this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},o.prototype.validateDataElement=function(a,c,d){e.prototype.validateDataElement.call(this,a),a.itemIndex=this._axisItemCount,this._axisItemCount++;var g=this.renderer;isNumber$1(d)||(d=this.categoryToIndex(a.category));var b=this.categoryToIndex(a.endCategory);isNumber$1(b)||(b=d);var j=this.indexToPosition(d,a.locations.category),$=this.indexToPosition(b,a.locations.endCategory);a.position=j;var _e,st,rt;a.isRange&&(_e=b,st=this.indexToPosition(d,a.locations.category),rt=this.indexToPosition(_e,a.locations.endCategory)),a.point=g.positionToPoint(j);var ut=a.tick;ut&&!ut.disabled&&g.updateTickElement(ut,j,$);var gt=a.grid;gt&&!gt.disabled&&g.updateGridElement(gt,j,$);var yt=a.label;yt&&!yt.disabled&&((!a.isRange||yt.text==null)&&(a.text=a.text),g.updateLabelElement(yt,j,$),(g instanceof AxisRendererY&&a.label.measuredWidth>this.ghostLabel.measuredWidth||g instanceof AxisRendererX&&a.label.measuredHeight>this.ghostLabel.measuredHeight)&&(a.label.html?this.ghostLabel.html=a.label.currentText:this.ghostLabel.text=a.label.currentText));var wt=a.axisFill;wt&&!wt.disabled&&(a.isRange||(_e=d+this._frequency,st=this.indexToPosition(d,wt.location),rt=this.indexToPosition(_e,wt.location)),g.updateFillElement(wt,st,rt),a.isRange||this.fillRule(a,c)),a.bullet&&g.updateBullet(a.bullet,j,$);var Ct=a.mask;Ct&&g.updateFillElement(Ct,st,rt)},o.prototype.disposeData=function(){this.dataItemsByCategory.clear(),e.prototype.disposeData.call(this)},o.prototype.processDataItem=function(a,c){a&&(e.prototype.processDataItem.call(this,a,c),hasValue(a.category)&&this.dataItemsByCategory.setKey(a.category,a))},o.prototype.getDataItem=function(a){var c=a[this.dataFields.category];if(hasValue(c)){var d=this.dataItemsByCategory.getKey(c);return d||this.dataItems.create()}},o.prototype.indexToPosition=function(a,c){isNumber$1(c)||(c=.5);var d=this.startIndex,g=this.endIndex,b=this.adjustDifference(d,g),j=this.startLocation,$=this.endLocation;if(b-=j,b-=1-$,this._axisBreaks){var _e=this._axisBreaks;eachContinue(_e.iterator(),function(ut){var gt=ut.adjustedStartValue,yt=ut.adjustedEndValue;if(a<d||!isNumber$1(gt)||!isNumber$1(yt))return!1;if(intersect({start:gt,end:yt},{start:d,end:g})){gt=Math.max(d,gt),yt=Math.min(g,yt);var wt=ut.breakSize;a>yt?d+=(yt-gt)*(1-wt):a<gt||(a=gt+(a-gt)*wt)}return!0})}var st=0,rt=this.dataItems.getIndex(a);return rt&&(st=rt.deltaPosition),round$1(st+(a+c-j-d)/b,5)},o.prototype.categoryToPosition=function(a,c){var d=this.categoryToIndex(a);return this.indexToPosition(d,c)},o.prototype.categoryToPoint=function(a,c){var d=this.categoryToPosition(a,c),g=this.renderer.positionToPoint(d),b=this.renderer.positionToAngle(d);return{x:g.x,y:g.y,angle:b}},o.prototype.anyToPoint=function(a,c){return this.categoryToPoint(a,c)},o.prototype.anyToPosition=function(a,c){return this.categoryToPosition(a,c)},o.prototype.categoryToIndex=function(a){if(hasValue(a)){var c=this.dataItemsByCategory.getKey(a);if(c)return c.index}},o.prototype.zoomToCategories=function(a,c){this.zoomToIndexes(this.categoryToIndex(a),this.categoryToIndex(c)+1)},o.prototype.getAnyRangePath=function(a,c,d,g){var b=this.categoryToPosition(a,d),j=this.categoryToPosition(c,g);return this.getPositionRangePath(b,j)},o.prototype.roundPosition=function(a,c){var d=this.positionToIndex(a);return this.indexToPosition(d,c)},o.prototype.getFirstSeriesDataItem=function(a,c){for(var d=0;d<a.dataItems.length;d++){var g=a.dataItems.getIndex(d);if(a.xAxis==this&&g.categoryX==c||a.yAxis==this&&g.categoryY==c)return g}},o.prototype.getLastSeriesDataItem=function(a,c){for(var d=a.dataItems.length-1;d>=0;d--){var g=a.dataItems.getIndex(d);if(a.xAxis==this&&g.categoryX==c||a.yAxis==this&&g.categoryY==c)return g}},o.prototype.getSeriesDataItemByCategory=function(a,c){var d=this,g;return c.dataItems.each(function(b){c.xAxis==d?b.categoryX==a&&(g=b):c.yAxis==d&&b.categoryY==a&&(g=b)}),g},o.prototype.getSeriesDataItem=function(a,c,d){var g=this;if(isNumber$1(c)){var b=this.positionToIndex(c);b>=this.dataItems.length&&b--;var j=this.dataItems.getIndex(b);if(j){var $=j.category,_e,st=a.dataItems.getIndex(b);return st&&(a.xAxis==this&&st.categoryX==$||a.yAxis==this&&st.categoryY==$)?st:(a.dataItems.each(function(rt){a.xAxis==g&&rt.categoryX==$&&(_e||(_e=rt),Math.abs(b-_e.index)>Math.abs(b-rt.index)&&(_e=rt)),a.yAxis==g&&rt.categoryY==$&&(_e||(_e=rt),Math.abs(b-_e.index)>Math.abs(b-rt.index)&&(_e=rt))}),_e)}}},o.prototype.getX=function(a,c,d,g,b){var j=this.getPositionX(a,c,d,g,b);return isNaN$1(j)?this.basePoint.x:this.renderer.positionToPoint(j).x},o.prototype.getPositionX=function(a,c,d,g,b){var j;return hasValue(c)&&(j=this.categoryToPosition(a.categories[c],d)),b&&(j=fitToRange(j,b.start,b.end)),j},o.prototype.getY=function(a,c,d,g,b){var j=this.getPositionY(a,c,d,g,b);return isNaN$1(j)?this.basePoint.y:this.renderer.positionToPoint(j).y},o.prototype.getPositionY=function(a,c,d,g,b){var j;return hasValue(c)&&(j=this.categoryToPosition(a.categories[c],d)),b&&(j=fitToRange(j,b.start,b.end)),j},o.prototype.getAngle=function(a,c,d,g,b){var j=this.categoryToPosition(a.categories[c],d);return b&&(j=fitToRange(j,b.start,b.end)),this.positionToAngle(j)},o.prototype.getCellStartPosition=function(a){return this.roundPosition(a,0)},o.prototype.getCellEndPosition=function(a){return this.roundPosition(a,1)},o.prototype.getTooltipText=function(a){var c=this.dataItems.getIndex(this.positionToIndex(a));if(c)return this.tooltipDataItem=c,this.tooltip.dataItem=c,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",c.category):c.category},o.prototype.positionToIndex=function(a){a=round$1(a,10),a<0&&(a=0),a>1&&(a=1);var c=this.startIndex,d=this.endIndex,g=d-c-this.startLocation-(1-this.endLocation);a+=1/g*this.startLocation;var b=null;if(this._axisBreaks){var j=this._axisBreaks;eachContinue(j.iterator(),function($){var _e=$.startPosition,st=$.endPosition,rt=$.adjustedStartValue,ut=$.adjustedEndValue;rt=max$1(rt,c),ut=min$1(ut,d);var gt=$.breakSize;if(g-=(ut-rt)*(1-gt),a>st)c+=(ut-rt)*(1-gt);else if(!(a<_e)){var yt=(a-_e)/(st-_e);return b=rt+Math.round(yt*(ut-rt)),!1}return!0})}return isNumber$1(b)||(b=Math.floor(a*g+c)),b>=this.dataItems.length&&(b=this.dataItems.length-1),b},o.prototype.positionToCategory=function(a){return this.getPositionLabel(a)},o.prototype.getPositionLabel=function(a){var c=this.dataItems.getIndex(this.positionToIndex(a));if(c)return c.category},Object.defineProperty(o.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),o.prototype.initRenderer=function(){e.prototype.initRenderer.call(this);var a=this.renderer;a.baseGrid.disabled=!0},Object.defineProperty(o.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(a){this.setPropertyValue("sortBySeries",a,!0)},enumerable:!0,configurable:!0}),o.prototype.processConfig=function(a){a&&hasValue(a.sortBySeries)&&isString$1(a.sortBySeries)&&(this.map.hasKey(a.sortBySeries)?a.sortBySeries=this.map.getKey(a.sortBySeries):(this.addDelayedMap("sortBySeries",a.sortBySeries),delete a.sortBySeries)),e.prototype.processConfig.call(this,a)},o}(Axis);registry.registeredClasses.CategoryAxis=CategoryAxis;registry.registeredClasses.CategoryAxisDataItem=CategoryAxisDataItem;var XYSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="XYSeriesDataItem",a.values.customValue={},a.values.valueX={stack:0},a.values.valueY={stack:0},a.values.openValueX={},a.values.openValueY={},a.values.dateX={},a.values.dateY={},a.values.openDateX={},a.values.openDateY={},a.setLocation("dateX",.5,0),a.setLocation("dateY",.5,0),a.setLocation("categoryX",.5,0),a.setLocation("categoryY",.5,0),a.applyTheme(),a}return Object.defineProperty(o.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(a){this.setValue("valueX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(a){this.setValue("customValue",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(a){this.setValue("valueY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(a){this.setDate("dateX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(a){this.setDate("dateY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(a){this.setCategory("categoryX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(a){this.setCategory("categoryY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(a){this.setValue("openValueX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(a){this.setValue("openValueY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(a){this.setDate("openDateX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(a){this.setDate("openDateY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(a){this.setCategory("openCategoryX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(a){this.setCategory("openCategoryY",a)},enumerable:!0,configurable:!0}),o.prototype.getMin=function(a,c,d){var g=this,b;return isNumber$1(d)||(d=0),each$2(a,function(j){var $;c?$=g.getWorkingValue(j):$=g.getValue(j),$+=d,($<b||!isNumber$1(b))&&(b=$)}),b},o.prototype.getMax=function(a,c,d){var g=this,b;return isNumber$1(d)||(d=0),each$2(a,function(j){var $;c?$=g.getWorkingValue(j):$=g.getValue(j),$+=d,($>b||!isNumber$1(b))&&(b=$)}),b},o}(SeriesDataItem),XYSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.groupFields={},a._xAxis=new MutableValueDisposer,a._yAxis=new MutableValueDisposer,a._xValueFields=[],a._yValueFields=[],a._baseInterval={},a.dataGrouped=!1,a.usesShowFields=!1,a._dataSetChanged=!1,a._maxxX=1e5,a._maxxY=1e5,a._propertiesChanged=!1,a.outOfRange=!1,a.className="XYSeries",a.isMeasured=!1,a.groupFields.valueX="close",a.groupFields.valueY="close",a.groupFields.customValue="close",a.groupFields.openValueX="open",a.groupFields.openValueY="open",a.cursorTooltipEnabled=!0,a.cursorHoverEnabled=!0,a.excludeFromTotal=!1,a.mainContainer.mask=new Sprite,a.mainContainer.mask.setElement(a.paper.add("path")),a.stacked=!1,a.snapTooltip=!1,a._showBullets=!1,a.tooltip.pointerOrientation="horizontal",a.properties.stackToNegative=!0,a.hideTooltipWhileZooming=!0,a.setPropertyValue("maskBullets",!0),a.tooltip.events.on("hidden",function(){a.returnBulletDefaultState()},void 0,!1),a._disposers.push(a._xAxis),a._disposers.push(a._yAxis),a.observe(visualProperties,function(){a.inited&&(a._propertiesChanged=!0,a.legendDataItem&&(a.legendDataItem.childrenCreated=!1),a.chart&&a.chart.legend&&a.chart.legend.invalidateDataItems(),a.invalidate())},void 0,!1),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},o.prototype.createDataItem=function(){return new XYSeriesDataItem},o.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},o.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},o.prototype.validateData=function(){this._baseInterval={};var a=this.dataFields;if(a.valueYShow||a.openValueXShow||a.openValueXShow||a.openValueYShow?this.usesShowFields=!0:this.usesShowFields=!1,this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),e.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!hasValue(this.dataFields[this._xField])||!hasValue(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},o.prototype.processDataItem=function(a,c){try{e.prototype.processDataItem.call(this,a,c),this.xAxis.processSeriesDataItem(a,"X"),this.yAxis.processSeriesDataItem(a,"Y"),this.setInitialWorkingValues(a)}catch(d){this._chart&&this._chart.raiseCriticalError(d)}},o.prototype.updateDataItem=function(a){e.prototype.updateDataItem.call(this,a),this.xAxis.processSeriesDataItem(a,"X"),this.yAxis.processSeriesDataItem(a,"Y")},o.prototype.setInitialWorkingValues=function(a){},o.prototype.disposeData=function(){e.prototype.disposeData.call(this);var a=this.xAxis,c=this.yAxis;if(a){var d=this.dataItemsByAxis.getKey(a.uid);d&&d.clear(),a instanceof CategoryAxis&&this.clearCatAxis(a)}if(c){var g=this.dataItemsByAxis.getKey(c.uid);g&&g.clear(),c instanceof CategoryAxis&&this.clearCatAxis(c)}},o.prototype.clearCatAxis=function(a){var c=this.uid;a.dataItems.each(function(d){d.seriesDataItems[c]&&(d.seriesDataItems[c]=[])})},o.prototype.defineFields=function(){var a=this.xAxis,c=this.yAxis;if(a&&c){var d=a.axisFieldName,g=d+"X",b="open"+capitalize(d)+"X",j=c.axisFieldName,$=j+"Y",_e="open"+capitalize(j)+"Y";this._xField=g,this._yField=$,this.dataFields[b]&&(this._xOpenField=b),this.dataFields[_e]&&(this._yOpenField=_e),!this.dataFields[_e]&&this.baseAxis==c&&(this._yOpenField=$),!this.dataFields[b]&&this.baseAxis==a&&(this._xOpenField=g),this.stacked&&this.baseAxis==a&&(this._xOpenField=g),this.stacked&&this.baseAxis==c&&(this._yOpenField=$),a instanceof CategoryAxis&&c instanceof CategoryAxis&&(this._yOpenField||(this._yOpenField=$)),this._xValueFields=[],this._yValueFields=[],this.addValueField(a,this._xValueFields,this._xField),this.addValueField(a,this._xValueFields,this._xOpenField),this.addValueField(c,this._yValueFields,this._yField),this.addValueField(c,this._yValueFields,this._yOpenField)}},o.prototype.addValueField=function(a,c,d){a instanceof ValueAxis&&hasValue(this.dataFields[d])&&c.indexOf(d)==-1&&c.push(d)},o.prototype.setCategoryAxisField=function(a,c){hasValue(this.dataFields[a])||(this.dataFields[a]=c.dataFields.category)},o.prototype.setDateAxisField=function(a,c){hasValue(this.dataFields[a])||(this.dataFields[a]=c.dataFields.date)},o.prototype.afterDraw=function(){e.prototype.afterDraw.call(this),this.createMask()},o.prototype.createMask=function(){if(this.mainContainer.mask){var a=this.getMaskPath();each(this.axisRanges.iterator(),function(c){c.axisFill.fillPath&&(c.axisFill.validate(),a+=c.axisFill.fillPath)}),this.mainContainer.mask.path=a}},o.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?rectToPath({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},o.prototype.getAxisField=function(a){if(a==this.xAxis)return this.xField;if(a==this.yAxis)return this.yField},o.prototype.validateDataItems=function(){var a=this.chart;a&&(this._maxxX=max$1(1e5,a.plotContainer.maxWidth*2),this._maxxY=max$1(1e5,a.plotContainer.maxHeight*2));var c=this.xAxis,d=this.yAxis;c&&d&&(c.updateAxisBySeries(),d.updateAxisBySeries()),e.prototype.validateDataItems.call(this),c&&d&&(c.postProcessSeriesDataItems(this),d.postProcessSeriesDataItems(this))},o.prototype.validateDataRange=function(){var a=this.xAxis,c=this.yAxis;a&&c&&(a.dataRangeInvalid&&a.validateDataRange(),c.dataRangeInvalid&&c.validateDataRange()),e.prototype.validateDataRange.call(this)},o.prototype.validate=function(){var a=this.xAxis,c=this.yAxis;if(a&&c){a.invalid&&a.validate(),c.invalid&&c.validate(),this.y=c.pixelY,this.x=a.pixelX,this._showBullets=!0;var d=this.minBulletDistance;isNumber$1(d)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<d&&(this._showBullets=!1)}if(this.updateTooltip(),!(a instanceof DateAxis&&a.groupData&&!this.dataGrouped||c instanceof DateAxis&&c.groupData&&!this.dataGrouped)){e.prototype.validate.call(this);var g=this.chart,b=this.maskBullets;g&&b&&g.className=="XYChart"&&((g.leftAxesContainer.layout=="vertical"||g.rightAxesContainer.layout=="vertical")&&(this.yAxis?this.bulletsContainer.mask=this.yAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0),(g.topAxesContainer.layout=="horizontal"||g.bottomAxesContainer.layout=="horizontal")&&(this.xAxis?this.bulletsContainer.mask=this.xAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0))}},Object.defineProperty(o.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var a=this.chart.xAxes.getIndex(0);if(!a)throw Error("There are no X axes on chart.");this.xAxis=a}return this._xAxis.get()}},set:function(a){this.setXAxis(a)},enumerable:!0,configurable:!0}),o.prototype.setXAxis=function(a){var c=this._xAxis.get();c!=a&&(c&&(this.dataItemsByAxis.removeKey(c.uid),this._xAxis.dispose(),c.series.removeValue(this)),this._xAxis.set(a,a.registerSeries(this)),this.dataItemsByAxis.setKey(a.uid,new Dictionary),this.invalidateData())},Object.defineProperty(o.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var a=this.chart.yAxes.getIndex(0);if(!a)throw Error("There are no Y axes on chart.");this.yAxis=a}return this._yAxis.get()}},set:function(a){this.setYAxis(a)},enumerable:!0,configurable:!0}),o.prototype.setYAxis=function(a){var c=this._yAxis.get();c!=a&&(c&&(this.dataItemsByAxis.removeKey(c.uid),this._yAxis.dispose(),c.series.removeValue(this)),this._yAxis.set(a,a.registerSeries(this)),a.chart instanceof XYChart&&a.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(a.uid,new Dictionary),this.invalidateData())},Object.defineProperty(o.prototype,"baseAxis",{get:function(){var a=this.xAxis,c=this.yAxis;return!this._baseAxis&&a&&c&&(c instanceof DateAxis&&(this._baseAxis=c),a instanceof DateAxis&&(this._baseAxis=a),c instanceof CategoryAxis&&(this._baseAxis=c),a instanceof CategoryAxis&&(this._baseAxis=a),this._baseAxis||(this._baseAxis=a)),this._baseAxis},set:function(a){this._baseAxis!=a&&(this._baseAxis=a,this.invalidate())},enumerable:!0,configurable:!0}),o.prototype.addData=function(a,c,d){e.prototype.addData.call(this,a,c,d);var g=this.scrollbarSeries;g&&(this.scrollbarSeries.addData(a,c,!0),this.scrollbarSeries._parseDataFrom=this._parseDataFrom)},o.prototype.setData=function(a){e.prototype.setData.call(this,a),this.scrollbarSeries&&this.scrollbarSeries.setData(a)},o.prototype.setDataSet=function(a){var c=e.prototype.setDataSet.call(this,a);if(c){this._dataSetChanged=!0;var d=this.dataItems;if(this.resetExtremes(),d&&d.length>0){var g=this.xAxis,b=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),g instanceof DateAxis&&g==this.baseAxis&&(this._tmin.setKey(g.uid,d.getIndex(0).dateX.getTime()),this._tmax.setKey(g.uid,d.getIndex(d.length-1).dateX.getTime()),this.dispatch("extremeschanged")),b instanceof DateAxis&&b==this.baseAxis&&(this._tmin.setKey(b.uid,d.getIndex(0).dateY.getTime()),this._tmax.setKey(b.uid,d.getIndex(d.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return c},o.prototype.processValues=function(a){e.prototype.processValues.call(this,a);var c=this.xAxis,d=this.yAxis;if(!(!c||!d)){var g=this.dataItems,b=1/0,j=-1/0,$=1/0,_e=-1/0,st=this.startIndex,rt=this.endIndex,ut=st,gt=rt;a||(st=0,rt=this.dataItems.length);for(var yt=st;yt<rt;yt++){var wt=g.getIndex(yt);this.getStackValue(wt,a);var Ct=wt.getValue("valueX","stack"),Pt=wt.getValue("valueY","stack");a||(Ct=wt.getValue("valueX","stackTrue"),Pt=wt.getValue("valueY","stackTrue")),b=min$1(wt.getMin(this._xValueFields,a,Ct),b),$=min$1(wt.getMin(this._yValueFields,a,Pt),$),j=max$1(wt.getMax(this._xValueFields,a,Ct),j),_e=max$1(wt.getMax(this._yValueFields,a,Pt),_e),this.stacked&&(this.baseAxis==c&&(Pt<$&&($=Pt),Pt>_e&&(_e=Pt)),this.baseAxis==d&&(Ct<b&&(b=Ct),Ct>j&&(j=Ct)))}c.processSeriesDataItems(),d.processSeriesDataItems();var At=c.uid,Tt=d.uid;if(this.xAxis instanceof ValueAxis&&(b==1/0||j==-1/0)){this._smin.setKey(At,void 0),this._smax.setKey(At,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof ValueAxis&&($==1/0||_e==-1/0)){this._smin.setKey(Tt,void 0),this._smax.setKey(Tt,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(!a&&(this._tmin.getKey(At)!=b||this._tmax.getKey(At)!=j||this._tmin.getKey(Tt)!=$||this._tmax.getKey(Tt)!=_e)){this._tmin.setKey(At,b),this._tmax.setKey(At,j),this._tmin.setKey(Tt,$),this._tmax.setKey(Tt,_e);var kt=this.stackedSeries;kt&&(kt.isDisposed()?this.stackedSeries=void 0:kt.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(st!=ut||rt!=gt){b=1/0,j=-1/0,$=1/0,_e=-1/0;for(var yt=ut;yt<gt;yt++){var wt=g.getIndex(yt);this.getStackValue(wt,a);var Ct=wt.getValue("valueX","stack"),Pt=wt.getValue("valueY","stack");a||(Ct=wt.getValue("valueX","stackTrue"),Pt=wt.getValue("valueY","stackTrue")),b=min$1(wt.getMin(this._xValueFields,a,Ct),b),$=min$1(wt.getMin(this._yValueFields,a,Pt),$),j=max$1(wt.getMax(this._xValueFields,a,Ct),j),_e=max$1(wt.getMax(this._yValueFields,a,Pt),_e),this.stacked&&(this.baseAxis==c&&(Pt<$&&($=Pt),Pt>_e&&(_e=Pt)),this.baseAxis==d&&(Ct<b&&(b=Ct),Ct>j&&(j=Ct)))}}if(this.xAxis instanceof ValueAxis&&(b==1/0||j==-1/0)){this._smin.setKey(At,void 0),this._smax.setKey(At,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof ValueAxis&&($==1/0||_e==-1/0)){this._smin.setKey(Tt,void 0),this._smax.setKey(Tt,void 0),this.dispatchImmediately("selectionextremeschanged");return}if((this._smin.getKey(At)!=b||this._smax.getKey(At)!=j||this._smin.getKey(Tt)!=$||this._smax.getKey(Tt)!=_e)&&(this._smin.setKey(At,b),this._smax.setKey(At,j),this._smin.setKey(Tt,$),this._smax.setKey(Tt,_e),this.appeared||this.start!=0||this.end!=1||this.dataItems!=this.mainDataSet)){var It=!1;if(d instanceof ValueAxis&&!(d instanceof DateAxis)){var Lt=this._tmin.getKey(Tt);(!isNumber$1(Lt)||(this.usesShowFields||this._dataSetChanged||c instanceof DateAxis&&c.groupData&&this.isShowing)&&$<Lt||this.stackedSeries&&!this.isHidden&&!a)&&(this._tmin.setKey(Tt,$),It=!0);var Ft=this._tmax.getKey(Tt);(!isNumber$1(Ft)||(this.usesShowFields||this._dataSetChanged||c instanceof DateAxis&&c.groupData&&this.isShowing)&&_e>Ft||this.stackedSeries&&!this.isHidden&&!a)&&(this._tmax.setKey(Tt,_e),It=!0)}if(c instanceof ValueAxis&&!(c instanceof DateAxis)){var Lt=this._tmin.getKey(At);(!isNumber$1(Lt)||(this.usesShowFields||this._dataSetChanged||d instanceof DateAxis&&d.groupData&&this.isShowing)&&b<Lt||this.stackedSeries&&!this.isHidden&&!a)&&(this._tmin.setKey(At,b),It=!0);var Ft=this._tmax.getKey(At);(!isNumber$1(Ft)||(this.usesShowFields||this._dataSetChanged||d instanceof DateAxis&&d.groupData&&this.isShowing)&&j>Ft||this.stackedSeries&&!this.isHidden&&!a)&&(this._tmax.setKey(At,j),It=!0)}It&&this.dispatchImmediately("extremeschanged"),this.start==0&&this.end==1&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!a&&this.stacked&&this.processValues(!0)}},o.prototype.hideTooltip=function(a){e.prototype.hideTooltip.call(this,a),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},o.prototype.showTooltipAtPosition=function(a,c){var d;if(this.visible&&!this.isHiding&&!this.isShowing){var g=this._xAxis.get(),b=this._yAxis.get();g==this.baseAxis&&(d=g.getSeriesDataItem(this,g.toAxisPosition(a),this.snapTooltip)),b==this.baseAxis&&(d=b.getSeriesDataItem(this,b.toAxisPosition(c),this.snapTooltip));var j=this.showTooltipAtDataItem(d);if(j)return j;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},o.prototype.getAdjustedXLocation=function(a,c,d){return a.locations[c]},o.prototype.getAdjustedYLocation=function(a,c,d){return a.locations[c]},o.prototype.showTooltipAtDataItem=function(a){var c,d,g=this.chart.cursor;if(g&&g.hideSeriesTooltipsOnSelection&&g.selection.visible&&g.downPoint){this.hideTooltip();return}if(this.returnBulletDefaultState(a),a&&a.visible){if(this.updateLegendValue(a),this.cursorTooltipEnabled){this.tooltipDataItem=a;var b=this.tooltipXField,j=this.tooltipYField;if(hasValue(a[b])&&hasValue(a[j])){var $=this.getPoint(a,b,j,this.getAdjustedXLocation(a,b),this.getAdjustedYLocation(a,j));if($&&!(this.chart.className=="XYChart"&&($.y<-1||$.y>this.yAxis.pixelHeight+1||$.x<-1||$.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=$.x,this.tooltipY=$.y,this._prevTooltipDataItem!=a&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:a}),this._prevTooltipDataItem=a),this.cursorHoverEnabled)try{for(var _e=__values(a.sprites),st=_e.next();!st.done;st=_e.next()){var rt=st.value;!rt.parent.visible||rt.isHidden||rt.__disabled||rt.disabled||rt.isHiding||(rt.interactions.isRealHover||(rt.dispatchImmediately("over"),rt.interactions.isRealHover=!0),rt.isHover=!0)}}catch(ut){c={error:ut}}finally{try{st&&!st.done&&(d=_e.return)&&d.call(_e)}finally{if(c)throw c.error}}return this.showTooltip()?spritePointToSvg({x:$.x,y:$.y},this):void 0}}}}else this.updateLegendValue(a,!0)},o.prototype.returnBulletDefaultState=function(a){var c,d;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=a)try{for(var g=__values(this._prevTooltipDataItem.sprites),b=g.next();!b.done;b=g.next()){var j=b.value;if(j.isDisposed())this._prevTooltipDataItem=void 0;else{var $=j.interactions.isRealHover;j.isHover=!1,$&&j.dispatchImmediately("out")}}}catch(_e){c={error:_e}}finally{try{b&&!b.done&&(d=g.return)&&d.call(g)}finally{if(c)throw c.error}}},o.prototype.shouldCreateBullet=function(a,c){var d=c.xField;hasValue(d)||(d=this.xField);var g=c.yField;if(hasValue(g)||(g=this.yField),this.xAxis instanceof ValueAxis&&!a.hasValue([d])||this.yAxis instanceof ValueAxis&&!a.hasValue([g]))return!1;if(c.disabled){var b=c.propertyFields.disabled,j=a.dataContext;return!!(j&&j[b]===!1)}return!0},o.prototype.updateTooltip=function(){!this.hideTooltipWhileZooming&&this.tooltip&&!this.tooltip.isHidden&&!this.isHiding&&!this.isHidden&&this.tooltipDataItem&&this.showTooltipAtDataItem(this.tooltipDataItem)},o.prototype.positionBullet=function(a){e.prototype.positionBullet.call(this,a);var c=a.dataItem,d=a.xField;hasValue(d)||(d=this.xField);var g=a.yField;hasValue(g)||(g=this.yField);var b=this.xAxis,j=this.yAxis;if(b instanceof ValueAxis&&!c.hasValue([d])||j instanceof ValueAxis&&!c.hasValue([g]))a.visible=!1;else{var $=this.getBulletLocationX(a,d),_e=this.getBulletLocationY(a,g),st=this.getPoint(c,d,g,$,_e);if(st){var rt=this.xOpenField,ut=this.yOpenField,gt=void 0,yt=void 0;if(b instanceof DateAxis){isNumber$1($)||($=0);var wt=void 0,Ct=c.getWorkingValue(d);rt?wt=c.getWorkingValue(rt):b==this.baseAxis&&(wt=b.baseValue),isNumber$1(wt)||(wt=Ct);var Pt=c.getValue("valueX","stack");if(wt+=Pt,Ct+=Pt,wt==Ct){var At=b.baseInterval,Tt=b.dateFormatter;wt=round(new Date(wt),At.timeUnit,At.count,Tt.firstDayOfWeek,Tt.utc,void 0,Tt.timezoneMinutes,Tt.timezone).getTime(),Ct=add(new Date(wt),At.timeUnit,At.count,Tt.utc).getTime()}var kt=void 0;b==this.baseAxis?kt=wt+(Ct-wt)*$:kt=wt+(Ct-wt)*(1-$),gt=b.valueToPosition(kt)}else if(b instanceof ValueAxis){isNumber$1($)||($=0);var wt=void 0,Ct=c.getWorkingValue(d);rt?wt=c.getWorkingValue(rt):wt=b.baseValue;var Pt=c.getValue("valueX","stack");wt+=Pt,Ct+=Pt;var kt=wt+(Ct-wt)*(1-$);gt=b.valueToPosition(kt)}else if(b instanceof CategoryAxis){var It=this.getAdjustedXLocation(c,d,a.locationX),Lt=this.getAdjustedXLocation(c,rt,a.locationX);gt=b.categoryToPosition(c[d],It);var Ft=void 0;rt&&(Ft=b.categoryToPosition(c[rt],Lt)),isNumber$1(Ft)||(Ft=1),gt=Ft+(gt-Ft)*$}if(j instanceof DateAxis){isNumber$1(_e)||(_e=0);var wt=void 0,Ct=c.getWorkingValue(g);ut?wt=c.getWorkingValue(ut):j==this.baseAxis&&(wt=j.baseValue),isNumber$1(wt)||(wt=Ct);var Pt=c.getValue("valueY","stack");if(wt+=Pt,Ct+=Pt,wt==Ct){var At=j.baseInterval,Tt=j.dateFormatter;wt=round(new Date(wt),At.timeUnit,At.count,Tt.firstDayOfWeek,Tt.utc,void 0,Tt.timezoneMinutes,Tt.timezone).getTime(),Ct=add(new Date(wt),At.timeUnit,At.count,Tt.utc).getTime()}var kt=void 0;j==this.baseAxis?kt=wt+(Ct-wt)*_e:kt=wt+(Ct-wt)*(1-_e),yt=j.valueToPosition(kt)}else if(j instanceof ValueAxis){isNumber$1(_e)||(_e=0);var wt=void 0,Ct=c.getWorkingValue(g);ut?wt=c.getWorkingValue(ut):wt=j.baseValue;var Pt=c.getValue("valueY","stack");wt+=Pt,Ct+=Pt;var kt=wt+(Ct-wt)*(1-_e);yt=j.valueToPosition(kt)}else if(j instanceof CategoryAxis){yt=j.categoryToPosition(c[g],_e);var Nt=this.getAdjustedYLocation(c,g,a.locationY),Ht=this.getAdjustedYLocation(c,ut,a.locationY);yt=j.categoryToPosition(c[g],Nt);var dr=void 0;ut&&(dr=j.categoryToPosition(c[ut],Ht)),isNumber$1(dr)||(dr=1),yt=dr+(yt-dr)*_e}a.visible=!0,this.positionBulletReal(a,gt,yt)}else a.visible=!1}},o.prototype.positionBulletReal=function(a,c,d){a.x=this.xAxis.renderer.positionToPoint(c,d).x,a.y=this.yAxis.renderer.positionToPoint(d,c).y},o.prototype.getBulletLocationX=function(a,c){var d=a.locationX,g=a.dataItem;return isNumber$1(d)||(d=g.workingLocations[c]),d},o.prototype.getBulletLocationY=function(a,c){var d=a.locationY,g=a.dataItem;return isNumber$1(d)||(d=g.workingLocations[c]),d},o.prototype.updateStacking=function(){var a=this;this.invalidateDataItems(),this.chart&&this.chart.series.each(function(c){c.baseAxis==a.baseAxis&&(c.stackedSeries=void 0,c.invalidateDataItems(),c.invalidateProcessedData())})},Object.defineProperty(o.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(a){if(this.setPropertyValue("stacked",a,!0)){this.updateStacking();var c=this.xAxis,d=this.yAxis;if(!a){var g;c!=this.baseAxis&&c instanceof ValueAxis&&(g=this.xField),d!=this.baseAxis&&d instanceof ValueAxis&&(g=this.yField),g&&this.dataItems.each(function(b){b.setCalculatedValue(g,0,"stack"),b.setCalculatedValue(g,0,"stackTrue")})}}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(a){this.setPropertyValue("snapTooltip",a)},enumerable:!0,configurable:!0}),o.prototype.show=function(a){var c=this;this.isHidden&&(this.appeared&&this.xAxis instanceof DateAxis&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof DateAxis&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0)));var d;this.xAxis instanceof ValueAxis&&this.xAxis!=this.baseAxis&&(d=this._xValueFields),this.yAxis instanceof ValueAxis&&this.yAxis!=this.baseAxis&&(d=this._yValueFields);var g=this.startIndex,b=this.endIndex,j=0,$=this.defaultState.transitionDuration;isNumber$1(a)&&($=a),options.animationsEnabled||($=0);var _e;each(indexed(this.dataItems.iterator()),function(rt){var ut=rt[0],gt=rt[1],yt=$;(ut<c.startIndex-10||ut>c.endIndex+10)&&(yt=0,j=0),c.sequencedInterpolation&&yt>0&&(j=c.sequencedInterpolationDelay*ut+$*(ut-g)/(b-g)),_e=gt.show(yt,j,d)}),this.dataSets.each(function(rt,ut){ut!=c.dataItems&&ut.each(function(gt){gt.events.disable(),gt.show(0,0,d),gt.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(rt){rt.events.disable(),rt.show(0,0,d),rt.events.enable()});var st=e.prototype.show.call(this,a);return _e&&!_e.isFinished()&&(st=_e),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),st},o.prototype.hide=function(a){var c=this,d,g,b=this.xAxis;b instanceof ValueAxis&&b!=this.baseAxis&&(d=this._xValueFields,this.stacked||b.minZoomed<b.baseValue&&b.maxZoomed>b.baseValue||this.stackedSeries?g=b.baseValue:g=b.min);var j=this.yAxis;j instanceof ValueAxis&&j!=this.baseAxis&&(d=this._yValueFields,this.stacked||j.minZoomed<j.baseValue&&j.maxZoomed>j.baseValue||this.stackedSeries?g=j.baseValue:g=j.min);var $=this.startIndex,_e=this.endIndex,st=this.hiddenState.transitionDuration;isNumber$1(a)&&(st=a),options.animationsEnabled||(st=0);var rt=0,ut;each(indexed(this.dataItems.iterator()),function(yt){var wt=yt[0],Ct=yt[1],Pt=st;(wt<c.startIndex-10||wt>c.endIndex+10)&&(Pt=0),Pt==0?Ct.hide(0,0,g,d):(c.sequencedInterpolation&&Pt>0&&(rt=c.sequencedInterpolationDelay*wt+st*(wt-$)/(_e-$)),ut=Ct.hide(Pt,rt,g,d))}),this.dataSets.each(function(yt,wt){wt!=c.dataItems&&wt.each(function(Ct){Ct.events.disable(),Ct.hide(0,0,g,d),Ct.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(yt){yt.events.disable(),yt.hide(0,0,g,d),yt.events.enable()});var gt=e.prototype.hide.call(this,st);return gt&&!gt.isFinished()&&gt.delay(rt),ut&&!ut.isFinished()&&(gt=ut),this.appeared&&this.dispatch("selectionextremeschanged"),this.validateDataElements(),gt},o.prototype.handleDataItemWorkingValueChange=function(a,c){e.prototype.handleDataItemWorkingValueChange.call(this,a,c);var d=this.baseAxis.series;each(d.iterator(),function(g){(g.stacked||g.stackedSeries)&&g.invalidateProcessedData()})},o.prototype.getStackValue=function(a,c){var d=this,g=this.xAxis,b=this.yAxis;if(!(!this.stacked||!g||!b)){var j=this.chart,$=j.series.indexOf(this),_e;if(g!=this.baseAxis&&g instanceof ValueAxis&&(_e=this.xField),b!=this.baseAxis&&b instanceof ValueAxis&&(_e=this.yField),!_e)return;a.setCalculatedValue(_e,0,"stack"),a.setCalculatedValue(_e,0,"stackTrue"),eachContinue(j.series.range(0,$).backwards().iterator(),function(st){if(st.xAxis==g&&st.yAxis==b&&st.className==d.className){st.stackedSeries=d;var rt=st.dataItems.getIndex(a.index);if(rt&&rt.hasValue(d._xValueFields)&&rt.hasValue(d._yValueFields)){var ut=a.getValue(_e),gt=void 0,yt=rt.getValue(_e,"stackTrue");yt==null&&(yt=0);var wt=rt.getValue(_e)+yt;if(gt=rt.getWorkingValue(_e)+rt.getValue(_e,"stack"),d.stackToNegative){if(ut>=0&&wt>=0||ut<0&&wt<0)return a.setCalculatedValue(_e,gt,"stack"),a.setCalculatedValue(_e,wt,"stackTrue"),!1;if(!st.stacked)return!1}else return a.setCalculatedValue(_e,gt,"stack"),a.setCalculatedValue(_e,wt,"stackTrue"),!1}else if(!st.stacked)return!1}return!0})}},Object.defineProperty(o.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(a){this.setPropertyValue("stackToNegative",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(a){this._tooltipXField=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(a){this._tooltipYField=a},enumerable:!0,configurable:!0}),o.prototype.min=function(a){return this._tmin.getKey(a.uid)},o.prototype.max=function(a){return this._tmax.getKey(a.uid)},o.prototype.selectionMin=function(a){var c=this._smin.getKey(a.uid);return c},o.prototype.selectionMax=function(a){var c=this._smax.getKey(a.uid);return c},o.prototype.processConfig=function(a){if(a){if(hasValue(a.baseAxis)&&isString$1(a.baseAxis)&&(this.map.hasKey(a.baseAxis)?a.baseAxis=this.map.getKey(a.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+a.baseAxis+'" found for `baseAxis`.'),delete a.baseAxis)),hasValue(a.xAxis)&&isString$1(a.xAxis)&&(this.map.hasKey(a.xAxis)?a.xAxis=this.map.getKey(a.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+a.xAxis+'" found for `xAxis`.'),delete a.xAxis)),hasValue(a.yAxis)&&isString$1(a.yAxis)&&(this.map.hasKey(a.yAxis)?a.yAxis=this.map.getKey(a.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+a.yAxis+'" found for `yAxis`.'),delete a.yAxis)),hasValue(a.axisRanges)&&isArray$1(a.axisRanges))for(var c=0,d=a.axisRanges.length;c<d;c++){var g=a.axisRanges[c];hasValue(g.type)||(g.type="AxisDataItem"),hasValue(g.axis)&&isString$1(g.axis)&&this.map.hasKey(g.axis)?g.component=this.map.getKey(g.axis):hasValue(g.component)&&isString$1(g.component)&&this.map.hasKey(g.component)&&(g.component=this.map.getKey(g.component))}(!hasValue(a.dataFields)||!isObject$1(a.dataFields))&&this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}e.prototype.processConfig.call(this,a)},o.prototype.getPoint=function(a,c,d,g,b,j,$){if(this.xAxis&&this.yAxis){var _e=this.xAxis.getX(a,c,g),st=this.yAxis.getY(a,d,b);return _e=fitToRange(_e,-this._maxxX,this._maxxX),st=fitToRange(st,-this._maxxY,this._maxxY),{x:_e,y:st}}},o.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var a="";each$1(this.dataFields,function(c,d){a+="{"+c+"} "}),this.itemReaderText=a,this._itemReaderTextChanged=!1}},Object.defineProperty(o.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(a){this.setPropertyValue("cursorTooltipEnabled",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(a){this.setPropertyValue("cursorHoverEnabled",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(a){this.setPropertyValue("excludeFromTotal",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(a){this.setPropertyValue("hideTooltipWhileZooming",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(a){this.setPropertyValue("maskBullets",a);var c=this.chart;c&&(a?this.bulletsContainer.parent=c.bulletsContainer:this.bulletsContainer.parent=c.axisBulletsContainer)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){this.groupFields=copyProperties(a.groupFields,{}),e.prototype.copyFrom.call(this,a)},o.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),e.prototype.dispose.call(this)},o}(Series);registry.registeredClasses.XYSeries=XYSeries;registry.registeredClasses.XYSeriesDataItem=XYSeriesDataItem;var XYChartScrollbar=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._chart=new MutableValueDisposer,a.className="XYChartScrollbar";var c=new InterfaceColorSet;a.padding(0,0,0,0);var d=a.createChild(XYChart);if(d.shouldClone=!1,d.margin(0,0,0,0),d.padding(0,0,0,0),d.interactionsEnabled=!1,a._scrollbarChart=d,!isIE()){var g=new DesaturateFilter;g.filterUnits="userSpaceOnUse",d.plotContainer.filters.push(g)}a._disposers.push(a._scrollbarChart),a.minHeight=60,a.minWidth=60;var b=a.createChild(Sprite);b.shouldClone=!1,b.setElement(a.paper.add("path")),b.fill=c.getFor("background"),b.fillOpacity=.8,b.interactionsEnabled=!1,b.isMeasured=!1,b.toBack(),a._unselectedOverlay=b,a._disposers.push(a._unselectedOverlay),d.toBack(),a.background.cornerRadius(0,0,0,0);var j=a.thumb.background;j.cornerRadius(0,0,0,0),j.fillOpacity=0,j.fill=c.getFor("background");var $=j.states.getKey("hover");$&&($.properties.fillOpacity=.2);var _e=j.states.getKey("down");return _e&&(_e.properties.fillOpacity=.4),a._disposers.push(a._chart),a.applyTheme(),a}return Object.defineProperty(o.prototype,"series",{get:function(){return this._series||(this._series=new List,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),o.prototype.handleSeriesAdded=function(a){var c=this,d=a.newValue;if(!(!d.xAxis||!d.yAxis)){var g=this.scrollbarChart;g.zoomOutButton.disabled=!0,this.chart=d.chart,g.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat,g.language.locale=this.chart.language.locale;var b=!0,j=!0;each(this.series.iterator(),function(Tt){Tt!=d&&(Tt.xAxis==d.xAxis&&c.scrollbarChart.xAxes.length>0&&(b=!1),Tt.yAxis==d.yAxis&&c.scrollbarChart.yAxes.length>0&&(j=!1))}),d.events.on("beforedisposed",function(){c.series.removeValue(d)});var $=new InterfaceColorSet,_e=d.clone();if((options.onlyShowOnViewport||options.queue)&&this.addDisposer(this.chart.events.on("removedfromqueue",function(){g.invalidateData()})),isIE()&&(_e.stroke=color("#aaaaaa"),_e.fill=_e.stroke,_e.propertyFields.fill=void 0,_e.propertyFields.stroke=void 0),d.scrollbarSeries=_e,b){var st=d.xAxis.clone();g.xAxes.moveValue(st),st.title.disabled=!0,st.rangeChangeDuration=0;var rt=st.renderer;rt.ticks.template.disabled=!0,rt.inside=!0,rt.labels.template.inside=!0,rt.line.strokeOpacity=0,rt.minLabelPosition=.02,rt.maxLabelPosition=.98,rt.line.disabled=!0,rt.axisFills.template.disabled=!0,rt.baseGrid.disabled=!0,rt.grid.template.strokeOpacity=.05,rt.minWidth=void 0,rt.minHeight=void 0,rt.padding(0,0,0,0),rt.chart=g,rt.margin(0,0,0,0),st.width=percent(100);var ut=rt.labels.template;if(ut.fillOpacity=.5,st.maxZoomCount=void 0,st.minZoomCount=void 0,st instanceof DateAxis){var gt=st,yt=d.xAxis;gt.groupCount=yt.groupCount*5,gt.min=void 0,gt.max=void 0,this._disposers.push(gt.clonedFrom.events.on("extremeschanged",function(){isNumber$1(gt.clonedFrom.minDefined)&&(gt.min=gt.clonedFrom.minDefined),isNumber$1(gt.clonedFrom.maxDefined)&&(gt.max=gt.clonedFrom.maxDefined)},void 0,!1))}else if(st instanceof ValueAxis){var wt=st;wt.min=void 0,wt.max=void 0,isNumber$1(wt.clonedFrom.minDefined)||(wt.min=void 0),isNumber$1(wt.clonedFrom.maxDefined)||(wt.max=void 0),this._disposers.push(wt.clonedFrom.events.on("extremeschanged",function(){isNumber$1(wt.clonedFrom.minDefined)&&(wt.min=wt.clonedFrom.min),isNumber$1(wt.clonedFrom.maxDefined)&&(wt.max=wt.clonedFrom.max)},void 0,!1))}_e.xAxis=st}else this.scrollbarChart.xAxes.each(function(Tt){Tt.clonedFrom==d.xAxis&&(_e.xAxis=Tt)});if(j){var Ct=d.yAxis.clone();g.yAxes.moveValue(Ct),Ct.title.disabled=!0,Ct.rangeChangeDuration=0;var rt=Ct.renderer;rt.ticks.template.disabled=!0,rt.inside=!0,rt.labels.template.inside=!0,rt.line.strokeOpacity=0,rt.minLabelPosition=.02,rt.maxLabelPosition=.98,rt.line.disabled=!0,rt.axisFills.template.disabled=!0,rt.grid.template.stroke=$.getFor("background"),rt.baseGrid.disabled=!0,rt.grid.template.strokeOpacity=.05,rt.minWidth=void 0,rt.minHeight=void 0,rt.chart=g,rt.padding(0,0,0,0),rt.margin(0,0,0,0),Ct.height=percent(100);var ut=rt.labels.template;if(ut.fillOpacity=.5,_e.yAxis=Ct,Ct.maxZoomCount=void 0,Ct.minZoomCount=void 0,Ct instanceof DateAxis){var Pt=Ct;Pt.min=void 0,Pt.max=void 0;var yt=d.yAxis;Ct.groupCount=yt.groupCount*5,this._disposers.push(Pt.clonedFrom.events.on("extremeschanged",function(){isNumber$1(Pt.clonedFrom.minDefined)&&(Pt.min=Pt.clonedFrom.minDefined),isNumber$1(Pt.clonedFrom.maxDefined)&&(Pt.max=Pt.clonedFrom.maxDefined)}))}else if(Ct instanceof ValueAxis){var At=Ct;At.min=void 0,At.max=void 0,isNumber$1(At.clonedFrom.minDefined)||(At.min=void 0),isNumber$1(At.clonedFrom.maxDefined)||(At.max=void 0),this._disposers.push(At.clonedFrom.events.on("extremeschanged",function(){isNumber$1(At.clonedFrom.minDefined)&&(At.min=At.clonedFrom.minDefined),isNumber$1(At.clonedFrom.maxDefined)&&(At.max=At.clonedFrom.maxDefined)}))}}else this.scrollbarChart.yAxes.each(function(Tt){Tt.clonedFrom==d.yAxis&&(_e.yAxis=Tt)});_e.rangeChangeDuration=0,_e.interpolationDuration=0,_e.defaultState.transitionDuration=0,_e.showOnInit=!1,this._disposers.push(_e.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(d.events.on("datavalidated",function(){_e.data!=d.data&&(_e.data=d.data)},void 0,!1)),_e.defaultState.properties.visible=!0,g.series.push(_e),this.updateByOrientation()}},o.prototype.updateByOrientation=function(){var a=this;this._scrollbarChart&&(each(this._scrollbarChart.xAxes.iterator(),function(c){var d=c.renderer;a.orientation=="vertical"?(d.grid.template.disabled=!0,d.labels.template.disabled=!0,d.minGridDistance=10):(d.grid.template.disabled=!1,d.labels.template.disabled=!1,d.minGridDistance=c.clonedFrom.renderer.minGridDistance)}),each(this._scrollbarChart.yAxes.iterator(),function(c){var d=c.renderer;a.orientation=="horizontal"?(d.grid.template.disabled=!0,d.labels.template.disabled=!0,d.minGridDistance=10):(d.grid.template.disabled=!1,d.labels.template.disabled=!1,d.minGridDistance=c.clonedFrom.renderer.minGridDistance)}))},o.prototype.handleSeriesRemoved=function(a){var c=a.oldValue,d=this.scrollbarChart;d.series.each(function(g){g&&g.clonedFrom==c&&d.series.removeValue(g)}),d.series.length==0&&(d.xAxes.clear(),d.yAxes.clear());try{c.events.off("validated",this.zoomOutAxes,this)}catch{}},Object.defineProperty(o.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart.get()},set:function(a){this._chart.get()!==a&&(this._chart.set(a,a.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),o.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},o.prototype.zoomOutAxes=function(){var a=this.scrollbarChart;each(a.xAxes.iterator(),function(c){c.zoom({start:0,end:1},!0,!0)}),each(a.yAxes.iterator(),function(c){c.zoom({start:0,end:1},!0,!0)})},o.prototype.updateThumb=function(a){if(a===void 0&&(a=!0),e.prototype.updateThumb.call(this,a),this._unselectedOverlay){var c=this.thumb,d=c.pixelX||0,g=c.pixelY||0,b=c.pixelWidth||0,j=c.pixelHeight||0,$="";this.orientation=="horizontal"?($=rectToPath({x:-1,y:0,width:d,height:j}),$+=rectToPath({x:d+b,y:0,width:(this.pixelWidth||0)-d-b,height:j})):($=rectToPath({x:0,y:0,width:b,height:g}),$+=rectToPath({x:0,y:g+j,width:b,height:(this.pixelHeight||0)-g-j})),this._unselectedOverlay.path=$}},o.prototype.processConfig=function(a){if(a&&hasValue(a.series)&&isArray$1(a.series))for(var c=0,d=a.series.length;c<d;c++){var g=a.series[c];if(hasValue(g)&&isString$1(g))if(this.map.hasKey(g))a.series[c]=this.map.getKey(g);else throw Error("XYChartScrollbar error: Series with id `"+g+"` does not exist.")}e.prototype.processConfig.call(this,a)},o}(Scrollbar);registry.registeredClasses.XYChartScrollbar=XYChartScrollbar;var XYChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="XYChartDataItem",a.applyTheme(),a}return o}(SerialChartDataItem),XYChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._axisRendererX=AxisRendererX,a._axisRendererY=AxisRendererY,a._seriesPoints=[],a.className="XYChart",a.maskBullets=!0,a.arrangeTooltips=!0;var c=a.chartContainer;c.layout="vertical",a.padding(15,15,15,15);var d=c.createChild(Container);d.shouldClone=!1,d.layout="vertical",d.width=percent(100),d.zIndex=1,a.topAxesContainer=d;var g=c.createChild(Container);g.shouldClone=!1,g.layout="horizontal",g.width=percent(100),g.height=percent(100),g.zIndex=0,a.yAxesAndPlotContainer=g;var b=c.createChild(Container);b.shouldClone=!1,b.width=percent(100),b.layout="vertical",b.zIndex=1,a.bottomAxesContainer=b;var j=g.createChild(Container);j.shouldClone=!1,j.layout="horizontal",j.height=percent(100),j.contentAlign="right",j.events.on("transformed",a.updateXAxesMargins,a,!1),j.zIndex=1,a.leftAxesContainer=j;var $=g.createChild(Container);$.shouldClone=!1,$.height=percent(100),$.width=percent(100),$.background.fillOpacity=0,a.plotContainer=$,a.mouseWheelBehavior="none",a._cursorContainer=$;var _e=g.createChild(Container);_e.shouldClone=!1,_e.layout="horizontal",_e.height=percent(100),_e.zIndex=1,_e.events.on("transformed",a.updateXAxesMargins,a,!1),a.rightAxesContainer=_e,a.seriesContainer.parent=$,a.bulletsContainer.parent=$;var st=$.createChild(ZoomOutButton);st.shouldClone=!1,st.align="right",st.valign="top",st.zIndex=Number.MAX_SAFE_INTEGER,st.marginTop=5,st.marginRight=5,st.hide(0),a.zoomOutButton=st;var rt=a.plotContainer.createChild(Container);return rt.shouldClone=!1,rt.width=percent(100),rt.height=percent(100),rt.isMeasured=!1,rt.zIndex=4,rt.layout="none",a.axisBulletsContainer=rt,a._bulletMask=a.plotContainer,a.events.on("beforedatavalidated",function(){a.series.each(function(ut){ut.dataGrouped=!1,ut._baseInterval={}})},a,!1),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},o.prototype.draw=function(){e.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},o.prototype.updatePlotElements=function(){each(this.series.iterator(),function(a){a.invalidate()})},o.prototype.validateData=function(){this._parseDataFrom==0&&(each(this.xAxes.iterator(),function(a){a.dataChangeUpdate()}),each(this.yAxes.iterator(),function(a){a.dataChangeUpdate()}),each(this.series.iterator(),function(a){a.dataChangeUpdate()})),e.prototype.validateData.call(this)},o.prototype.updateXAxesMargins=function(){var a=this.leftAxesContainer.measuredWidth,c=this.rightAxesContainer.measuredWidth,d=this.bottomAxesContainer;(d.paddingLeft!=a||d.paddingRight!=c)&&(d.paddingLeft=a,d.paddingRight=c);var g=this.topAxesContainer;(g.paddingLeft!=a||g.paddingRight!=c)&&(g.paddingLeft=a,g.paddingRight=c)},o.prototype.reinit=function(){e.prototype.reinit.call(this),this.series.each(function(a){a.appeared=!1})},o.prototype.handleXAxisChange=function(a){this.updateXAxis(a.target)},o.prototype.handleYAxisChange=function(a){this.updateYAxis(a.target)},o.prototype.processXAxis=function(a){var c=a.newValue;c.chart=this,c.renderer||(c.renderer=new this._axisRendererX,c.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),c.axisLetter="X",c.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),c.dataProvider=this,this.updateXAxis(c.renderer),this.processAxis(c)},o.prototype.processYAxis=function(a){var c=a.newValue;c.chart=this,c.renderer||(c.renderer=new this._axisRendererY,c.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),c.axisLetter="Y",c.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),c.dataProvider=this,this.updateYAxis(c.renderer),this.processAxis(c)},o.prototype.handleXAxisRangeChange=function(){var a=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,a,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,a)},o.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var a=!1;eachContinue(this.xAxes.iterator(),function(c){if(c.toggleZoomOutButton){if(c.maxZoomCount>0){var d=c.maxZoomFactor/c.maxZoomCount;if(round$1(c.end-c.start,3)<1/d)return a=!0,!1}else if(round$1(c.start,3)>0||round$1(c.end,3)<1)return a=!0,!1}return!0}),eachContinue(this.yAxes.iterator(),function(c){if(c.toggleZoomOutButton){if(c.maxZoomCount>0){var d=c.maxZoomFactor/c.maxZoomCount;if(round$1(c.end-c.start,3)<1/d)return a=!0,!1}else if(round$1(c.start,3)>0||round$1(c.end,3)<1)return a=!0,!1;return!0}}),this.seriesAppeared||(a=!1),a?this.zoomOutButton.show():this.zoomOutButton.hide()}},o.prototype.seriesAppeared=function(){var a=!1;return each(this.series.iterator(),function(c){if(!c.appeared)return a=!1,!1}),a},o.prototype.handleYAxisRangeChange=function(){var a=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,a,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,a)},o.prototype.updateScrollbar=function(a,c){a&&(a.skipRangeEvents(),a.start=c.start,a.end=c.end)},o.prototype.getCommonAxisRange=function(a){var c,d;return a.each(function(g){if(!(!g.zoomable||g instanceof ValueAxis&&g.syncWithAxis)){var b=g.start,j=g.end;g.renderer.inversed&&(b=1-g.end,j=1-g.start),(!isNumber$1(c)||b<c)&&(c=b),(!isNumber$1(d)||j>d)&&(d=j)}}),{start:c,end:d}},o.prototype.updateXAxis=function(a){var c=a.axis;a.opposite?(c.parent=this.topAxesContainer,c.toFront()):(c.parent=this.bottomAxesContainer,c.toBack()),c.renderer&&c.renderer.processRenderer()},o.prototype.updateYAxis=function(a){var c=a.axis;a.opposite?(c.parent=this.rightAxesContainer,c.toBack()):(c.parent=this.leftAxesContainer,c.toFront()),c.renderer&&c.renderer.processRenderer()},o.prototype.processAxis=function(a){var c=this;a instanceof CategoryAxis&&this._dataUsers.moveValue(a);var d=a.renderer;d.gridContainer.parent=this.plotContainer,d.gridContainer.toBack(),d.breakContainer.parent=this.plotContainer,d.breakContainer.toFront(),d.breakContainer.zIndex=10,a.addDisposer(new Disposer(function(){c.dataUsers.removeValue(a)})),d.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(a.events.on("positionchanged",function(){var g=spritePointToSprite({x:0,y:0},a,c.axisBulletsContainer);a.renderer instanceof AxisRendererY&&(d.bulletsContainer.y=g.y),a.renderer instanceof AxisRendererX&&(d.bulletsContainer.x=g.x)},void 0,!1)),this.plotContainer.events.on("maxsizechanged",function(){c.inited&&(a.invalidateDataItems(),c.updateSeriesMasks())},a,!1)},o.prototype.updateSeriesMasks=function(){isIE()&&this.series.each(function(a){var c=a.mainContainer.mask;a.mainContainer.mask=void 0,a.mainContainer.mask=c})},o.prototype.handleSeriesRemoved=function(a){var c=a.oldValue;c&&(c.xAxis&&(c.xAxis.series.removeValue(c),c.xAxis.invalidateProcessedData()),c.yAxis&&(c.yAxis.series.removeValue(c),c.yAxis.invalidateProcessedData()),this.series.each(function(d){d.resetExtremes()})),e.prototype.handleSeriesRemoved.call(this,a)},Object.defineProperty(o.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new List,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new ListDisposer(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),o.prototype.handleAxisRemoval=function(a){var c=a.oldValue;this.dataUsers.removeValue(c),c.autoDispose&&c.dispose()},Object.defineProperty(o.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new List,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new ListDisposer(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),o.prototype.handleSeriesAdded=function(a){try{e.prototype.handleSeriesAdded.call(this,a);var c=a.newValue;(this.xAxes.length==0||this.yAxes.length==0)&&(registry.removeFromInvalidComponents(c),c.dataInvalid=!1),c.xAxis,c.yAxis,c.maskBullets=c.maskBullets,c.fill==null&&(this.patterns?(hasValue(c.stroke)||(c.stroke=this.colors.next()),c.fill=this.patterns.next(),hasValue(c.fillOpacity)&&(c.fill.backgroundOpacity=c.fillOpacity),c.stroke instanceof Color&&(c.fill.stroke=c.stroke,c.fill.fill=c.stroke)):c.fill=this.colors.next()),hasValue(c.stroke)||(c.stroke=c.fill)}catch(d){this.raiseCriticalError(d)}},Object.defineProperty(o.prototype,"cursor",{get:function(){return this._cursor},set:function(a){this._cursor!=a&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=a,a&&(this._disposers.push(a),a.chart=this,a.shouldClone=!1,a.parent=this._cursorContainer,a.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),a.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),a.events.on("zoomended",this.handleCursorZoomEnd,this,!1),a.events.on("panstarted",this.handleCursorPanStart,this,!1),a.events.on("panning",this.handleCursorPanning,this,!1),a.events.on("panended",this.handleCursorPanEnd,this,!1),a.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),a.events.on("hidden",this.handleHideCursor,this,!1),a.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),o.prototype.handleCursorPositionChange=function(){var a=this.cursor;if(a.visible&&!a.isHiding){var c=this.cursor.xPosition,d=this.cursor.yPosition;this.showSeriesTooltip({x:c,y:d});var g=[],b=a.snapToSeries;if(b&&!a.downPoint){b instanceof XYSeries&&(b=[b]);var j=[];each$2(b,function(_e){if(!_e.isHidden&&!_e.isHiding){var st=_e.xAxis,rt=_e.yAxis;st instanceof ValueAxis&&!(st instanceof DateAxis)&&rt instanceof ValueAxis&&!(rt instanceof DateAxis)?(_e.dataItems.each(function(ut){j.push(ut)}),move(g,_e.yAxis),move(g,_e.xAxis)):(_e.baseAxis==_e.xAxis&&(move(g,_e.yAxis),j.push(st.getSeriesDataItem(_e,st.toAxisPosition(c),!0))),_e.baseAxis==_e.yAxis&&(move(g,_e.xAxis),j.push(rt.getSeriesDataItem(_e,rt.toAxisPosition(d),!0))))}});var $=this.getClosest(j,c,d);$&&(this.series.each(function(_e){var st=$.component;_e!=st&&(_e.hideTooltip(),_e.xAxis!=st.xAxis&&(_e.xAxis.hideTooltip(),g.push(_e.xAxis)),_e.yAxis!=st.yAxis&&(_e.yAxis.hideTooltip(),g.push(_e.yAxis)))}),$.component.showTooltipAtDataItem($),a.handleSnap($.component))}this._seriesPoints=[],this._cursorXPosition!=c&&this.showAxisTooltip(this.xAxes,c,g),this._cursorYPosition!=d&&this.showAxisTooltip(this.yAxes,d,g),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},o.prototype.getClosest=function(a,c,d){var g=1/0,b;return eachContinue$2(a,function(j){if(j){var $=j.component.xAxis,_e=j.component.yAxis,st=$.positionToCoordinate($.toGlobalPosition($.toAxisPosition(c))),rt=_e.positionToCoordinate(_e.toGlobalPosition(_e.toAxisPosition(d))),ut=j.component.xField,gt=j.component.yField;if($ instanceof ValueAxis&&!isNumber$1(j.getValue(ut))||_e instanceof ValueAxis&&!isNumber$1(j.getValue(gt)))return!0;var yt=$.positionToCoordinate($.toGlobalPosition($.getPositionX(j,ut,j.locations[ut],"valueX"))),wt=_e.positionToCoordinate(_e.toGlobalPosition(_e.getPositionY(j,gt,j.locations[gt],"valueY"))),Ct=Math.sqrt(Math.pow(st-yt,2)+Math.pow(rt-wt,2));return Ct<g&&(g=Ct,b=j),!0}}),b},o.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},o.prototype.updateSeriesLegend=function(){each(this.series.iterator(),function(a){a.updateLegendValue()})},o.prototype.hideObjectTooltip=function(a){each(a.iterator(),function(c){c.cursorTooltipEnabled&&c.hideTooltip(0)})},o.prototype.showSeriesTooltip=function(a){var c=this;if(!a){this.series.each(function(g){g.hideTooltip()});return}var d=[];this.series.each(function(g){if(!(g.xAxis instanceof DateAxis&&g.xAxis.snapTooltip||g.yAxis instanceof DateAxis&&g.yAxis.snapTooltip)){var b=g.showTooltipAtPosition(a.x,a.y);b&&(g.tooltip.setBounds(spriteRectToSvg({x:0,y:0,width:c.pixelWidth,height:c.pixelHeight},c)),d.push({series:g,point:b}))}}),this.arrangeTooltips&&this.sortSeriesTooltips(d)},o.prototype.sortSeriesTooltips=function(a){if(a.length>0){var c=this.cursor;if(c&&isNumber$1(c.maxTooltipDistance)){var d=spritePointToSvg({x:c.point.x,y:c.point.y},c),g,b,j=1/0;each$2(a,function(hs){var us=hs.series,hn=hs.point;if(hn){var un={x:hn.x,y:hn.y},bo=Math.abs(getDistance(un,d));bo<j&&(b=un,j=bo,g=us)}});var $=[];g&&(each$2(a,function(hs){if(Math.abs(getDistance(hs.point,b))<=Math.abs(c.maxTooltipDistance))$.push({series:hs.series,point:hs.point});else{var us=hs.series.tooltipDataItem;us&&each$2(us.sprites,function(hn){hn.isHover=!1,hn.handleOutReal()}),hs.series.hideTooltip(0)}}),c.maxTooltipDistance<0&&($.length>0&&each$2($,function(hs){g!=hs.series&&hs.series.hideTooltip(0)}),$=[{series:g,point:b}])),a=$}var _e=spritePointToSvg({x:-.5,y:-.5},this.plotContainer),st=spritePointToSvg({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),rt=0,ut=[];each$2(a,function(hs){var us=hs.point;us&&isInRectangle(us,{x:_e.x,y:_e.y,width:st.x-_e.x,height:st.y-_e.y})&&(ut.push({point:us,series:hs.series}),rt+=us.y)}),a=ut;var gt=this.series.getIndex(0),yt=!1;gt&&gt.yAxis&&gt.yAxis.renderer.inversed&&(yt=!0),yt?a.sort(function(hs,us){return order(hs.point.y,us.point.y)}):(a.sort(function(hs,us){return order(us.point.y,hs.point.y)}),a.reverse());var wt=rt/a.length,Ct=svgPointToDocument({x:0,y:0},this.svgContainer.SVGContainer).y;if(a.length>0){var Pt=_e.y,At=st.y;spritePointToDocument({x:0,y:Pt},this);var Tt=!1;if(wt>Pt+(At-Pt)/2)for(var kt=At,It=a.length-1;It>=0;It--){var Lt=a[It].series,Ft=Lt.tooltip,Nt=a[It].point.y;if(Ft.setBounds({x:0,y:-Ct,width:this.pixelWidth,height:kt+Ct}),Ft.invalid&&Ft.validate(),Ft.toBack(),kt=spritePointToSvg({x:0,y:Ft.label.pixelY-Ft.pixelY+Nt-Ft.pixelMarginTop},Ft).y,kt<-Ct){Tt=!0;break}}if(wt<=Pt+(At-Pt)/2||Tt)for(var Ht=Pt,It=0,dr=a.length;It<dr;It++){var Lt=a[It].series,Nt=a[It].point.y,Ft=Lt.tooltip;Ft.setBounds({x:0,y:Ht,width:this.pixelWidth,height:At}),Ft.invalid&&Ft.validate(),Ft.toBack(),Ht=spritePointToSvg({x:0,y:Ft.label.pixelY+Ft.label.measuredHeight-Ft.pixelY+Nt+Ft.pixelMarginBottom},Ft).y}}}},o.prototype.showAxisTooltip=function(a,c,d){var g=this;each(a.iterator(),function(b){(!d||d.indexOf(b)==-1)&&(g.dataItems.length>0||b.dataItems.length>0)&&b.showTooltipAtPosition(c)})},o.prototype.getUpdatedRange=function(a,c){if(a){var d,g,b=a.renderer.inversed;b?(invertRange(c),d=1-a.end,g=1-a.start):(d=a.start,g=a.end);var j=g-d;return{start:d+c.start*j,end:d+c.end*j}}},o.prototype.handleCursorZoomEnd=function(a){var c=this.cursor,d=c.behavior;if(d=="zoomX"||d=="zoomXY"){var g=c.xRange;g&&this.xAxes.length>0&&(g=this.getUpdatedRange(this.xAxes.getIndex(0),g),g.priority="start",this.zoomAxes(this.xAxes,g))}if(d=="zoomY"||d=="zoomXY"){var b=c.yRange;b&&this.yAxes.length>0&&(b=this.getUpdatedRange(this.yAxes.getIndex(0),b),b.priority="start",this.zoomAxes(this.yAxes,b))}this.handleHideCursor()},o.prototype.handleCursorPanStart=function(a){var c=this.xAxes.getIndex(0);c&&(this._panStartXRange={start:c.start,end:c.end},c.renderer.inversed&&(this._panStartXRange=invertRange(this._panStartXRange)));var d=this.yAxes.getIndex(0);d&&(this._panStartYRange={start:d.start,end:d.end},d.renderer.inversed&&(this._panStartYRange=invertRange(this._panStartYRange)))},o.prototype.handleCursorPanEnd=function(a){var c=this.cursor,d=c.behavior;if(this._panEndXRange&&(d=="panX"||d=="panXY")){var g=this._panEndXRange,b=this._panStartXRange,j=0;g.start<0&&(j=g.start),b.end>1?g.end>b.end&&(j=g.end-b.end):g.end>1&&(j=g.end-1),this.zoomAxes(this.xAxes,{start:g.start-j,end:g.end-j},!1,c.snapOnPan),this._panEndXRange=void 0,this._panStartXRange=void 0}if(this._panEndYRange&&(d=="panY"||d=="panXY")){var g=this._panEndYRange,j=0;g.start<0&&(j=g.start),g.end>1&&(j=g.end-1),this.zoomAxes(this.yAxes,{start:g.start-j,end:g.end-j},!1,c.snapOnPan),this._panEndYRange=void 0,this._panStartYRange=void 0}},o.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},o.prototype.handleCursorPanning=function(a){var c=this.cursor,d=c.behavior,g=c.maxPanOut;if(this._panStartXRange&&(d=="panX"||d=="panXY")){var b=this._panStartXRange,j=c.xRange,$=this.getCommonAxisRange(this.xAxes),_e=b.end-b.start,st=j.start*($.end-$.start),rt=Math.max(-g,st+b.start),ut=Math.min(st+b.end,1+g);rt<=0&&(ut=rt+_e),ut>=1&&(rt=ut-_e);var gt={start:rt,end:ut};this._panEndXRange=gt,this.zoomAxes(this.xAxes,gt,!1,!1,c.maxPanOut)}if(this._panStartYRange&&(d=="panY"||d=="panXY")){var b=this._panStartYRange,j=c.yRange,$=this.getCommonAxisRange(this.yAxes),_e=b.end-b.start,st=j.start*($.end-$.start),rt=Math.max(-g,st+b.start),ut=Math.min(st+b.end,1+g);rt<=0&&(ut=rt+_e),ut>=1&&(rt=ut-_e);var gt={start:rt,end:ut};this._panEndYRange=gt,this.zoomAxes(this.yAxes,gt,!1,!1,c.maxPanOut)}this.handleHideCursor()},o.prototype.handleYAxisSet=function(a){},o.prototype.handleCursorZoomStart=function(a){},Object.defineProperty(o.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(a){var c=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=a,a&&(this._disposers.push(a),a.parent=this.topAxesContainer,a.shouldClone=!1,a.startGrip.exportable=!1,a.endGrip.exportable=!1,a.toBack(),a.orientation="horizontal",a.events.on("rangechanged",this.handleXScrollbarChange,this,!1),this.events.on("datavalidated",function(){return a.updateThumb(!1)},this,!1),a.adapter.add("positionValue",function(d){var g=c.xAxes.getIndex(0);return g&&(d.value=g.getPositionLabel(g.renderer.inversed?1-d.position:d.position)),d}),a.adapter.add("positionValueDirection",function(d){var g=c.xAxes.getIndex(0);return g&&(d.flipped=g.renderer.inversed),d}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(a){var c=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=a,a&&(this._disposers.push(a),a.parent=this.rightAxesContainer,a.startGrip.exportable=!1,a.shouldClone=!1,a.endGrip.exportable=!1,a.toFront(),a.orientation="vertical",a.events.on("rangechanged",this.handleYScrollbarChange,this,!1),this.events.on("datavalidated",function(){return a.updateThumb(!1)},this,!1),a.adapter.add("positionValue",function(d){var g=c.yAxes.getIndex(0);return g&&(d.value=g.getPositionLabel(g.renderer.inversed?d.position:1-d.position)),d}),a.adapter.add("positionValueDirection",function(d){var g=c.yAxes.getIndex(0);return g&&(d.flipped=!g.renderer.inversed),d}))},enumerable:!0,configurable:!0}),o.prototype.handleXScrollbarChange=function(a){if(this.inited){var c=a.target,d=c.range;d.start==0&&(d.priority="start"),d.end==1&&(d.priority="end"),d=this.zoomAxes(this.xAxes,d),c.fixRange(d)}},o.prototype.handleYScrollbarChange=function(a){if(this.inited){var c=a.target,d=c.range;d.end==1&&(d.priority="end"),d.start==0&&(d.priority="start"),d=this.zoomAxes(this.yAxes,d),c.fixRange(d)}},o.prototype.zoomAxes=function(a,c,d,g,b,j){var $={start:0,end:1};this.showSeriesTooltip();var _e=c;return this.dataInvalid||each(a.iterator(),function(st){var rt=st.maxZoomFactor;if(isNumber$1(st.minZoomCount)&&(rt=rt/st.minZoomCount),!(j&&1/(c.end-c.start)>=rt)){if(st.zoomable){if(st.renderer.inversed?c=invertRange(_e):c=_e,st.hideTooltip(0),g)if(st instanceof CategoryAxis){var ut=st.getCellEndPosition(0)-st.getCellStartPosition(0);c.start=st.roundPosition(c.start+ut/2-st.startLocation*ut,st.startLocation),c.end=st.roundPosition(c.end-ut/2+(1-st.endLocation)*ut,st.endLocation)}else{var gt=1e-4;c.start=st.roundPosition(c.start+gt,0,st.startLocation),c.end=st.roundPosition(c.end+gt,0,st.endLocation)}var yt=st.zoom(c,d,d,b);st.renderer.inversed&&(yt=invertRange(yt)),$=yt}}}),$},Object.defineProperty(o.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(a){this.setPropertyValue("maskBullets",a,!0)&&this.bulletsContainer&&(a?this.bulletsContainer.mask=this._bulletMask:this.bulletsContainer.mask=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(a){this.setPropertyValue("arrangeTooltips",a,!0)},enumerable:!0,configurable:!0}),o.prototype.handleWheel=function(a){var c=this.plotContainer,d=documentPointToSvg(a.point,this.htmlContainer,this.svgContainer.cssScale),g=svgPointToSprite(d,c),b=a.shift.y;this.handleWheelReal(b,this.mouseWheelBehavior,g)},o.prototype.handleHorizontalWheel=function(a){var c=this.plotContainer,d=documentPointToSvg(a.point,this.htmlContainer,this.svgContainer.cssScale),g=svgPointToSprite(d,c);this.handleWheelReal(a.shift.x,this.horizontalMouseWheelBehavior,g)},o.prototype.handleWheelReal=function(a,c,d){if(a!=0){var g=this.plotContainer,b=this.getCommonAxisRange(this.xAxes),j=this.getCommonAxisRange(this.yAxes),$=.1,_e=0;if(c=="panX"||c=="panXY"){var st=this.xAxes.getIndex(0),rt=!1,ut=$;st instanceof CategoryAxis&&(ut=.5/((b.end-b.start)*st.dataItems.length),rt=!0),$=Math.max(.2,ut);var gt=b.end-b.start,yt=Math.max(-_e,b.start+$*a/100*(b.end-b.start)),wt=Math.min(b.end+$*a/100*(b.end-b.start),1+_e);yt<=0&&(wt=yt+gt),wt>=1&&(yt=wt-gt),this.zoomAxes(this.xAxes,{start:yt,end:wt},void 0,rt)}if(c=="panY"||c=="panXY"){var Ct=this.yAxes.getIndex(0),ut=$,rt=!1;Ct instanceof CategoryAxis&&(ut=.5/((b.end-b.start)*Ct.dataItems.length),rt=!0),$=Math.max(.2,ut),a*=-1;var Pt=j.end-j.start,At=Math.max(-_e,j.start+$*a/100*(j.end-j.start)),Tt=Math.min(j.end+$*a/100*(j.end-j.start),1+_e);At<=0&&(Tt=At+Pt),Tt>=1&&(At=Tt-Pt),this.zoomAxes(this.yAxes,{start:At,end:Tt},void 0,rt)}if(c=="zoomX"||c=="zoomXY"){var kt=d.x/g.maxWidth,It=this.xAxes.getIndex(0).toAxisPosition(kt),yt=Math.max(-_e,b.start-$*(b.end-b.start)*a/100*kt);yt=Math.min(yt,It);var wt=Math.min(b.end+$*(b.end-b.start)*a/100*(1-kt),1+_e);wt=Math.max(wt,It),this.zoomAxes(this.xAxes,{start:yt,end:wt},void 0)}if(c=="zoomY"||c=="zoomXY"){var Lt=d.y/g.maxHeight,Ft=this.yAxes.getIndex(0).toAxisPosition(Lt),At=Math.max(-_e,j.start-$*(j.end-j.start)*a/100*(1-Lt));At=Math.min(At,Ft);var Tt=Math.min(j.end+$*a/100*Lt*(j.end-j.start),1+_e);Tt=Math.max(Tt,Ft),this.zoomAxes(this.yAxes,{start:At,end:Tt},void 0)}}},Object.defineProperty(o.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(a){this.setPropertyValue("mouseWheelBehavior",a)&&(a!="none"?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(a){this.setPropertyValue("horizontalMouseWheelBehavior",a)&&(a!="none"?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),o.prototype.dataSourceDateFields=function(a){var c=this;return a=e.prototype.dataSourceDateFields.call(this,a),each(this.series.iterator(),function(d){a=c.populateDataSourceFields(a,d.dataFields,["dateX","dateY","openDateX","openDateY"])}),a},o.prototype.dataSourceNumberFields=function(a){var c=this;return a=e.prototype.dataSourceDateFields.call(this,a),each(this.series.iterator(),function(d){a=c.populateDataSourceFields(a,d.dataFields,["valueX","valueY","openValueX","openValueY"])}),a},o.prototype.processConfig=function(a){if(a){var c=[],d=[];if(hasValue(a.xAxes)&&isArray$1(a.xAxes))for(var g=0,b=a.xAxes.length;g<b;g++)if(a.xAxes[g].type){if(hasValue(a.xAxes[g].axisRanges)){for(var j=0,$=a.xAxes[g].axisRanges.length;j<$;j++){var _e=a.xAxes[g].axisRanges[j];hasValue(_e.date)&&isString$1(_e.date)&&(_e.date=this.dateFormatter.parse(_e.date)),hasValue(_e.endDate)&&isString$1(_e.endDate)&&(_e.endDate=this.dateFormatter.parse(_e.endDate))}c.push({axisRanges:a.xAxes[g].axisRanges,index:g}),delete a.xAxes[g].axisRanges}}else throw Error("[XYChart error] No type set for xAxes["+g+"].");if(hasValue(a.yAxes)&&isArray$1(a.yAxes))for(var g=0,b=a.yAxes.length;g<b;g++)if(a.yAxes[g].type){if(hasValue(a.yAxes[g].axisRanges)){for(var j=0,st=a.yAxes[g].axisRanges.length;j<st;j++){var _e=a.yAxes[g].axisRanges[j];hasValue(_e.date)&&isString$1(_e.date)&&(_e.date=this.dateFormatter.parse(_e.date)),hasValue(_e.endDate)&&isString$1(_e.endDate)&&(_e.endDate=this.dateFormatter.parse(_e.endDate))}d.push({axisRanges:a.yAxes[g].axisRanges,index:g}),delete a.yAxes[g].axisRanges}}else throw Error("[XYChart error] No type set for yAxes["+g+"].");if(hasValue(a.series)&&isArray$1(a.series))for(var g=0,b=a.series.length;g<b;g++)a.series[g].type=a.series[g].type||"LineSeries";if(hasValue(a.cursor)&&!hasValue(a.cursor.type)&&(a.cursor.type="XYCursor"),hasValue(a.scrollbarX)&&!hasValue(a.scrollbarX.type)&&(a.scrollbarX.type="Scrollbar"),hasValue(a.scrollbarY)&&!hasValue(a.scrollbarY.type)&&(a.scrollbarY.type="Scrollbar"),e.prototype.processConfig.call(this,a),d.length)for(var g=0,b=d.length;g<b;g++)this.yAxes.getIndex(d[g].index).config={axisRanges:d[g].axisRanges};if(c.length)for(var g=0,b=c.length;g<b;g++)this.xAxes.getIndex(c[g].index).config={axisRanges:c[g].axisRanges}}},o.prototype.configOrder=function(a,c){return a==c?0:a=="scrollbarX"?1:c=="scrollbarX"?-1:a=="scrollbarY"?1:c=="scrollbarY"?-1:a=="cursor"?1:c=="cursor"?-1:a=="series"?1:c=="series"?-1:e.prototype.configOrder.call(this,a,c)},o.prototype.createSeries=function(){return new XYSeries},Object.defineProperty(o.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(a){var c=this;this._zoomOutButton=a,a&&a.events.on("hit",function(){c.zoomAxes(c.xAxes,{start:0,end:1}),c.zoomAxes(c.yAxes,{start:0,end:1})},void 0,!1)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){var c=this;a.xAxes.each(function(d){var g=c.xAxes.push(d.clone());g.chart=c,g.renderer.chart=c}),a.yAxes.each(function(d){var g=c.yAxes.push(d.clone());g.renderer.chart=c,g.chart=c}),e.prototype.copyFrom.call(this,a),a.cursor&&(this.cursor=a.cursor.clone()),a.scrollbarX&&(this.scrollbarX=a.scrollbarX.clone()),a.scrollbarY&&(this.scrollbarY=a.scrollbarY.clone())},o.prototype.disposeData=function(){e.prototype.disposeData.call(this);var a=this.scrollbarX;a&&a instanceof XYChartScrollbar&&a.scrollbarChart.disposeData();var c=this.scrollbarY;c&&c instanceof XYChartScrollbar&&c.scrollbarChart.disposeData(),this.xAxes.each(function(d){d instanceof CategoryAxis&&d.disposeData()}),this.yAxes.each(function(d){d instanceof CategoryAxis&&d.disposeData()})},o.prototype.addData=function(a,c){this.scrollbarX instanceof XYChartScrollbar&&this.addScrollbarData(this.scrollbarX,c),this.scrollbarY instanceof XYChartScrollbar&&this.addScrollbarData(this.scrollbarY,c),e.prototype.addData.call(this,a,c)},o.prototype.addScrollbarData=function(a,c){var d=a.scrollbarChart;d._parseDataFrom=d.data.length,d.invalidateData()},o.prototype.removeScrollbarData=function(a,c){var d=a.scrollbarChart;if(isNumber$1(c)){for(;c>0;){var g=this.dataItems.getIndex(0);g&&d.dataItems.remove(g),d.dataUsers.each(function(b){var j=b.dataItems.getIndex(0);j&&b.dataItems.remove(j)}),d._parseDataFrom--,c--}d.invalidateData()}},o.prototype.removeData=function(a){this.scrollbarX instanceof XYChartScrollbar&&this.removeScrollbarData(this.scrollbarX,a),this.scrollbarY instanceof XYChartScrollbar&&this.removeScrollbarData(this.scrollbarY,a),e.prototype.removeData.call(this,a)},o.prototype.setTapToActivate=function(a){e.prototype.setTapToActivate.call(this,a),this.cursor&&(this.cursor.interactions.isTouchProtected=a,this.plotContainer.interactions.isTouchProtected=a)},o.prototype.handleTapToActivate=function(){e.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},o.prototype.handleTapToActivateDeactivation=function(){e.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},o}(SerialChart);registry.registeredClasses.XYChart=XYChart;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,o){if(e instanceof XYChart&&e.scrollbarX){var a=e.states.create(o),c=e.scrollbarX.states.create(o);return c.properties.disabled=!0,a}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,o){if(e instanceof XYChart&&e.scrollbarY){var a=e.states.create(o),c=e.scrollbarY.states.create(o);return c.properties.disabled=!0,a}return null}});var LineSeriesSegment=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="LineSeriesSegment",a.isMeasured=!1,a.interactionsEnabled=!1,a.layout="none";var c=a.createChild(Sprite);a.fillSprite=c,c.shouldClone=!1,c.setElement(a.paper.add("path")),c.isMeasured=!1,a._disposers.push(c);var d=a.createChild(Sprite);return a.strokeSprite=d,d.shouldClone=!1,d.fill=color(),d.setElement(a.paper.add("path")),d.isMeasured=!1,a._disposers.push(d),a}return o.prototype.drawSegment=function(a,c,d,g){if(!this.disabled)if(a.length>0&&c.length>0&&isNumber$1(a[0].x)&&isNumber$1(a[0].y)){var b=moveTo({x:a[0].x-.2,y:a[0].y-.2})+moveTo(a[0]),j=this.series;j.smoothing=="bezier"?b+=new Tension(d,g).smooth(a):j.smoothing=="monotoneX"?b+=new MonotoneX({closed:!1}).smooth(a):j.smoothing=="monotoneY"&&(b+=new MonotoneY({closed:!1}).smooth(a)),this.strokeOpacity==0||this.strokeSprite.strokeOpacity==0||(this.strokeSprite.path=b),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&isNumber$1(c[0].x)&&isNumber$1(c[0].y)&&(b+=lineTo(c[0]),j.smoothing=="bezier"?b+=new Tension(d,g).smooth(c):j.smoothing=="monotoneX"?b+=new MonotoneX({closed:!1}).smooth(c):j.smoothing=="monotoneY"&&(b+=new MonotoneY({closed:!1}).smooth(c)),b+=lineTo(a[0]),b+=closePath(),this.fillSprite.path=b)}else this.fillSprite.path="",this.strokeSprite.path=""},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a);var c=this.strokeSprite;copyProperties$1(a,c.properties,visualProperties),c.events.copyFrom(a.strokeSprite.events),c.fillOpacity=0;var d=this.fillSprite;copyProperties$1(a,d.properties,visualProperties),d.events.copyFrom(a.fillSprite.events),d.strokeOpacity=0},o}(Container);registry.registeredClasses.LineSeriesSegment=LineSeriesSegment;var DurationAxisDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="DurationAxisDataItem",a.applyTheme(),a}return o}(ValueAxisDataItem),DurationAxis=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._baseUnit="second",a.className="DurationAxis",a.setPropertyValue("maxZoomFactor",1e6),a.applyTheme(),a}return o.prototype.formatLabel=function(a,c){return this.durationFormatter.format(a,c||this.axisDurationFormat)},o.prototype.adjustMinMax=function(a,c,d,g,b){var j,$,_e,st=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),st=="millisecond"||st=="second"||st=="minute"||st=="hour"){g<=1&&(g=1),g=Math.round(g);var rt=a,ut=c;d===0&&(d=Math.abs(c));var gt=d/g,yt=[60,30,20,15,10,2,1],wt=1;st=="hour"&&(yt=[24,12,6,4,2,1]);try{for(var Ct=__values(yt),Pt=Ct.next();!Pt.done;Pt=Ct.next()){var At=Pt.value;if(d/At>g){wt=At;break}}}catch(Nt){j={error:Nt}}finally{try{Pt&&!Pt.done&&($=Ct.return)&&$.call(Ct)}finally{if(j)throw j.error}}var Tt=Math.ceil((c-a)/wt/g),kt=Math.log(Math.abs(Tt))*Math.LOG10E,It=Math.pow(10,Math.floor(kt))/10,Lt=Tt/It,Ft=closest(yt,Lt);Tt=Ft*It,gt=wt*Tt,this.durationFormatter.getValueUnit(gt,this.baseUnit),a=Math.floor(a/gt)*gt,c=Math.ceil(c/gt)*gt,b&&(a-=gt,a<0&&rt>=0&&(a=0),c+=gt,c>0&&ut<=0&&(c=0)),_e={min:a,max:c,step:gt}}else _e=e.prototype.adjustMinMax.call(this,a,c,d,g,b);return this.axisDurationFormat=this.durationFormatter.getFormat(_e.step,_e.max,this.baseUnit),_e},Object.defineProperty(o.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(a){this._tooltipDurationFormat=a},enumerable:!0,configurable:!0}),o.prototype.getTooltipText=function(a){var c=round$1(this.positionToValue(a),this._stepDecimalPlaces),d=this.formatLabel(c,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",d):d},Object.defineProperty(o.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(a){this._baseUnit!=a&&(this._baseUnit=a,this.durationFormatter.baseUnit=a,this.invalidate())},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.baseUnit=a.baseUnit},o}(ValueAxis);registry.registeredClasses.DurationAxis=DurationAxis;registry.registeredClasses.DurationAxisDataItem=DurationAxisDataItem;var LineSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="LineSeriesDataItem",a}return o}(XYSeriesDataItem),LineSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.minDistance=.5,a.segments=new ListTemplate(a.createSegment()),a.segments.template.applyOnClones=!0,a._disposers.push(new ListDisposer(a.segments)),a._disposers.push(a.segments.template),a._segmentsIterator=new ListIterator(a.segments,function(){return a.segments.create()}),a._segmentsIterator.createNewItems=!0,a.className="LineSeries",a.strokeOpacity=1,a.fillOpacity=0,a.connect=!0,a.tensionX=1,a.tensionY=1,a.autoGapCount=1.1,a.smoothing="bezier",a.segmentsContainer=a.mainContainer.createChild(Container),a.segmentsContainer.isMeasured=!1,a.bulletsContainer.toFront(),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},o.prototype.createSegment=function(){return new LineSeriesSegment},o.prototype.createDataItem=function(){return new LineSeriesDataItem},o.prototype.setInitialWorkingValues=function(a){var c=this._yAxis.get(),d=this._xAxis.get();if(this.appeared&&this.visible){var g=this.dataItems.getIndex(a.index-1);if(a.component=this,this.baseAxis==d&&c instanceof ValueAxis){var b=c.minZoomed;if(g&&(b=g.values.valueY.workingValue),a.setWorkingValue("valueY",b,0),a.setWorkingValue("valueY",a.values.valueY.value),d instanceof DateAxis)a.setWorkingLocation("dateX",a.locations.dateX-1,0),a.setWorkingLocation("dateX",a.locations.dateX);else if(d instanceof DurationAxis&&g){var j=a.valueX;a.setWorkingValue("valueX",g.valueX,0),a.setWorkingValue("valueX",j)}}if(this.baseAxis==c&&d instanceof ValueAxis){var $=d.minZoomed;if(g&&($=g.values.valueX.workingValue),a.setWorkingValue("valueX",$,0),a.setWorkingValue("valueX",a.values.valueX.value),c instanceof DateAxis)a.setWorkingLocation("dateY",a.locations.dateX-1,0),a.setWorkingLocation("dateY",a.locations.dateY);else if(c instanceof DurationAxis&&g){var j=a.valueY;a.setWorkingValue("valueY",g.valueY,0),a.setWorkingValue("valueY",j)}}}else this.baseAxis==d&&c instanceof ValueAxis&&(d instanceof DateAxis&&a.setWorkingLocation("dateX",a.locations.dateX),d instanceof CategoryAxis&&a.setWorkingLocation("categoryX",a.locations.categoryX)),this.baseAxis==c&&d instanceof ValueAxis&&(c instanceof DateAxis&&a.setWorkingLocation("dateY",a.locations.dateY),c instanceof CategoryAxis&&a.setWorkingLocation("categoryY",a.locations.categoryY))},o.prototype.updateLegendValue=function(a,c){e.prototype.updateLegendValue.call(this,a,c),a&&a.segment&&(this.tooltipColorSource=a.segment)},o.prototype.validate=function(){var a=this;e.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),each(this.axisRanges.iterator(),function(c){a.openSegmentWrapper(a._adjustedStartIndex,c)}),each(this._segmentsIterator.iterator(),function(c){c.__disabled=!0}))},o.prototype.sliceData=function(){for(var a=this.startIndex,c=this.endIndex,d=this.startIndex-1;d>=0;d--){var g=this.dataItems.getIndex(d);if(g&&g.hasValue(this._xValueFields)&&g.hasValue(this._yValueFields)){a=d;break}}this._adjustedStartIndex=this.findAdjustedIndex(a,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);for(var d=this.endIndex,b=this.dataItems.length;d<b;d++){var g=this.dataItems.getIndex(d);if(g&&g.hasValue(this._xValueFields)&&g.hasValue(this._yValueFields)){c=d+1;break}}this._workingStartIndex=a,this._workingEndIndex=c},o.prototype.findAdjustedIndex=function(a,c){var d=this,g=this.propertyFields,b=a;return each$2(c,function(j){if(hasValue(g[j]))for(var $=b;$>=0;$--){var _e=d.dataItems.getIndex($);if(_e&&hasValue(_e.properties[j])){a>$&&(a=$);break}}}),a},o.prototype.openSegmentWrapper=function(a,c){var d={index:a,axisRange:c};do d=this.openSegment(d.index,d.axisRange);while(d)},o.prototype.getSegment=function(){var a=this._segmentsIterator.getFirst();return a.series=this,a.isDisposed()?(this.segments.removeValue(a),this.getSegment()):a},o.prototype.openSegment=function(a,c){var d=!1,g=[];a=Math.min(a,this.dataItems.length);var b=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var j,$=!1,_e=this.getSegment();_e.strokeDasharray=void 0,_e.__disabled=!1,c?(_e.parent=c.contents,copyProperties$1(c.contents,_e,visualProperties)):(copyProperties$1(this,_e,visualProperties),_e.filters.clear(),_e.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var st=this.connect,rt=!1,ut=a;ut<b;ut++){var gt=this.dataItems.getIndex(ut);if(gt.segment=_e,gt.hasProperties&&(ut==a?this.updateSegmentProperties(gt.properties,_e):$=this.updateSegmentProperties(gt.properties,_e,!0)),gt.hasValue(this._xValueFields)&&gt.hasValue(this._yValueFields))this.addPoints(g,gt,this.xField,this.yField),rt=!0;else{if(ut==a)continue;if(!st&&rt){j=ut;break}}if(j=ut,this.baseAxis instanceof DateAxis){var yt=this.dataItems.getIndex(ut+1);if(yt&&this.baseAxis.makeGap(yt,gt)){d=!0;break}}if($)break}return this.closeSegment(_e,g,a,j,c,d)},o.prototype.addPoints=function(a,c,d,g,b){var j=this.getPoint(c,d,g,c.workingLocations[d],c.workingLocations[g]);b||(c.point=j),a.push(j)},o.prototype.closeSegment=function(a,c,d,g,b,j){var $=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var _e=g;_e>=d;_e--){var st=this.dataItems.getIndex(_e);st.hasValue(this._xValueFields)&&st.hasValue(this._yValueFields)&&this.addPoints($,st,this.xOpenField,this.yOpenField,!0)}else{var rt=this.baseAxis,ut=c.length,gt=this.xAxis,yt=this.yAxis;ut>0&&(rt==gt?($.push({x:c[ut-1].x,y:yt.basePoint.y}),$.push({x:c[0].x,y:yt.basePoint.y})):($.push({x:gt.basePoint.x,y:c[ut-1].y}),$.push({x:gt.basePoint.x,y:c[0].y})))}return this.drawSegment(a,c,$),j&&g++,g<this._workingEndIndex-1?{index:g,axisRange:b}:null},o.prototype.drawSegment=function(a,c,d){a.drawSegment(c,d,this.tensionX,this.tensionY)},o.prototype.updateSegmentProperties=function(a,c,d){var g=!1;return each$1(a,function(b,j){if(hasValue(j)){var $=c[b],_e=void 0;$&&($.toString?_e=$.toString():_e=$);var st=void 0;j&&(j.toString?st=j.toString():st=j),$==j||_e!=null&&st!=null&&_e==st||(d||(c[b]=j),g=!0)}}),g},Object.defineProperty(o.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(a){this.setPropertyValue("connect",a)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(a){this.setPropertyValue("tensionX",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(a){this.setPropertyValue("tensionY",a,!0)},enumerable:!0,configurable:!0}),o.prototype.createLegendMarker=function(a){var c=this,d=a.pixelWidth,g=a.pixelHeight;a.disposeChildren();var b=a.createChild(Line);if(b.shouldClone=!1,copyProperties$1(this,b,visualProperties),b.x2=d,b.y=g/2,b.y2=1e-5,b.visible=!0,this.fillOpacity>0){var j=a.createChild(Rectangle);copyProperties$1(this,j,visualProperties),j.width=d,j.height=g,j.y=0,j.strokeOpacity=0,j.visible=!0,b.y=0}var $=a.dataItem;$.color=this.stroke,$.colorOrig=this.fill,eachContinue(this.bullets.iterator(),function(_e){if(_e instanceof Bullet&&!_e.copyToLegendMarker)return!1;var st=!1;if(_e instanceof Container&&each(_e.children.iterator(),function(ut){if(ut instanceof Label)return st=!0,!0}),!st){var rt=_e.clone();return rt.parent=a,rt.isMeasured=!0,rt.tooltipText=void 0,rt.x=d/2,c.fillOpacity>0?rt.y=0:rt.y=g/2,rt.visible=!0,hasValue(rt.fill)||(rt.fill=c.fill),hasValue(rt.stroke)||(rt.stroke=c.stroke),!1}})},o.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(o.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(a){this.setPropertyValue("autoGapCount",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(a){this.setPropertyValue("smoothing",a,!0)},enumerable:!0,configurable:!0}),o}(XYSeries);registry.registeredClasses.LineSeries=LineSeries;registry.registeredClasses.LineSeriesDataItem=LineSeriesDataItem;var RadarSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadarSeriesDataItem",a.setLocation("dateX",0,0),a.setLocation("dateY",0,0),a.setLocation("categoryX",0,0),a.setLocation("categoryY",0,0),a.applyTheme(),a}return o}(LineSeriesDataItem),RadarSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadarSeries",a.connectEnds=!0,a.applyTheme(),a}return o.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},o.prototype.createDataItem=function(){return new RadarSeriesDataItem},o.prototype.getPoint=function(a,c,d,g,b,j,$){j||(j="valueX"),$||($="valueY");var _e=this.yAxis.getX(a,d,b,$),st=this.yAxis.getY(a,d,b,$),rt=getDistance({x:_e,y:st});rt==0&&(rt=1e-5);var ut=this.xAxis.getAngle(a,c,g,j),gt=this.chart.startAngle,yt=this.chart.endAngle;if(!(ut<gt||ut>yt))return{x:rt*cos(ut),y:rt*sin(ut)}},o.prototype.addPoints=function(a,c,d,g,b){var j=this.getPoint(c,d,g,c.locations[d],c.locations[g]);j&&a.push(j)},o.prototype.getMaskPath=function(){var a=this.yAxis.renderer;return arc(a.startAngle,a.endAngle-a.startAngle,a.pixelRadius,a.pixelInnerRadius)},o.prototype.drawSegment=function(a,c,d){var g=this.yAxis,b=g.renderer;this.connectEnds&&Math.abs(b.endAngle-b.startAngle)==360&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(c.push(c[0]),d.length>0&&d.unshift(d[d.length-1])),e.prototype.drawSegment.call(this,a,c,d)},Object.defineProperty(o.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(a){this.setPropertyValue("connectEnds",a,!0)},enumerable:!0,configurable:!0}),o.prototype.positionBulletReal=function(a,c,d){var g=this.xAxis,b=this.yAxis;(c<g.start||c>g.end||d<b.start||d>b.end)&&(a.visible=!1),a.moveTo(this.xAxis.renderer.positionToPoint(c,d))},o.prototype.setXAxis=function(a){e.prototype.setXAxis.call(this,a),this.updateRendererRefs()},o.prototype.setYAxis=function(a){e.prototype.setYAxis.call(this,a),this.updateRendererRefs()},o.prototype.updateRendererRefs=function(){var a=this.xAxis.renderer,c=this.yAxis.renderer;a.axisRendererY=c},o}(LineSeries);registry.registeredClasses.RadarSeries=RadarSeries;registry.registeredClasses.RadarSeriesDataItem=RadarSeriesDataItem;var AxisFillCircular=function(e){__extends(o,e);function o(a){var c=e.call(this,a)||this;return c.className="AxisFillCircular",c.element=c.paper.add("path"),c.radius=percent(100),c.applyTheme(),c}return o.prototype.draw=function(){if(e.prototype.draw.call(this),!(this.__disabled||this.disabled)&&this.axis){var a=this.axis.renderer;this.fillPath=a.getPositionRangePath(this.startPosition,this.endPosition,this.radius,hasValue(this.innerRadius)?this.innerRadius:a.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(a){this.setPropertyValue("cornerRadius",a,!0)},enumerable:!0,configurable:!0}),o}(AxisFill);registry.registeredClasses.AxisFillCircular=AxisFillCircular;var GridCircular=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="GridCircular",a.pixelPerfect=!1,a.applyTheme(),a}return Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),o}(Grid$1);registry.registeredClasses.GridCircular=GridCircular;var AxisLabelCircular=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.fdx=0,a.fdy=0,a.className="AxisLabelCircular",a.padding(0,0,0,0),a.location=.5,a.locationOnPath=.5,a.radius=0,a.isMeasured=!1,a.applyTheme(),a}return Object.defineProperty(o.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(a){if(this.setPropertyValue("relativeRotation",a,!0),!hasValue(a)){this.rotation=void 0;var c=this.dataItem;c&&c.component&&c.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(a){this.setPropertyValue("bent",a,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),a?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),o.prototype.pixelRadius=function(a){var c=1;return this.inside&&(c=-1),relativeToValue(this.radius,a)*c},o.prototype.pixelRadiusY=function(a,c){var d=1;this.inside&&(d=-1);var g=this.radius;return isNumber$1(g)?(g*=c/a,relativeToValue(g,a)*d):relativeToValue(g,c)*d},o.prototype.fixPosition=function(a,c,d,g,b){isNumber$1(d)||(d=c),isNumber$1(g)||(g=0),isNumber$1(b)||(b=0);var j={x:c*cos(a),y:d*sin(a)};this.invalid&&this.validate();var $=!1,_e=this.radius;(_e instanceof Percent&&_e.value<0||_e<0)&&($=!0);var st=this.relativeRotation,rt=this.pixelRadius(c);if(this.bent){var ut={x:(c+rt)*cos(a+180),y:(d+rt*d/c)*sin(a+180)};this.path=moveTo(ut)+arcTo(a+180,360,c+rt,d+rt*d/c),this.textPathElement&&this.textPathElement.attr({startOffset:this.locationOnPath*100+"%"});return}if(isNumber$1(st)){this.horizontalCenter="none",this.verticalCenter="none",a=fitAngleToRange(a,-180,180);var gt=this.bbox.width,yt=this.bbox.height,wt=this.pixelPaddingBottom,Ct=this.pixelPaddingTop,Pt=this.pixelPaddingLeft,At=this.pixelPaddingRight;a>90||a<-90?st==-90&&(st=90,gt=0):(st==-90&&(yt=-yt),st==90&&(st=-90,gt=-Pt-At,yt=-yt-Ct-wt)),this.rotation=st+a+90;var Tt=sin(st)/2,kt=cos(st)/2,It=this.rotation;this.dx=yt*Tt*sin(It)-gt*kt*cos(It),this.dy=-yt*Tt*cos(It)-gt*kt*sin(It),this.inside?a>90||a<-90?rt-=(wt+Ct)*cos(st)+(Pt+At)*sin(st):rt+=(wt+this.bbox.height+Ct)*cos(st)+(Pt+At+this.bbox.width)*sin(st):rt+=(yt+wt+Ct)*cos(st)+(gt+Pt+At)*sin(st),j.x+=cos(a)*rt,j.y+=sin(a)*rt*d/c}else this.horizontalCenter="middle",this.verticalCenter="middle",$?(this.dx=0,this.dy=0,j.x=(c+rt)*cos(a),j.y=(d+rt*d/c)*sin(a)):(this.dy=this._measuredHeight/2*sin(a),this.dx=this._measuredWidth/2*cos(a),j.x+=cos(a)*rt,j.y+=sin(a)*rt*d/c);j.x+=g,j.y+=b,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(j)},o}(AxisLabel);registry.registeredClasses.AxisLabelCircular=AxisLabelCircular;var AxisRendererCircular=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.pixelRadiusReal=0,a.layout="none",a.className="AxisRendererCircular",a.isMeasured=!1,a.startAngle=-90,a.endAngle=270,a.useChartAngles=!0,a.radius=percent(100),a.isMeasured=!1,a.grid.template.location=0,a.labels.template.location=0,a.labels.template.radius=15,a.ticks.template.location=0,a.ticks.template.pixelPerfect=!1,a.tooltipLocation=0,a.line.strokeOpacity=0,a.applyTheme(),a}return o.prototype.setAxis=function(a){var c=this;e.prototype.setAxis.call(this,a),a.isMeasured=!1;var d=a.tooltip;d.adapter.add("dx",function(g,b){var j=svgPointToSprite({x:b.pixelX,y:b.pixelY},c);return c.pixelRadius*Math.cos(Math.atan2(j.y,j.x))-j.x}),d.adapter.add("dy",function(g,b){var j=svgPointToSprite({x:b.pixelX,y:b.pixelY},c);return c.pixelRadius*Math.sin(Math.atan2(j.y,j.x))-j.y})},o.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},Object.defineProperty(o.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){var a=this.chart,c=this.getPropertyValue("innerRadius");if(a){if(!hasValue(c))c=a.innerRadius,c instanceof Percent&&a&&(c=percent(c.value*a.innerRadiusModifyer*100));else if(c instanceof Percent&&a){var d=a.mr,g=c.value;g=Math.max(d*g,d-Math.min(a.plotContainer.innerHeight,a.plotContainer.innerWidth))/d,c=percent(g*100)}return c}},set:function(a){this.setPercentProperty("innerRadius",a,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(a){this.setPropertyValue("useChartAngles",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){return relativeRadiusToValue(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a,c){isNumber$1(c)||(c=1);var d=this.positionToCoordinate(a),g=this.startAngle+(this.endAngle-this.startAngle)*d/this.axisLength,b=this.pixelRadius,j=this.pixelInnerRadius;if(this.axisRendererY){var $=fitToRange(this.axisRendererY.positionToCoordinate(c),0,1/0);$==0&&($=1e-6);var _e={x:$*cos(g),y:$*sin(g)};return _e}return{x:cos(g)*j+(b-j)*cos(g)*c,y:sin(g)*j+(b-j)*sin(g)*c}},o.prototype.positionToAngle=function(a){var c=this.axis,d=(this.endAngle-this.startAngle)/(c.end-c.start),g;return c.renderer.inversed?g=this.startAngle+(c.end-a)*d:g=this.startAngle+(a-c.start)*d,round$1(g,3)},o.prototype.angleToPosition=function(a){var c=this.axis,d=(this.endAngle-this.startAngle)/(c.end-c.start),g;return c.renderer.inversed?g=c.end-(a-this.startAngle)/d:g=(a-this.startAngle)/d+c.start,round$1(g,5)},o.prototype.updateAxisLine=function(){var a=this.pixelRadius,c=this.startAngle,d=this.endAngle,g=min$1(360,d-c);this.line.path=moveTo({x:a*cos(c),y:a*sin(c)})+arcTo(c,g,a,a)},o.prototype.updateGridElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);if(isNumber$1(g.x)&&isNumber$1(g.y)&&a.element){var b=DEGREES*Math.atan2(g.y,g.x),j=relativeRadiusToValue(hasValue(a.radius)?a.radius:percent(100),this.pixelRadius),$=relativeRadiusToValue(a.innerRadius,this.pixelRadius);a.zIndex=0;var _e=relativeRadiusToValue(isNumber$1($)?$:this.innerRadius,this.pixelRadiusReal,!0);isNumber$1(_e)||(_e=0),a.path=moveTo({x:_e*cos(b),y:_e*sin(b)})+lineTo({x:j*cos(b),y:j*sin(b)})}this.toggleVisibility(a,c,0,1)},o.prototype.updateTickElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);if(a.element){var b=this.pixelRadius,j=DEGREES*Math.atan2(g.y,g.x),$=a.length;a.inside&&($=-$),a.zIndex=1,a.path=moveTo({x:b*cos(j),y:b*sin(j)})+lineTo({x:(b+$)*cos(j),y:(b+$)*sin(j)})}this.toggleVisibility(a,c,0,1)},o.prototype.updateBullet=function(a,c,d){var g=.5;a instanceof AxisBullet&&(g=a.location),c=c+(d-c)*g;var b=this.positionToPoint(c),j=this.pixelRadius,$=DEGREES*Math.atan2(b.y,b.x);b={x:j*cos($),y:j*sin($)},this.positionItem(a,b),this.toggleVisibility(a,c,0,1)},o.prototype.updateLabelElement=function(a,c,d,g){hasValue(g)||(g=a.location),c=c+(d-c)*g,a.fixPosition(this.positionToAngle(c),this.pixelRadius),a.zIndex=2,this.toggleVisibility(a,c,this.minLabelPosition,this.maxLabelPosition)},o.prototype.fitsToBounds=function(a){return!0},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),o.prototype.getPositionRangePath=function(a,c,d,g,b){var j="";if(isNumber$1(a)&&isNumber$1(c)){hasValue(d)||(d=this.radius),a=max$1(a,this.axis.start),c=min$1(c,this.axis.end),c<a&&(c=a);var $=relativeRadiusToValue(d,this.pixelRadius),_e=relativeRadiusToValue(g,this.pixelRadius,!0),st=this.positionToAngle(a),rt=this.positionToAngle(c),ut=rt-st;j=arc(st,ut,$,_e,$,b)}return j},o.prototype.createGrid=function(){return new GridCircular},o.prototype.createFill=function(a){return new AxisFillCircular(a)},o.prototype.createLabel=function(){return new AxisLabelCircular},o.prototype.pointToPosition=function(a){var c=fitAngleToRange(getAngle(a),this.startAngle,this.endAngle);return this.coordinateToPosition((c-this.startAngle)/360*this.axisLength)},o}(AxisRenderer);registry.registeredClasses.AxisRendererCircular=AxisRendererCircular;var AxisRendererRadial=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._chart=new MutableValueDisposer,a.pixelRadiusReal=0,a.className="AxisRendererRadial",a.isMeasured=!1,a.startAngle=-90,a.endAngle=270,a.minGridDistance=30,a.gridType="circles",a.axisAngle=-90,a.isMeasured=!1,a.layout="none",a.radius=percent(100),a.line.strokeOpacity=0,a.labels.template.horizontalCenter="middle",a._disposers.push(a._chart),a.applyTheme(),a}return o.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},Object.defineProperty(o.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){var a=this.chart,c=this.getPropertyValue("innerRadius");if(a){if(!hasValue(c))c=a.innerRadius,c instanceof Percent&&a&&(c=percent(c.value*a.innerRadiusModifyer*100));else if(c instanceof Percent&&a){var d=a.mr,g=c.value;g=Math.max(d*g,d-Math.min(a.plotContainer.innerHeight,a.plotContainer.innerWidth))/d,c=percent(g*100)}}return c},set:function(a){this.setPercentProperty("innerRadius",a,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){return relativeRadiusToValue(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a,c){var d=fitToRange(this.positionToCoordinate(a),0,1/0);return{x:d*cos(this.axisAngle),y:d*sin(this.axisAngle)}},o.prototype.updateAxisLine=function(){this.line.path=moveTo({x:this.pixelInnerRadius*cos(this.axisAngle),y:this.pixelInnerRadius*sin(this.axisAngle)})+lineTo({x:this.pixelRadius*cos(this.axisAngle),y:this.pixelRadius*sin(this.axisAngle)});var a=this.axis.title;a.valign="none",a.horizontalCenter="middle",a.verticalCenter="bottom",a.y=-this.axisLength/2;var c=90;this.opposite?this.inside||(c=-90):this.inside&&(c=-90),a.rotation=c},o.prototype.updateGridElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c),b,j=getDistance(g),$=this.startAngle,_e=this.endAngle,st=this.chart;if(isNumber$1(j)&&a.element&&st){var rt=st.xAxes.getIndex(0),ut=0,gt=st.series.getIndex(0);if(gt&&(ut=gt.dataItems.length),this.gridType=="polygons"&&ut>0&&gt&&rt&&rt instanceof CategoryAxis){var yt=rt.renderer.grid.template.location,wt=rt.getAngle(gt.dataItems.getIndex(0),"categoryX",yt);b=moveTo({x:j*cos(wt),y:j*sin(wt)});for(var Ct=1;Ct<ut;Ct++)wt=rt.getAngle(gt.dataItems.getIndex(Ct),"categoryX",yt),b+=lineTo({x:j*cos(wt),y:j*sin(wt)});wt=rt.getAngle(gt.dataItems.getIndex(ut-1),"categoryX",rt.renderer.cellEndLocation),b+=lineTo({x:j*cos(wt),y:j*sin(wt)})}else b=moveTo({x:j*cos($),y:j*sin($)})+arcTo($,_e-$,j,j);a.path=b}this.toggleVisibility(a,c,0,1)},o.prototype.updateLabelElement=function(a,c,d,g){hasValue(g)||(g=a.location),c=c+(d-c)*g;var b=this.positionToPoint(c);this.positionItem(a,b),this.toggleVisibility(a,c,this.minLabelPosition,this.maxLabelPosition)},o.prototype.updateBaseGridElement=function(){},o.prototype.fitsToBounds=function(a){return!0},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(a){this.setPropertyValue("axisAngle",normalizeAngle(a)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridType",{get:function(){var a=this.chart.xAxes.getIndex(0);return a instanceof CategoryAxis?this.getPropertyValue("gridType"):"circles"},set:function(a){this.setPropertyValue("gridType",a,!0)},enumerable:!0,configurable:!0}),o.prototype.getPositionRangePath=function(a,c){var d=this.pixelInnerRadius,g=this.axisLength+d,b=fitToRange(this.positionToCoordinate(a),d,g),j=fitToRange(this.positionToCoordinate(c),d,g),$=this.startAngle,_e=this.endAngle,st=_e-$,rt,ut=this.chart,gt=ut.xAxes.getIndex(0),yt=ut.series.getIndex(0),wt=0;if(yt&&(wt=yt.dataItems.length),this.gridType=="polygons"&&wt>0&&yt&&gt&&gt instanceof CategoryAxis){var Ct=gt.renderer.grid.template.location,Pt=gt.getAngle(yt.dataItems.getIndex(0),"categoryX",Ct);rt=moveTo({x:j*cos(Pt),y:j*sin(Pt)});for(var At=1;At<wt;At++)Pt=gt.getAngle(yt.dataItems.getIndex(At),"categoryX",Ct),rt+=lineTo({x:j*cos(Pt),y:j*sin(Pt)});Pt=gt.getAngle(yt.dataItems.getIndex(wt-1),"categoryX",gt.renderer.cellEndLocation),rt+=lineTo({x:j*cos(Pt),y:j*sin(Pt)}),rt+=moveTo({x:b*cos(Pt),y:b*sin(Pt)});for(var At=wt-1;At>=0;At--)Pt=gt.getAngle(yt.dataItems.getIndex(At),"categoryX",Ct),rt+=lineTo({x:b*cos(Pt),y:b*sin(Pt)})}else rt=arc($,st,j,b);return rt},o.prototype.updateBreakElement=function(a){var c=a.startLine,d=a.endLine,g=a.fillShape,b=a.startPoint,j=a.endPoint;c.radius=Math.abs(b.y),d.radius=Math.abs(j.y),g.radius=Math.abs(j.y),g.innerRadius=Math.abs(b.y)},o.prototype.createBreakSprites=function(a){a.startLine=new WavedCircle,a.endLine=new WavedCircle,a.fillShape=new WavedCircle},o.prototype.updateTooltip=function(){var a=this.axis;if(a){var c=4e3,d=-4e3,g=-4e3,b=c*2,j=c*2,$=this.axisAngle;$<0&&($+=360);var _e="vertical";($>45&&$<135||$>225&&$<315)&&(_e="horizontal"),this.axis.updateTooltip(_e,{x:d,y:g,width:b,height:j})}},o.prototype.updateTickElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);if(a.element){var b=normalizeAngle(this.axisAngle+90);b/90!=Math.round(b/90)?a.pixelPerfect=!1:a.pixelPerfect=!0;var j=-a.length;a.inside&&(j*=-1),a.path=moveTo({x:0,y:0})+lineTo({x:j*cos(b),y:j*sin(b)})}this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateBullet=function(a,c,d){var g=.5;a instanceof AxisBullet&&(g=a.location),c=c+(d-c)*g;var b=this.positionToPoint(c);this.positionItem(a,b),this.toggleVisibility(a,c,0,1)},o.prototype.positionToCoordinate=function(a){var c,d=this.axis,g=d.axisFullLength,b=this.pixelInnerRadius;return d.renderer.inversed?c=(d.end-a)*g+b:c=(a-d.start)*g+b,round$1(c,1)},o.prototype.pointToPosition=function(a){var c=getDistance(a)-this.pixelInnerRadius;return this.coordinateToPosition(c)},Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart.get()},set:function(a){this._chart.set(a,null)},enumerable:!0,configurable:!0}),o}(AxisRendererY);registry.registeredClasses.AxisRendererRadial=AxisRendererRadial;var RadarChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadarChartDataItem",a.applyTheme(),a}return o}(XYChartDataItem),RadarChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._axisRendererX=AxisRendererCircular,a._axisRendererY=AxisRendererRadial,a.innerRadiusModifyer=1,a.mr=1,a.className="RadarChart",a.startAngle=-90,a.endAngle=270,a.radius=percent(80),a.innerRadius=0;var c=a.plotContainer.createChild(Container);return c.shouldClone=!1,c.layout="absolute",c.align="center",c.valign="middle",a.seriesContainer.parent=c,a.radarContainer=c,a.bulletsContainer.parent=c,a.axisBulletsContainer=c,a._cursorContainer=c,a.chartContainer.events.on("maxsizechanged",a.invalidate,a,!1),a._bulletMask=c.createChild(Circle),a._bulletMask.shouldClone=!1,a._bulletMask.element=a.paper.add("path"),a._bulletMask.opacity=0,a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},o.prototype.processAxis=function(a){e.prototype.processAxis.call(this,a);var c=a.renderer;c.gridContainer.parent=c,c.breakContainer.parent=c,a.parent=this.radarContainer,c.toBack()},o.prototype.handleXAxisRangeChange=function(){e.prototype.handleXAxisRangeChange.call(this),each(this.yAxes.iterator(),function(a){a.invalidate()})},o.prototype.handleYAxisRangeChange=function(){e.prototype.handleYAxisRangeChange.call(this),each(this.xAxes.iterator(),function(a){a.invalidate()})},o.prototype.processConfig=function(a){if(a&&(hasValue(a.cursor)&&!hasValue(a.cursor.type)&&(a.cursor.type="RadarCursor"),hasValue(a.series)&&isArray$1(a.series)))for(var c=0,d=a.series.length;c<d;c++)a.series[c].type=a.series[c].type||"RadarSeries";e.prototype.processConfig.call(this,a)},o.prototype.beforeDraw=function(){e.prototype.beforeDraw.call(this);var a=this.plotContainer,c=getArcRect(this.startAngle,this.endAngle,1),d={x:0,y:0,width:0,height:0},g=a.innerWidth/c.width,b=a.innerHeight/c.height,j=this.innerRadius;if(j instanceof Percent){var $=j.value,_e=Math.min(g,b);this.mr=_e,$=Math.max(_e*$,_e-Math.min(a.innerHeight,a.innerWidth))/_e,d=getArcRect(this.startAngle,this.endAngle,$),this.innerRadiusModifyer=$/j.value,j=percent($*100)}c=getCommonRectangle([c,d]);var st=Math.min(a.innerWidth/c.width,a.innerHeight/c.height),rt=relativeRadiusToValue(this.radius,st)*2||0,ut=rt/2,gt=this.startAngle,yt=this.endAngle;this._pixelInnerRadius=relativeRadiusToValue(j,ut),this._bulletMask.path=arc(gt,yt-gt,ut,this._pixelInnerRadius),each(this.xAxes.iterator(),function(Ct){Ct.renderer.useChartAngles&&(Ct.renderer.startAngle=gt,Ct.renderer.endAngle=yt),Ct.width=rt,Ct.height=rt,Ct.renderer.pixelRadiusReal=ut}),each(this.yAxes.iterator(),function(Ct){Ct.renderer.startAngle=gt,Ct.renderer.endAngle=yt,Ct.width=rt,Ct.height=rt,Ct.renderer.pixelRadiusReal=ut});var wt=this.cursor;wt&&(wt.width=rt,wt.height=rt,wt.startAngle=gt,wt.endAngle=yt),this.radarContainer.definedBBox={x:ut*c.x,y:ut*c.y,width:ut*c.width,height:ut*c.height},this.radarContainer.validatePosition()},o.prototype.createSeries=function(){return new RadarSeries},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),o.prototype.updateXAxis=function(a){a&&a.processRenderer()},o.prototype.updateYAxis=function(a){a&&a.processRenderer()},o}(XYChart);registry.registeredClasses.RadarChart=RadarChart;var ClockHand=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._axis=new MutableValueDisposer,a.className="ClockHand";var c=new InterfaceColorSet;a.fill=c.getFor("alternativeBackground"),a.stroke=a.fill;var d=new Circle;d.radius=5,a.pin=d,a.isMeasured=!1,a.startWidth=5,a.endWidth=1,a.width=percent(100),a.height=percent(100),a.radius=percent(100),a.innerRadius=percent(0);var g=new Trapezoid;return a.hand=g,a._disposers.push(a._axis),a.applyTheme(),a}return o.prototype.validate=function(){e.prototype.validate.call(this);var a=this.hand;a.width=this.pixelWidth;var c=Math.max(this.startWidth,this.endWidth);if(a.height=c,a.leftSide=percent(this.startWidth/c*100),a.rightSide=percent(this.endWidth/c*100),this.axis){var d=this.axis.renderer,g=relativeRadiusToValue(this.innerRadius,d.pixelRadius),b=relativeRadiusToValue(this.radius,d.pixelRadius);a.x=g,a.y=-c/2,a.width=b-g}},Object.defineProperty(o.prototype,"pin",{get:function(){return this._pin},set:function(a){this._pin&&this.removeDispose(this._pin),a&&(this._pin=a,a.parent=this,this._disposers.push(a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hand",{get:function(){return this._hand},set:function(a){this._hand&&this.removeDispose(this._hand),a&&(this._hand=a,a.parent=this,this._disposers.push(a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(a){this.setPropertyValue("startWidth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(a){this.setPropertyValue("endWidth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(a){this.setPropertyValue("rotationDirection",a)},enumerable:!0,configurable:!0}),o.prototype.showValue=function(a,c,d){if(this._value=a,a!=null&&(isNumber$1(c)||(c=0),this.axis)){var g=this.axis.renderer,b=g.positionToAngle(this.axis.anyToPosition(a)),j=this.rotation;this.rotationDirection=="clockWise"&&b<j&&(this.rotation=j-360),this.rotationDirection=="counterClockWise"&&b>j&&(this.rotation=j+360),this.animate({property:"rotation",to:b},c,d)}},Object.defineProperty(o.prototype,"currentPosition",{get:function(){if(this.axis){var a=this.axis.renderer;return a.angleToPosition(this.rotation)}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(a){this.showValue(a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"axis",{get:function(){return this._axis.get()},set:function(a){if(this.axis!=a&&this._axis.set(a,new MultiDisposer([a.events.on("datavalidated",this.updateValue,this,!1),a.events.on("datarangechanged",this.updateValue,this,!1),a.events.on("dataitemsvalidated",this.updateValue,this,!1),a.events.on("propertychanged",this.invalidate,this,!1)])),a){var c=a.chart;c&&(this.rotation=c.startAngle)}this.parent=a.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),o.prototype.updateValue=function(){this.value=this.value},o.prototype.processConfig=function(a){a&&hasValue(a.axis)&&isString$1(a.axis)&&this.map.hasKey(a.axis)&&(a.axis=this.map.getKey(a.axis)),e.prototype.processConfig.call(this,a)},o}(Container);registry.registeredClasses.ClockHand=ClockHand;(function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="GaugeChartDataItem",a.applyTheme(),a}return o})(RadarChartDataItem);var GaugeChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="GaugeChart",a.startAngle=180,a.endAngle=360,a.hands=new ListTemplate(new ClockHand),a.hands.events.on("inserted",a.processHand,a,!1),a._disposers.push(new ListDisposer(a.hands)),a._disposers.push(a.hands.template),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},o.prototype.processHand=function(a){var c=a.newValue;c.axis||(c.axis=this.xAxes.getIndex(0))},o.prototype.configOrder=function(a,c){return a==c?0:a=="hands"?1:c=="hands"?-1:e.prototype.configOrder.call(this,a,c)},o}(RadarChart);registry.registeredClasses.GaugeChart=GaugeChart;var PercentSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PercentSeriesDataItem",a.applyTheme(),a}return o.prototype.uidAttr=function(){return this.slice.uidAttr()},o.prototype.hide=function(a,c,d,g){return g||(g=["value"]),e.prototype.hide.call(this,a,c,0,g)},o.prototype.setVisibility=function(a,c){c||(a?this.setWorkingValue("value",this.values.value.value,0,0):this.setWorkingValue("value",0,0,0)),e.prototype.setVisibility.call(this,a,c)},o.prototype.show=function(a,c,d){return d||(d=["value"]),e.prototype.show.call(this,a,c,d)},Object.defineProperty(o.prototype,"category",{get:function(){return this.properties.category},set:function(a){this.setProperty("category",a)},enumerable:!0,configurable:!0}),o.prototype.createLegendMarker=function(a){this.component.createLegendMarker(a,this)},Object.defineProperty(o.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(a){this._legendDataItem=a,a.label&&(a.label.dataItem=this),a.valueLabel&&(a.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tick",{get:function(){var a=this;if(!this._tick){var c=this.component.ticks.create();this._tick=c,this.addSprite(c),this._disposers.push(c),c.parent=this.component.ticksContainer,this._disposers.push(new Disposer(function(){a.component&&a.component.ticks.removeValue(c)})),c.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){var a=this;if(!this._label){var c=this.component.labels.create();this.addSprite(c),this._label=c,this._disposers.push(c),c.parent=this.component.labelsContainer,this._disposers.push(new Disposer(function(){a.component&&a.component.labels.removeValue(c)})),c.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slice",{get:function(){var a=this;if(!this._slice){var c=this.component,d=c.slices.create();this.addSprite(d),this._slice=d,this._disposers.push(d),d.parent=c.slicesContainer,this._disposers.push(new Disposer(function(){c.slices.removeValue(d)})),d.visible=this.visible,c.itemsFocusable()?(hasValue(this.component.role)||(this.component.role="menu"),hasValue(d.role)||(d.role="menuitem"),d.focusable=!0):(hasValue(this.component.role)||(this.component.role="list"),hasValue(d.role)||(d.role="listitem"),d.focusable=!1),d.focusable&&(d.events.on("focus",function(g){d.readerTitle=c.populateString(c.itemReaderText,a)},void 0,!1),d.events.on("blur",function(g){d.readerTitle=""},void 0,!1)),d.hoverable&&(d.events.on("over",function(g){d.readerTitle=c.populateString(c.itemReaderText,a)},void 0,!1),d.events.on("out",function(g){d.readerTitle=""},void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(a){this.setProperty("hiddenInLegend",a)},enumerable:!0,configurable:!0}),o}(SeriesDataItem),PercentSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="PercentSeries",a._addAllDataItems=!1,a.colors=new ColorSet,a.colors.step=1,a.isMeasured=!0,a.calculatePercent=!0;var c=a.createChild(Container);c.shouldClone=!1,c.isMeasured=!1,a.slicesContainer=c;var d=a.createChild(Container);d.shouldClone=!1,d.isMeasured=!1,d.layout="none",a.ticksContainer=d;var g=a.createChild(Container);g.shouldClone=!1,g.isMeasured=!1,g.layout="none",a.labelsContainer=g,a.alignLabels=!1,a.bulletsContainer.toFront(),a.skipFocusThreshold=50;var b=a.defaultState;return b.transitionEasing=sinOut,a.itemReaderText="{category}: {value.percent.formatNumber('#.#p')}",a.applyTheme(),a}return o.prototype.createSlice=function(){return new Sprite},o.prototype.createTick=function(){return new Tick},o.prototype.createLabel=function(){return new Label},Object.defineProperty(o.prototype,"slices",{get:function(){if(!this._slices){var a=this.createSlice();a.applyOnClones=!0,this._disposers.push(a),this.initSlice(a),this._slices=new ListTemplate(a),this._disposers.push(new ListDisposer(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ticks",{get:function(){if(!this._ticks){var a=this.createTick();a.applyOnClones=!0,this._disposers.push(a),this.initTick(a),this._ticks=new ListTemplate(a),this._disposers.push(new ListDisposer(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"labels",{get:function(){if(!this._labels){var a=this.createLabel();a.applyOnClones=!0,this._disposers.push(a),this.initLabel(a),this._labels=new ListTemplate(a),this._disposers.push(new ListDisposer(this._labels))}return this._labels},enumerable:!0,configurable:!0}),o.prototype.createDataItem=function(){return new PercentSeriesDataItem},o.prototype.initSlice=function(a){},o.prototype.initLabel=function(a){a.text="{category}: {value.percent.formatNumber('#.0p')}",a.isMeasured=!1,a.padding(5,5,5,5)},o.prototype.initTick=function(a){},o.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),e.prototype.validateDataItems.call(this)},o.prototype.validateDataElement=function(a){var c=a.slice;c&&(c.fill==null?this.patterns?(hasValue(c.stroke)||(c.stroke=this.colors.next()),c.fill=this.patterns.next(),hasValue(c.fillOpacity)&&(c.fill.backgroundOpacity=c.fillOpacity),c.stroke instanceof Color&&(c.fill.stroke=c.stroke,c.fill.fill=c.stroke)):c.fill=this.colors.next():this.colors.currentStep+=this.colors.step,c.stroke==null&&(c.stroke=c.fill)),e.prototype.validateDataElement.call(this,a),c&&a.bullets.each(function(d,g){g.fill==null&&(g.fill=c.fill),g.stroke==null&&(g.stroke=c.stroke)}),this.updateLegendValue(a)},o.prototype.validateData=function(){e.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},o.prototype.arrangeLabels=function(a){for(var c=0,d=a.length;c<d;c++){var g=a[c],b=g.label;if(b){b.invalid&&b.validate();var j=b.measuredHeight;b.visible||(j=0),b.pixelY-j/2<-this.maxHeight/2&&(b.y=-this.maxHeight/2+j/2);var $=this.getNextLabel(c+1,a),_e=b.pixelY+j/2;if($){$.invalid&&$.validate();var st=$.measuredHeight;$.visible||(st=0);var rt=$.pixelY;rt==null&&(rt=0),rt-st/2<_e&&($.y=_e+st/2)}}}},o.prototype.arrangeLabels2=function(a){for(var c=this.maxHeight/2,d=a.length-1;d>=0;d--){var g=a[d],b=g.label;if(b){b.invalid&&b.validate();var j=b.measuredHeight;b.visible||(j=0),b.pixelY+j/2>c&&(b.y=c-j/2,c=b.y-j/2)}}},o.prototype.getNextLabel=function(a,c){if(c.length>=a){var d=c[a];if(d)return d.label?d.visible?d.label:this.getNextLabel(a+1,c):this.getNextLabel(a+1,c)}},Object.defineProperty(o.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(a){this.setPropertyValue("colors",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(a){this.setPropertyValue("patterns",a,!0)},enumerable:!0,configurable:!0}),o.prototype.createLegendMarker=function(a,c){each(a.children.iterator(),function(d){var g=c.slice;d.defaultState.properties.fill=g.fill,d.defaultState.properties.stroke=g.stroke,d.defaultState.properties.fillOpacity=g.fillOpacity,d.defaultState.properties.strokeOpacity=g.strokeOpacity,d.fill=g.fill,d.stroke=g.stroke,d.fillOpacity=g.fillOpacity,d.strokeOpacity=g.strokeOpacity,d.fill==null&&(d.__disabled=!0);var b=a.dataItem;b.color=g.fill,b.colorOrig=g.fill,d.addDisposer(g.events.on("propertychanged",function(j){j.property=="fill"&&(d.__disabled=!1,d.isActive||(d.fill=g.fill),d.defaultState.properties.fill=g.fill,b.color=g.fill,b.colorOrig=g.fill),j.property=="stroke"&&(d.isActive||(d.stroke=g.stroke),d.defaultState.properties.stroke=g.stroke),j.property=="strokeOpacity"&&(d.isActive||(d.strokeOpacity=g.strokeOpacity),d.defaultState.properties.strokeOpacity=g.strokeOpacity)},void 0,!1))})},o.prototype.handleSliceScale=function(a){var c=this,d=a.target,g=d.dataItem;g&&g.bullets&&each(g.bullets.iterator(),function(b){var j=b[1];c.positionBullet(j)})},o.prototype.handleSliceMove=function(a){},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.slices.template.copyFrom(a.slices.template),this.labels.template.copyFrom(a.labels.template),this.ticks.template.copyFrom(a.ticks.template),this.colors=a.colors.clone()},Object.defineProperty(o.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(a){this.setAlignLabels(a)},enumerable:!0,configurable:!0}),o.prototype.setAlignLabels=function(a){this.setPropertyValue("alignLabels",a,!0)},Object.defineProperty(o.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(a){this.setPropertyValue("ignoreZeroValues",a,!0)},enumerable:!0,configurable:!0}),o.prototype.updateLegendValue=function(a){if(a){var c=a.legendDataItem,d=a.legendSettings;c&&d&&d&&(d.labelText&&(c.label.text=d.labelText),d.itemLabelText&&(c.label.text=d.itemLabelText),d.valueText&&(c.valueLabel.text=d.valueText),d.itemValueText&&(c.valueLabel.text=d.itemValueText))}},o}(Series);registry.registeredClasses.PercentSeries=PercentSeries;registry.registeredClasses.PercentSeriesDataItem=PercentSeriesDataItem;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,o){if(e instanceof PercentSeries){var a=e.states.create(o),c=e.labels.template.states.create(o);c.properties.disabled=!0;var d=e.ticks.template.states.create(o);return d.properties.disabled=!0,a}return null}});var PercentChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PercentChartDataItem",a.applyTheme(),a}return o}(SerialChartDataItem),PercentChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PercentChart",a.align="none",a.valign="none",a.chartContainer.minHeight=50,a.chartContainer.minWidth=50,a.applyTheme(),a}return o.prototype.validateData=function(){e.prototype.validateData.call(this),this.feedLegend()},o.prototype.feedLegend=function(){var a=this.legend;if(a){var c=[];each(this.series.iterator(),function(d){d.hiddenInLegend||each(d.dataItems.iterator(),function(g){g.hiddenInLegend||(c.push(g),g.legendSettings||(g.legendSettings=d.legendSettings))})}),a.data=c,a.dataFields.name="category"}},o.prototype.createSeries=function(){return new PercentSeries},o.prototype.setLegend=function(a){e.prototype.setLegend.call(this,a),a&&(a.labels.template.text="{category}",a.valueLabels.template.text="{value.percent.formatNumber('#.0p')}",a.itemContainers.template.events.on("over",function(c){var d=c.target.dataItem.dataContext;if(d.visible&&!d.isHiding){var g=d.slice;g.dispatchImmediately("over"),g.isHover=!0,g.interactions.isRealHover=!0}}),a.itemContainers.template.events.on("out",function(c){var d=c.target.dataItem.dataContext,g=d.slice;g.dispatchImmediately("out"),g.isHover=!1}))},o}(SerialChart);registry.registeredClasses.PercentChart=PercentChart;registry.registeredClasses.PercentChartDataItem=PercentChartDataItem;var PieTick=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._label=new MutableValueDisposer,a._slice=new MutableValueDisposer,a.className="PieTick",a.element=a.paper.add("polyline"),a._disposers.push(a._label),a._disposers.push(a._slice),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.slice,c=this.label,d=a.dataItem.component;if(a&&a.radius>0&&c&&c.text){var g=a.dx+a.slice.dx+a.pixelX+a.ix*a.radius*a.scale,b=a.dy+a.slice.dy+a.pixelY+a.iy*a.radiusY*a.scale,j=void 0,$=void 0,_e=void 0,st=void 0;if(d.alignLabels)j=c.pixelX-this.length,$=c.pixelY,_e=c.pixelX,st=$,c.horizontalCenter=="right"&&(j+=2*this.length,_e=j-this.length);else{var rt=c.pixelRadius(a.radius);j=g+rt*a.ix,$=b+rt*a.iy,_e=j,st=$}this.element.attr({points:[g,b,j,$,_e,st]})}},Object.defineProperty(o.prototype,"slice",{get:function(){return this._slice.get()},set:function(a){this._slice.set(a,new MultiDisposer([a.events.on("transformed",this.invalidate,this),a.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){return this._label.get()},set:function(a){this._label.set(a,a.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),o}(Tick);registry.registeredClasses.PieTick=PieTick;var PieSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieSeriesDataItem",a.values.radiusValue={},a.applyTheme(),a}return Object.defineProperty(o.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(a){this.setValue("radiusValue",a)},enumerable:!0,configurable:!0}),o.prototype.hide=function(a,c,d,g){return e.prototype.hide.call(this,a,c,0,["value","radiusValue"])},o.prototype.show=function(a,c,d){return e.prototype.show.call(this,a,c,["value","radiusValue"])},o}(PercentSeriesDataItem),PieSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieSeries",a.alignLabels=!0,a.layout="none",a.labels.template.radius=percent(5),a.addDisposer(a.labels.template.events.on("enabled",a.invalidate,a,!1)),a.applyTheme(),a}return o.prototype.createSlice=function(){return new Slice},o.prototype.createTick=function(){return new PieTick},o.prototype.createLabel=function(){return new AxisLabelCircular},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},o.prototype.createDataItem=function(){return new PieSeriesDataItem},o.prototype.initSlice=function(a){a.isMeasured=!1,a.defaultState.properties.scale=1,a.observe("scale",this.handleSliceScale,this),a.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),a.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var c=a.states.create("hover");c.properties.scale=1.05;var d=a.defaultState;d.properties.shiftRadius=0,a.togglable=!0,a.events.on("toggled",function(b){b.target.hideTooltip(),b.target.interactions.lastHitPointer&&b.target.interactions.lastHitPointer.touch&&!b.target.isActive&&(b.target.isHover=!1)});var g=a.states.create("active");g.properties.shiftRadius=.1},o.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=getArcRect(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var a=this.startIndex;a<this.endIndex;a++){var c=this.dataItems.getIndex(a),d=c.values.radiusValue.percent;d>this._maxRadiusPercent&&(this._maxRadiusPercent=d)}e.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort(function(g,b){var j=(g.slice.middleAngle+360)%360,$=(b.slice.middleAngle+360)%360;return j>270&&(j-=360),$>270&&($-=360),j<$?-1:j>$?1:0}),this._leftItems.sort(function(g,b){var j=(g.slice.middleAngle+360)%360,$=(b.slice.middleAngle+360)%360;return j<$?1:j>$?-1:0}),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},o.prototype.validateDataElement=function(a){if(this.pixelRadius>0){this.ignoreZeroValues&&(a.value==0||a.value==null)?a.__disabled=!0:a.__disabled=!1;var c=a.slice;if(c.radius=this.pixelRadius,isNumber$1(a.radiusValue)&&(c.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*a.values.radiusValue.percent/this._maxRadiusPercent),c.innerRadius instanceof Percent||(c.innerRadius=this.pixelInnerRadius),c.startAngle=this._currentStartAngle,c.arc=Math.abs(a.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var d=a.label,g=a.tick;g.slice=c,g.label=d;var b=(c.middleAngle+360)%360,j=void 0;if(this.alignLabels){var $=d.pixelRadius(c.radius),_e=g.length+$;d.dx=0,d.dy=0,d.verticalCenter="middle";var st=this._arcRect;b>270||b<=90?(_e+=(st.width+st.x)*this.pixelRadius,d.horizontalCenter="left",this._rightItems.push(a)):(_e-=st.x*this.pixelRadius,d.horizontalCenter="right",this._leftItems.push(a),_e*=-1);var rt=c.radius+g.length+$;j={x:_e,y:c.iy*rt},d.moveTo(j)}else{var ut=c.depth;isNumber$1(ut)||(ut=0),d.fixPosition(c.middleAngle,c.radius,c.radiusY,0,-ut)}}this._currentStartAngle+=c.arc,e.prototype.validateDataElement.call(this,a)}},Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(a){this._pixelRadius!=a&&(this._pixelRadius=a,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(a){this._pixelInnerRadius!=a&&(this._pixelInnerRadius=a,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startAngle",{get:function(){var a=this.getPropertyValue("startAngle");return isNumber$1(a)?a:this._startAngleInternal},set:function(a){this.setPropertyValue("startAngle",normalizeAngle(a),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){var a=this.getPropertyValue("endAngle");return isNumber$1(a)?a:this._endAngleInternal},set:function(a){this.setPropertyValue("endAngle",a,!0)},enumerable:!0,configurable:!0}),o.prototype.positionBullet=function(a){e.prototype.positionBullet.call(this,a);var c=a.dataItem,d=c.slice,g=a.locationX;isNumber$1(g)||(g=.5);var b=a.locationY;isNumber$1(b)||(b=1);var j=d.startAngle+d.arc*g;a.x=b*d.radius*cos(j),a.y=b*d.radiusY*sin(j)},o.prototype.handleSliceMove=function(a){if(!this.alignLabels){var c=a.target,d=c.dataItem;if(d){var g=d.label;g&&(g.dx=g.fdx+c.dx+c.pixelX,g.dy=g.fdy+c.dy+c.pixelY)}}},Object.defineProperty(o.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var a=this.chart;return a?getArcRect(a.startAngle,a.endAngle,this.pixelRadius):getArcRect(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),o}(PercentSeries);registry.registeredClasses.PieSeries=PieSeries;registry.registeredClasses.PieSeriesDataItem=PieSeriesDataItem;var PieChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieChartDataItem",a.applyTheme(),a}return o}(PercentChartDataItem),PieChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="PieChart",a.innerRadius=0,a.radius=percent(80),a.align="none",a.valign="none",a.startAngle=-90,a.endAngle=270;var c=a.seriesContainer;return c.isMeasured=!0,c.valign="middle",c.align="center",c.layout="absolute",c.width=void 0,c.height=void 0,a.chartContainer.minHeight=50,a.chartContainer.minWidth=50,a.chartContainer.events.on("maxsizechanged",a.updateRadius,a,!1),a._disposers.push(a.seriesContainer.events.on("positionchanged",function(){a.bulletsContainer.x=a.seriesContainer.x,a.bulletsContainer.y=a.seriesContainer.y})),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},o.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.updateRadius()},o.prototype.handleSeriesAdded=function(a){e.prototype.handleSeriesAdded.call(this,a),this._chartPixelRadius=void 0,this.updateSeriesAngles()},o.prototype.updateSeriesAngles=function(){var a=this;this.series.each(function(c){c._startAngleInternal=a.startAngle,c._endAngleInternal=a.endAngle})},o.prototype.updateRadius=function(){var a=this.chartContainer,c=getArcRect(this.startAngle,this.endAngle,1),d={x:0,y:0,width:0,height:0},g=this.innerRadius;g instanceof Percent&&(d=getArcRect(this.startAngle,this.endAngle,g.value)),c=getCommonRectangle([c,d]);var b=Math.min(a.innerWidth/c.width,a.innerHeight/c.height);isNumber$1(b)||(b=0);var j=relativeRadiusToValue(this.radius,b),$=relativeRadiusToValue(this.innerRadius,b),_e=(j-$)/this.series.length;(j!=this._chartPixelRadius||$!=this._chartPixelInnerRadius)&&(this._chartPixelRadius=j,this._chartPixelInnerRadius=$,each(indexed(this.series.iterator()),function(st){var rt=st[0],ut=st[1],gt=$+relativeRadiusToValue(ut.radius,j-$),yt=$+relativeRadiusToValue(ut.innerRadius,j-$);isNumber$1(gt)||(gt=$+_e*(rt+1)),isNumber$1(yt)||(yt=$+_e*rt),ut.pixelRadius=gt,ut.pixelInnerRadius=yt}),this.seriesContainer.definedBBox={x:j*c.x,y:j*c.y,width:j*c.width,height:j*c.height},this.seriesContainer.invalidateLayout())},Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),o.prototype.createSeries=function(){return new PieSeries},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),o}(PercentChart);registry.registeredClasses.PieChart=PieChart;registry.registeredClasses.PieChartDataItem=PieChartDataItem;var PieSeries3DDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieSeries3DDataItem",a.values.depthValue={},a.applyTheme(),a}return Object.defineProperty(o.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(a){this.setValue("depthValue",a)},enumerable:!0,configurable:!0}),o}(PieSeriesDataItem),PieSeries3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieSeries3D",a.applyTheme(),a}return o.prototype.createDataItem=function(){return new PieSeries3DDataItem},o.prototype.createSlice=function(){return new Slice3D},o.prototype.validateDataElement=function(a){var c=a.slice,d=this.depth;isNumber$1(d)||(d=this.chart.depth);var g=a.values.depthValue.percent;isNumber$1(g)||(g=100),c.depth=g*d/100;var b=this.angle;isNumber$1(b)||(b=this.chart.angle),c.angle=b,e.prototype.validateDataElement.call(this,a)},o.prototype.validate=function(){e.prototype.validate.call(this);for(var a=this._workingStartIndex;a<this._workingEndIndex;a++){var c=this.dataItems.getIndex(a),d=c.slice,g=d.startAngle;g>=-90&&g<90?d.toFront():g>=90&&d.toBack()}},Object.defineProperty(o.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(a){this.setPropertyValue("depth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(a){this.setPropertyValue("angle",a)},enumerable:!0,configurable:!0}),o.prototype.positionBullet=function(a){e.prototype.positionBullet.call(this,a);var c=a.dataItem,d=c.slice;a.y=a.pixelY-d.depth},o}(PieSeries);registry.registeredClasses.PieSeries3D=PieSeries3D;registry.registeredClasses.PieSeries3DDataItem=PieSeries3DDataItem;(function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieChart3DDataItem",a.applyTheme(),a}return o})(PieChartDataItem);var PieChart3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PieChart3D",a.depth=20,a.angle=10,a.applyTheme(),a}return Object.defineProperty(o.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(a){this.setPropertyValue("depth",a)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(a){a=fitToRange(a,0,90),this.setPropertyValue("angle",a)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),o.prototype.createSeries=function(){return new PieSeries3D},o}(PieChart);registry.registeredClasses.PieChart3D=PieChart3D;var SlicedChartDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SlicedChartDataItem",a.applyTheme(),a}return o}(PercentChartDataItem),SlicedChart=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SlicedChart",a.seriesContainer.layout="horizontal",a.padding(15,15,15,15),a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},o.prototype.validate=function(){e.prototype.validate.call(this)},o}(PercentChart);registry.registeredClasses.SlicedChart=SlicedChart;registry.registeredClasses.SlicedChartDataItem=SlicedChartDataItem;var FlowDiagramNode=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.legendSettings=new LegendSettings,a.className="FlowDiagramNode",a.isMeasured=!1,new InterfaceColorSet,a.draggable=!0,a.inert=!0,a.setStateOnChildren=!0,a.events.on("positionchanged",a.invalidateLinks,a,!1),a.events.on("sizechanged",a.invalidateLinks,a,!1),a}return o.prototype.handleHit=function(a){this.isHidden||this.isHiding?this.show():this.hide()},o.prototype.show=function(a){var c=e.prototype.show.call(this,a);return this.outgoingDataItems.each(function(d){(!d.toNode||d.toNode&&!d.toNode.isHidden)&&(d.setWorkingValue("value",d.getValue("value"),a),d.link.show())}),this.incomingDataItems.each(function(d){(!d.fromNode||d.fromNode&&!d.fromNode.isHidden)&&(d.setWorkingValue("value",d.getValue("value"),a),d.link.show())}),c},o.prototype.hide=function(a){var c=e.prototype.hide.call(this,a);return this.outgoingDataItems.each(function(d){d.setWorkingValue("value",0,a),d.link.hide()}),this.incomingDataItems.each(function(d){d.setWorkingValue("value",0,a),d.link.hide()}),c},o.prototype.validate=function(){this.isDisposed()||(e.prototype.validate.call(this),this.invalidateLinks())},o.prototype.invalidateLinks=function(){var a=this;this.outgoingDataItems.each(function(c){var d=c.link;if(d.colorMode=="fromNode"&&(d.fill=d.dataItem.fromNode.color),d.colorMode=="gradient"){d.fill=d.gradient,d.stroke=d.gradient;var g=d.gradient.stops.getIndex(0);g&&(g.color=a.color,d.gradient.validate())}}),this.incomingDataItems.each(function(c){var d=c.link;if(d.colorMode=="toNode"&&(d.fill=d.dataItem.toNode.color),d.colorMode=="gradient"){d.fill=d.gradient,d.stroke=d.gradient;var g=d.gradient.stops.getIndex(1);g&&(g.color=a.color,d.gradient.validate())}})},Object.defineProperty(o.prototype,"incomingDataItems",{get:function(){var a=this;if(!this._incomingDataItems){var c=new List;c.events.on("inserted",function(){a.chart.sortBy=="name"?a._incomingSorted=sort(a._incomingDataItems.iterator(),function(d,g){return order$1(d.fromName,g.fromName)}):a.chart.sortBy=="value"?a._incomingSorted=sort(a._incomingDataItems.iterator(),function(d,g){return reverse(order(d.value,g.value))}):a._incomingSorted=a._incomingDataItems.iterator()},void 0,!1),this._incomingDataItems=c}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"outgoingDataItems",{get:function(){var a=this;if(!this._outgoingDataItems){var c=new List;c.events.on("inserted",function(){a.chart.sortBy=="name"?a._outgoingSorted=sort(a._outgoingDataItems.iterator(),function(d,g){return order$1(d.fromName,g.fromName)}):a.chart.sortBy=="value"?a._outgoingSorted=sort(a._outgoingDataItems.iterator(),function(d,g){return reverse(order(d.value,g.value))}):a._outgoingSorted=a._outgoingDataItems.iterator()},void 0,!1),this._outgoingDataItems=c}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(a){this.setPropertyValue("name",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(a){this.setPropertyValue("total",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(a){this.setPropertyValue("totalIncoming",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(a){this.setPropertyValue("totalOutgoing",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(a){this.setColorProperty("color",a),this._background&&(this._background.fill=a),this.fill=a},enumerable:!0,configurable:!0}),o.prototype.createLegendMarker=function(a){var c=a.pixelWidth,d=a.pixelHeight;a.removeChildren();var g=a.createChild(RoundedRectangle);g.shouldClone=!1,copyProperties$1(this,g,visualProperties),g.stroke=this.fill,g.copyFrom(this),g.padding(0,0,0,0),g.width=c,g.height=d;var b=a.dataItem;b.color=g.fill,b.colorOrig=g.fill},Object.defineProperty(o.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(a){this._legendDataItem=a,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.FlowDiagramNode=FlowDiagramNode;var FlowDiagramLink=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="FlowDiagramLink";var c=new InterfaceColorSet;return a.maskBullets=!1,a.colorMode="fromNode",a.layout="none",a.isMeasured=!1,a.startAngle=0,a.endAngle=0,a.strokeOpacity=0,a.verticalCenter="none",a.horizontalCenter="none",a.tooltipText="{fromName}→{toName}:{value.value}",a.tooltipLocation=.5,a.link=a.createChild(Sprite),a.link.shouldClone=!1,a.link.setElement(a.paper.add("path")),a.link.isMeasured=!1,a.fillOpacity=.2,a.fill=c.getFor("alternativeBackground"),a.applyTheme(),a}return o.prototype.positionBullets=function(){var a=this;each(this.bullets.iterator(),function(c){c.parent=a.bulletsContainer,c.maxWidth=a.maxWidth,c.maxHeight=a.maxHeight,a.positionBullet(c)})},Object.defineProperty(o.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var a=this.createChild(Container);a.shouldClone=!1,a.layout="none",this._bulletsContainer=a}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var a=this.createChild(Sprite);a.shouldClone=!1,a.setElement(this.paper.add("path")),a.isMeasured=!1,this._bulletsMask=a}return this._bulletsMask},enumerable:!0,configurable:!0}),o.prototype.positionBullet=function(a){var c=a.locationX;isNumber$1(c)||(c=a.locationY),isNumber$1(c)||(c=.5);var d=this.middleLine.positionToPoint(c);a.moveTo(d);var g=a.propertyFields.rotation,b;if(a.dataItem){var j=a.dataItem.dataContext;b=j[g]}isNumber$1(b)||(b=d.angle),a.rotation=b},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(a){if(a=="gradient"){var c=this.fill;this.gradient.stops.clear(),c instanceof Color&&(this.gradient.addColor(c),this.gradient.addColor(c)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(a){this.setPropertyValue("maskBullets",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(a){this.setPropertyValue("tooltipLocation",a,!0)},enumerable:!0,configurable:!0}),o.prototype.setFill=function(a){e.prototype.setFill.call(this,a);var c=this._gradient;c&&a instanceof Color&&(c.stops.clear(),c.addColor(a),c.addColor(a))},o.prototype.measureElement=function(){},Object.defineProperty(o.prototype,"bullets",{get:function(){var a=this;return this._bullets||(this._bullets=new ListTemplate(new Bullet),this._disposers.push(new ListDisposer(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",function(c){c.newValue.events.on("propertychanged",function(d){(d.property=="locationX"||d.property=="locationY")&&a.positionBullet(d.target)},void 0,!1)},void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.bullets.copyFrom(a.bullets);var c=this.middleLine;c&&(c instanceof Line&&a.middleLine instanceof Line&&c.copyFrom(a.middleLine),c instanceof Polyline&&a.middleLine instanceof Polyline&&c.copyFrom(a.middleLine)),this.link.copyFrom(a.link)},o.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},o.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(o.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new LinearGradient),this._gradient},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.FlowDiagramLink=FlowDiagramLink;var FlowDiagramDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="FlowDiagramDataItem",a.values.value={},a.applyTheme(),a}return Object.defineProperty(o.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(a){this.setProperty("fromName",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"toName",{get:function(){return this.properties.toName},set:function(a){this.setProperty("toName",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){return this.properties.color},set:function(a){this.setProperty("color",toColor(a))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this.values.value.value},set:function(a){this.setValue("value",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"link",{get:function(){var a=this;if(!this._link){var c=this.component.links.create();this._link=c,this.addSprite(c),this._disposers.push(new Disposer(function(){a.component&&a.component.links.removeValue(c)}))}return this._link},enumerable:!0,configurable:!0}),o}(ChartDataItem),FlowDiagram=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.colors=new ColorSet,a.className="FlowDiagram",a.nodePadding=20,a.sortBy="none",a.sequencedInterpolation=!0,a.colors.step=2,a.minNodeSize=.02;var c=a.chartContainer.createChild(Container);c.shouldClone=!1,c.layout="none",c.isMeasured=!1,a.linksContainer=c;var d=a.chartContainer.createChild(Container);return d.shouldClone=!1,d.layout="none",d.isMeasured=!1,a.nodesContainer=d,a.dataItem=a.createDataItem(),a.dataItem.component=a,a.applyTheme(),a}return o.prototype.dispose=function(){e.prototype.dispose.call(this),this.dataItem.dispose()},o.prototype.validateData=function(){var a=this;this._parseDataFrom==0&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),e.prototype.validateData.call(this);var c=0,d=0,g,b;each(this.dataItems.iterator(),function($){var _e=$.fromName;if(_e){var st=a.nodes.getKey(_e);st||(st=a.nodes.create(_e),st.name=_e,st.chart=a,st.dataItem=$),$.fromNode=st,$.fromNode.outgoingDataItems.push($)}var rt=$.toName;if(rt){var st=a.nodes.getKey(rt);st||(st=a.nodes.create(rt),st.name=rt,st.chart=a,st.dataItem=$),$.toNode=st,$.toNode.incomingDataItems.push($)}if(!$.fromNode){var ut=new LinearGradientModifier;ut.opacities=[0,1],$.link.strokeModifier=ut}if(!$.toNode){var gt=new LinearGradientModifier;gt.opacities=[1,0],$.link.strokeModifier=gt}var yt=$.value;isNumber$1(yt)&&(c+=yt,d++,(g>yt||!isNumber$1(g))&&(g=yt),(b<yt||!isNumber$1(b))&&(b=yt))});var j="value";this.dataItem.setCalculatedValue(j,b,"high"),this.dataItem.setCalculatedValue(j,g,"low"),this.dataItem.setCalculatedValue(j,c,"sum"),this.dataItem.setCalculatedValue(j,c/d,"average"),this.dataItem.setCalculatedValue(j,d,"count"),each(this.nodes.iterator(),function($){var _e=$[1];_e.fill instanceof Color&&(_e.color=_e.fill),_e.color==null&&(_e.color=a.colors.next()),_e.dataItem.color!=null&&(_e.color=_e.dataItem.color),_e.dataItem.visible||_e.hide(0),a.getNodeValue(_e)}),this.sortNodes(),this.feedLegend()},o.prototype.handleDataItemWorkingValueChange=function(a,c){this.invalidate()},o.prototype.sortNodes=function(){this.sortBy=="name"?this._sorted=this.nodes.sortedIterator():this.sortBy=="value"?this._sorted=sort(this.nodes.iterator(),function(a,c){return reverse(order(a[1].total,c[1].total))}):this._sorted=this.nodes.iterator()},o.prototype.getNodeValue=function(a){var c=0,d=0;each(a.incomingDataItems.iterator(),function(g){var b=g.getWorkingValue("value");isNumber$1(b)&&(c+=b)}),each(a.outgoingDataItems.iterator(),function(g){var b=g.getWorkingValue("value");isNumber$1(b)&&(d+=b)}),a.total=c+d,a.totalIncoming=c,a.totalOutgoing=d},o.prototype.changeSorting=function(){this.sortNodes()},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},o.prototype.createDataItem=function(){return new FlowDiagramDataItem},Object.defineProperty(o.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(a){this.setPropertyValue("nodePadding",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(a){this.setPropertyValue("sortBy",a),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(a){this.setPropertyValue("minNodeSize",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nodes",{get:function(){if(!this._nodes){var a=this.createNode();a.events.on("hit",function(c){c.target.handleHit(c)}),this._nodes=new DictionaryTemplate(a),this._disposers.push(new DictionaryDisposer(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),o.prototype.createNode=function(){var a=new FlowDiagramNode;return this._disposers.push(a),a},Object.defineProperty(o.prototype,"links",{get:function(){return this._links||(this._links=new ListTemplate(this.createLink()),this._disposers.push(new ListDisposer(this._links))),this._links},enumerable:!0,configurable:!0}),o.prototype.createLink=function(){var a=new FlowDiagramLink;return this._disposers.push(a),a},o.prototype.feedLegend=function(){var a=this.legend;if(a){var c=[];this.nodes.each(function(d,g){c.push(g)}),a.data=c,a.dataFields.name="name"}},o.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.nodes.clear()},o}(Chart);registry.registeredClasses.FlowDiagram=FlowDiagram;var LabelBullet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="LabelBullet";var c=a.createChild(Label);return c.shouldClone=!1,c.verticalCenter="middle",c.horizontalCenter="middle",c.truncate=!0,c.hideOversized=!1,c.maxWidth=500,c.maxHeight=500,c.stroke=color(),c.strokeOpacity=0,c.fill=new InterfaceColorSet().getFor("text"),a.events.on("maxsizechanged",a.handleMaxSize,a,!1),a.label=c,a.applyTheme(),a}return o.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.label.copyFrom(a.label)},o}(Bullet);registry.registeredClasses.LabelBullet=LabelBullet;var SankeyNode=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.nextInCoord=0,a.nextOutCoord=0,a.className="SankeyNode",a.width=10,a.height=10;var c=a.createChild(LabelBullet);c.shouldClone=!1,c.locationX=1,c.locationY=.5,c.label.text="{name}",c.width=150,c.height=150,c.label.horizontalCenter="left",c.label.padding(0,5,0,5),a.nameLabel=c;var d=a.createChild(LabelBullet);d.shouldClone=!1,d.label.hideOversized=!1,d.locationX=.5,d.locationY=.5,d.width=150,d.height=150,d.label.horizontalCenter="middle",a.valueLabel=d;var g=a.hiddenState;return g.properties.fill=new InterfaceColorSet().getFor("disabledBackground"),g.properties.opacity=.5,g.properties.visible=!0,a.background.hiddenState.copyFrom(g),a}return o.prototype.invalidateLinks=function(){var a=this;e.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var c=this.chart;if(c){var d=c.orientation;this._incomingSorted&&each(this._incomingSorted,function(g){var b=g.link,j=g.getWorkingValue("value");if(isNumber$1(j)){b.parent=a.chart.linksContainer;var $=void 0,_e=void 0,st=void 0;if(d=="horizontal"?($=a.pixelX+a.dx,_e=a.nextInCoord+a.pixelY+a.dy,st=0):(_e=a.pixelY+a.dy,$=a.nextInCoord+a.pixelX+a.dx,st=90),b.endX=$,b.endY=_e,b.startAngle=st,b.endAngle=st,b.gradient.rotation=st,b.linkWidth=j*c.valueHeight,!g.fromNode){d=="horizontal"?(b.maxWidth=200,b.startX=a.pixelX+a.dx-b.maxWidth,b.startY=b.endY):(b.maxHeight=200,b.startX=b.endX,b.startY=a.pixelY+a.dy-b.maxHeight),b.gradient,b.fill=g.toNode.color;var rt=b.gradient.stops.getIndex(0);rt&&(b.colorMode=="gradient"&&(rt.color=a.color),rt.opacity=0,b.fill=b.gradient,b.stroke=b.gradient,b.gradient.validate())}a.nextInCoord+=b.linkWidth}}),this._outgoingSorted&&each(this._outgoingSorted,function(g){var b=g.link;b.parent=a.chart.linksContainer;var j=g.getWorkingValue("value");if(isNumber$1(j)){var $=void 0,_e=void 0,st=void 0;if(d=="horizontal"?(st=0,$=a.pixelX+a.pixelWidth+a.dx-1,_e=a.nextOutCoord+a.pixelY+a.dy):(st=90,$=a.nextOutCoord+a.pixelX+a.dx,_e=a.pixelY+a.pixelHeight+a.dy-1),b.startX=$,b.startY=_e,b.startAngle=st,b.endAngle=st,b.gradient.rotation=st,b.linkWidth=j*a.chart.valueHeight,!g.toNode){d=="horizontal"?(b.maxWidth=200,b.endX=a.pixelX+b.maxWidth+a.dx,b.endY=b.startY):(b.maxHeight=200,b.endX=b.startX,b.endY=a.pixelY+b.maxHeight+a.dy),b.opacity=a.opacity;var rt=b.gradient.stops.getIndex(1);rt&&(b.colorMode=="gradient"&&(rt.color=a.color),rt.opacity=0,b.fill=b.gradient,b.stroke=b.gradient,b.gradient.validate())}a.nextOutCoord+=b.linkWidth}})}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},o.prototype.positionBullet=function(a){a&&(a.x=this.measuredWidth*a.locationX,a.y=this.measuredHeight*a.locationY)},Object.defineProperty(o.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(a){this.setPropertyValue("level",a,!0)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.nameLabel.copyFrom(a.nameLabel),this.valueLabel.copyFrom(a.valueLabel)},o}(FlowDiagramNode);registry.registeredClasses.SankeyNode=SankeyNode;var SankeyLink=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SankeyLink",new InterfaceColorSet,a.tension=.8,a.controlPointDistance=.2,a.startAngle=0,a.endAngle=0,a.linkWidth=0,a.startX=0,a.endX=0,a.startY=0,a.endY=0,a.middleLine=a.createChild(Polyspline),a.middleLine.shouldClone=!1,a.middleLine.strokeOpacity=0,a.applyTheme(),a}return o.prototype.makeBackwards=function(){this.states.getKey("backwards")!=null&&this.setState("backwards")},o.prototype.validate=function(){var a,c,d,g;if(e.prototype.validate.call(this),!this.isTemplate){var b=this.startX,j=this.startY,$=this.endX,_e=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var st=this.dataItem.component;st&&(st.orientation=="horizontal"?$<b&&(a=__read([$,b],2),b=a[0],$=a[1],c=__read([_e,j],2),j=c[0],_e=c[1],this.makeBackwards()):_e<j&&(d=__read([_e,j],2),j=d[0],_e=d[1],g=__read([$,b],2),b=g[0],$=g[1],this.makeBackwards()))}isNumber$1($)||($=b),isNumber$1(_e)||(_e=j);var rt=this.startAngle,ut=this.endAngle,gt=this.linkWidth,yt="",wt=b,Ct=j,Pt=$,At=_e,Tt=b+gt*sin(rt),kt=$+gt*sin(ut),It=j+gt*cos(rt),Lt=_e+gt*cos(ut),Ft=b+gt/2*sin(rt),Nt=$+gt/2*sin(ut),Ht=j+gt/2*cos(rt),dr=_e+gt/2*cos(ut);this.zIndex=this.zIndex||this.dataItem.index;var hs=this.tension+(1-this.tension)*sin(rt),us=this.tension+(1-this.tension)*cos(rt);if(this.middleLine.tensionX=hs,this.middleLine.tensionY=us,isNumber$1(gt)&&isNumber$1(b)&&isNumber$1($)&&isNumber$1(j)&&isNumber$1(_e)){round$1(wt,3)==round$1(Pt,3)&&(Pt+=.01),round$1(Ct,3)==round$1(At,3)&&(At+=.01),round$1(Tt,3)==round$1(kt,3)&&(kt+=.01),round$1(It,3)==round$1(Lt,3)&&(Lt+=.01);var hn=Math.min(Tt,kt,wt,Pt),un=Math.min(It,Lt,Ct,At),bo=Math.max(Tt,kt,wt,Pt),_s=Math.max(It,Lt,Ct,At);this._bbox={x:hn,y:un,width:bo-hn,height:_s-un};var gn=this.controlPointDistance,Gr=wt+(Pt-wt)*gn*cos(rt),ds=Ct+(At-Ct)*gn*sin(rt),Zn=Pt-(Pt-wt)*gn*cos(ut),Nn=At-(At-Ct)*gn*sin(ut),Qn=Ft+(Nt-Ft)*gn*cos(rt),bu=Ht+(dr-Ht)*gn*sin(rt),ou=Nt-(Nt-Ft)*gn*cos(ut),g0=dr-(dr-Ht)*gn*sin(ut),Su=getAngle({x:Gr,y:ds},{x:Zn,y:Nn}),l1=(gt/cos(Su)-gt)/tan(Su)*cos(rt),B0=(gt/sin(Su)-gt)*tan(Su)*sin(rt),a1=-l1/2+Tt+(kt-Tt)*gn*cos(rt),q1=-B0/2+It+(Lt-It)*gn*sin(rt),ox=-l1/2+kt-(kt-Tt)*gn*cos(ut),U_=-B0/2+Lt-(Lt-It)*gn*sin(ut);dr==Ht&&(dr+=.01),this.middleLine.segments=[[{x:Ft,y:Ht},{x:Qn,y:bu},{x:ou,y:g0},{x:Nt,y:dr}]],Gr+=l1/2,ds+=B0/2,Zn+=l1/2,Nn+=B0/2,yt+=moveTo({x:wt,y:Ct}),yt+=new Tension(hs,us).smooth([{x:wt,y:Ct},{x:Gr,y:ds},{x:Zn,y:Nn},{x:Pt,y:At}]),yt+=lineTo({x:kt,y:Lt}),yt+=new Tension(hs,us).smooth([{x:kt,y:Lt},{x:ox,y:U_},{x:a1,y:q1},{x:Tt,y:It}]),yt+=closePath()}this.link.path=yt,this.maskBullets&&(this.bulletsMask.path=yt,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(o.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(a){this.setPropertyValue("startX",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(a){this.setPropertyValue("endX",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(a){this.setPropertyValue("startY",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(a){this.setPropertyValue("endY",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(a){this.setPropertyValue("linkWidth",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(a){this.setPropertyValue("controlPointDistance",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(a){this.setPropertyValue("tension",a,!0)},enumerable:!0,configurable:!0}),o}(FlowDiagramLink);registry.registeredClasses.SankeyLink=SankeyLink;var SankeyDiagramDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SankeyDiagramDataItem",a.applyTheme(),a}return o}(FlowDiagramDataItem),SankeyDiagram=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="SankeyDiagram",a.orientation="horizontal",a.nodeAlign="middle",a.nodesContainer.width=percent(100),a.nodesContainer.height=percent(100),a.linksContainer.width=percent(100),a.linksContainer.height=percent(100),a.applyTheme(),a}return o.prototype.validateData=function(){var a=this;this._valueHeight=void 0,e.prototype.validateData.call(this),this._levelCount=0,this.nodes.each(function(c,d){d.level=void 0}),this.nodes.each(function(c,d){d.level=a.getNodeLevel(d,0),a._levelCount=max$1(a._levelCount,d.level)})},o.prototype.getNodeLevel=function(a,c){var d=this,g=[c];return each(a.incomingDataItems.iterator(),function(b){b.fromNode&&(isNumber$1(b.fromNode.level)?g.push(b.fromNode.level+1):(d._counter=0,d.checkLoop(b.fromNode),d._counter<d.dataItems.length&&g.push(d.getNodeLevel(b.fromNode,c+1))))}),Math.max.apply(Math,__spread(g))},o.prototype.checkLoop=function(a){var c=this;this._counter++,!(this._counter>this.dataItems.length)&&each(a.incomingDataItems.iterator(),function(d){c.checkLoop(d.fromNode)})},o.prototype.calculateValueHeight=function(){var a=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var c=this.dataItem.values.value.sum;each(this._sorted,function(rt){var ut=rt[1];a.getNodeValue(ut)}),this.nodes.each(function(rt,ut){var gt=ut.level,yt=Math.max(ut.totalIncoming,ut.totalOutgoing);yt/c<a.minNodeSize&&(yt=c*a.minNodeSize),isNumber$1(a._levelSum[gt])?a._levelSum[gt]+=yt:a._levelSum[gt]=yt,isNumber$1(a._levelNodesCount[gt])?a._levelNodesCount[gt]++:a._levelNodesCount[gt]=1});var d;this.orientation=="horizontal"?d=this.chartContainer.maxHeight-1:d=this.chartContainer.maxWidth-1;var g,b;each$1(this._levelSum,function(rt,ut){var gt=ut,yt=a._levelNodesCount[rt],wt=(d-(yt-1)*a.nodePadding)/gt;wt==1/0&&(wt=0),(b>wt||!isNumber$1(b))&&(b=wt,a.maxSum=gt,g=toNumber(rt))}),this._maxSumLevel=g;var j=this._levelNodesCount[this._maxSumLevel],$=(d-(j-1)*this.nodePadding)/this.maxSum;if($==1/0&&($=0),!isNumber$1(this.valueHeight))this.valueHeight=$;else{var _e=void 0;try{_e=this._heightAnimation.animationOptions[0].to}catch{}if(_e!=$){var st=this.interpolationDuration;try{st=this.nodes.template.states.getKey("active").transitionDuration}catch{}this._heightAnimation=new Animation(this,{property:"valueHeight",from:this.valueHeight,to:$},st,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}},o.prototype.validate=function(){var a=this;e.prototype.validate.call(this),this.calculateValueHeight();var c=this.nodesContainer,d={},g=this._levelNodesCount[this._maxSumLevel],b=this.dataItem.values.value.sum,j;this.orientation=="horizontal"?j=this.chartContainer.maxHeight-1:j=this.chartContainer.maxWidth-1,each(this._sorted,function($){var _e=$[1],st=_e.level,rt=0,ut=a._levelNodesCount[st];switch(a.nodeAlign){case"bottom":rt=(a.maxSum-a._levelSum[st])*a.valueHeight-(ut-g)*a.nodePadding;break;case"middle":rt=(a.maxSum-a._levelSum[st])*a.valueHeight/2-(ut-g)*a.nodePadding/2;break}if(a.maxSum==0)switch(a.nodeAlign){case"bottom":rt=j-ut*(a.minNodeSize*j+a.nodePadding);break;case"middle":rt=j/2-ut/2*(a.minNodeSize*j+a.nodePadding);break}_e.parent=c;var gt,yt,wt,Ct=Math.max(_e.totalIncoming,_e.totalOutgoing);if(Ct/b<a.minNodeSize&&(Ct=b*a.minNodeSize),a.orientation=="horizontal"){gt=(a.innerWidth-_e.pixelWidth)/a._levelCount,yt=gt*_e.level,wt=d[st]||rt;var Pt=Ct*a.valueHeight;b==0&&Pt==0&&(Pt=a.minNodeSize*j),_e.height=Pt,_e.minX=yt,_e.maxX=yt,d[st]=wt+Pt+a.nodePadding}else{gt=(a.innerHeight-_e.pixelHeight)/a._levelCount,yt=d[st]||rt,wt=gt*_e.level;var At=Ct*a.valueHeight;b==0&&At==0&&(At=a.minNodeSize*j),_e.width=At,_e.minY=wt,_e.maxY=wt,d[st]=yt+At+a.nodePadding}_e.x=yt,_e.y=wt})},o.prototype.showReal=function(a){var c=this;if(!this.preventShow){if(this.interpolationDuration>0){var d=this.nodesContainer,g=0;each(this.links.iterator(),function(b){b.hide(0)}),each(this._sorted,function(b){var j=b[1],$;c.orientation=="horizontal"?(j.dx=-(d.pixelWidth-j.pixelWidth)/Math.max(c._levelCount,1),$="dx"):(j.dy=-(d.pixelHeight-j.pixelHeight)/Math.max(c._levelCount,1),$="dy");var _e=0,st=c.interpolationDuration;c.sequencedInterpolation&&(_e=c.sequencedInterpolationDelay*g+st*g/length(c.nodes.iterator())),j.opacity=0,j.invalidateLinks(),j.animate([{property:"opacity",from:0,to:1},{property:$,to:0}],c.interpolationDuration,c.interpolationEasing).delay(_e),each(j.outgoingDataItems.iterator(),function(rt){var ut=rt.link.show(c.interpolationDuration);ut&&!ut.isFinished()&&ut.delay(_e)}),each(j.incomingDataItems.iterator(),function(rt){if(!rt.fromNode){var ut=rt.link.show(c.interpolationDuration);ut&&!ut.isFinished()&&ut.delay(_e)}}),g++})}return e.prototype.showReal.call(this)}},o.prototype.changeSorting=function(){var a=this;this.sortNodes();var c={};each(this._sorted,function(d){var g=d[1],b=g.level,j=(a.maxSum-a._levelSum[b])*a.valueHeight/2,$,_e;a.orientation=="horizontal"?($="y",_e=g.pixelHeight):($="x",_e=g.pixelWidth),g.animate({property:$,to:c[b]||j},a.interpolationDuration,a.interpolationEasing),c[b]=(c[b]||j)+_e+a.nodePadding,g.invalidateLinks()})},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},o.prototype.createDataItem=function(){return new SankeyDiagramDataItem},Object.defineProperty(o.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(a){this.setPropertyValue("nodeAlign",a),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a,!0);var c=this.nodes.template.nameLabel;a=="vertical"?(this.nodes.template.width=void 0,c.label.horizontalCenter="middle",c.locationX=.5):(this.nodes.template.height=void 0,c.label.horizontalCenter="left",c.locationX=1)},enumerable:!0,configurable:!0}),o.prototype.createNode=function(){var a=new SankeyNode;return this._disposers.push(a),a},o.prototype.createLink=function(){var a=new SankeyLink;return this._disposers.push(a),a},Object.defineProperty(o.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(a){a!=this._valueHeight&&(this._valueHeight=a,this.invalidate())},enumerable:!0,configurable:!0}),o.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},o}(FlowDiagram);registry.registeredClasses.SankeyDiagram=SankeyDiagram;var ChordNode=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="ChordNode";var c=a.createChild(AxisLabelCircular);c.location=.5,c.radius=5,c.text="{name}",c.zIndex=1,c.shouldClone=!1,a.label=c,a.layout="none",a.events.on("positionchanged",a.updateRotation,a,!1),a.isMeasured=!1,a.slice=a.createChild(Slice),a.slice.isMeasured=!1;var d=a.hiddenState;return d.properties.fill=new InterfaceColorSet().getFor("disabledBackground"),d.properties.opacity=.5,d.properties.visible=!0,a.setStateOnChildren=!1,a.slice.hiddenState.properties.visible=!0,a.adapter.add("tooltipX",function(g,b){return b.slice.ix*(b.slice.radius-(b.slice.radius-b.slice.pixelInnerRadius)/2)}),a.adapter.add("tooltipY",function(g,b){return b.slice.iy*(b.slice.radius-(b.slice.radius-b.slice.pixelInnerRadius)/2)}),a}return o.prototype.invalidateLinks=function(){var a=this;e.prototype.invalidateLinks.call(this);var c=this.label,d=this.slice,g=this.chart;if(g&&d){var b=this.total,j=d.arc,$=d.startAngle;this.children.each(function(rt){if(rt instanceof Bullet){var ut=rt.locationX;isNumber$1(ut)||(ut=.5);var gt=rt.locationY;isNumber$1(gt)||(gt=1);var yt=$+j*ut,wt=gt*d.radius;rt.x=wt*cos(yt),rt.y=wt*sin(yt)}});var _e=$+j*c.location,st=$+(1-b/this.adjustedTotal)*j*.5;isNaN$1(st)&&(st=$),c.fixPosition(_e,d.radius),this.nextAngle=st,this._outgoingSorted&&each(this._outgoingSorted,function(rt){var ut=rt.link;ut.parent=a.chart.linksContainer;var gt=rt.getWorkingValue("value");if(isNumber$1(gt)){if(g.nonRibbon){var yt=ut.percentWidth;isNumber$1(yt)||(yt=5),yt=yt/100,ut.startAngle=$+j/2-j/2*yt,ut.arc=j*yt}else ut.arc=gt*g.valueAngle,ut.startAngle=a.nextAngle,a.nextAngle+=ut.arc;rt.toNode||(ut.endAngle=ut.startAngle),ut.radius=d.pixelInnerRadius}}),this._incomingSorted&&each(this._incomingSorted,function(rt){var ut=rt.link;if(ut.radius=d.pixelInnerRadius,g.nonRibbon){var gt=ut.percentWidth;isNumber$1(gt)||(gt=5),gt=gt/100,ut.endAngle=$+j/2-j/2*gt,ut.arc=j*gt}else{ut.endAngle=a.nextAngle;var yt=rt.getWorkingValue("value");isNumber$1(yt)&&(ut.arc=yt*g.valueAngle,a.nextAngle+=ut.arc)}rt.fromNode||(ut.startAngle=ut.endAngle)})}},o.prototype.updateRotation=function(){var a=this.slice,c=this.trueStartAngle+a.arc/2,d=a.radius,g=d*cos(c),b=d*sin(c),j=getAngle({x:g+this.pixelX,y:b+this.pixelY});a.startAngle=this.trueStartAngle+(j-c),this.dx=-this.pixelX,this.dy=-this.pixelY},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.label.copyFrom(a.label),this.slice.copyFrom(a.slice)},o}(FlowDiagramNode);registry.registeredClasses.ChordNode=ChordNode;var QuadraticCurve=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="QuadraticCurve",a.element=a.paper.add("path"),a.pixelPerfect=!1,a.fill=color(),a.applyTheme(),a}return o.prototype.draw=function(){if(isNumber$1(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var a={x:this.x1,y:this.y1},c={x:this.x2,y:this.y2},d={x:this.cpx,y:this.cpy},g=moveTo(a)+quadraticCurveTo(c,d);this.path=g}},Object.defineProperty(o.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(a){this.setPropertyValue("cpx",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(a){this.setPropertyValue("cpy",a,!0)},enumerable:!0,configurable:!0}),o.prototype.positionToPoint=function(a){var c={x:this.x1,y:this.y1},d={x:this.cpx,y:this.cpy},g={x:this.x2,y:this.y2},b=getPointOnQuadraticCurve(c,g,d,a),j=getPointOnQuadraticCurve(c,g,d,a+.001);return{x:b.x,y:b.y,angle:getAngle(b,j)}},o}(Line),ChordLink=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ChordLink",a.middleLine=a.createChild(QuadraticCurve),a.middleLine.shouldClone=!1,a.middleLine.strokeOpacity=0,a.applyTheme(),a}return o.prototype.validate=function(){if(e.prototype.validate.call(this),!this.isTemplate){var a=this.startAngle,c=this.endAngle,d=this.arc,g=this.radius,b=this.dataItem.fromNode,j=this.dataItem.toNode,$=0,_e=0;b&&($=b.pixelX+b.dx,_e=b.pixelY+b.dy);var st=0,rt=0;if(j&&(st=j.pixelX+j.dx,rt=j.pixelY+j.dy),g>0){var ut=g*cos(a)+$,gt=g*sin(a)+_e,yt=g*cos(c)+st,wt=g*sin(c)+rt,Ct={x:0,y:0},Pt=moveTo({x:ut,y:gt});Pt+=arcTo(a,d,g),Pt+=quadraticCurveTo({x:yt,y:wt},Ct),Pt+=arcTo(c,d,g),Pt+=quadraticCurveTo({x:ut,y:gt},Ct),d>0?this.link.path=Pt:this.link.path="",this.maskBullets&&(this.bulletsMask.path=Pt,this.bulletsContainer.mask=this.bulletsMask);var At=a+d/2,Tt=c+d/2,kt=this.middleLine;kt.x1=g*cos(At)+$,kt.y1=g*sin(At)+_e,kt.x2=g*cos(Tt)+st,kt.y2=g*sin(Tt)+rt,kt.cpx=0,kt.cpy=0,kt.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPropertyValue("radius",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(a){this.setPropertyValue("arc",a,!0)},enumerable:!0,configurable:!0}),o}(FlowDiagramLink);registry.registeredClasses.ChordLink=ChordLink;var ChordDiagramDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ChordDiagramDataItem",a.applyTheme(),a}return o}(FlowDiagramDataItem),ChordDiagram=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.valueAngle=0,a.className="ChordDiagram",a.startAngle=-90,a.endAngle=270,a.radius=percent(80),a.innerRadius=-15,a.nodePadding=5;var c=a.chartContainer.createChild(Container);return c.align="center",c.valign="middle",c.shouldClone=!1,c.layout="absolute",a.chordContainer=c,a.nodesContainer.parent=c,a.linksContainer.parent=c,a.chartContainer.events.on("maxsizechanged",a.invalidate,a,!1),a.applyTheme(),a}return o.prototype.validate=function(){var a=this,c=this.chartContainer,d=this.endAngle,g=this.startAngle+this.nodePadding/2,b=getArcRect(this.startAngle,this.endAngle,1),j={x:0,y:0,width:0,height:0};b=getCommonRectangle([b,j]);var $=Math.min(c.innerWidth/b.width,c.innerHeight/b.height);isNumber$1($)||($=0);var _e=relativeRadiusToValue(this.radius,$),st=relativeRadiusToValue(this.innerRadius,_e,!0),rt=this.dataItem.values.value.sum,ut=0,gt=0;each(this._sorted,function(yt){var wt=yt[1];a.getNodeValue(wt),ut++;var Ct=wt.total;wt.total/rt<a.minNodeSize&&(Ct=rt*a.minNodeSize),gt+=Ct}),this.valueAngle=(d-this.startAngle-this.nodePadding*ut)/gt,each(this._sorted,function(yt){var wt=yt[1],Ct=wt.slice;Ct.radius=_e,Ct.innerRadius=st;var Pt=wt.total;wt.total/rt<a.minNodeSize&&(Pt=rt*a.minNodeSize),wt.adjustedTotal=Pt;var At;a.nonRibbon?At=(d-a.startAngle)/ut-a.nodePadding:At=a.valueAngle*Pt,Ct.arc=At,Ct.startAngle=g,wt.trueStartAngle=g,wt.parent=a.nodesContainer,wt.validate(),g+=At+a.nodePadding}),this.chordContainer.definedBBox={x:_e*b.x,y:_e*b.y,width:_e*b.width,height:_e*b.height},this.chordContainer.invalidateLayout(),e.prototype.validate.call(this)},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},o.prototype.createDataItem=function(){return new ChordDiagramDataItem},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(a){this.setPropertyValue("nonRibbon",a,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),o.prototype.createNode=function(){var a=new ChordNode;return this._disposers.push(a),a},o.prototype.createLink=function(){var a=new ChordLink;return this._disposers.push(a),a},o}(FlowDiagram);registry.registeredClasses.ChordDiagram=ChordDiagram;var Column=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Column",a.width=percent(80),a.height=percent(80),a.events.disableType("transformed"),a.applyOnClones=!0,a.strokeOpacity=1,a.layout="none",a.createAssets(),a.events.on("childadded",a.handleKidAdded,a,!1),a}return o.prototype.handleKidAdded=function(){this.layout=="none"&&(this.layout="absolute")},o.prototype.createAssets=function(){this.column=this.createChild(RoundedRectangle),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},o.prototype.validate=function(){e.prototype.validate.call(this);var a=this.column;a&&(a.width=min$1(this.pixelWidth,this.maxWidth),a.height=min$1(this.pixelHeight,this.maxHeight),a.invalid&&a.validate())},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.column&&this.column.copyFrom(a.column)},Object.defineProperty(o.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:min$1(this.pixelWidth,this.maxWidth),height:min$1(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.Column=Column;var ColumnSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ColumnSeriesDataItem",a.locations.dateX=.5,a.locations.dateY=.5,a.locations.categoryX=.5,a.locations.categoryY=.5,a.applyTheme(),a}return Object.defineProperty(o.prototype,"column",{get:function(){return this._column},set:function(a){this.setColumn(a)},enumerable:!0,configurable:!0}),o.prototype.setColumn=function(a){var c=this;if(this._column&&a!=this._column&&remove(this.sprites,this._column),this._column=a,a){var d=a.dataItem;d&&d!=this&&(d.column=void 0),this.addSprite(a),this._disposers.push(new Disposer(function(){c.component&&c.component.columns.removeValue(a)}))}},Object.defineProperty(o.prototype,"width",{get:function(){var a=this.properties.width;return this._adapterO&&(a=this._adapterO.apply("width",a)),a},set:function(a){this.properties.width!=a&&(this.properties.width=a,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){var a=this.properties.height;return this._adapterO&&(a=this._adapterO.apply("height",a)),a},set:function(a){this.properties.height!=a&&(this.properties.height=a,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new Dictionary),this._rangesColumns},enumerable:!0,configurable:!0}),o}(XYSeriesDataItem),ColumnSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._startLocation=0,a._endLocation=1,a.className="ColumnSeries",a.width=percent(100),a.height=percent(100),a.strokeOpacity=0,a.fillOpacity=1,a.clustered=!0;var c=a.mainContainer.createChild(Container);return c.shouldClone=!1,c.isMeasured=!1,c.layout="none",a._columnsContainer=c,a.columns.template.pixelPerfect=!1,a.tooltipColorSource=a.columns.template,a.applyTheme(),a}return Object.defineProperty(o.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},o.prototype.createDataItem=function(){return new ColumnSeriesDataItem},o.prototype.validate=function(){var a=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var c=this.chart.series,d=0,g=0,b=[];each(c.iterator(),function(wt){if(wt instanceof o&&a.baseAxis==wt.baseAxis){var Ct;a.baseAxis==a.xAxis?Ct=a.chart.yAxes.indexOf(wt.yAxis):Ct=a.chart.xAxes.indexOf(wt.xAxis),b.push({series:wt,axis:Ct})}}),b.sort(function(wt,Ct){return wt.axis-Ct.axis});var j;each$2(b,function(wt){var Ct=wt.series;Ct instanceof o&&((!Ct.stacked&&Ct.clustered||j!=wt.axis&&Ct.clustered)&&d++,Ct==a&&(g=d-1)),j=wt.axis}),this.clustered||(g=0,d=1);var $=this.baseAxis.renderer,_e=$.cellStartLocation,st=$.cellEndLocation;this._startLocation=_e+g/d*(st-_e),this._endLocation=_e+(g+1)/d*(st-_e);var rt=this.xAxis,ut=this.yAxis;rt instanceof CategoryAxis&&ut instanceof ValueAxis&&rt.sortBySeries==this&&this.sortCategoryAxis(rt,"valueY"),ut instanceof CategoryAxis&&rt instanceof ValueAxis&&ut.sortBySeries==this&&this.sortCategoryAxis(ut,"valueX")}e.prototype.validate.call(this);for(var gt=0;gt<this.startIndex;gt++){var yt=this.dataItems.getIndex(gt);this.disableUnusedColumns(yt)}for(var gt=this.dataItems.length-1;gt>this.endIndex;gt--){var yt=this.dataItems.getIndex(gt);this.disableUnusedColumns(yt)}this._propertiesChanged=!1},o.prototype.sortCategoryAxis=function(a,c){var d=this;this.dataItems.values.sort(function(b,j){return j.values[c].workingValue-b.values[c].workingValue});var g=0;this.dataItems.each(function(b){b._index=g,g++}),a.dataItems.each(function(b){var j=b.component,$=j.categoryToPosition(b.category)-b.deltaPosition,_e=j.getSeriesDataItemByCategory(b.category,d);if(_e){var st=d.dataItems.indexOf(_e);b._index=st;var rt=round$1((st+.5)/d.dataItems.length-$,3);b.deltaAnimation&&!b.deltaAnimation.isDisposed()&&b.deltaAnimation.animationOptions[0].to==rt||rt!=round$1(b.deltaPosition,3)&&(b.deltaAnimation&&b.deltaAnimation.stop(),b.deltaAnimation=b.animate({property:"deltaPosition",from:-rt,to:0},j.interpolationDuration,j.interpolationEasing),d._disposers.push(b.deltaAnimation))}}),a.dataItems.values.sort(function(b,j){return b.index-j.index})},o.prototype.validateDataElement=function(a){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(a),e.prototype.validateDataElement.call(this,a))},o.prototype.getStartLocation=function(a){var c=this._startLocation;return this.baseAxis==this.xAxis?c+=a.locations[this.xOpenField]-.5:c+=a.locations[this.yOpenField]-.5,c},o.prototype.getEndLocation=function(a){var c=this._endLocation;return this.baseAxis==this.xAxis?c+=a.locations[this.xField]-.5:c+=a.locations[this.yField]-.5,c},o.prototype.validateDataElementReal=function(a){var c=this,d,g,b,j,$=this.getStartLocation(a),_e=this.getEndLocation(a),st=this.xField,rt=this.xOpenField,ut=this.yField,gt=this.yOpenField,yt=this.columns.template,wt=yt.percentWidth,Ct=yt.percentHeight,Pt=yt.pixelWidth,At=yt.pixelHeight,Tt=yt.maxWidth,kt=yt.maxHeight,It=yt.pixelPaddingLeft,Lt=yt.pixelPaddingRight,Ft=yt.pixelPaddingTop,Nt=yt.pixelPaddingBottom,Ht=!1,dr=a.width;hasValue(dr)&&(isNumber$1(dr)&&(Pt=dr),dr instanceof Percent&&(wt=dr.value*100));var hs=a.height;if(hasValue(hs)&&(isNumber$1(hs)&&(At=hs),hs instanceof Percent&&(Ct=hs.value*100)),this.xAxis instanceof CategoryAxis&&this.yAxis instanceof CategoryAxis){if(!a.hasValue(this._xValueFields)||!a.hasValue(this._yValueFields))return;if($=0,_e=1,!isNaN$1(wt)){var us=round$1((_e-$)*(1-wt/100)/2,5);$+=us,_e-=us}if(d=this.xAxis.getX(a,rt,$),g=this.xAxis.getX(a,st,_e),isNaN$1(wt)){var us=(g-d-Pt)/2;d+=us,g-=us}if(!isNaN$1(Tt)&&Tt<Math.abs(g-d)){var us=(g-d-Tt)/2;d+=us,g-=us}if($=0,_e=1,!isNaN$1(Ct)){var us=round$1((1-Ct/100)/2,5);$+=us,_e-=us}if(b=this.yAxis.getY(a,gt,$),j=this.yAxis.getY(a,ut,_e),isNaN$1(Ct)){var us=(j-b-At)/2;j+=us,b-=us}if(!isNaN$1(kt)&&kt<Math.abs(j-b)){var us=(j-b-kt)/2;j+=us,b-=us}g=this.fixHorizontalCoordinate(g),d=this.fixHorizontalCoordinate(d),b=this.fixVerticalCoordinate(b),j=this.fixVerticalCoordinate(j)}else if(this.baseAxis==this.xAxis){if(!a.hasValue(this._yValueFields))return;if(!isNaN$1(wt)){var us=round$1((_e-$)*(1-wt/100)/2,5);$+=us,_e-=us}if(d=this.xAxis.getX(a,rt,$),g=this.xAxis.getX(a,st,_e),isNaN$1(wt)){var us=(g-d-Pt)/2;d+=us,g-=us}if(!isNaN$1(Tt)&&Tt<Math.abs(g-d)){var us=(g-d-Tt)/2;d+=us,g-=us}var hn=a.locations[gt],un=a.locations[ut];this.yAxis instanceof ValueAxis&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(hn=0,un=0),j=this.yAxis.getY(a,gt,hn),b=this.yAxis.getY(a,ut,un);var bo=Math.ceil(this.yAxis.axisLength);(b<0&&j<0||b>bo&&j>bo)&&(Ht=!0),b=this.fixVerticalCoordinate(b),j=this.fixVerticalCoordinate(j),Math.abs(g-d)-It-Lt==0&&(Ht=!0)}else{if(!a.hasValue(this._xValueFields))return;if(!isNaN$1(Ct)){var us=round$1((_e-$)*(1-Ct/100)/2,5);$+=us,_e-=us}if(b=this.yAxis.getY(a,gt,$),j=this.yAxis.getY(a,ut,_e),isNaN$1(Ct)){var us=(j-b-At)/2;j-=us,b+=us}if(!isNaN$1(kt)&&kt<Math.abs(j-b)){var us=(j-b-kt)/2;j-=us,b+=us}var _s=a.locations[st],gn=a.locations[rt];this.xAxis instanceof ValueAxis&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(_s=0,gn=0),g=this.xAxis.getX(a,st,_s),d=this.xAxis.getX(a,rt,gn);var bo=Math.ceil(this.xAxis.axisLength);(g<0&&d<0||g>bo&&d>bo)&&(Ht=!0),g=this.fixHorizontalCoordinate(g),d=this.fixHorizontalCoordinate(d),Math.abs(b-j)-Ft-Nt==0&&(Ht=!0)}var Gr=Math.abs(g-d),ds=Math.abs(j-b),Zn=Math.min(d,g),Nn=Math.min(b,j);if(Ht)this.disableUnusedColumns(a);else{var Qn;a.column?(Qn=a.column,this._propertiesChanged&&(copyProperties$1(this,Qn,visualProperties),copyProperties$1(this.columns.template,Qn,visualProperties),each$2(visualProperties,function(bu){Qn[bu]=Qn[bu]}))):(Qn=this.columns.create(),copyProperties$1(this,Qn,visualProperties),copyProperties$1(this.columns.template,Qn,visualProperties),a.addSprite(Qn),a.column=Qn,Qn.paper=this.paper,this.itemsFocusable()?(hasValue(this.role)||(this.role="menu"),hasValue(Qn.role)||(Qn.role="menuitem"),Qn.focusable=!0):(hasValue(this.role)||(this.role="list"),hasValue(Qn.role)||(Qn.role="listitem"),Qn.focusable=!1),Qn.focusable&&(Qn.events.on("focus",function(bu){Qn.readerTitle=c.populateString(c.itemReaderText,a)},void 0,!1),Qn.events.on("blur",function(bu){Qn.readerTitle=""},void 0,!1)),Qn.hoverable&&(Qn.events.on("over",function(bu){Qn.readerTitle=c.populateString(c.itemReaderText,a)},void 0,!1),Qn.events.on("out",function(bu){Qn.readerTitle=""},void 0,!1)),Qn.parent=this.columnsContainer,Qn.virtualParent=this),Qn.width=Gr,Qn.height=ds,Qn.x=Zn,Qn.y=Nn,Qn.realX=d,Qn.realY=b,Qn.realWidth=g-d,Qn.realHeight=j-b,this.setColumnStates(Qn),Qn.invalid&&Qn.validate(),Qn.__disabled=!1,each(this.axisRanges.iterator(),function(bu){var ou=a.rangesColumns.getKey(bu.uid);ou||(ou=c.columns.create(),copyProperties$1(bu.contents,ou,visualProperties),a.addSprite(ou),a.rangesColumns.setKey(bu.uid,ou),ou.paper=c.paper),ou.parent=bu.contents,ou.width=Gr,ou.height=ds,ou.x=Zn,ou.y=Nn,c.setColumnStates(ou),ou.invalid&&ou.validate(),ou.__disabled=!1})}a.itemWidth=Gr,a.itemHeight=ds},o.prototype.disableUnusedColumns=function(a){a&&(a.column&&(a.column.width=0,a.column.height=0,a.column.__disabled=!0),each(this.axisRanges.iterator(),function(c){var d=a.rangesColumns.getKey(c.uid);d&&(d.width=0,d.height=0,d.__disabled=!0)}))},o.prototype.setColumnStates=function(a){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var c=a.dataItem;if(this.xAxis instanceof ValueAxis||this.yAxis instanceof ValueAxis){var d,g=void 0,b=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof ValueAxis&&(d=c.getValue(this.xOpenField),g=c.getValue(this.xField)),b=c.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof ValueAxis&&(d=c.getValue(this.yOpenField),g=c.getValue(this.yField)),b=c.getValue(this.yAxis.axisFieldName+"Y","previousChange")),g<d?(c.droppedFromOpen=!0,a.defaultState.copyFrom(this._dropFromOpenState),a.setState(this._dropFromOpenState,0)):(c.droppedFromOpen=!1,a.defaultState.copyFrom(this._riseFromOpenState),a.setState(this._riseFromOpenState,0)),b<0?(c.droppedFromPrevious=!0,a.defaultState.copyFrom(this._dropFromPreviousState),a.setState(this._dropFromPreviousState,0)):(c.droppedFromPrevious=!1,a.defaultState.copyFrom(this._riseFromPreviousState),a.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(o.prototype,"columns",{get:function(){return this._columns||(this._columns=new ListTemplate(this.createColumnTemplate()),this._disposers.push(new ListDisposer(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),o.prototype.createColumnTemplate=function(){return new Column},Object.defineProperty(o.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(a){this.setPropertyValue("clustered",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(a){this._dropFromOpenState=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(a){this._dropFromPreviousState=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(a){this._riseFromOpenState=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(a){this._riseFromPreviousState=a},enumerable:!0,configurable:!0}),o.prototype.updateLegendValue=function(a,c){var d=this;if(e.prototype.updateLegendValue.call(this,a,c),this.legendDataItem){var g=this.legendDataItem.marker,b,j;a&&(a.droppedFromOpen?b=this._dropFromOpenState:b=this._riseFromOpenState,a.droppedFromPrevious?j=this._dropFromPreviousState:j=this._riseFromPreviousState),each(g.children.iterator(),function($){a?($.setState(j),$.setState(b)):($.setState(d._riseFromPreviousState),$.setState(d._riseFromOpenState))})}},o.prototype.createLegendMarker=function(a){var c=a.pixelWidth,d=a.pixelHeight;a.removeChildren();var g=a.createChild(RoundedRectangle);g.shouldClone=!1,copyProperties$1(this,g,visualProperties),g.copyFrom(this.columns.template),g.padding(0,0,0,0),g.width=c,g.height=d;var b=a.dataItem;b.color=this.fill,b.colorOrig=this.fill},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.columns.template.copyFrom(a.columns.template)},o.prototype.getBulletLocationX=function(a,c){if(this.baseAxis==this.xAxis){var d=a.locationX;isNumber$1(d)||(d=.5);var g=this.getEndLocation(a.dataItem),b=this.getStartLocation(a.dataItem);return g-(g-b)*d}else return e.prototype.getBulletLocationX.call(this,a,c)},o.prototype.getBulletLocationY=function(a,c){if(this.baseAxis==this.yAxis){var d=a.locationY;isNumber$1(d)||(d=.5);var g=this.getEndLocation(a.dataItem),b=this.getStartLocation(a.dataItem);return g-(g-b)*d}else return e.prototype.getBulletLocationY.call(this,a,c)},o.prototype.getAdjustedXLocation=function(a,c,d){return isNumber$1(d)||(a?d=a.locations[c]:d=.5),this._endLocation-(this._endLocation-this._startLocation)*(1-d)},o.prototype.getAdjustedYLocation=function(a,c,d){return isNumber$1(d)||(a?d=a.locations[c]:d=.5),this._endLocation-(this._endLocation-this._startLocation)*d},o.prototype.fixVerticalCoordinate=function(a){var c=this.columns.template.pixelPaddingBottom,d=this.columns.template.pixelPaddingTop,g=-d,b=this.yAxis.axisLength+c;return fitToRange(a,g,b)},o.prototype.fixHorizontalCoordinate=function(a){var c=this.columns.template.pixelPaddingLeft,d=this.columns.template.pixelPaddingRight,g=-c,b=this.xAxis.axisLength+d;return fitToRange(a,g,b)},o.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.columns.clear()},o}(XYSeries);registry.registeredClasses.ColumnSeries=ColumnSeries;registry.registeredClasses.ColumnSeriesDataItem=ColumnSeriesDataItem;var TreeMapSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="TreeMapSeriesDataItem",a.applyTheme(),a}return Object.defineProperty(o.prototype,"parentName",{get:function(){var a=this.treeMapDataItem;if(a&&a.parent)return a.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){var a=this.treeMapDataItem;if(a)return a.value},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),o.prototype.hide=function(a,c,d,g){var b=this.treeMapDataItem;return b&&b.hide(a),e.prototype.hide.call(this,a,c,d,g)},o.prototype.show=function(a,c,d){var g=this.treeMapDataItem;return g&&g.show(a,c,d),e.prototype.show.call(this,a,c,d)},o}(ColumnSeriesDataItem),TreeMapSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="TreeMapSeries",a.applyTheme(),a.fillOpacity=1,a.strokeOpacity=1,a.minBulletDistance=0,a.columns.template.tooltipText="{parentName} {name}: {value}",a.columns.template.configField="config";var c=new InterfaceColorSet;return a.stroke=c.getFor("background"),a.dataFields.openValueX="x0",a.dataFields.valueX="x1",a.dataFields.openValueY="y0",a.dataFields.valueY="y1",a.sequencedInterpolation=!1,a.showOnInit=!1,a.columns.template.pixelPerfect=!1,a}return o.prototype.processDataItem=function(a,c){c.seriesDataItem=a,e.prototype.processDataItem.call(this,a,c)},o.prototype.createDataItem=function(){return new TreeMapSeriesDataItem},o.prototype.show=function(a){if(!this.preventShow){var c=this.defaultState.transitionDuration;return isNumber$1(a)&&(c=a),this.dataItems.each(function(d){d.show(a)}),e.prototype.showReal.call(this,c)}},o.prototype.hide=function(a){var c=this.defaultState.transitionDuration;isNumber$1(a)&&(c=a);var d=e.prototype.hideReal.call(this,c);return this.dataItems.each(function(g){g.hide(a)}),d},o.prototype.processValues=function(){},o.prototype.getStartLocation=function(a){return 0},o.prototype.getEndLocation=function(a){return 1},o.prototype.dataChangeUpdate=function(){},o.prototype.processConfig=function(a){a&&(!hasValue(a.dataFields)||!isObject$1(a.dataFields))&&(a.dataFields={}),e.prototype.processConfig.call(this,a)},o.prototype.createLegendMarker=function(a){var c=a.pixelWidth,d=a.pixelHeight;a.removeChildren();var g=a.createChild(RoundedRectangle);g.shouldClone=!1,copyProperties$1(this,g,visualProperties),g.padding(0,0,0,0),g.width=c,g.height=d;var b=a.dataItem;b.color=g.fill,b.colorOrig=g.fill},o.prototype.disableUnusedColumns=function(a){e.prototype.disableUnusedColumns.call(this,a),a.column&&(a.column.__disabled=!1)},o}(ColumnSeries);registry.registeredClasses.TreeMapSeries=TreeMapSeries;registry.registeredClasses.TreeMapSeriesDataItem=TreeMapSeriesDataItem;var TreeMapDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.rows=[],a.className="TreeMapDataItem",a.values.value={workingValue:0},a.values.x0={},a.values.y0={},a.values.x1={},a.values.y1={},a.hasChildren.children=!0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(a){this._legendDataItem=a,a.label&&(a.label.dataItem=this),a.valueLabel&&(a.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),o.prototype.getDuration=function(){return 0},Object.defineProperty(o.prototype,"value",{get:function(){var a=0;return!this.children||this.children.length==0?a=this.values.value.workingValue:each(this.children.iterator(),function(c){var d=c.value;isNumber$1(d)&&(a+=d)}),a},set:function(a){this.setValue("value",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x0",{get:function(){return this.values.x0.value},set:function(a){this.setValue("x0",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x1",{get:function(){return this.values.x1.value},set:function(a){this.setValue("x1",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y0",{get:function(){return this.values.y0.value},set:function(a){this.setValue("y0",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y1",{get:function(){return this.values.y1.value},set:function(a){this.setValue("y1",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this.properties.name},set:function(a){this.setProperty("name",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"children",{get:function(){return this.properties.children},set:function(a){this.setProperty("children",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){var a=this.properties.color;return a==null&&this.parent&&(a=this.parent.color),a==null&&this.component&&(a=this.component.colors.getIndex(this.component.colors.step*this.index)),a},set:function(a){this.setProperty("color",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"series",{get:function(){return this._series},set:function(a){a!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=a,this._disposers.push(a))},enumerable:!0,configurable:!0}),o.prototype.hide=function(a,c,d,g){this.setWorkingValue("value",0),this.children&&this.children.each(function(j){j.hide(a,c,d,g)});var b=this.seriesDataItem;return b&&b.bullets.each(function(j,$){$.hide(),$.preventShow=!0}),e.prototype.hide.call(this,a,c,d,g)},o.prototype.show=function(a,c,d){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each(function(b){b.show(a,c,d)});var g=this.seriesDataItem;return g&&g.bullets.each(function(b,j){j.preventShow=!1}),e.prototype.show.call(this,a,c,d)},o}(XYChartDataItem),TreeMap=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.layoutAlgorithm=a.squarify,a.zoomable=!0,a.className="TreeMap",a._usesData=!0,a.maxLevels=2,a.currentLevel=0,a.hideParentColumns=!1,a.colors=new ColorSet,a.sorting="descending";var c=a.xAxes.push(new ValueAxis);c.title.disabled=!0,c.strictMinMax=!0;var d=c.renderer;d.inside=!0,d.labels.template.disabled=!0,d.ticks.template.disabled=!0,d.grid.template.disabled=!0,d.axisFills.template.disabled=!0,d.minGridDistance=100,d.line.disabled=!0,d.baseGrid.disabled=!0;var g=a.yAxes.push(new ValueAxis);g.title.disabled=!0,g.strictMinMax=!0;var b=g.renderer;b.inside=!0,b.labels.template.disabled=!0,b.ticks.template.disabled=!0,b.grid.template.disabled=!0,b.axisFills.template.disabled=!0,b.minGridDistance=100,b.line.disabled=!0,b.baseGrid.disabled=!0,b.inversed=!0,a.xAxis=c,a.yAxis=g;var j=new TreeMapSeries;return a.seriesTemplates=new DictionaryTemplate(j),j.virtualParent=a,a._disposers.push(new DictionaryDisposer(a.seriesTemplates)),a._disposers.push(j),a.zoomOutButton.events.on("hit",function(){a.zoomToChartDataItem(a._homeDataItem)},void 0,!1),a.seriesTemplates.events.on("insertKey",function($){$.newValue.isTemplate=!0},void 0,!1),a.applyTheme(),a}return Object.defineProperty(o.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(a){var c=this;this._navigationBar!=a&&(this._navigationBar=a,a.parent=this,a.toBack(),a.links.template.events.on("hit",function(d){var g=d.target.dataItem.dataContext;g.isDisposed()||(c.zoomToChartDataItem(g),c.createTreeSeries(g))},void 0,!0),this._disposers.push(a))},enumerable:!0,configurable:!0}),o.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],e.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var a=this.dataItems.template.clone();this._homeDataItem=a,each(this.dataItems.iterator(),function(g){g.parent=a}),a.children=this.dataItems,a.x0=0,a.y0=0,a.name=this._homeText;var c=1e3,d=Math.round(c*this.pixelHeight/this.pixelWidth/10)*10||1e3;a.x1=c,a.y1=d,this.xAxis.min=0,this.xAxis.max=c,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=d,this.yAxis.getMinMax(),this.layoutItems(a),this.createTreeSeries(a),this.feedLegend()},o.prototype.layoutItems=function(a,c){if(a){var d=a.children;c||(c=this.sorting),c=="ascending"&&d.values.sort(function($,_e){return $.value-_e.value}),c=="descending"&&d.values.sort(function($,_e){return _e.value-$.value}),this._updateDataItemIndexes(0),this.layoutAlgorithm(a);for(var g=0,b=d.length;g<b;g++){var j=d.getIndex(g);j.children&&this.layoutItems(j)}}},o.prototype.createTreeSeries=function(a){var c=this;this._tempSeries=[];for(var d=[a],g=a.parent;g!=null;)this.initSeries(g),d.push(g),g=g.parent;d.reverse(),this.navigationBar&&(this.navigationBar.data=d),this.createTreeSeriesReal(a),each$2(this._tempSeries,function(b){c.series.indexOf(b)==-1&&c.series.push(b),b.zIndex=b.level})},o.prototype.createTreeSeriesReal=function(a){if(a.children){var c=a.level;if(c<this.currentLevel+this.maxLevels){this.initSeries(a);for(var d=0;d<a.children.length;d++){var g=a.children.getIndex(d);g.children&&this.createTreeSeriesReal(g)}}}},o.prototype.setData=function(a){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,e.prototype.setData.call(this,a)},o.prototype.seriesAppeared=function(){return!0},o.prototype.initSeries=function(a){var c=this;if(!a.series){var d=void 0,g=this.seriesTemplates.getKey(a.level.toString());g?d=g.clone():d=this.series.create(),d.dataItem.dataContext=a,d.name=a.name,d.parentDataItem=a,a.series=d;var b=a.level;d.level=b;var j=a.dataContext;j&&(d.config=j.config),this.dataUsers.removeValue(d),d.data=a.children.values,d.fill=a.color,d.columnsContainer.hide(0),d.bulletsContainer.hide(0),d.columns.template.adapter.add("fill",function($,_e){var st=_e.dataItem;if(st){var rt=st.treeMapDataItem;if(rt)return _e.fill=rt.color,_e.adapter.remove("fill"),rt.color}}),this.zoomable&&(a.level>this.currentLevel||a.children&&a.children.length>0)&&(d.columns.template.cursorOverStyle=MouseCursorStyle.pointer,this.zoomable&&d.columns.template.events.on("hit",function($){var _e=$.target.dataItem;a.level>c.currentLevel?c.zoomToChartDataItem(_e.treeMapDataItem.parent):c.zoomToSeriesDataItem(_e)},this,void 0))}this._tempSeries.push(a.series)},o.prototype.toggleBullets=function(a){var c=this;each(this.series.iterator(),function(d){c._tempSeries.indexOf(d)==-1?(d.columnsContainer.hide(),d.bulletsContainer.hide(a)):(d.columnsContainer.show(),d.bulletsContainer.show(a),d.dataItems.each(function(g){g.bullets.each(function(b,j){j.show()})}),d.level<c.currentLevel?(c.hideParentColumns&&d.columnsContainer.hide(),d.bulletsContainer.hide(a)):d.level==c.currentLevel&&c.maxLevels>1&&d.dataItems.each(function(g){g.treeMapDataItem.children&&g.bullets.each(function(b,j){j.hide()})}))})},o.prototype.zoomToSeriesDataItem=function(a){this.zoomToChartDataItem(a.treeMapDataItem)},o.prototype.zoomToChartDataItem=function(a){var c=this;a||(a=this._homeDataItem);var d=this.zoomOutButton;if(d&&(a!=this._homeDataItem?d.show():d.hide()),a&&a.children){this.xAxis.zoomToValues(a.x0,a.x1),this.yAxis.zoomToValues(a.y0,a.y1),this.currentLevel=a.level,this.currentlyZoomed=a,this.createTreeSeries(a);var g=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;g&&!g.isDisposed()&&!g.isFinished()?(this._dataDisposers.push(g),g.events.once("animationended",function(){c.toggleBullets()})):this.toggleBullets()}},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},o.prototype.createDataItem=function(){return new TreeMapDataItem},Object.defineProperty(o.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(a){this.setPropertyValue("maxLevels",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(a){this.setPropertyValue("currentLevel",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(a){this.setPropertyValue("hideParentColumns",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(a){this.setPropertyValue("sorting",a,!0)},enumerable:!0,configurable:!0}),o.prototype.createSeries=function(){return new TreeMapSeries},Object.defineProperty(o.prototype,"homeText",{get:function(){return this._homeText},set:function(a){this._homeText=a,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),o.prototype.processConfig=function(a){if(a){if(hasValue(a.layoutAlgorithm)&&isString$1(a.layoutAlgorithm))switch(a.layoutAlgorithm){case"squarify":a.layoutAlgorithm=this.squarify;break;case"binaryTree":a.layoutAlgorithm=this.binaryTree;break;case"slice":a.layoutAlgorithm=this.slice;break;case"dice":a.layoutAlgorithm=this.dice;break;case"sliceDice":a.layoutAlgorithm=this.sliceDice;break;default:delete a.layoutAlgorithm;break}hasValue(a.navigationBar)&&!hasValue(a.navigationBar.type)&&(a.navigationBar.type="NavigationBar"),e.prototype.processConfig.call(this,a)}},o.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},o.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),each(this.series.iterator(),function(a){a.validateRawData()}),this.zoomToChartDataItem(this._homeDataItem)},o.prototype.binaryTree=function(a){var c=a.children,d,g=c.length,b,j=new Array(g+1);for(j[0]=b=d=0;d<g;++d)j[d+1]=b+=c.getIndex(d).value;g>0&&$(0,g,a.value,a.x0,a.y0,a.x1,a.y1);function $(_e,st,rt,ut,gt,yt,wt){if(_e>=st-1){var Ct=c.getIndex(_e);Ct.x0=ut,Ct.y0=gt,Ct.x1=yt,Ct.y1=wt;return}for(var Pt=j[_e],At=rt/2+Pt,Tt=_e+1,kt=st-1;Tt<kt;){var It=Tt+kt>>>1;j[It]<At?Tt=It+1:kt=It}At-j[Tt-1]<j[Tt]-At&&_e+1<Tt&&--Tt;var Lt=j[Tt]-Pt,Ft=rt-Lt;if(rt==0){var Ct=c.getIndex(_e);Ct.x0=ut,Ct.y0=gt,Ct.x1=yt,Ct.y1=wt;return}if(yt-ut>wt-gt){var Nt=(ut*Ft+yt*Lt)/rt;$(_e,Tt,Lt,ut,gt,Nt,wt),$(Tt,st,Ft,Nt,gt,yt,wt)}else{var Ht=(gt*Ft+wt*Lt)/rt;$(_e,Tt,Lt,ut,gt,yt,Ht),$(Tt,st,Ft,ut,Ht,yt,wt)}}},o.prototype.slice=function(a){for(var c=a.x0,d=a.x1,g=a.y0,b=a.y1,j=a.children,$,_e=-1,st=j.length,rt=a.value&&(b-g)/a.value;++_e<st;)$=j.getIndex(_e),$.x0=c,$.x1=d,$.y0=g,g+=$.value*rt,$.y1=g},o.prototype.dice=function(a){for(var c=a.x0,d=a.x1,g=a.y0,b=a.y1,j=a.children,$,_e=-1,st=j.length,rt=a.value&&(d-c)/a.value;++_e<st;)$=j.getIndex(_e),$.y0=g,$.y1=b,$.x0=c,c+=$.value*rt,$.x1=c},o.prototype.sliceDice=function(a){a.level&1?this.slice(a):this.dice(a)},o.prototype.squarify=function(a){for(var c=(1+Math.sqrt(5))/2,d=a.x0,g=a.x1,b=a.y0,j=a.y1,$=a.children,_e,st=0,rt=0,ut=$.length,gt,yt,wt=a.value,Ct,Pt,At,Tt,kt,It,Lt;st<ut;){gt=g-d,yt=j-b;do Ct=$.getIndex(rt++).value;while(!Ct&&rt<ut);for(Pt=At=Ct,It=Math.max(yt/gt,gt/yt)/(wt*c),Lt=Ct*Ct*It,kt=Math.max(At/Lt,Lt/Pt);rt<ut;++rt){if(Ct+=_e=$.getIndex(rt).value,_e<Pt&&(Pt=_e),_e>At&&(At=_e),Lt=Ct*Ct*It,Tt=Math.max(At/Lt,Lt/Pt),Tt>kt){Ct-=_e;break}kt=Tt}var Ft=this.dataItems.template.clone();Ft.value=Ct,Ft.dice=gt<yt,Ft.children=$.slice(st,rt),Ft.x0=d,Ft.y0=b,Ft.x1=g,Ft.y1=j,Ft.dice?(Ft.y1=wt?b+=yt*Ct/wt:j,this.dice(Ft)):(Ft.x1=wt?d+=gt*Ct/wt:g,this.slice(Ft)),wt-=Ct,st=rt}},o.prototype.handleSeriesAdded2=function(){},o.prototype.handleDataItemValueChange=function(a,c){c=="value"&&this.invalidateDataItems()},o.prototype.handleDataItemWorkingValueChange=function(a,c){c=="value"&&this.invalidateDataItems()},o.prototype.getLegendLevel=function(a){if(a&&a.children){if(a.children.length>1)return a;if(a.children.length==1){var c=a.children.getIndex(0);return c.children?this.getLegendLevel(c):a}else return a}},o.prototype.handleLegendSeriesAdded=function(a){},Object.defineProperty(o.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),o.prototype.feedLegend=function(){var a=this.legend;if(a){a.dataFields.name="name";var c=this.getLegendLevel(this._homeDataItem);if(c){var d=[];c.children.each(function(g){d.push(g)}),a.data=d}}},o.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},o.prototype.getExporting=function(){var a=this,c=e.prototype.getExporting.call(this);return c.adapter.add("formatDataFields",function(d){return(d.format=="csv"||d.format=="xlsx")&&hasValue(a.dataFields.children)&&delete d.dataFields[a.dataFields.children],d}),c},o}(XYChart);registry.registeredClasses.TreeMap=TreeMap;var AxisRendererX3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._chart=new MutableValueDisposer,a.className="AxisRendererX3D",a._disposers.push(a._chart),a.applyTheme(),a}return o.prototype.updateGridElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);if(a.element){var b=this.chart.dx3D||0,j=this.chart.dy3D||0,$=this.getHeight();a.path=moveTo({x:b,y:j})+lineTo({x:b,y:$+j})+lineTo({x:0,y:$})}this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var a=this.getHeight(),c=this.chart.dx3D||0,d=this.chart.dy3D||0;this.baseGrid.path=moveTo({x:c,y:d})+lineTo({x:0,y:0})+lineTo({x:0,y:a})},Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart.get()},set:function(a){a&&this._chart.set(a,a.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),o.prototype.handle3DChanged=function(a){(a.property=="depth"||a.property=="angle")&&this.invalidate()},o}(AxisRendererX);registry.registeredClasses.AxisRendererX3D=AxisRendererX3D;var AxisRendererY3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._chart=new MutableValueDisposer,a.className="AxisRendererY3D",a._disposers.push(a._chart),a.applyTheme(),a}return o.prototype.updateGridElement=function(a,c,d){c=c+(d-c)*a.location;var g=this.positionToPoint(c);if(a.element){var b=this.chart.dx3D||0,j=this.chart.dy3D||0,$=this.getWidth();a.path=moveTo({x:0,y:0})+lineTo({x:b,y:j})+lineTo({x:$+b,y:j})}this.positionItem(a,g),this.toggleVisibility(a,c,0,1)},o.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var a=this.chart.dx3D||0,c=this.chart.dy3D||0,d=this.getWidth();this.baseGrid.path=moveTo({x:0,y:0})+lineTo({x:d,y:0})+lineTo({x:d+a,y:c})},Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart.get()},set:function(a){a&&this._chart.set(a,a.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),o.prototype.handle3DChanged=function(a){(a.property=="depth"||a.property=="angle")&&this.invalidate()},o}(AxisRendererY),Column3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Column3D",a}return o.prototype.createAssets=function(){this.column3D=this.createChild(Rectangle3D),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},o.prototype.validate=function(){e.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.column3D&&this.column3D.copyFrom(a.column3D)},o.prototype.setFill=function(a){e.prototype.setFill.call(this,a),this.column.fill=a},o}(Column);registry.registeredClasses.Column3D=Column3D;var ColumnSeries3DDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ColumnSeries3DDataItem",a.applyTheme(),a}return o}(ColumnSeriesDataItem),ColumnSeries3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ColumnSeries3D",a.columns.template.column3D.applyOnClones=!0,a.columns.template.hiddenState.properties.visible=!0,a.applyTheme(),a}return Object.defineProperty(o.prototype,"columnsContainer",{get:function(){var a=this.chart;return a&&a.columnsContainer&&a.leftAxesContainer.layout!="vertical"&&a.rightAxesContainer.layout!="vertical"&&a.bottomAxesContainer.layout!="horizontal"&&a.topAxesContainer.layout!="horizontal"?a.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),o.prototype.validateDataElementReal=function(a){e.prototype.validateDataElementReal.call(this,a),a.column&&(a.column.dx=this.dx,a.column.dy=this.dy,a.column.visible=this.visible)},o.prototype.validateDataElements=function(){e.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},o.prototype.createColumnTemplate=function(){return new Column3D},Object.defineProperty(o.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(a){this.setPropertyValue("depth",a,!0);var c=this.columns.template;c.column3D.depth=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(a){this.setPropertyValue("angle",a);var c=this.columns.template;c.column3D.angle=a},enumerable:!0,configurable:!0}),o}(ColumnSeries);registry.registeredClasses.ColumnSeries3D=ColumnSeries3D;registry.registeredClasses.ColumnSeries3DDataItem=ColumnSeries3DDataItem;(function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="XYChart3DDataItem",a.applyTheme(),a}return o})(XYChartDataItem);var XYChart3D=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._axisRendererX=AxisRendererX3D,a._axisRendererY=AxisRendererY3D,a.className="XYChart3D",a.depth=30,a.angle=30;var c=a.seriesContainer.createChild(Container);return c.shouldClone=!1,c.isMeasured=!1,c.layout="none",a.columnsContainer=c,a.columnsContainer.mask=a.createChild(Sprite),a.applyTheme(),a}return o.prototype.updateSeriesMasks=function(){if(e.prototype.updateSeriesMasks.call(this),isIE()){var a=this.columnsContainer,c=a.mask;a.mask=void 0,a.mask=c}},Object.defineProperty(o.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(a){this.setPropertyValue("depth",a),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(a){this.setPropertyValue("angle",a),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dx3D",{get:function(){return cos(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dy3D",{get:function(){return-sin(this.angle)*this.depth},enumerable:!0,configurable:!0}),o.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.fixColumns()},o.prototype.fixLayout=function(){this.chartContainer.paddingTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),e.prototype.fixLayout.call(this)},o.prototype.fixColumns=function(){var a=this,c=1,d=0;each(this.series.iterator(),function(b){b instanceof ColumnSeries3D&&(!b.clustered&&d>0&&c++,b.depthIndex=c-1,d++)});var g=0;each(this.series.iterator(),function(b){if(b instanceof ColumnSeries3D){b.depth=a.depth/c,b.angle=a.angle,b.columnsContainer==a.columnsContainer&&(b.dx=a.depth/c*cos(a.angle)*b.depthIndex,b.dy=-a.depth/c*sin(a.angle)*b.depthIndex);var j=!1;(b.baseAxis==b.xAxis&&b.xAxis.renderer.inversed||b.baseAxis==b.yAxis&&b.yAxis.renderer.inversed)&&(j=!0);var $=1;b.dataItems.each(function(_e){var st=_e.column;st&&(j?st.zIndex=1e3*(1e3-$)+g-b.depthIndex*100:st.zIndex=1e3*$+g-b.depthIndex*100),$++}),j?g--:g++}}),this.maskColumns()},o.prototype.processConfig=function(a){if(a&&hasValue(a.series)&&isArray$1(a.series))for(var c=0,d=a.series.length;c<d;c++)a.series[c].type=a.series[c].type||"ColumnSeries3D";e.prototype.processConfig.call(this,a)},o.prototype.maskColumns=function(){var a=this.plotContainer.pixelWidth,c=this.plotContainer.pixelHeight,d=this.dx3D,g=this.dy3D,b=moveTo({x:0,y:0})+lineTo({x:d,y:g})+lineTo({x:a+d,y:g})+lineTo({x:a+d,y:c+g})+lineTo({x:a,y:c})+lineTo({x:a,y:c})+lineTo({x:0,y:c})+closePath(),j=this.columnsContainer;j&&j.mask&&(j.mask.path=b)},o}(XYChart);registry.registeredClasses.XYChart3D=XYChart3D;var HeatLegend=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="HeatLegend",a.markerContainer=a.createChild(Container),a.markerContainer.shouldClone=!1,a.markerCount=1;var c=new RoundedRectangle;return c.minHeight=20,c.minWidth=20,c.interactionsEnabled=!1,c.fillOpacity=1,c.cornerRadius(0,0,0,0),a.markerContainer.minHeight=20,a.markerContainer.minWidth=20,a.orientation="horizontal",a.markers=new ListTemplate(c),a._disposers.push(new ListDisposer(a.markers)),a._disposers.push(a.markers.template),a.applyTheme(),a}return o.prototype.getMinFromRules=function(a){var c=this.series;if(c){var d;return eachContinue(c.heatRules.iterator(),function(g){return g.property==a?(d=g.min,!1):!0}),d}},o.prototype.getMaxFromRules=function(a){var c=this.series;if(c){var d;return each(c.heatRules.iterator(),function(g){return g.property==a?(d=g.max,!1):!0}),d}},o.prototype.validate=function(){e.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var a=this.series,c=this.minColor,d=this.maxColor;if(hasValue(c)||(c=toColor(this.getMinFromRules("fill"))),hasValue(d)||(d=toColor(this.getMaxFromRules("fill"))),a){var g=a.fill;!hasValue(c)&&g instanceof Color&&(c=g),!hasValue(d)&&g instanceof Color&&(d=g)}hasValue(d)||(d=toColor(this.getMaxFromRules("fill")));var b=toNumber(this.getMinFromRules("fillOpacity"));isNumber$1(b)||(b=1);var j=toNumber(this.getMaxFromRules("fillOpacity"));isNumber$1(j)||(j=1);var $=toNumber(this.getMinFromRules("strokeOpacity"));isNumber$1($)||($=1);var _e=toNumber(this.getMaxFromRules("strokeOpacity"));isNumber$1(_e)||(_e=1);for(var st=toColor(this.getMinFromRules("stroke")),rt=toColor(this.getMaxFromRules("stroke")),ut=0;ut<this.markerCount;ut++){var gt=this.markers.getIndex(ut);if(gt||(gt=this.markers.create(),gt.parent=this.markerContainer,gt.height=percent(100),gt.width=percent(100)),this.markerCount==1){var yt=new LinearGradient;if(this.reverseOrder?(yt.addColor(d,j),yt.addColor(c,b)):(yt.addColor(c,b),yt.addColor(d,j)),this.orientation=="vertical"&&(yt.rotation=-90),gt.fill=yt,hasValue(st)&&hasValue(rt)){var wt=new LinearGradient;this.reverseOrder?(wt.addColor(rt,_e),wt.addColor(st,$)):(wt.addColor(st,$),wt.addColor(rt,_e)),this.orientation=="vertical"&&(wt.rotation=-90),gt.stroke=wt}}else{var Ct=ut;this.reverseOrder&&(Ct=this.markerCount-ut-1);var Pt=new Color(interpolate(c.rgb,d.rgb,Ct/this.markerCount));gt.fill=Pt;var At=b+(j-b)*Ct/this.markerCount;if(gt.fillOpacity=At,hasValue(st)&&hasValue(rt)){var Tt=new Color(interpolate(st.rgb,rt.rgb,Ct/this.markerCount));gt.stroke=Tt;var kt=$+(_e-$)*Ct/this.markerCount;gt.strokeOpacity=kt}}}var It=this.valueAxis.renderer;this.markerCount>1&&(this.orientation=="horizontal"?It.minGridDistance=this.measuredWidth/this.markerCount:It.minGridDistance=this.measuredHeight/this.markerCount),this.valueAxis.invalidate();for(var ut=this.markerCount,Lt=this.markers.length;ut<Lt;ut++)this.markers.getIndex(ut).parent=void 0},Object.defineProperty(o.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(a){a instanceof Color||(a=toColor(a)),this.setColorProperty("minColor",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(a){a instanceof Color||(a=toColor(a)),this.setColorProperty("maxColor",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(a){this.setPropertyValue("markerCount",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(a){this.setPropertyValue("minValue",a),this.valueAxis.min=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(a){this.setPropertyValue("maxValue",a),this.valueAxis.max=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a,!0);var c=this.markerContainer,d=this.valueAxis;a=="horizontal"?(hasValue(this.width)||(this.width=200),this.height=void 0,d.width=percent(100),d.height=void 0,d.tooltip.pointerOrientation="vertical",this.layout="vertical",c.width=percent(100),c.height=void 0,d.renderer instanceof AxisRendererX||(d.renderer=new AxisRendererX)):(hasValue(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",c.width=void 0,c.height=percent(100),d.height=percent(100),d.width=void 0,d.tooltip.pointerOrientation="horizontal",d.renderer instanceof AxisRendererY||(d.renderer=new AxisRendererY),d.renderer.inside=!0,d.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var g=d.renderer;g.grid.template.disabled=!0,g.axisFills.template.disabled=!0,g.baseGrid.disabled=!0,g.labels.template.padding(2,3,2,3),g.minHeight=void 0,g.minWidth=void 0,this.markerContainer.layout=a},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(ValueAxis),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(a){this._valueAxis=a,a.parent=this,a.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"series",{get:function(){return this._series},set:function(a){var c=this;this._series=a;var d="value";try{var g=a.heatRules.getIndex(0).dataField;g&&(d=g)}catch{}this.updateMinMax(a.dataItem.values[d].low,a.dataItem.values[d].high),a.dataItem.events.on("calculatedvaluechanged",function(b){c.updateMinMax(a.dataItem.values[d].low,a.dataItem.values[d].high)},void 0,!1),a.heatRules.events.on("inserted",this.invalidate,this,!1),a.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),o.prototype.updateMinMax=function(a,c){var d=this.valueAxis;isNumber$1(this.minValue)||(d.min=a,d.invalidate()),isNumber$1(this.maxValue)||(d.max=c,d.invalidate())},o.prototype.processConfig=function(a){if(a&&hasValue(a.series)&&isString$1(a.series)&&isString$1(a.series))if(this.map.hasKey(a.series))a.series=this.map.getKey(a.series);else{var c=a.series,d=this.map.events.on("insertKey",function(g){g.key==c&&(this.series=g.newValue,d.dispose())},this);this._disposers.push(d),delete a.series}e.prototype.processConfig.call(this,a)},o}(Container);registry.registeredClasses.HeatLegend=HeatLegend;var Candlestick=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="Candlestick",a.layout="none",a}return o.prototype.createAssets=function(){e.prototype.createAssets.call(this),this.lowLine=this.createChild(Line),this.lowLine.shouldClone=!1,this.highLine=this.createChild(Line),this.highLine.shouldClone=!1},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.lowLine&&this.lowLine.copyFrom(a.lowLine),this.highLine&&this.highLine.copyFrom(a.highLine)},o}(Column);registry.registeredClasses.Candlestick=Candlestick;var CandlestickSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.values.lowValueX={},a.values.lowValueY={},a.values.highValueX={},a.values.highValueY={},a.className="CandlestickSeriesDataItem",a.applyTheme(),a}return Object.defineProperty(o.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(a){this.setValue("lowValueX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(a){this.setValue("lowValueY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(a){this.setValue("highValueX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(a){this.setValue("highValueY",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(a){this.setValue("valueX",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(a){this.setValue("valueY",a)},enumerable:!0,configurable:!0}),o}(ColumnSeriesDataItem),CandlestickSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="CandlestickSeries",a.groupFields.lowValueX="low",a.groupFields.lowValueY="low",a.groupFields.highValueX="high",a.groupFields.highValueY="high",a.strokeOpacity=1;var c=new InterfaceColorSet,d=c.getFor("positive"),g=c.getFor("negative");return a.dropFromOpenState.properties.fill=g,a.dropFromOpenState.properties.stroke=g,a.riseFromOpenState.properties.fill=d,a.riseFromOpenState.properties.stroke=d,a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},o.prototype.createDataItem=function(){return new CandlestickSeriesDataItem},o.prototype.validateDataElementReal=function(a){e.prototype.validateDataElementReal.call(this,a),this.validateCandlestick(a)},o.prototype.validateCandlestick=function(a){var c=a.column;if(c){var d=c.lowLine,g=c.highLine;if(this.baseAxis==this.xAxis){var b=c.pixelWidth/2;d.x=b,g.x=b;var j=a.getWorkingValue(this.yOpenField),$=a.getWorkingValue(this.yField),_e=this.yAxis.getY(a,this.yOpenField),st=this.yAxis.getY(a,this.yField),rt=this.yAxis.getY(a,this.yLowField),ut=this.yAxis.getY(a,this.yHighField),gt=c.pixelY;d.y1=rt-gt,g.y1=ut-gt,j<$?(d.y2=_e-gt,g.y2=st-gt):(d.y2=st-gt,g.y2=_e-gt)}if(this.baseAxis==this.yAxis){var yt=c.pixelHeight/2;d.y=yt,g.y=yt;var wt=a.getWorkingValue(this.xOpenField),Ct=a.getWorkingValue(this.xField),Pt=this.xAxis.getX(a,this.xOpenField),At=this.xAxis.getX(a,this.xField),Tt=this.xAxis.getX(a,this.xLowField),kt=this.xAxis.getX(a,this.xHighField),It=c.pixelX;d.x1=Tt-It,g.x1=kt-It,wt<Ct?(d.x2=Pt-It,g.x2=At-It):(d.x2=At-It,g.x2=Pt-It)}each(this.axisRanges.iterator(),function(Lt){var Ft=a.rangesColumns.getKey(Lt.uid);if(Ft){var Nt=Ft.lowLine;Nt.x=d.x,Nt.y=d.y,Nt.x1=d.x1,Nt.x2=d.x2,Nt.y1=d.y1,Nt.y2=d.y2;var Ht=Ft.highLine;Ht.x=g.x,Ht.y=g.y,Ht.x1=g.x1,Ht.x2=g.x2,Ht.y1=g.y1,Ht.y2=g.y2}})}},Object.defineProperty(o.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),o.prototype.defineFields=function(){e.prototype.defineFields.call(this);var a=this.xAxis,c=this.yAxis;if(a&&c){if(this.baseAxis==a){var d=capitalize(c.axisFieldName);this._yLowField="low"+d+"Y",this._yHighField="high"+d+"Y"}if(this.baseAxis==c){var g=capitalize(a.axisFieldName);this._xLowField="low"+g+"X",this._xHighField="high"+g+"X"}this.addValueField(a,this._xValueFields,this._xLowField),this.addValueField(a,this._xValueFields,this._xHighField),this.addValueField(c,this._yValueFields,this._yLowField),this.addValueField(c,this._yValueFields,this._yHighField)}},o.prototype.createLegendMarker=function(a){var c=a.pixelWidth,d=a.pixelHeight;a.removeChildren();var g=a.createChild(Candlestick);g.shouldClone=!1,g.copyFrom(this.columns.template);var b,j,$=g.lowLine,_e=g.highLine;this.baseAxis==this.yAxis?(b=c/3,j=d,$.y=d/2,_e.y=d/2,$.x2=c/3,_e.x2=c/3,_e.x=c/3*2,g.column.x=c/3):(b=c,j=d/3,$.x=c/2,_e.x=c/2,$.y2=d/3,_e.y2=d/3,_e.y=d/3*2,g.column.y=d/3),g.width=b,g.height=j,copyProperties$1(this,a,visualProperties),copyProperties$1(this.columns.template,g,visualProperties),g.stroke=this.riseFromOpenState.properties.stroke,g.fill=g.stroke;var st=a.dataItem;st.color=g.fill,st.colorOrig=g.fill},o.prototype.createColumnTemplate=function(){return new Candlestick},o}(ColumnSeries);registry.registeredClasses.CandlestickSeries=CandlestickSeries;registry.registeredClasses.CandlestickSeriesDataItem=CandlestickSeriesDataItem;var OHLC=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="OHLC",a.layout="none",a}return o.prototype.createAssets=function(){this.openLine=this.createChild(Line),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(Line),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(Line),this.closeLine.shouldClone=!1},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.openLine&&this.openLine.copyFrom(a.openLine),this.highLowLine&&this.highLowLine.copyFrom(a.highLowLine),this.closeLine&&this.closeLine.copyFrom(a.closeLine)},o}(Candlestick);registry.registeredClasses.OHLC=OHLC;var OHLCSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="OHLCSeriesDataItem",a.applyTheme(),a}return o}(CandlestickSeriesDataItem),OHLCSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="OHLCSeries",a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},o.prototype.createDataItem=function(){return new OHLCSeriesDataItem},o.prototype.validateCandlestick=function(a){var c=a.column;if(c){var d=c.openLine,g=c.highLowLine,b=c.closeLine;if(this.baseAxis==this.xAxis){var j=c.pixelWidth/2;g.x=j,a.getWorkingValue(this.yOpenField),a.getWorkingValue(this.yField);var $=this.yAxis.getY(a,this.yOpenField),_e=this.yAxis.getY(a,this.yField),st=this.yAxis.getY(a,this.yLowField),rt=this.yAxis.getY(a,this.yHighField),ut=c.pixelY;d.y1=$-ut,d.y2=$-ut,d.x1=0,d.x2=j,b.y1=_e-ut,b.y2=_e-ut,b.x1=j,b.x2=2*j,g.y1=rt-ut,g.y2=st-ut}if(this.baseAxis==this.yAxis){var gt=c.pixelHeight/2;g.y=gt,a.getWorkingValue(this.xOpenField),a.getWorkingValue(this.xField);var yt=this.xAxis.getX(a,this.xOpenField),wt=this.xAxis.getX(a,this.xField),Ct=this.xAxis.getX(a,this.xLowField),Pt=this.xAxis.getX(a,this.xHighField),At=c.pixelX;d.x1=yt-At,d.x2=yt-At,d.y1=gt,d.y2=2*gt,b.x1=wt-At,b.x2=wt-At,b.y1=0,b.y2=gt,g.x1=Pt-At,g.x2=Ct-At}each(this.axisRanges.iterator(),function(Tt){var kt=a.rangesColumns.getKey(Tt.uid);if(kt){var It=kt.openLine;It.x=d.x,It.y=d.y,It.x1=d.x1,It.x2=d.x2,It.y1=d.y1,It.y2=d.y2;var Lt=kt.closeLine;Lt.x=b.x,Lt.y=b.y,Lt.x1=b.x1,Lt.x2=b.x2,Lt.y1=b.y1,Lt.y2=b.y2;var Ft=kt.highLowLine;Ft.x=g.x,Ft.y=g.y,Ft.x1=g.x1,Ft.x2=g.x2,Ft.y1=g.y1,Ft.y2=g.y2}})}},o.prototype.createLegendMarker=function(a){var c=a.pixelWidth,d=a.pixelHeight;a.removeChildren();var g=a.createChild(OHLC);g.shouldClone=!1,g.copyFrom(this.columns.template);var b,j,$=g.openLine,_e=g.closeLine,st=g.highLowLine;this.baseAxis==this.yAxis?(b=c/3,j=d,st.y=d/2,st.x2=c,$.x=c/3*2,$.y2=d/2,_e.x=c/3,_e.y2=d,_e.y1=d/2):(b=c,j=d/3,st.x=c/2,st.y2=d,$.y=d/3*2,$.x2=c/2,_e.y=d/3,_e.x2=c,_e.x1=c/2),g.width=b,g.height=j,copyProperties$1(this,a,visualProperties),copyProperties$1(this.columns.template,g,visualProperties),g.stroke=this.riseFromOpenState.properties.stroke;var rt=a.dataItem;rt.color=g.stroke,rt.colorOrig=g.stroke},o.prototype.createColumnTemplate=function(){return new OHLC},o}(CandlestickSeries);registry.registeredClasses.OHLCSeries=OHLCSeries;registry.registeredClasses.OHLCSeriesDataItem=OHLCSeriesDataItem;var StepLineSeriesSegment=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="StepLineSeriesSegment",a}return o.prototype.drawSegment=function(a,c,d,g,b,j){if(a.length>0&&c.length>0)if(b){var $=moveTo(a[0]);if(a.length>0)for(var _e=1;_e<a.length;_e++){var st=a[_e];_e/2==Math.round(_e/2)?$+=moveTo(st):$+=lineTo(st)}this.strokeSprite.path=$,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&($=moveTo(a[0])+polyline(a),$+=lineTo(c[0])+polyline(c),$+=lineTo(a[0]),$+=closePath(),this.fillSprite.path=$)}else{var $=moveTo(a[0])+polyline(a);this.strokeSprite.path=$,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&($+=lineTo(c[0])+polyline(c),$+=lineTo(a[0]),$+=closePath(),this.fillSprite.path=$)}else this.strokeSprite.path="",this.fillSprite.path=""},o}(LineSeriesSegment);registry.registeredClasses.StepLineSeriesSegment=StepLineSeriesSegment;var StepLineSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="StepLineSeriesDataItem",a.applyTheme(),a}return o}(LineSeriesDataItem),StepLineSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="StepLineSeries",a.applyTheme(),a.startLocation=0,a.endLocation=1,a}return o.prototype.createDataItem=function(){return new StepLineSeriesDataItem},o.prototype.addPoints=function(a,c,d,g,b){var j,$,_e,st;this.baseAxis==this.xAxis&&(j=this.startLocation,$=this.endLocation,_e=this.getAdjustedXLocation(c,this.yOpenField),st=this.getAdjustedXLocation(c,this.yField)),this.baseAxis==this.yAxis&&(_e=this.startLocation,st=this.endLocation,j=this.getAdjustedXLocation(c,this.xOpenField),$=this.getAdjustedXLocation(c,this.xField));var rt=this.xAxis.getX(c,d,j),ut=this.yAxis.getY(c,g,_e),gt=this.xAxis.getX(c,d,$),yt=this.yAxis.getY(c,g,st);if(rt=fitToRange(rt,-1e5,1e5),ut=fitToRange(ut,-1e5,1e5),gt=fitToRange(gt,-1e5,1e5),yt=fitToRange(yt,-1e5,1e5),!this.noRisers&&a.length>1){var wt=a[a.length-1];this.baseAxis==this.xAxis&&(b?a.push({x:wt.x,y:yt}):a.push({x:rt,y:wt.y})),this.baseAxis==this.yAxis&&(b?a.push({x:gt,y:wt.y}):a.push({x:wt.x,y:ut}))}var Ct={x:rt,y:ut},Pt={x:gt,y:yt};b?a.push(Pt,Ct):a.push(Ct,Pt)},o.prototype.drawSegment=function(a,c,d){var g=!1;this.yAxis==this.baseAxis&&(g=!0),a.drawSegment(c,d,this.tensionX,this.tensionY,this.noRisers,g)},o.prototype.createSegment=function(){return new StepLineSeriesSegment},Object.defineProperty(o.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(a){this.setPropertyValue("noRisers",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(a){this.setPropertyValue("startLocation",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(a){this.setPropertyValue("endLocation",a,!0)},enumerable:!0,configurable:!0}),o}(LineSeries);registry.registeredClasses.StepLineSeries=StepLineSeries;registry.registeredClasses.StepLineSeriesDataItem=StepLineSeriesDataItem;var RadarColumn=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadarColumn",a}return o.prototype.createAssets=function(){this.radarColumn=this.createChild(Slice),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.radarColumn&&this.radarColumn.copyFrom(a.radarColumn)},o.prototype.getTooltipX=function(){var a=this.getPropertyValue("tooltipX");return isNumber$1(a)?a:this.radarColumn.getTooltipX()},o.prototype.getTooltipY=function(){var a=this.getPropertyValue("tooltipX");return isNumber$1(a)?a:this.radarColumn.getTooltipY()},o}(Column);registry.registeredClasses.RadarColumn=RadarColumn;var RadarColumnSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ColumnSeriesDataItem",a.applyTheme(),a}return o}(ColumnSeriesDataItem),RadarColumnSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadarColumnSeries",a.applyTheme(),a}return o.prototype.createColumnTemplate=function(){return new RadarColumn},o.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},o.prototype.disableUnusedColumns=function(a){a&&(a.column&&(a.column.__disabled=!0),each(this.axisRanges.iterator(),function(c){var d=a.rangesColumns.getKey(c.uid);d&&(d.__disabled=!0)}))},o.prototype.validateDataElementReal=function(a){var c=this,d=this.chart.startAngle,g=this.chart.endAngle,b=this.yField,j=this.yOpenField,$=this.xField,_e=this.xOpenField,st,rt,ut,gt,yt=this.getStartLocation(a),wt=this.getEndLocation(a),Ct=(g-d)/(this.dataItems.length*(this.end-this.start)),Pt=a.column;Pt||(Pt=this.columns.create(),a.column=Pt,copyProperties$1(this,Pt,visualProperties),copyProperties$1(this.columns.template,Pt,visualProperties),a.addSprite(Pt),Pt.paper=this.paper,this.setColumnStates(Pt));var At=Pt.width,Tt=100;At instanceof Percent&&(Tt=At.percent);var kt=round$1((wt-yt)*(1-Tt/100)/2,5);if(yt+=kt,wt-=kt,this.xAxis instanceof CategoryAxis&&this.yAxis instanceof CategoryAxis)ut=getDistance({x:this.yAxis.getX(a,b,0,"valueY"),y:this.yAxis.getY(a,b,0,"valueY")}),gt=getDistance({x:this.yAxis.getX(a,j,1,"valueY"),y:this.yAxis.getY(a,j,1,"valueY")}),st=this.xAxis.getAngle(a,_e,0,"valueX"),rt=this.xAxis.getAngle(a,$,1,"valueX"),d=d+yt*Ct,g=g-(1-wt)*Ct;else if(this.baseAxis==this.xAxis)ut=getDistance({x:this.yAxis.getX(a,b,a.locations[b],"valueY"),y:this.yAxis.getY(a,b,a.locations[b],"valueY")}),gt=getDistance({x:this.yAxis.getX(a,j,a.locations[j],"valueY"),y:this.yAxis.getY(a,j,a.locations[j],"valueY")}),st=this.xAxis.getAngle(a,_e,yt,"valueX"),rt=this.xAxis.getAngle(a,$,wt,"valueX"),d=d+yt*Ct,g=g-(1-wt)*Ct;else{if(ut=getDistance({x:this.yAxis.getX(a,b,yt,"valueY"),y:this.yAxis.getY(a,b,yt,"valueY")}),gt=getDistance({x:this.yAxis.getX(a,j,wt,"valueY"),y:this.yAxis.getY(a,j,wt,"valueY")}),isNumber$1(At)){var It=Math.abs(ut-gt);if(It>At){var Lt=(It-At)/2;ut+=Lt,gt-=Lt}}st=this.xAxis.getAngle(a,$,a.locations[$],"valueX"),rt=this.xAxis.getAngle(a,_e,a.locations[_e],"valueX")}if(rt<st){var Ft=rt;rt=st,st=Ft}st=fitToRange(st,d,g),rt=fitToRange(rt,d,g);var Nt=Pt.radarColumn;Nt.startAngle=st;var Ht=rt-st;Ht>0?(Nt.arc=Ht,Nt.radius=ut,Nt.innerRadius=gt,Pt.__disabled=!1,Pt.parent=this.columnsContainer,each(this.axisRanges.iterator(),function(dr){var hs=a.rangesColumns.getKey(dr.uid);hs||(hs=c.columns.create(),forceCopyProperties(c.columns.template,hs,visualProperties),copyProperties$1(dr.contents,hs,visualProperties),hs.dataItem&&remove(hs.dataItem.sprites,hs),a.addSprite(hs),hs.paper=c.paper,c.setColumnStates(hs),a.rangesColumns.setKey(dr.uid,hs));var us=hs.radarColumn;us.startAngle=st,us.arc=Ht,us.radius=ut,us.innerRadius=gt,us.invalid&&(us.paper=c.paper,us.validate()),hs.__disabled=!1,hs.parent=dr.contents})):this.disableUnusedColumns(a)},o.prototype.getPoint=function(a,c,d,g,b,j,$){j||(j="valueX"),$||($="valueY");var _e=this.yAxis.getX(a,d,b,$),st=this.yAxis.getY(a,d,b,$),rt=getDistance({x:_e,y:st});rt==0&&(rt=1e-5);var ut=this.xAxis.getAngle(a,c,g,j);return{x:rt*cos(ut),y:rt*sin(ut)}},o.prototype.getMaskPath=function(){var a=this.yAxis.renderer;return arc(a.startAngle,a.endAngle-a.startAngle,a.pixelRadius,a.pixelInnerRadius)},o.prototype.positionBulletReal=function(a,c,d){var g=this.xAxis,b=this.yAxis;(c<g.start||c>g.end||d<b.start||d>b.end)&&(a.visible=!1),a.moveTo(this.xAxis.renderer.positionToPoint(c,d))},o.prototype.setXAxis=function(a){e.prototype.setXAxis.call(this,a),this.updateRendererRefs()},o.prototype.setYAxis=function(a){e.prototype.setYAxis.call(this,a),this.updateRendererRefs()},o.prototype.updateRendererRefs=function(){var a=this.xAxis.renderer,c=this.yAxis.renderer;a.axisRendererY=c},o}(ColumnSeries);registry.registeredClasses.RadarColumnSeries=RadarColumnSeries;registry.registeredClasses.RadarColumnSeriesDataItem=RadarColumnSeriesDataItem;var FunnelSlice=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.slice=a.createChild(Sprite),a.slice.shouldClone=!1,a.slice.setElement(a.paper.add("path")),a.slice.isMeasured=!1,a.orientation="vertical",a.bottomWidth=percent(100),a.topWidth=percent(100),a.isMeasured=!1,a.width=10,a.height=10,a.expandDistance=0,a.className="FunnelSlice",a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.pixelPaddingTop,c=this.pixelPaddingBottom,d=this.pixelPaddingRight,g=this.pixelPaddingLeft,b=this.pixelWidth-d-g,j=this.pixelHeight-a-c,$=this.expandDistance,_e="";if(this.orientation=="vertical"){var st=relativeToValue(this.topWidth,b),rt=relativeToValue(this.bottomWidth,b),ut={x:(b-st)/2+g,y:a},gt={x:(b+st)/2+g,y:a},yt={x:(b+rt)/2+g,y:a+j},wt={x:(b-rt)/2+g,y:a+j},Ct={x:gt.x+(yt.x-gt.x)/2+$*j,y:gt.y+.5*j},Pt={x:ut.x+(wt.x-ut.x)/2-$*j,y:ut.y+.5*j},At=lineTo(yt),Tt=lineTo(ut);$!=0&&(At=quadraticCurveTo(yt,Ct),Tt=quadraticCurveTo(ut,Pt)),_e=moveTo(ut)+lineTo(gt)+At+lineTo(wt)+Tt,this.tickPoint={x:gt.x+(yt.x-gt.x)/2,y:gt.y+(yt.y-gt.y)/2}}else{var st=relativeToValue(this.topWidth,j),rt=relativeToValue(this.bottomWidth,j),kt={x:g,y:(j-st)/2+a},It={x:g,y:(j+st)/2+a},Lt={x:g+b,y:(j-rt)/2+a},Ft={x:g+b,y:(j+rt)/2+a},Ct={y:kt.y+(Lt.y-kt.y)/2-$*b,x:kt.x+.5*b},Pt={y:It.y+(Ft.y-It.y)/2+$*b,x:It.x+.5*b},At=lineTo(Lt),Tt=lineTo(It);$!=0&&(At=quadraticCurveTo(Lt,Ct),Tt=quadraticCurveTo(It,Pt)),_e=moveTo(It)+lineTo(kt)+At+lineTo(Ft)+Tt,this.tickPoint={y:It.y+(Ft.y-It.y)/2,x:It.x+(Ft.x-It.x)/2}}this.slice.path=_e,this.invalidateLayout()},o.prototype.getPoint=function(a,c){var d=this.pixelPaddingTop,g=this.pixelPaddingBottom,b=this.pixelPaddingRight,j=this.pixelPaddingLeft,$=this.pixelWidth-b-j,_e=this.pixelHeight-d-g;if(this.orientation=="vertical"){var st=relativeToValue(this.topWidth,$),rt=relativeToValue(this.bottomWidth,$),ut={x:($-st)/2+j,y:d},gt={x:($+st)/2+j,y:d},yt={x:($+rt)/2+j,y:d+_e},wt={x:($-rt)/2+j,y:d+_e},Ct=ut.x+(wt.x-ut.x)*c,Pt=gt.x+(yt.x-gt.x)*c;return{x:Ct+(Pt-Ct)*a,y:gt.y+(yt.y-gt.y)*c}}else{var st=relativeToValue(this.topWidth,_e),rt=relativeToValue(this.bottomWidth,_e),At={x:j,y:(_e-st)/2+d},Tt={x:j,y:(_e+st)/2+d},kt={x:j+$,y:(_e-rt)/2+d},It={x:j+$,y:(_e+rt)/2+d},Lt=At.y+(kt.y-At.y)*a,Ft=Tt.y+(It.y-Tt.y)*a;return{y:Lt+(Ft-Lt)*c,x:At.x+(kt.x-At.x)*a}}},Object.defineProperty(o.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(a){this.setPercentProperty("bottomWidth",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(a){this.setPercentProperty("topWidth",a,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(a){this.setPropertyValue("expandDistance",a,!0)},enumerable:!0,configurable:!0}),o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.slice&&this.slice.copyFrom(a.slice)},o}(Container);registry.registeredClasses.FunnelSlice=FunnelSlice;var FunnelTick=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._label=new MutableValueDisposer,a._slice=new MutableValueDisposer,a.className="FunnelTick",a.element=a.paper.add("path"),a._disposers.push(a._label),a._disposers.push(a._slice),a.setPropertyValue("locationX",0),a.setPropertyValue("locationY",0),a.applyTheme(),a}return o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.slice,c=a.getPoint(this.locationX,this.locationY);if(c){var d=this.label,g=a.dataItem.component,b=void 0,j=void 0,$=void 0;if(g.orientation=="vertical"){var _e=d.pixelX,st=d.pixelY;g.labelsOpposite||(_e+=d.maxRight),b=spritePointToSprite(c,a,this.parent),$=spritePointToSprite({x:_e,y:st},d.parent,this.parent),j={x:d.parent.pixelX-this.length,y:$.y},g.labelsOpposite||(j.x=d.parent.measuredWidth+this.length)}else{var _e=d.pixelX,st=d.pixelY;g.labelsOpposite||(st+=d.maxBottom),b=spritePointToSprite(c,a,this.parent),$=spritePointToSprite({x:_e,y:st},d.parent,this.parent),j={x:$.x,y:d.parent.pixelY-this.length},g.labelsOpposite||(j.y=d.parent.measuredHeight+this.length)}this.path=moveTo(b)+lineTo(j)+lineTo($)}},Object.defineProperty(o.prototype,"slice",{get:function(){return this._slice.get()},set:function(a){this._slice.set(a,new MultiDisposer([a.events.on("transformed",this.invalidate,this,!1),a.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){return this._label.get()},set:function(a){this._label.set(a,a.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(a){this.setPropertyValue("locationX",a,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(a){this.setPropertyValue("locationY",a,!1,!0)},enumerable:!0,configurable:!0}),o}(Tick);registry.registeredClasses.FunnelTick=FunnelTick;var FunnelSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="FunnelSeriesDataItem",a.events.on("visibilitychanged",function(){a.component&&a.component.invalidateDataItems()},a,!1),a.applyTheme(),a}return Object.defineProperty(o.prototype,"sliceLink",{get:function(){var a=this;if(!this._sliceLink){var c=this.component.sliceLinks.create();this._sliceLink=c,this._disposers.push(c),c.parent=this.component.slicesContainer,this._disposers.push(new Disposer(function(){a.component&&a.component.sliceLinks.removeValue(c)})),this.addSprite(c),c.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),o}(PercentSeriesDataItem),FunnelSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a._nextY=0,a.className="FunnelSeries",a.orientation="vertical",a.width=percent(100),a.height=percent(100),a.slicesContainer.width=percent(100),a.slicesContainer.height=percent(100),a._disposers.push(a.slicesContainer.events.on("maxsizechanged",a.invalidateDataItems,a,!1)),a.labelsOpposite=!0,a.labelsContainer.layout="absolute",a.bottomRatio=0,a.applyTheme(),a}return o.prototype.createSlice=function(){return new FunnelSlice},o.prototype.createTick=function(){return new FunnelTick},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},o.prototype.createDataItem=function(){return new FunnelSeriesDataItem},o.prototype.initSlice=function(a){a.isMeasured=!1,a.defaultState.properties.scale=1,a.observe("scale",this.handleSliceScale,this),a.observe(["dx","dy","x","y"],this.handleSliceMove,this),a.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var c=a.states.create("hover");c.properties.expandDistance=.2},o.prototype.initLabel=function(a){e.prototype.initLabel.call(this,a),a.verticalCenter="middle",a.horizontalCenter="middle",a.isMeasured=!0,a.padding(5,5,5,5)},o.prototype.validate=function(){e.prototype.validate.call(this),this._nextY=0},o.prototype.validateDataElements=function(){var a=this,c=this.slicesContainer,d=this.labelsContainer,g=this.labels.template;this.alignLabels?(g.interactionsEnabled=!0,c.isMeasured=!0,d.isMeasured=!0):(g.interactionsEnabled=!1,c.isMeasured=!1,d.isMeasured=!1);var b=0,j=0;this.dataItems.each(function($){hasValue($.value)&&(j++,$.value>0?b+=Math.abs($.getWorkingValue("value")/$.value):a.ignoreZeroValues||!$.visible||$.__disabled||$.isHiding?j--:b+=1)}),this._total=1/j*b,this._count=j,e.prototype.validateDataElements.call(this),this.arrangeLabels()},o.prototype.getNextValue=function(a){var c=a.index,d=a.getWorkingValue("value");if(c<this.dataItems.length-1){var g=this.dataItems.getIndex(c+1);if(d=g.getWorkingValue("value"),!g.visible||g.isHiding||g.__disabled||g.value==0&&this.ignoreZeroValues)return this.getNextValue(g)}return d},o.prototype.formDataElement=function(){},o.prototype.validateDataElement=function(a){var c=this,d=a.slice;d.orientation=this.orientation;var g=a.sliceLink;g.orientation=this.orientation;var b=a.tick,j=a.label;b.slice=d,b.label=j,hasValue(a.value)?(this.decorateSlice(a),each$2(a.sprites,function($){a.value==0&&c.ignoreZeroValues?$.__disabled=!0:$.__disabled=!1})):each$2(a.sprites,function($){$.__disabled=!0}),a.index==this.dataItems.length-1&&(g.disabled=!0),e.prototype.validateDataElement.call(this,a),g.fill=d.fill},o.prototype.decorateSlice=function(a){var c=a.slice,d=a.sliceLink,g=a.label,b=a.tick,j=this.slicesContainer.innerWidth,$=this.slicesContainer.innerHeight,_e=this.getNextValue(a),st=Math.abs(a.getWorkingValue("value")),rt=this.bottomRatio,ut=1;if(a.value!=0?ut=st/Math.abs(a.value):(a.__disabled||a.isHiding||!a.visible)&&(ut=1e-6),this.ignoreZeroValues&&a.value==0){a.__disabled=!0;return}else a.__disabled=!1;if(this._nextY==1/0&&(this._nextY=0),this.orientation=="vertical"){var gt=d.pixelHeight*ut;$=$+gt,c.topWidth=st/this.dataItem.values.value.high*j,c.bottomWidth=(st-(st-_e)*rt)/this.dataItem.values.value.high*j,d.topWidth=c.bottomWidth,d.bottomWidth=(st-(st-_e))/this.dataItem.values.value.high*j,c.y=this._nextY,c.height=Math.min(1e5,max$1(0,$/this._count*ut/this._total-gt)),c.x=j/2,this.alignLabels?g.x=void 0:g.x=c.x,g.y=c.pixelY+c.pixelHeight*b.locationY,this._nextY+=c.pixelHeight+gt,d.y=this._nextY-gt,d.x=c.x}else{var yt=d.pixelWidth*ut;j=j+yt,c.topWidth=st/this.dataItem.values.value.high*$,c.bottomWidth=(st-(st-_e)*rt)/this.dataItem.values.value.high*$,d.topWidth=c.bottomWidth,d.bottomWidth=(st-(st-_e))/this.dataItem.values.value.high*$,c.x=this._nextY,c.width=Math.min(1e5,j/this._count*ut*1/this._total-yt),c.y=$/2,this.alignLabels?g.y=this.labelsContainer.measuredHeight:g.y=c.y,g.x=c.pixelX+c.pixelWidth*b.locationX,this._nextY+=c.pixelWidth+yt,d.x=this._nextY-yt,d.y=c.y}},o.prototype.getLastLabel=function(a){if(a>0){var c=this.labels.getIndex(a);return c.__disabled||!c.visible?this.getLastLabel(a-1):c}},o.prototype.arrangeLabels=function(){if(this.alignLabels){var a=this.labels.length;if(a>1){var c=this.getLastLabel(a-1);if(c){var d=c.pixelY,g=c.pixelX;if(a>1){for(var b=a-2;b>=0;b--){var j=this.labels.getIndex(b);j.visible&&!j.__disabled&&(j.invalid&&j.validate(),this.orientation=="vertical"?j.pixelY+j.measuredHeight>d&&(j.y=Math.min(1e6,d-j.measuredHeight)):j.pixelX+j.measuredWidth>g&&(j.x=Math.min(1e6,g-j.measuredWidth)),d=j.pixelY,g=j.pixelX)}d=0,g=0;for(var b=0;b<a;b++){var j=this.labels.getIndex(b);j.visible&&!j.__disabled&&(j.invalid&&j.validate(),this.orientation=="vertical"?j.pixelY<d&&(j.y=Math.min(1e6,d)):j.pixelX<g&&(j.x=Math.min(1e6,g)),d+=j.measuredHeight,g+=j.measuredWidth)}}}}}},o.prototype.positionBullet=function(a){e.prototype.positionBullet.call(this,a);var c=a.dataItem,d=c.slice,g=a.locationX;isNumber$1(g)||(g=.5);var b=a.locationY;isNumber$1(b)||(b=1),a.x=d.pixelX+d.measuredWidth*g,a.y=d.pixelY+d.measuredHeight*b},Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),a=="vertical"?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(a){this.setPropertyValue("bottomRatio",a)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var a=new FunnelSlice;a.applyOnClones=!0,a.fillOpacity=.5,a.expandDistance=-.3,a.hiddenState.properties.opacity=0,this._disposers.push(a),this._sliceLinks=new ListTemplate(a),this._disposers.push(new ListDisposer(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),o.prototype.show=function(a){var c=this,d=this.startIndex,g=this.endIndex,b=this.defaultState.transitionDuration;isNumber$1(a)&&(b=a),options.animationsEnabled||(b=0);var j=0;each(indexed(this.dataItems.iterator()),function(_e){var st=_e[0],rt=_e[1];c.sequencedInterpolation&&(j=c.sequencedInterpolationDelay*st+b*(st-d)/(g-d)),rt.show(b,j,["value"])});var $=e.prototype.show.call(this,a);return $},o.prototype.hide=function(a){var c=this,d=["value"],g=0,b=this.startIndex,j=this.endIndex,$=0,_e=this.hiddenState.transitionDuration;isNumber$1(a)&&(_e=a),options.animationsEnabled||(_e=0),each(indexed(this.dataItems.iterator()),function(rt){var ut=rt[0],gt=rt[1];c.sequencedInterpolation&&($=c.sequencedInterpolationDelay*ut+_e*(ut-b)/(j-b)),gt.hide(_e,$,g,d)});var st=e.prototype.hide.call(this,a);return st&&!st.isFinished()&&st.delay($),st},o.prototype.setAlignLabels=function(a){e.prototype.setAlignLabels.call(this,a),this.ticks.template.disabled=!a;var c=this.labelsContainer;c&&(a?(c.height=void 0,c.width=void 0,c.margin(10,10,10,10)):(c.width=percent(100),c.height=percent(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(o.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(a){this.setPropertyValue("labelsOpposite",a);var c=this.labels.template,d="none",g="none";this.alignLabels?a?(this.labelsContainer.toFront(),this.orientation=="vertical"?(this.ticks.template.locationX=1,c.horizontalCenter="left",d="right"):(this.ticks.template.locationY=1,c.horizontalCenter="right",g="bottom")):(this.labelsContainer.toBack(),this.orientation=="vertical"?(this.ticks.template.locationX=0,d="left"):(g="top",this.ticks.template.locationY=0)):this.orientation=="vertical"?d="center":g="middle",c.align=d,c.valign=g,this.validateLayout(),this.ticks.each(function(b){b.invalidate()}),this.invalidateDataItems()},enumerable:!0,configurable:!0}),o}(PercentSeries);registry.registeredClasses.FunnelSeries=FunnelSeries;registry.registeredClasses.FunnelSeriesDataItem=FunnelSeriesDataItem;var PyramidSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PyramidSeriesDataItem",a.applyTheme(),a}return o}(FunnelSeriesDataItem),PyramidSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PyramidSeries",a.topWidth=percent(0),a.bottomWidth=percent(100),a.pyramidHeight=percent(100),a.valueIs="area",a.sliceLinks.template.width=0,a.sliceLinks.template.height=0,a.applyTheme(),a}return o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},o.prototype.createDataItem=function(){return new PyramidSeriesDataItem},o.prototype.validate=function(){e.prototype.validate.call(this),this._nextWidth=void 0},o.prototype.getNextValue=function(a){var c=a.index,d=a.getWorkingValue("value");if(c<this.dataItems.length-1){var g=this.dataItems.getIndex(c+1);d=g.getWorkingValue("value")}return d==0&&(d=1e-6),d},o.prototype.validateDataElements=function(){var a=this,c=this.slicesContainer.innerWidth,d=this.slicesContainer.innerHeight;if(this.dataItems.each(function(j){if(j.value>0){var $=j.getWorkingValue("value")/j.value,_e=j.sliceLink;a.orientation=="vertical"?d-=_e.pixelHeight*$:c-=_e.pixelWidth*$}}),this._pyramidHeight=relativeToValue(this.pyramidHeight,d),this._pyramidWidth=relativeToValue(this.pyramidHeight,c),this.orientation=="vertical"){var g=(d-this._pyramidHeight)/2;this.slicesContainer.y=g,this.labelsContainer.y=g,this.ticksContainer.y=g}else{var b=(c-this._pyramidWidth)/2;this.slicesContainer.x=b,this.labelsContainer.x=b,this.ticksContainer.x=b}e.prototype.validateDataElements.call(this)},o.prototype.decorateSlice=function(a){var c=this.dataItem.values.value.absoluteSum;if(c!=0){var d=a.slice,g=a.sliceLink,b=a.label,j=a.tick;this.getNextValue(a);var $=Math.abs(a.getWorkingValue("value")),_e=this._pyramidWidth,st=this._pyramidHeight,rt=this.slicesContainer.innerWidth,ut=this.slicesContainer.innerHeight,gt=g.pixelWidth,yt=g.pixelHeight;if((a.value==0||a.value==null)&&this.ignoreZeroValues?a.__disabled=!0:a.__disabled=!1,this.orientation=="vertical"){var wt=relativeToValue(this.topWidth,rt);isNumber$1(this._nextWidth)||(this._nextWidth=wt);var Ct=relativeToValue(this.bottomWidth,rt),Pt=this._nextWidth,At=Math.atan2(st,wt-Ct),Tt=Math.tan(Math.PI/2-At);Tt==0&&(Tt=1e-8);var kt=void 0,It=void 0;if(this.valueIs=="area"){var Lt=(wt+Ct)/2*st,Ft=Lt*$/c,Nt=Math.abs(Pt*Pt-2*Ft*Tt);kt=(Pt-Math.sqrt(Nt))/Tt,kt>0?It=(2*Ft-kt*Pt)/kt:It=Pt}else kt=st*$/c,It=Pt-kt*Tt;d.height=kt,d.width=rt,d.bottomWidth=It,d.topWidth=Pt,g.topWidth=d.bottomWidth,g.bottomWidth=d.bottomWidth,d.y=this._nextY,this.alignLabels?b.x=0:b.x=rt/2,b.y=d.pixelY+d.pixelHeight*j.locationY+d.dy,this._nextY+=d.pixelHeight+yt*$/Math.max(Math.abs(a.value),1e-8),g.y=this._nextY-yt,g.x=rt/2}else{var wt=relativeToValue(this.topWidth,ut);isNumber$1(this._nextWidth)||(this._nextWidth=wt);var Ct=relativeToValue(this.bottomWidth,ut),Pt=this._nextWidth,At=Math.atan2(_e,wt-Ct),Tt=Math.tan(Math.PI/2-At);Tt==0&&(Tt=1e-8);var Ht=void 0,It=void 0;if(this.valueIs=="area"){var Lt=(wt+Ct)/2*_e,Ft=Lt*$/c;Ht=(Pt-Math.sqrt(Pt*Pt-2*Ft*Tt))/Tt,It=(2*Ft-Ht*Pt)/Ht}else Ht=_e*$/c,It=Pt-Ht*Tt;d.width=Ht,d.height=ut,d.bottomWidth=It,d.topWidth=Pt,g.topWidth=d.bottomWidth,g.bottomWidth=d.bottomWidth,d.x=this._nextY,this.alignLabels?b.y=this.labelsContainer.measuredHeight:b.y=ut/2,b.x=d.pixelX+d.pixelWidth*j.locationX+d.dx,this._nextY+=d.pixelWidth+gt*$/Math.max(Math.abs(a.value),1e-8),g.x=this._nextY-gt,g.y=ut/2}this._nextWidth=d.bottomWidth}},Object.defineProperty(o.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(a){this.setPercentProperty("topWidth",a,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(a){this.setPercentProperty("pyramidHeight",a,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(a){this.setPercentProperty("bottomWidth",a,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(a){this.setPropertyValue("valueIs",a)&&this.invalidate()},enumerable:!0,configurable:!0}),o}(FunnelSeries);registry.registeredClasses.PyramidSeries=PyramidSeries;registry.registeredClasses.PyramidSeriesDataItem=PyramidSeriesDataItem;var PictorialStackedSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PictorialStackedSeriesDataItem",a.applyTheme(),a}return o}(PyramidSeriesDataItem),PictorialStackedSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="PictorialStackedSeries",a.topWidth=percent(100),a.bottomWidth=percent(100),a.valueIs="height",a.applyTheme(),a.startLocation=0,a.endLocation=1,a.align="center",a.valign="middle",a._maskSprite=a.slicesContainer.createChild(Sprite),a._maskSprite.visible=!1,a._maskSprite.zIndex=100,a._maskSprite.shouldClone=!1,a}return o.prototype.validateDataElements=function(){var a=this.slicesContainer.maxWidth,c=this.slicesContainer.maxHeight,d=this._maskSprite,g=d.measuredWidth/d.scale,b=d.measuredHeight/d.scale,j=min$1(c/b,a/g);j==1/0&&(j=1),j=max$1(.001,j);var $=this.startLocation,_e=this.endLocation,st=min$1(a,g*j),rt=min$1(c,b*j);d.scale=j,this.orientation=="vertical"?(this.topWidth=st+4,this.bottomWidth=st+4,this.pyramidHeight=rt*(_e-$),d.x=a/2,d.y=rt/2):(this.topWidth=rt+4,this.bottomWidth=rt+4,this.pyramidHeight=st*(_e-$),d.valign="middle",d.x=st/2,d.y=c/2),d.verticalCenter="middle",d.horizontalCenter="middle",e.prototype.validateDataElements.call(this);var ut,gt;this.orientation=="vertical"?(this.valign=="bottom"&&(ut=c-rt),this.valign=="middle"&&(ut=(c-rt)/2),this.valign=="top"&&(ut=0),this.align=="left"&&(gt=-(a-st)/2),this.align=="center"&&(gt=0),this.align=="right"&&(gt=(a-st)/2),this.slices.template.dy=$*rt,this.alignLabels&&(this.slicesContainer.dx=gt)):(this.valign=="bottom"&&(ut=(c-rt)/2),this.valign=="middle"&&(ut=0),this.valign=="top"&&(ut=-(c-rt)/2),this.align=="left"&&(gt=0),this.align=="center"&&(gt=(a-st)/2),this.align=="right"&&(gt=a-st),this.slices.template.dx=$*st,this.alignLabels&&(this.slicesContainer.dy=ut)),this.slicesContainer.x=gt,this.labelsContainer.x=gt,this.ticksContainer.x=gt,this.slicesContainer.y=ut,this.labelsContainer.y=ut,this.ticksContainer.y=ut,st>0&&rt>0&&(this.slicesContainer.mask=d)},o.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},o.prototype.createDataItem=function(){return new PictorialStackedSeriesDataItem},Object.defineProperty(o.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),o.prototype.initSlice=function(a){e.prototype.initSlice.call(this,a);var c=a.states.getKey("hover");c&&(c.properties.expandDistance=0)},Object.defineProperty(o.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(a){this.setPropertyValue("startLocation",a)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(a){this.setPropertyValue("endLocation",a)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),o}(PyramidSeries);registry.registeredClasses.PictorialStackedSeries=PictorialStackedSeries;registry.registeredClasses.PictorialStackedSeriesDataItem=PictorialStackedSeriesDataItem;var ConeColumn=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ConeColumn",a}return o.prototype.createAssets=function(){this.coneColumn=this.createChild(Cone),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.coneColumn&&this.coneColumn.copyFrom(a.coneColumn)},o}(Column);registry.registeredClasses.ConeColumn=ConeColumn;var ConeSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ConeSeriesDataItem",a.applyTheme(),a}return o}(ColumnSeriesDataItem),ConeSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ConeSeries",a.applyTheme(),a}return o.prototype.createColumnTemplate=function(){return new ConeColumn},o.prototype.getMaskPath=function(){var a=0,c=0,d=this.columns.getIndex(0);if(d)return this.baseAxis==this.xAxis?c=d.coneColumn.innerWidth/2+1:a=d.coneColumn.innerHeight/2+1,rectToPath({x:-a,y:0,width:this.xAxis.axisLength+a,height:this.yAxis.axisLength+c})},o.prototype.validateDataElementReal=function(a){e.prototype.validateDataElementReal.call(this,a);var c=a.column;if(c){var d=a.column.coneColumn;d.fill=a.column.fill,this.baseAxis==this.yAxis?d.orientation="horizontal":d.orientation="vertical"}},o}(ColumnSeries);registry.registeredClasses.ConeSeries=ConeSeries;registry.registeredClasses.ConeSeriesDataItem=ConeSeriesDataItem;var CurvedColumn=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="CurvedColumn",a}return o.prototype.createAssets=function(){this.curvedColumn=this.createChild(Sprite),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=percent(120),this.height=percent(120),this.column=this.curvedColumn},o.prototype.draw=function(){e.prototype.draw.call(this);var a=this.realWidth,c=this.realHeight,d=this.realX-this.pixelX,g=this.realY-this.pixelY,b;this.width;var j=1,$=1;this.orientation=="vertical"?(j=this.tension,b=[{x:0,y:c+g},{x:a/2,y:g},{x:a,y:c+g}]):($=this.tension,c=Math.abs(c),b=[{x:d,y:c},{x:d+a,y:c/2},{x:d,y:0}]);var _e=moveTo(b[0])+new Tension(j,$).smooth(b);this.column.path=_e},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.curvedColumn&&this.curvedColumn.copyFrom(a.curvedColumn)},Object.defineProperty(o.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(a){this.setPropertyValue("tension",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(a){this.setPropertyValue("orientation",a,!0)},enumerable:!0,configurable:!0}),o}(Column);registry.registeredClasses.CurvedColumn=CurvedColumn;var CurvedColumnSeriesDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="CurvedColumnSeriesDataItem",a.applyTheme(),a}return o}(ColumnSeriesDataItem),CurvedColumnSeries=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="CurvedColumnSeries",a.applyTheme(),a}return o.prototype.createColumnTemplate=function(){return new CurvedColumn},o.prototype.validateDataElementReal=function(a){e.prototype.validateDataElementReal.call(this,a);var c=a.column;if(c=a.column,c){var d=a.column.curvedColumn;d.fill=a.column.fill,this.baseAxis==this.yAxis?c.orientation="horizontal":c.orientation="vertical"}},o}(ColumnSeries);registry.registeredClasses.CurvedColumnSeries=CurvedColumnSeries;registry.registeredClasses.CurvedColumnSeriesDataItem=CurvedColumnSeriesDataItem;var CircleBullet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="CircleBullet";var c=a.createChild(Circle);return c.shouldClone=!1,c.radius=5,c.isMeasured=!1,a.circle=c,a.applyTheme(),a}return o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.circle.copyFrom(a.circle)},o}(Bullet);registry.registeredClasses.CircleBullet=CircleBullet;var ErrorBullet=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="ErrorBullet",a.errorLine=a.createChild(Sprite),a.errorLine.shouldClone=!1,a.width=20,a.height=20,a.strokeOpacity=1,a.isDynamic=!0,a}return o.prototype.validatePosition=function(){e.prototype.validatePosition.call(this);var a=this.pixelWidth/2,c=this.pixelHeight/2;this.errorLine.path=moveTo({x:-a,y:-c})+lineTo({x:a,y:-c})+moveTo({x:0,y:-c})+lineTo({x:0,y:c})+moveTo({x:-a,y:c})+lineTo({x:a,y:c})},o.prototype.copyFrom=function(a){e.prototype.copyFrom.call(this,a),this.errorLine.copyFrom(a.errorLine)},o}(Bullet);registry.registeredClasses.ErrorBullet=ErrorBullet;var NavigationBarDataItem=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="NavigationBarDataItem",a.applyTheme(),a}return Object.defineProperty(o.prototype,"name",{get:function(){return this.properties.name},set:function(a){this.setProperty("name",a)},enumerable:!0,configurable:!0}),o}(DataItem),NavigationBar=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.className="NavigationBar";var c=new InterfaceColorSet,d=new TextLink;d.valign="middle",d.paddingTop=8,d.paddingBottom=8,a.paddingBottom=2,a.links=new ListTemplate(d),a._disposers.push(new ListDisposer(a.links)),a._disposers.push(d),a._linksIterator=new ListIterator(a.links,function(){return a.links.create()}),a._linksIterator.createNewItems=!0;var g=new Triangle;g.direction="right",g.width=8,g.height=12,g.fill=c.getFor("alternativeBackground"),g.fillOpacity=.5,g.valign="middle",g.marginLeft=10,g.marginRight=10,a.separators=new ListTemplate(g),a._disposers.push(new ListDisposer(a.separators)),a._disposers.push(g);var b=new TextLink;return a.activeLink=b,b.copyFrom(d),b.valign="middle",b.fontWeight="bold",a.width=percent(100),a.layout="grid",a.dataFields.name="name",a.applyTheme(),a}return o.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),e.prototype.validateDataElements.call(this)},o.prototype.validateDataElement=function(a){e.prototype.validateDataElement.call(this,a);var c;if(a.index<this.dataItems.length-1){c=this._linksIterator.getLast(),c.parent=this;var d=this.separators.create();d.parent=this,d.valign="middle"}else c=this.activeLink,c.events.copyFrom(this.links.template.events),c.hide(0),c.show(),c.parent=this;c.dataItem=a,c.text=a.name,c.validate()},o}(Component);registry.registeredClasses.NavigationBar=NavigationBar;registry.registeredClasses.NavigationBarDataItem=NavigationBarDataItem;var Cursor=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a.point={x:0,y:0},a._stick="none",a.className="Cursor",a.width=percent(100),a.height=percent(100),a.shouldClone=!1,a.hide(0),a.trackable=!0,a.clickable=!0,a.isMeasured=!1;var c=getInteraction();return a._disposers.push(c.body.events.on("down",a.handleCursorDown,a)),a._disposers.push(c.body.events.on("up",a.handleCursorUp,a)),a._disposers.push(c.body.events.on("track",a.handleCursorMove,a)),a.applyTheme(),a}return o.prototype.handleCursorMove=function(a){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&a.touch)){if((this._generalBehavior!="zoom"&&this._generalBehavior!="pan"||!this.downPoint)&&!getInteraction().isLocalElement(a.pointer,this.paper.svg,this.uid)){(!this.isHidden||!this.isHiding)&&this.hide();return}var c=documentPointToSprite(a.pointer.point,this);return this._stick=="hard"&&this._stickPoint&&(c=this._stickPoint),this._stick=="soft"&&this._stickPoint&&(this.fitsToBounds(c)||(c=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",c),this.triggerMove(c),c}},o.prototype.hideReal=function(a){if(!((this._stick=="hard"||this._stick=="soft")&&this._stickPoint))return e.prototype.hideReal.call(this,a)},o.prototype.triggerMove=function(a,c,d){a.x=round$1(a.x,1),a.y=round$1(a.y,1),c&&(this._stick=c),(c=="hard"||c=="soft")&&(this._stickPoint=a),this.triggerMoveReal(a,d)},o.prototype.triggerMoveReal=function(a,c){(this.point.x!=a.x||this.point.y!=a.y||c)&&(this.point=a,this.invalidatePosition(),this.fitsToBounds(a)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},o.prototype.triggerDown=function(a){this.triggerDownReal(a)},o.prototype.triggerDownReal=function(a){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),getInteraction().setGlobalStyle(MouseCursorStyle.grabbing);break}},o.prototype.triggerUp=function(a){this.triggerUpReal(a)},o.prototype.triggerUpReal=function(a){system.requestFrame(),this.updatePoint(this.upPoint);var c=getInteraction();if(getDistance(this._upPointOrig,this._downPointOrig)>c.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),c.setGlobalStyle(MouseCursorStyle.default);break}this.downPoint=void 0,this.updateSelection()}},o.prototype.updateSelection=function(){},o.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},o.prototype.handleCursorDown=function(a){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&a.touch||!getInteraction().isLocalElement(a.pointer,this.paper.svg,this.uid))){blur();var c=documentPointToSprite(a.pointer.point,this);this._stick=="hard"&&this._stickPoint&&(c=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",c),this.fitsToBounds(c)&&(this._downPointOrig={x:c.x,y:c.y},a.event.cancelable&&this.shouldPreventGestures(a.touch)&&this.fitsToBounds(c)&&a.event.preventDefault(),this.triggerMove(c),this.triggerDown(c))}},o.prototype.shouldPreventGestures=function(a){return!0},o.prototype.updatePoint=function(a){},o.prototype.handleCursorUp=function(a){if(this.interactionsEnabled&&!(!this.downPoint&&!getInteraction().isLocalElement(a.pointer,this.paper.svg,this.uid))){var c=documentPointToSprite(a.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",c),!(!this.downPoint||!this.fitsToBounds(this.downPoint))&&(this._stick=="hard"&&this._stickPoint&&(c=this._stickPoint),this._upPointOrig={x:c.x,y:c.y},this.triggerMove(c),this.triggerUp(c))}},Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(a){this._chart=a,hasValue(this._chart.plotContainer)&&getInteraction().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),o}(Container);registry.registeredClasses.Cursor=Cursor;var XYCursor=function(e){__extends(o,e);function o(){var a=e.call(this)||this;a._lineX=new MutableValueDisposer,a._lineY=new MutableValueDisposer,a._xAxis=new MutableValueDisposer,a._yAxis=new MutableValueDisposer,a._snapToDisposers=[],a.className="XYCursor",a.behavior="zoomX",a.maxPanOut=.1;var c=new InterfaceColorSet;a.snapOnPan=!0;var d=a.createChild(Sprite);d.shouldClone=!1,d.fillOpacity=.2,d.fill=c.getFor("alternativeBackground"),d.isMeasured=!1,d.visible=!1,d.interactionsEnabled=!1,a.selection=d,a._disposers.push(a.selection);var g=a.createChild(Sprite);g.shouldClone=!1,g.stroke=c.getFor("grid"),g.fill=color(),g.strokeDasharray="3,3",g.isMeasured=!1,g.strokeOpacity=.4,g.interactionsEnabled=!1,g.y=0,a.lineX=g,a._disposers.push(a.lineX);var b=a.createChild(Sprite);return b.shouldClone=!1,b.stroke=c.getFor("grid"),b.fill=color(),b.strokeDasharray="3,3",b.isMeasured=!1,b.strokeOpacity=.4,b.interactionsEnabled=!1,b.x=0,a.lineY=b,a._disposers.push(a.lineY),a.events.on("sizechanged",a.updateSize,a,!1),a._disposers.push(a._lineX),a._disposers.push(a._lineY),a._disposers.push(a._xAxis),a._disposers.push(a._yAxis),a.mask=a,a.hideSeriesTooltipsOnSelection=!0,a.applyTheme(),a}return o.prototype.updateSize=function(){this.lineX&&(this.lineX.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=moveTo({x:0,y:0})+lineTo({x:this.innerWidth,y:0}))},o.prototype.updateSelection=function(){if(this._usesSelection){var a=this.downPoint,c=this.behavior;if(a){var d=this.point;this.lineX&&(d.x=this.lineX.pixelX),this.lineY&&(d.y=this.lineY.pixelY);var g=this.selection,b=Math.min(d.x,a.x),j=Math.min(d.y,a.y),$=round$1(Math.abs(a.x-d.x),this._positionPrecision),_e=round$1(Math.abs(a.y-d.y),this._positionPrecision);switch(c){case"zoomX":j=0,_e=this.pixelHeight;break;case"zoomY":b=0,$=this.pixelWidth;break;case"selectX":j=0,_e=this.pixelHeight;break;case"selectY":b=0,$=this.pixelWidth;break}g.x=b,g.y=j,g.path=rectangle($,_e),g.validatePosition()}else this._generalBehavior!="select"&&this.selection.hide()}},o.prototype.fixPoint=function(a){return a.x=Math.max(0,a.x),a.y=Math.max(0,a.y),a.x=Math.min(this.pixelWidth,a.x),a.y=Math.min(this.pixelHeight,a.y),a},o.prototype.triggerMoveReal=function(a,c){e.prototype.triggerMoveReal.call(this,a,c);var d=this.snapToSeries;if(d&&!this.downPoint)if(d instanceof XYSeries)d.isHidden&&this.updateLinePositions(a);else{var g=!0;each$2(d,function(b){b.isHidden||(g=!1)}),g&&this.updateLinePositions(a)}else this.updateLinePositions(a);this.downPoint&&getDistance(this.downPoint,a)>3&&this._generalBehavior=="pan"&&(this.getPanningRanges(),this.dispatch("panning"))},o.prototype.updateLinePositions=function(a){a=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=a.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=a.y),this.updateSelection()},o.prototype.triggerDownReal=function(a){if(this.visible&&!this.isHiding)if(this._generalBehavior=="select"&&(this.selection.parent=this.parent),this.fitsToBounds(a)){this.downPoint={x:a.x,y:a.y},this.updatePoint(a),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var c=this.selection,d=this.downPoint.x,g=this.downPoint.y;this._usesSelection&&(c.x=d,c.y=g,c.path="",c.show()),e.prototype.triggerDownReal.call(this,a)}else this.downPoint=void 0;else this.downPoint=void 0},o.prototype.updatePoint=function(a){this.lineX&&(a.x=this.lineX.pixelX),this.lineY&&(a.y=this.lineY.pixelY)},o.prototype.triggerUpReal=function(a){if(this.hasMoved())this.downPoint&&(this.upPoint=a,this.updatePoint(this.upPoint),this._generalBehavior!="pan"&&this.getRanges(),this._generalBehavior!="select"&&this.selection.hide(),e.prototype.triggerUpReal.call(this,a));else{if(this._generalBehavior!="select"?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),this._generalBehavior=="pan"){var c=getInteraction();c.setGlobalStyle(MouseCursorStyle.default)}this.dispatchImmediately("behaviorcanceled")}this.downPoint=void 0,this.dispatch("cursorpositionchanged")},o.prototype.hasMoved=function(){var a;return this.behavior=="zoomX"||this.behavior=="panX"?a=getHorizontalDistance(this._upPointOrig,this._downPointOrig):this.behavior=="zoomY"||this.behavior=="panY"?a=getVerticalDistance(this._upPointOrig,this._downPointOrig):a=getDistance(this._upPointOrig,this._downPointOrig),a>getInteraction().getHitOption(this.interactions,"hitTolerance")},o.prototype.getPanningRanges=function(){var a=round$1(this.downPoint.x/this.innerWidth,5),c=1-round$1(this.downPoint.y/this.innerHeight,5),d=round$1(this.point.x/this.innerWidth,5),g=1-round$1(this.point.y/this.innerHeight,5),b=a-d,j=c-g;this.xRange={start:b,end:1+b},this.yRange={start:j,end:1+j},this.behavior=="panX"&&(this.yRange.start=0,this.yRange.end=1),this.behavior=="panY"&&(this.xRange.start=0,this.xRange.end=1)},o.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY),this.selection;var a=round$1(this.downPoint.x/this.innerWidth,5),c=round$1(this.upPoint.x/this.innerWidth,5),d=1-round$1(this.downPoint.y/this.innerHeight,5),g=1-round$1(this.upPoint.y/this.innerHeight,5);this.xRange={start:min$1(a,c),end:max$1(a,c)},this.yRange={start:min$1(d,g),end:max$1(d,g)}},Object.defineProperty(o.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(a){this.setPropertyValue("behavior",a,!0),this._usesSelection=!1,a.indexOf("zoom")!=-1&&(this._generalBehavior="zoom",this._usesSelection=!0),a.indexOf("select")!=-1&&(this._generalBehavior="select",this._usesSelection=!0),a.indexOf("pan")!=-1&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),o.prototype.shouldPreventGestures=function(a){return(!this.interactions.isTouchProtected||!a)&&this.behavior!="none"},Object.defineProperty(o.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(a){this.setPropertyValue("fullWidthLineX",a),a||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(a){this.setPropertyValue("fullWidthLineY",a),a||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(a){this.setPropertyValue("hideSeriesTooltipsOnSelection",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(a){this.setPropertyValue("maxTooltipDistance",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(a){this.setPropertyValue("maxPanOut",a)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(a){var c=this;this._xAxis.get()!=a&&this._xAxis.set(a,new MultiDisposer([a.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),a.events.on("rangechangestarted",function(d){c.hide(0),c.preventShow=!0},void 0,!1),a.events.on("rangechangeended",function(d){c.preventShow=!1,c.hide(0),c.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(a){var c=this;this._yAxis.get()!=a&&this._yAxis.set(a,new MultiDisposer([a.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),a.events.on("rangechangestarted",function(d){c.hide(0),c.__disabled=!0},void 0,!1),a.events.on("rangechangeended",function(d){c.__disabled=!1,c.hide(0),c.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),o.prototype.handleXTooltipPosition=function(a){var c=this.xAxis.tooltip,d=svgPointToSprite({x:c.pixelX,y:c.pixelY},this),g=d.x;if(d.y=1,this.lineX&&(this.lineX.x=g,this.fitsToBounds(d)||this.hide()),this.xAxis&&this.fullWidthLineX){var b=this.xAxis.currentItemStartPoint,j=this.xAxis.currentItemEndPoint;if(b&&j){this.lineX.x=g;var $=j.x-b.x;this.lineX.path=rectangle($,this.innerHeight,-$/2)}}},o.prototype.handleYTooltipPosition=function(a){var c=this.yAxis.tooltip,d=svgPointToSprite({x:c.pixelX,y:c.pixelY},this),g=d.y;if(d.x=1,this.lineY&&(this.lineY.y=g,this.fitsToBounds(d)||this.hide()),this.yAxis&&this.fullWidthLineY){var b=this.yAxis.currentItemStartPoint,j=this.yAxis.currentItemEndPoint;if(b&&j){this.lineY.y=g;var $=j.y-b.y;this.lineY.path=rectangle(this.innerWidth,$,0,-$/2)}}},Object.defineProperty(o.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(a){a?(a.setElement(this.paper.add("path")),this._lineX.set(a,a.events.on("positionchanged",this.updateSelection,this,!1)),a.interactionsEnabled=!1,a.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(a){a?(a.setElement(this.paper.add("path")),this._lineY.set(a,a.events.on("positionchanged",this.updateSelection,this,!1)),a.parent=this,a.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selection",{get:function(){return this._selection},set:function(a){this._selection=a,a&&(a.element=this.paper.add("path"),a.parent=this)},enumerable:!0,configurable:!0}),o.prototype.processConfig=function(a){var c=this;if(a&&(hasValue(a.xAxis)&&isString$1(a.xAxis)&&(this.map.hasKey(a.xAxis)?a.xAxis=this.map.getKey(a.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+a.xAxis+'" found for `xAxis`'),delete a.xAxis)),hasValue(a.yAxis)&&isString$1(a.yAxis)&&(this.map.hasKey(a.yAxis)?a.yAxis=this.map.getKey(a.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+a.yAxis+'" found for `yAxis`'),delete a.yAxis)),hasValue(a.snapToSeries))){var d=isArray$1(a.snapToSeries)?a.snapToSeries:[a.snapToSeries],g=!1;each$2(d,function(b,j){isString$1(b)&&(c.map.hasKey(b)?d[j]=c.map.getKey(b):(c.processingErrors.push('[XYCursor] No series with id "'+b+'" found for `series`'),g=!0))}),g?delete a.snapToSeries:a.snapToSeries=d}e.prototype.processConfig.call(this,a)},Object.defineProperty(o.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(a){var c=this;this.setPropertyValue("snapToSeries",a)&&(a instanceof XYSeries&&(a=[a]),this._snapToDisposers&&each$2(this._snapToDisposers,function(d){d.dispose()}),this._snapToDisposers=[],a&&each$2(a,function(d){c._snapToDisposers.push(d.events.on("tooltipshownat",function(){c.handleSnap(d)},void 0,!1))}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"snapOnPan",{get:function(){return this.getPropertyValue("snapOnPan")},set:function(a){this.setPropertyValue("snapOnPan",a)},enumerable:!0,configurable:!0}),o.prototype.handleSnap=function(a){if(!this.downPoint){var c=a.getTooltipX()+a.xAxis.pixelX,d=a.getTooltipY()+a.yAxis.pixelY,g=a.xAxis,b=a.yAxis;g&&g.renderer.opposite&&(d-=this.pixelHeight),this.point={x:c,y:d},this.getPositions();var j=c,$=d;c-=this.pixelWidth,b&&b.renderer.opposite&&(c+=this.pixelWidth);var _e=a.tooltip,st=_e.animationDuration,rt=_e.animationEasing;g instanceof ValueAxis&&!(g instanceof DateAxis)&&b instanceof ValueAxis&&!(b instanceof DateAxis)?(a.yAxis.showTooltipAtPosition(this.yPosition),a.xAxis.showTooltipAtPosition(this.xPosition)):(a.baseAxis==a.xAxis&&a.yAxis.showTooltipAtPosition(this.yPosition),a.baseAxis==a.yAxis&&a.xAxis.showTooltipAtPosition(this.xPosition)),this.lineY.x=c,this.lineX.y=d,this.xAxis||this.lineX.animate([{property:"x",to:j}],st,rt),this.yAxis||this.lineY.animate([{property:"y",to:$}],st,rt)}},o.prototype.dispose=function(){this.hide(0),e.prototype.dispose.call(this)},o}(Cursor);registry.registeredClasses.XYCursor=XYCursor;var RadarCursor=function(e){__extends(o,e);function o(){var a=e.call(this)||this;return a.className="RadarCursor",a.radius=percent(100),a.innerRadius=percent(0),a.applyTheme(),a.mask=void 0,a}return o.prototype.fitsToBounds=function(a){var c=getDistance(a);return c<this.truePixelRadius+1&&c>this.pixelInnerRadius-1},Object.defineProperty(o.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(a){this.setPropertyValue("startAngle",a,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(a){this.setPropertyValue("endAngle",a,!0)},enumerable:!0,configurable:!0}),o.prototype.triggerMoveReal=function(a,c){(!this.xAxis||this.xAxis&&(!this.xAxis.cursorTooltipEnabled||this.xAxis.tooltip.disabled))&&this.updateLineX(this.point),(!this.yAxis||this.yAxis&&(!this.yAxis.cursorTooltipEnabled||this.yAxis.tooltip.disabled))&&this.updateLineY(this.point),this.updateSelection(),e.prototype.triggerMoveReal.call(this,a,c)},o.prototype.updateLineX=function(a){var c=this.pixelRadius,d=this.startAngle,g=this.endAngle,b=this.pixelInnerRadius;if(c>0&&isNumber$1(d)&&isNumber$1(g)&&isNumber$1(b)){var j=fitAngleToRange(getAngle(a),d,g),$=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var _e=this.xAxis.currentItemStartPoint,st=this.xAxis.currentItemEndPoint;if(_e&&st){var rt=fitAngleToRange(getAngle(_e),d,g),ut=fitAngleToRange(getAngle(st),d,g),gt=ut-rt;d<g?gt<0&&(gt+=360):gt>0&&(gt-=360),j-=gt/2,$=moveTo({x:b*cos(j),y:b*sin(j)})+lineTo({x:c*cos(j),y:c*sin(j)})+arcTo(j,gt,c)+lineTo({x:b*cos(j+gt),y:b*sin(j+gt)})+arcTo(j+gt,-gt,b)}}$||($=moveTo({x:b*cos(j),y:b*sin(j)})+lineTo({x:c*cos(j),y:c*sin(j)})),this.lineX.path=$}}},o.prototype.updateLineY=function(a){if(this.lineY&&this.lineY.visible){var c=this.startAngle,d=this.endAngle,g=this.truePixelRadius,b=fitToRange(getDistance(a),0,this.truePixelRadius);if(isNumber$1(b)&&isNumber$1(c)){this.lineY.moveTo({x:0,y:0});var j=void 0,$=d-c;if(this.yAxis&&this.fullWidthLineY){var _e=this.yAxis.currentItemStartPoint,st=this.yAxis.currentItemEndPoint;if(_e&&st){var rt=fitToRange(getDistance(_e),0,g);b=fitToRange(getDistance(st),0,g),j=moveTo({x:b*cos(c),y:b*sin(c)})+arcTo(c,$,b),j+=moveTo({x:rt*cos(d),y:rt*sin(d)})+arcTo(d,-$,rt)}}j||(j=moveTo({x:b*cos(c),y:b*sin(c)})+arcTo(c,d-c,b)),this.lineY.path=j}}},o.prototype.updateSelection=function(){if(this._usesSelection){var a=this.downPoint;if(a){var c=this.point,d=this.pixelRadius,g=this.truePixelRadius,b=this.pixelInnerRadius,j=Math.min(this.startAngle,this.endAngle),$=Math.max(this.startAngle,this.endAngle),_e=fitAngleToRange(getAngle(a),j,$),st=fitAngleToRange(getAngle(c),j,$),rt=getDistance(a);if(rt<g){var ut=fitToRange(getDistance(c),0,g);this._prevAngle=st;var gt=moveTo({x:0,y:0}),yt=sin(_e),wt=cos(_e),Ct=sin(st),Pt=cos(st),At=this.behavior;At=="zoomX"||At=="selectX"?gt+=lineTo({x:d*wt,y:d*yt})+arcTo(_e,st-_e,d)+lineTo({x:b*Pt,y:b*Ct})+arcTo(st,_e-st,b):At=="zoomY"||At=="selectY"?gt=moveTo({x:ut*cos(j),y:ut*sin(j)})+arcTo(j,$-j,ut)+lineTo({x:rt*cos($),y:rt*sin($)})+arcTo($,j-$,rt)+closePath():At=="zoomXY"&&(gt=moveTo({x:ut*cos(_e),y:ut*sin(_e)})+arcTo(_e,st-_e,ut)+lineTo({x:rt*cos(st),y:rt*sin(st)})+arcTo(st,_e-st,rt)+closePath()),this.selection.path=gt}this.selection.moveTo({x:0,y:0})}}},o.prototype.getPositions=function(){var a=this.chart;if(a){var c=this.pixelInnerRadius,d=this.truePixelRadius-c,g=this.startAngle,b=this.endAngle,j=fitAngleToRange(getAngle(this.point),g,b),$=(j-g)/(b-g);this.xPosition=$,this.yPosition=fitToRange((getDistance(this.point)-c)/d,0,1)}},o.prototype.updatePoint=function(a){},o.prototype.handleXTooltipPosition=function(a){if(this.xAxis.cursorTooltipEnabled){var c=this.xAxis.tooltip;this.updateLineX(svgPointToSprite({x:c.pixelX,y:c.pixelY},this))}},o.prototype.handleYTooltipPosition=function(a){if(this.yAxis.cursorTooltipEnabled){var c=this.yAxis.tooltip;this.updateLineY(svgPointToSprite({x:c.pixelX,y:c.pixelY},this))}},o.prototype.updateLinePositions=function(a){},o.prototype.getRanges=function(){var a=this.downPoint;if(a){var c=this.upPoint,d=this.chart;if(d){var g=this.pixelRadius,b=this.startAngle,j=this.endAngle,$=fitAngleToRange(getAngle(a),this.startAngle,this.endAngle),_e=fitAngleToRange(getAngle(c),this.startAngle,this.endAngle),st=fitToRange(getDistance(a),0,g),rt=fitToRange(getDistance(c),0,g),ut=0,gt=1,yt=0,wt=1,Ct=this.behavior;if(Ct=="zoomX"||Ct=="selectX"||Ct=="zoomXY"||Ct=="selectXY"){var Pt=j-b;ut=round$1(($-b)/Pt,5),gt=round$1((_e-b)/Pt,5)}(Ct=="zoomY"||Ct=="selectY"||Ct=="zoomXY"||Ct=="selectXY")&&(yt=round$1(st/g,5),wt=round$1(rt/g,5)),this.xRange={start:Math.min(ut,gt),end:Math.max(ut,gt)},this.yRange={start:Math.min(yt,wt),end:Math.max(yt,wt)},this.behavior=="selectX"||this.behavior=="selectY"||this.behavior=="selectXY"||this.selection.hide()}}},o.prototype.updateSize=function(){},Object.defineProperty(o.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(a){this.setPercentProperty("radius",a,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"truePixelRadius",{get:function(){return relativeToValue(percent(100),min$1(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(a){this.setPercentProperty("innerRadius",a,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pixelInnerRadius",{get:function(){var a=this.innerRadius;return a instanceof Percent&&(a=percent(100*a.value*this.chart.innerRadiusModifyer)),relativeRadiusToValue(a,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),o.prototype.fixPoint=function(a){return a},o}(XYCursor);registry.registeredClasses.RadarCursor=RadarCursor;var theme=function(e){is(e,"ColorSet")&&(e.list=[color("#F44336"),color("#E91E63"),color("#9C27B0"),color("#673AB7"),color("#3F51B5"),color("#2196F3"),color("#03A9F4"),color("#00BCD4"),color("#009688"),color("#4CAF50"),color("#8BC34A"),color("#CDDC39"),color("#FFEB3B"),color("#FFC107"),color("#FF9800"),color("#FF5722"),color("#795548"),color("#9E9E9E"),color("#607D8B")],e.minLightness=.2,e.maxLightness=.7,e.reuse=!0),is(e,"ResizeButton")&&(e.background.cornerRadiusTopLeft=20,e.background.cornerRadiusTopRight=20,e.background.cornerRadiusBottomLeft=20,e.background.cornerRadiusBottomRight=20),is(e,"Tooltip")&&(e.animationDuration=800)};useTheme(theme);const config$1={series:[{type:"PieSeries",dataFields:{value:"litres",category:"country"}},{type:"PieSeries",dataFields:{value:"percentage",category:"category"}}],data:[{category:"Ecosystem",percentage:80},{category:"Public Sale",percentage:.05},{category:"Private & OTC Sales",percentage:9},{category:"Team",percentage:10},{category:"Community Reward",percentage:.95}]},Egax=()=>jsxRuntimeExports.jsxs("div",{className:"egox_token_div",children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"Egochain (EGAX) coin"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_para",children:"Egochain's robust fee structure ensures network sustainability and incentivizes participation through token distribution."})]}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area2",children:jsxRuntimeExports.jsx("img",{src:"/img/1_inch_token_image_dummy.png",alt:"",className:"egox_token_div_section1area2_img"})})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3b",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_titleb",children:"Tokenomics"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area_body",children:[jsxRuntimeExports.jsx(default_1,{config:config$1,id:"amcharts-4",chartTypeClass:PieChart}),jsxRuntimeExports.jsxs("div",{className:"supply_div",children:[jsxRuntimeExports.jsx("div",{className:"supply_div_title",children:"Token Supply"}),jsxRuntimeExports.jsx("div",{className:"supply_div_amnt",children:"50,000,000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mobile_supply_div",children:["Total Supply"," ",jsxRuntimeExports.jsx("div",{className:"mobile_supply_div_span",children:"50,000,000"})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3b",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_titleb",children:"Token Distribution Schedule"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area",children:[jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Public Sale"}),jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_body",children:jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"100% of tokens unlocked at purchase."})})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Private Sale"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1_body",children:[jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"40% of tokens unlocked at purchase."}),jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"3 months lockup period followed by 10% of tokens unlocked monthly for the remaining period"})]})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Team, Partnerships & Advisory"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1_body",children:[jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"18 months full lockup period"}),jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"15% of tokens unlocked quarterly thereafter."})]})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Marketing"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1_body",children:[jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"5% of tokens unlocked at purchase"}),jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"6 months lockup period followed by 5% of tokens unlocked quarterly thereafter."})]})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Ecosystem"}),jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_body",children:jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"80% of the total token supply (40 million tokens) will be distributed for ecosystem growth over a 10-year period according to pre-defined limitations."})})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"home_div_section4_area",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Transaction fees (EGAX)"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Cover operational costs and prevent resource abuse. System fees are burned, while network fees reward consensus nodes, driving their commitment."})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2a",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Accessibility and Ease of Use"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2_para",children:["* Minimal EGaX Unit: 0.00 000001 EGAX, enabling microtransactions and fostering affordability.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Staking-Free Token Claiming: No EGAX staking required to receive earned tokens.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Seamless EGAX Claiming : Apex EVs integrate a built-in claim function for effortless token acquisition."]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div2",children:jsxRuntimeExports.jsx(Icon,{})})]})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light4.svg",alt:"",className:"home_div_section1_bg_light4"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]})]}),Privacy=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("section",{className:"heroSection4",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"heroArea4",children:[jsxRuntimeExports.jsxs("div",{className:"heroTxts4",children:[jsxRuntimeExports.jsx("h1",{className:"heroTitle4","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:"Privacy Policy"}),jsxRuntimeExports.jsxs("p",{className:"hero4para","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:["NEED SUPPORT:"," ",jsxRuntimeExports.jsx("a",{href:"#",className:"egrEmailLink",children:"support@egochain.org"})]})]}),jsxRuntimeExports.jsx("div",{className:"hero-images4","data-aos":"fade-left",children:jsxRuntimeExports.jsx("img",{src:"/img/privacy-image.svg",alt:"",className:"privacy"})})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTextList",children:[jsxRuntimeExports.jsx("span",{className:`privacyTextList_span\r
            `,children:"Last Date Updated 10 January 2024."}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["1. ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"About this Notice"})]})}),jsxRuntimeExports.jsx("p",{className:"AboutUsPara","data-aos":"fade-right",children:"This Privacy and Cookie Notice provides information on how egochain collects and processes your personal data when you visit our website or mobile applications."})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["2."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"The Data We Collect About You?"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["We collect your personal data in order to provide and continually improve our products and services. We may collect, use, store and transfer the following different kinds of personal data about you: Here for marketing and personal data optimization purposes. egochain also uses Google Digital Marketing to propose targeted offers. To find out more:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information you provide to us: We receive and store the information you provide to us including your identity data, contact data, delivery address and financial data.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information on your use of our website and/or mobile applications: We automatically collect and store certain types of information regarding your use of the egochain including information about your searches, views, downloads and transactions.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information from third parties and publicly available sources: We may receive information about you from third parties including our carriers; payment service providers; merchants/brands; and advertising service providers."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle ","data-aos":"fade-right",children:["3."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"Cookies and How We Use Them"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["A cookie is a small file of letters and numbers that we put on your computer if you agree.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Cookies allow us to distinguish you from other users of our website and mobile applications, which helps us to provide you with an enhanced browsing experience. For example we use cookies for the following purposes: Recognising and counting the number of visitors and to see how visitors move around the site when they are using it (this helps us to improve the way our website works, for example by ensuring that users can find what they are looking for). ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Identifying your preferences and subscriptions e.g. language settings and Sending you newsletters and commercial/advertising messages tailored to your interests.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Our approved third parties may also set cookies when you use our website. Third parties include search engines, providers of measurement and analytics services, social media networks and advertising companies."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["4."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"How We Use Your Personal Data"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["We use your personal data to operate, provide, develop and improve the products and services that we offer, including the following: Managing your relationship with us. ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Enabling you to participate in promotions, competitions and surveys. Improving our website, applications, products and services Recommending/advertising products or services which may be of interest to you.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Complying with our legal obligations, including verifying your identity where necessary."]})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/projects-blurbg.png",alt:"",className:"privacyBlurBg"}),jsxRuntimeExports.jsx("img",{src:"/img/privacy-rightbg.png",alt:"",className:"privacyrightBlurBg"})]})}),TermsAndConditions=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("section",{className:"heroSection4",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"heroArea4",children:[jsxRuntimeExports.jsxs("div",{className:"heroTxts4",children:[jsxRuntimeExports.jsx("h1",{className:"heroTitle4","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:"Terms & Conditions"}),jsxRuntimeExports.jsxs("p",{className:"hero4para","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:["NEED SUPPORT:"," ",jsxRuntimeExports.jsx("a",{href:"#",className:"egrEmailLink",children:"support@egochain.org"})]})]}),jsxRuntimeExports.jsx("div",{className:"hero-images4","data-aos":"fade-left",children:jsxRuntimeExports.jsx("img",{src:"/img/privacy-image.svg",alt:"",className:"privacy"})})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTextList",children:[jsxRuntimeExports.jsx("span",{className:`privacyTextList_span
            `,children:"Last Date Updated 10 January 2024."}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Introduction"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 1. "})," Please read these terms of use carefully before you start to use the Website, these will apply to your use of the Website. We recommend that you print a copy of the Terms for future reference."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 2. "}),"The website",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org",style:{color:"#229e54"},children:[" ","https://egochain.org"]})," ","is operated by egochain Technologies Limited (“egochain” “we” “our” or “us”) a limited liability company incorporated under the Nigerian Companies and Allied Matters Act with registration Number 1832671."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 3. "}),'"you" and "your" means a user of the website at'," ",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org",style:{color:"#229e54"},children:[" ","https://egochain.org"]})," ",'(the "Website").']})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Acceptance of Terms and Conditions"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 4. "}),"By accessing or using www.egochain.org or any other website operated by us where these terms and conditions are posted, you acknowledge that you agree to and are subject to the following terms and conditions, as well as the Privacy Policy (collectively called “Terms”/“Agreement”). The Privacy Policy is available at",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org/privacy",style:{color:"#229e54"},children:[" ","https://egochain.org/privacy"]})]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 5. "}),"If you do not fully agree to these Terms, you are not authorized to access or otherwise use the website. Under these Terms, “use” or “access” of the website specifically includes any direct or indirect access or use of the website or any cached version of the website and any direct or indirect access or use of any information or content on the website, regardless of how it is obtained."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:"6. "}),"You are not authorized to use this website unless you are able to enter into legally binding contracts. We do not knowingly collect the information of anyone who cannot validly enter into a legally binding contract. In essence, by using our website, you represent and warrant that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" a."}),"You are at least 18 years old.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" b."}),"You have the right, authority and capacity to enter into this agreement and to abide by the terms and conditions of these Terms, and that you will so abide. Where you enter into this agreement on behalf of a company or other organization, you represent and warrant that you have authority to act on behalf of that entity and to bind that entity to this agreement."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle ","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Disclaimer"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 7. "}),"We do not guarantee that our Website, or any content on them, will always be available or be uninterrupted. Access to our Website is permitted on a temporary basis. We may suspend, withdraw, discontinue or change all or any part of our Website without notice. We will not be liable to you if for any reason our Website is unavailable at any time or for any period. You are responsible for making all arrangements necessary for you to have access to our Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 8. "}),"It is your responsibility to ensure that the Website is suitable for your intended purposes. We accept no liability as to the suitability or fitness of the Website in meeting your needs."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 9. "}),"We do not guarantee that the Website or the computer server from which the Website are made available, are free of viruses or other harmful components;"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 10. "}),"We do not guarantee the accuracy, content, timeliness, completeness, reliability, quality or suitability of any content contained in the Website or otherwise made available in connection with the Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 11. "}),"We will not be responsible to you or any third party for any business loss (including loss of profits, revenue, contracts, anticipated savings, data, goodwill or wasted expenditure) or any indirect or consequential loss in connection with your use of the Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 12. "}),"You acknowledge and agree that the operation of the Website is dependent upon the proper and effective functioning of the internet and other third party equipment and services, and that we do not guarantee and will not be liable for these in any way."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Obligations of Users"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 13. "}),"You must not",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" a."})," provide any false information relating to you or your property.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" b."})," Use the website in any unlawful manner, for any unlawful purpose, or in any manner inconsistent with this Agreement, or act fraudulently or maliciously, for example, by hacking into or inserting malicious code, including viruses, or harmful data, into the website.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" c."}),"infringe our intellectual property rights or those of any third party in relation to your use of the website.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" d."}),"Attempt any unauthorised access to any part or component of the Website.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" e."}),"use the website in a way that could damage, disable, overburden, impair or compromise our System or security or interfere with other users;",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" f."}),"Collect or harvest any information or data from our systems or attempt to decipher any transmissions to or from the servers running any system.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" g."}),"Use the Website or access to it to impersonate any person or entity, or to falsely state or otherwise misrepresent its affiliation with any person or entity;",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" h."}),"Restrict or inhibit the ability of any other person to access or use the Website; and",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" i."}),"Modify, adapt or translate any portion of the Website"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 14. "}),"You are also responsible for ensuring that any persons with access to our Website through your internet connection are aware of these terms of use and the other applicable terms and conditions listed above, and that they comply with them. Our Website are made available free of charge."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Personal Information"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 15. "}),'To meet our Know Your Customer (“KYC”) and Anti-Money Laundering (“AML”) obligations, we may require you to provide any or all the following: your full name; your date of birth; your Bank Verification Number ("BVN"); your current residential address; your picture; Copy of a valid Government issued ID (national ID, international passport, permanent voter’s card or driver’s license); copy of recent utility bill, bank statement, affidavit, or another bill, dated within three months of our request, which carries your name and address; any other information or document as we may require for our internal risk assessment.']}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 16. "}),"You warrant that all information and documentation provided to us are true, correct, and accurate. You also undertake to notify us of any changes to the information or documentation which you have provided."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 17. "}),"You hereby agree and authorise egochain to verify information provided by you against the information held by any third party (including official databases) such as, banks, Payment System Providers any other information bank available to egochain."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 18. "}),"The information that egochain may verify against the information which you have provided to us include (without limitation): your name, phone number, date of birth, address, age, Identification Number (“ID”) or Passport Number and such other information that will enable egochain to identify you and comply with the regulatory “Know Your Customer” requirements (together the “Personal Information”)."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 19. "}),"You hereby consent to egochain verifying the Personal Information and the Relevant Information and using the Personal Information and the Relevant Information to the extent necessary in egochain’s opinion for the provision of its Services."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 20. "}),"You agree to indentify and hold egochain and the Third Party Partners harmless with respect to any claims, losses, liabilities and expenses (including legal fees and expenses) that may arise as a result of the disclosure and reliance on such Personal Information and/or Relevant Information."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Consent to Data Collection"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 21. "}),"By using our Services, you consent to us collecting and using technical information about the Equipment and related software, hardware and peripherals for Services that are internet-based or wireless to improve our products and to provide any Services to you. If you use these Services, you consent to us and our affiliates' and partners’ transmission, collection, retention, maintenance, processing and use of your data to improve our Services and/or your experience while using egochain."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Intellectual Property Rights."})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 22. "}),"The intellectual property rights in the Website and copyright in all material stored, displayed and accessible on the Website is either owned us or duly licensed by third parties. All such rights are reserved."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Governing Law and Dispute Resolution"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 23. "}),"This website is subject to the laws and regulations of Nigeria. You irrevocably agree that any dispute between you and egochain will be governed by the laws of Nigeria and any cause of action you may have hereunder or with respect to your use of the website must be commenced by resort to an arbitration in accordance with Arbitration and Conciliation Act Cap A18 Laws of the Federation of Nigeria 2004"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 24. "}),"You also agree and consent that any cause of action you may submit in connection with your use of the website or pursuant to these terms will be filed within six months after the incident upon which the claim or cause of action is based first occurred"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 25. "}),'You and egochain agree to bring any Dispute in arbitration on an individual basis only, and not as a class or collective action. There will be no right or authority for any Dispute to be brought, heard or arbitrated as a class or collective action ("Class Action Waiver"). Regardless of anything else in this Arbitration Agreement and/or the applicable Arbitration Rules, the interpretation, applicability, enforceability or formation of the Class Action Waiver may only be determined by a court and not an arbitrator.']})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Amendment to the Terms"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 26. "}),"We reserve the right, at our sole and absolutes discretion, to change, modify, add to, supplement or delete any of the terms and conditions of this Agreement at any time, effective with or without prior notice. If any future changes to this Agreement are unacceptable to you or cause you to no longer be in compliance with this Agreement, you must terminate, and immediately stop using, the website. Your continued use of the website following any revision to this Agreement constitutes your complete and irrevocable acceptance of any and all such changes. Please check this page from time to time to take notice of any changes we made, as they are binding on you."]})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/projects-blurbg.png",alt:"",className:"privacyBlurBg"}),jsxRuntimeExports.jsx("img",{src:"/img/privacy-rightbg.png",alt:"",className:"privacyrightBlurBg"})]})});function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,o){if(e==null)return{};var a={},c=Object.keys(e),d,g;for(g=0;g<c.length;g++)d=c[g],!(o.indexOf(d)>=0)&&(a[d]=e[d]);return a}const PRE_ENTER=0,ENTERING=1,ENTERED=2,PRE_EXIT=3,EXITING=4,EXITED=5,UNMOUNTED=6,STATUS=["preEnter","entering","entered","preExit","exiting","exited","unmounted"],getState=e=>({_s:e,status:STATUS[e],isEnter:e<PRE_EXIT,isMounted:e!==UNMOUNTED,isResolved:e===ENTERED||e>EXITING}),startOrEnd=e=>e?UNMOUNTED:EXITED,getEndStatus=(e,o)=>{switch(e){case ENTERING:case PRE_ENTER:return ENTERED;case EXITING:case PRE_EXIT:return startOrEnd(o)}},getTimeout=e=>typeof e=="object"?[e.enter,e.exit]:[e,e],nextTick=(e,o)=>setTimeout(()=>{isNaN(document.body.offsetTop)||e(o+1)},0),initialStateMap=new Map,initialConfigMap=new Map,updateState=(e,o,a,c,d,g)=>{clearTimeout(d);const b=getState(o),j=new Map(c.current);j.set(e,b),a(j),c.current=j,g&&g({key:e,current:b})},useTransitionMap=({allowMultiple:e,enter:o=!0,exit:a=!0,preEnter:c,preExit:d,timeout:g,initialEntered:b,mountOnEnter:j,unmountOnExit:$,onStateChange:_e}={})=>{const[st,rt]=reactExports$1.useState(initialStateMap),ut=reactExports$1.useRef(st),gt=reactExports$1.useRef(initialConfigMap),[yt,wt]=getTimeout(g),Ct=reactExports$1.useCallback((It,Lt)=>{const{initialEntered:Ft=b}=Lt||{},Nt=Ft?ENTERED:startOrEnd(j);updateState(It,Nt,rt,ut),gt.current.set(It,{})},[b,j]),Pt=reactExports$1.useCallback(It=>{const Lt=new Map(ut.current);return Lt.delete(It)?(rt(Lt),ut.current=Lt,gt.current.delete(It),!0):!1},[]),At=reactExports$1.useCallback(It=>{const Lt=ut.current.get(It);if(!Lt)return;const{timeoutId:Ft}=gt.current.get(It),Nt=getEndStatus(Lt._s,$);Nt&&updateState(It,Nt,rt,ut,Ft,_e)},[_e,$]),Tt=reactExports$1.useCallback((It,Lt)=>{const Ft=ut.current.get(It);if(!Ft)return;const Nt=gt.current.get(It),Ht=hs=>{switch(updateState(It,hs,rt,ut,Nt.timeoutId,_e),hs){case ENTERING:yt>=0&&(Nt.timeoutId=setTimeout(()=>At(It),yt));break;case EXITING:wt>=0&&(Nt.timeoutId=setTimeout(()=>At(It),wt));break;case PRE_ENTER:case PRE_EXIT:Nt.timeoutId=nextTick(Ht,hs);break}},dr=Ft.isEnter;typeof Lt!="boolean"&&(Lt=!dr),Lt?dr||(Ht(o?c?PRE_ENTER:ENTERING:ENTERED),!e&&ut.current.forEach((hs,us)=>us!==It&&Tt(us,!1))):dr&&Ht(a?d?PRE_EXIT:EXITING:startOrEnd($))},[_e,At,e,o,a,c,d,yt,wt,$]),kt=reactExports$1.useCallback(It=>{if(!(!e&&It!==!1))for(const Lt of ut.current.keys())Tt(Lt,It)},[e,Tt]);return{stateMap:st,toggle:Tt,toggleAll:kt,endTransition:At,setItem:Ct,deleteItem:Pt}},_excluded$6=["transition","transitionTimeout"],getTransition=(e,o)=>e===!0||!!(e&&e[o]),useAccordionProvider=(e={})=>{let{transition:o,transitionTimeout:a}=e,c=_objectWithoutPropertiesLoose$1(e,_excluded$6);const d=useTransitionMap(_extends({timeout:a,enter:getTransition(o,"enter"),exit:getTransition(o,"exit"),preEnter:getTransition(o,"preEnter"),preExit:getTransition(o,"preExit")},c));return _extends({mountOnEnter:!!c.mountOnEnter,initialEntered:!!c.initialEntered},d)},ACCORDION_BLOCK="szh-accordion",ACCORDION_PREFIX="szh-adn",ACCORDION_ATTR=`data-${ACCORDION_PREFIX}`,ACCORDION_BTN_ATTR=`data-${ACCORDION_PREFIX}-btn`,AccordionContext=reactExports$1.createContext({}),bem=(e,o,a)=>(c,d)=>{const g=o?`${e}__${o}`:e;let b=g;a&&Object.keys(a).forEach($=>{const _e=a[$];_e&&(b+=` ${g}--${_e===!0?$:`${$}-${_e}`}`)});let j=typeof c=="function"?c(d):c;return typeof j=="string"&&(j=j.trim(),j&&(b+=` ${j}`)),b},mergeProps=(e,o)=>{if(!o)return e;const a=_extends({},e);return Object.keys(o).forEach(c=>{const d=e[c],g=o[c];typeof g=="function"&&d?a[c]=(...b)=>{d(...b),g(...b)}:a[c]=g}),a},AccordionProvider=e=>jsxRuntimeExports.jsx(AccordionContext.Provider,_extends({},e)),getAccordion=e=>{do e=e.parentElement;while(e&&!e.hasAttribute(ACCORDION_ATTR));return e},getNextIndex=(e,o,a)=>e?o>0?o-1:a-1:(o+1)%a,moveFocus=(e,o)=>{const{activeElement:a}=document;if(!a||!a.hasAttribute(ACCORDION_BTN_ATTR)||getAccordion(a)!==o.currentTarget)return;const c=o.currentTarget.querySelectorAll(`[${ACCORDION_BTN_ATTR}]`),{length:d}=c;for(let g=0;g<d;g++)if(c[g]===a){let b=getNextIndex(e,g,d);for(;getAccordion(c[g])!==getAccordion(c[b]);)b=getNextIndex(e,b,d);g!==b&&(o.preventDefault(),c[b].focus());break}},useAccordion=()=>({accordionProps:{[ACCORDION_ATTR]:"",onKeyDown:o=>o.key==="ArrowUp"?moveFocus(!0,o):o.key==="ArrowDown"&&moveFocus(!1,o)}}),_excluded$5=["providerValue","className"],ControlledAccordion=reactExports$1.forwardRef((e,o)=>{let{providerValue:a,className:c}=e,d=_objectWithoutPropertiesLoose$1(e,_excluded$5);const{accordionProps:g}=useAccordion();return jsxRuntimeExports.jsx(AccordionProvider,{value:a,children:jsxRuntimeExports.jsx("div",_extends({},mergeProps(g,d),{ref:o,className:bem(ACCORDION_BLOCK)(c)}))})});ControlledAccordion.displayName="ControlledAccordion";const _excluded$4=["allowMultiple","initialEntered","mountOnEnter","unmountOnExit","transition","transitionTimeout","onStateChange"],Accordion=reactExports$1.forwardRef((e,o)=>{let{allowMultiple:a,initialEntered:c,mountOnEnter:d,unmountOnExit:g,transition:b,transitionTimeout:j,onStateChange:$}=e,_e=_objectWithoutPropertiesLoose$1(e,_excluded$4);const st=useAccordionProvider({allowMultiple:a,initialEntered:c,mountOnEnter:d,unmountOnExit:g,transition:b,transitionTimeout:j,onStateChange:$});return jsxRuntimeExports.jsx(ControlledAccordion,_extends({},_e,{ref:o,providerValue:st}))});Accordion.displayName="Accordion";let current=0;const useIdShim=()=>{const[e,o]=reactExports$1.useState();return reactExports$1.useEffect(()=>o(++current),[]),e&&`${ACCORDION_PREFIX}-${e}`},useId=React$2.useId||useIdShim,useAccordionItem=({state:e,toggle:o,disabled:a})=>{const c=useId(),d=c&&c+"-",g={id:c,"aria-controls":d,"aria-expanded":e.isEnter,onClick:o};return a?g.disabled=!0:g[ACCORDION_BTN_ATTR]="",{buttonProps:g,panelProps:{id:d,"aria-labelledby":c,role:"region"}}},useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports$1.useLayoutEffect:reactExports$1.useEffect,useHeightTransition=({status:e,isResolved:o})=>{const[a,c]=reactExports$1.useState(),d=reactExports$1.useRef(null);return useIsomorphicLayoutEffect(()=>{(e==="preEnter"||e==="preExit")&&c(d.current.getBoundingClientRect().height)},[e]),[{height:e==="preEnter"||e==="exiting"?0:e==="entering"||e==="preExit"?a:void 0,overflow:o?void 0:"hidden"},d]};function setRef(e,o){typeof e=="function"?e(o):e.current=o}function useMergeRef(e,o){return reactExports$1.useMemo(()=>e?o?a=>{setRef(e,a),setRef(o,a)}:e:o,[e,o])}const getItemState=(e,o,a)=>{const{stateMap:c,mountOnEnter:d,initialEntered:g}=e,b=a??g;return c.get(o)||{status:b?"entered":d?"unmounted":"exited",isMounted:!d,isEnter:b,isResolved:!0}},useAccordionContext=()=>reactExports$1.useContext(AccordionContext),useAccordionItemEffect=({itemKey:e,initialEntered:o,disabled:a}={})=>{const c=reactExports$1.useRef(null),d=useAccordionContext(),g=e??c.current,b=getItemState(d,g,o),{setItem:j,deleteItem:$,toggle:_e}=d;return reactExports$1.useEffect(()=>{if(a)return;const st=e??c.current;return j(st,{initialEntered:o}),()=>void $(st)},[j,$,e,o,a]),{itemRef:c,state:b,toggle:reactExports$1.useCallback(st=>_e(g,st),[_e,g])}},_excluded$3=["itemKey","initialEntered"],withAccordionItem=e=>{const o=reactExports$1.forwardRef((a,c)=>{let{itemKey:d,initialEntered:g}=a,b=_objectWithoutPropertiesLoose$1(a,_excluded$3);return jsxRuntimeExports.jsx(e,_extends({forwardedRef:c},b,useAccordionItemEffect({itemKey:d,initialEntered:g,disabled:b.disabled})))});return o.displayName="WithAccordionItem",o},_excluded$2=["forwardedRef","itemRef","state","toggle","className","disabled","header","headingTag","headingProps","buttonProps","contentProps","panelProps","children"],getRenderNode=(e,o)=>typeof e=="function"?e(o):e,WrappedItem=reactExports$1.memo(e=>{let{forwardedRef:o,itemRef:a,state:c,toggle:d,className:g,disabled:b,header:j,headingTag:$="h3",headingProps:_e,buttonProps:st,contentProps:rt,panelProps:ut,children:gt}=e,yt=_objectWithoutPropertiesLoose$1(e,_excluded$2);const wt={state:c,toggle:d,disabled:b},{buttonProps:Ct,panelProps:Pt}=useAccordionItem(wt),[At,Tt]=useHeightTransition(c),kt=useMergeRef(ut&&ut.ref,Tt),{status:It,isMounted:Lt,isEnter:Ft}=c;return jsxRuntimeExports.jsxs("div",_extends({},yt,{ref:useMergeRef(o,a),className:bem(ACCORDION_BLOCK,"item",{status:It,expanded:Ft})(g,c),children:[jsxRuntimeExports.jsx($,_extends({},_e,{style:_extends({margin:0},_e&&_e.style),className:bem(ACCORDION_BLOCK,"item-heading")(_e&&_e.className,c),children:jsxRuntimeExports.jsx("button",_extends({},mergeProps(Ct,st),{type:"button",className:bem(ACCORDION_BLOCK,"item-btn")(st&&st.className,c),children:getRenderNode(j,wt)}))})),Lt&&jsxRuntimeExports.jsx("div",_extends({},rt,{style:_extends({display:It==="exited"?"none":void 0},At,rt&&rt.style),className:bem(ACCORDION_BLOCK,"item-content")(rt&&rt.className,c),children:jsxRuntimeExports.jsx("div",_extends({},mergeProps(Pt,ut),{ref:kt,className:bem(ACCORDION_BLOCK,"item-panel")(ut&&ut.className,c),children:getRenderNode(gt,wt)}))}))]}))});WrappedItem.displayName="AccordionItem";const AccordionItem$1=withAccordionItem(WrappedItem),chevronDown="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-chevron-down'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20stroke-width='2'%20stroke='%23fff'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpolyline%20points='6%209%2012%2015%2018%209'%20/%3e%3c/svg%3e",list="_list_afula_5",info="_info_afula_9",accordion="_accordion_afula_16",item="_item_afula_21",itemBtn="_itemBtn_afula_25",itemBtnExpanded="_itemBtnExpanded_afula_43",itemContent="_itemContent_afula_47",itemPanel="_itemPanel_afula_51",chevron="_chevron_afula_55",styles={list,info,accordion,item,itemBtn,itemBtnExpanded,itemContent,itemPanel,chevron},AccordionItem=({header:e,...o})=>jsxRuntimeExports.jsx(AccordionItem$1,{...o,header:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e,jsxRuntimeExports.jsx("img",{className:styles.chevron,src:chevronDown,alt:"Chevron Down"})]}),className:styles.item,buttonProps:{className:({isEnter:a})=>`${styles.itemBtn} ${a&&styles.itemBtnExpanded}`},contentProps:{className:styles.itemContent},panelProps:{className:styles.itemPanel}}),WhitePaper=()=>{const[e,o]=reactExports$1.useState(null);return reactExports$1.useEffect(()=>{const a=document.getElementById("content"),c=()=>{const d=a.scrollTop;document.querySelectorAll(".whitePaper_div_area_body_area_section").forEach(b=>{const j=b.getAttribute("id"),$=b.offsetTop-50;d>=$&&o(j)})};return a.addEventListener("scroll",c),()=>{a.removeEventListener("scroll",c)}},[]),jsxRuntimeExports.jsxs("div",{className:"whitepaper_div",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body_side",id:"sidebar",children:[jsxRuntimeExports.jsx("div",{className:e==="abstract"?"active":" whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#abstract",children:"Abstract"})}),jsxRuntimeExports.jsx("div",{className:e==="introduction"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#introduction",children:"Introduction"})}),jsxRuntimeExports.jsx("div",{className:e==="Production of affordable EVs"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Production of affordable EVs",children:"Production of affordable EVs"})}),jsxRuntimeExports.jsx("div",{className:e==="Streamlining Manufacturing and Boosting Accessibility"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Streamlining Manufacturing and Boosting Accessibility",children:"Streamlining Manufacturing and Boosting Accessibility"})}),jsxRuntimeExports.jsx("div",{className:e==="Benefits Beyond Cost Savings"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#in-mcd-we-trust",children:"Benefits Beyond Cost Savings"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging costs & Improved charging infrastructure"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging costs & Improved charging infrastructure",children:"Charging costs & Improved charging infrastructure"})}),jsxRuntimeExports.jsx("div",{className:e==="Transparency, Efficiency, and Incentives"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Transparency, Efficiency, and Incentives",children:"Transparency, Efficiency, and Incentives"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning Rewards in the Egochain Ecosystem: Pathways to Participation"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning Rewards in the Egochain Ecosystem: Pathways to Participation",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})}),jsxRuntimeExports.jsx("div",{className:e==="Fueling Growth Through Rewards"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Fueling Growth Through Rewards",children:"Fueling Growth Through Rewards"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning with Vesting and Liquid Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning with Vesting and Liquid Ownership",children:"Earning with Vesting and Liquid Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="The Egochain Coin (EGAX)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The Egochain Coin (EGAX)",children:"The Egochain Coin (EGAX)"})}),jsxRuntimeExports.jsx("div",{className:e==="The EGC Coin (EGC)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The EGC Coin (EGC)",children:"The EGC Coin (EGC)"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Electric Vehicles"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Electric Vehicles",children:"Smart Electric Vehicles"})}),jsxRuntimeExports.jsx("div",{className:e==="Tokenization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Tokenization",children:"Tokenization"})}),jsxRuntimeExports.jsx("div",{className:e==="Unlocking Value Through Collateralization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Unlocking Value Through Collateralization",children:"Unlocking Value Through Collateralization"})}),jsxRuntimeExports.jsx("div",{className:e==="Enhancing Transparency, Empowering Lending"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Enhancing Transparency, Empowering Lending",children:"Enhancing Transparency, Empowering Lending"})}),jsxRuntimeExports.jsx("div",{className:e==="Beyond Redefining Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Beyond Redefining Ownership",children:"Beyond Redefining Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="Distributing Egax Coin"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Distributing Egax Coin",children:"Distributing Egax Coin"})}),jsxRuntimeExports.jsx("div",{className:e==="Electric Vehicle Smart Charging System"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Electric Vehicle Smart Charging System",children:"Electric Vehicle Smart Charging System"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Charging Architecture"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Charging Architecture",children:"Smart Charging Architecture"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging Algorithm and Flexibility Offers"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging Algorithm and Flexibility Offers",children:"Charging Algorithm and Flexibility Offers"})}),jsxRuntimeExports.jsx("div",{className:e==="Determining Electric Vehicle (EV) Flexibility for Next Time Step"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Determining Electric Vehicle (EV) Flexibility for Next Time Step",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})}),jsxRuntimeExports.jsx("div",{className:e==="Decentralized Secure Charging with Egochain"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Decentralized Secure Charging with Egochain",children:"Decentralized Secure Charging with Egochain"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Parameters"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Parameters",children:"Simulation Parameters"})}),jsxRuntimeExports.jsx("div",{className:e==="Dynamic Charging Model Based on User Activity"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Dynamic Charging Model Based on User Activity",children:"Dynamic Charging Model Based on User Activity"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Scenarios and Methodology"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Scenarios and Methodology",children:"Simulation Scenarios and Methodology"})}),jsxRuntimeExports.jsx("div",{className:e==="Results and Discussion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Results and Discussion",children:"Results and Discussion"})}),jsxRuntimeExports.jsx("div",{className:e==="Conclusion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Conclusion",children:"Conclusion"})})]}),jsxRuntimeExports.jsx("div",{className:"mobile_header",children:jsxRuntimeExports.jsx("div",{className:"mobile_header_area",children:jsxRuntimeExports.jsx(Accordion,{children:jsxRuntimeExports.jsxs(AccordionItem,{header:"Menu ",children:[jsxRuntimeExports.jsxs("div",{className:"mobile_header_links_area",children:[jsxRuntimeExports.jsx("div",{className:e==="abstract"?"active":" whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#abstract",children:"Abstract"})}),jsxRuntimeExports.jsx("div",{className:e==="introduction"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#introduction",children:"Introduction"})}),jsxRuntimeExports.jsx("div",{className:e==="Production of affordable EVs"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Production of affordable EVs",children:"Production of affordable EVs"})}),jsxRuntimeExports.jsx("div",{className:e==="Streamlining Manufacturing and Boosting Accessibility"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Streamlining Manufacturing and Boosting Accessibility",children:"Streamlining Manufacturing and Boosting Accessibility"})}),jsxRuntimeExports.jsx("div",{className:e==="Benefits Beyond Cost Savings"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#in-mcd-we-trust",children:"Benefits Beyond Cost Savings"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging costs & Improved charging infrastructure"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging costs & Improved charging infrastructure",children:"Charging costs & Improved charging infrastructure"})}),jsxRuntimeExports.jsx("div",{className:e==="Transparency, Efficiency, and Incentives"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Transparency, Efficiency, and Incentives",children:"Transparency, Efficiency, and Incentives"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning Rewards in the Egochain Ecosystem: Pathways to Participation"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning Rewards in the Egochain Ecosystem: Pathways to Participation",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})}),jsxRuntimeExports.jsx("div",{className:e==="Fueling Growth Through Rewards"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Fueling Growth Through Rewards",children:"Fueling Growth Through Rewards"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning with Vesting and Liquid Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning with Vesting and Liquid Ownership",children:"Earning with Vesting and Liquid Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="The Egochain Coin (EGAX)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The Egochain Coin (EGAX)",children:"The Egochain Coin (EGAX)"})}),jsxRuntimeExports.jsx("div",{className:e==="The EGC Coin (EGC)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The EGC Coin (EGC)",children:"The EGC Coin (EGC)"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Electric Vehicles"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Electric Vehicles",children:"Smart Electric Vehicles"})}),jsxRuntimeExports.jsx("div",{className:e==="Tokenization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Tokenization",children:"Tokenization"})}),jsxRuntimeExports.jsx("div",{className:e==="Unlocking Value Through Collateralization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Unlocking Value Through Collateralization",children:"Unlocking Value Through Collateralization"})}),jsxRuntimeExports.jsx("div",{className:e==="Enhancing Transparency, Empowering Lending"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Enhancing Transparency, Empowering Lending",children:"Enhancing Transparency, Empowering Lending"})}),jsxRuntimeExports.jsx("div",{className:e==="Beyond Redefining Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Beyond Redefining Ownership",children:"Beyond Redefining Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="Distributing Egax Coin"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Distributing Egax Coin",children:"Distributing Egax Coin"})}),jsxRuntimeExports.jsx("div",{className:e==="Electric Vehicle Smart Charging System"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Electric Vehicle Smart Charging System",children:"Electric Vehicle Smart Charging System"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Charging Architecture"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Charging Architecture",children:"Smart Charging Architecture"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging Algorithm and Flexibility Offers"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging Algorithm and Flexibility Offers",children:"Charging Algorithm and Flexibility Offers"})}),jsxRuntimeExports.jsx("div",{className:e==="Determining Electric Vehicle (EV) Flexibility for Next Time Step"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Determining Electric Vehicle (EV) Flexibility for Next Time Step",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})}),jsxRuntimeExports.jsx("div",{className:e==="Decentralized Secure Charging with Egochain"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Decentralized Secure Charging with Egochain",children:"Decentralized Secure Charging with Egochain"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Parameters"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Parameters",children:"Simulation Parameters"})}),jsxRuntimeExports.jsx("div",{className:e==="Dynamic Charging Model Based on User Activity"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Dynamic Charging Model Based on User Activity",children:"Dynamic Charging Model Based on User Activity"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Scenarios and Methodology"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Scenarios and Methodology",children:"Simulation Scenarios and Methodology"})}),jsxRuntimeExports.jsx("div",{className:e==="Results and Discussion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Results and Discussion",children:"Results and Discussion"})}),jsxRuntimeExports.jsx("div",{className:e==="Conclusion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Conclusion",children:"Conclusion"})})]})," "]})})})}),jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body_area",id:"content",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_title",children:"Egochain: Incentivized Operating System for Electric Vehicles Powered by Blockchain Technology."}),jsxRuntimeExports.jsxs("section",{id:"abstract",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Abstract"})," ","Electric vehicles (EVs) offer a promising path towards sustainable transportation, widespread adoption remains hindered by high price points, underdeveloped charging infrastructure, and prohibitive charging costs. This whitepaper proposes Egochain, a blockchain-based solution designed to ignite a global EV revolution by overcoming these key barriers."]}),jsxRuntimeExports.jsxs("section",{id:"introduction",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Introduction"})," ","The undeniable force of transportation in our daily lives confronts us with a stark reality: change, however necessary, often faces an uphill battle against established social norms. Despite growing awareness of Electric Vehicles (EVs), only a fraction of the global population (less than 30%) has firsthand experience with this burgeoning technology. Yet, EVs are poised to redefine our relationship with transportation, with their global market share projected to leap from 16% in 2022 to 20% by 2023 (considering only battery electric and plug-in hybrid EVs).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While EV adoption is accelerating, cost remains a crucial obstacle. Soaring gasoline prices provide a compelling incentive, but high vehicle costs, underdeveloped charging infrastructure, and prohibitively expensive charging fees act as roadblocks to widespread adoption.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This is where Egochain steps in, armed with the transformative power of blockchain technology.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain envisions a future where EVs are not just a novelty, but a readily accessible and affordable transportation option for all. Our blockchain platform unlocks these possibilities through:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Production of affordable EVs: By enhancing transparency and efficiency, Egochain can optimize EV manufacturing processes, driving down costs and fostering wider production of affordable electric vehicles."}),jsxRuntimeExports.jsx("li",{children:"Reduced charging costs: The secure and decentralized nature of the blockchain enables more efficient development and management of charging stations, resulting in lower charging fees for drivers."}),jsxRuntimeExports.jsx("li",{children:"Profitable charging infrastructure: Egochain offers attractive rewards and simplifies operations for those wishing to invest in charging stations, rapidly expanding access to vital charging points."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain goes beyond merely acknowledging the barriers to EV adoption. It provides a comprehensive solution, leveraging the power of blockchain to break down these hurdles and pave the way for a more sustainable and accessible transportation future."]}),jsxRuntimeExports.jsxs("section",{id:"Production of affordable EVs",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Production of affordable EVs"})," ","The electric vehicle (EV) industry faces a significant hurdle: cost. EVs generally carry a higher price tag than their gasoline-powered counterparts, primarily due to battery technology. These batteries require costly raw materials and substantial capacity to meet range expectations, driving up overall costs. Even excluding battery expenses, the sheer abundance of existing gas-powered vehicles pushes their prices down further, widening the affordability gap. While EVs often boast lower operating costs in the long run, the initial purchase barrier remains a formidable obstacle, particularly for budget-conscious consumers in developing economies.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Chart",jsxRuntimeExports.jsx("img",{src:"/img/ev_purchase_chart_reason.svg",alt:""})," "]}),jsxRuntimeExports.jsxs("section",{id:"Streamlining Manufacturing and Boosting Accessibility",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Streamlining Manufacturing and Boosting Accessibility"})," ","Egochain's transparent and efficient blockchain technology offers a solution to streamline EV manufacturing, ultimately making them more accessible.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Here is how:",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Cost Reduction Through Transparent Supply Chains:"})," ","Egochain's track-and- trace capabilities enable manufacturers to eliminate counterfeit parts and diversion within their supply chains. This not only safeguards quality but also minimizes waste and cost overruns associated with managing fraudulent components."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Enhanced Profitability with Efficient Recalls:"})," ","Traditional recalls often involve entire model years due to uncertainties regarding the origin of problematic parts. Egochain's precise tracking allows targeted recalls, focusing only on vehicles equipped with components from the affected supplier. This significantly reduces the recall's scope and associated expenses."]})]})]}),jsxRuntimeExports.jsxs("section",{id:"Benefits Beyond Cost Savings",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Benefits Beyond Cost Savings"})," ","The benefits of Egochain extend beyond mere cost reduction:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Increased Consumer Confidence:"})," Enhanced transparency fosters trust by assuring consumers of the provenance and quality of their EVs."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Sustainability Advancement: "})," Eliminating waste and optimizing resource use within the supply chain contributes to a more sustainable automotive industry."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain's blockchain technology positions itself as a key facilitator in overcoming the cost barrier hindering wider EV adoption, opening doors for a greener future."]}),jsxRuntimeExports.jsxs("section",{id:"Charging costs & Improved charging infrastructure",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Charging costs & Improved charging infrastructure"})," ",`Despite the surging popularity of electric vehicles (EVs) in countries like Norway, Sweden, and the UK, a lack of readily available public charging stations remains a major obstacle to wider adoption. Euromonitor International's 2023 Voice of the Consumer: Mobility Survey identified poor charging infrastructure as the second most common reason for hesitation towards EVs, fueling "range anxiety" – the fear of running out of power before finding a charger.`,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The European Union's 2014 Alternative Fuel Infrastructure Directive (AFID) recommends a ratio of 10 EVs per charging station for member states. However, significant gaps persist. In 2022, countries like Norway (31 EVs per charger), Germany (23), the UK (19), and Denmark (18) fell short of this target.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Chart2",jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img2.svg",alt:""})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Expanding public charging networks is crucial, particularly for urban dwellers living in apartments, where home charging is often infeasible. However, challenges exist. Public EV charging stations can be expensive to install, with Level 2 and DC fast chargers costing between $2,500 and $36,000, excluding installation and permits.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Adding to the complexity, unlike the consistent gallon-based pricing of gasoline, EV charging employs various structures, sometimes leading to confusing and potentially inflated costs. This inconsistency can disincentivize EV adoption due to consumer frustration and negative experiences."]}),jsxRuntimeExports.jsxs("section",{id:"Transparency, Efficiency, and Incentives",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Transparency, Efficiency, and Incentives"})," ","Egochain's blockchain technology offers a solution by enabling an open-source network of charging stations. The decentralized nature allows ownership by anyone, including local businesses like grocery stores. Transactions are securely recorded on the blockchain, reducing fraud and improving operational efficiency.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Beyond convenience, Egochain incentivizes green transportation by rewarding EV owners with tokens for using less popular stations. This balances grid load and promotes energy efficiency, contributing to a cleaner transportation ecosystem.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Tackling range anxiety through wider public EV charging infrastructure access is crucial for a successful transition to sustainable mobility. Egochain's blockchain- based approach delivers transparency, efficiency, and incentives, offering a promising path towards overcoming current obstacles and accelerating EV adoption."]}),jsxRuntimeExports.jsxs("section",{id:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})," ","This section explores the fundamental concepts powering Egochain and the rewarding landscape for those who actively contribute to its success, ultimately accelerating the adoption of electric vehicles."]}),jsxRuntimeExports.jsxs("section",{id:"Fueling Growth Through Rewards",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Fueling Growth Through Rewards"})," ","Egochain welcomes contributions through two primary channels: debt and ownership. Both play crucial roles in propelling the expansion of electric vehicle adoption and boosting the value of its native currency. Within the ownership category, two distinct options exist: liquid and vesting. Vesting ownership implies a long-term commitment, locking tokens for a predetermined period, while liquid ownership grants immediate transferability."]}),jsxRuntimeExports.jsxs("section",{id:"Earning with Vesting and Liquid Ownership",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Earning with Vesting and Liquid Ownership"})," ",jsxRuntimeExports.jsx("b",{children:"Vesting Ownership:"})," Earn rewards continuously over time while demonstrating a long-term dedication to Egochain's mission. Tokens become gradually accessible, fostering deeper alignment between contributor interests and the ecosystem's long- term vision.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Liquid Ownership:"})," Earn rewards continuously over time while demonstrating a long-term dedication to Egochain's mission. Tokens become gradually accessible, fostering deeper alignment between contributor interests and the ecosystem's long- term vision.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"By recognizing the diverse motivations of potential contributors, Egochain empowers individuals to choose the reward-earning path that best aligns with their goals and risk tolerance. This inclusive approach paves the way for a robust and diverse participation landscape, propelling the ecosystem towards its ambitious goals of widespread electric vehicle adoption."]}),jsxRuntimeExports.jsx("div",{className:"break_line_txt",children:"The Egochain blockchain interacts with two kinds of coins"}),jsxRuntimeExports.jsxs("section",{id:"The Egochain Coin (EGAX)",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"The Egochain Coin (EGAX)"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"EGAX"})," is the native token of Egochain, a blockchain platform specifically designed for the electric vehicle (EV) ecosystem. It serves as the lifeblood of this innovative network, powering transactions, incentivizing participation, and unlocking a new era of mobility.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Fueling Adoption and Infrastructure"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:["➔ 80% of EGAX distribution rewards directly contribute to the heart of the EV ecosystem:",jsxRuntimeExports.jsx("br",{}),"◆ ",jsxRuntimeExports.jsx("b",{children:"EV drivers:"})," Incentivized through rebates, loyalty programs, and pay- per-use charging, encouraging widespread EV adoption.",jsxRuntimeExports.jsx("br",{})," ◆ ",jsxRuntimeExports.jsx("b",{children:" Charging station operators:"}),"Earning rewards for providing essential infrastructure and promoting a sustainable future.",jsxRuntimeExports.jsx("br",{}),"➔ This targeted distribution fosters a symbiotic relationship, fueling both demand and supply within the EV market."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Secure and Staking-Free Rewards"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"19% of EGAX is allocated to validators who secure the Egochain network through robust consensus mechanisms. This ensures the platform's stability and transparency, building trust and attracting further investment."}),jsxRuntimeExports.jsx("li",{children:"Uniquely, Egochain eliminates the complexities of staking by offering automatic claiming of earned EGAX for all users. This user-friendly approach maximizes accessibility and participation, making EGAX truly inclusive."}),jsxRuntimeExports.jsx("li",{children:"1%: EGC holders, providing passive income for supporting the ecosystem."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Frictionless Payments and Seamless Integration"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Microtransactions:"})," EGAX boasts a minimal unit value, enabling smooth and efficient payments for even the smallest purchases, like individual charging sessions. This seamless experience encourages frequent engagement and fosters broader adoption."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Built-in claiming: "})," Imagine claiming your earned EGAX directly through your EV! With APEX EVs, this futuristic vision becomes reality. Claiming rewards becomes an effortless part of your driving experience, further reinforcing the integration of EGAX into the everyday lives of EV users."]})]}),jsxRuntimeExports.jsx("br",{}),"EGAX represents more than just a coin; it's the key to unlocking a future where electric mobility thrives. Its unique design incentivizes participation, simplifies interaction, and fuels continuous growth within the EV ecosystem."]}),jsxRuntimeExports.jsxs("section",{id:"The EGC Coin (EGC)",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"The EGC Coin (EGC)"})," ",jsxRuntimeExports.jsx("br",{}),"Start-ups thrive on patient capital commitment. Investors recognize the years-long journey before reaping returns from their stakes. Short-term exits pose a significant challenge. New capital raised to fuel growth competes with existing shareholders seeking to cash out. Savvy investors prioritize capital contributions that propel company expansion, not appease those aiming for a quick escape.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Long-term commitment unlocks immense value. It empowers communities to chart future-focused plans. Stakeholder dedication aligns voting and decision-making with sustainable growth, rather than fleeting spikes. Conversely, the cryptocurrency landscape often witnesses speculators flitting between digital assets based on anticipated short-term gains.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain envisions a community deeply invested in its long-term vision. Its unique model empowers users to commit their EGC COIN to lockup periods – one month, six months, or even a year – garnering platform benefits in return. Staked EGC balances remain non-transferable and non-divisible, effectively taking them off the open market. This deliberate design discourages short-term trading and fosters commitment. Stakers reap daily rewards, with EGC holders receiving 15% of the annual returns directly proportional to their locked stakes."]}),jsxRuntimeExports.jsxs("section",{id:"Smart Electric Vehicles",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Smart Electric Vehicles"})," ",jsxRuntimeExports.jsx("br",{}),'The seeds of smart vehicles were sown in the fertile ground of early Bitcoin projects. In 2013, Colored Coins emerged as a pioneering concept, offering a way to represent assets on the Bitcoin blockchain. This groundbreaking initiative laid the groundwork for the evolution of "smart property" within the nascent blockchain ecosystem.',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The year 2014 witnessed another pivotal moment with the advent of Counterparty. This platform empowered users to create their own tokens within the Bitcoin blockchain, representing a diverse range of assets from digital goods to tangible real estate and stocks. This versatility paved the way for the next milestone – the introduction of the Ethereum blockchain in 2015. Ethereum's revolutionary smart contracts enabled intricate, automated transactions on the blockchain, fostering the creation and management of intelligent property.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Fast forward to today, and we see tangible expressions of smart vehicle evolution in systems like car immobilizers. These devices enhance traditional keys with secure protocol exchanges, ensuring only authorized individuals with the correct cryptographic tokens can activate the engine. Their impact is undeniable; in Africa, cars equipped with immobilizers represent just 2% of stolen vehicles despite constituting 28% of the car population. This success extends beyond vehicles, with cryptographic measures safeguarding modern possessions like smartphones, rendering stolen devices inoperable and protecting sensitive information.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While these advancements are noteworthy, the full potential of crypto-activated property remains largely unexplored. Traditionally, private keys reside within physical objects like keys or SIM cards, restricting their transfer and manipulation.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Smart vehicles challenge this paradigm by enabling ownership to be mediated through smart contracts.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Integrating smart property into blockchain ecosystems unlocks a plethora of benefits – reduced transaction costs, enhanced transparency, robust security, and perhaps most importantly, the democratization of asset ownership previously accessible only to a select few."]}),jsxRuntimeExports.jsxs("section",{id:"Tokenization",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Tokenization"})," ",jsxRuntimeExports.jsx("br",{}),"The burgeoning realm of smart electric vehicles (EVs) is poised for a paradigm shift with the emergence of tokenization. This innovative approach involves fragmenting ownership into digital tokens, each representing a stake in a specific vehicle. These tokens unlock a plethora of possibilities, fundamentally redefining automobile ownership and reshaping the landscape of automotive finance."]}),jsxRuntimeExports.jsxs("section",{id:"Unlocking Value Through Collateralization",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Unlocking Value Through Collateralization"})," ",jsxRuntimeExports.jsx("br",{}),"Imagine a world where owning a smart EV empowers you to tap into its value as a source of readily available credit. Tokenization makes this a reality. By leveraging your EV's inherent worth as collateral, you gain access to a wider range of loan options, potentially securing favorable terms and unlocking valuable financial flexibility. This benefit extends beyond individual owners, offering manufacturers a novel channel for asset-backed financing, diversifying their financial instruments and unlocking untapped potential."]}),jsxRuntimeExports.jsxs("section",{id:"Enhancing Transparency, Empowering Lending",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Enhancing Transparency, Empowering Lending"})," ",jsxRuntimeExports.jsx("br",{}),"The magic of tokenization lies in its inherent transparency. Built upon the immutable foundations of blockchain technology, ownership records and transaction history become readily accessible and tamper-proof. This creates a secure and transparent ecosystem, fostering trust and enabling lenders to make informed credit decisions based on the complete and accurate picture of an EV's value. This data-driven approach mitigates risk, fosters responsible lending practices, and creates a more robust financial infrastructure for all stakeholders."]}),jsxRuntimeExports.jsxs("section",{id:"Beyond Redefining Ownership",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Beyond Redefining Ownership"})," ",jsxRuntimeExports.jsx("br",{}),"The implications of smart EV tokenization extend far beyond ownership structures. It fosters a more inclusive financial ecosystem by empowering individuals and businesses to leverage their assets effectively. This fosters economic growth, stimulates innovation, and paves the way for a future where mobility and financial opportunity are intertwined.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The burgeoning world of smart EV tokenization represents a watershed moment in the automotive and financial landscape. By unlocking the hidden value of vehicles, streamlining ownership transparency, and creating new avenues for financial inclusion, this technology holds the potential to revolutionize the way we own, finance, and experience mobility in the years to come."]}),jsxRuntimeExports.jsxs("section",{id:"Distributing Egax Coin",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Distributing Egax Coin"})," ",jsxRuntimeExports.jsx("br",{}),"The path to involvement in a cryptocurrency community offers two main avenues: ownership and contribution. Both approaches hold merit, with each user adding value to the currency's ecosystem. Mutual exchange facilitated by a transparent and reliable accounting system serves as the bedrock for value creation within these communities, where individuals earn rewards through the contributions they make to one another.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"However, achieving equitable distribution of a cryptocurrency presents a significant challenge. While computation-based mining methods like those employed by Bitcoin and Egochain offer specific functionalities, their scope tends to be limited. Activities like solving cryptographic puzzles or performing computations for rewards often yield benefits of marginal societal impact and offer limited direct advantages to the currency's community. Additionally, economies of scale and market forces often lead to centralization, restricting participation in such distribution mechanisms to specialized entities with extensive resources.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Therefore, it's crucial to recognize that computation-based mining ultimately resembles purchase, as it necessitates capital outlay for equipment or energy costs. Recognizing this inherent exchange dynamic highlights the need for alternative, more inclusive distribution models. Egochain's mileage-based approach, while innovative in its attempt to incentivize electric vehicle adoption, still relies on a pre-existing investment (vehicle ownership) and limits participant access.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Moving forward, exploring alternative distribution methods that prioritize accessibility, transparency, and genuine contribution to the community's goals will be crucial. By focusing on these principles, we can foster truly inclusive and sustainable cryptocurrency ecosystems where value creation is shared among all participants, not just a select few."]}),jsxRuntimeExports.jsxs("section",{id:"Electric Vehicle Smart Charging System",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Electric Vehicle Smart Charging System"})," ",jsxRuntimeExports.jsx("br",{}),"The burgeoning growth of electric vehicles (EVs) presents a significant challenge to power distribution grids. Unmanaged, the high-demand energy requirements of EV charging could overwhelm existing infrastructure. To address this, a robust platform is needed to optimize EV charging, balancing user needs with grid capacity. Failure to act will lead to charging station scarcity and grid congestion in the near future.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'This paper proposes a novel smart EV charging infrastructure built on a Egochain blockchain platform. By capturing user-defined charging parameters (kWh & duration), the system leverages "smart charging" techniques to achieve grid stability. This innovative platform streamlines the ecosystem, connecting EV owners directly with charging stations, eliminating intermediaries. Egochain, a dedicated blockchain, facilitates flexible charging arrangements (power & time) through its native token rewards. This incentivizes off-peak charging, attracting investments to expand the charging network.',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Our simulations demonstrate a remarkable 50% increase in user acceptance with this smart charging system, compared to traditional methods. This paves the way for a sustainable and efficient future of EV charging, ensuring grid stability and user satisfaction.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While electric vehicle (EV) technology is still in its early stages, the future of transportation points towards widespread adoption. This rapid growth, however, poses a significant challenge to power grids. Charging an EV requires almost twenty times the power of a typical North American household. While current low EV penetration and strategically installed charging points prevent grid congestion for now, stricter emission regulations and ambitious carbon neutrality goals in Europe and elsewhere promise a surge in EV ownership. The International Energy Agency projects that EVs will capture over 30% of the global market share by 2030. Therefore, developing optimal methods for integrating a large number of EVs into the grid is crucial.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Nour et al. (2019) categorize EV charging into three types: uncontrolled, delayed, and smart. Uncontrolled charging, akin to manual on-off switching, occurs when an EV is plugged in and charges to full capacity. Delayed charging utilizes time-varying electricity tariffs to incentivize EV users to shift their charging to off-peak hours.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Smart charging emerges as the most promising solution for the future. It utilizes algorithms to intelligently control charging points, potentially implemented by distribution system operators (DSOs) via communication channels to the stations. Two control architectures exist: centralized and decentralized. Centralized control involves aggregators purchasing power from multiple EV owners and acting as intermediaries between them and ancillary service markets (Daina et al., 2017). This contrasts with decentralized control, where EV owners directly influence charging flexibility based on market information and incentives offered by the charging point operator (CPO). Creating effective incentives for flexible charging preferences is therefore key to optimizing operation, minimizing grid congestion, and even allowing more EVs to be charged at a single station.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain has designed incentive mechanisms for charging preferences. We aim to demonstrate how these incentives can significantly reduce grid congestion while enabling more efficient charging at multi-point stations, paving the way for a seamless transition to a future dominated by electric vehicles.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Figure1",jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img3.jpeg",alt:""}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 1"})," presents the architectural blueprint of the EV charging market, outlining the participating actors and their interwoven flows of information and electricity. At the core of this ecosystem lie several key players:",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" EV User:"})," The individual or entity owning and operating an electric vehicle."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Charge Point Operator (CPO):"})," The entity responsible for managing and operating a charging station."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" eMobility Service Provider (eMSP):"})," A digital bridge between EV users and CPOs, providing real-time information on charging station availability, facilitating reservations, and enabling payment functionalities."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"E-Mobility Clearing House:"})," The trusted entity that handles the financial transactions between EV users and CPOs, facilitated by eMSPs."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Distribution System Operator (DSO):"})," The utility company responsible for operating the low and medium voltage grids and delivering electricity to end users."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Electricity Supply Retailer:"})," The company selling electricity to consumers, possessing grid access contracts to purchase power from DSOs."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Beyond the traditional network, Egochain emerges as a game-changer. This distributed blockchain platform leverages cryptographic signatures and consensus mechanisms to secure data transactions and computations within the Internet of Things (IoT). With its inherent transparency and trust, Egochain fuels smart contract functionality, automating agreements among participants and executing actions only when predefined conditions are met.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This paper introduces a novel model that leverages Egochain's smart contracts to incentivize EV users for aligning their charging preferences with grid priorities. These incentives, issued in the form of EGAX tokens, act as a digital currency within the network, enabling users to offset future charging costs."]}),jsxRuntimeExports.jsx("div",{className:"break_line_txt",children:"APPROACH AND SIMULATIONS"}),jsxRuntimeExports.jsxs("section",{id:"Smart Charging Architecture",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Smart Charging Architecture"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 2"})," illustrates the Egochain smart EV charging system. Moving beyond traditional models, Egochain leverages its blockchain technology to streamline billing and payment processes. Instead of relying on intermediaries like eMSPs and clearing houses, dedicated smart contract charge stations (cssc) deployed on the Egochain blockchain handle these functions. These csscs not only manage payments but also trigger smart charging for individual charge points (CPs), ensuring efficient energy distribution. Additionally, the system incentivizes EV users to participate in smart charging by rewarding them through csscs for offering flexible charging schedules.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img4.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Charging Algorithm and Flexibility Offers",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Charging Algorithm and Flexibility Offers"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 3"})," outlines the decision-making process whenever a new charging request arrives. EV users specify their desired energy amount (E) and maximum charging time (T) through the system. To facilitate efficient evaluation, a time step of 15 minutes is employed, ensuring each request within a given period is analyzed individually on a first-come-first-serve basis. Accepted requests initiate charging during the subsequent time interval.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Upon receiving a new request, the system first assesses potential grid congestion. If accepting the request at full power, alongside existing ones, would overload the grid, the model explores alternative solutions. It investigates whether the user has designated any flexibility preferences, allowing for smart charging adjustments and potential congestion alleviation. In the absence of flexibility (fast charge demand), the request is accepted regardless. Otherwise, a fulfillment check determines if the proposed flexibility accommodates congestion mitigation while fulfilling the user's energy demand within the specified timeframe. Successful checks translate to acceptance, while failures result in request rejection, with the option to re-evaluate in the next interval if the user remains available.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Therefore, flexibility refers to the charging time or power an EV user is willing to adjust in exchange for monetary rewards. As such, fair and transparent allocation mechanisms are crucial for managing these exchanges. The system utilizes a proportionate allocation mechanism to guarantee equitable distribution of incentives among participating users.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img5.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Determining Electric Vehicle (EV) Flexibility for Next Time Step",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})," ",jsxRuntimeExports.jsx("br",{}),"This algorithm estimates the potential of an EV user to offer charging flexibility during the next time step.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Key parameters:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Es(i,n):"})," Energy supplied to EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Ts(i,n):"})," Charging time for EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"P_N(i):"})," Nominal power of charging point (CP) serving EV (i)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"TF(i,n):"})," Flexible time available for charging EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Fl(i,n+1):"})," Flexible offer by EV (i) for next time step (n+1)"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Algorithm:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{children:"1. Calculate flexible time: TF(i,n) = Ts(i,n) - Es(i,n) / P_N(i)"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:["2. Determine flexible offer:"," ","Fl(i,n+1) = { P_N(i) if TF(i,n) >= 15 minutes P_N(i) * TF(i,n) / 15 minutes otherwise }"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Explanation:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'The algorithm first calculates the "flexible time" available for charging the EV (i) at the current time step (n). This is the difference between the scheduled charging time (Ts(i,n)) and the required time to reach the desired amount of energy with the nominal power of the CP (Es(i,n) / P_N(i)).',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Next, the algorithm estimates the flexible offer (Fl(i,n+1)) that the EV user is willing to provide for the next time step (n+1). This offer is equal to the full nominal power of the CP (P_N(i)) if the available flexible time is at least 15 minutes. Otherwise, the offer is proportionally reduced based on the remaining flexible time.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Benefits:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"This algorithm provides a simple and efficient way to estimate EV flexibility potential."}),jsxRuntimeExports.jsx("li",{children:"The use of a minimum flexible time threshold ensures practical feasibility and reduces the impact of short-term fluctuations."}),jsxRuntimeExports.jsx("li",{children:"The dynamic offer based on remaining time incentivizes users to participate and ensures efficient grid resource allocation."})]})]}),jsxRuntimeExports.jsxs("section",{id:"Decentralized Secure Charging with Egochain",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Decentralized Secure Charging with Egochain:"})," ",jsxRuntimeExports.jsx("br",{}),"For enhanced security and trust, we implemented Egochain, a blockchain platform, into the charging infrastructure. Each charging point (CP) houses a Raspberry Pi (RPi) running an Egochain node (Fig. 2).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Smart Contract Orchestrates Flexibility:"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"1. "})," Cloud Deployment: The smart charging algorithm and flexibility offers reside in the cloud."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"2. "})," Smart Contract Development and Deployment: A dedicated smart contract (SC) manages energy transactions on the Egochain network. Its Application Binary Interface (ABI) is integrated into a Python script facilitating blockchain interaction."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"3. "}),"Regular Communication: Every 15 minutes, the Python script retrieves EV user charging requests (E, T) and calculates flexibility offers for the next slot. Accepted offers are encrypted and stored on the Egochain blockchain."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"4. "}),"Parallel Backup: Each CPO's backend system connects to the cloud and its local blockchain node. This redundancy ensures data accessibility and direct interaction with the cloud database and Python script."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"5. "}),"Rewarding Flexibility: Upon confirmed delivery of the agreed-upon flexibility offer, the Egochain node triggers EGAX token payout to the EV user, compensating them for their energy and time flexibility."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Benefits:"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Enhanced Security: Blockchain technology guarantees tamper-proof and transparent transaction records."}),jsxRuntimeExports.jsx("li",{children:"Decentralized Trust: Secure peer-to-peer interactions eliminate the need for a central authority."}),jsxRuntimeExports.jsx("li",{children:"Automated Flexibility Rewards: Smart contracts automate reward distribution based on agreed-upon flexibility offers."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This approach fosters a secure, transparent, and rewarding charging ecosystem for both EV users and CPOs."]}),jsxRuntimeExports.jsxs("section",{id:"Simulation Parameters",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Simulation Parameters"})," ",jsxRuntimeExports.jsx("br",{}),"This section outlines the key parameters governing our EV charging demand model.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Average Daily Travel Distance: Based on data from BMVi (2019), the average German travels 39km daily."}),jsxRuntimeExports.jsx("li",{children:"Weekly Driving Range: Translating daily travel to a weekly basis, an individual accumulates approximately 280km of weekly driving."}),jsxRuntimeExports.jsx("li",{children:"EV Battery Efficiency: Studies by AUTOBEST (2018) indicate an average driving range of 7km per kWh for electric vehicles."}),jsxRuntimeExports.jsx("li",{children:"Weekly Energy Demand: Combining weekly travel distance with battery efficiency, an average EV user requires 40kWh of energy to fulfill their weekly mobility needs."})]})]}),jsxRuntimeExports.jsxs("section",{id:"Dynamic Charging Model Based on User Activity",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Dynamic Charging Model Based on User Activity:"})," ",jsxRuntimeExports.jsx("br",{}),"To accommodate diverse user behavior and charging needs, we've implemented a time-based charging system categorized by typical dwell times. This flexible approach helps us accurately model and predict charging demand across various locations and throughout the week.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Category 1 (1-2 hours): High-frequency charging for short stops, commonly found in shopping malls, restaurants, and public parking areas."}),jsxRuntimeExports.jsx("li",{children:"Category 2 (2-4 hours): Moderate-duration charging for extended stays, such as workplaces, street parking, and airport terminals."}),jsxRuntimeExports.jsx("li",{children:"Category 3 (4-8 hours): Long-term charging for overnight or extended parking, typically occurring in residential areas and hotels."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"By leveraging this data-driven categorization, we can efficiently allocate resources, optimize charging infrastructure deployment, and ultimately, deliver a seamless and cost-effective experience for our users."]}),jsxRuntimeExports.jsxs("section",{id:"Simulation Scenarios and Methodology",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Simulation Scenarios and Methodology"})," ",jsxRuntimeExports.jsx("br",{}),"The performance of the model was evaluated through simulations under two distinct charging scenarios, each focusing on the arrival rate of charging requests at the pool:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Scenario 1: Low Arrival Rate: A single charging request arrives every time step (15 minutes), representing a moderate demand on the charging pool."}),jsxRuntimeExports.jsx("li",{children:"Scenario 2: High Arrival Rate: Two charging requests arrive every time step, simulating a peak demand situation."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Both scenarios assumed the following conditions: "}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Charging Power: Each charging point (CP) offers a maximum of 11 kW."}),jsxRuntimeExports.jsx("li",{children:"EV Demand: User demand for charging power is randomly generated, ranging from 10 to 40 kWh (equivalent to 50-200 km) with charging times between 1 and 4 hours."}),jsxRuntimeExports.jsx("li",{children:"Plug Availability: All charging requests are accepted as long as sufficient power is available from the grid and no plug limitations exist."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Grid power availability serves as a key variable in the analysis. It starts at 33 kW and is progressively increased by 11 kW increments. Through repeated simulations (100 iterations per scenario), the model's performance is assessed by comparing the total electricity sold and charging request acceptance rate for both uncontrolled and smart charging strategies under varying grid power limits, EV energy demands, and available charging times."]}),jsxRuntimeExports.jsxs("section",{id:"Results and Discussion",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Results and Discussion"})," ",jsxRuntimeExports.jsx("br",{}),"Scenario 1: Figure 4 presents the results for a ten-hour charging period under varying grid power limits. The blue, orange, and yellow bars represent:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:["Total electricity sold:"," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Blue: Uncontrolled charging."}),jsxRuntimeExports.jsx("li",{children:"Orange: Smart charging."})]})]}),jsxRuntimeExports.jsx("li",{children:"Utilized flexibility: Electricity supplied to EVs through smart charging (difference between orange and blue bars)."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The dotted lines depict the average acceptance rate of uncontrolled (blue) and smart (green) charging.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"At a 33 kW power limit, uncontrolled charging achieves an average acceptance rate of 38%, while smart charging reaches 70%. This represents a 1.84 times higher acceptance rate for smart charging. As the power limit increases, the difference in acceptance rates diminishes, reaching zero by 120 kW. This indicates that beyond 120 kW, all EVs could be accommodated, demonstrating the effectiveness of smart charging in accommodating demand within existing grid constraints.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Scenario 2: Figure 5 shows the results for double the charging requests per time step. Acceptance rates decrease to 23% (uncontrolled) and 43% (smart) at a 33 kW power limit. Similar to Scenario 1, the acceptance rate gap diminishes with increasing power limits, vanishing at 143 kW.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Interestingly, at the 33 kW power limit, uncontrolled charging only supplies 309 kWh to EVs, while smart charging provides 603 kWh, equaling the uncontrolled scenario at a 66 kW power limit. This implies that smart charging, by utilizing flexibility, effectively expands the grid capacity by 33 kW.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The yellow bars highlight the utilized flexibility, starting at its peak of 364 kWh at 88 kW and gradually decreasing to zero at 220 kW. This phenomenon reveals that as the grid capacity increases, relying on flexibility decreases. Flexibility contributions are most significant under limited grid capacity, enabling additional EV charging.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"In conclusion, these simulations demonstrate the remarkable capabilities of smart charging in:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Increasing EV charging acceptance rates, especially during peak demand."}),jsxRuntimeExports.jsx("li",{children:"Effectively expanding grid capacity by utilizing flexibility under limited power availability."}),jsxRuntimeExports.jsx("li",{children:"Optimizing resource utilization by prioritizing grid electricity when sufficient capacity exists."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"These findings offer compelling evidence for the widespread adoption of smart charging solutions as a key strategy for integrating high EV penetration into future energy grids.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img6.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Conclusion",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Conclusion"})," ",jsxRuntimeExports.jsx("br",{}),"The Egochain blockchain, as detailed in this whitepaper, serves as a catalyst for the widespread acceptance of electric vehicles. By fostering the establishment of intelligent charging stations, the blockchain introduces incentives that encourage electric vehicle (EV) ownership. The associated rewards, denoted as EGAX, can be employed to cover EV charging expenses, transaction fees within the Egochain blockchain, and even contribute to EV acquisitions. Additionally, the ecosystem employs EGC, the debt token, to facilitate accessible credit for EV manufacturing, with interest payments settled in EGAX. This integrated approach not only promotes sustainable transportation but also establishes a comprehensive and self-sustaining ecosystem for the electric vehicle industry."]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]})},Grid=()=>jsxRuntimeExports.jsx("div",{className:"home_div_section1_grid_bg",children:jsxRuntimeExports.jsxs("svg",{width:"102%",height:"102%",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"smallGrid",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 120 0 L 0 0 0 120",fill:"none",stroke:"currentColor","stroke-width":"1"})}),jsxRuntimeExports.jsx("pattern",{id:"grid",width:"240",height:"240",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{width:"240",height:"240",fill:"url(#smallGrid)"})})]}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})});function bind(e,o){return function(){return e.apply(o,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>o=>{const a=toString$1.call(o);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),o=>kindOf(o)===e),typeOfTest=e=>o=>typeof o===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(e):o=e&&e.buffer&&isArrayBuffer(e.buffer),o}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const o=getPrototypeOf(e);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction(e.pipe),isFormData=e=>{let o;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction(e.append)&&((o=kindOf(e))==="formdata"||o==="object"&&isFunction(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,o,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let c,d;if(typeof e!="object"&&(e=[e]),isArray(e))for(c=0,d=e.length;c<d;c++)o.call(null,e[c],c,e);else{const g=a?Object.getOwnPropertyNames(e):Object.keys(e),b=g.length;let j;for(c=0;c<b;c++)j=g[c],o.call(null,e[j],j,e)}}function findKey(e,o){o=o.toLowerCase();const a=Object.keys(e);let c=a.length,d;for(;c-- >0;)if(d=a[c],o===d.toLowerCase())return d;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},o={},a=(c,d)=>{const g=e&&findKey(o,d)||d;isPlainObject(o[g])&&isPlainObject(c)?o[g]=merge(o[g],c):isPlainObject(c)?o[g]=merge({},c):isArray(c)?o[g]=c.slice():o[g]=c};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&forEach(arguments[c],a);return o}const extend=(e,o,a,{allOwnKeys:c}={})=>(forEach(o,(d,g)=>{a&&isFunction(d)?e[g]=bind(d,a):e[g]=d},{allOwnKeys:c}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,o,a,c)=>{e.prototype=Object.create(o.prototype,c),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:o.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject=(e,o,a,c)=>{let d,g,b;const j={};if(o=o||{},e==null)return o;do{for(d=Object.getOwnPropertyNames(e),g=d.length;g-- >0;)b=d[g],(!c||c(b,e,o))&&!j[b]&&(o[b]=e[b],j[b]=!0);e=a!==!1&&getPrototypeOf(e)}while(e&&(!a||a(e,o))&&e!==Object.prototype);return o},endsWith=(e,o,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=o.length;const c=e.indexOf(o,a);return c!==-1&&c===a},toArray=e=>{if(!e)return null;if(isArray(e))return e;let o=e.length;if(!isNumber(o))return null;const a=new Array(o);for(;o-- >0;)a[o]=e[o];return a},isTypedArray=(e=>o=>e&&o instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,o)=>{const c=(e&&e[Symbol.iterator]).call(e);let d;for(;(d=c.next())&&!d.done;){const g=d.value;o.call(e,g[0],g[1])}},matchAll=(e,o)=>{let a;const c=[];for(;(a=e.exec(o))!==null;)c.push(a);return c},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,c,d){return c.toUpperCase()+d}),hasOwnProperty=(({hasOwnProperty:e})=>(o,a)=>e.call(o,a))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,o)=>{const a=Object.getOwnPropertyDescriptors(e),c={};forEach(a,(d,g)=>{let b;(b=o(d,g,e))!==!1&&(c[g]=b||d)}),Object.defineProperties(e,c)},freezeMethods=e=>{reduceDescriptors(e,(o,a)=>{if(isFunction(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const c=e[a];if(isFunction(c)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},toObjectSet=(e,o)=>{const a={},c=d=>{d.forEach(g=>{a[g]=!0})};return isArray(e)?c(e):c(String(e).split(o)),a},noop=()=>{},toFiniteNumber=(e,o)=>(e=+e,Number.isFinite(e)?e:o),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,o=ALPHABET.ALPHA_DIGIT)=>{let a="";const{length:c}=o;for(;e--;)a+=o[Math.random()*c|0];return a};function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const toJSONObject=e=>{const o=new Array(10),a=(c,d)=>{if(isObject(c)){if(o.indexOf(c)>=0)return;if(!("toJSON"in c)){o[d]=c;const g=isArray(c)?[]:{};return forEach(c,(b,j)=>{const $=a(b,d+1);!isUndefined($)&&(g[j]=$)}),o[d]=void 0,g}}return c};return a(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(e,o,a,c,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",o&&(this.code=o),a&&(this.config=a),c&&(this.request=c),d&&(this.response=d)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e,o,a,c,d,g)=>{const b=Object.create(prototype$1);return utils$1.toFlatObject(e,b,function($){return $!==Error.prototype},j=>j!=="isAxiosError"),AxiosError.call(b,e.message,o,a,c,d),b.cause=e,b.name=e.name,g&&Object.assign(b,g),b};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,o,a){return e?e.concat(o).map(function(d,g){return d=removeBrackets(d),!a&&g?"["+d+"]":d}).join(a?".":""):o}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(o){return/^is[A-Z]/.test(o)});function toFormData(e,o,a){if(!utils$1.isObject(e))throw new TypeError("target must be an object");o=o||new FormData,a=utils$1.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(wt,Ct){return!utils$1.isUndefined(Ct[wt])});const c=a.metaTokens,d=a.visitor||st,g=a.dots,b=a.indexes,$=(a.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(o);if(!utils$1.isFunction(d))throw new TypeError("visitor must be a function");function _e(yt){if(yt===null)return"";if(utils$1.isDate(yt))return yt.toISOString();if(!$&&utils$1.isBlob(yt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(yt)||utils$1.isTypedArray(yt)?$&&typeof Blob=="function"?new Blob([yt]):Buffer.from(yt):yt}function st(yt,wt,Ct){let Pt=yt;if(yt&&!Ct&&typeof yt=="object"){if(utils$1.endsWith(wt,"{}"))wt=c?wt:wt.slice(0,-2),yt=JSON.stringify(yt);else if(utils$1.isArray(yt)&&isFlatArray(yt)||(utils$1.isFileList(yt)||utils$1.endsWith(wt,"[]"))&&(Pt=utils$1.toArray(yt)))return wt=removeBrackets(wt),Pt.forEach(function(Tt,kt){!(utils$1.isUndefined(Tt)||Tt===null)&&o.append(b===!0?renderKey([wt],kt,g):b===null?wt:wt+"[]",_e(Tt))}),!1}return isVisitable(yt)?!0:(o.append(renderKey(Ct,wt,g),_e(yt)),!1)}const rt=[],ut=Object.assign(predicates,{defaultVisitor:st,convertValue:_e,isVisitable});function gt(yt,wt){if(!utils$1.isUndefined(yt)){if(rt.indexOf(yt)!==-1)throw Error("Circular reference detected in "+wt.join("."));rt.push(yt),utils$1.forEach(yt,function(Pt,At){(!(utils$1.isUndefined(Pt)||Pt===null)&&d.call(o,Pt,utils$1.isString(At)?At.trim():At,wt,ut))===!0&&gt(Pt,wt?wt.concat(At):[At])}),rt.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return gt(e),o}function encode$1(e){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(c){return o[c]})}function AxiosURLSearchParams(e,o){this._pairs=[],e&&toFormData(e,this,o)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(o,a){this._pairs.push([o,a])};prototype.toString=function(o){const a=o?function(c){return o.call(this,c,encode$1)}:encode$1;return this._pairs.map(function(d){return a(d[0])+"="+a(d[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,o,a){if(!o)return e;const c=a&&a.encode||encode,d=a&&a.serialize;let g;if(d?g=d(o,a):g=utils$1.isURLSearchParams(o)?o.toString():new AxiosURLSearchParams(o,a).toString(c),g){const b=e.indexOf("#");b!==-1&&(e=e.slice(0,b)),e+=(e.indexOf("?")===-1?"?":"&")+g}return e}class InterceptorManager{constructor(){this.handlers=[]}use(o,a,c){return this.handlers.push({fulfilled:o,rejected:a,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){utils$1.forEach(this.handlers,function(c){c!==null&&o(c)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(e=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,o){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(a,c,d,g){return platform.isNode&&utils$1.isBuffer(a)?(this.append(c,a.toString("base64")),!1):g.defaultVisitor.apply(this,arguments)}},o))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(o=>o[0]==="[]"?"":o[1]||o[0])}function arrayToObject(e){const o={},a=Object.keys(e);let c;const d=a.length;let g;for(c=0;c<d;c++)g=a[c],o[g]=e[g];return o}function formDataToJSON(e){function o(a,c,d,g){let b=a[g++];if(b==="__proto__")return!0;const j=Number.isFinite(+b),$=g>=a.length;return b=!b&&utils$1.isArray(d)?d.length:b,$?(utils$1.hasOwnProp(d,b)?d[b]=[d[b],c]:d[b]=c,!j):((!d[b]||!utils$1.isObject(d[b]))&&(d[b]=[]),o(a,c,d[b],g)&&utils$1.isArray(d[b])&&(d[b]=arrayToObject(d[b])),!j)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const a={};return utils$1.forEachEntry(e,(c,d)=>{o(parsePropPath(c),d,a,0)}),a}return null}function stringifySafely(e,o,a){if(utils$1.isString(e))try{return(o||JSON.parse)(e),utils$1.trim(e)}catch(c){if(c.name!=="SyntaxError")throw c}return(a||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(o,a){const c=a.getContentType()||"",d=c.indexOf("application/json")>-1,g=utils$1.isObject(o);if(g&&utils$1.isHTMLForm(o)&&(o=new FormData(o)),utils$1.isFormData(o))return d?JSON.stringify(formDataToJSON(o)):o;if(utils$1.isArrayBuffer(o)||utils$1.isBuffer(o)||utils$1.isStream(o)||utils$1.isFile(o)||utils$1.isBlob(o))return o;if(utils$1.isArrayBufferView(o))return o.buffer;if(utils$1.isURLSearchParams(o))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let j;if(g){if(c.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(o,this.formSerializer).toString();if((j=utils$1.isFileList(o))||c.indexOf("multipart/form-data")>-1){const $=this.env&&this.env.FormData;return toFormData(j?{"files[]":o}:o,$&&new $,this.formSerializer)}}return g||d?(a.setContentType("application/json",!1),stringifySafely(o)):o}],transformResponse:[function(o){const a=this.transitional||defaults.transitional,c=a&&a.forcedJSONParsing,d=this.responseType==="json";if(o&&utils$1.isString(o)&&(c&&!this.responseType||d)){const b=!(a&&a.silentJSONParsing)&&d;try{return JSON.parse(o)}catch(j){if(b)throw j.name==="SyntaxError"?AxiosError.from(j,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):j}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const o={};let a,c,d;return e&&e.split(`
`).forEach(function(b){d=b.indexOf(":"),a=b.substring(0,d).trim().toLowerCase(),c=b.substring(d+1).trim(),!(!a||o[a]&&ignoreDuplicateOf[a])&&(a==="set-cookie"?o[a]?o[a].push(c):o[a]=[c]:o[a]=o[a]?o[a]+", "+c:c)}),o},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const o=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=a.exec(e);)o[c[1]]=c[2];return o}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,o,a,c,d){if(utils$1.isFunction(c))return c.call(this,o,a);if(d&&(o=a),!!utils$1.isString(o)){if(utils$1.isString(c))return o.indexOf(c)!==-1;if(utils$1.isRegExp(c))return c.test(o)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,a,c)=>a.toUpperCase()+c)}function buildAccessors(e,o){const a=utils$1.toCamelCase(" "+o);["get","set","has"].forEach(c=>{Object.defineProperty(e,c+a,{value:function(d,g,b){return this[c].call(this,o,d,g,b)},configurable:!0})})}class AxiosHeaders{constructor(o){o&&this.set(o)}set(o,a,c){const d=this;function g(j,$,_e){const st=normalizeHeader($);if(!st)throw new Error("header name must be a non-empty string");const rt=utils$1.findKey(d,st);(!rt||d[rt]===void 0||_e===!0||_e===void 0&&d[rt]!==!1)&&(d[rt||$]=normalizeValue(j))}const b=(j,$)=>utils$1.forEach(j,(_e,st)=>g(_e,st,$));return utils$1.isPlainObject(o)||o instanceof this.constructor?b(o,a):utils$1.isString(o)&&(o=o.trim())&&!isValidHeaderName(o)?b(parseHeaders(o),a):o!=null&&g(a,o,c),this}get(o,a){if(o=normalizeHeader(o),o){const c=utils$1.findKey(this,o);if(c){const d=this[c];if(!a)return d;if(a===!0)return parseTokens(d);if(utils$1.isFunction(a))return a.call(this,d,c);if(utils$1.isRegExp(a))return a.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,a){if(o=normalizeHeader(o),o){const c=utils$1.findKey(this,o);return!!(c&&this[c]!==void 0&&(!a||matchHeaderValue(this,this[c],c,a)))}return!1}delete(o,a){const c=this;let d=!1;function g(b){if(b=normalizeHeader(b),b){const j=utils$1.findKey(c,b);j&&(!a||matchHeaderValue(c,c[j],j,a))&&(delete c[j],d=!0)}}return utils$1.isArray(o)?o.forEach(g):g(o),d}clear(o){const a=Object.keys(this);let c=a.length,d=!1;for(;c--;){const g=a[c];(!o||matchHeaderValue(this,this[g],g,o,!0))&&(delete this[g],d=!0)}return d}normalize(o){const a=this,c={};return utils$1.forEach(this,(d,g)=>{const b=utils$1.findKey(c,g);if(b){a[b]=normalizeValue(d),delete a[g];return}const j=o?formatHeader(g):String(g).trim();j!==g&&delete a[g],a[j]=normalizeValue(d),c[j]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const a=Object.create(null);return utils$1.forEach(this,(c,d)=>{c!=null&&c!==!1&&(a[d]=o&&utils$1.isArray(c)?c.join(", "):c)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,a])=>o+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...a){const c=new this(o);return a.forEach(d=>c.set(d)),c}static accessor(o){const c=(this[$internals]=this[$internals]={accessors:{}}).accessors,d=this.prototype;function g(b){const j=normalizeHeader(b);c[j]||(buildAccessors(d,b),c[j]=!0)}return utils$1.isArray(o)?o.forEach(g):g(o),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:e},o)=>{let a=o[0].toUpperCase()+o.slice(1);return{get:()=>e,set(c){this[a]=c}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(e,o){const a=this||defaults$1,c=o||a,d=AxiosHeaders$1.from(c.headers);let g=c.data;return utils$1.forEach(e,function(j){g=j.call(a,g,d.normalize(),o?o.status:void 0)}),d.normalize(),g}function isCancel(e){return!!(e&&e.__CANCEL__)}function CanceledError(e,o,a){AxiosError.call(this,e??"canceled",AxiosError.ERR_CANCELED,o,a),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(e,o,a){const c=a.config.validateStatus;!a.status||!c||c(a.status)?e(a):o(new AxiosError("Request failed with status code "+a.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}const cookies=platform.hasStandardBrowserEnv?{write(e,o,a,c,d,g){const b=[e+"="+encodeURIComponent(o)];utils$1.isNumber(a)&&b.push("expires="+new Date(a).toGMTString()),utils$1.isString(c)&&b.push("path="+c),utils$1.isString(d)&&b.push("domain="+d),g===!0&&b.push("secure"),document.cookie=b.join("; ")},read(e){const o=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,o){return o?e.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):e}function buildFullPath(e,o){return e&&!isAbsoluteURL(o)?combineURLs(e,o):o}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const o=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");let c;function d(g){let b=g;return o&&(a.setAttribute("href",b),b=a.href),a.setAttribute("href",b),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(b){const j=utils$1.isString(b)?d(b):b;return j.protocol===c.protocol&&j.host===c.host}}():function(){return function(){return!0}}();function parseProtocol(e){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return o&&o[1]||""}function speedometer(e,o){e=e||10;const a=new Array(e),c=new Array(e);let d=0,g=0,b;return o=o!==void 0?o:1e3,function($){const _e=Date.now(),st=c[g];b||(b=_e),a[d]=$,c[d]=_e;let rt=g,ut=0;for(;rt!==d;)ut+=a[rt++],rt=rt%e;if(d=(d+1)%e,d===g&&(g=(g+1)%e),_e-b<o)return;const gt=st&&_e-st;return gt?Math.round(ut*1e3/gt):void 0}}function progressEventReducer(e,o){let a=0;const c=speedometer(50,250);return d=>{const g=d.loaded,b=d.lengthComputable?d.total:void 0,j=g-a,$=c(j),_e=g<=b;a=g;const st={loaded:g,total:b,progress:b?g/b:void 0,bytes:j,rate:$||void 0,estimated:$&&b&&_e?(b-g)/$:void 0,event:d};st[o?"download":"upload"]=!0,e(st)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(a,c){let d=e.data;const g=AxiosHeaders$1.from(e.headers).normalize();let{responseType:b,withXSRFToken:j}=e,$;function _e(){e.cancelToken&&e.cancelToken.unsubscribe($),e.signal&&e.signal.removeEventListener("abort",$)}let st;if(utils$1.isFormData(d)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)g.setContentType(!1);else if((st=g.getContentType())!==!1){const[wt,...Ct]=st?st.split(";").map(Pt=>Pt.trim()).filter(Boolean):[];g.setContentType([wt||"multipart/form-data",...Ct].join("; "))}}let rt=new XMLHttpRequest;if(e.auth){const wt=e.auth.username||"",Ct=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.set("Authorization","Basic "+btoa(wt+":"+Ct))}const ut=buildFullPath(e.baseURL,e.url);rt.open(e.method.toUpperCase(),buildURL(ut,e.params,e.paramsSerializer),!0),rt.timeout=e.timeout;function gt(){if(!rt)return;const wt=AxiosHeaders$1.from("getAllResponseHeaders"in rt&&rt.getAllResponseHeaders()),Pt={data:!b||b==="text"||b==="json"?rt.responseText:rt.response,status:rt.status,statusText:rt.statusText,headers:wt,config:e,request:rt};settle(function(Tt){a(Tt),_e()},function(Tt){c(Tt),_e()},Pt),rt=null}if("onloadend"in rt?rt.onloadend=gt:rt.onreadystatechange=function(){!rt||rt.readyState!==4||rt.status===0&&!(rt.responseURL&&rt.responseURL.indexOf("file:")===0)||setTimeout(gt)},rt.onabort=function(){rt&&(c(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,rt)),rt=null)},rt.onerror=function(){c(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,rt)),rt=null},rt.ontimeout=function(){let Ct=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const Pt=e.transitional||transitionalDefaults;e.timeoutErrorMessage&&(Ct=e.timeoutErrorMessage),c(new AxiosError(Ct,Pt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,rt)),rt=null},platform.hasStandardBrowserEnv&&(j&&utils$1.isFunction(j)&&(j=j(e)),j||j!==!1&&isURLSameOrigin(ut))){const wt=e.xsrfHeaderName&&e.xsrfCookieName&&cookies.read(e.xsrfCookieName);wt&&g.set(e.xsrfHeaderName,wt)}d===void 0&&g.setContentType(null),"setRequestHeader"in rt&&utils$1.forEach(g.toJSON(),function(Ct,Pt){rt.setRequestHeader(Pt,Ct)}),utils$1.isUndefined(e.withCredentials)||(rt.withCredentials=!!e.withCredentials),b&&b!=="json"&&(rt.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&rt.addEventListener("progress",progressEventReducer(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&rt.upload&&rt.upload.addEventListener("progress",progressEventReducer(e.onUploadProgress)),(e.cancelToken||e.signal)&&($=wt=>{rt&&(c(!wt||wt.type?new CanceledError(null,e,rt):wt),rt.abort(),rt=null)},e.cancelToken&&e.cancelToken.subscribe($),e.signal&&(e.signal.aborted?$():e.signal.addEventListener("abort",$)));const yt=parseProtocol(ut);if(yt&&platform.protocols.indexOf(yt)===-1){c(new AxiosError("Unsupported protocol "+yt+":",AxiosError.ERR_BAD_REQUEST,e));return}rt.send(d||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(e,o)=>{if(e){try{Object.defineProperty(e,"name",{value:o})}catch{}Object.defineProperty(e,"adapterName",{value:o})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:o}=e;let a,c;const d={};for(let g=0;g<o;g++){a=e[g];let b;if(c=a,!isResolvedHandle(a)&&(c=knownAdapters[(b=String(a)).toLowerCase()],c===void 0))throw new AxiosError(`Unknown adapter '${b}'`);if(c)break;d[b||"#"+g]=c}if(!c){const g=Object.entries(d).map(([j,$])=>`adapter ${j} `+($===!1?"is not supported by the environment":"is not available in the build"));let b=o?g.length>1?`since :
`+g.map(renderReason).join(`
`):" "+renderReason(g[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+b,"ERR_NOT_SUPPORT")}return c},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(c){return throwIfCancellationRequested(e),c.data=transformData.call(e,e.transformResponse,c),c.headers=AxiosHeaders$1.from(c.headers),c},function(c){return isCancel(c)||(throwIfCancellationRequested(e),c&&c.response&&(c.response.data=transformData.call(e,e.transformResponse,c.response),c.response.headers=AxiosHeaders$1.from(c.response.headers))),Promise.reject(c)})}const headersToObject=e=>e instanceof AxiosHeaders$1?e.toJSON():e;function mergeConfig(e,o){o=o||{};const a={};function c(_e,st,rt){return utils$1.isPlainObject(_e)&&utils$1.isPlainObject(st)?utils$1.merge.call({caseless:rt},_e,st):utils$1.isPlainObject(st)?utils$1.merge({},st):utils$1.isArray(st)?st.slice():st}function d(_e,st,rt){if(utils$1.isUndefined(st)){if(!utils$1.isUndefined(_e))return c(void 0,_e,rt)}else return c(_e,st,rt)}function g(_e,st){if(!utils$1.isUndefined(st))return c(void 0,st)}function b(_e,st){if(utils$1.isUndefined(st)){if(!utils$1.isUndefined(_e))return c(void 0,_e)}else return c(void 0,st)}function j(_e,st,rt){if(rt in o)return c(_e,st);if(rt in e)return c(void 0,_e)}const $={url:g,method:g,data:g,baseURL:b,transformRequest:b,transformResponse:b,paramsSerializer:b,timeout:b,timeoutMessage:b,withCredentials:b,withXSRFToken:b,adapter:b,responseType:b,xsrfCookieName:b,xsrfHeaderName:b,onUploadProgress:b,onDownloadProgress:b,decompress:b,maxContentLength:b,maxBodyLength:b,beforeRedirect:b,transport:b,httpAgent:b,httpsAgent:b,cancelToken:b,socketPath:b,responseEncoding:b,validateStatus:j,headers:(_e,st)=>d(headersToObject(_e),headersToObject(st),!0)};return utils$1.forEach(Object.keys(Object.assign({},e,o)),function(st){const rt=$[st]||d,ut=rt(e[st],o[st],st);utils$1.isUndefined(ut)&&rt!==j||(a[st]=ut)}),a}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,o)=>{validators$1[e]=function(c){return typeof c===e||"a"+(o<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(o,a,c){function d(g,b){return"[Axios v"+VERSION+"] Transitional option '"+g+"'"+b+(c?". "+c:"")}return(g,b,j)=>{if(o===!1)throw new AxiosError(d(b," has been removed"+(a?" in "+a:"")),AxiosError.ERR_DEPRECATED);return a&&!deprecatedWarnings[b]&&(deprecatedWarnings[b]=!0,console.warn(d(b," has been deprecated since v"+a+" and will be removed in the near future"))),o?o(g,b,j):!0}};function assertOptions(e,o,a){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const c=Object.keys(e);let d=c.length;for(;d-- >0;){const g=c[d],b=o[g];if(b){const j=e[g],$=j===void 0||b(j,g,e);if($!==!0)throw new AxiosError("option "+g+" must be "+$,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new AxiosError("Unknown option "+g,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(o){this.defaults=o,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(o,a){try{return await this._request(o,a)}catch(c){if(c instanceof Error){let d;Error.captureStackTrace?Error.captureStackTrace(d={}):d=new Error;const g=d.stack?d.stack.replace(/^.+\n/,""):"";c.stack?g&&!String(c.stack).endsWith(g.replace(/^.+\n.+\n/,""))&&(c.stack+=`
`+g):c.stack=g}throw c}}_request(o,a){typeof o=="string"?(a=a||{},a.url=o):a=o||{},a=mergeConfig(this.defaults,a);const{transitional:c,paramsSerializer:d,headers:g}=a;c!==void 0&&validator.assertOptions(c,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),d!=null&&(utils$1.isFunction(d)?a.paramsSerializer={serialize:d}:validator.assertOptions(d,{encode:validators.function,serialize:validators.function},!0)),a.method=(a.method||this.defaults.method||"get").toLowerCase();let b=g&&utils$1.merge(g.common,g[a.method]);g&&utils$1.forEach(["delete","get","head","post","put","patch","common"],yt=>{delete g[yt]}),a.headers=AxiosHeaders$1.concat(b,g);const j=[];let $=!0;this.interceptors.request.forEach(function(wt){typeof wt.runWhen=="function"&&wt.runWhen(a)===!1||($=$&&wt.synchronous,j.unshift(wt.fulfilled,wt.rejected))});const _e=[];this.interceptors.response.forEach(function(wt){_e.push(wt.fulfilled,wt.rejected)});let st,rt=0,ut;if(!$){const yt=[dispatchRequest.bind(this),void 0];for(yt.unshift.apply(yt,j),yt.push.apply(yt,_e),ut=yt.length,st=Promise.resolve(a);rt<ut;)st=st.then(yt[rt++],yt[rt++]);return st}ut=j.length;let gt=a;for(rt=0;rt<ut;){const yt=j[rt++],wt=j[rt++];try{gt=yt(gt)}catch(Ct){wt.call(this,Ct);break}}try{st=dispatchRequest.call(this,gt)}catch(yt){return Promise.reject(yt)}for(rt=0,ut=_e.length;rt<ut;)st=st.then(_e[rt++],_e[rt++]);return st}getUri(o){o=mergeConfig(this.defaults,o);const a=buildFullPath(o.baseURL,o.url);return buildURL(a,o.params,o.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(o){Axios.prototype[o]=function(a,c){return this.request(mergeConfig(c||{},{method:o,url:a,data:(c||{}).data}))}});utils$1.forEach(["post","put","patch"],function(o){function a(c){return function(g,b,j){return this.request(mergeConfig(j||{},{method:o,headers:c?{"Content-Type":"multipart/form-data"}:{},url:g,data:b}))}}Axios.prototype[o]=a(),Axios.prototype[o+"Form"]=a(!0)});const Axios$1=Axios;class CancelToken{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(g){a=g});const c=this;this.promise.then(d=>{if(!c._listeners)return;let g=c._listeners.length;for(;g-- >0;)c._listeners[g](d);c._listeners=null}),this.promise.then=d=>{let g;const b=new Promise(j=>{c.subscribe(j),g=j}).then(d);return b.cancel=function(){c.unsubscribe(g)},b},o(function(g,b,j){c.reason||(c.reason=new CanceledError(g,b,j),a(c.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const a=this._listeners.indexOf(o);a!==-1&&this._listeners.splice(a,1)}static source(){let o;return{token:new CancelToken(function(d){o=d}),cancel:o}}}const CancelToken$1=CancelToken;function spread(e){return function(a){return e.apply(null,a)}}function isAxiosError(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e,o])=>{HttpStatusCode[o]=e});const HttpStatusCode$1=HttpStatusCode;function createInstance(e){const o=new Axios$1(e),a=bind(Axios$1.prototype.request,o);return utils$1.extend(a,Axios$1.prototype,o,{allOwnKeys:!0}),utils$1.extend(a,o,null,{allOwnKeys:!0}),a.create=function(d){return createInstance(mergeConfig(e,d))},a}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(o){return Promise.all(o)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const API_URL="https://egoras-v3-staging.egoras.com",config={headers:{"Content-Type":"application/json"}};var ScaleLoader$1={},unitConverter={};Object.defineProperty(unitConverter,"__esModule",{value:!0});unitConverter.cssValue=unitConverter.parseLengthAndUnit=void 0;var cssUnit={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function parseLengthAndUnit(e){if(typeof e=="number")return{value:e,unit:"px"};var o,a=(e.match(/^[0-9.]*/)||"").toString();a.includes(".")?o=parseFloat(a):o=parseInt(a,10);var c=(e.match(/[^0-9]*$/)||"").toString();return cssUnit[c]?{value:o,unit:c}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(o,"px.")),{value:o,unit:"px"})}unitConverter.parseLengthAndUnit=parseLengthAndUnit;function cssValue(e){var o=parseLengthAndUnit(e);return"".concat(o.value).concat(o.unit)}unitConverter.cssValue=cssValue;var animation={};Object.defineProperty(animation,"__esModule",{value:!0});animation.createAnimation=void 0;var createAnimation=function(e,o,a){var c="react-spinners-".concat(e,"-").concat(a);if(typeof window>"u"||!window.document)return c;var d=document.createElement("style");document.head.appendChild(d);var g=d.sheet,b=`
    @keyframes `.concat(c,` {
      `).concat(o,`
    }
  `);return g&&g.insertRule(b,0),c};animation.createAnimation=createAnimation;var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(e){for(var o,a=1,c=arguments.length;a<c;a++){o=arguments[a];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(e[d]=o[d])}return e},__assign.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,o,a,c){c===void 0&&(c=a);var d=Object.getOwnPropertyDescriptor(o,a);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(e,c,d)}:function(e,o,a,c){c===void 0&&(c=a),e[c]=o[a]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,o){Object.defineProperty(e,"default",{enumerable:!0,value:o})}:function(e,o){e.default=o}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var a in e)a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(o,e,a);return __setModuleDefault(o,e),o},__rest=commonjsGlobal&&commonjsGlobal.__rest||function(e,o){var a={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&o.indexOf(c)<0&&(a[c]=e[c]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(e);d<c.length;d++)o.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(e,c[d])&&(a[c[d]]=e[c[d]]);return a};Object.defineProperty(ScaleLoader$1,"__esModule",{value:!0});var React=__importStar(reactExports$1),unitConverter_1=unitConverter,animation_1=animation,scale=(0,animation_1.createAnimation)("ScaleLoader","0% {transform: scaley(1.0)} 50% {transform: scaley(0.4)} 100% {transform: scaley(1.0)}","scale");function ScaleLoader(e){var o=e.loading,a=o===void 0?!0:o,c=e.color,d=c===void 0?"#000000":c,g=e.speedMultiplier,b=g===void 0?1:g,j=e.cssOverride,$=j===void 0?{}:j,_e=e.height,st=_e===void 0?35:_e,rt=e.width,ut=rt===void 0?4:rt,gt=e.radius,yt=gt===void 0?2:gt,wt=e.margin,Ct=wt===void 0?2:wt,Pt=__rest(e,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin"]),At=__assign({display:"inherit"},$),Tt=function(kt){return{backgroundColor:d,width:(0,unitConverter_1.cssValue)(ut),height:(0,unitConverter_1.cssValue)(st),margin:(0,unitConverter_1.cssValue)(Ct),borderRadius:(0,unitConverter_1.cssValue)(yt),display:"inline-block",animation:"".concat(scale," ").concat(1/b,"s ").concat(kt*.1,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return a?React.createElement("span",__assign({style:At},Pt),React.createElement("span",{style:Tt(1)}),React.createElement("span",{style:Tt(2)}),React.createElement("span",{style:Tt(3)}),React.createElement("span",{style:Tt(4)}),React.createElement("span",{style:Tt(5)})):null}var _default=ScaleLoader$1.default=ScaleLoader;const v$1="4.10.1",fr$1=25,ip$1=0,op$1=55,w$1=796,h$1=714,nm$1="Anim8*",ddd$1=0,assets$1=[{id:"comp_745",layers:[{ddd:0,ind:1,ty:4,nm:"cruz3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:18,s:[1],e:[100]},{t:28}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:18,s:[-33],e:[13]},{t:50}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},n:"0_1_0p333_0",t:18,s:[614.125,467.5,0],e:[841.125,680.5,0],to:[37.8333320617676,35.5,0],ti:[-37.8333320617676,-35.5,0]},{t:28}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:18,op:1020.5,st:18,bm:0},{ddd:0,ind:2,ty:4,nm:"cruz2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:16,s:[1],e:[100]},{t:26}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:16,s:[-30],e:[16]},{t:50}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},n:"0_1_0p333_0",t:16,s:[606.125,465.5,0],e:[322.125,572.5,0],to:[-47.3333320617676,17.8333339691162,0],ti:[47.3333320617676,-17.8333339691162,0]},{t:26}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:16,op:1018.5,st:16,bm:0},{ddd:0,ind:3,ty:4,nm:"cruz1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:15,s:[1],e:[100]},{t:25}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:15,s:[-28],e:[18]},{t:50}],ix:10},p:{a:1,k:[{i:{x:.103,y:1},o:{x:.333,y:0},n:"0p103_1_0p333_0",t:15,s:[614.125,462.5,0],e:[852.125,164.5,0],to:[39.6666679382324,-49.6666679382324,0],ti:[-39.6666679382324,49.6666679382324,0]},{t:25}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:15,op:1017.5,st:15,bm:0},{ddd:0,ind:4,ty:4,nm:"Bolas2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[617.5,490.5,0],ix:2},a:{a:0,k:[-1112,-1428,0],ix:1},s:{a:1,k:[{i:{x:[.101,.101,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p101_1_0p333_0","0p101_1_0p333_0","0p667_1_0p333_0"],t:13,s:[0,0,100],e:[100,100,100]},{t:25}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-952.029,-1150.197],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[64.361,64.361],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 3",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1435.793,-1556.371],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[64.361,64.361],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 2",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:1015.5,st:13,bm:0},{ddd:0,ind:5,ty:4,nm:"Bolas1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.921]},o:{x:[.333],y:[0]},n:["0p833_0p921_0p333_0"],t:11,s:[-11],e:[0]},{i:{x:[.15],y:[1]},o:{x:[.167],y:[.327]},n:["0p15_1_0p167_0p327"],t:23,s:[0],e:[6]},{t:50}],ix:10},p:{a:0,k:[621.5,478.5,0],ix:2},a:{a:0,k:[-1108,-1440,0],ix:1},s:{a:1,k:[{i:{x:[.101,.101,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p101_1_0p333_0","0p101_1_0p333_0","0p667_1_0p333_0"],t:11,s:[0,0,100],e:[100,100,100]},{t:23}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1151.238,-1723.625],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[140.88,140.88],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1282.949,-1147.881],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[140.88,140.88],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-819.535,-1371.645],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[85.671,85.671],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 3",np:3,cix:2,ix:3,mn:"ADBE Vector Group",hd:!1}],ip:11,op:1013.5,st:11,bm:0},{ddd:0,ind:6,ty:4,nm:"stroke3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1950.5,2175.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1117.454,-1623.493]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:9,s:[0],e:[100]},{t:17}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:9,op:1011.5,st:9,bm:0},{ddd:0,ind:7,ty:4,nm:"stroke4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2288.5,1790.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1372.351,-1474.477]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:6.5,s:[0],e:[100]},{t:14.5}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:6.5,op:1009,st:6.5,bm:0},{ddd:0,ind:8,ty:4,nm:"stroke2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1818.5,2059.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1027.49,-1672.499]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:4,s:[0],e:[100]},{t:12}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:4,op:1006.5,st:4,bm:0},{ddd:0,ind:9,ty:4,nm:"stroke1",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1729.5,1918.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1027.49,-1672.499]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:0,s:[0],e:[100]},{t:8}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1002.5,st:0,bm:0}]}],layers$1=[{ddd:0,ind:1,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[396.5,357,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-72,6],[-28,49],[75,-54]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:18,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:18,s:[0],e:[100]},{t:32}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:18,op:73,st:18,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[398,357.031,0],ix:2},a:{a:0,k:[9.719,2.719,0],ix:1},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0_1_0p333_0","0_1_0p333_0","0p667_1_0p333_0"],t:13,s:[30,30,100],e:[91.577,91.577,100]},{t:21}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[355.438,355.438],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.719,2.719],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:13,op:68,st:13,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[398.111,357.031,0],ix:2},a:{a:0,k:[9.719,2.719,0],ix:1},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0_1_0p333_0","0_1_0p333_0","0p667_1_0p333_0"],t:8,s:[30,30,100],e:[101.143,101.143,100]},{t:16}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[355.438,355.438],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.47843137,.86666667,.65882353,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.719,2.719],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:63,st:8,bm:0},{ddd:0,ind:4,ty:0,nm:"BG",refId:"comp_745",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1513.5,1812.5,0],ix:2},a:{a:0,k:[1729.5,1918.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:3459,h:3837,ip:0,op:1005,st:0,bm:0}],successLoader={v:v$1,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$1,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(e,o){module.exports=o()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(o){_useWebWorker=!!o},getWebWorker=function(){return _useWebWorker},setLocationHref=function(o){locationHref=o},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,o){var a,c=e.length,d;for(a=0;a<c;a+=1){d=e[a].prototype;for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(o.prototype[g]=d[g])}}function getDescriptor(e,o){return Object.getOwnPropertyDescriptor(e,o)}function createProxyFunction(e){function o(){}return o.prototype=e,o}var audioControllerFactory=function(){function e(o){this.audios=[],this.audioFactory=o,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(a){this.audios.push(a)},pause:function(){var a,c=this.audios.length;for(a=0;a<c;a+=1)this.audios[a].pause()},resume:function(){var a,c=this.audios.length;for(a=0;a<c;a+=1)this.audios[a].resume()},setRate:function(a){var c,d=this.audios.length;for(c=0;c<d;c+=1)this.audios[c].setRate(a)},createAudio:function(a){return this.audioFactory?this.audioFactory(a):window.Howl?new window.Howl({src:[a]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(a){this.audioFactory=a},setVolume:function(a){this._volume=a,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var a,c=this.audios.length;for(a=0;a<c;a+=1)this.audios[a].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(a,c){var d=0,g=[],b;switch(a){case"int16":case"uint8c":b=1;break;default:b=1.1;break}for(d=0;d<c;d+=1)g.push(b);return g}function o(a,c){return a==="float32"?new Float32Array(c):a==="int16"?new Int16Array(c):a==="uint8c"?new Uint8ClampedArray(c):e(a,c)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?o:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(a){return typeof a}:_typeof$6=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],o,a=e.length;for(o=0;o<a;o+=1)BMMath[e[o]]=Math[e[o]]})(),BMMath.random=Math.random,BMMath.abs=function(e){var o=_typeof$6(e);if(o==="object"&&e.length){var a=createSizedArray(e.length),c,d=e.length;for(c=0;c<d;c+=1)a[c]=Math.abs(e[c]);return a}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,o,a,c){this.type=e,this.currentTime=o,this.totalTime=a,this.direction=c<0?-1:1}function BMCompleteEvent(e,o){this.type=e,this.direction=o<0?-1:1}function BMCompleteLoopEvent(e,o,a,c){this.type=e,this.currentLoop=a,this.totalLoops=o,this.direction=c<0?-1:1}function BMSegmentStartEvent(e,o,a){this.type=e,this.firstFrame=o,this.totalFrames=a}function BMDestroyEvent(e,o){this.type=e,this.target=o}function BMRenderFrameErrorEvent(e,o){this.type="renderFrameError",this.nativeError=e,this.currentTime=o}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=function(){var e=0;return function(){return e+=1,idPrefix$1+"__lottie_element_"+e}}();function HSVtoRGB(e,o,a){var c,d,g,b,j,$,_e,st;switch(b=Math.floor(e*6),j=e*6-b,$=a*(1-o),_e=a*(1-j*o),st=a*(1-(1-j)*o),b%6){case 0:c=a,d=st,g=$;break;case 1:c=_e,d=a,g=$;break;case 2:c=$,d=a,g=st;break;case 3:c=$,d=_e,g=a;break;case 4:c=st,d=$,g=a;break;case 5:c=a,d=$,g=_e;break}return[c,d,g]}function RGBtoHSV(e,o,a){var c=Math.max(e,o,a),d=Math.min(e,o,a),g=c-d,b,j=c===0?0:g/c,$=c/255;switch(c){case d:b=0;break;case e:b=o-a+g*(o<a?6:0),b/=6*g;break;case o:b=a-e+g*2,b/=6*g;break;case a:b=e-o+g*4,b/=6*g;break}return[b,j,$]}function addSaturationToRGB(e,o){var a=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return a[1]+=o,a[1]>1?a[1]=1:a[1]<=0&&(a[1]=0),HSVtoRGB(a[0],a[1],a[2])}function addBrightnessToRGB(e,o){var a=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return a[2]+=o,a[2]>1?a[2]=1:a[2]<0&&(a[2]=0),HSVtoRGB(a[0],a[1],a[2])}function addHueToRGB(e,o){var a=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return a[0]+=o/360,a[0]>1?a[0]-=1:a[0]<0&&(a[0]+=1),HSVtoRGB(a[0],a[1],a[2])}var rgbToHex=function(){var e=[],o,a;for(o=0;o<256;o+=1)a=o.toString(16),e[o]=a.length===1?"0"+a:a;return function(c,d,g){return c<0&&(c=0),d<0&&(d=0),g<0&&(g=0),"#"+e[c]+e[d]+e[g]}}(),setSubframeEnabled=function(o){subframeEnabled=!!o},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(o){expressionsPlugin=o},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(o){expressionsInterfaces=o},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(o){defaultCurveSegments=o},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(o){idPrefix$1=o};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(a){return typeof a}:_typeof$5=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$5(e)}var dataManager=function(){var e=1,o=[],a,c,d={onmessage:function(){},postMessage:function(gt){a({data:gt})}},g={postMessage:function(gt){d.onmessage({data:gt})}};function b(ut){if(window.Worker&&window.Blob&&getWebWorker()){var gt=new Blob(["var _workerSelf = self; self.onmessage = ",ut.toString()],{type:"text/javascript"}),yt=URL.createObjectURL(gt);return new Worker(yt)}return a=ut,d}function j(){c||(c=b(function(gt){function yt(){function Ct(bo,_s){var gn,Gr,ds=bo.length,Zn,Nn,Qn,bu;for(Gr=0;Gr<ds;Gr+=1)if(gn=bo[Gr],"ks"in gn&&!gn.completed){if(gn.completed=!0,gn.hasMask){var ou=gn.masksProperties;for(Nn=ou.length,Zn=0;Zn<Nn;Zn+=1)if(ou[Zn].pt.k.i)It(ou[Zn].pt.k);else for(bu=ou[Zn].pt.k.length,Qn=0;Qn<bu;Qn+=1)ou[Zn].pt.k[Qn].s&&It(ou[Zn].pt.k[Qn].s[0]),ou[Zn].pt.k[Qn].e&&It(ou[Zn].pt.k[Qn].e[0])}gn.ty===0?(gn.layers=Tt(gn.refId,_s),Ct(gn.layers,_s)):gn.ty===4?kt(gn.shapes):gn.ty===5&&hn(gn)}}function Pt(bo,_s){if(bo){var gn=0,Gr=bo.length;for(gn=0;gn<Gr;gn+=1)bo[gn].t===1&&(bo[gn].data.layers=Tt(bo[gn].data.refId,_s),Ct(bo[gn].data.layers,_s))}}function At(bo,_s){for(var gn=0,Gr=_s.length;gn<Gr;){if(_s[gn].id===bo)return _s[gn];gn+=1}return null}function Tt(bo,_s){var gn=At(bo,_s);return gn?gn.layers.__used?JSON.parse(JSON.stringify(gn.layers)):(gn.layers.__used=!0,gn.layers):null}function kt(bo){var _s,gn=bo.length,Gr,ds;for(_s=gn-1;_s>=0;_s-=1)if(bo[_s].ty==="sh")if(bo[_s].ks.k.i)It(bo[_s].ks.k);else for(ds=bo[_s].ks.k.length,Gr=0;Gr<ds;Gr+=1)bo[_s].ks.k[Gr].s&&It(bo[_s].ks.k[Gr].s[0]),bo[_s].ks.k[Gr].e&&It(bo[_s].ks.k[Gr].e[0]);else bo[_s].ty==="gr"&&kt(bo[_s].it)}function It(bo){var _s,gn=bo.i.length;for(_s=0;_s<gn;_s+=1)bo.i[_s][0]+=bo.v[_s][0],bo.i[_s][1]+=bo.v[_s][1],bo.o[_s][0]+=bo.v[_s][0],bo.o[_s][1]+=bo.v[_s][1]}function Lt(bo,_s){var gn=_s?_s.split("."):[100,100,100];return bo[0]>gn[0]?!0:gn[0]>bo[0]?!1:bo[1]>gn[1]?!0:gn[1]>bo[1]?!1:bo[2]>gn[2]?!0:gn[2]>bo[2]?!1:null}var Ft=function(){var bo=[4,4,14];function _s(Gr){var ds=Gr.t.d;Gr.t.d={k:[{s:ds,t:0}]}}function gn(Gr){var ds,Zn=Gr.length;for(ds=0;ds<Zn;ds+=1)Gr[ds].ty===5&&_s(Gr[ds])}return function(Gr){if(Lt(bo,Gr.v)&&(gn(Gr.layers),Gr.assets)){var ds,Zn=Gr.assets.length;for(ds=0;ds<Zn;ds+=1)Gr.assets[ds].layers&&gn(Gr.assets[ds].layers)}}}(),Nt=function(){var bo=[4,7,99];return function(_s){if(_s.chars&&!Lt(bo,_s.v)){var gn,Gr=_s.chars.length;for(gn=0;gn<Gr;gn+=1){var ds=_s.chars[gn];ds.data&&ds.data.shapes&&(kt(ds.data.shapes),ds.data.ip=0,ds.data.op=99999,ds.data.st=0,ds.data.sr=1,ds.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},_s.chars[gn].t||(ds.data.shapes.push({ty:"no"}),ds.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Ht=function(){var bo=[5,7,15];function _s(Gr){var ds=Gr.t.p;typeof ds.a=="number"&&(ds.a={a:0,k:ds.a}),typeof ds.p=="number"&&(ds.p={a:0,k:ds.p}),typeof ds.r=="number"&&(ds.r={a:0,k:ds.r})}function gn(Gr){var ds,Zn=Gr.length;for(ds=0;ds<Zn;ds+=1)Gr[ds].ty===5&&_s(Gr[ds])}return function(Gr){if(Lt(bo,Gr.v)&&(gn(Gr.layers),Gr.assets)){var ds,Zn=Gr.assets.length;for(ds=0;ds<Zn;ds+=1)Gr.assets[ds].layers&&gn(Gr.assets[ds].layers)}}}(),dr=function(){var bo=[4,1,9];function _s(Gr){var ds,Zn=Gr.length,Nn,Qn;for(ds=0;ds<Zn;ds+=1)if(Gr[ds].ty==="gr")_s(Gr[ds].it);else if(Gr[ds].ty==="fl"||Gr[ds].ty==="st")if(Gr[ds].c.k&&Gr[ds].c.k[0].i)for(Qn=Gr[ds].c.k.length,Nn=0;Nn<Qn;Nn+=1)Gr[ds].c.k[Nn].s&&(Gr[ds].c.k[Nn].s[0]/=255,Gr[ds].c.k[Nn].s[1]/=255,Gr[ds].c.k[Nn].s[2]/=255,Gr[ds].c.k[Nn].s[3]/=255),Gr[ds].c.k[Nn].e&&(Gr[ds].c.k[Nn].e[0]/=255,Gr[ds].c.k[Nn].e[1]/=255,Gr[ds].c.k[Nn].e[2]/=255,Gr[ds].c.k[Nn].e[3]/=255);else Gr[ds].c.k[0]/=255,Gr[ds].c.k[1]/=255,Gr[ds].c.k[2]/=255,Gr[ds].c.k[3]/=255}function gn(Gr){var ds,Zn=Gr.length;for(ds=0;ds<Zn;ds+=1)Gr[ds].ty===4&&_s(Gr[ds].shapes)}return function(Gr){if(Lt(bo,Gr.v)&&(gn(Gr.layers),Gr.assets)){var ds,Zn=Gr.assets.length;for(ds=0;ds<Zn;ds+=1)Gr.assets[ds].layers&&gn(Gr.assets[ds].layers)}}}(),hs=function(){var bo=[4,4,18];function _s(Gr){var ds,Zn=Gr.length,Nn,Qn;for(ds=Zn-1;ds>=0;ds-=1)if(Gr[ds].ty==="sh")if(Gr[ds].ks.k.i)Gr[ds].ks.k.c=Gr[ds].closed;else for(Qn=Gr[ds].ks.k.length,Nn=0;Nn<Qn;Nn+=1)Gr[ds].ks.k[Nn].s&&(Gr[ds].ks.k[Nn].s[0].c=Gr[ds].closed),Gr[ds].ks.k[Nn].e&&(Gr[ds].ks.k[Nn].e[0].c=Gr[ds].closed);else Gr[ds].ty==="gr"&&_s(Gr[ds].it)}function gn(Gr){var ds,Zn,Nn=Gr.length,Qn,bu,ou,g0;for(Zn=0;Zn<Nn;Zn+=1){if(ds=Gr[Zn],ds.hasMask){var Su=ds.masksProperties;for(bu=Su.length,Qn=0;Qn<bu;Qn+=1)if(Su[Qn].pt.k.i)Su[Qn].pt.k.c=Su[Qn].cl;else for(g0=Su[Qn].pt.k.length,ou=0;ou<g0;ou+=1)Su[Qn].pt.k[ou].s&&(Su[Qn].pt.k[ou].s[0].c=Su[Qn].cl),Su[Qn].pt.k[ou].e&&(Su[Qn].pt.k[ou].e[0].c=Su[Qn].cl)}ds.ty===4&&_s(ds.shapes)}}return function(Gr){if(Lt(bo,Gr.v)&&(gn(Gr.layers),Gr.assets)){var ds,Zn=Gr.assets.length;for(ds=0;ds<Zn;ds+=1)Gr.assets[ds].layers&&gn(Gr.assets[ds].layers)}}}();function us(bo){bo.__complete||(dr(bo),Ft(bo),Nt(bo),Ht(bo),hs(bo),Ct(bo.layers,bo.assets),Pt(bo.chars,bo.assets),bo.__complete=!0)}function hn(bo){bo.t.a.length===0&&"m"in bo.t.p}var un={};return un.completeData=us,un.checkColors=dr,un.checkChars=Nt,un.checkPathProperties=Ht,un.checkShapes=hs,un.completeLayers=Ct,un}if(g.dataManager||(g.dataManager=yt()),g.assetLoader||(g.assetLoader=function(){function Ct(At){var Tt=At.getResponseHeader("content-type");return Tt&&At.responseType==="json"&&Tt.indexOf("json")!==-1||At.response&&_typeof$5(At.response)==="object"?At.response:At.response&&typeof At.response=="string"?JSON.parse(At.response):At.responseText?JSON.parse(At.responseText):null}function Pt(At,Tt,kt,It){var Lt,Ft=new XMLHttpRequest;try{Ft.responseType="json"}catch{}Ft.onreadystatechange=function(){if(Ft.readyState===4)if(Ft.status===200)Lt=Ct(Ft),kt(Lt);else try{Lt=Ct(Ft),kt(Lt)}catch(Nt){It&&It(Nt)}};try{Ft.open(["G","E","T"].join(""),At,!0)}catch{Ft.open(["G","E","T"].join(""),Tt+"/"+At,!0)}Ft.send()}return{load:Pt}}()),gt.data.type==="loadAnimation")g.assetLoader.load(gt.data.path,gt.data.fullPath,function(Ct){g.dataManager.completeData(Ct),g.postMessage({id:gt.data.id,payload:Ct,status:"success"})},function(){g.postMessage({id:gt.data.id,status:"error"})});else if(gt.data.type==="complete"){var wt=gt.data.animation;g.dataManager.completeData(wt),g.postMessage({id:gt.data.id,payload:wt,status:"success"})}else gt.data.type==="loadData"&&g.assetLoader.load(gt.data.path,gt.data.fullPath,function(Ct){g.postMessage({id:gt.data.id,payload:Ct,status:"success"})},function(){g.postMessage({id:gt.data.id,status:"error"})})}),c.onmessage=function(ut){var gt=ut.data,yt=gt.id,wt=o[yt];o[yt]=null,gt.status==="success"?wt.onComplete(gt.payload):wt.onError&&wt.onError()})}function $(ut,gt){e+=1;var yt="processId_"+e;return o[yt]={onComplete:ut,onError:gt},yt}function _e(ut,gt,yt){j();var wt=$(gt,yt);c.postMessage({type:"loadAnimation",path:ut,fullPath:window.location.origin+window.location.pathname,id:wt})}function st(ut,gt,yt){j();var wt=$(gt,yt);c.postMessage({type:"loadData",path:ut,fullPath:window.location.origin+window.location.pathname,id:wt})}function rt(ut,gt,yt){j();var wt=$(gt,yt);c.postMessage({type:"complete",animation:ut,id:wt})}return{loadAnimation:_e,loadData:st,completeAnimation:rt}}(),ImagePreloader=function(){var e=function(){var Pt=createTag("canvas");Pt.width=1,Pt.height=1;var At=Pt.getContext("2d");return At.fillStyle="rgba(0,0,0,0)",At.fillRect(0,0,1,1),Pt}();function o(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function a(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function c(Pt,At,Tt){var kt="";if(Pt.e)kt=Pt.p;else if(At){var It=Pt.p;It.indexOf("images/")!==-1&&(It=It.split("/")[1]),kt=At+It}else kt=Tt,kt+=Pt.u?Pt.u:"",kt+=Pt.p;return kt}function d(Pt){var At=0,Tt=setInterval((function(){var kt=Pt.getBBox();(kt.width||At>500)&&(this._imageLoaded(),clearInterval(Tt)),At+=1}).bind(this),50)}function g(Pt){var At=c(Pt,this.assetsPath,this.path),Tt=createNS("image");isSafari?this.testImageLoaded(Tt):Tt.addEventListener("load",this._imageLoaded,!1),Tt.addEventListener("error",(function(){kt.img=e,this._imageLoaded()}).bind(this),!1),Tt.setAttributeNS("http://www.w3.org/1999/xlink","href",At),this._elementHelper.append?this._elementHelper.append(Tt):this._elementHelper.appendChild(Tt);var kt={img:Tt,assetData:Pt};return kt}function b(Pt){var At=c(Pt,this.assetsPath,this.path),Tt=createTag("img");Tt.crossOrigin="anonymous",Tt.addEventListener("load",this._imageLoaded,!1),Tt.addEventListener("error",(function(){kt.img=e,this._imageLoaded()}).bind(this),!1),Tt.src=At;var kt={img:Tt,assetData:Pt};return kt}function j(Pt){var At={assetData:Pt},Tt=c(Pt,this.assetsPath,this.path);return dataManager.loadData(Tt,(function(kt){At.img=kt,this._footageLoaded()}).bind(this),(function(){At.img={},this._footageLoaded()}).bind(this)),At}function $(Pt,At){this.imagesLoadedCb=At;var Tt,kt=Pt.length;for(Tt=0;Tt<kt;Tt+=1)Pt[Tt].layers||(!Pt[Tt].t||Pt[Tt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Pt[Tt]))):Pt[Tt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Pt[Tt]))))}function _e(Pt){this.path=Pt||""}function st(Pt){this.assetsPath=Pt||""}function rt(Pt){for(var At=0,Tt=this.images.length;At<Tt;){if(this.images[At].assetData===Pt)return this.images[At].img;At+=1}return null}function ut(){this.imagesLoadedCb=null,this.images.length=0}function gt(){return this.totalImages===this.loadedAssets}function yt(){return this.totalFootages===this.loadedFootagesCount}function wt(Pt,At){Pt==="svg"?(this._elementHelper=At,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ct(){this._imageLoaded=o.bind(this),this._footageLoaded=a.bind(this),this.testImageLoaded=d.bind(this),this.createFootageData=j.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ct.prototype={loadAssets:$,setAssetsPath:st,setPath:_e,loadedImages:gt,loadedFootages:yt,destroy:ut,getAsset:rt,createImgData:b,createImageData:g,imageLoaded:o,footageLoaded:a,setCacheType:wt},Ct}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(o,a){if(this._cbs[o])for(var c=this._cbs[o],d=0;d<c.length;d+=1)c[d](a)},addEventListener:function(o,a){return this._cbs[o]||(this._cbs[o]=[]),this._cbs[o].push(a),(function(){this.removeEventListener(o,a)}).bind(this)},removeEventListener:function(o,a){if(!a)this._cbs[o]=null;else if(this._cbs[o]){for(var c=0,d=this._cbs[o].length;c<d;)this._cbs[o][c]===a&&(this._cbs[o].splice(c,1),c-=1,d-=1),c+=1;this._cbs[o].length||(this._cbs[o]=null)}}};var markerParser=function(){function e(o){for(var a=o.split(`\r
`),c={},d,g=0,b=0;b<a.length;b+=1)d=a[b].split(":"),d.length===2&&(c[d[0]]=d[1].trim(),g+=1);if(g===0)throw new Error;return c}return function(o){for(var a=[],c=0;c<o.length;c+=1){var d=o[c],g={time:d.tm,duration:d.dr};try{g.payload=JSON.parse(o[c].cm)}catch{try{g.payload=e(o[c].cm)}catch{g.payload={name:o[c].cm}}}a.push(g)}return a}}(),ProjectInterface=function(){function e(o){this.compositions.push(o)}return function(){function o(a){for(var c=0,d=this.compositions.length;c<d;){if(this.compositions[c].data&&this.compositions[c].data.nm===a)return this.compositions[c].prepareFrame&&this.compositions[c].data.xt&&this.compositions[c].prepareFrame(this.currentFrame),this.compositions[c].compInterface;c+=1}return null}return o.compositions=[],o.currentFrame=0,o.registerComposition=e,o}}(),renderers={},registerRenderer=function(o,a){renderers[o]=a};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(a){return typeof a}:_typeof$4=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var o="svg";e.animType?o=e.animType:e.renderer&&(o=e.renderer);var a=getRenderer(o);this.renderer=new a(this,e.rendererSettings),this.imagePreloader.setCacheType(o,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=o,e.loop===""||e.loop===null||e.loop===void 0||e.loop===!0?this.loop=!0:e.loop===!1?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay="autoplay"in e?e.autoplay:!0,this.name=e.name?e.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(e,"autoloadSegments")?e.autoloadSegments:!0,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(e.path.lastIndexOf("\\")!==-1?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,o){o&&_typeof$4(o)!=="object"&&(o=JSON.parse(o));var a={wrapper:e,animationData:o},c=e.attributes;a.path=c.getNamedItem("data-animation-path")?c.getNamedItem("data-animation-path").value:c.getNamedItem("data-bm-path")?c.getNamedItem("data-bm-path").value:c.getNamedItem("bm-path")?c.getNamedItem("bm-path").value:"",a.animType=c.getNamedItem("data-anim-type")?c.getNamedItem("data-anim-type").value:c.getNamedItem("data-bm-type")?c.getNamedItem("data-bm-type").value:c.getNamedItem("bm-type")?c.getNamedItem("bm-type").value:c.getNamedItem("data-bm-renderer")?c.getNamedItem("data-bm-renderer").value:c.getNamedItem("bm-renderer")?c.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var d=c.getNamedItem("data-anim-loop")?c.getNamedItem("data-anim-loop").value:c.getNamedItem("data-bm-loop")?c.getNamedItem("data-bm-loop").value:c.getNamedItem("bm-loop")?c.getNamedItem("bm-loop").value:"";d==="false"?a.loop=!1:d==="true"?a.loop=!0:d!==""&&(a.loop=parseInt(d,10));var g=c.getNamedItem("data-anim-autoplay")?c.getNamedItem("data-anim-autoplay").value:c.getNamedItem("data-bm-autoplay")?c.getNamedItem("data-bm-autoplay").value:c.getNamedItem("bm-autoplay")?c.getNamedItem("bm-autoplay").value:!0;a.autoplay=g!=="false",a.name=c.getNamedItem("data-name")?c.getNamedItem("data-name").value:c.getNamedItem("data-bm-name")?c.getNamedItem("data-bm-name").value:c.getNamedItem("bm-name")?c.getNamedItem("bm-name").value:"";var b=c.getNamedItem("data-anim-prerender")?c.getNamedItem("data-anim-prerender").value:c.getNamedItem("data-bm-prerender")?c.getNamedItem("data-bm-prerender").value:c.getNamedItem("bm-prerender")?c.getNamedItem("bm-prerender").value:"";b==="false"&&(a.prerender=!1),a.path?this.setParams(a):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var o=this.animationData.layers,a,c=o.length,d=e.layers,g,b=d.length;for(g=0;g<b;g+=1)for(a=0;a<c;){if(o[a].id===d[g].id){o[a]=d[g];break}a+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(c=e.assets.length,a=0;a<c;a+=1)this.animationData.assets.push(e.assets[a]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var o=getExpressionsPlugin();o&&o.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||e.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var o=e.shift();this.timeCompleted=o.time*this.frameRate;var a=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(a,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var e=this.animationData.segments;e||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(o){this.triggerConfigError(o)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,o){var a=typeof e=="number"?e:void 0,c=typeof o=="number"?o:void 0;this.renderer.updateContainerSize(a,c)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var o,a=0;a<this.markers.length;a+=1)if(o=this.markers[a],o.payload&&o.payload.name===e)return o;return null},AnimationItem.prototype.goToAndStop=function(e,o,a){if(!(a&&this.name!==a)){var c=Number(e);if(isNaN(c)){var d=this.getMarkerData(e);d&&this.goToAndStop(d.time,!0)}else o?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,o,a){if(!(a&&this.name!==a)){var c=Number(e);if(isNaN(c)){var d=this.getMarkerData(e);d&&(d.duration?this.playSegments([d.time,d.time+d.duration],!0):this.goToAndStop(d.time,!0))}else this.goToAndStop(c,o,a);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!(this.isPaused===!0||this.isLoaded===!1)){var o=this.currentRawFrame+e*this.frameModifier,a=!1;o>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(o>this.totalFrames?o%this.totalFrames:0)||(a=!0,o=this.totalFrames-1):o>=this.totalFrames?(this.playCount+=1,this.checkSegments(o%this.totalFrames)||(this.setCurrentRawFrameValue(o%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(o):o<0?this.checkSegments(o%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+o%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(a=!0,o=0)):this.setCurrentRawFrameValue(o),a&&(this.setCurrentRawFrameValue(o),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,o){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-o)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+o)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,o){var a=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?a=e:this.currentRawFrame+this.firstFrame>o&&(a=o-e)),this.firstFrame=e,this.totalFrames=o-e,this.timeCompleted=this.totalFrames,a!==-1&&this.goToAndStop(a,!0)},AnimationItem.prototype.playSegments=function(e,o){if(o&&(this.segments.length=0),_typeof$4(e[0])==="object"){var a,c=e.length;for(a=0;a<c;a+=1)this.segments.push(e[a])}else this.segments.push(e);this.segments.length&&o&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return this.segments.length?(this.adjustSegment(this.segments.shift(),e),!0):!1},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,o){o&&this.name!==o||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var o="";if(e.e)o=e.p;else if(this.assetsPath){var a=e.p;a.indexOf("images/")!==-1&&(a=a.split("/")[1]),o=this.assetsPath+a}else o=this.path,o+=e.u?e.u:"",o+=e.p;return o},AnimationItem.prototype.getAssetData=function(e){for(var o=0,a=this.assets.length;o<a;){if(e===this.assets[o].id)return this.assets[o];o+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,o,a){try{var c=this.renderer.getElementByPath(e);c.updateDocumentData(o,a)}catch{}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}e==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),e==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),e==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),e==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),e==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var o=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",o),this.onError&&this.onError.call(this,o)},AnimationItem.prototype.triggerConfigError=function(e){var o=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",o),this.onError&&this.onError.call(this,o)};var animationManager=function(){var e={},o=[],a=0,c=0,d=0,g=!0,b=!1;function j(_s){for(var gn=0,Gr=_s.target;gn<c;)o[gn].animation===Gr&&(o.splice(gn,1),gn-=1,c-=1,Gr.isPaused||rt()),gn+=1}function $(_s,gn){if(!_s)return null;for(var Gr=0;Gr<c;){if(o[Gr].elem===_s&&o[Gr].elem!==null)return o[Gr].animation;Gr+=1}var ds=new AnimationItem;return ut(ds,_s),ds.setData(_s,gn),ds}function _e(){var _s,gn=o.length,Gr=[];for(_s=0;_s<gn;_s+=1)Gr.push(o[_s].animation);return Gr}function st(){d+=1,dr()}function rt(){d-=1}function ut(_s,gn){_s.addEventListener("destroy",j),_s.addEventListener("_active",st),_s.addEventListener("_idle",rt),o.push({elem:gn,animation:_s}),c+=1}function gt(_s){var gn=new AnimationItem;return ut(gn,null),gn.setParams(_s),gn}function yt(_s,gn){var Gr;for(Gr=0;Gr<c;Gr+=1)o[Gr].animation.setSpeed(_s,gn)}function wt(_s,gn){var Gr;for(Gr=0;Gr<c;Gr+=1)o[Gr].animation.setDirection(_s,gn)}function Ct(_s){var gn;for(gn=0;gn<c;gn+=1)o[gn].animation.play(_s)}function Pt(_s){var gn=_s-a,Gr;for(Gr=0;Gr<c;Gr+=1)o[Gr].animation.advanceTime(gn);a=_s,d&&!b?window.requestAnimationFrame(Pt):g=!0}function At(_s){a=_s,window.requestAnimationFrame(Pt)}function Tt(_s){var gn;for(gn=0;gn<c;gn+=1)o[gn].animation.pause(_s)}function kt(_s,gn,Gr){var ds;for(ds=0;ds<c;ds+=1)o[ds].animation.goToAndStop(_s,gn,Gr)}function It(_s){var gn;for(gn=0;gn<c;gn+=1)o[gn].animation.stop(_s)}function Lt(_s){var gn;for(gn=0;gn<c;gn+=1)o[gn].animation.togglePause(_s)}function Ft(_s){var gn;for(gn=c-1;gn>=0;gn-=1)o[gn].animation.destroy(_s)}function Nt(_s,gn,Gr){var ds=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Zn,Nn=ds.length;for(Zn=0;Zn<Nn;Zn+=1)Gr&&ds[Zn].setAttribute("data-bm-type",Gr),$(ds[Zn],_s);if(gn&&Nn===0){Gr||(Gr="svg");var Qn=document.getElementsByTagName("body")[0];Qn.innerText="";var bu=createTag("div");bu.style.width="100%",bu.style.height="100%",bu.setAttribute("data-bm-type",Gr),Qn.appendChild(bu),$(bu,_s)}}function Ht(){var _s;for(_s=0;_s<c;_s+=1)o[_s].animation.resize()}function dr(){!b&&d&&g&&(window.requestAnimationFrame(At),g=!1)}function hs(){b=!0}function us(){b=!1,dr()}function hn(_s,gn){var Gr;for(Gr=0;Gr<c;Gr+=1)o[Gr].animation.setVolume(_s,gn)}function un(_s){var gn;for(gn=0;gn<c;gn+=1)o[gn].animation.mute(_s)}function bo(_s){var gn;for(gn=0;gn<c;gn+=1)o[gn].animation.unmute(_s)}return e.registerAnimation=$,e.loadAnimation=gt,e.setSpeed=yt,e.setDirection=wt,e.play=Ct,e.pause=Tt,e.stop=It,e.togglePause=Lt,e.searchAnimations=Nt,e.resize=Ht,e.goToAndStop=kt,e.destroy=Ft,e.freeze=hs,e.unfreeze=us,e.setVolume=hn,e.mute=un,e.unmute=bo,e.getRegisteredAnimations=_e,e}(),BezierFactory=function(){var e={};e.getBezierEasing=a;var o={};function a(At,Tt,kt,It,Lt){var Ft=Lt||("bez_"+At+"_"+Tt+"_"+kt+"_"+It).replace(/\./g,"p");if(o[Ft])return o[Ft];var Nt=new Pt([At,Tt,kt,It]);return o[Ft]=Nt,Nt}var c=4,d=.001,g=1e-7,b=10,j=11,$=1/(j-1),_e=typeof Float32Array=="function";function st(At,Tt){return 1-3*Tt+3*At}function rt(At,Tt){return 3*Tt-6*At}function ut(At){return 3*At}function gt(At,Tt,kt){return((st(Tt,kt)*At+rt(Tt,kt))*At+ut(Tt))*At}function yt(At,Tt,kt){return 3*st(Tt,kt)*At*At+2*rt(Tt,kt)*At+ut(Tt)}function wt(At,Tt,kt,It,Lt){var Ft,Nt,Ht=0;do Nt=Tt+(kt-Tt)/2,Ft=gt(Nt,It,Lt)-At,Ft>0?kt=Nt:Tt=Nt;while(Math.abs(Ft)>g&&++Ht<b);return Nt}function Ct(At,Tt,kt,It){for(var Lt=0;Lt<c;++Lt){var Ft=yt(Tt,kt,It);if(Ft===0)return Tt;var Nt=gt(Tt,kt,It)-At;Tt-=Nt/Ft}return Tt}function Pt(At){this._p=At,this._mSampleValues=_e?new Float32Array(j):new Array(j),this._precomputed=!1,this.get=this.get.bind(this)}return Pt.prototype={get:function(Tt){var kt=this._p[0],It=this._p[1],Lt=this._p[2],Ft=this._p[3];return this._precomputed||this._precompute(),kt===It&&Lt===Ft?Tt:Tt===0?0:Tt===1?1:gt(this._getTForX(Tt),It,Ft)},_precompute:function(){var Tt=this._p[0],kt=this._p[1],It=this._p[2],Lt=this._p[3];this._precomputed=!0,(Tt!==kt||It!==Lt)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Tt=this._p[0],kt=this._p[2],It=0;It<j;++It)this._mSampleValues[It]=gt(It*$,Tt,kt)},_getTForX:function(Tt){for(var kt=this._p[0],It=this._p[2],Lt=this._mSampleValues,Ft=0,Nt=1,Ht=j-1;Nt!==Ht&&Lt[Nt]<=Tt;++Nt)Ft+=$;--Nt;var dr=(Tt-Lt[Nt])/(Lt[Nt+1]-Lt[Nt]),hs=Ft+dr*$,us=yt(hs,kt,It);return us>=d?Ct(Tt,hs,kt,It):us===0?hs:wt(Tt,Ft,Ft+$,kt,It)}},e}(),pooling=function(){function e(o){return o.concat(createSizedArray(o.length))}return{double:e}}(),poolFactory=function(){return function(e,o,a){var c=0,d=e,g=createSizedArray(d),b={newElement:j,release:$};function j(){var _e;return c?(c-=1,_e=g[c]):_e=o(),_e}function $(_e){c===d&&(g=pooling.double(g),d*=2),a&&a(_e),g[c]=_e,c+=1}return b}}(),bezierLengthPool=function(){function e(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,e)}(),segmentsLengthPool=function(){function e(){return{lengths:[],totalLength:0}}function o(a){var c,d=a.lengths.length;for(c=0;c<d;c+=1)bezierLengthPool.release(a.lengths[c]);a.lengths.length=0}return poolFactory(8,e,o)}();function bezFunction(){var e=Math;function o(ut,gt,yt,wt,Ct,Pt){var At=ut*wt+gt*Ct+yt*Pt-Ct*wt-Pt*ut-yt*gt;return At>-.001&&At<.001}function a(ut,gt,yt,wt,Ct,Pt,At,Tt,kt){if(yt===0&&Pt===0&&kt===0)return o(ut,gt,wt,Ct,At,Tt);var It=e.sqrt(e.pow(wt-ut,2)+e.pow(Ct-gt,2)+e.pow(Pt-yt,2)),Lt=e.sqrt(e.pow(At-ut,2)+e.pow(Tt-gt,2)+e.pow(kt-yt,2)),Ft=e.sqrt(e.pow(At-wt,2)+e.pow(Tt-Ct,2)+e.pow(kt-Pt,2)),Nt;return It>Lt?It>Ft?Nt=It-Lt-Ft:Nt=Ft-Lt-It:Ft>Lt?Nt=Ft-Lt-It:Nt=Lt-It-Ft,Nt>-1e-4&&Nt<1e-4}var c=function(){return function(ut,gt,yt,wt){var Ct=getDefaultCurveSegments(),Pt,At,Tt,kt,It,Lt=0,Ft,Nt=[],Ht=[],dr=bezierLengthPool.newElement();for(Tt=yt.length,Pt=0;Pt<Ct;Pt+=1){for(It=Pt/(Ct-1),Ft=0,At=0;At<Tt;At+=1)kt=bmPow(1-It,3)*ut[At]+3*bmPow(1-It,2)*It*yt[At]+3*(1-It)*bmPow(It,2)*wt[At]+bmPow(It,3)*gt[At],Nt[At]=kt,Ht[At]!==null&&(Ft+=bmPow(Nt[At]-Ht[At],2)),Ht[At]=Nt[At];Ft&&(Ft=bmSqrt(Ft),Lt+=Ft),dr.percents[Pt]=It,dr.lengths[Pt]=Lt}return dr.addedLength=Lt,dr}}();function d(ut){var gt=segmentsLengthPool.newElement(),yt=ut.c,wt=ut.v,Ct=ut.o,Pt=ut.i,At,Tt=ut._length,kt=gt.lengths,It=0;for(At=0;At<Tt-1;At+=1)kt[At]=c(wt[At],wt[At+1],Ct[At],Pt[At+1]),It+=kt[At].addedLength;return yt&&Tt&&(kt[At]=c(wt[At],wt[0],Ct[At],Pt[0]),It+=kt[At].addedLength),gt.totalLength=It,gt}function g(ut){this.segmentLength=0,this.points=new Array(ut)}function b(ut,gt){this.partialLength=ut,this.point=gt}var j=function(){var ut={};return function(gt,yt,wt,Ct){var Pt=(gt[0]+"_"+gt[1]+"_"+yt[0]+"_"+yt[1]+"_"+wt[0]+"_"+wt[1]+"_"+Ct[0]+"_"+Ct[1]).replace(/\./g,"p");if(!ut[Pt]){var At=getDefaultCurveSegments(),Tt,kt,It,Lt,Ft,Nt=0,Ht,dr,hs=null;gt.length===2&&(gt[0]!==yt[0]||gt[1]!==yt[1])&&o(gt[0],gt[1],yt[0],yt[1],gt[0]+wt[0],gt[1]+wt[1])&&o(gt[0],gt[1],yt[0],yt[1],yt[0]+Ct[0],yt[1]+Ct[1])&&(At=2);var us=new g(At);for(It=wt.length,Tt=0;Tt<At;Tt+=1){for(dr=createSizedArray(It),Ft=Tt/(At-1),Ht=0,kt=0;kt<It;kt+=1)Lt=bmPow(1-Ft,3)*gt[kt]+3*bmPow(1-Ft,2)*Ft*(gt[kt]+wt[kt])+3*(1-Ft)*bmPow(Ft,2)*(yt[kt]+Ct[kt])+bmPow(Ft,3)*yt[kt],dr[kt]=Lt,hs!==null&&(Ht+=bmPow(dr[kt]-hs[kt],2));Ht=bmSqrt(Ht),Nt+=Ht,us.points[Tt]=new b(Ht,dr),hs=dr}us.segmentLength=Nt,ut[Pt]=us}return ut[Pt]}}();function $(ut,gt){var yt=gt.percents,wt=gt.lengths,Ct=yt.length,Pt=bmFloor((Ct-1)*ut),At=ut*gt.addedLength,Tt=0;if(Pt===Ct-1||Pt===0||At===wt[Pt])return yt[Pt];for(var kt=wt[Pt]>At?-1:1,It=!0;It;)if(wt[Pt]<=At&&wt[Pt+1]>At?(Tt=(At-wt[Pt])/(wt[Pt+1]-wt[Pt]),It=!1):Pt+=kt,Pt<0||Pt>=Ct-1){if(Pt===Ct-1)return yt[Pt];It=!1}return yt[Pt]+(yt[Pt+1]-yt[Pt])*Tt}function _e(ut,gt,yt,wt,Ct,Pt){var At=$(Ct,Pt),Tt=1-At,kt=e.round((Tt*Tt*Tt*ut[0]+(At*Tt*Tt+Tt*At*Tt+Tt*Tt*At)*yt[0]+(At*At*Tt+Tt*At*At+At*Tt*At)*wt[0]+At*At*At*gt[0])*1e3)/1e3,It=e.round((Tt*Tt*Tt*ut[1]+(At*Tt*Tt+Tt*At*Tt+Tt*Tt*At)*yt[1]+(At*At*Tt+Tt*At*At+At*Tt*At)*wt[1]+At*At*At*gt[1])*1e3)/1e3;return[kt,It]}var st=createTypedArray("float32",8);function rt(ut,gt,yt,wt,Ct,Pt,At){Ct<0?Ct=0:Ct>1&&(Ct=1);var Tt=$(Ct,At);Pt=Pt>1?1:Pt;var kt=$(Pt,At),It,Lt=ut.length,Ft=1-Tt,Nt=1-kt,Ht=Ft*Ft*Ft,dr=Tt*Ft*Ft*3,hs=Tt*Tt*Ft*3,us=Tt*Tt*Tt,hn=Ft*Ft*Nt,un=Tt*Ft*Nt+Ft*Tt*Nt+Ft*Ft*kt,bo=Tt*Tt*Nt+Ft*Tt*kt+Tt*Ft*kt,_s=Tt*Tt*kt,gn=Ft*Nt*Nt,Gr=Tt*Nt*Nt+Ft*kt*Nt+Ft*Nt*kt,ds=Tt*kt*Nt+Ft*kt*kt+Tt*Nt*kt,Zn=Tt*kt*kt,Nn=Nt*Nt*Nt,Qn=kt*Nt*Nt+Nt*kt*Nt+Nt*Nt*kt,bu=kt*kt*Nt+Nt*kt*kt+kt*Nt*kt,ou=kt*kt*kt;for(It=0;It<Lt;It+=1)st[It*4]=e.round((Ht*ut[It]+dr*yt[It]+hs*wt[It]+us*gt[It])*1e3)/1e3,st[It*4+1]=e.round((hn*ut[It]+un*yt[It]+bo*wt[It]+_s*gt[It])*1e3)/1e3,st[It*4+2]=e.round((gn*ut[It]+Gr*yt[It]+ds*wt[It]+Zn*gt[It])*1e3)/1e3,st[It*4+3]=e.round((Nn*ut[It]+Qn*yt[It]+bu*wt[It]+ou*gt[It])*1e3)/1e3;return st}return{getSegmentsLength:d,getNewSegment:rt,getPointInSegment:_e,buildBezierData:j,pointOnLine2D:o,pointOnLine3D:a}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,o){var a=this.offsetTime,c;this.propType==="multidimensional"&&(c=createTypedArray("float32",this.pv.length));for(var d=o.lastIndex,g=d,b=this.keyframes.length-1,j=!0,$,_e,st;j;){if($=this.keyframes[g],_e=this.keyframes[g+1],g===b-1&&e>=_e.t-a){$.h&&($=_e),d=0;break}if(_e.t-a>e){d=g;break}g<b-1?g+=1:(d=0,j=!1)}st=this.keyframesMetadata[g]||{};var rt,ut,gt,yt,wt,Ct,Pt=_e.t-a,At=$.t-a,Tt;if($.to){st.bezierData||(st.bezierData=bez.buildBezierData($.s,_e.s||$.e,$.to,$.ti));var kt=st.bezierData;if(e>=Pt||e<At){var It=e>=Pt?kt.points.length-1:0;for(ut=kt.points[It].point.length,rt=0;rt<ut;rt+=1)c[rt]=kt.points[It].point[rt]}else{st.__fnct?Ct=st.__fnct:(Ct=BezierFactory.getBezierEasing($.o.x,$.o.y,$.i.x,$.i.y,$.n).get,st.__fnct=Ct),gt=Ct((e-At)/(Pt-At));var Lt=kt.segmentLength*gt,Ft,Nt=o.lastFrame<e&&o._lastKeyframeIndex===g?o._lastAddedLength:0;for(wt=o.lastFrame<e&&o._lastKeyframeIndex===g?o._lastPoint:0,j=!0,yt=kt.points.length;j;){if(Nt+=kt.points[wt].partialLength,Lt===0||gt===0||wt===kt.points.length-1){for(ut=kt.points[wt].point.length,rt=0;rt<ut;rt+=1)c[rt]=kt.points[wt].point[rt];break}else if(Lt>=Nt&&Lt<Nt+kt.points[wt+1].partialLength){for(Ft=(Lt-Nt)/kt.points[wt+1].partialLength,ut=kt.points[wt].point.length,rt=0;rt<ut;rt+=1)c[rt]=kt.points[wt].point[rt]+(kt.points[wt+1].point[rt]-kt.points[wt].point[rt])*Ft;break}wt<yt-1?wt+=1:j=!1}o._lastPoint=wt,o._lastAddedLength=Nt-kt.points[wt].partialLength,o._lastKeyframeIndex=g}}else{var Ht,dr,hs,us,hn;if(b=$.s.length,Tt=_e.s||$.e,this.sh&&$.h!==1)if(e>=Pt)c[0]=Tt[0],c[1]=Tt[1],c[2]=Tt[2];else if(e<=At)c[0]=$.s[0],c[1]=$.s[1],c[2]=$.s[2];else{var un=createQuaternion($.s),bo=createQuaternion(Tt),_s=(e-At)/(Pt-At);quaternionToEuler(c,slerp(un,bo,_s))}else for(g=0;g<b;g+=1)$.h!==1&&(e>=Pt?gt=1:e<At?gt=0:($.o.x.constructor===Array?(st.__fnct||(st.__fnct=[]),st.__fnct[g]?Ct=st.__fnct[g]:(Ht=$.o.x[g]===void 0?$.o.x[0]:$.o.x[g],dr=$.o.y[g]===void 0?$.o.y[0]:$.o.y[g],hs=$.i.x[g]===void 0?$.i.x[0]:$.i.x[g],us=$.i.y[g]===void 0?$.i.y[0]:$.i.y[g],Ct=BezierFactory.getBezierEasing(Ht,dr,hs,us).get,st.__fnct[g]=Ct)):st.__fnct?Ct=st.__fnct:(Ht=$.o.x,dr=$.o.y,hs=$.i.x,us=$.i.y,Ct=BezierFactory.getBezierEasing(Ht,dr,hs,us).get,$.keyframeMetadata=Ct),gt=Ct((e-At)/(Pt-At)))),Tt=_e.s||$.e,hn=$.h===1?$.s[g]:$.s[g]+(Tt[g]-$.s[g])*gt,this.propType==="multidimensional"?c[g]=hn:c=hn}return o.lastIndex=d,c}function slerp(e,o,a){var c=[],d=e[0],g=e[1],b=e[2],j=e[3],$=o[0],_e=o[1],st=o[2],rt=o[3],ut,gt,yt,wt,Ct;return gt=d*$+g*_e+b*st+j*rt,gt<0&&(gt=-gt,$=-$,_e=-_e,st=-st,rt=-rt),1-gt>1e-6?(ut=Math.acos(gt),yt=Math.sin(ut),wt=Math.sin((1-a)*ut)/yt,Ct=Math.sin(a*ut)/yt):(wt=1-a,Ct=a),c[0]=wt*d+Ct*$,c[1]=wt*g+Ct*_e,c[2]=wt*b+Ct*st,c[3]=wt*j+Ct*rt,c}function quaternionToEuler(e,o){var a=o[0],c=o[1],d=o[2],g=o[3],b=Math.atan2(2*c*g-2*a*d,1-2*c*c-2*d*d),j=Math.asin(2*a*c+2*d*g),$=Math.atan2(2*a*g-2*c*d,1-2*a*a-2*d*d);e[0]=b/degToRads,e[1]=j/degToRads,e[2]=$/degToRads}function createQuaternion(e){var o=e[0]*degToRads,a=e[1]*degToRads,c=e[2]*degToRads,d=Math.cos(o/2),g=Math.cos(a/2),b=Math.cos(c/2),j=Math.sin(o/2),$=Math.sin(a/2),_e=Math.sin(c/2),st=d*g*b-j*$*_e,rt=j*$*b+d*g*_e,ut=j*g*b+d*$*_e,gt=d*$*b-j*g*_e;return[rt,ut,gt,st]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,o=this.keyframes[0].t-this.offsetTime,a=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=a&&e>=a||this._caching.lastFrame<o&&e<o))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var c=this.interpolateValue(e,this._caching);this.pv=c}return this._caching.lastFrame=e,this.pv}function setVValue(e){var o;if(this.propType==="unidimensional")o=e*this.mult,mathAbs(this.v-o)>1e-5&&(this.v=o,this._mdf=!0);else for(var a=0,c=this.v.length;a<c;)o=e[a]*this.mult,mathAbs(this.v[a]-o)>1e-5&&(this.v[a]=o,this._mdf=!0),a+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var e,o=this.effectsSequence.length,a=this.kf?this.pv:this.data.k;for(e=0;e<o;e+=1)a=this.effectsSequence[e](a);this.setVValue(a),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,o,a,c){this.propType="unidimensional",this.mult=a||1,this.data=o,this.v=a?o.k*a:o.k,this.pv=o.k,this._mdf=!1,this.elem=e,this.container=c,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,o,a,c){this.propType="multidimensional",this.mult=a||1,this.data=o,this._mdf=!1,this.elem=e,this.container=c,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var d,g=o.k.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),this.vel=createTypedArray("float32",g),d=0;d<g;d+=1)this.v[d]=o.k[d]*this.mult,this.pv[d]=o.k[d];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,o,a,c){this.propType="unidimensional",this.keyframes=o.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=o,this.mult=a||1,this.elem=e,this.container=c,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,o,a,c){this.propType="multidimensional";var d,g=o.k.length,b,j,$,_e;for(d=0;d<g-1;d+=1)o.k[d].to&&o.k[d].s&&o.k[d+1]&&o.k[d+1].s&&(b=o.k[d].s,j=o.k[d+1].s,$=o.k[d].to,_e=o.k[d].ti,(b.length===2&&!(b[0]===j[0]&&b[1]===j[1])&&bez.pointOnLine2D(b[0],b[1],j[0],j[1],b[0]+$[0],b[1]+$[1])&&bez.pointOnLine2D(b[0],b[1],j[0],j[1],j[0]+_e[0],j[1]+_e[1])||b.length===3&&!(b[0]===j[0]&&b[1]===j[1]&&b[2]===j[2])&&bez.pointOnLine3D(b[0],b[1],b[2],j[0],j[1],j[2],b[0]+$[0],b[1]+$[1],b[2]+$[2])&&bez.pointOnLine3D(b[0],b[1],b[2],j[0],j[1],j[2],j[0]+_e[0],j[1]+_e[1],j[2]+_e[2]))&&(o.k[d].to=null,o.k[d].ti=null),b[0]===j[0]&&b[1]===j[1]&&$[0]===0&&$[1]===0&&_e[0]===0&&_e[1]===0&&(b.length===2||b[2]===j[2]&&$[2]===0&&_e[2]===0)&&(o.k[d].to=null,o.k[d].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=o,this.keyframes=o.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=a||1,this.elem=e,this.container=c,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var st=o.k[0].s.length;for(this.v=createTypedArray("float32",st),this.pv=createTypedArray("float32",st),d=0;d<st;d+=1)this.v[d]=initFrame,this.pv[d]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",st)},this.addEffect=addEffect}var PropertyFactory=function(){function e(a,c,d,g,b){c.sid&&(c=a.globalData.slotManager.getProp(c));var j;if(!c.k.length)j=new ValueProperty(a,c,g,b);else if(typeof c.k[0]=="number")j=new MultiDimensionalProperty(a,c,g,b);else switch(d){case 0:j=new KeyframedValueProperty(a,c,g,b);break;case 1:j=new KeyframedMultidimensionalProperty(a,c,g,b);break}return j.effectsSequence.length&&b.addDynamicProperty(j),j}var o={getProp:e};return o}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(o){this.dynamicProperties.indexOf(o)===-1&&(this.dynamicProperties.push(o),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var o,a=this.dynamicProperties.length;for(o=0;o<a;o+=1)this.dynamicProperties[o].getValue(),this.dynamicProperties[o]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(o){this.container=o,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function e(){return createTypedArray("float32",2)}return poolFactory(8,e)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,o){this.c=e,this.setLength(o);for(var a=0;a<o;)this.v[a]=pointPool.newElement(),this.o[a]=pointPool.newElement(),this.i[a]=pointPool.newElement(),a+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,o,a,c,d){var g;switch(this._length=Math.max(this._length,c+1),this._length>=this._maxLength&&this.doubleArrayLength(),a){case"v":g=this.v;break;case"i":g=this.i;break;case"o":g=this.o;break;default:g=[];break}(!g[c]||g[c]&&!d)&&(g[c]=pointPool.newElement()),g[c][0]=e,g[c][1]=o},ShapePath.prototype.setTripleAt=function(e,o,a,c,d,g,b,j){this.setXYAt(e,o,"v",b,j),this.setXYAt(a,c,"o",b,j),this.setXYAt(d,g,"i",b,j)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var o=this.v,a=this.o,c=this.i,d=0;this.c&&(e.setTripleAt(o[0][0],o[0][1],c[0][0],c[0][1],a[0][0],a[0][1],0,!1),d=1);var g=this._length-1,b=this._length,j;for(j=d;j<b;j+=1)e.setTripleAt(o[g][0],o[g][1],c[g][0],c[g][1],a[g][0],a[g][1],j,!1),g-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function e(){return new ShapePath}function o(d){var g=d._length,b;for(b=0;b<g;b+=1)pointPool.release(d.v[b]),pointPool.release(d.i[b]),pointPool.release(d.o[b]),d.v[b]=null,d.i[b]=null,d.o[b]=null;d._length=0,d.c=!1}function a(d){var g=c.newElement(),b,j=d._length===void 0?d.v.length:d._length;for(g.setLength(j),g.c=d.c,b=0;b<j;b+=1)g.setTripleAt(d.v[b][0],d.v[b][1],d.o[b][0],d.o[b][1],d.i[b][0],d.i[b][1],b);return g}var c=poolFactory(4,e,o);return c.clone=a,c}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:d,release:g},o=0,a=4,c=createSizedArray(a);function d(){var b;return o?(o-=1,b=c[o]):b=new ShapeCollection,b}function g(b){var j,$=b._length;for(j=0;j<$;j+=1)shapePool.release(b.shapes[j]);b._length=0,o===a&&(c=pooling.double(c),a*=2),c[o]=b,o+=1}return e}(),ShapePropertyFactory=function(){var e=-999999;function o(Pt,At,Tt){var kt=Tt.lastIndex,It,Lt,Ft,Nt,Ht,dr,hs,us,hn,un=this.keyframes;if(Pt<un[0].t-this.offsetTime)It=un[0].s[0],Ft=!0,kt=0;else if(Pt>=un[un.length-1].t-this.offsetTime)It=un[un.length-1].s?un[un.length-1].s[0]:un[un.length-2].e[0],Ft=!0;else{for(var bo=kt,_s=un.length-1,gn=!0,Gr,ds,Zn;gn&&(Gr=un[bo],ds=un[bo+1],!(ds.t-this.offsetTime>Pt));)bo<_s-1?bo+=1:gn=!1;if(Zn=this.keyframesMetadata[bo]||{},Ft=Gr.h===1,kt=bo,!Ft){if(Pt>=ds.t-this.offsetTime)us=1;else if(Pt<Gr.t-this.offsetTime)us=0;else{var Nn;Zn.__fnct?Nn=Zn.__fnct:(Nn=BezierFactory.getBezierEasing(Gr.o.x,Gr.o.y,Gr.i.x,Gr.i.y).get,Zn.__fnct=Nn),us=Nn((Pt-(Gr.t-this.offsetTime))/(ds.t-this.offsetTime-(Gr.t-this.offsetTime)))}Lt=ds.s?ds.s[0]:Gr.e[0]}It=Gr.s[0]}for(dr=At._length,hs=It.i[0].length,Tt.lastIndex=kt,Nt=0;Nt<dr;Nt+=1)for(Ht=0;Ht<hs;Ht+=1)hn=Ft?It.i[Nt][Ht]:It.i[Nt][Ht]+(Lt.i[Nt][Ht]-It.i[Nt][Ht])*us,At.i[Nt][Ht]=hn,hn=Ft?It.o[Nt][Ht]:It.o[Nt][Ht]+(Lt.o[Nt][Ht]-It.o[Nt][Ht])*us,At.o[Nt][Ht]=hn,hn=Ft?It.v[Nt][Ht]:It.v[Nt][Ht]+(Lt.v[Nt][Ht]-It.v[Nt][Ht])*us,At.v[Nt][Ht]=hn}function a(){var Pt=this.comp.renderedFrame-this.offsetTime,At=this.keyframes[0].t-this.offsetTime,Tt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,kt=this._caching.lastFrame;return kt!==e&&(kt<At&&Pt<At||kt>Tt&&Pt>Tt)||(this._caching.lastIndex=kt<Pt?this._caching.lastIndex:0,this.interpolateShape(Pt,this.pv,this._caching)),this._caching.lastFrame=Pt,this.pv}function c(){this.paths=this.localShapeCollection}function d(Pt,At){if(Pt._length!==At._length||Pt.c!==At.c)return!1;var Tt,kt=Pt._length;for(Tt=0;Tt<kt;Tt+=1)if(Pt.v[Tt][0]!==At.v[Tt][0]||Pt.v[Tt][1]!==At.v[Tt][1]||Pt.o[Tt][0]!==At.o[Tt][0]||Pt.o[Tt][1]!==At.o[Tt][1]||Pt.i[Tt][0]!==At.i[Tt][0]||Pt.i[Tt][1]!==At.i[Tt][1])return!1;return!0}function g(Pt){d(this.v,Pt)||(this.v=shapePool.clone(Pt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function b(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Pt;this.kf?Pt=this.pv:this.data.ks?Pt=this.data.ks.k:Pt=this.data.pt.k;var At,Tt=this.effectsSequence.length;for(At=0;At<Tt;At+=1)Pt=this.effectsSequence[At](Pt);this.setVValue(Pt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function j(Pt,At,Tt){this.propType="shape",this.comp=Pt.comp,this.container=Pt,this.elem=Pt,this.data=At,this.k=!1,this.kf=!1,this._mdf=!1;var kt=Tt===3?At.pt.k:At.ks.k;this.v=shapePool.clone(kt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=c,this.effectsSequence=[]}function $(Pt){this.effectsSequence.push(Pt),this.container.addDynamicProperty(this)}j.prototype.interpolateShape=o,j.prototype.getValue=b,j.prototype.setVValue=g,j.prototype.addEffect=$;function _e(Pt,At,Tt){this.propType="shape",this.comp=Pt.comp,this.elem=Pt,this.container=Pt,this.offsetTime=Pt.data.st,this.keyframes=Tt===3?At.pt.k:At.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var kt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,kt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=c,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[a.bind(this)]}_e.prototype.getValue=b,_e.prototype.interpolateShape=o,_e.prototype.setVValue=g,_e.prototype.addEffect=$;var st=function(){var Pt=roundCorner;function At(Tt,kt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=kt.d,this.elem=Tt,this.comp=Tt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Tt),this.p=PropertyFactory.getProp(Tt,kt.p,1,0,this),this.s=PropertyFactory.getProp(Tt,kt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return At.prototype={reset:c,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var kt=this.p.v[0],It=this.p.v[1],Lt=this.s.v[0]/2,Ft=this.s.v[1]/2,Nt=this.d!==3,Ht=this.v;Ht.v[0][0]=kt,Ht.v[0][1]=It-Ft,Ht.v[1][0]=Nt?kt+Lt:kt-Lt,Ht.v[1][1]=It,Ht.v[2][0]=kt,Ht.v[2][1]=It+Ft,Ht.v[3][0]=Nt?kt-Lt:kt+Lt,Ht.v[3][1]=It,Ht.i[0][0]=Nt?kt-Lt*Pt:kt+Lt*Pt,Ht.i[0][1]=It-Ft,Ht.i[1][0]=Nt?kt+Lt:kt-Lt,Ht.i[1][1]=It-Ft*Pt,Ht.i[2][0]=Nt?kt+Lt*Pt:kt-Lt*Pt,Ht.i[2][1]=It+Ft,Ht.i[3][0]=Nt?kt-Lt:kt+Lt,Ht.i[3][1]=It+Ft*Pt,Ht.o[0][0]=Nt?kt+Lt*Pt:kt-Lt*Pt,Ht.o[0][1]=It-Ft,Ht.o[1][0]=Nt?kt+Lt:kt-Lt,Ht.o[1][1]=It+Ft*Pt,Ht.o[2][0]=Nt?kt-Lt*Pt:kt+Lt*Pt,Ht.o[2][1]=It+Ft,Ht.o[3][0]=Nt?kt-Lt:kt+Lt,Ht.o[3][1]=It-Ft*Pt}},extendPrototype([DynamicPropertyContainer],At),At}(),rt=function(){function Pt(At,Tt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=At,this.comp=At.comp,this.data=Tt,this.frameId=-1,this.d=Tt.d,this.initDynamicPropertyContainer(At),Tt.sy===1?(this.ir=PropertyFactory.getProp(At,Tt.ir,0,0,this),this.is=PropertyFactory.getProp(At,Tt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(At,Tt.pt,0,0,this),this.p=PropertyFactory.getProp(At,Tt.p,1,0,this),this.r=PropertyFactory.getProp(At,Tt.r,0,degToRads,this),this.or=PropertyFactory.getProp(At,Tt.or,0,0,this),this.os=PropertyFactory.getProp(At,Tt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Pt.prototype={reset:c,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Tt=Math.floor(this.pt.v)*2,kt=Math.PI*2/Tt,It=!0,Lt=this.or.v,Ft=this.ir.v,Nt=this.os.v,Ht=this.is.v,dr=2*Math.PI*Lt/(Tt*2),hs=2*Math.PI*Ft/(Tt*2),us,hn,un,bo,_s=-Math.PI/2;_s+=this.r.v;var gn=this.data.d===3?-1:1;for(this.v._length=0,us=0;us<Tt;us+=1){hn=It?Lt:Ft,un=It?Nt:Ht,bo=It?dr:hs;var Gr=hn*Math.cos(_s),ds=hn*Math.sin(_s),Zn=Gr===0&&ds===0?0:ds/Math.sqrt(Gr*Gr+ds*ds),Nn=Gr===0&&ds===0?0:-Gr/Math.sqrt(Gr*Gr+ds*ds);Gr+=+this.p.v[0],ds+=+this.p.v[1],this.v.setTripleAt(Gr,ds,Gr-Zn*bo*un*gn,ds-Nn*bo*un*gn,Gr+Zn*bo*un*gn,ds+Nn*bo*un*gn,us,!0),It=!It,_s+=kt*gn}},convertPolygonToPath:function(){var Tt=Math.floor(this.pt.v),kt=Math.PI*2/Tt,It=this.or.v,Lt=this.os.v,Ft=2*Math.PI*It/(Tt*4),Nt,Ht=-Math.PI*.5,dr=this.data.d===3?-1:1;for(Ht+=this.r.v,this.v._length=0,Nt=0;Nt<Tt;Nt+=1){var hs=It*Math.cos(Ht),us=It*Math.sin(Ht),hn=hs===0&&us===0?0:us/Math.sqrt(hs*hs+us*us),un=hs===0&&us===0?0:-hs/Math.sqrt(hs*hs+us*us);hs+=+this.p.v[0],us+=+this.p.v[1],this.v.setTripleAt(hs,us,hs-hn*Ft*Lt*dr,us-un*Ft*Lt*dr,hs+hn*Ft*Lt*dr,us+un*Ft*Lt*dr,Nt,!0),Ht+=kt*dr}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Pt),Pt}(),ut=function(){function Pt(At,Tt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=At,this.comp=At.comp,this.frameId=-1,this.d=Tt.d,this.initDynamicPropertyContainer(At),this.p=PropertyFactory.getProp(At,Tt.p,1,0,this),this.s=PropertyFactory.getProp(At,Tt.s,1,0,this),this.r=PropertyFactory.getProp(At,Tt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Pt.prototype={convertRectToPath:function(){var Tt=this.p.v[0],kt=this.p.v[1],It=this.s.v[0]/2,Lt=this.s.v[1]/2,Ft=bmMin(It,Lt,this.r.v),Nt=Ft*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Tt+It,kt-Lt+Ft,Tt+It,kt-Lt+Ft,Tt+It,kt-Lt+Nt,0,!0),this.v.setTripleAt(Tt+It,kt+Lt-Ft,Tt+It,kt+Lt-Nt,Tt+It,kt+Lt-Ft,1,!0),Ft!==0?(this.v.setTripleAt(Tt+It-Ft,kt+Lt,Tt+It-Ft,kt+Lt,Tt+It-Nt,kt+Lt,2,!0),this.v.setTripleAt(Tt-It+Ft,kt+Lt,Tt-It+Nt,kt+Lt,Tt-It+Ft,kt+Lt,3,!0),this.v.setTripleAt(Tt-It,kt+Lt-Ft,Tt-It,kt+Lt-Ft,Tt-It,kt+Lt-Nt,4,!0),this.v.setTripleAt(Tt-It,kt-Lt+Ft,Tt-It,kt-Lt+Nt,Tt-It,kt-Lt+Ft,5,!0),this.v.setTripleAt(Tt-It+Ft,kt-Lt,Tt-It+Ft,kt-Lt,Tt-It+Nt,kt-Lt,6,!0),this.v.setTripleAt(Tt+It-Ft,kt-Lt,Tt+It-Nt,kt-Lt,Tt+It-Ft,kt-Lt,7,!0)):(this.v.setTripleAt(Tt-It,kt+Lt,Tt-It+Nt,kt+Lt,Tt-It,kt+Lt,2),this.v.setTripleAt(Tt-It,kt-Lt,Tt-It,kt-Lt+Nt,Tt-It,kt-Lt,3))):(this.v.setTripleAt(Tt+It,kt-Lt+Ft,Tt+It,kt-Lt+Nt,Tt+It,kt-Lt+Ft,0,!0),Ft!==0?(this.v.setTripleAt(Tt+It-Ft,kt-Lt,Tt+It-Ft,kt-Lt,Tt+It-Nt,kt-Lt,1,!0),this.v.setTripleAt(Tt-It+Ft,kt-Lt,Tt-It+Nt,kt-Lt,Tt-It+Ft,kt-Lt,2,!0),this.v.setTripleAt(Tt-It,kt-Lt+Ft,Tt-It,kt-Lt+Ft,Tt-It,kt-Lt+Nt,3,!0),this.v.setTripleAt(Tt-It,kt+Lt-Ft,Tt-It,kt+Lt-Nt,Tt-It,kt+Lt-Ft,4,!0),this.v.setTripleAt(Tt-It+Ft,kt+Lt,Tt-It+Ft,kt+Lt,Tt-It+Nt,kt+Lt,5,!0),this.v.setTripleAt(Tt+It-Ft,kt+Lt,Tt+It-Nt,kt+Lt,Tt+It-Ft,kt+Lt,6,!0),this.v.setTripleAt(Tt+It,kt+Lt-Ft,Tt+It,kt+Lt-Ft,Tt+It,kt+Lt-Nt,7,!0)):(this.v.setTripleAt(Tt-It,kt-Lt,Tt-It+Nt,kt-Lt,Tt-It,kt-Lt,1,!0),this.v.setTripleAt(Tt-It,kt+Lt,Tt-It,kt+Lt-Nt,Tt-It,kt+Lt,2,!0),this.v.setTripleAt(Tt+It,kt+Lt,Tt+It-Nt,kt+Lt,Tt+It,kt+Lt,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:c},extendPrototype([DynamicPropertyContainer],Pt),Pt}();function gt(Pt,At,Tt){var kt;if(Tt===3||Tt===4){var It=Tt===3?At.pt:At.ks,Lt=It.k;Lt.length?kt=new _e(Pt,At,Tt):kt=new j(Pt,At,Tt)}else Tt===5?kt=new ut(Pt,At):Tt===6?kt=new st(Pt,At):Tt===7&&(kt=new rt(Pt,At));return kt.k&&Pt.addDynamicProperty(kt),kt}function yt(){return j}function wt(){return _e}var Ct={};return Ct.getShapeProp=gt,Ct.getConstructorFunction=yt,Ct.getKeyframedConstructorFunction=wt,Ct}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var e=Math.cos,o=Math.sin,a=Math.tan,c=Math.round;function d(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function g(Gr){if(Gr===0)return this;var ds=e(Gr),Zn=o(Gr);return this._t(ds,-Zn,0,0,Zn,ds,0,0,0,0,1,0,0,0,0,1)}function b(Gr){if(Gr===0)return this;var ds=e(Gr),Zn=o(Gr);return this._t(1,0,0,0,0,ds,-Zn,0,0,Zn,ds,0,0,0,0,1)}function j(Gr){if(Gr===0)return this;var ds=e(Gr),Zn=o(Gr);return this._t(ds,0,Zn,0,0,1,0,0,-Zn,0,ds,0,0,0,0,1)}function $(Gr){if(Gr===0)return this;var ds=e(Gr),Zn=o(Gr);return this._t(ds,-Zn,0,0,Zn,ds,0,0,0,0,1,0,0,0,0,1)}function _e(Gr,ds){return this._t(1,ds,Gr,1,0,0)}function st(Gr,ds){return this.shear(a(Gr),a(ds))}function rt(Gr,ds){var Zn=e(ds),Nn=o(ds);return this._t(Zn,Nn,0,0,-Nn,Zn,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,a(Gr),1,0,0,0,0,1,0,0,0,0,1)._t(Zn,-Nn,0,0,Nn,Zn,0,0,0,0,1,0,0,0,0,1)}function ut(Gr,ds,Zn){return!Zn&&Zn!==0&&(Zn=1),Gr===1&&ds===1&&Zn===1?this:this._t(Gr,0,0,0,0,ds,0,0,0,0,Zn,0,0,0,0,1)}function gt(Gr,ds,Zn,Nn,Qn,bu,ou,g0,Su,l1,B0,a1,q1,ox,U_,tS){return this.props[0]=Gr,this.props[1]=ds,this.props[2]=Zn,this.props[3]=Nn,this.props[4]=Qn,this.props[5]=bu,this.props[6]=ou,this.props[7]=g0,this.props[8]=Su,this.props[9]=l1,this.props[10]=B0,this.props[11]=a1,this.props[12]=q1,this.props[13]=ox,this.props[14]=U_,this.props[15]=tS,this}function yt(Gr,ds,Zn){return Zn=Zn||0,Gr!==0||ds!==0||Zn!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Gr,ds,Zn,1):this}function wt(Gr,ds,Zn,Nn,Qn,bu,ou,g0,Su,l1,B0,a1,q1,ox,U_,tS){var iS=this.props;if(Gr===1&&ds===0&&Zn===0&&Nn===0&&Qn===0&&bu===1&&ou===0&&g0===0&&Su===0&&l1===0&&B0===1&&a1===0)return iS[12]=iS[12]*Gr+iS[15]*q1,iS[13]=iS[13]*bu+iS[15]*ox,iS[14]=iS[14]*B0+iS[15]*U_,iS[15]*=tS,this._identityCalculated=!1,this;var wA=iS[0],pO=iS[1],aR=iS[2],fD=iS[3],AA=iS[4],oI=iS[5],mO=iS[6],sp=iS[7],xu=iS[8],ux=iS[9],tA=iS[10],au=iS[11],C3=iS[12],X3=iS[13],sR=iS[14],N_=iS[15];return iS[0]=wA*Gr+pO*Qn+aR*Su+fD*q1,iS[1]=wA*ds+pO*bu+aR*l1+fD*ox,iS[2]=wA*Zn+pO*ou+aR*B0+fD*U_,iS[3]=wA*Nn+pO*g0+aR*a1+fD*tS,iS[4]=AA*Gr+oI*Qn+mO*Su+sp*q1,iS[5]=AA*ds+oI*bu+mO*l1+sp*ox,iS[6]=AA*Zn+oI*ou+mO*B0+sp*U_,iS[7]=AA*Nn+oI*g0+mO*a1+sp*tS,iS[8]=xu*Gr+ux*Qn+tA*Su+au*q1,iS[9]=xu*ds+ux*bu+tA*l1+au*ox,iS[10]=xu*Zn+ux*ou+tA*B0+au*U_,iS[11]=xu*Nn+ux*g0+tA*a1+au*tS,iS[12]=C3*Gr+X3*Qn+sR*Su+N_*q1,iS[13]=C3*ds+X3*bu+sR*l1+N_*ox,iS[14]=C3*Zn+X3*ou+sR*B0+N_*U_,iS[15]=C3*Nn+X3*g0+sR*a1+N_*tS,this._identityCalculated=!1,this}function Ct(Gr){var ds=Gr.props;return this.transform(ds[0],ds[1],ds[2],ds[3],ds[4],ds[5],ds[6],ds[7],ds[8],ds[9],ds[10],ds[11],ds[12],ds[13],ds[14],ds[15])}function Pt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function At(Gr){for(var ds=0;ds<16;){if(Gr.props[ds]!==this.props[ds])return!1;ds+=1}return!0}function Tt(Gr){var ds;for(ds=0;ds<16;ds+=1)Gr.props[ds]=this.props[ds];return Gr}function kt(Gr){var ds;for(ds=0;ds<16;ds+=1)this.props[ds]=Gr[ds]}function It(Gr,ds,Zn){return{x:Gr*this.props[0]+ds*this.props[4]+Zn*this.props[8]+this.props[12],y:Gr*this.props[1]+ds*this.props[5]+Zn*this.props[9]+this.props[13],z:Gr*this.props[2]+ds*this.props[6]+Zn*this.props[10]+this.props[14]}}function Lt(Gr,ds,Zn){return Gr*this.props[0]+ds*this.props[4]+Zn*this.props[8]+this.props[12]}function Ft(Gr,ds,Zn){return Gr*this.props[1]+ds*this.props[5]+Zn*this.props[9]+this.props[13]}function Nt(Gr,ds,Zn){return Gr*this.props[2]+ds*this.props[6]+Zn*this.props[10]+this.props[14]}function Ht(){var Gr=this.props[0]*this.props[5]-this.props[1]*this.props[4],ds=this.props[5]/Gr,Zn=-this.props[1]/Gr,Nn=-this.props[4]/Gr,Qn=this.props[0]/Gr,bu=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Gr,ou=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Gr,g0=new Matrix;return g0.props[0]=ds,g0.props[1]=Zn,g0.props[4]=Nn,g0.props[5]=Qn,g0.props[12]=bu,g0.props[13]=ou,g0}function dr(Gr){var ds=this.getInverseMatrix();return ds.applyToPointArray(Gr[0],Gr[1],Gr[2]||0)}function hs(Gr){var ds,Zn=Gr.length,Nn=[];for(ds=0;ds<Zn;ds+=1)Nn[ds]=dr(Gr[ds]);return Nn}function us(Gr,ds,Zn){var Nn=createTypedArray("float32",6);if(this.isIdentity())Nn[0]=Gr[0],Nn[1]=Gr[1],Nn[2]=ds[0],Nn[3]=ds[1],Nn[4]=Zn[0],Nn[5]=Zn[1];else{var Qn=this.props[0],bu=this.props[1],ou=this.props[4],g0=this.props[5],Su=this.props[12],l1=this.props[13];Nn[0]=Gr[0]*Qn+Gr[1]*ou+Su,Nn[1]=Gr[0]*bu+Gr[1]*g0+l1,Nn[2]=ds[0]*Qn+ds[1]*ou+Su,Nn[3]=ds[0]*bu+ds[1]*g0+l1,Nn[4]=Zn[0]*Qn+Zn[1]*ou+Su,Nn[5]=Zn[0]*bu+Zn[1]*g0+l1}return Nn}function hn(Gr,ds,Zn){var Nn;return this.isIdentity()?Nn=[Gr,ds,Zn]:Nn=[Gr*this.props[0]+ds*this.props[4]+Zn*this.props[8]+this.props[12],Gr*this.props[1]+ds*this.props[5]+Zn*this.props[9]+this.props[13],Gr*this.props[2]+ds*this.props[6]+Zn*this.props[10]+this.props[14]],Nn}function un(Gr,ds){if(this.isIdentity())return Gr+","+ds;var Zn=this.props;return Math.round((Gr*Zn[0]+ds*Zn[4]+Zn[12])*100)/100+","+Math.round((Gr*Zn[1]+ds*Zn[5]+Zn[13])*100)/100}function bo(){for(var Gr=0,ds=this.props,Zn="matrix3d(",Nn=1e4;Gr<16;)Zn+=c(ds[Gr]*Nn)/Nn,Zn+=Gr===15?")":",",Gr+=1;return Zn}function _s(Gr){var ds=1e4;return Gr<1e-6&&Gr>0||Gr>-1e-6&&Gr<0?c(Gr*ds)/ds:Gr}function gn(){var Gr=this.props,ds=_s(Gr[0]),Zn=_s(Gr[1]),Nn=_s(Gr[4]),Qn=_s(Gr[5]),bu=_s(Gr[12]),ou=_s(Gr[13]);return"matrix("+ds+","+Zn+","+Nn+","+Qn+","+bu+","+ou+")"}return function(){this.reset=d,this.rotate=g,this.rotateX=b,this.rotateY=j,this.rotateZ=$,this.skew=st,this.skewFromAxis=rt,this.shear=_e,this.scale=ut,this.setTransform=gt,this.translate=yt,this.transform=wt,this.multiply=Ct,this.applyToPoint=It,this.applyToX=Lt,this.applyToY=Ft,this.applyToZ=Nt,this.applyToPointArray=hn,this.applyToTriplePoints=us,this.applyToPointStringified=un,this.toCSS=bo,this.to2dCSS=gn,this.clone=Tt,this.cloneFromProps=kt,this.equals=At,this.inversePoints=hs,this.inversePoint=dr,this.getInverseMatrix=Ht,this._t=this.transform,this.isIdentity=Pt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(a){return typeof a}:_typeof$3=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$3(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if(typeof e=="string")switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return typeof navigator<"u"}function installPlugin(e,o){e==="expressions"&&setExpressionsPlugin(o)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var o=queryString.split("&"),a=0;a<o.length;a+=1){var c=o[a].split("=");if(decodeURIComponent(c[0])==e)return decodeURIComponent(c[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(e){}var ShapeModifiers=function(){var e={},o={};e.registerModifier=a,e.getModifier=c;function a(d,g){o[d]||(o[d]=g)}function c(d,g,b){return new o[d](g,b)}return e}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var o={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(o),this.addShapeToModifier(o),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,o){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,o),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,o){this.s=PropertyFactory.getProp(e,o.s,0,.01,this),this.e=PropertyFactory.getProp(e,o.e,0,.01,this),this.o=PropertyFactory.getProp(e,o.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=o.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,o,a,c,d){var g=[];o<=1?g.push({s:e,e:o}):e>=1?g.push({s:e-1,e:o-1}):(g.push({s:e,e:1}),g.push({s:0,e:o-1}));var b=[],j,$=g.length,_e;for(j=0;j<$;j+=1)if(_e=g[j],!(_e.e*d<c||_e.s*d>c+a)){var st,rt;_e.s*d<=c?st=0:st=(_e.s*d-c)/a,_e.e*d>=c+a?rt=1:rt=(_e.e*d-c)/a,b.push([st,rt])}return b.length||b.push([0,0]),b},TrimModifier.prototype.releasePathsData=function(e){var o,a=e.length;for(o=0;o<a;o+=1)segmentsLengthPool.release(e[o]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var o,a;if(this._mdf||e){var c=this.o.v%360/360;if(c<0&&(c+=1),this.s.v>1?o=1+c:this.s.v<0?o=0+c:o=this.s.v+c,this.e.v>1?a=1+c:this.e.v<0?a=0+c:a=this.e.v+c,o>a){var d=o;o=a,a=d}o=Math.round(o*1e4)*1e-4,a=Math.round(a*1e4)*1e-4,this.sValue=o,this.eValue=a}else o=this.sValue,a=this.eValue;var g,b,j=this.shapes.length,$,_e,st,rt,ut,gt=0;if(a===o)for(b=0;b<j;b+=1)this.shapes[b].localShapeCollection.releaseShapes(),this.shapes[b].shape._mdf=!0,this.shapes[b].shape.paths=this.shapes[b].localShapeCollection,this._mdf&&(this.shapes[b].pathsData.length=0);else if(a===1&&o===0||a===0&&o===1){if(this._mdf)for(b=0;b<j;b+=1)this.shapes[b].pathsData.length=0,this.shapes[b].shape._mdf=!0}else{var yt=[],wt,Ct;for(b=0;b<j;b+=1)if(wt=this.shapes[b],!wt.shape._mdf&&!this._mdf&&!e&&this.m!==2)wt.shape.paths=wt.localShapeCollection;else{if(g=wt.shape.paths,_e=g._length,ut=0,!wt.shape._mdf&&wt.pathsData.length)ut=wt.totalShapeLength;else{for(st=this.releasePathsData(wt.pathsData),$=0;$<_e;$+=1)rt=bez.getSegmentsLength(g.shapes[$]),st.push(rt),ut+=rt.totalLength;wt.totalShapeLength=ut,wt.pathsData=st}gt+=ut,wt.shape._mdf=!0}var Pt=o,At=a,Tt=0,kt;for(b=j-1;b>=0;b-=1)if(wt=this.shapes[b],wt.shape._mdf){for(Ct=wt.localShapeCollection,Ct.releaseShapes(),this.m===2&&j>1?(kt=this.calculateShapeEdges(o,a,wt.totalShapeLength,Tt,gt),Tt+=wt.totalShapeLength):kt=[[Pt,At]],_e=kt.length,$=0;$<_e;$+=1){Pt=kt[$][0],At=kt[$][1],yt.length=0,At<=1?yt.push({s:wt.totalShapeLength*Pt,e:wt.totalShapeLength*At}):Pt>=1?yt.push({s:wt.totalShapeLength*(Pt-1),e:wt.totalShapeLength*(At-1)}):(yt.push({s:wt.totalShapeLength*Pt,e:wt.totalShapeLength}),yt.push({s:0,e:wt.totalShapeLength*(At-1)}));var It=this.addShapes(wt,yt[0]);if(yt[0].s!==yt[0].e){if(yt.length>1){var Lt=wt.shape.paths.shapes[wt.shape.paths._length-1];if(Lt.c){var Ft=It.pop();this.addPaths(It,Ct),It=this.addShapes(wt,yt[1],Ft)}else this.addPaths(It,Ct),It=this.addShapes(wt,yt[1])}this.addPaths(It,Ct)}}wt.shape.paths=Ct}}},TrimModifier.prototype.addPaths=function(e,o){var a,c=e.length;for(a=0;a<c;a+=1)o.addShape(e[a])},TrimModifier.prototype.addSegment=function(e,o,a,c,d,g,b){d.setXYAt(o[0],o[1],"o",g),d.setXYAt(a[0],a[1],"i",g+1),b&&d.setXYAt(e[0],e[1],"v",g),d.setXYAt(c[0],c[1],"v",g+1)},TrimModifier.prototype.addSegmentFromArray=function(e,o,a,c){o.setXYAt(e[1],e[5],"o",a),o.setXYAt(e[2],e[6],"i",a+1),c&&o.setXYAt(e[0],e[4],"v",a),o.setXYAt(e[3],e[7],"v",a+1)},TrimModifier.prototype.addShapes=function(e,o,a){var c=e.pathsData,d=e.shape.paths.shapes,g,b=e.shape.paths._length,j,$,_e=0,st,rt,ut,gt,yt=[],wt,Ct=!0;for(a?(rt=a._length,wt=a._length):(a=shapePool.newElement(),rt=0,wt=0),yt.push(a),g=0;g<b;g+=1){for(ut=c[g].lengths,a.c=d[g].c,$=d[g].c?ut.length:ut.length+1,j=1;j<$;j+=1)if(st=ut[j-1],_e+st.addedLength<o.s)_e+=st.addedLength,a.c=!1;else if(_e>o.e){a.c=!1;break}else o.s<=_e&&o.e>=_e+st.addedLength?(this.addSegment(d[g].v[j-1],d[g].o[j-1],d[g].i[j],d[g].v[j],a,rt,Ct),Ct=!1):(gt=bez.getNewSegment(d[g].v[j-1],d[g].v[j],d[g].o[j-1],d[g].i[j],(o.s-_e)/st.addedLength,(o.e-_e)/st.addedLength,ut[j-1]),this.addSegmentFromArray(gt,a,rt,Ct),Ct=!1,a.c=!1),_e+=st.addedLength,rt+=1;if(d[g].c&&ut.length){if(st=ut[j-1],_e<=o.e){var Pt=ut[j-1].addedLength;o.s<=_e&&o.e>=_e+Pt?(this.addSegment(d[g].v[j-1],d[g].o[j-1],d[g].i[0],d[g].v[0],a,rt,Ct),Ct=!1):(gt=bez.getNewSegment(d[g].v[j-1],d[g].v[0],d[g].o[j-1],d[g].i[0],(o.s-_e)/Pt,(o.e-_e)/Pt,ut[j-1]),this.addSegmentFromArray(gt,a,rt,Ct),Ct=!1,a.c=!1)}else a.c=!1;_e+=st.addedLength,rt+=1}if(a._length&&(a.setXYAt(a.v[wt][0],a.v[wt][1],"i",wt),a.setXYAt(a.v[a._length-1][0],a.v[a._length-1][1],"o",a._length-1)),_e>o.e)break;g<b-1&&(a=shapePool.newElement(),Ct=!0,yt.push(a),rt=0)}return yt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,o){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,o.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,o){var a=o/100,c=[0,0],d=e._length,g=0;for(g=0;g<d;g+=1)c[0]+=e.v[g][0],c[1]+=e.v[g][1];c[0]/=d,c[1]/=d;var b=shapePool.newElement();b.c=e.c;var j,$,_e,st,rt,ut;for(g=0;g<d;g+=1)j=e.v[g][0]+(c[0]-e.v[g][0])*a,$=e.v[g][1]+(c[1]-e.v[g][1])*a,_e=e.o[g][0]+(c[0]-e.o[g][0])*-a,st=e.o[g][1]+(c[1]-e.o[g][1])*-a,rt=e.i[g][0]+(c[0]-e.i[g][0])*-a,ut=e.i[g][1]+(c[1]-e.i[g][1])*-a,b.setTripleAt(j,$,_e,st,rt,ut,g);return b},PuckerAndBloatModifier.prototype.processShapes=function(e){var o,a,c=this.shapes.length,d,g,b=this.amount.v;if(b!==0){var j,$;for(a=0;a<c;a+=1){if(j=this.shapes[a],$=j.localShapeCollection,!(!j.shape._mdf&&!this._mdf&&!e))for($.releaseShapes(),j.shape._mdf=!0,o=j.shape.paths.shapes,g=j.shape.paths._length,d=0;d<g;d+=1)$.addShape(this.processPath(o[d],b));j.shape.paths=j.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function o($){var _e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||_e,this.a&&$.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&$.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&$.skewFromAxis(-this.sk.v,this.sa.v),this.r?$.rotate(-this.r.v):$.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?$.translate(this.px.v,this.py.v,-this.pz.v):$.translate(this.px.v,this.py.v,0):$.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function a($){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||$){var _e;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var st,rt;if(_e=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(st=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/_e,0),rt=this.p.getValueAtTime(this.p.keyframes[0].t/_e,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(st=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/_e,0),rt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/_e,0)):(st=this.p.pv,rt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/_e,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){st=[],rt=[];var ut=this.px,gt=this.py;ut._caching.lastFrame+ut.offsetTime<=ut.keyframes[0].t?(st[0]=ut.getValueAtTime((ut.keyframes[0].t+.01)/_e,0),st[1]=gt.getValueAtTime((gt.keyframes[0].t+.01)/_e,0),rt[0]=ut.getValueAtTime(ut.keyframes[0].t/_e,0),rt[1]=gt.getValueAtTime(gt.keyframes[0].t/_e,0)):ut._caching.lastFrame+ut.offsetTime>=ut.keyframes[ut.keyframes.length-1].t?(st[0]=ut.getValueAtTime(ut.keyframes[ut.keyframes.length-1].t/_e,0),st[1]=gt.getValueAtTime(gt.keyframes[gt.keyframes.length-1].t/_e,0),rt[0]=ut.getValueAtTime((ut.keyframes[ut.keyframes.length-1].t-.01)/_e,0),rt[1]=gt.getValueAtTime((gt.keyframes[gt.keyframes.length-1].t-.01)/_e,0)):(st=[ut.pv,gt.pv],rt[0]=ut.getValueAtTime((ut._caching.lastFrame+ut.offsetTime-.01)/_e,ut.offsetTime),rt[1]=gt.getValueAtTime((gt._caching.lastFrame+gt.offsetTime-.01)/_e,gt.offsetTime))}else rt=e,st=rt;this.v.rotate(-Math.atan2(st[1]-rt[1],st[0]-rt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function c(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function d(){}function g($){this._addDynamicProperty($),this.elem.addDynamicProperty($),this._isDirty=!0}function b($,_e,st){if(this.elem=$,this.frameId=-1,this.propType="transform",this.data=_e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(st||$),_e.p&&_e.p.s?(this.px=PropertyFactory.getProp($,_e.p.x,0,0,this),this.py=PropertyFactory.getProp($,_e.p.y,0,0,this),_e.p.z&&(this.pz=PropertyFactory.getProp($,_e.p.z,0,0,this))):this.p=PropertyFactory.getProp($,_e.p||{k:[0,0,0]},1,0,this),_e.rx){if(this.rx=PropertyFactory.getProp($,_e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp($,_e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp($,_e.rz,0,degToRads,this),_e.or.k[0].ti){var rt,ut=_e.or.k.length;for(rt=0;rt<ut;rt+=1)_e.or.k[rt].to=null,_e.or.k[rt].ti=null}this.or=PropertyFactory.getProp($,_e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp($,_e.r||{k:0},0,degToRads,this);_e.sk&&(this.sk=PropertyFactory.getProp($,_e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp($,_e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp($,_e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp($,_e.s||{k:[100,100,100]},1,.01,this),_e.o?this.o=PropertyFactory.getProp($,_e.o,0,.01,$):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}b.prototype={applyToMatrix:o,getValue:a,precalculateMatrix:c,autoOrient:d},extendPrototype([DynamicPropertyContainer],b),b.prototype.addDynamicProperty=g,b.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function j($,_e,st){return new b($,_e,st)}return{getTransformProperty:j}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,o){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,o.c,0,null,this),this.o=PropertyFactory.getProp(e,o.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,o.tr,this),this.so=PropertyFactory.getProp(e,o.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,o.tr.eo,0,.01,this),this.data=o,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,o,a,c,d,g){var b=g?-1:1,j=c.s.v[0]+(1-c.s.v[0])*(1-d),$=c.s.v[1]+(1-c.s.v[1])*(1-d);e.translate(c.p.v[0]*b*d,c.p.v[1]*b*d,c.p.v[2]),o.translate(-c.a.v[0],-c.a.v[1],c.a.v[2]),o.rotate(-c.r.v*b*d),o.translate(c.a.v[0],c.a.v[1],c.a.v[2]),a.translate(-c.a.v[0],-c.a.v[1],c.a.v[2]),a.scale(g?1/j:j,g?1/$:$),a.translate(c.a.v[0],c.a.v[1],c.a.v[2])},RepeaterModifier.prototype.init=function(e,o,a,c){for(this.elem=e,this.arr=o,this.pos=a,this.elemsData=c,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,o[a]);a>0;)a-=1,this._elements.unshift(o[a]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var o,a=e.length;for(o=0;o<a;o+=1)e[o]._processed=!1,e[o].ty==="gr"&&this.resetElements(e[o].it)},RepeaterModifier.prototype.cloneElements=function(e){var o=JSON.parse(JSON.stringify(e));return this.resetElements(o),o},RepeaterModifier.prototype.changeGroupRender=function(e,o){var a,c=e.length;for(a=0;a<c;a+=1)e[a]._render=o,e[a].ty==="gr"&&this.changeGroupRender(e[a].it,o)},RepeaterModifier.prototype.processShapes=function(e){var o,a,c,d,g,b=!1;if(this._mdf||e){var j=Math.ceil(this.c.v);if(this._groups.length<j){for(;this._groups.length<j;){var $={it:this.cloneElements(this._elements),ty:"gr"};$.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,$),this._groups.splice(0,0,$),this._currentCopies+=1}this.elem.reloadShapes(),b=!0}g=0;var _e;for(c=0;c<=this._groups.length-1;c+=1){if(_e=g<j,this._groups[c]._render=_e,this.changeGroupRender(this._groups[c].it,_e),!_e){var st=this.elemsData[c].it,rt=st[st.length-1];rt.transform.op.v!==0?(rt.transform.op._mdf=!0,rt.transform.op.v=0):rt.transform.op._mdf=!1}g+=1}this._currentCopies=j;var ut=this.o.v,gt=ut%1,yt=ut>0?Math.floor(ut):Math.ceil(ut),wt=this.pMatrix.props,Ct=this.rMatrix.props,Pt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var At=0;if(ut>0){for(;At<yt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),At+=1;gt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,gt,!1),At+=gt)}else if(ut<0){for(;At>yt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),At-=1;gt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-gt,!0),At-=gt)}c=this.data.m===1?0:this._currentCopies-1,d=this.data.m===1?1:-1,g=this._currentCopies;for(var Tt,kt;g;){if(o=this.elemsData[c].it,a=o[o.length-1].transform.mProps.v.props,kt=a.length,o[o.length-1].transform.mProps._mdf=!0,o[o.length-1].transform.op._mdf=!0,o[o.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(c/(this._currentCopies-1)),At!==0){for((c!==0&&d===1||c!==this._currentCopies-1&&d===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5],Ct[6],Ct[7],Ct[8],Ct[9],Ct[10],Ct[11],Ct[12],Ct[13],Ct[14],Ct[15]),this.matrix.transform(Pt[0],Pt[1],Pt[2],Pt[3],Pt[4],Pt[5],Pt[6],Pt[7],Pt[8],Pt[9],Pt[10],Pt[11],Pt[12],Pt[13],Pt[14],Pt[15]),this.matrix.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5],wt[6],wt[7],wt[8],wt[9],wt[10],wt[11],wt[12],wt[13],wt[14],wt[15]),Tt=0;Tt<kt;Tt+=1)a[Tt]=this.matrix.props[Tt];this.matrix.reset()}else for(this.matrix.reset(),Tt=0;Tt<kt;Tt+=1)a[Tt]=this.matrix.props[Tt];At+=1,g-=1,c+=d}}else for(g=this._currentCopies,c=0,d=1;g;)o=this.elemsData[c].it,a=o[o.length-1].transform.mProps.v.props,o[o.length-1].transform.mProps._mdf=!1,o[o.length-1].transform.op._mdf=!1,g-=1,c+=d;return b},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,o){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,o.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,o){var a=shapePool.newElement();a.c=e.c;var c,d=e._length,g,b,j,$,_e,st,rt=0,ut,gt,yt,wt,Ct,Pt;for(c=0;c<d;c+=1)g=e.v[c],j=e.o[c],b=e.i[c],g[0]===j[0]&&g[1]===j[1]&&g[0]===b[0]&&g[1]===b[1]?(c===0||c===d-1)&&!e.c?(a.setTripleAt(g[0],g[1],j[0],j[1],b[0],b[1],rt),rt+=1):(c===0?$=e.v[d-1]:$=e.v[c-1],_e=Math.sqrt(Math.pow(g[0]-$[0],2)+Math.pow(g[1]-$[1],2)),st=_e?Math.min(_e/2,o)/_e:0,Ct=g[0]+($[0]-g[0])*st,ut=Ct,Pt=g[1]-(g[1]-$[1])*st,gt=Pt,yt=ut-(ut-g[0])*roundCorner,wt=gt-(gt-g[1])*roundCorner,a.setTripleAt(ut,gt,yt,wt,Ct,Pt,rt),rt+=1,c===d-1?$=e.v[0]:$=e.v[c+1],_e=Math.sqrt(Math.pow(g[0]-$[0],2)+Math.pow(g[1]-$[1],2)),st=_e?Math.min(_e/2,o)/_e:0,yt=g[0]+($[0]-g[0])*st,ut=yt,wt=g[1]+($[1]-g[1])*st,gt=wt,Ct=ut-(ut-g[0])*roundCorner,Pt=gt-(gt-g[1])*roundCorner,a.setTripleAt(ut,gt,yt,wt,Ct,Pt,rt),rt+=1):(a.setTripleAt(e.v[c][0],e.v[c][1],e.o[c][0],e.o[c][1],e.i[c][0],e.i[c][1],rt),rt+=1);return a},RoundCornersModifier.prototype.processShapes=function(e){var o,a,c=this.shapes.length,d,g,b=this.rd.v;if(b!==0){var j,$;for(a=0;a<c;a+=1){if(j=this.shapes[a],$=j.localShapeCollection,!(!j.shape._mdf&&!this._mdf&&!e))for($.releaseShapes(),j.shape._mdf=!0,o=j.shape.paths.shapes,g=j.shape.paths._length,d=0;d<g;d+=1)$.addShape(this.processPath(o[d],b));j.shape.paths=j.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(e,o){return Math.abs(e-o)*1e5<=Math.min(Math.abs(e),Math.abs(o))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,o,a){return e*(1-a)+o*a}function lerpPoint(e,o,a){return[lerp(e[0],o[0],a),lerp(e[1],o[1],a)]}function quadRoots(e,o,a){if(e===0)return[];var c=o*o-4*e*a;if(c<0)return[];var d=-o/(2*e);if(c===0)return[d];var g=Math.sqrt(c)/(2*e);return[d-g,d+g]}function polynomialCoefficients(e,o,a,c){return[-e+3*o-3*a+c,3*e-6*o+3*a,-3*e+3*o,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,o,a,c,d){d&&pointEqual(e,o)&&(o=lerpPoint(e,c,1/3)),d&&pointEqual(a,c)&&(a=lerpPoint(e,c,2/3));var g=polynomialCoefficients(e[0],o[0],a[0],c[0]),b=polynomialCoefficients(e[1],o[1],a[1],c[1]);this.a=[g[0],b[0]],this.b=[g[1],b[1]],this.c=[g[2],b[2]],this.d=[g[3],b[3]],this.points=[e,o,a,c]}PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var o=this.derivative(e);return Math.atan2(o[1],o[0])},PolynomialBezier.prototype.normalAngle=function(e){var o=this.derivative(e);return Math.atan2(o[0],o[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var o=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,a=o*o-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(a<0)return[];var c=Math.sqrt(a);return floatZero(c)?c>0&&c<1?[o]:[]:[o-c,o+c].filter(function(d){return d>0&&d<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var o=lerpPoint(this.points[0],this.points[1],e),a=lerpPoint(this.points[1],this.points[2],e),c=lerpPoint(this.points[2],this.points[3],e),d=lerpPoint(o,a,e),g=lerpPoint(a,c,e),b=lerpPoint(d,g,e);return[new PolynomialBezier(this.points[0],o,d,b,!0),new PolynomialBezier(b,g,c,this.points[3],!0)]};function extrema(e,o){var a=e.points[0][o],c=e.points[e.points.length-1][o];if(a>c){var d=c;c=a,a=d}for(var g=quadRoots(3*e.a[o],2*e.b[o],e.c[o]),b=0;b<g.length;b+=1)if(g[b]>0&&g[b]<1){var j=e.point(g[b])[o];j<a?a=j:j>c&&(c=j)}return{min:a,max:c}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}};function intersectData(e,o,a){var c=e.boundingBox();return{cx:c.cx,cy:c.cy,width:c.width,height:c.height,bez:e,t:(o+a)/2,t1:o,t2:a}}function splitData(e){var o=e.bez.split(.5);return[intersectData(o[0],e.t1,e.t),intersectData(o[1],e.t,e.t2)]}function boxIntersect(e,o){return Math.abs(e.cx-o.cx)*2<e.width+o.width&&Math.abs(e.cy-o.cy)*2<e.height+o.height}function intersectsImpl(e,o,a,c,d,g){if(boxIntersect(e,o)){if(a>=g||e.width<=c&&e.height<=c&&o.width<=c&&o.height<=c){d.push([e.t,o.t]);return}var b=splitData(e),j=splitData(o);intersectsImpl(b[0],j[0],a+1,c,d,g),intersectsImpl(b[0],j[1],a+1,c,d,g),intersectsImpl(b[1],j[0],a+1,c,d,g),intersectsImpl(b[1],j[1],a+1,c,d,g)}}PolynomialBezier.prototype.intersections=function(e,o,a){o===void 0&&(o=2),a===void 0&&(a=7);var c=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,o,c,a),c},PolynomialBezier.shapeSegment=function(e,o){var a=(o+1)%e.length();return new PolynomialBezier(e.v[o],e.o[o],e.i[a],e.v[a],!0)},PolynomialBezier.shapeSegmentInverted=function(e,o){var a=(o+1)%e.length();return new PolynomialBezier(e.v[a],e.i[a],e.o[o],e.v[o],!0)};function crossProduct(e,o){return[e[1]*o[2]-e[2]*o[1],e[2]*o[0]-e[0]*o[2],e[0]*o[1]-e[1]*o[0]]}function lineIntersection(e,o,a,c){var d=[e[0],e[1],1],g=[o[0],o[1],1],b=[a[0],a[1],1],j=[c[0],c[1],1],$=crossProduct(crossProduct(d,g),crossProduct(b,j));return floatZero($[2])?null:[$[0]/$[2],$[1]/$[2]]}function polarOffset(e,o,a){return[e[0]+Math.cos(o)*a,e[1]-Math.sin(o)*a]}function pointDistance(e,o){return Math.hypot(e[0]-o[0],e[1]-o[1])}function pointEqual(e,o){return floatEqual(e[0],o[0])&&floatEqual(e[1],o[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,o){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,o.s,0,null,this),this.frequency=PropertyFactory.getProp(e,o.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,o.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(e,o,a,c,d,g,b){var j=a-Math.PI/2,$=a+Math.PI/2,_e=o[0]+Math.cos(a)*c*d,st=o[1]-Math.sin(a)*c*d;e.setTripleAt(_e,st,_e+Math.cos(j)*g,st-Math.sin(j)*g,_e+Math.cos($)*b,st-Math.sin($)*b,e.length())}function getPerpendicularVector(e,o){var a=[o[0]-e[0],o[1]-e[1]],c=-Math.PI*.5,d=[Math.cos(c)*a[0]-Math.sin(c)*a[1],Math.sin(c)*a[0]+Math.cos(c)*a[1]];return d}function getProjectingAngle(e,o){var a=o===0?e.length()-1:o-1,c=(o+1)%e.length(),d=e.v[a],g=e.v[c],b=getPerpendicularVector(d,g);return Math.atan2(0,1)-Math.atan2(b[1],b[0])}function zigZagCorner(e,o,a,c,d,g,b){var j=getProjectingAngle(o,a),$=o.v[a%o._length],_e=o.v[a===0?o._length-1:a-1],st=o.v[(a+1)%o._length],rt=g===2?Math.sqrt(Math.pow($[0]-_e[0],2)+Math.pow($[1]-_e[1],2)):0,ut=g===2?Math.sqrt(Math.pow($[0]-st[0],2)+Math.pow($[1]-st[1],2)):0;setPoint(e,o.v[a%o._length],j,b,c,ut/((d+1)*2),rt/((d+1)*2))}function zigZagSegment(e,o,a,c,d,g){for(var b=0;b<c;b+=1){var j=(b+1)/(c+1),$=d===2?Math.sqrt(Math.pow(o.points[3][0]-o.points[0][0],2)+Math.pow(o.points[3][1]-o.points[0][1],2)):0,_e=o.normalAngle(j),st=o.point(j);setPoint(e,st,_e,g,a,$/((c+1)*2),$/((c+1)*2)),g=-g}return g}ZigZagModifier.prototype.processPath=function(e,o,a,c){var d=e._length,g=shapePool.newElement();if(g.c=e.c,e.c||(d-=1),d===0)return g;var b=-1,j=PolynomialBezier.shapeSegment(e,0);zigZagCorner(g,e,0,o,a,c,b);for(var $=0;$<d;$+=1)b=zigZagSegment(g,j,o,a,c,-b),$===d-1&&!e.c?j=null:j=PolynomialBezier.shapeSegment(e,($+1)%d),zigZagCorner(g,e,$+1,o,a,c,b);return g},ZigZagModifier.prototype.processShapes=function(e){var o,a,c=this.shapes.length,d,g,b=this.amplitude.v,j=Math.max(0,Math.round(this.frequency.v)),$=this.pointsType.v;if(b!==0){var _e,st;for(a=0;a<c;a+=1){if(_e=this.shapes[a],st=_e.localShapeCollection,!(!_e.shape._mdf&&!this._mdf&&!e))for(st.releaseShapes(),_e.shape._mdf=!0,o=_e.shape.paths.shapes,g=_e.shape.paths._length,d=0;d<g;d+=1)st.addShape(this.processPath(o[d],b,j,$));_e.shape.paths=_e.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(e,o,a){var c=Math.atan2(o[0]-e[0],o[1]-e[1]);return[polarOffset(e,c,a),polarOffset(o,c,a)]}function offsetSegment(e,o){var a,c,d,g,b,j,$;$=linearOffset(e.points[0],e.points[1],o),a=$[0],c=$[1],$=linearOffset(e.points[1],e.points[2],o),d=$[0],g=$[1],$=linearOffset(e.points[2],e.points[3],o),b=$[0],j=$[1];var _e=lineIntersection(a,c,d,g);_e===null&&(_e=c);var st=lineIntersection(b,j,d,g);return st===null&&(st=b),new PolynomialBezier(a,_e,st,j)}function joinLines(e,o,a,c,d){var g=o.points[3],b=a.points[0];if(c===3||pointEqual(g,b))return g;if(c===2){var j=-o.tangentAngle(1),$=-a.tangentAngle(0)+Math.PI,_e=lineIntersection(g,polarOffset(g,j+Math.PI/2,100),b,polarOffset(b,j+Math.PI/2,100)),st=_e?pointDistance(_e,g):pointDistance(g,b)/2,rt=polarOffset(g,j,2*st*roundCorner);return e.setXYAt(rt[0],rt[1],"o",e.length()-1),rt=polarOffset(b,$,2*st*roundCorner),e.setTripleAt(b[0],b[1],b[0],b[1],rt[0],rt[1],e.length()),b}var ut=pointEqual(g,o.points[2])?o.points[0]:o.points[2],gt=pointEqual(b,a.points[1])?a.points[3]:a.points[1],yt=lineIntersection(ut,g,b,gt);return yt&&pointDistance(yt,g)<d?(e.setTripleAt(yt[0],yt[1],yt[0],yt[1],yt[0],yt[1],e.length()),yt):g}function getIntersection(e,o){var a=e.intersections(o);return a.length&&floatEqual(a[0][0],1)&&a.shift(),a.length?a[0]:null}function pruneSegmentIntersection(e,o){var a=e.slice(),c=o.slice(),d=getIntersection(e[e.length-1],o[0]);return d&&(a[e.length-1]=e[e.length-1].split(d[0])[0],c[0]=o[0].split(d[1])[1]),e.length>1&&o.length>1&&(d=getIntersection(e[0],o[o.length-1]),d)?[[e[0].split(d[0])[0]],[o[o.length-1].split(d[1])[1]]]:[a,c]}function pruneIntersections(e){for(var o,a=1;a<e.length;a+=1)o=pruneSegmentIntersection(e[a-1],e[a]),e[a-1]=o[0],e[a]=o[1];return e.length>1&&(o=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=o[0],e[0]=o[1]),e}function offsetSegmentSplit(e,o){var a=e.inflectionPoints(),c,d,g,b;if(a.length===0)return[offsetSegment(e,o)];if(a.length===1||floatEqual(a[1],1))return g=e.split(a[0]),c=g[0],d=g[1],[offsetSegment(c,o),offsetSegment(d,o)];g=e.split(a[0]),c=g[0];var j=(a[1]-a[0])/(1-a[0]);return g=g[1].split(j),b=g[0],d=g[1],[offsetSegment(c,o),offsetSegment(b,o),offsetSegment(d,o)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,o){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,o.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,o.ml,0,null,this),this.lineJoin=o.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(e,o,a,c){var d=shapePool.newElement();d.c=e.c;var g=e.length();e.c||(g-=1);var b,j,$,_e=[];for(b=0;b<g;b+=1)$=PolynomialBezier.shapeSegment(e,b),_e.push(offsetSegmentSplit($,o));if(!e.c)for(b=g-1;b>=0;b-=1)$=PolynomialBezier.shapeSegmentInverted(e,b),_e.push(offsetSegmentSplit($,o));_e=pruneIntersections(_e);var st=null,rt=null;for(b=0;b<_e.length;b+=1){var ut=_e[b];for(rt&&(st=joinLines(d,rt,ut[0],a,c)),rt=ut[ut.length-1],j=0;j<ut.length;j+=1)$=ut[j],st&&pointEqual($.points[0],st)?d.setXYAt($.points[1][0],$.points[1][1],"o",d.length()-1):d.setTripleAt($.points[0][0],$.points[0][1],$.points[1][0],$.points[1][1],$.points[0][0],$.points[0][1],d.length()),d.setTripleAt($.points[3][0],$.points[3][1],$.points[3][0],$.points[3][1],$.points[2][0],$.points[2][1],d.length()),st=$.points[3]}return _e.length&&joinLines(d,rt,_e[0][0],a,c),d},OffsetPathModifier.prototype.processShapes=function(e){var o,a,c=this.shapes.length,d,g,b=this.amount.v,j=this.miterLimit.v,$=this.lineJoin;if(b!==0){var _e,st;for(a=0;a<c;a+=1){if(_e=this.shapes[a],st=_e.localShapeCollection,!(!_e.shape._mdf&&!this._mdf&&!e))for(st.releaseShapes(),_e.shape._mdf=!0,o=_e.shape.paths.shapes,g=_e.shape.paths._length,d=0;d<g;d+=1)st.addShape(this.processPath(o[d],b,$,j));_e.shape.paths=_e.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(e){for(var o=e.fStyle?e.fStyle.split(" "):[],a="normal",c="normal",d=o.length,g,b=0;b<d;b+=1)switch(g=o[b].toLowerCase(),g){case"italic":c="italic";break;case"bold":a="700";break;case"black":a="900";break;case"medium":a="500";break;case"regular":case"normal":a="400";break;case"light":case"thin":a="200";break}return{style:c,weight:e.fWeight||a}}var FontManager=function(){var e=5e3,o={w:0,size:0,shapes:[],data:{shapes:[]}},a=[];a=a.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var c=127988,d=917631,g=917601,b=917626,j=65039,$=8205,_e=127462,st=127487,rt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function ut(_s){var gn=_s.split(","),Gr,ds=gn.length,Zn=[];for(Gr=0;Gr<ds;Gr+=1)gn[Gr]!=="sans-serif"&&gn[Gr]!=="monospace"&&Zn.push(gn[Gr]);return Zn.join(",")}function gt(_s,gn){var Gr=createTag("span");Gr.setAttribute("aria-hidden",!0),Gr.style.fontFamily=gn;var ds=createTag("span");ds.innerText="giItT1WQy@!-/#",Gr.style.position="absolute",Gr.style.left="-10000px",Gr.style.top="-10000px",Gr.style.fontSize="300px",Gr.style.fontVariant="normal",Gr.style.fontStyle="normal",Gr.style.fontWeight="normal",Gr.style.letterSpacing="0",Gr.appendChild(ds),document.body.appendChild(Gr);var Zn=ds.offsetWidth;return ds.style.fontFamily=ut(_s)+", "+gn,{node:ds,w:Zn,parent:Gr}}function yt(){var _s,gn=this.fonts.length,Gr,ds,Zn=gn;for(_s=0;_s<gn;_s+=1)this.fonts[_s].loaded?Zn-=1:this.fonts[_s].fOrigin==="n"||this.fonts[_s].origin===0?this.fonts[_s].loaded=!0:(Gr=this.fonts[_s].monoCase.node,ds=this.fonts[_s].monoCase.w,Gr.offsetWidth!==ds?(Zn-=1,this.fonts[_s].loaded=!0):(Gr=this.fonts[_s].sansCase.node,ds=this.fonts[_s].sansCase.w,Gr.offsetWidth!==ds&&(Zn-=1,this.fonts[_s].loaded=!0)),this.fonts[_s].loaded&&(this.fonts[_s].sansCase.parent.parentNode.removeChild(this.fonts[_s].sansCase.parent),this.fonts[_s].monoCase.parent.parentNode.removeChild(this.fonts[_s].monoCase.parent)));Zn!==0&&Date.now()-this.initTime<e?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function wt(_s,gn){var Gr=document.body&&gn?"svg":"canvas",ds,Zn=getFontProperties(_s);if(Gr==="svg"){var Nn=createNS("text");Nn.style.fontSize="100px",Nn.setAttribute("font-family",_s.fFamily),Nn.setAttribute("font-style",Zn.style),Nn.setAttribute("font-weight",Zn.weight),Nn.textContent="1",_s.fClass?(Nn.style.fontFamily="inherit",Nn.setAttribute("class",_s.fClass)):Nn.style.fontFamily=_s.fFamily,gn.appendChild(Nn),ds=Nn}else{var Qn=new OffscreenCanvas(500,500).getContext("2d");Qn.font=Zn.style+" "+Zn.weight+" 100px "+_s.fFamily,ds=Qn}function bu(ou){return Gr==="svg"?(ds.textContent=ou,ds.getComputedTextLength()):ds.measureText(ou).width}return{measureText:bu}}function Ct(_s,gn){if(!_s){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=_s.list;return}if(!document.body){this.isLoaded=!0,_s.list.forEach(function(B0){B0.helper=wt(B0),B0.cache={}}),this.fonts=_s.list;return}var Gr=_s.list,ds,Zn=Gr.length,Nn=Zn;for(ds=0;ds<Zn;ds+=1){var Qn=!0,bu,ou;if(Gr[ds].loaded=!1,Gr[ds].monoCase=gt(Gr[ds].fFamily,"monospace"),Gr[ds].sansCase=gt(Gr[ds].fFamily,"sans-serif"),!Gr[ds].fPath)Gr[ds].loaded=!0,Nn-=1;else if(Gr[ds].fOrigin==="p"||Gr[ds].origin===3){if(bu=document.querySelectorAll('style[f-forigin="p"][f-family="'+Gr[ds].fFamily+'"], style[f-origin="3"][f-family="'+Gr[ds].fFamily+'"]'),bu.length>0&&(Qn=!1),Qn){var g0=createTag("style");g0.setAttribute("f-forigin",Gr[ds].fOrigin),g0.setAttribute("f-origin",Gr[ds].origin),g0.setAttribute("f-family",Gr[ds].fFamily),g0.type="text/css",g0.innerText="@font-face {font-family: "+Gr[ds].fFamily+"; font-style: normal; src: url('"+Gr[ds].fPath+"');}",gn.appendChild(g0)}}else if(Gr[ds].fOrigin==="g"||Gr[ds].origin===1){for(bu=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ou=0;ou<bu.length;ou+=1)bu[ou].href.indexOf(Gr[ds].fPath)!==-1&&(Qn=!1);if(Qn){var Su=createTag("link");Su.setAttribute("f-forigin",Gr[ds].fOrigin),Su.setAttribute("f-origin",Gr[ds].origin),Su.type="text/css",Su.rel="stylesheet",Su.href=Gr[ds].fPath,document.body.appendChild(Su)}}else if(Gr[ds].fOrigin==="t"||Gr[ds].origin===2){for(bu=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ou=0;ou<bu.length;ou+=1)Gr[ds].fPath===bu[ou].src&&(Qn=!1);if(Qn){var l1=createTag("link");l1.setAttribute("f-forigin",Gr[ds].fOrigin),l1.setAttribute("f-origin",Gr[ds].origin),l1.setAttribute("rel","stylesheet"),l1.setAttribute("href",Gr[ds].fPath),gn.appendChild(l1)}}Gr[ds].helper=wt(Gr[ds],gn),Gr[ds].cache={},this.fonts.push(Gr[ds])}Nn===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Pt(_s){if(_s){this.chars||(this.chars=[]);var gn,Gr=_s.length,ds,Zn=this.chars.length,Nn;for(gn=0;gn<Gr;gn+=1){for(ds=0,Nn=!1;ds<Zn;)this.chars[ds].style===_s[gn].style&&this.chars[ds].fFamily===_s[gn].fFamily&&this.chars[ds].ch===_s[gn].ch&&(Nn=!0),ds+=1;Nn||(this.chars.push(_s[gn]),Zn+=1)}}}function At(_s,gn,Gr){for(var ds=0,Zn=this.chars.length;ds<Zn;){if(this.chars[ds].ch===_s&&this.chars[ds].style===gn&&this.chars[ds].fFamily===Gr)return this.chars[ds];ds+=1}return(typeof _s=="string"&&_s.charCodeAt(0)!==13||!_s)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",_s,gn,Gr)),o}function Tt(_s,gn,Gr){var ds=this.getFontByName(gn),Zn=_s;if(!ds.cache[Zn]){var Nn=ds.helper;if(_s===" "){var Qn=Nn.measureText("|"+_s+"|"),bu=Nn.measureText("||");ds.cache[Zn]=(Qn-bu)/100}else ds.cache[Zn]=Nn.measureText(_s)/100}return ds.cache[Zn]*Gr}function kt(_s){for(var gn=0,Gr=this.fonts.length;gn<Gr;){if(this.fonts[gn].fName===_s)return this.fonts[gn];gn+=1}return this.fonts[0]}function It(_s){var gn=0,Gr=_s.charCodeAt(0);if(Gr>=55296&&Gr<=56319){var ds=_s.charCodeAt(1);ds>=56320&&ds<=57343&&(gn=(Gr-55296)*1024+ds-56320+65536)}return gn}function Lt(_s,gn){var Gr=_s.toString(16)+gn.toString(16);return rt.indexOf(Gr)!==-1}function Ft(_s){return _s===$}function Nt(_s){return _s===j}function Ht(_s){var gn=It(_s);return gn>=_e&&gn<=st}function dr(_s){return Ht(_s.substr(0,2))&&Ht(_s.substr(2,2))}function hs(_s){return a.indexOf(_s)!==-1}function us(_s,gn){var Gr=It(_s.substr(gn,2));if(Gr!==c)return!1;var ds=0;for(gn+=2;ds<5;){if(Gr=It(_s.substr(gn,2)),Gr<g||Gr>b)return!1;ds+=1,gn+=2}return It(_s.substr(gn,2))===d}function hn(){this.isLoaded=!0}var un=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};un.isModifier=Lt,un.isZeroWidthJoiner=Ft,un.isFlagEmoji=dr,un.isRegionalCode=Ht,un.isCombinedCharacter=hs,un.isRegionalFlag=us,un.isVariationSelector=Nt,un.BLACK_FLAG_CODE_POINT=c;var bo={addChars:Pt,addFonts:Ct,getCharData:At,getFontByName:kt,measureText:Tt,checkLoadedFonts:yt,setIsLoaded:hn};return un.prototype=bo,un}();function SlotManager(e){this.animationData=e}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e};function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(o){this.renderableComponents.indexOf(o)===-1&&this.renderableComponents.push(o)},removeRenderableComponent:function(o){this.renderableComponents.indexOf(o)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(o),1)},prepareRenderableFrame:function(o){this.checkLayerLimits(o)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(o){this.data.ip-this.data.st<=o&&this.data.op-this.data.st>o?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var o,a=this.renderableComponents.length;for(o=0;o<a;o+=1)this.renderableComponents[o].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(o){return e[o]||""}}();function SliderEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,0,0,a)}function AngleEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,0,0,a)}function ColorEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,1,0,a)}function PointEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,1,0,a)}function LayerIndexEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,0,0,a)}function MaskIndexEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,0,0,a)}function CheckboxEffect(e,o,a){this.p=PropertyFactory.getProp(o,e.v,0,0,a)}function NoValueEffect(){this.p={}}function EffectsManager(e,o){var a=e.ef||[];this.effectElements=[];var c,d=a.length,g;for(c=0;c<d;c+=1)g=new GroupEffect(a[c],o),this.effectElements.push(g)}function GroupEffect(e,o){this.init(e,o)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,o){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(o);var a,c=this.data.ef.length,d,g=this.data.ef;for(a=0;a<c;a+=1){switch(d=null,g[a].ty){case 0:d=new SliderEffect(g[a],o,this);break;case 1:d=new AngleEffect(g[a],o,this);break;case 2:d=new ColorEffect(g[a],o,this);break;case 3:d=new PointEffect(g[a],o,this);break;case 4:case 7:d=new CheckboxEffect(g[a],o,this);break;case 10:d=new LayerIndexEffect(g[a],o,this);break;case 11:d=new MaskIndexEffect(g[a],o,this);break;case 5:d=new EffectsManager(g[a],o);break;default:d=new NoValueEffect(g[a]);break}d&&this.effectElements.push(d)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var o=0,a=this.data.masksProperties.length;o<a;){if(this.data.masksProperties[o].mode!=="n"&&this.data.masksProperties[o].cl!==!1)return!0;o+=1}return!1},initExpressions:function(){var o=getExpressionInterfaces();if(o){var a=o("layer"),c=o("effects"),d=o("shape"),g=o("text"),b=o("comp");this.layerInterface=a(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var j=c.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(j),this.data.ty===0||this.data.xt?this.compInterface=b(this):this.data.ty===4?(this.layerInterface.shapeInterface=d(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=g(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var o=getBlendMode(this.data.bm),a=this.baseElement||this.layerElement;a.style["mix-blend-mode"]=o},initBaseData:function(o,a,c){this.globalData=a,this.comp=c,this.data=o,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(o,a){var c,d=this.dynamicProperties.length;for(c=0;c<d;c+=1)(a||this._isParent&&this.dynamicProperties[c].propType==="transform")&&(this.dynamicProperties[c].getValue(),this.dynamicProperties[c]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(o){this.dynamicProperties.indexOf(o)===-1&&this.dynamicProperties.push(o)}};function FootageElement(e,o,a){this.initFrame(),this.initRenderable(),this.assetData=o.getAssetData(e.refId),this.footageData=o.imageLoader.getAsset(this.assetData),this.initBaseData(e,o,a)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var o=e("footage");this.layerInterface=o(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(e,o,a){this.initFrame(),this.initRenderable(),this.assetData=o.getAssetData(e.refId),this.initBaseData(e,o,a),this._isPlaying=!1,this._canPlay=!1;var c=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(c),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,o.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var o=this.tm.v;this._currentTime=o}this._volume=this.lv.v[0];var a=this._volume*this._volumeMultiplier;this._previousVolume!==a&&(this._previousVolume=a,this.audio.volume(a))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(e){var o,a=this.layers.length,c;for(this.completeLayers=!0,o=a-1;o>=0;o-=1)this.elements[o]||(c=this.layers[o],c.ip-c.st<=e-this.layers[o].st&&c.op-c.st>e-this.layers[o].st&&this.buildItem(o)),this.completeLayers=this.elements[o]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,o=this.layers.length;for(e=0;e<o;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var o,a=e.length,c,d=this.layers.length;for(o=0;o<a;o+=1)for(c=0;c<d;){if(this.layers[c].id===e[o].id){this.layers[c]=e[o];break}c+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,o,a){for(var c=this.elements,d=this.layers,g=0,b=d.length;g<b;)d[g].ind==o&&(!c[g]||c[g]===!0?(this.buildItem(g),this.addPendingElement(e)):(a.push(c[g]),c[g].setAsParent(),d[g].parent!==void 0?this.buildElementParenting(e,d[g].parent,a):e.setHierarchy(a))),g+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var o,a=e.length;for(o=0;o<a;o+=1)if(e[o].xt){var c=this.createComp(e[o]);c.initExpressions(),this.globalData.projectInterface.registerComposition(c)}},BaseRenderer.prototype.getElementById=function(e){var o,a=this.elements.length;for(o=0;o<a;o+=1)if(this.elements[o].data.ind===e)return this.elements[o];return null},BaseRenderer.prototype.getElementByPath=function(e){var o=e.shift(),a;if(typeof o=="number")a=this.elements[o];else{var c,d=this.elements.length;for(c=0;c<d;c+=1)if(this.elements[c].data.nm===o){a=this.elements[c];break}}return e.length===0?a:a.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,o){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,o),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var o=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:o,localMat:o,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var o,a=this.finalTransform.mat,c=0,d=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;c<d;){if(this.hierarchy[c].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}c+=1}if(this.finalTransform._matMdf)for(o=this.finalTransform.mProp.v.props,a.cloneFromProps(o),c=0;c<d;c+=1)a.multiply(this.hierarchy[c].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var o=0,a=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;o<a;)this.localTransforms[o]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[o]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),o+=1;if(this.finalTransform._localMatMdf){var c=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(c),o=1;o<a;o+=1){var d=this.localTransforms[o].matrix;c.multiply(d)}c.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var g=this.finalTransform.localOpacity;for(o=0;o<a;o+=1)g*=this.localTransforms[o].opacity*.01;this.finalTransform.localOpacity=g}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var o=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(o.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var a=0,c=o.length;for(a=0;a<c;a+=1)this.localTransforms.push(o[a])}}},globalToLocal:function(o){var a=[];a.push(this.finalTransform);for(var c=!0,d=this.comp;c;)d.finalTransform?(d.data.hasMask&&a.splice(0,0,d.finalTransform),d=d.comp):c=!1;var g,b=a.length,j;for(g=0;g<b;g+=1)j=a[g].mat.applyToPointArray(0,0,0),o=[o[0]-j[0],o[1]-j[1],0];return o},mHelper:new Matrix};function MaskElement(e,o,a){this.data=e,this.element=o,this.globalData=a,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var c=this.globalData.defs,d,g=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(g),this.solidPath="";var b,j=this.masksProperties,$=0,_e=[],st,rt,ut=createElementID(),gt,yt,wt,Ct,Pt="clipPath",At="clip-path";for(d=0;d<g;d+=1)if((j[d].mode!=="a"&&j[d].mode!=="n"||j[d].inv||j[d].o.k!==100||j[d].o.x)&&(Pt="mask",At="mask"),(j[d].mode==="s"||j[d].mode==="i")&&$===0?(gt=createNS("rect"),gt.setAttribute("fill","#ffffff"),gt.setAttribute("width",this.element.comp.data.w||0),gt.setAttribute("height",this.element.comp.data.h||0),_e.push(gt)):gt=null,b=createNS("path"),j[d].mode==="n")this.viewData[d]={op:PropertyFactory.getProp(this.element,j[d].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,j[d],3),elem:b,lastPath:""},c.appendChild(b);else{$+=1,b.setAttribute("fill",j[d].mode==="s"?"#000000":"#ffffff"),b.setAttribute("clip-rule","nonzero");var Tt;if(j[d].x.k!==0?(Pt="mask",At="mask",Ct=PropertyFactory.getProp(this.element,j[d].x,0,null,this.element),Tt=createElementID(),yt=createNS("filter"),yt.setAttribute("id",Tt),wt=createNS("feMorphology"),wt.setAttribute("operator","erode"),wt.setAttribute("in","SourceGraphic"),wt.setAttribute("radius","0"),yt.appendChild(wt),c.appendChild(yt),b.setAttribute("stroke",j[d].mode==="s"?"#000000":"#ffffff")):(wt=null,Ct=null),this.storedData[d]={elem:b,x:Ct,expan:wt,lastPath:"",lastOperator:"",filterId:Tt,lastRadius:0},j[d].mode==="i"){rt=_e.length;var kt=createNS("g");for(st=0;st<rt;st+=1)kt.appendChild(_e[st]);var It=createNS("mask");It.setAttribute("mask-type","alpha"),It.setAttribute("id",ut+"_"+$),It.appendChild(b),c.appendChild(It),kt.setAttribute("mask","url("+getLocationHref()+"#"+ut+"_"+$+")"),_e.length=0,_e.push(kt)}else _e.push(b);j[d].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[d]={elem:b,lastPath:"",op:PropertyFactory.getProp(this.element,j[d].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,j[d],3),invRect:gt},this.viewData[d].prop.k||this.drawPath(j[d],this.viewData[d].prop.v,this.viewData[d])}for(this.maskElement=createNS(Pt),g=_e.length,d=0;d<g;d+=1)this.maskElement.appendChild(_e[d]);$>0&&(this.maskElement.setAttribute("id",ut),this.element.maskedElement.setAttribute(At,"url("+getLocationHref()+"#"+ut+")"),c.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var o=this.element.finalTransform.mat,a,c=this.masksProperties.length;for(a=0;a<c;a+=1)if((this.viewData[a].prop._mdf||e)&&this.drawPath(this.masksProperties[a],this.viewData[a].prop.v,this.viewData[a]),(this.viewData[a].op._mdf||e)&&this.viewData[a].elem.setAttribute("fill-opacity",this.viewData[a].op.v),this.masksProperties[a].mode!=="n"&&(this.viewData[a].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[a].invRect.setAttribute("transform",o.getInverseMatrix().to2dCSS()),this.storedData[a].x&&(this.storedData[a].x._mdf||e))){var d=this.storedData[a].expan;this.storedData[a].x.v<0?(this.storedData[a].lastOperator!=="erode"&&(this.storedData[a].lastOperator="erode",this.storedData[a].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[a].filterId+")")),d.setAttribute("radius",-this.storedData[a].x.v)):(this.storedData[a].lastOperator!=="dilate"&&(this.storedData[a].lastOperator="dilate",this.storedData[a].elem.setAttribute("filter",null)),this.storedData[a].elem.setAttribute("stroke-width",this.storedData[a].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" ",e},MaskElement.prototype.drawPath=function(e,o,a){var c=" M"+o.v[0][0]+","+o.v[0][1],d,g;for(g=o._length,d=1;d<g;d+=1)c+=" C"+o.o[d-1][0]+","+o.o[d-1][1]+" "+o.i[d][0]+","+o.i[d][1]+" "+o.v[d][0]+","+o.v[d][1];if(o.c&&g>1&&(c+=" C"+o.o[d-1][0]+","+o.o[d-1][1]+" "+o.i[0][0]+","+o.i[0][1]+" "+o.v[0][0]+","+o.v[0][1]),a.lastPath!==c){var b="";a.elem&&(o.c&&(b=e.inv?this.solidPath+c:c),a.elem.setAttribute("d",b)),a.lastPath=c}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={};e.createFilter=o,e.createAlphaToLuminanceFilter=a;function o(c,d){var g=createNS("filter");return g.setAttribute("id",c),d!==!0&&(g.setAttribute("filterUnits","objectBoundingBox"),g.setAttribute("x","0%"),g.setAttribute("y","0%"),g.setAttribute("width","100%"),g.setAttribute("height","100%")),g}function a(){var c=createNS("feColorMatrix");return c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),c}return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var o,a="SourceGraphic",c=e.data.ef?e.data.ef.length:0,d=createElementID(),g=filtersFactory.createFilter(d,!0),b=0;this.filters=[];var j;for(o=0;o<c;o+=1){j=null;var $=e.data.ef[o].ty;if(registeredEffects$1[$]){var _e=registeredEffects$1[$].effect;j=new _e(g,e.effectsManager.effectElements[o],e,idPrefix+b,a),a=idPrefix+b,registeredEffects$1[$].countsAsEffect&&(b+=1)}j&&this.filters.push(j)}b&&(e.globalData.defs.appendChild(g),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+d+")")),this.filters.length&&e.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(e){var o,a=this.filters.length;for(o=0;o<a;o+=1)this.filters[o].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var o,a=this.filters.length,c=[];for(o=0;o<a;o+=1)this.filters[o].type===e&&c.push(this.filters[o]);return c};function registerEffect$1(e,o,a){registeredEffects$1[e]={effect:o,countsAsEffect:a}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var o=null;if(this.data.td){this.matteMasks={};var a=createNS("g");a.setAttribute("id",this.layerId),a.appendChild(this.layerElement),o=a,this.globalData.defs.appendChild(a)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),o=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var c=createNS("clipPath"),d=createNS("path");d.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var g=createElementID();if(c.setAttribute("id",g),c.appendChild(d),this.globalData.defs.appendChild(c),this.checkMasks()){var b=createNS("g");b.setAttribute("clip-path","url("+getLocationHref()+"#"+g+")"),b.appendChild(this.layerElement),this.transformedElement=b,o?o.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+g+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(o){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[o]){var a=this.layerId+"_"+o,c,d,g,b;if(o===1||o===3){var j=createNS("mask");j.setAttribute("id",a),j.setAttribute("mask-type",o===3?"luminance":"alpha"),g=createNS("use"),g.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),j.appendChild(g),this.globalData.defs.appendChild(j),!featureSupport.maskType&&o===1&&(j.setAttribute("mask-type","luminance"),c=createElementID(),d=filtersFactory.createFilter(c),this.globalData.defs.appendChild(d),d.appendChild(filtersFactory.createAlphaToLuminanceFilter()),b=createNS("g"),b.appendChild(g),j.appendChild(b),b.setAttribute("filter","url("+getLocationHref()+"#"+c+")"))}else if(o===2){var $=createNS("mask");$.setAttribute("id",a),$.setAttribute("mask-type","alpha");var _e=createNS("g");$.appendChild(_e),c=createElementID(),d=filtersFactory.createFilter(c);var st=createNS("feComponentTransfer");st.setAttribute("in","SourceGraphic"),d.appendChild(st);var rt=createNS("feFuncA");rt.setAttribute("type","table"),rt.setAttribute("tableValues","1.0 0.0"),st.appendChild(rt),this.globalData.defs.appendChild(d);var ut=createNS("rect");ut.setAttribute("width",this.comp.data.w),ut.setAttribute("height",this.comp.data.h),ut.setAttribute("x","0"),ut.setAttribute("y","0"),ut.setAttribute("fill","#ffffff"),ut.setAttribute("opacity","0"),_e.setAttribute("filter","url("+getLocationHref()+"#"+c+")"),_e.appendChild(ut),g=createNS("use"),g.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),_e.appendChild(g),featureSupport.maskType||($.setAttribute("mask-type","luminance"),d.appendChild(filtersFactory.createAlphaToLuminanceFilter()),b=createNS("g"),_e.appendChild(ut),b.appendChild(this.layerElement),_e.appendChild(b)),this.globalData.defs.appendChild($)}this.matteMasks[o]=a}return this.matteMasks[o]},setMatte:function(o){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+o+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(o){this.hierarchy=o},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var e={initElement:function(a,c,d){this.initFrame(),this.initBaseData(a,c,d),this.initTransform(a,c,d),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var a=this.baseElement||this.layerElement;a.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var a=this.baseElement||this.layerElement;a.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(a){this._mdf=!1,this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(e)],RenderableDOMElement)})();function IImageElement(e,o,a){this.assetData=o.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=o.slotManager.getProp(this.assetData)),this.initElement(e,o,a),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(e,o){this.elem=e,this.pos=o}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(o){var a,c=this.shapeModifiers.length;for(a=0;a<c;a+=1)this.shapeModifiers[a].addShape(o)},isShapeInAnimatedModifiers:function(o){for(var a=0,c=this.shapeModifiers.length;a<c;)if(this.shapeModifiers[a].isAnimatedWithShape(o))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var o,a=this.shapes.length;for(o=0;o<a;o+=1)this.shapes[o].sh.reset();a=this.shapeModifiers.length;var c;for(o=a-1;o>=0&&(c=this.shapeModifiers[o].processShapes(this._isFirstFrame),!c);o-=1);}},searchProcessedElement:function(o){for(var a=this.processedElements,c=0,d=a.length;c<d;){if(a[c].elem===o)return a[c].pos;c+=1}return 0},addProcessedElement:function(o,a){for(var c=this.processedElements,d=c.length;d;)if(d-=1,c[d].elem===o){c[d].pos=a;return}c.push(new ProcessedElement(o,a))},prepareFrame:function(o){this.prepareRenderableFrame(o),this.prepareProperties(o,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,o,a){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=a,this.lvl=o,this._isAnimated=!!a.k;for(var c=0,d=e.length;c<d;){if(e[c].mProps.dynamicProperties.length){this._isAnimated=!0;break}c+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(e,o){this.data=e,this.type=e.ty,this.d="",this.lvl=o,this._mdf=!1,this.closed=e.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(e,o,a,c){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(o.length),this.renderer=a,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",o.length?o.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(c);var d,g=o.length||0,b;for(d=0;d<g;d+=1)b=PropertyFactory.getProp(e,o[d].v,0,0,this),this.k=b.k||this.k,this.dataProps[d]={n:o[d].n,p:b};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(e){if(!(this.elem.globalData.frameId===this.frameId&&!e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var o=0,a=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),o=0;o<a;o+=1)this.dataProps[o].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[o].p.v:this.dashArray[o]=this.dataProps[o].p.v:this.dashoffset[0]=this.dataProps[o].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(e,o,a){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,o.o,0,.01,this),this.w=PropertyFactory.getProp(e,o.w,0,null,this),this.d=new DashProperty(e,o.d||{},"svg",this),this.c=PropertyFactory.getProp(e,o.c,1,255,this),this.style=a,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(e,o,a){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,o.o,0,.01,this),this.c=PropertyFactory.getProp(e,o.c,1,255,this),this.style=a}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(e,o,a){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=a}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(e,o,a){this.data=o,this.c=createTypedArray("uint8c",o.p*4);var c=o.k.k[0].s?o.k.k[0].s.length-o.p*4:o.k.k.length-o.p*4;this.o=createTypedArray("float32",c),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=c,this.initDynamicPropertyContainer(a),this.prop=PropertyFactory.getProp(e,o.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(e,o){for(var a=0,c=this.o.length/2,d;a<c;){if(d=Math.abs(e[a*4]-e[o*4+a*2]),d>.01)return!1;a+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,o=this.data.k.k.length;e<o;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var o,a=this.data.p*4,c,d;for(o=0;o<a;o+=1)c=o%4===0?100:255,d=Math.round(this.prop.v[o]*c),this.c[o]!==d&&(this.c[o]=d,this._cmdf=!e);if(this.o.length)for(a=this.prop.v.length,o=this.data.p*4;o<a;o+=1)c=o%2===0?100:1,d=o%2===0?Math.round(this.prop.v[o]*100):this.prop.v[o],this.o[o-this.data.p*4]!==d&&(this.o[o-this.data.p*4]=d,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(e,o,a){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,o,a)}SVGGradientFillStyleData.prototype.initGradientData=function(e,o,a){this.o=PropertyFactory.getProp(e,o.o,0,.01,this),this.s=PropertyFactory.getProp(e,o.s,1,null,this),this.e=PropertyFactory.getProp(e,o.e,1,null,this),this.h=PropertyFactory.getProp(e,o.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,o.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,o.g,this),this.style=a,this.stops=[],this.setGradientData(a.pElem,o),this.setGradientOpacity(o,a),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,o){var a=createElementID(),c=createNS(o.t===1?"linearGradient":"radialGradient");c.setAttribute("id",a),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse");var d=[],g,b,j;for(j=o.g.p*4,b=0;b<j;b+=4)g=createNS("stop"),c.appendChild(g),d.push(g);e.setAttribute(o.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+a+")"),this.gf=c,this.cst=d},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,o){if(this.g._hasOpacity&&!this.g._collapsable){var a,c,d,g=createNS("mask"),b=createNS("path");g.appendChild(b);var j=createElementID(),$=createElementID();g.setAttribute("id",$);var _e=createNS(e.t===1?"linearGradient":"radialGradient");_e.setAttribute("id",j),_e.setAttribute("spreadMethod","pad"),_e.setAttribute("gradientUnits","userSpaceOnUse"),d=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var st=this.stops;for(c=e.g.p*4;c<d;c+=2)a=createNS("stop"),a.setAttribute("stop-color","rgb(255,255,255)"),_e.appendChild(a),st.push(a);b.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+j+")"),e.ty==="gs"&&(b.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),b.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),e.lj===1&&b.setAttribute("stroke-miterlimit",e.ml)),this.of=_e,this.ms=g,this.ost=st,this.maskId=$,o.msElem=b}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(e,o,a){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,o.w,0,null,this),this.d=new DashProperty(e,o.d||{},"svg",this),this.initGradientData(e,o,a),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,o,a){this.transform={mProps:e,op:o,container:a},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(o,a,c,d){if(a===0)return"";var g=o.o,b=o.i,j=o.v,$,_e=" M"+d.applyToPointStringified(j[0][0],j[0][1]);for($=1;$<a;$+=1)_e+=" C"+d.applyToPointStringified(g[$-1][0],g[$-1][1])+" "+d.applyToPointStringified(b[$][0],b[$][1])+" "+d.applyToPointStringified(j[$][0],j[$][1]);return c&&a&&(_e+=" C"+d.applyToPointStringified(g[$-1][0],g[$-1][1])+" "+d.applyToPointStringified(b[0][0],b[0][1])+" "+d.applyToPointStringified(j[0][0],j[0][1]),_e+="z"),_e},SVGElementsRenderer=function(){var e=new Matrix,o=new Matrix,a={createRenderFunction:c};function c(rt){switch(rt.ty){case"fl":return j;case"gf":return _e;case"gs":return $;case"st":return st;case"sh":case"el":case"rc":case"sr":return b;case"tr":return d;case"no":return g;default:return null}}function d(rt,ut,gt){(gt||ut.transform.op._mdf)&&ut.transform.container.setAttribute("opacity",ut.transform.op.v),(gt||ut.transform.mProps._mdf)&&ut.transform.container.setAttribute("transform",ut.transform.mProps.v.to2dCSS())}function g(){}function b(rt,ut,gt){var yt,wt,Ct,Pt,At,Tt,kt=ut.styles.length,It=ut.lvl,Lt,Ft,Nt,Ht;for(Tt=0;Tt<kt;Tt+=1){if(Pt=ut.sh._mdf||gt,ut.styles[Tt].lvl<It){for(Ft=o.reset(),Nt=It-ut.styles[Tt].lvl,Ht=ut.transformers.length-1;!Pt&&Nt>0;)Pt=ut.transformers[Ht].mProps._mdf||Pt,Nt-=1,Ht-=1;if(Pt)for(Nt=It-ut.styles[Tt].lvl,Ht=ut.transformers.length-1;Nt>0;)Ft.multiply(ut.transformers[Ht].mProps.v),Nt-=1,Ht-=1}else Ft=e;if(Lt=ut.sh.paths,wt=Lt._length,Pt){for(Ct="",yt=0;yt<wt;yt+=1)At=Lt.shapes[yt],At&&At._length&&(Ct+=buildShapeString(At,At._length,At.c,Ft));ut.caches[Tt]=Ct}else Ct=ut.caches[Tt];ut.styles[Tt].d+=rt.hd===!0?"":Ct,ut.styles[Tt]._mdf=Pt||ut.styles[Tt]._mdf}}function j(rt,ut,gt){var yt=ut.style;(ut.c._mdf||gt)&&yt.pElem.setAttribute("fill","rgb("+bmFloor(ut.c.v[0])+","+bmFloor(ut.c.v[1])+","+bmFloor(ut.c.v[2])+")"),(ut.o._mdf||gt)&&yt.pElem.setAttribute("fill-opacity",ut.o.v)}function $(rt,ut,gt){_e(rt,ut,gt),st(rt,ut,gt)}function _e(rt,ut,gt){var yt=ut.gf,wt=ut.g._hasOpacity,Ct=ut.s.v,Pt=ut.e.v;if(ut.o._mdf||gt){var At=rt.ty==="gf"?"fill-opacity":"stroke-opacity";ut.style.pElem.setAttribute(At,ut.o.v)}if(ut.s._mdf||gt){var Tt=rt.t===1?"x1":"cx",kt=Tt==="x1"?"y1":"cy";yt.setAttribute(Tt,Ct[0]),yt.setAttribute(kt,Ct[1]),wt&&!ut.g._collapsable&&(ut.of.setAttribute(Tt,Ct[0]),ut.of.setAttribute(kt,Ct[1]))}var It,Lt,Ft,Nt;if(ut.g._cmdf||gt){It=ut.cst;var Ht=ut.g.c;for(Ft=It.length,Lt=0;Lt<Ft;Lt+=1)Nt=It[Lt],Nt.setAttribute("offset",Ht[Lt*4]+"%"),Nt.setAttribute("stop-color","rgb("+Ht[Lt*4+1]+","+Ht[Lt*4+2]+","+Ht[Lt*4+3]+")")}if(wt&&(ut.g._omdf||gt)){var dr=ut.g.o;for(ut.g._collapsable?It=ut.cst:It=ut.ost,Ft=It.length,Lt=0;Lt<Ft;Lt+=1)Nt=It[Lt],ut.g._collapsable||Nt.setAttribute("offset",dr[Lt*2]+"%"),Nt.setAttribute("stop-opacity",dr[Lt*2+1])}if(rt.t===1)(ut.e._mdf||gt)&&(yt.setAttribute("x2",Pt[0]),yt.setAttribute("y2",Pt[1]),wt&&!ut.g._collapsable&&(ut.of.setAttribute("x2",Pt[0]),ut.of.setAttribute("y2",Pt[1])));else{var hs;if((ut.s._mdf||ut.e._mdf||gt)&&(hs=Math.sqrt(Math.pow(Ct[0]-Pt[0],2)+Math.pow(Ct[1]-Pt[1],2)),yt.setAttribute("r",hs),wt&&!ut.g._collapsable&&ut.of.setAttribute("r",hs)),ut.e._mdf||ut.h._mdf||ut.a._mdf||gt){hs||(hs=Math.sqrt(Math.pow(Ct[0]-Pt[0],2)+Math.pow(Ct[1]-Pt[1],2)));var us=Math.atan2(Pt[1]-Ct[1],Pt[0]-Ct[0]),hn=ut.h.v;hn>=1?hn=.99:hn<=-1&&(hn=-.99);var un=hs*hn,bo=Math.cos(us+ut.a.v)*un+Ct[0],_s=Math.sin(us+ut.a.v)*un+Ct[1];yt.setAttribute("fx",bo),yt.setAttribute("fy",_s),wt&&!ut.g._collapsable&&(ut.of.setAttribute("fx",bo),ut.of.setAttribute("fy",_s))}}}function st(rt,ut,gt){var yt=ut.style,wt=ut.d;wt&&(wt._mdf||gt)&&wt.dashStr&&(yt.pElem.setAttribute("stroke-dasharray",wt.dashStr),yt.pElem.setAttribute("stroke-dashoffset",wt.dashoffset[0])),ut.c&&(ut.c._mdf||gt)&&yt.pElem.setAttribute("stroke","rgb("+bmFloor(ut.c.v[0])+","+bmFloor(ut.c.v[1])+","+bmFloor(ut.c.v[2])+")"),(ut.o._mdf||gt)&&yt.pElem.setAttribute("stroke-opacity",ut.o.v),(ut.w._mdf||gt)&&(yt.pElem.setAttribute("stroke-width",ut.w.v),yt.msElem&&yt.msElem.setAttribute("stroke-width",ut.w.v))}return a}();function SVGShapeElement(e,o,a){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,o,a),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,o=this.shapes.length,a,c,d=this.stylesList.length,g,b=[],j=!1;for(c=0;c<d;c+=1){for(g=this.stylesList[c],j=!1,b.length=0,e=0;e<o;e+=1)a=this.shapes[e],a.styles.indexOf(g)!==-1&&(b.push(a),j=a._isAnimated||j);b.length>1&&j&&this.setShapesAsAnimated(b)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var o,a=e.length;for(o=0;o<a;o+=1)e[o].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,o){var a,c=new SVGStyleData(e,o),d=c.pElem;if(e.ty==="st")a=new SVGStrokeStyleData(this,e,c);else if(e.ty==="fl")a=new SVGFillStyleData(this,e,c);else if(e.ty==="gf"||e.ty==="gs"){var g=e.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;a=new g(this,e,c),this.globalData.defs.appendChild(a.gf),a.maskId&&(this.globalData.defs.appendChild(a.ms),this.globalData.defs.appendChild(a.of),d.setAttribute("mask","url("+getLocationHref()+"#"+a.maskId+")"))}else e.ty==="no"&&(a=new SVGNoStyleData(this,e,c));return(e.ty==="st"||e.ty==="gs")&&(d.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),d.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),d.setAttribute("fill-opacity","0"),e.lj===1&&d.setAttribute("stroke-miterlimit",e.ml)),e.r===2&&d.setAttribute("fill-rule","evenodd"),e.ln&&d.setAttribute("id",e.ln),e.cl&&d.setAttribute("class",e.cl),e.bm&&(d.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(c),this.addToAnimatedContents(e,a),a},SVGShapeElement.prototype.createGroupElement=function(e){var o=new ShapeGroupData;return e.ln&&o.gr.setAttribute("id",e.ln),e.cl&&o.gr.setAttribute("class",e.cl),e.bm&&(o.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),o},SVGShapeElement.prototype.createTransformElement=function(e,o){var a=TransformPropertyFactory.getTransformProperty(this,e,this),c=new SVGTransformData(a,a.o,o);return this.addToAnimatedContents(e,c),c},SVGShapeElement.prototype.createShapeElement=function(e,o,a){var c=4;e.ty==="rc"?c=5:e.ty==="el"?c=6:e.ty==="sr"&&(c=7);var d=ShapePropertyFactory.getShapeProp(this,e,c,this),g=new SVGShapeData(o,a,d);return this.shapes.push(g),this.addShapeToModifiers(g),this.addToAnimatedContents(e,g),g},SVGShapeElement.prototype.addToAnimatedContents=function(e,o){for(var a=0,c=this.animatedContents.length;a<c;){if(this.animatedContents[a].element===o)return;a+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:o,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var o=e.styles,a,c=this.stylesList.length;for(a=0;a<c;a+=1)this.stylesList[a].closed||o.push(this.stylesList[a])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,o=this.itemsData.length;for(e=0;e<o;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),o=this.dynamicProperties.length,e=0;e<o;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,o,a,c,d,g,b){var j=[].concat(g),$,_e=e.length-1,st,rt,ut=[],gt=[],yt,wt,Ct;for($=_e;$>=0;$-=1){if(Ct=this.searchProcessedElement(e[$]),Ct?o[$]=a[Ct-1]:e[$]._render=b,e[$].ty==="fl"||e[$].ty==="st"||e[$].ty==="gf"||e[$].ty==="gs"||e[$].ty==="no")Ct?o[$].style.closed=!1:o[$]=this.createStyleElement(e[$],d),e[$]._render&&o[$].style.pElem.parentNode!==c&&c.appendChild(o[$].style.pElem),ut.push(o[$].style);else if(e[$].ty==="gr"){if(!Ct)o[$]=this.createGroupElement(e[$]);else for(rt=o[$].it.length,st=0;st<rt;st+=1)o[$].prevViewData[st]=o[$].it[st];this.searchShapes(e[$].it,o[$].it,o[$].prevViewData,o[$].gr,d+1,j,b),e[$]._render&&o[$].gr.parentNode!==c&&c.appendChild(o[$].gr)}else e[$].ty==="tr"?(Ct||(o[$]=this.createTransformElement(e[$],c)),yt=o[$].transform,j.push(yt)):e[$].ty==="sh"||e[$].ty==="rc"||e[$].ty==="el"||e[$].ty==="sr"?(Ct||(o[$]=this.createShapeElement(e[$],j,d)),this.setElementStyles(o[$])):e[$].ty==="tm"||e[$].ty==="rd"||e[$].ty==="ms"||e[$].ty==="pb"||e[$].ty==="zz"||e[$].ty==="op"?(Ct?(wt=o[$],wt.closed=!1):(wt=ShapeModifiers.getModifier(e[$].ty),wt.init(this,e[$]),o[$]=wt,this.shapeModifiers.push(wt)),gt.push(wt)):e[$].ty==="rp"&&(Ct?(wt=o[$],wt.closed=!0):(wt=ShapeModifiers.getModifier(e[$].ty),o[$]=wt,wt.init(this,e,$,o),this.shapeModifiers.push(wt),b=!1),gt.push(wt));this.addProcessedElement(e[$],$+1)}for(_e=ut.length,$=0;$<_e;$+=1)ut[$].closed=!0;for(_e=gt.length,$=0;$<_e;$+=1)gt[$].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var e,o=this.stylesList.length;for(e=0;e<o;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<o;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,o=this.animatedContents.length,a;for(e=0;e<o;e+=1)a=this.animatedContents[e],(this._isFirstFrame||a.element._isAnimated)&&a.data!==!0&&a.fn(a.data,a.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(e,o,a,c,d,g){this.o=e,this.sw=o,this.sc=a,this.fc=c,this.m=d,this.p=g,this._mdf={o:!0,sw:!!o,sc:!!a,fc:!!c,m:!0,p:!0}}LetterProps.prototype.update=function(e,o,a,c,d,g){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var b=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,b=!0),this.sw!==o&&(this.sw=o,this._mdf.sw=!0,b=!0),this.sc!==a&&(this.sc=a,this._mdf.sc=!0,b=!0),this.fc!==c&&(this.fc=c,this._mdf.fc=!0,b=!0),this.m!==d&&(this.m=d,this._mdf.m=!0,b=!0),g.length&&(this.p[0]!==g[0]||this.p[1]!==g[1]||this.p[4]!==g[4]||this.p[5]!==g[5]||this.p[12]!==g[12]||this.p[13]!==g[13])&&(this.p=g,this._mdf.p=!0,b=!0),b};function TextProperty(e,o){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,o.d&&o.d.sid&&(o.d=e.globalData.slotManager.getProp(o.d)),this.data=o,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!e)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var o=this.currentData,a=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var c,d=this.effectsSequence.length,g=e||this.data.d.k[this.keysIndex].s;for(c=0;c<d;c+=1)a!==this.keysIndex?g=this.effectsSequence[c](g,g.t):g=this.effectsSequence[c](this.currentData,g.t);o!==g&&this.setCurrentData(g),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,o=this.elem.comp.renderedFrame,a=0,c=e.length;a<=c-1&&!(a===c-1||e[a+1].t>o);)a+=1;return this.keysIndex!==a&&(this.keysIndex=a),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var o=[],a=0,c=e.length,d,g,b=!1,j=!1,$="";a<c;)b=j,j=!1,d=e.charCodeAt(a),$=e.charAt(a),FontManager.isCombinedCharacter(d)?b=!0:d>=55296&&d<=56319?FontManager.isRegionalFlag(e,a)?$=e.substr(a,14):(g=e.charCodeAt(a+1),g>=56320&&g<=57343&&(FontManager.isModifier(d,g)?($=e.substr(a,2),b=!0):FontManager.isFlagEmoji(e.substr(a,4))?$=e.substr(a,4):$=e.substr(a,2))):d>56319?(g=e.charCodeAt(a+1),FontManager.isVariationSelector(d)&&(b=!0)):FontManager.isZeroWidthJoiner(d)&&(b=!0,j=!0),b?(o[o.length-1]+=$,b=!1):o.push($),a+=$.length;return o},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var o=this.elem.globalData.fontManager,a=this.data,c=[],d,g,b,j=0,$,_e=a.m.g,st=0,rt=0,ut=0,gt=[],yt=0,wt=0,Ct,Pt,At=o.getFontByName(e.f),Tt,kt=0,It=getFontProperties(At);e.fWeight=It.weight,e.fStyle=It.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),g=e.finalText.length,e.finalLineHeight=e.lh;var Lt=e.tr/1e3*e.finalSize,Ft;if(e.sz)for(var Nt=!0,Ht=e.sz[0],dr=e.sz[1],hs,us;Nt;){us=this.buildFinalText(e.t),hs=0,yt=0,g=us.length,Lt=e.tr/1e3*e.finalSize;var hn=-1;for(d=0;d<g;d+=1)Ft=us[d].charCodeAt(0),b=!1,us[d]===" "?hn=d:(Ft===13||Ft===3)&&(yt=0,b=!0,hs+=e.finalLineHeight||e.finalSize*1.2),o.chars?(Tt=o.getCharData(us[d],At.fStyle,At.fFamily),kt=b?0:Tt.w*e.finalSize/100):kt=o.measureText(us[d],e.f,e.finalSize),yt+kt>Ht&&us[d]!==" "?(hn===-1?g+=1:d=hn,hs+=e.finalLineHeight||e.finalSize*1.2,us.splice(d,hn===d?1:0,"\r"),hn=-1,yt=0):(yt+=kt,yt+=Lt);hs+=At.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&dr<hs?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=us,g=e.finalText.length,Nt=!1)}yt=-Lt,kt=0;var un=0,bo;for(d=0;d<g;d+=1)if(b=!1,bo=e.finalText[d],Ft=bo.charCodeAt(0),Ft===13||Ft===3?(un=0,gt.push(yt),wt=yt>wt?yt:wt,yt=-2*Lt,$="",b=!0,ut+=1):$=bo,o.chars?(Tt=o.getCharData(bo,At.fStyle,o.getFontByName(e.f).fFamily),kt=b?0:Tt.w*e.finalSize/100):kt=o.measureText($,e.f,e.finalSize),bo===" "?un+=kt+Lt:(yt+=kt+Lt+un,un=0),c.push({l:kt,an:kt,add:st,n:b,anIndexes:[],val:$,line:ut,animatorJustifyOffset:0}),_e==2){if(st+=kt,$===""||$===" "||d===g-1){for(($===""||$===" ")&&(st-=kt);rt<=d;)c[rt].an=st,c[rt].ind=j,c[rt].extra=kt,rt+=1;j+=1,st=0}}else if(_e==3){if(st+=kt,$===""||d===g-1){for($===""&&(st-=kt);rt<=d;)c[rt].an=st,c[rt].ind=j,c[rt].extra=kt,rt+=1;st=0,j+=1}}else c[j].ind=j,c[j].extra=0,j+=1;if(e.l=c,wt=yt>wt?yt:wt,gt.push(yt),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=wt,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=gt;var _s=a.a,gn,Gr;Pt=_s.length;var ds,Zn,Nn=[];for(Ct=0;Ct<Pt;Ct+=1){for(gn=_s[Ct],gn.a.sc&&(e.strokeColorAnim=!0),gn.a.sw&&(e.strokeWidthAnim=!0),(gn.a.fc||gn.a.fh||gn.a.fs||gn.a.fb)&&(e.fillColorAnim=!0),Zn=0,ds=gn.s.b,d=0;d<g;d+=1)Gr=c[d],Gr.anIndexes[Ct]=Zn,(ds==1&&Gr.val!==""||ds==2&&Gr.val!==""&&Gr.val!==" "||ds==3&&(Gr.n||Gr.val==" "||d==g-1)||ds==4&&(Gr.n||d==g-1))&&(gn.s.rn===1&&Nn.push(Zn),Zn+=1);a.a[Ct].s.totalChars=Zn;var Qn=-1,bu;if(gn.s.rn===1)for(d=0;d<g;d+=1)Gr=c[d],Qn!=Gr.anIndexes[Ct]&&(Qn=Gr.anIndexes[Ct],bu=Nn.splice(Math.floor(Math.random()*Nn.length),1)[0]),Gr.anIndexes[Ct]=bu}e.yOffset=e.finalLineHeight||e.finalSize*1.2,e.ls=e.ls||0,e.ascent=At.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,o){o=o===void 0?this.keysIndex:o;var a=this.copyData({},this.data.d.k[o].s);a=this.copyData(a,e),this.data.d.k[o].s=a,this.recalculate(o),this.setCurrentData(a),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var o=this.data.d.k[e].s;o.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(o)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,o=Math.min,a=Math.floor;function c(g,b){this._currentTextLength=-1,this.k=!1,this.data=b,this.elem=g,this.comp=g.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(g),this.s=PropertyFactory.getProp(g,b.s||{k:0},0,0,this),"e"in b?this.e=PropertyFactory.getProp(g,b.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(g,b.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(g,b.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(g,b.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(g,b.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(g,b.a,0,.01,this),this.dynamicProperties.length||this.getValue()}c.prototype={getMult:function(b){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var j=0,$=0,_e=1,st=1;this.ne.v>0?j=this.ne.v/100:$=-this.ne.v/100,this.xe.v>0?_e=1-this.xe.v/100:st=1+this.xe.v/100;var rt=BezierFactory.getBezierEasing(j,$,_e,st).get,ut=0,gt=this.finalS,yt=this.finalE,wt=this.data.sh;if(wt===2)yt===gt?ut=b>=yt?1:0:ut=e(0,o(.5/(yt-gt)+(b-gt)/(yt-gt),1)),ut=rt(ut);else if(wt===3)yt===gt?ut=b>=yt?0:1:ut=1-e(0,o(.5/(yt-gt)+(b-gt)/(yt-gt),1)),ut=rt(ut);else if(wt===4)yt===gt?ut=0:(ut=e(0,o(.5/(yt-gt)+(b-gt)/(yt-gt),1)),ut<.5?ut*=2:ut=1-2*(ut-.5)),ut=rt(ut);else if(wt===5){if(yt===gt)ut=0;else{var Ct=yt-gt;b=o(e(0,b+.5-gt),yt-gt);var Pt=-Ct/2+b,At=Ct/2;ut=Math.sqrt(1-Pt*Pt/(At*At))}ut=rt(ut)}else wt===6?(yt===gt?ut=0:(b=o(e(0,b+.5-gt),yt-gt),ut=(1+Math.cos(Math.PI+Math.PI*2*b/(yt-gt)))/2),ut=rt(ut)):(b>=a(gt)&&(b-gt<0?ut=e(0,o(o(yt,1)-(gt-b),1)):ut=e(0,o(yt-b,1))),ut=rt(ut));if(this.sm.v!==100){var Tt=this.sm.v*.01;Tt===0&&(Tt=1e-8);var kt=.5-Tt*.5;ut<kt?ut=0:(ut=(ut-kt)/Tt,ut>1&&(ut=1))}return ut*this.a.v},getValue:function(b){this.iterateDynamicProperties(),this._mdf=b||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,b&&this.data.r===2&&(this.e.v=this._currentTextLength);var j=this.data.r===2?1:100/this.data.totalChars,$=this.o.v/j,_e=this.s.v/j+$,st=this.e.v/j+$;if(_e>st){var rt=_e;_e=st,st=rt}this.finalS=_e,this.finalE=st}},extendPrototype([DynamicPropertyContainer],c);function d(g,b,j){return new c(g,b)}return{getTextSelectorProp:d}}();function TextAnimatorDataProperty(e,o,a){var c={propType:!1},d=PropertyFactory.getProp,g=o.a;this.a={r:g.r?d(e,g.r,0,degToRads,a):c,rx:g.rx?d(e,g.rx,0,degToRads,a):c,ry:g.ry?d(e,g.ry,0,degToRads,a):c,sk:g.sk?d(e,g.sk,0,degToRads,a):c,sa:g.sa?d(e,g.sa,0,degToRads,a):c,s:g.s?d(e,g.s,1,.01,a):c,a:g.a?d(e,g.a,1,0,a):c,o:g.o?d(e,g.o,0,.01,a):c,p:g.p?d(e,g.p,1,0,a):c,sw:g.sw?d(e,g.sw,0,0,a):c,sc:g.sc?d(e,g.sc,1,0,a):c,fc:g.fc?d(e,g.fc,1,0,a):c,fh:g.fh?d(e,g.fh,0,0,a):c,fs:g.fs?d(e,g.fs,0,.01,a):c,fb:g.fb?d(e,g.fb,0,.01,a):c,t:g.t?d(e,g.t,0,0,a):c},this.s=TextSelectorProp.getTextSelectorProp(e,o.s,a),this.s.t=o.s.t}function TextAnimatorProperty(e,o,a){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=o,this._elem=a,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(a)}TextAnimatorProperty.prototype.searchProperties=function(){var e,o=this._textData.a.length,a,c=PropertyFactory.getProp;for(e=0;e<o;e+=1)a=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,a,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:c(this._elem,this._textData.p.a,0,0,this),f:c(this._elem,this._textData.p.f,0,0,this),l:c(this._elem,this._textData.p.l,0,0,this),r:c(this._elem,this._textData.p.r,0,0,this),p:c(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=c(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,o){if(this.lettersChangedFlag=o,!(!this._mdf&&!this._isFirstFrame&&!o&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var a=this._moreOptions.alignment.v,c=this._animatorsData,d=this._textData,g=this.mHelper,b=this._renderType,j=this.renderedLetters.length,$,_e,st,rt,ut=e.l,gt,yt,wt,Ct,Pt,At,Tt,kt,It,Lt,Ft,Nt,Ht,dr,hs;if(this._hasMaskedPath){if(hs=this._pathData.m,!this._pathData.n||this._pathData._mdf){var us=hs.v;this._pathData.r.v&&(us=us.reverse()),gt={tLength:0,segments:[]},rt=us._length-1;var hn;for(Nt=0,st=0;st<rt;st+=1)hn=bez.buildBezierData(us.v[st],us.v[st+1],[us.o[st][0]-us.v[st][0],us.o[st][1]-us.v[st][1]],[us.i[st+1][0]-us.v[st+1][0],us.i[st+1][1]-us.v[st+1][1]]),gt.tLength+=hn.segmentLength,gt.segments.push(hn),Nt+=hn.segmentLength;st=rt,hs.v.c&&(hn=bez.buildBezierData(us.v[st],us.v[0],[us.o[st][0]-us.v[st][0],us.o[st][1]-us.v[st][1]],[us.i[0][0]-us.v[0][0],us.i[0][1]-us.v[0][1]]),gt.tLength+=hn.segmentLength,gt.segments.push(hn),Nt+=hn.segmentLength),this._pathData.pi=gt}if(gt=this._pathData.pi,yt=this._pathData.f.v,Tt=0,At=1,Ct=0,Pt=!0,Lt=gt.segments,yt<0&&hs.v.c)for(gt.tLength<Math.abs(yt)&&(yt=-Math.abs(yt)%gt.tLength),Tt=Lt.length-1,It=Lt[Tt].points,At=It.length-1;yt<0;)yt+=It[At].partialLength,At-=1,At<0&&(Tt-=1,It=Lt[Tt].points,At=It.length-1);It=Lt[Tt].points,kt=It[At-1],wt=It[At],Ft=wt.partialLength}rt=ut.length,$=0,_e=0;var un=e.finalSize*1.2*.714,bo=!0,_s,gn,Gr,ds,Zn;ds=c.length;var Nn,Qn=-1,bu,ou,g0,Su=yt,l1=Tt,B0=At,a1=-1,q1,ox,U_,tS,iS,wA,pO,aR,fD="",AA=this.defaultPropsArray,oI;if(e.j===2||e.j===1){var mO=0,sp=0,xu=e.j===2?-.5:-1,ux=0,tA=!0;for(st=0;st<rt;st+=1)if(ut[st].n){for(mO&&(mO+=sp);ux<st;)ut[ux].animatorJustifyOffset=mO,ux+=1;mO=0,tA=!0}else{for(Gr=0;Gr<ds;Gr+=1)_s=c[Gr].a,_s.t.propType&&(tA&&e.j===2&&(sp+=_s.t.v*xu),gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),Nn.length?mO+=_s.t.v*Nn[0]*xu:mO+=_s.t.v*Nn*xu);tA=!1}for(mO&&(mO+=sp);ux<st;)ut[ux].animatorJustifyOffset=mO,ux+=1}for(st=0;st<rt;st+=1){if(g.reset(),q1=1,ut[st].n)$=0,_e+=e.yOffset,_e+=bo?1:0,yt=Su,bo=!1,this._hasMaskedPath&&(Tt=l1,At=B0,It=Lt[Tt].points,kt=It[At-1],wt=It[At],Ft=wt.partialLength,Ct=0),fD="",aR="",wA="",oI="",AA=this.defaultPropsArray;else{if(this._hasMaskedPath){if(a1!==ut[st].line){switch(e.j){case 1:yt+=Nt-e.lineWidths[ut[st].line];break;case 2:yt+=(Nt-e.lineWidths[ut[st].line])/2;break}a1=ut[st].line}Qn!==ut[st].ind&&(ut[Qn]&&(yt+=ut[Qn].extra),yt+=ut[st].an/2,Qn=ut[st].ind),yt+=a[0]*ut[st].an*.005;var au=0;for(Gr=0;Gr<ds;Gr+=1)_s=c[Gr].a,_s.p.propType&&(gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),Nn.length?au+=_s.p.v[0]*Nn[0]:au+=_s.p.v[0]*Nn),_s.a.propType&&(gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),Nn.length?au+=_s.a.v[0]*Nn[0]:au+=_s.a.v[0]*Nn);for(Pt=!0,this._pathData.a.v&&(yt=ut[0].an*.5+(Nt-this._pathData.f.v-ut[0].an*.5-ut[ut.length-1].an*.5)*Qn/(rt-1),yt+=this._pathData.f.v);Pt;)Ct+Ft>=yt+au||!It?(Ht=(yt+au-Ct)/wt.partialLength,ou=kt.point[0]+(wt.point[0]-kt.point[0])*Ht,g0=kt.point[1]+(wt.point[1]-kt.point[1])*Ht,g.translate(-a[0]*ut[st].an*.005,-(a[1]*un)*.01),Pt=!1):It&&(Ct+=wt.partialLength,At+=1,At>=It.length&&(At=0,Tt+=1,Lt[Tt]?It=Lt[Tt].points:hs.v.c?(At=0,Tt=0,It=Lt[Tt].points):(Ct-=wt.partialLength,It=null)),It&&(kt=wt,wt=It[At],Ft=wt.partialLength));bu=ut[st].an/2-ut[st].add,g.translate(-bu,0,0)}else bu=ut[st].an/2-ut[st].add,g.translate(-bu,0,0),g.translate(-a[0]*ut[st].an*.005,-a[1]*un*.01,0);for(Gr=0;Gr<ds;Gr+=1)_s=c[Gr].a,_s.t.propType&&(gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),($!==0||e.j!==0)&&(this._hasMaskedPath?Nn.length?yt+=_s.t.v*Nn[0]:yt+=_s.t.v*Nn:Nn.length?$+=_s.t.v*Nn[0]:$+=_s.t.v*Nn));for(e.strokeWidthAnim&&(U_=e.sw||0),e.strokeColorAnim&&(e.sc?ox=[e.sc[0],e.sc[1],e.sc[2]]:ox=[0,0,0]),e.fillColorAnim&&e.fc&&(tS=[e.fc[0],e.fc[1],e.fc[2]]),Gr=0;Gr<ds;Gr+=1)_s=c[Gr].a,_s.a.propType&&(gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),Nn.length?g.translate(-_s.a.v[0]*Nn[0],-_s.a.v[1]*Nn[1],_s.a.v[2]*Nn[2]):g.translate(-_s.a.v[0]*Nn,-_s.a.v[1]*Nn,_s.a.v[2]*Nn));for(Gr=0;Gr<ds;Gr+=1)_s=c[Gr].a,_s.s.propType&&(gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),Nn.length?g.scale(1+(_s.s.v[0]-1)*Nn[0],1+(_s.s.v[1]-1)*Nn[1],1):g.scale(1+(_s.s.v[0]-1)*Nn,1+(_s.s.v[1]-1)*Nn,1));for(Gr=0;Gr<ds;Gr+=1){if(_s=c[Gr].a,gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),_s.sk.propType&&(Nn.length?g.skewFromAxis(-_s.sk.v*Nn[0],_s.sa.v*Nn[1]):g.skewFromAxis(-_s.sk.v*Nn,_s.sa.v*Nn)),_s.r.propType&&(Nn.length?g.rotateZ(-_s.r.v*Nn[2]):g.rotateZ(-_s.r.v*Nn)),_s.ry.propType&&(Nn.length?g.rotateY(_s.ry.v*Nn[1]):g.rotateY(_s.ry.v*Nn)),_s.rx.propType&&(Nn.length?g.rotateX(_s.rx.v*Nn[0]):g.rotateX(_s.rx.v*Nn)),_s.o.propType&&(Nn.length?q1+=(_s.o.v*Nn[0]-q1)*Nn[0]:q1+=(_s.o.v*Nn-q1)*Nn),e.strokeWidthAnim&&_s.sw.propType&&(Nn.length?U_+=_s.sw.v*Nn[0]:U_+=_s.sw.v*Nn),e.strokeColorAnim&&_s.sc.propType)for(iS=0;iS<3;iS+=1)Nn.length?ox[iS]+=(_s.sc.v[iS]-ox[iS])*Nn[0]:ox[iS]+=(_s.sc.v[iS]-ox[iS])*Nn;if(e.fillColorAnim&&e.fc){if(_s.fc.propType)for(iS=0;iS<3;iS+=1)Nn.length?tS[iS]+=(_s.fc.v[iS]-tS[iS])*Nn[0]:tS[iS]+=(_s.fc.v[iS]-tS[iS])*Nn;_s.fh.propType&&(Nn.length?tS=addHueToRGB(tS,_s.fh.v*Nn[0]):tS=addHueToRGB(tS,_s.fh.v*Nn)),_s.fs.propType&&(Nn.length?tS=addSaturationToRGB(tS,_s.fs.v*Nn[0]):tS=addSaturationToRGB(tS,_s.fs.v*Nn)),_s.fb.propType&&(Nn.length?tS=addBrightnessToRGB(tS,_s.fb.v*Nn[0]):tS=addBrightnessToRGB(tS,_s.fb.v*Nn))}}for(Gr=0;Gr<ds;Gr+=1)_s=c[Gr].a,_s.p.propType&&(gn=c[Gr].s,Nn=gn.getMult(ut[st].anIndexes[Gr],d.a[Gr].s.totalChars),this._hasMaskedPath?Nn.length?g.translate(0,_s.p.v[1]*Nn[0],-_s.p.v[2]*Nn[1]):g.translate(0,_s.p.v[1]*Nn,-_s.p.v[2]*Nn):Nn.length?g.translate(_s.p.v[0]*Nn[0],_s.p.v[1]*Nn[1],-_s.p.v[2]*Nn[2]):g.translate(_s.p.v[0]*Nn,_s.p.v[1]*Nn,-_s.p.v[2]*Nn));if(e.strokeWidthAnim&&(wA=U_<0?0:U_),e.strokeColorAnim&&(pO="rgb("+Math.round(ox[0]*255)+","+Math.round(ox[1]*255)+","+Math.round(ox[2]*255)+")"),e.fillColorAnim&&e.fc&&(aR="rgb("+Math.round(tS[0]*255)+","+Math.round(tS[1]*255)+","+Math.round(tS[2]*255)+")"),this._hasMaskedPath){if(g.translate(0,-e.ls),g.translate(0,a[1]*un*.01+_e,0),this._pathData.p.v){dr=(wt.point[1]-kt.point[1])/(wt.point[0]-kt.point[0]);var C3=Math.atan(dr)*180/Math.PI;wt.point[0]<kt.point[0]&&(C3+=180),g.rotate(-C3*Math.PI/180)}g.translate(ou,g0,0),yt-=a[0]*ut[st].an*.005,ut[st+1]&&Qn!==ut[st+1].ind&&(yt+=ut[st].an/2,yt+=e.tr*.001*e.finalSize)}else{switch(g.translate($,_e,0),e.ps&&g.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:g.translate(ut[st].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[ut[st].line]),0,0);break;case 2:g.translate(ut[st].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[ut[st].line])/2,0,0);break}g.translate(0,-e.ls),g.translate(bu,0,0),g.translate(a[0]*ut[st].an*.005,a[1]*un*.01,0),$+=ut[st].l+e.tr*.001*e.finalSize}b==="html"?fD=g.toCSS():b==="svg"?fD=g.to2dCSS():AA=[g.props[0],g.props[1],g.props[2],g.props[3],g.props[4],g.props[5],g.props[6],g.props[7],g.props[8],g.props[9],g.props[10],g.props[11],g.props[12],g.props[13],g.props[14],g.props[15]],oI=q1}j<=st?(Zn=new LetterProps(oI,wA,pO,aR,fD,AA),this.renderedLetters.push(Zn),j+=1,this.lettersChangedFlag=!0):(Zn=this.renderedLetters[st],this.lettersChangedFlag=Zn.update(oI,wA,pO,aR,fD,AA)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(e,o,a){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,o,a),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,o,a),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,o){var a,c=o.length,d,g="";for(a=0;a<c;a+=1)o[a].ty==="sh"&&(d=o[a].ks.k,g+=buildShapeString(d,d.i.length,!0,e));return g},ITextElement.prototype.updateDocumentData=function(e,o){this.textProperty.updateDocumentData(e,o)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,o,a,c,d){switch(e.ps&&o.translate(e.ps[0],e.ps[1]+e.ascent,0),o.translate(0,-e.ls,0),e.j){case 1:o.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[a]),0,0);break;case 2:o.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[a])/2,0,0);break}o.translate(c,d,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(e[0]*255)+","+Math.round(e[1]*255)+","+Math.round(e[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,o,a){this.textSpans=[],this.renderType="svg",this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var o=0,a=e.length,c=[],d="";o<a;)e[o]==="\r"||e[o]===""?(c.push(d),d=""):d+=e[o],o+=1;return c.push(d),c},SVGTextLottieElement.prototype.buildShapeData=function(e,o){if(e.shapes&&e.shapes.length){var a=e.shapes[0];if(a.it){var c=a.it[a.it.length-1];c.s&&(c.s.k[0]=o,c.s.k[1]=o)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var e,o,a=this.textProperty.currentData;this.renderedLetters=createSizedArray(a?a.l.length:0),a.fc?this.layerElement.setAttribute("fill",this.buildColor(a.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),a.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(a.sc)),this.layerElement.setAttribute("stroke-width",a.sw)),this.layerElement.setAttribute("font-size",a.finalSize);var c=this.globalData.fontManager.getFontByName(a.f);if(c.fClass)this.layerElement.setAttribute("class",c.fClass);else{this.layerElement.setAttribute("font-family",c.fFamily);var d=a.fWeight,g=a.fStyle;this.layerElement.setAttribute("font-style",g),this.layerElement.setAttribute("font-weight",d)}this.layerElement.setAttribute("aria-label",a.t);var b=a.l||[],j=!!this.globalData.fontManager.chars;o=b.length;var $,_e=this.mHelper,st="",rt=this.data.singleShape,ut=0,gt=0,yt=!0,wt=a.tr*.001*a.finalSize;if(rt&&!j&&!a.sz){var Ct=this.textContainer,Pt="start";switch(a.j){case 1:Pt="end";break;case 2:Pt="middle";break;default:Pt="start";break}Ct.setAttribute("text-anchor",Pt),Ct.setAttribute("letter-spacing",wt);var At=this.buildTextContents(a.finalText);for(o=At.length,gt=a.ps?a.ps[1]+a.ascent:0,e=0;e<o;e+=1)$=this.textSpans[e].span||createNS("tspan"),$.textContent=At[e],$.setAttribute("x",0),$.setAttribute("y",gt),$.style.display="inherit",Ct.appendChild($),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=$,gt+=a.finalLineHeight;this.layerElement.appendChild(Ct)}else{var Tt=this.textSpans.length,kt;for(e=0;e<o;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!j||!rt||e===0){if($=Tt>e?this.textSpans[e].span:createNS(j?"g":"text"),Tt<=e){if($.setAttribute("stroke-linecap","butt"),$.setAttribute("stroke-linejoin","round"),$.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=$,j){var It=createNS("g");$.appendChild(It),this.textSpans[e].childSpan=It}this.textSpans[e].span=$,this.layerElement.appendChild($)}$.style.display="inherit"}if(_e.reset(),rt&&(b[e].n&&(ut=-wt,gt+=a.yOffset,gt+=yt?1:0,yt=!1),this.applyTextPropertiesToMatrix(a,_e,b[e].line,ut,gt),ut+=b[e].l||0,ut+=wt),j){kt=this.globalData.fontManager.getCharData(a.finalText[e],c.fStyle,this.globalData.fontManager.getFontByName(a.f).fFamily);var Lt;if(kt.t===1)Lt=new SVGCompElement(kt.data,this.globalData,this);else{var Ft=emptyShapeData;kt.data&&kt.data.shapes&&(Ft=this.buildShapeData(kt.data,a.finalSize)),Lt=new SVGShapeElement(Ft,this.globalData,this)}if(this.textSpans[e].glyph){var Nt=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(Nt.layerElement),Nt.destroy()}this.textSpans[e].glyph=Lt,Lt._debug=!0,Lt.prepareFrame(0),Lt.renderFrame(),this.textSpans[e].childSpan.appendChild(Lt.layerElement),kt.t===1&&this.textSpans[e].childSpan.setAttribute("transform","scale("+a.finalSize/100+","+a.finalSize/100+")")}else rt&&$.setAttribute("transform","translate("+_e.props[12]+","+_e.props[13]+")"),$.textContent=b[e].val,$.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}rt&&$&&$.setAttribute("d",st)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,o=this.textSpans.length,a;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<o;e+=1)a=this.textSpans[e].glyph,a&&(a.prepareFrame(this.comp.renderedFrame-this.data.st),a._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var e,o,a=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;o=c.length;var d,g,b;for(e=0;e<o;e+=1)c[e].n||(d=a[e],g=this.textSpans[e].span,b=this.textSpans[e].glyph,b&&b.renderFrame(),d._mdf.m&&g.setAttribute("transform",d.m),d._mdf.o&&g.setAttribute("opacity",d.o),d._mdf.sw&&g.setAttribute("stroke-width",d.sw),d._mdf.sc&&g.setAttribute("stroke",d.sc),d._mdf.fc&&g.setAttribute("fill",d.fc))}};function ISolidElement(e,o,a){this.initElement(e,o,a)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)};function NullElement(e,o,a){this.initFrame(),this.initBaseData(e,o,a),this.initFrame(),this.initTransform(e,o,a),this.initHierarchy()}NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var o=this.globalData.defs;this.setupGlobalData(e,o),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var a=createNS("clipPath"),c=createNS("rect");c.setAttribute("width",e.w),c.setAttribute("height",e.h),c.setAttribute("x",0),c.setAttribute("y",0);var d=createElementID();a.setAttribute("id",d),a.appendChild(c),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")"),o.appendChild(a),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e,o=this.layers?this.layers.length:0;for(e=0;e<o;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var o=0,a=this.layers.length;for(o=0;o<a;o+=1)if(this.layers[o].ind===e)return o;return-1},SVGRendererBase.prototype.buildItem=function(e){var o=this.elements;if(!(o[e]||this.layers[e].ty===99)){o[e]=!0;var a=this.createItem(this.layers[e]);if(o[e]=a,getExpressionsPlugin()&&(this.layers[e].ty===0&&this.globalData.projectInterface.registerComposition(a),a.initExpressions()),this.appendElementInPos(a,e),this.layers[e].tt){var c="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(c===-1)return;if(!this.elements[c]||this.elements[c]===!0)this.buildItem(c),this.addPendingElement(a);else{var d=o[c],g=d.getMatte(this.layers[e].tt);a.setMatte(g)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var o=0,a=this.elements.length;o<a;){if(this.elements[o]===e){var c="tp"in e.data?this.findIndexByInd(e.data.tp):o-1,d=this.elements[c],g=d.getMatte(this.layers[o].tt);e.setMatte(g);break}o+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(!(this.renderedFrame===e||this.destroyed)){e===null?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var o,a=this.layers.length;for(this.completeLayers||this.checkLayers(e),o=a-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&this.elements[o].prepareFrame(e-this.layers[o].st);if(this.globalData._mdf)for(o=0;o<a;o+=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,o){var a=e.getBaseElement();if(a){for(var c=0,d;c<o;)this.elements[c]&&this.elements[c]!==!0&&this.elements[c].getBaseElement()&&(d=this.elements[c].getBaseElement()),c+=1;d?this.layerElement.insertBefore(a,d):this.layerElement.appendChild(a)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,o,a){this.initFrame(),this.initBaseData(e,o,a),this.initTransform(e,o,a),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!o.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var o=this.tm.v;o===this.data.op&&(o=this.data.op-1),this.renderedFrame=o}var a,c=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),a=c-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&(this.elements[a].prepareFrame(this.renderedFrame-this.layers[a].st),this.elements[a]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,o=this.layers.length;for(e=0;e<o;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,o=this.layers.length;for(e=0;e<o;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(e,o,a){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,o,a),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,o.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function SVGRenderer(e,o){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var a="";if(o&&o.title){var c=createNS("title"),d=createElementID();c.setAttribute("id",d),c.textContent=o.title,this.svgElement.appendChild(c),a+=d}if(o&&o.description){var g=createNS("desc"),b=createElementID();g.setAttribute("id",b),g.textContent=o.description,this.svgElement.appendChild(g),a+=" "+b}a&&this.svgElement.setAttribute("aria-labelledby",a);var j=createNS("defs");this.svgElement.appendChild(j);var $=createNS("g");this.svgElement.appendChild($),this.layerElement=$,this.renderConfig={preserveAspectRatio:o&&o.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:o&&o.contentVisibility||"visible",progressiveLoad:o&&o.progressiveLoad||!1,hideOnTransparent:!(o&&o.hideOnTransparent===!1),viewBoxOnly:o&&o.viewBoxOnly||!1,viewBoxSize:o&&o.viewBoxSize||!1,className:o&&o.className||"",id:o&&o.id||"",focusable:o&&o.focusable,filterSize:{width:o&&o.filterSize&&o.filterSize.width||"100%",height:o&&o.filterSize&&o.filterSize.height||"100%",x:o&&o.filterSize&&o.filterSize.x||"0%",y:o&&o.filterSize&&o.filterSize.y||"0%"},width:o&&o.width,height:o&&o.height,runExpressions:!o||o.runExpressions===void 0||o.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:j,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(o){var a,c=o.length,d="_";for(a=0;a<c;a+=1)d+=o[a].transform.key+"_";var g=this.sequences[d];return g||(g={transforms:[].concat(o),finalTransform:new Matrix,_mdf:!1},this.sequences[d]=g,this.sequenceList.push(g)),g},processSequence:function(o,a){for(var c=0,d=o.transforms.length,g=a;c<d&&!a;){if(o.transforms[c].transform.mProps._mdf){g=!0;break}c+=1}if(g)for(o.finalTransform.reset(),c=d-1;c>=0;c-=1)o.finalTransform.multiply(o.transforms[c].transform.mProps.v);o._mdf=g},processSequences:function(o){var a,c=this.sequenceList.length;for(a=0;a<c;a+=1)this.processSequence(this.sequenceList[a],o)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var o="__lottie_element_luma_buffer",a=null,c=null,d=null;function g(){var $=createNS("svg"),_e=createNS("filter"),st=createNS("feColorMatrix");return _e.setAttribute("id",o),st.setAttribute("type","matrix"),st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),_e.appendChild(st),$.appendChild(_e),$.setAttribute("id",o+"_svg"),featureSupport.svgLumaHidden&&($.style.display="none"),$}function b(){a||(d=g(),document.body.appendChild(d),a=createTag("canvas"),c=a.getContext("2d"),c.filter="url(#"+o+")",c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,1,1))}function j($){return a||b(),a.width=$.width,a.height=$.height,c.filter="url(#"+o+")",a}return{load:b,get:j}};function createCanvas(e,o){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,o);var a=createTag("canvas");return a.width=e,a.height=o,a}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(e){var o,a=e.data.ef?e.data.ef.length:0;this.filters=[];var c;for(o=0;o<a;o+=1){c=null;var d=e.data.ef[o].ty;if(registeredEffects[d]){var g=registeredEffects[d].effect;c=new g(e.effectsManager.effectElements[o],e)}c&&this.filters.push(c)}this.filters.length&&e.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(e){var o,a=this.filters.length;for(o=0;o<a;o+=1)this.filters[o].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var o,a=this.filters.length,c=[];for(o=0;o<a;o+=1)this.filters[o].type===e&&c.push(this.filters[o]);return c};function registerEffect(e,o){registeredEffects[e]={effect:o}}function CVMaskElement(e,o){this.data=e,this.element=o,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var a,c=this.masksProperties.length,d=!1;for(a=0;a<c;a+=1)this.masksProperties[a].mode!=="n"&&(d=!0),this.viewData[a]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[a],3);this.hasMasks=d,d&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e=this.element.finalTransform.mat,o=this.element.canvasContext,a,c=this.masksProperties.length,d,g,b;for(o.beginPath(),a=0;a<c;a+=1)if(this.masksProperties[a].mode!=="n"){this.masksProperties[a].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),b=this.viewData[a].v,d=e.applyToPointArray(b.v[0][0],b.v[0][1],0),o.moveTo(d[0],d[1]);var j,$=b._length;for(j=1;j<$;j+=1)g=e.applyToTriplePoints(b.o[j-1],b.i[j],b.v[j]),o.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5]);g=e.applyToTriplePoints(b.o[j-1],b.i[0],b.v[0]),o.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var o=this.globalData.canvasContext,a=assetLoader.createCanvas(o.canvas.width,o.canvas.height);this.buffers.push(a);var c=assetLoader.createCanvas(o.canvas.width,o.canvas.height);this.buffers.push(c),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var o=this.globalData;if(o.blendMode!==this.data.bm){o.blendMode=this.data.bm;var a=getBlendMode(this.data.bm);o.canvasContext.globalCompositeOperation=a}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(o){o.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var o=this.buffers[0],a=o.getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var o=this.buffers[1],a=o.getContext("2d");this.clearCanvas(a),a.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var c=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(c.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var d=assetLoader.getLumaCanvas(this.canvasContext.canvas),g=d.getContext("2d");g.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(d,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(o,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(o){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!o)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var a=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(a),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(a),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(e,o,a,c){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var d=4;o.ty==="rc"?d=5:o.ty==="el"?d=6:o.ty==="sr"&&(d=7),this.sh=ShapePropertyFactory.getShapeProp(e,o,d,e);var g,b=a.length,j;for(g=0;g<b;g+=1)a[g].closed||(j={transforms:c.addTransformSequence(a[g].transforms),trNodes:[]},this.styledShapes.push(j),a[g].elements.push(j))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(e,o,a){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,o){var a={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(o),transforms:[],elements:[],closed:e.hd===!0},c={};if(e.ty==="fl"||e.ty==="st"?(c.c=PropertyFactory.getProp(this,e.c,1,255,this),c.c.k||(a.co="rgb("+bmFloor(c.c.v[0])+","+bmFloor(c.c.v[1])+","+bmFloor(c.c.v[2])+")")):(e.ty==="gf"||e.ty==="gs")&&(c.s=PropertyFactory.getProp(this,e.s,1,null,this),c.e=PropertyFactory.getProp(this,e.e,1,null,this),c.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),c.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),c.g=new GradientProperty(this,e.g,this)),c.o=PropertyFactory.getProp(this,e.o,0,.01,this),e.ty==="st"||e.ty==="gs"){if(a.lc=lineCapEnum[e.lc||2],a.lj=lineJoinEnum[e.lj||2],e.lj==1&&(a.ml=e.ml),c.w=PropertyFactory.getProp(this,e.w,0,null,this),c.w.k||(a.wi=c.w.v),e.d){var d=new DashProperty(this,e.d,"canvas",this);c.d=d,c.d.k||(a.da=c.d.dashArray,a.do=c.d.dashoffset[0])}}else a.r=e.r===2?"evenodd":"nonzero";return this.stylesList.push(a),c.style=a,c},CVShapeElement.prototype.createGroupElement=function(){var e={it:[],prevViewData:[]};return e},CVShapeElement.prototype.createTransformElement=function(e){var o={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}};return o},CVShapeElement.prototype.createShapeElement=function(e){var o=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(o),this.addShapeToModifiers(o),o},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,o=this.itemsData.length;for(e=0;e<o;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),o=this.dynamicProperties.length,e=0;e<o;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var o,a=this.stylesList.length;for(o=0;o<a;o+=1)this.stylesList[o].closed||this.stylesList[o].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,o=this.stylesList.length;for(e=0;e<o;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var o,a=e.length;for(o=0;o<a;o+=1)e[o].closed=!0},CVShapeElement.prototype.searchShapes=function(e,o,a,c,d){var g,b=e.length-1,j,$,_e=[],st=[],rt,ut,gt,yt=[].concat(d);for(g=b;g>=0;g-=1){if(rt=this.searchProcessedElement(e[g]),rt?o[g]=a[rt-1]:e[g]._shouldRender=c,e[g].ty==="fl"||e[g].ty==="st"||e[g].ty==="gf"||e[g].ty==="gs")rt?o[g].style.closed=!1:o[g]=this.createStyleElement(e[g],yt),_e.push(o[g].style);else if(e[g].ty==="gr"){if(!rt)o[g]=this.createGroupElement(e[g]);else for($=o[g].it.length,j=0;j<$;j+=1)o[g].prevViewData[j]=o[g].it[j];this.searchShapes(e[g].it,o[g].it,o[g].prevViewData,c,yt)}else e[g].ty==="tr"?(rt||(gt=this.createTransformElement(e[g]),o[g]=gt),yt.push(o[g]),this.addTransformToStyleList(o[g])):e[g].ty==="sh"||e[g].ty==="rc"||e[g].ty==="el"||e[g].ty==="sr"?rt||(o[g]=this.createShapeElement(e[g])):e[g].ty==="tm"||e[g].ty==="rd"||e[g].ty==="pb"||e[g].ty==="zz"||e[g].ty==="op"?(rt?(ut=o[g],ut.closed=!1):(ut=ShapeModifiers.getModifier(e[g].ty),ut.init(this,e[g]),o[g]=ut,this.shapeModifiers.push(ut)),st.push(ut)):e[g].ty==="rp"&&(rt?(ut=o[g],ut.closed=!0):(ut=ShapeModifiers.getModifier(e[g].ty),o[g]=ut,ut.init(this,e,g,o),this.shapeModifiers.push(ut),c=!1),st.push(ut));this.addProcessedElement(e[g],g+1)}for(this.removeTransformFromStyleList(),this.closeStyles(_e),b=st.length,g=0;g<b;g+=1)st[g].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,o){(e._opMdf||o.op._mdf||this._isFirstFrame)&&(o.opacity=e.opacity,o.opacity*=o.op.v,o._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,o=this.stylesList.length,a,c,d,g,b,j,$=this.globalData.renderer,_e=this.globalData.canvasContext,st,rt;for(e=0;e<o;e+=1)if(rt=this.stylesList[e],st=rt.type,!((st==="st"||st==="gs")&&rt.wi===0||!rt.data._shouldRender||rt.coOp===0||this.globalData.currentGlobalAlpha===0)){for($.save(),b=rt.elements,st==="st"||st==="gs"?($.ctxStrokeStyle(st==="st"?rt.co:rt.grd),$.ctxLineWidth(rt.wi),$.ctxLineCap(rt.lc),$.ctxLineJoin(rt.lj),$.ctxMiterLimit(rt.ml||0)):$.ctxFillStyle(st==="fl"?rt.co:rt.grd),$.ctxOpacity(rt.coOp),st!=="st"&&st!=="gs"&&_e.beginPath(),$.ctxTransform(rt.preTransforms.finalTransform.props),c=b.length,a=0;a<c;a+=1){for((st==="st"||st==="gs")&&(_e.beginPath(),rt.da&&(_e.setLineDash(rt.da),_e.lineDashOffset=rt.do)),j=b[a].trNodes,g=j.length,d=0;d<g;d+=1)j[d].t==="m"?_e.moveTo(j[d].p[0],j[d].p[1]):j[d].t==="c"?_e.bezierCurveTo(j[d].pts[0],j[d].pts[1],j[d].pts[2],j[d].pts[3],j[d].pts[4],j[d].pts[5]):_e.closePath();(st==="st"||st==="gs")&&($.ctxStroke(),rt.da&&_e.setLineDash(this.dashResetter))}st!=="st"&&st!=="gs"&&this.globalData.renderer.ctxFill(rt.r),$.restore()}},CVShapeElement.prototype.renderShape=function(e,o,a,c){var d,g=o.length-1,b;for(b=e,d=g;d>=0;d-=1)o[d].ty==="tr"?(b=a[d].transform,this.renderShapeTransform(e,b)):o[d].ty==="sh"||o[d].ty==="el"||o[d].ty==="rc"||o[d].ty==="sr"?this.renderPath(o[d],a[d]):o[d].ty==="fl"?this.renderFill(o[d],a[d],b):o[d].ty==="st"?this.renderStroke(o[d],a[d],b):o[d].ty==="gf"||o[d].ty==="gs"?this.renderGradientFill(o[d],a[d],b):o[d].ty==="gr"?this.renderShape(b,o[d].it,a[d].it):o[d].ty;c&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,o){if(this._isFirstFrame||o._mdf||e.transforms._mdf){var a=e.trNodes,c=o.paths,d,g,b,j=c._length;a.length=0;var $=e.transforms.finalTransform;for(b=0;b<j;b+=1){var _e=c.shapes[b];if(_e&&_e.v){for(g=_e._length,d=1;d<g;d+=1)d===1&&a.push({t:"m",p:$.applyToPointArray(_e.v[0][0],_e.v[0][1],0)}),a.push({t:"c",pts:$.applyToTriplePoints(_e.o[d-1],_e.i[d],_e.v[d])});g===1&&a.push({t:"m",p:$.applyToPointArray(_e.v[0][0],_e.v[0][1],0)}),_e.c&&g&&(a.push({t:"c",pts:$.applyToTriplePoints(_e.o[d-1],_e.i[0],_e.v[0])}),a.push({t:"z"}))}}e.trNodes=a}},CVShapeElement.prototype.renderPath=function(e,o){if(e.hd!==!0&&e._shouldRender){var a,c=o.styledShapes.length;for(a=0;a<c;a+=1)this.renderStyledShape(o.styledShapes[a],o.sh)}},CVShapeElement.prototype.renderFill=function(e,o,a){var c=o.style;(o.c._mdf||this._isFirstFrame)&&(c.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")"),(o.o._mdf||a._opMdf||this._isFirstFrame)&&(c.coOp=o.o.v*a.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,o,a){var c=o.style,d;if(!c.grd||o.g._mdf||o.s._mdf||o.e._mdf||e.t!==1&&(o.h._mdf||o.a._mdf)){var g=this.globalData.canvasContext,b=o.s.v,j=o.e.v;if(e.t===1)d=g.createLinearGradient(b[0],b[1],j[0],j[1]);else{var $=Math.sqrt(Math.pow(b[0]-j[0],2)+Math.pow(b[1]-j[1],2)),_e=Math.atan2(j[1]-b[1],j[0]-b[0]),st=o.h.v;st>=1?st=.99:st<=-1&&(st=-.99);var rt=$*st,ut=Math.cos(_e+o.a.v)*rt+b[0],gt=Math.sin(_e+o.a.v)*rt+b[1];d=g.createRadialGradient(ut,gt,0,b[0],b[1],$)}var yt,wt=e.g.p,Ct=o.g.c,Pt=1;for(yt=0;yt<wt;yt+=1)o.g._hasOpacity&&o.g._collapsable&&(Pt=o.g.o[yt*2+1]),d.addColorStop(Ct[yt*4]/100,"rgba("+Ct[yt*4+1]+","+Ct[yt*4+2]+","+Ct[yt*4+3]+","+Pt+")");c.grd=d}c.coOp=o.o.v*a.opacity},CVShapeElement.prototype.renderStroke=function(e,o,a){var c=o.style,d=o.d;d&&(d._mdf||this._isFirstFrame)&&(c.da=d.dashArray,c.do=d.dashoffset[0]),(o.c._mdf||this._isFirstFrame)&&(c.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")"),(o.o._mdf||a._opMdf||this._isFirstFrame)&&(c.coOp=o.o.v*a.opacity),(o.w._mdf||this._isFirstFrame)&&(c.wi=o.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(e,o,a){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var o=!1;e.fc?(o=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=o;var a=!1;e.sc&&(a=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var c=this.globalData.fontManager.getFontByName(e.f),d,g,b=e.l,j=this.mHelper;this.stroke=a,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,g=e.finalText.length;var $,_e,st,rt,ut,gt,yt,wt,Ct,Pt,At=this.data.singleShape,Tt=e.tr*.001*e.finalSize,kt=0,It=0,Lt=!0,Ft=0;for(d=0;d<g;d+=1){$=this.globalData.fontManager.getCharData(e.finalText[d],c.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),_e=$&&$.data||{},j.reset(),At&&b[d].n&&(kt=-Tt,It+=e.yOffset,It+=Lt?1:0,Lt=!1),ut=_e.shapes?_e.shapes[0].it:[],yt=ut.length,j.scale(e.finalSize/100,e.finalSize/100),At&&this.applyTextPropertiesToMatrix(e,j,b[d].line,kt,It),Ct=createSizedArray(yt-1);var Nt=0;for(gt=0;gt<yt;gt+=1)if(ut[gt].ty==="sh"){for(rt=ut[gt].ks.k.i.length,wt=ut[gt].ks.k,Pt=[],st=1;st<rt;st+=1)st===1&&Pt.push(j.applyToX(wt.v[0][0],wt.v[0][1],0),j.applyToY(wt.v[0][0],wt.v[0][1],0)),Pt.push(j.applyToX(wt.o[st-1][0],wt.o[st-1][1],0),j.applyToY(wt.o[st-1][0],wt.o[st-1][1],0),j.applyToX(wt.i[st][0],wt.i[st][1],0),j.applyToY(wt.i[st][0],wt.i[st][1],0),j.applyToX(wt.v[st][0],wt.v[st][1],0),j.applyToY(wt.v[st][0],wt.v[st][1],0));Pt.push(j.applyToX(wt.o[st-1][0],wt.o[st-1][1],0),j.applyToY(wt.o[st-1][0],wt.o[st-1][1],0),j.applyToX(wt.i[0][0],wt.i[0][1],0),j.applyToY(wt.i[0][0],wt.i[0][1],0),j.applyToX(wt.v[0][0],wt.v[0][1],0),j.applyToY(wt.v[0][0],wt.v[0][1],0)),Ct[Nt]=Pt,Nt+=1}At&&(kt+=b[d].l,kt+=Tt),this.textSpans[Ft]?this.textSpans[Ft].elem=Ct:this.textSpans[Ft]={elem:Ct},Ft+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var e=this.canvasContext;e.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,a,c,d,g,b,j=this.textAnimator.renderedLetters,$=this.textProperty.currentData.l;a=$.length;var _e,st=null,rt=null,ut=null,gt,yt,wt=this.globalData.renderer;for(o=0;o<a;o+=1)if(!$[o].n){if(_e=j[o],_e&&(wt.save(),wt.ctxTransform(_e.p),wt.ctxOpacity(_e.o)),this.fill){for(_e&&_e.fc?st!==_e.fc&&(wt.ctxFillStyle(_e.fc),st=_e.fc):st!==this.values.fill&&(st=this.values.fill,wt.ctxFillStyle(this.values.fill)),gt=this.textSpans[o].elem,d=gt.length,this.globalData.canvasContext.beginPath(),c=0;c<d;c+=1)for(yt=gt[c],b=yt.length,this.globalData.canvasContext.moveTo(yt[0],yt[1]),g=2;g<b;g+=6)this.globalData.canvasContext.bezierCurveTo(yt[g],yt[g+1],yt[g+2],yt[g+3],yt[g+4],yt[g+5]);this.globalData.canvasContext.closePath(),wt.ctxFill()}if(this.stroke){for(_e&&_e.sw?ut!==_e.sw&&(ut=_e.sw,wt.ctxLineWidth(_e.sw)):ut!==this.values.sWidth&&(ut=this.values.sWidth,wt.ctxLineWidth(this.values.sWidth)),_e&&_e.sc?rt!==_e.sc&&(rt=_e.sc,wt.ctxStrokeStyle(_e.sc)):rt!==this.values.stroke&&(rt=this.values.stroke,wt.ctxStrokeStyle(this.values.stroke)),gt=this.textSpans[o].elem,d=gt.length,this.globalData.canvasContext.beginPath(),c=0;c<d;c+=1)for(yt=gt[c],b=yt.length,this.globalData.canvasContext.moveTo(yt[0],yt[1]),g=2;g<b;g+=6)this.globalData.canvasContext.bezierCurveTo(yt[g],yt[g+1],yt[g+2],yt[g+3],yt[g+4],yt[g+5]);this.globalData.canvasContext.closePath(),wt.ctxStroke()}_e&&this.globalData.renderer.restore()}};function CVImageElement(e,o,a){this.assetData=o.getAssetData(e.refId),this.img=o.imageLoader.getAsset(this.assetData),this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var o=e.getContext("2d"),a=this.img.width,c=this.img.height,d=a/c,g=this.assetData.w/this.assetData.h,b,j,$=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;d>g&&$==="xMidYMid slice"||d<g&&$!=="xMidYMid slice"?(j=c,b=j*g):(b=a,j=b/g),o.drawImage(this.img,(a-b)/2,(c-j)/2,b,j,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(e,o,a){this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){e[0]===1&&e[1]===0&&e[4]===0&&e[5]===1&&e[12]===0&&e[13]===0||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,o,a,c){this.canvasContext.fillRect(e,o,a,c)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var o=this.animationItem.container.style;o.width="100%",o.height="100%";var a="0px 0px 0px";o.transformOrigin=a,o.mozTransformOrigin=a,o.webkitTransformOrigin=a,o["-webkit-transform"]=a,o.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,o){this.reset();var a,c;e?(a=e,c=o,this.canvasContext.canvas.width=a,this.canvasContext.canvas.height=c):(this.animationItem.wrapper&&this.animationItem.container?(a=this.animationItem.wrapper.offsetWidth,c=this.animationItem.wrapper.offsetHeight):(a=this.canvasContext.canvas.width,c=this.canvasContext.canvas.height),this.canvasContext.canvas.width=a*this.renderConfig.dpr,this.canvasContext.canvas.height=c*this.renderConfig.dpr);var d,g;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var b=this.renderConfig.preserveAspectRatio.split(" "),j=b[1]||"meet",$=b[0]||"xMidYMid",_e=$.substr(0,4),st=$.substr(4);d=a/c,g=this.transformCanvas.w/this.transformCanvas.h,g>d&&j==="meet"||g<d&&j==="slice"?(this.transformCanvas.sx=a/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=c/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=c/(this.transformCanvas.h/this.renderConfig.dpr)),_e==="xMid"&&(g<d&&j==="meet"||g>d&&j==="slice")?this.transformCanvas.tx=(a-this.transformCanvas.w*(c/this.transformCanvas.h))/2*this.renderConfig.dpr:_e==="xMax"&&(g<d&&j==="meet"||g>d&&j==="slice")?this.transformCanvas.tx=(a-this.transformCanvas.w*(c/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,st==="YMid"&&(g>d&&j==="meet"||g<d&&j==="slice")?this.transformCanvas.ty=(c-this.transformCanvas.h*(a/this.transformCanvas.w))/2*this.renderConfig.dpr:st==="YMax"&&(g>d&&j==="meet"||g<d&&j==="slice")?this.transformCanvas.ty=(c-this.transformCanvas.h*(a/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=a/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=c/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var e,o=this.layers?this.layers.length:0;for(e=o-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,o){if(!(this.renderedFrame===e&&this.renderConfig.clearCanvas===!0&&!o||this.destroyed||e===-1)){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||o,this.globalData.projectInterface.currentFrame=e;var a,c=this.layers.length;for(this.completeLayers||this.checkLayers(e),a=c-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].prepareFrame(e-this.layers[a].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),a=c-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var o=this.elements;if(!(o[e]||this.layers[e].ty===99)){var a=this.createItem(this.layers[e],this,this.globalData);o[e]=a,a.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var e,o=15;for(e=0;e<o;e+=1){var a=new CanvasContext;this.stack[e]=a}this._length=o,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var e=this._length*2,o=0;for(o=this._length;o<e;o+=1)this.stack[o]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var o=this.stack[this.cArrPos],a=o.transform,c,d=this.cTr.props;for(c=0;c<16;c+=1)d[c]=a[c];if(e){this.nativeContext.restore();var g=this.stack[this.cArrPos+1];this.appliedFillStyle=g.fillStyle,this.appliedStrokeStyle=g.strokeStyle,this.appliedLineWidth=g.lineWidth,this.appliedLineCap=g.lineCap,this.appliedLineJoin=g.lineJoin,this.appliedMiterLimit=g.miterLimit}this.nativeContext.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]),(e||o.opacity!==-1&&this.currentOpacity!==o.opacity)&&(this.nativeContext.globalAlpha=o.opacity,this.currentOpacity=o.opacity),this.currentFillStyle=o.fillStyle,this.currentStrokeStyle=o.strokeStyle,this.currentLineWidth=o.lineWidth,this.currentLineCap=o.lineCap,this.currentLineJoin=o.lineJoin,this.currentMiterLimit=o.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var o=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var a=this.stack[this.cArrPos],c;for(c=0;c<16;c+=1)a.transform[c]=o[c];this.cArrPos+=1;var d=this.stack[this.cArrPos];d.opacity=a.opacity,d.fillStyle=a.fillStyle,d.strokeStyle=a.strokeStyle,d.lineWidth=a.lineWidth,d.lineCap=a.lineCap,d.lineJoin=a.lineJoin,d.miterLimit=a.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var o=this.cTr;this.transformMat.multiply(o),o.cloneFromProps(this.transformMat.props);var a=o.props;this.nativeContext.setTransform(a[0],a[1],a[4],a[5],a[12],a[13])},CVContextData.prototype.opacity=function(e){var o=this.stack[this.cArrPos].opacity;o*=e<0?0:e,this.stack[this.cArrPos].opacity!==o&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=o)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,o,a,c){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,o,a,c)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(e,o,a){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,o,a),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,o.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip();var o,a=this.layers.length;for(o=a-1;o>=0;o-=1)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame()},CVCompElement.prototype.destroy=function(){var e,o=this.layers.length;for(e=o-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function CanvasRenderer(e,o){this.animationItem=e,this.renderConfig={clearCanvas:o&&o.clearCanvas!==void 0?o.clearCanvas:!0,context:o&&o.context||null,progressiveLoad:o&&o.progressiveLoad||!1,preserveAspectRatio:o&&o.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:o&&o.contentVisibility||"visible",className:o&&o.className||"",id:o&&o.id||"",runExpressions:!o||o.runExpressions===void 0||o.runExpressions},this.renderConfig.dpr=o&&o.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=o&&o.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var o=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var a=this.finalTransform.mat.toCSS();o.transform=a,o.webkitTransform=a}this.finalTransform._opMdf&&(o.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(e,o,a){this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?(e=createNS("rect"),e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(e=createTag("div"),e.style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)};function HShapeElement(e,o,a){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,o,a),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var o=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",o.w),e.setAttribute("height",o.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,o){var a,c=e.length;for(a=0;a<c;a+=1)o=e[a].mProps.v.applyToPointArray(o[0],o[1],0);return o},HShapeElement.prototype.calculateShapeBoundingBox=function(e,o){var a=e.sh.v,c=e.transformers,d,g=a._length,b,j,$,_e;if(!(g<=1)){for(d=0;d<g-1;d+=1)b=this.getTransformedPoint(c,a.v[d]),j=this.getTransformedPoint(c,a.o[d]),$=this.getTransformedPoint(c,a.i[d+1]),_e=this.getTransformedPoint(c,a.v[d+1]),this.checkBounds(b,j,$,_e,o);a.c&&(b=this.getTransformedPoint(c,a.v[d]),j=this.getTransformedPoint(c,a.o[d]),$=this.getTransformedPoint(c,a.i[0]),_e=this.getTransformedPoint(c,a.v[0]),this.checkBounds(b,j,$,_e,o))}},HShapeElement.prototype.checkBounds=function(e,o,a,c,d){this.getBoundsOfCurve(e,o,a,c);var g=this.shapeBoundingBox;d.x=bmMin(g.left,d.x),d.xMax=bmMax(g.right,d.xMax),d.y=bmMin(g.top,d.y),d.yMax=bmMax(g.bottom,d.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,o,a,c){for(var d=[[e[0],c[0]],[e[1],c[1]]],g,b,j,$,_e,st,rt,ut=0;ut<2;++ut)b=6*e[ut]-12*o[ut]+6*a[ut],g=-3*e[ut]+9*o[ut]-9*a[ut]+3*c[ut],j=3*o[ut]-3*e[ut],b|=0,g|=0,j|=0,g===0&&b===0||(g===0?($=-j/b,$>0&&$<1&&d[ut].push(this.calculateF($,e,o,a,c,ut))):(_e=b*b-4*j*g,_e>=0&&(st=(-b+bmSqrt(_e))/(2*g),st>0&&st<1&&d[ut].push(this.calculateF(st,e,o,a,c,ut)),rt=(-b-bmSqrt(_e))/(2*g),rt>0&&rt<1&&d[ut].push(this.calculateF(rt,e,o,a,c,ut)))));this.shapeBoundingBox.left=bmMin.apply(null,d[0]),this.shapeBoundingBox.top=bmMin.apply(null,d[1]),this.shapeBoundingBox.right=bmMax.apply(null,d[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,d[1])},HShapeElement.prototype.calculateF=function(e,o,a,c,d,g){return bmPow(1-e,3)*o[g]+3*bmPow(1-e,2)*e*a[g]+3*(1-e)*bmPow(e,2)*c[g]+bmPow(e,3)*d[g]},HShapeElement.prototype.calculateBoundingBox=function(e,o){var a,c=e.length;for(a=0;a<c;a+=1)e[a]&&e[a].sh?this.calculateShapeBoundingBox(e[a],o):e[a]&&e[a].it?this.calculateBoundingBox(e[a].it,o):e[a]&&e[a].style&&e[a].w&&this.expandStrokeBoundingBox(e[a].w,o)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,o){var a=0;if(e.keyframes){for(var c=0;c<e.keyframes.length;c+=1){var d=e.keyframes[c].s;d>a&&(a=d)}a*=e.mult}else a=e.v*e.mult;o.x-=a,o.xMax+=a,o.y-=a,o.yMax+=a},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,o=999999;if(e.x=o,e.xMax=-o,e.y=o,e.yMax=-o,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var a=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),a=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),a=!0),a||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var c=this.shapeCont.style,d="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";c.transform=d,c.webkitTransform=d}}};function HTextElement(e,o,a){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var o=this.innerElem.style,a=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";o.fill=a,o.color=a,e.sc&&(o.stroke=this.buildColor(e.sc),o.strokeWidth=e.sw+"px");var c=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(o.fontSize=e.finalSize+"px",o.lineHeight=e.finalSize+"px",c.fClass)this.innerElem.className=c.fClass;else{o.fontFamily=c.fFamily;var d=e.fWeight,g=e.fStyle;o.fontStyle=g,o.fontWeight=d}var b,j,$=e.l;j=$.length;var _e,st,rt,ut=this.mHelper,gt,yt="",wt=0;for(b=0;b<j;b+=1){if(this.globalData.fontManager.chars?(this.textPaths[wt]?_e=this.textPaths[wt]:(_e=createNS("path"),_e.setAttribute("stroke-linecap",lineCapEnum[1]),_e.setAttribute("stroke-linejoin",lineJoinEnum[2]),_e.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[wt]?(st=this.textSpans[wt],rt=st.children[0]):(st=createTag("div"),st.style.lineHeight=0,rt=createNS("svg"),rt.appendChild(_e),styleDiv(st)))):this.isMasked?_e=this.textPaths[wt]?this.textPaths[wt]:createNS("text"):this.textSpans[wt]?(st=this.textSpans[wt],_e=this.textPaths[wt]):(st=createTag("span"),styleDiv(st),_e=createTag("span"),styleDiv(_e),st.appendChild(_e)),this.globalData.fontManager.chars){var Ct=this.globalData.fontManager.getCharData(e.finalText[b],c.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),Pt;if(Ct?Pt=Ct.data:Pt=null,ut.reset(),Pt&&Pt.shapes&&Pt.shapes.length&&(gt=Pt.shapes[0].it,ut.scale(e.finalSize/100,e.finalSize/100),yt=this.createPathShape(ut,gt),_e.setAttribute("d",yt)),this.isMasked)this.innerElem.appendChild(_e);else{if(this.innerElem.appendChild(st),Pt&&Pt.shapes){document.body.appendChild(rt);var At=rt.getBBox();rt.setAttribute("width",At.width+2),rt.setAttribute("height",At.height+2),rt.setAttribute("viewBox",At.x-1+" "+(At.y-1)+" "+(At.width+2)+" "+(At.height+2));var Tt=rt.style,kt="translate("+(At.x-1)+"px,"+(At.y-1)+"px)";Tt.transform=kt,Tt.webkitTransform=kt,$[b].yOffset=At.y-1}else rt.setAttribute("width",1),rt.setAttribute("height",1);st.appendChild(rt)}}else if(_e.textContent=$[b].val,_e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(_e);else{this.innerElem.appendChild(st);var It=_e.style,Lt="translate3d(0,"+-e.finalSize/1.2+"px,0)";It.transform=Lt,It.webkitTransform=Lt}this.isMasked?this.textSpans[wt]=_e:this.textSpans[wt]=st,this.textSpans[wt].style.display="block",this.textPaths[wt]=_e,wt+=1}for(;wt<this.textSpans.length;)this.textSpans[wt].style.display="none",wt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var o="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=o,e.webkitTransform=o}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var a,c,d=0,g=this.textAnimator.renderedLetters,b=this.textProperty.currentData.l;c=b.length;var j,$,_e;for(a=0;a<c;a+=1)b[a].n?d+=1:($=this.textSpans[a],_e=this.textPaths[a],j=g[d],d+=1,j._mdf.m&&(this.isMasked?$.setAttribute("transform",j.m):($.style.webkitTransform=j.m,$.style.transform=j.m)),$.style.opacity=j.o,j.sw&&j._mdf.sw&&_e.setAttribute("stroke-width",j.sw),j.sc&&j._mdf.sc&&_e.setAttribute("stroke",j.sc),j.fc&&j._mdf.fc&&(_e.setAttribute("fill",j.fc),_e.style.color=j.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var st=this.innerElem.getBBox();this.currentBBox.w!==st.width&&(this.currentBBox.w=st.width,this.svgElement.setAttribute("width",st.width)),this.currentBBox.h!==st.height&&(this.currentBBox.h=st.height,this.svgElement.setAttribute("height",st.height));var rt=1;if(this.currentBBox.w!==st.width+rt*2||this.currentBBox.h!==st.height+rt*2||this.currentBBox.x!==st.x-rt||this.currentBBox.y!==st.y-rt){this.currentBBox.w=st.width+rt*2,this.currentBBox.h=st.height+rt*2,this.currentBBox.x=st.x-rt,this.currentBBox.y=st.y-rt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var ut="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=ut,e.webkitTransform=ut}}}};function HCameraElement(e,o,a){this.initFrame(),this.initBaseData(e,o,a),this.initHierarchy();var c=PropertyFactory.getProp;if(this.pe=c(this,e.pe,0,0,this),e.ks.p.s?(this.px=c(this,e.ks.p.x,1,0,this),this.py=c(this,e.ks.p.y,1,0,this),this.pz=c(this,e.ks.p.z,1,0,this)):this.p=c(this,e.ks.p,1,0,this),e.ks.a&&(this.a=c(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var d,g=e.ks.or.k.length;for(d=0;d<g;d+=1)e.ks.or.k[d].to=null,e.ks.or.k[d].ti=null}this.or=c(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=c(this,e.ks.rx,0,degToRads,this),this.ry=c(this,e.ks.ry,0,degToRads,this),this.rz=c(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,o=this.comp.threeDElements.length,a,c,d;for(e=0;e<o;e+=1)if(a=this.comp.threeDElements[e],a.type==="3d"){c=a.perspectiveElem.style,d=a.container.style;var g=this.pe.v+"px",b="0px 0px 0px",j="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";c.perspective=g,c.webkitPerspective=g,d.transformOrigin=b,d.mozTransformOrigin=b,d.webkitTransformOrigin=b,c.transform=j,c.webkitTransform=j}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e=this._isFirstFrame,o,a;if(this.hierarchy)for(a=this.hierarchy.length,o=0;o<a;o+=1)e=this.hierarchy[o].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(a=this.hierarchy.length-1,o=a;o>=0;o-=1){var c=this.hierarchy[o].finalTransform.mProp;this.mat.translate(-c.p.v[0],-c.p.v[1],c.p.v[2]),this.mat.rotateX(-c.or.v[0]).rotateY(-c.or.v[1]).rotateZ(c.or.v[2]),this.mat.rotateX(-c.rx.v).rotateY(-c.ry.v).rotateZ(c.rz.v),this.mat.scale(1/c.s.v[0],1/c.s.v[1],1/c.s.v[2]),this.mat.translate(c.a.v[0],c.a.v[1],c.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var d;this.p?d=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:d=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var g=Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)),b=[d[0]/g,d[1]/g,d[2]/g],j=Math.sqrt(b[2]*b[2]+b[0]*b[0]),$=Math.atan2(b[1],j),_e=Math.atan2(b[0],-b[2]);this.mat.rotateY(_e).rotateX(-$)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var st=!this._prevMat.equals(this.mat);if((st||this.pe._mdf)&&this.comp.threeDElements){a=this.comp.threeDElements.length;var rt,ut,gt;for(o=0;o<a;o+=1)if(rt=this.comp.threeDElements[o],rt.type==="3d"){if(st){var yt=this.mat.toCSS();gt=rt.container.style,gt.transform=yt,gt.webkitTransform=yt}this.pe._mdf&&(ut=rt.perspectiveElem.style,ut.perspective=this.pe.v+"px",ut.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(e,o,a){this.assetData=o.getAssetData(e.refId),this.initElement(e,o,a)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),o=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(o),o.crossOrigin="anonymous",o.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(e,o){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:o&&o.className||"",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(o&&o.hideOnTransparent===!1),filterSize:{width:o&&o.filterSize&&o.filterSize.width||"400%",height:o&&o.filterSize&&o.filterSize.height||"400%",x:o&&o.filterSize&&o.filterSize.x||"-100%",y:o&&o.filterSize&&o.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(e,o){var a=e.getBaseElement();if(a){var c=this.layers[o];if(!c.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(a,o);else{for(var d=0,g,b,j;d<o;)this.elements[d]&&this.elements[d]!==!0&&this.elements[d].getBaseElement&&(b=this.elements[d],j=this.layers[d].ddd?this.getThreeDContainerByPos(d):b.getBaseElement(),g=j||g),d+=1;g?(!c.ddd||!this.supports3d)&&this.layerElement.insertBefore(a,g):(!c.ddd||!this.supports3d)&&this.layerElement.appendChild(a)}else this.addTo3dContainer(a,o)}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var o=0,a=this.threeDElements.length;o<a;){if(this.threeDElements[o].startPos<=e&&this.threeDElements[o].endPos>=e)return this.threeDElements[o].perspectiveElem;o+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,o){var a=createTag("div"),c,d;styleDiv(a);var g=createTag("div");if(styleDiv(g),o==="3d"){c=a.style,c.width=this.globalData.compSize.w+"px",c.height=this.globalData.compSize.h+"px";var b="50% 50%";c.webkitTransformOrigin=b,c.mozTransformOrigin=b,c.transformOrigin=b,d=g.style;var j="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";d.transform=j,d.webkitTransform=j}a.appendChild(g);var $={container:g,perspectiveElem:a,startPos:e,endPos:e,type:o};return this.threeDElements.push($),$},HybridRendererBase.prototype.build3dContainers=function(){var e,o=this.layers.length,a,c="";for(e=0;e<o;e+=1)this.layers[e].ddd&&this.layers[e].ty!==3?(c!=="3d"&&(c="3d",a=this.createThreeDContainer(e,"3d")),a.endPos=Math.max(a.endPos,e)):(c!=="2d"&&(c="2d",a=this.createThreeDContainer(e,"2d")),a.endPos=Math.max(a.endPos,e));for(o=this.threeDElements.length,e=o-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,o){for(var a=0,c=this.threeDElements.length;a<c;){if(o<=this.threeDElements[a].endPos){for(var d=this.threeDElements[a].startPos,g;d<o;)this.elements[d]&&this.elements[d].getBaseElement&&(g=this.elements[d].getBaseElement()),d+=1;g?this.threeDElements[a].container.insertBefore(e,g):this.threeDElements[a].container.appendChild(e);break}a+=1}},HybridRendererBase.prototype.configAnimation=function(e){var o=createTag("div"),a=this.animationItem.wrapper,c=o.style;c.width=e.w+"px",c.height=e.h+"px",this.resizerElem=o,styleDiv(o),c.transformStyle="flat",c.mozTransformStyle="flat",c.webkitTransformStyle="flat",this.renderConfig.className&&o.setAttribute("class",this.renderConfig.className),a.appendChild(o),c.overflow="hidden";var d=createNS("svg");d.setAttribute("width","1"),d.setAttribute("height","1"),styleDiv(d),this.resizerElem.appendChild(d);var g=createNS("defs");d.appendChild(g),this.data=e,this.setupGlobalData(e,d),this.globalData.defs=g,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e,o=this.layers?this.layers.length:0;for(e=0;e<o;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,a=e/o,c=this.globalData.compSize.w/this.globalData.compSize.h,d,g,b,j;c>a?(d=e/this.globalData.compSize.w,g=e/this.globalData.compSize.w,b=0,j=(o-this.globalData.compSize.h*(e/this.globalData.compSize.w))/2):(d=o/this.globalData.compSize.h,g=o/this.globalData.compSize.h,b=(e-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,j=0);var $=this.resizerElem.style;$.webkitTransform="matrix3d("+d+",0,0,0,0,"+g+",0,0,0,0,1,0,"+b+","+j+",0,1)",$.transform=$.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e=this.globalData.compSize.w,o=this.globalData.compSize.h,a,c=this.threeDElements.length;for(a=0;a<c;a+=1){var d=this.threeDElements[a].perspectiveElem.style;d.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(o,2))+"px",d.perspective=d.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var o,a=e.length,c=createTag("div");for(o=0;o<a;o+=1)if(e[o].xt){var d=this.createComp(e[o],c,this.globalData.comp,null);d.initExpressions(),this.globalData.projectInterface.registerComposition(d)}};function HCompElement(e,o,a){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,o,a),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,o.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,o){for(var a=0,c;a<o;)this.elements[a]&&this.elements[a].getBaseElement&&(c=this.elements[a].getBaseElement()),a+=1;c?this.layerElement.insertBefore(e,c):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};function HybridRenderer(e,o){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:o&&o.className||"",imagePreserveAspectRatio:o&&o.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(o&&o.hideOnTransparent===!1),filterSize:{width:o&&o.filterSize&&o.filterSize.width||"400%",height:o&&o.filterSize&&o.filterSize.height||"400%",x:o&&o.filterSize&&o.filterSize.x||"-100%",y:o&&o.filterSize&&o.filterSize.y||"-100%"},runExpressions:!o||o.runExpressions===void 0||o.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function o(a){for(var c=0,d=e.layers.length;c<d;){if(e.layers[c].nm===a||e.layers[c].ind===a)return e.elements[c].layerInterface;c+=1}return null}return Object.defineProperty(o,"_name",{value:e.data.nm}),o.layer=o,o.pixelAspect=1,o.height=e.data.h||e.globalData.compSize.h,o.width=e.data.w||e.globalData.compSize.w,o.pixelAspect=1,o.frameDuration=1/e.globalData.frameRate,o.displayStartTime=0,o.numLayers=e.layers.length,o}}();function _typeof$2(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(a){return typeof a}:_typeof$2=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$2(e)}function seedRandom(e,o){var a=this,c=256,d=6,g=52,b="random",j=o.pow(c,d),$=o.pow(2,g),_e=$*2,st=c-1,rt;function ut(Tt,kt,It){var Lt=[];kt=kt===!0?{entropy:!0}:kt||{};var Ft=Ct(wt(kt.entropy?[Tt,At(e)]:Tt===null?Pt():Tt,3),Lt),Nt=new gt(Lt),Ht=function(){for(var hs=Nt.g(d),us=j,hn=0;hs<$;)hs=(hs+hn)*c,us*=c,hn=Nt.g(1);for(;hs>=_e;)hs/=2,us/=2,hn>>>=1;return(hs+hn)/us};return Ht.int32=function(){return Nt.g(4)|0},Ht.quick=function(){return Nt.g(4)/4294967296},Ht.double=Ht,Ct(At(Nt.S),e),(kt.pass||It||function(dr,hs,us,hn){return hn&&(hn.S&&yt(hn,Nt),dr.state=function(){return yt(Nt,{})}),us?(o[b]=dr,hs):dr})(Ht,Ft,"global"in kt?kt.global:this==o,kt.state)}o["seed"+b]=ut;function gt(Tt){var kt,It=Tt.length,Lt=this,Ft=0,Nt=Lt.i=Lt.j=0,Ht=Lt.S=[];for(It||(Tt=[It++]);Ft<c;)Ht[Ft]=Ft++;for(Ft=0;Ft<c;Ft++)Ht[Ft]=Ht[Nt=st&Nt+Tt[Ft%It]+(kt=Ht[Ft])],Ht[Nt]=kt;Lt.g=function(dr){for(var hs,us=0,hn=Lt.i,un=Lt.j,bo=Lt.S;dr--;)hs=bo[hn=st&hn+1],us=us*c+bo[st&(bo[hn]=bo[un=st&un+hs])+(bo[un]=hs)];return Lt.i=hn,Lt.j=un,us}}function yt(Tt,kt){return kt.i=Tt.i,kt.j=Tt.j,kt.S=Tt.S.slice(),kt}function wt(Tt,kt){var It=[],Lt=_typeof$2(Tt),Ft;if(kt&&Lt=="object")for(Ft in Tt)try{It.push(wt(Tt[Ft],kt-1))}catch{}return It.length?It:Lt=="string"?Tt:Tt+"\0"}function Ct(Tt,kt){for(var It=Tt+"",Lt,Ft=0;Ft<It.length;)kt[st&Ft]=st&(Lt^=kt[st&Ft]*19)+It.charCodeAt(Ft++);return At(kt)}function Pt(){try{var Tt=new Uint8Array(c);return(a.crypto||a.msCrypto).getRandomValues(Tt),At(Tt)}catch{var kt=a.navigator,It=kt&&kt.plugins;return[+new Date,a,It,a.screen,At(e)]}}function At(Tt){return String.fromCharCode.apply(0,Tt)}Ct(o.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(a){return typeof a}:_typeof$1=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$1(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,o){return e==="number"||o instanceof Number||e==="boolean"||e==="string"}function $bm_neg(e){var o=_typeof$1(e);if(o==="number"||e instanceof Number||o==="boolean")return-e;if($bm_isInstanceOfArray(e)){var a,c=e.length,d=[];for(a=0;a<c;a+=1)d[a]=-e[a];return d}return e.propType?e.v:-e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,o){var a=_typeof$1(e),c=_typeof$1(o);if(isNumerable(a,e)&&isNumerable(c,o)||a==="string"||c==="string")return e+o;if($bm_isInstanceOfArray(e)&&isNumerable(c,o))return e=e.slice(0),e[0]+=o,e;if(isNumerable(a,e)&&$bm_isInstanceOfArray(o))return o=o.slice(0),o[0]=e+o[0],o;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(o)){for(var d=0,g=e.length,b=o.length,j=[];d<g||d<b;)(typeof e[d]=="number"||e[d]instanceof Number)&&(typeof o[d]=="number"||o[d]instanceof Number)?j[d]=e[d]+o[d]:j[d]=o[d]===void 0?e[d]:e[d]||o[d],d+=1;return j}return 0}var add=sum;function sub(e,o){var a=_typeof$1(e),c=_typeof$1(o);if(isNumerable(a,e)&&isNumerable(c,o))return a==="string"&&(e=parseInt(e,10)),c==="string"&&(o=parseInt(o,10)),e-o;if($bm_isInstanceOfArray(e)&&isNumerable(c,o))return e=e.slice(0),e[0]-=o,e;if(isNumerable(a,e)&&$bm_isInstanceOfArray(o))return o=o.slice(0),o[0]=e-o[0],o;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(o)){for(var d=0,g=e.length,b=o.length,j=[];d<g||d<b;)(typeof e[d]=="number"||e[d]instanceof Number)&&(typeof o[d]=="number"||o[d]instanceof Number)?j[d]=e[d]-o[d]:j[d]=o[d]===void 0?e[d]:e[d]||o[d],d+=1;return j}return 0}function mul(e,o){var a=_typeof$1(e),c=_typeof$1(o),d;if(isNumerable(a,e)&&isNumerable(c,o))return e*o;var g,b;if($bm_isInstanceOfArray(e)&&isNumerable(c,o)){for(b=e.length,d=createTypedArray("float32",b),g=0;g<b;g+=1)d[g]=e[g]*o;return d}if(isNumerable(a,e)&&$bm_isInstanceOfArray(o)){for(b=o.length,d=createTypedArray("float32",b),g=0;g<b;g+=1)d[g]=e*o[g];return d}return 0}function div(e,o){var a=_typeof$1(e),c=_typeof$1(o),d;if(isNumerable(a,e)&&isNumerable(c,o))return e/o;var g,b;if($bm_isInstanceOfArray(e)&&isNumerable(c,o)){for(b=e.length,d=createTypedArray("float32",b),g=0;g<b;g+=1)d[g]=e[g]/o;return d}if(isNumerable(a,e)&&$bm_isInstanceOfArray(o)){for(b=o.length,d=createTypedArray("float32",b),g=0;g<b;g+=1)d[g]=e/o[g];return d}return 0}function mod(e,o){return typeof e=="string"&&(e=parseInt(e,10)),typeof o=="string"&&(o=parseInt(o,10)),e%o}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,o,a){if(o>a){var c=a;a=o,o=c}return Math.min(Math.max(e,o),a)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,o){if(typeof e=="number"||e instanceof Number)return o=o||0,Math.abs(e-o);o||(o=helperLengthArray);var a,c=Math.min(e.length,o.length),d=0;for(a=0;a<c;a+=1)d+=Math.pow(o[a]-e[a],2);return Math.sqrt(d)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var o=e[0],a=e[1],c=e[2],d=Math.max(o,a,c),g=Math.min(o,a,c),b,j,$=(d+g)/2;if(d===g)b=0,j=0;else{var _e=d-g;switch(j=$>.5?_e/(2-d-g):_e/(d+g),d){case o:b=(a-c)/_e+(a<c?6:0);break;case a:b=(c-o)/_e+2;break;case c:b=(o-a)/_e+4;break}b/=6}return[b,j,$,e[3]]}function hue2rgb(e,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+(o-e)*6*a:a<1/2?o:a<2/3?e+(o-e)*(2/3-a)*6:e}function hslToRgb(e){var o=e[0],a=e[1],c=e[2],d,g,b;if(a===0)d=c,b=c,g=c;else{var j=c<.5?c*(1+a):c+a-c*a,$=2*c-j;d=hue2rgb($,j,o+1/3),g=hue2rgb($,j,o),b=hue2rgb($,j,o-1/3)}return[d,g,b,e[3]]}function linear(e,o,a,c,d){if((c===void 0||d===void 0)&&(c=o,d=a,o=0,a=1),a<o){var g=a;a=o,o=g}if(e<=o)return c;if(e>=a)return d;var b=a===o?0:(e-o)/(a-o);if(!c.length)return c+(d-c)*b;var j,$=c.length,_e=createTypedArray("float32",$);for(j=0;j<$;j+=1)_e[j]=c[j]+(d[j]-c[j])*b;return _e}function random(e,o){if(o===void 0&&(e===void 0?(e=0,o=1):(o=e,e=void 0)),o.length){var a,c=o.length;e||(e=createTypedArray("float32",c));var d=createTypedArray("float32",c),g=BMMath.random();for(a=0;a<c;a+=1)d[a]=e[a]+g*(o[a]-e[a]);return d}e===void 0&&(e=0);var b=BMMath.random();return e+b*(o-e)}function createPath(e,o,a,c){var d,g=e.length,b=shapePool.newElement();b.setPathData(!!c,g);var j=[0,0],$,_e;for(d=0;d<g;d+=1)$=o&&o[d]?o[d]:j,_e=a&&a[d]?a[d]:j,b.setTripleAt(e[d][0],e[d][1],_e[0]+e[d][0],_e[1]+e[d][1],$[0]+e[d][0],$[1]+e[d][1],d,!0);return b}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function e(o,a){var c,d,g=this.pv.length?this.pv.length:1,b=createTypedArray("float32",g);o=5;var j=Math.floor(time*o);for(c=0,d=0;c<j;){for(d=0;d<g;d+=1)b[d]+=-a+a*2*BMMath.random();c+=1}var $=time*o,_e=$-Math.floor($),st=createTypedArray("float32",g);if(g>1){for(d=0;d<g;d+=1)st[d]=this.pv[d]+b[d]+(-a+a*2*BMMath.random())*_e;return st}return this.pv+b[0]+(-a+a*2*BMMath.random())*_e}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(e,o){return loopIn(e,o,!0)}function loopOutDuration(e,o){return loopOut(e,o,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(e,o){var a=[o[0]-e[0],o[1]-e[1],o[2]-e[2]],c=Math.atan2(a[0],Math.sqrt(a[1]*a[1]+a[2]*a[2]))/degToRads,d=-Math.atan2(a[1],a[2])/degToRads;return[d,c,0]}function easeOut(e,o,a,c,d){return applyEase(easeOutBez,e,o,a,c,d)}function easeIn(e,o,a,c,d){return applyEase(easeInBez,e,o,a,c,d)}function ease(e,o,a,c,d){return applyEase(easeInOutBez,e,o,a,c,d)}function applyEase(e,o,a,c,d,g){d===void 0?(d=a,g=c):o=(o-a)/(c-a),o>1?o=1:o<0&&(o=0);var b=e(o);if($bm_isInstanceOfArray(d)){var j,$=d.length,_e=createTypedArray("float32",$);for(j=0;j<$;j+=1)_e[j]=(g[j]-d[j])*b+d[j];return _e}return(g-d)*b+d}function nearestKey(e){var o,a=data.k.length,c,d;if(!data.k.length||typeof data.k[0]=="number")c=0,d=0;else if(c=-1,e*=elem.comp.globalData.frameRate,e<data.k[0].t)c=1,d=data.k[0].t;else{for(o=0;o<a-1;o+=1)if(e===data.k[o].t){c=o+1,d=data.k[o].t;break}else if(e>data.k[o].t&&e<data.k[o+1].t){e-data.k[o].t>data.k[o+1].t-e?(c=o+2,d=data.k[o+1].t):(c=o+1,d=data.k[o].t);break}c===-1&&(c=o+1,d=data.k[o].t)}var g={};return g.index=c,g.time=d/elem.comp.globalData.frameRate,g}function key(e){var o,a,c;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+e);e-=1,o={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var d=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(c=d.length,a=0;a<c;a+=1)o[a]=d[a],o.value[a]=d[a];return o}function framesToTime(e,o){return o||(o=elem.comp.globalData.frameRate),e/o}function timeToFrames(e,o){return!e&&e!==0&&(e=time),o||(o=elem.comp.globalData.frameRate),e*o}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,o){return typeof value=="string"?o===void 0?value.substring(e):value.substring(e,o):""}function substr(e,o){return typeof value=="string"?o===void 0?value.substr(e):value.substr(e,o):""}function posterizeTime(e){time=e===0?0:Math.floor(time*e)/e,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={};e.initExpressions=o,e.resetFrame=ExpressionManager.resetFrame;function o(a){var c=0,d=[];function g(){c+=1}function b(){c-=1,c===0&&$()}function j(_e){d.indexOf(_e)===-1&&d.push(_e)}function $(){var _e,st=d.length;for(_e=0;_e<st;_e+=1)d[_e].release();d.length=0}a.renderer.compInterface=CompExpressionInterface(a.renderer),a.renderer.globalData.projectInterface.registerComposition(a.renderer),a.renderer.globalData.pushExpression=g,a.renderer.globalData.popExpression=b,a.renderer.globalData.registerExpressionProperty=j}return e}(),MaskManagerInterface=function(){function e(a,c){this._mask=a,this._data=c}Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var o=function(c){var d=createSizedArray(c.viewData.length),g,b=c.viewData.length;for(g=0;g<b;g+=1)d[g]=new e(c.viewData[g],c.masksProperties[g]);var j=function(_e){for(g=0;g<b;){if(c.masksProperties[g].nm===_e)return d[g];g+=1}return null};return j};return o}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},o={pv:[0,0,0],v:[0,0,0],mult:1};function a(b,j,$){Object.defineProperty(b,"velocity",{get:function(){return j.getVelocityAtTime(j.comp.currentFrame)}}),b.numKeys=j.keyframes?j.keyframes.length:0,b.key=function(_e){if(!b.numKeys)return 0;var st="";"s"in j.keyframes[_e-1]?st=j.keyframes[_e-1].s:"e"in j.keyframes[_e-2]?st=j.keyframes[_e-2].e:st=j.keyframes[_e-2].s;var rt=$==="unidimensional"?new Number(st):Object.assign({},st);return rt.time=j.keyframes[_e-1].t/j.elem.comp.globalData.frameRate,rt.value=$==="unidimensional"?st[0]:st,rt},b.valueAtTime=j.getValueAtTime,b.speedAtTime=j.getSpeedAtTime,b.velocityAtTime=j.getVelocityAtTime,b.propertyGroup=j.propertyGroup}function c(b){(!b||!("pv"in b))&&(b=e);var j=1/b.mult,$=b.pv*j,_e=new Number($);return _e.value=$,a(_e,b,"unidimensional"),function(){return b.k&&b.getValue(),$=b.v*j,_e.value!==$&&(_e=new Number($),_e.value=$,a(_e,b,"unidimensional")),_e}}function d(b){(!b||!("pv"in b))&&(b=o);var j=1/b.mult,$=b.data&&b.data.l||b.pv.length,_e=createTypedArray("float32",$),st=createTypedArray("float32",$);return _e.value=st,a(_e,b,"multidimensional"),function(){b.k&&b.getValue();for(var rt=0;rt<$;rt+=1)st[rt]=b.v[rt]*j,_e[rt]=st[rt];return _e}}function g(){return e}return function(b){return b?b.propType==="unidimensional"?c(b):d(b):g}}(),TransformExpressionInterface=function(){return function(e){function o(b){switch(b){case"scale":case"Scale":case"ADBE Scale":case 6:return o.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return o.rotation;case"ADBE Rotate X":return o.xRotation;case"ADBE Rotate Y":return o.yRotation;case"position":case"Position":case"ADBE Position":case 2:return o.position;case"ADBE Position_0":return o.xPosition;case"ADBE Position_1":return o.yPosition;case"ADBE Position_2":return o.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return o.anchorPoint;case"opacity":case"Opacity":case 11:return o.opacity;default:return null}}Object.defineProperty(o,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(o,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(o,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(o,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(o,"scale",{get:ExpressionPropertyInterface(e.s)});var a,c,d,g;return e.p?g=ExpressionPropertyInterface(e.p):(a=ExpressionPropertyInterface(e.px),c=ExpressionPropertyInterface(e.py),e.pz&&(d=ExpressionPropertyInterface(e.pz))),Object.defineProperty(o,"position",{get:function(){return e.p?g():[a(),c(),d?d():0]}}),Object.defineProperty(o,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(o,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(o,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(o,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(o,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(o,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(o,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(o,"orientation",{get:ExpressionPropertyInterface(e.or)}),o}}(),LayerExpressionInterface=function(){function e(_e){var st=new Matrix;if(_e!==void 0){var rt=this._elem.finalTransform.mProp.getValueAtTime(_e);rt.clone(st)}else{var ut=this._elem.finalTransform.mProp;ut.applyToMatrix(st)}return st}function o(_e,st){var rt=this.getMatrix(st);return rt.props[12]=0,rt.props[13]=0,rt.props[14]=0,this.applyPoint(rt,_e)}function a(_e,st){var rt=this.getMatrix(st);return this.applyPoint(rt,_e)}function c(_e,st){var rt=this.getMatrix(st);return rt.props[12]=0,rt.props[13]=0,rt.props[14]=0,this.invertPoint(rt,_e)}function d(_e,st){var rt=this.getMatrix(st);return this.invertPoint(rt,_e)}function g(_e,st){if(this._elem.hierarchy&&this._elem.hierarchy.length){var rt,ut=this._elem.hierarchy.length;for(rt=0;rt<ut;rt+=1)this._elem.hierarchy[rt].finalTransform.mProp.applyToMatrix(_e)}return _e.applyToPointArray(st[0],st[1],st[2]||0)}function b(_e,st){if(this._elem.hierarchy&&this._elem.hierarchy.length){var rt,ut=this._elem.hierarchy.length;for(rt=0;rt<ut;rt+=1)this._elem.hierarchy[rt].finalTransform.mProp.applyToMatrix(_e)}return _e.inversePoint(st)}function j(_e){var st=new Matrix;if(st.reset(),this._elem.finalTransform.mProp.applyToMatrix(st),this._elem.hierarchy&&this._elem.hierarchy.length){var rt,ut=this._elem.hierarchy.length;for(rt=0;rt<ut;rt+=1)this._elem.hierarchy[rt].finalTransform.mProp.applyToMatrix(st);return st.inversePoint(_e)}return st.inversePoint(_e)}function $(){return[1,1,1,1]}return function(_e){var st;function rt(wt){gt.mask=new MaskManagerInterface(wt,_e)}function ut(wt){gt.effect=wt}function gt(wt){switch(wt){case"ADBE Root Vectors Group":case"Contents":case 2:return gt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return st;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return gt.effect;case"ADBE Text Properties":return gt.textInterface;default:return null}}gt.getMatrix=e,gt.invertPoint=b,gt.applyPoint=g,gt.toWorld=a,gt.toWorldVec=o,gt.fromWorld=d,gt.fromWorldVec=c,gt.toComp=a,gt.fromComp=j,gt.sampleImage=$,gt.sourceRectAtTime=_e.sourceRectAtTime.bind(_e),gt._elem=_e,st=TransformExpressionInterface(_e.finalTransform.mProp);var yt=getDescriptor(st,"anchorPoint");return Object.defineProperties(gt,{hasParent:{get:function(){return _e.hierarchy.length}},parent:{get:function(){return _e.hierarchy[0].layerInterface}},rotation:getDescriptor(st,"rotation"),scale:getDescriptor(st,"scale"),position:getDescriptor(st,"position"),opacity:getDescriptor(st,"opacity"),anchorPoint:yt,anchor_point:yt,transform:{get:function(){return st}},active:{get:function(){return _e.isInRange}}}),gt.startTime=_e.data.st,gt.index=_e.data.ind,gt.source=_e.data.refId,gt.height=_e.data.ty===0?_e.data.h:100,gt.width=_e.data.ty===0?_e.data.w:100,gt.inPoint=_e.data.ip/_e.comp.globalData.frameRate,gt.outPoint=_e.data.op/_e.comp.globalData.frameRate,gt._name=_e.data.nm,gt.registerMaskInterface=rt,gt.registerEffectsInterface=ut,gt}}(),propertyGroupFactory=function(){return function(e,o){return function(a){return a=a===void 0?1:a,a<=0?e:o(a-1)}}}(),PropertyInterface=function(){return function(e,o){var a={_name:e};function c(d){return d=d===void 0?1:d,d<=0?a:o(d-1)}return c}}(),EffectsExpressionInterface=function(){var e={createEffectsInterface:o};function o(d,g){if(d.effectsManager){var b=[],j=d.data.ef,$,_e=d.effectsManager.effectElements.length;for($=0;$<_e;$+=1)b.push(a(j[$],d.effectsManager.effectElements[$],g,d));var st=d.data.ef||[],rt=function(gt){for($=0,_e=st.length;$<_e;){if(gt===st[$].nm||gt===st[$].mn||gt===st[$].ix)return b[$];$+=1}return null};return Object.defineProperty(rt,"numProperties",{get:function(){return st.length}}),rt}return null}function a(d,g,b,j){function $(gt){for(var yt=d.ef,wt=0,Ct=yt.length;wt<Ct;){if(gt===yt[wt].nm||gt===yt[wt].mn||gt===yt[wt].ix)return yt[wt].ty===5?st[wt]:st[wt]();wt+=1}throw new Error}var _e=propertyGroupFactory($,b),st=[],rt,ut=d.ef.length;for(rt=0;rt<ut;rt+=1)d.ef[rt].ty===5?st.push(a(d.ef[rt],g.effectElements[rt],g.effectElements[rt].propertyGroup,j)):st.push(c(g.effectElements[rt],d.ef[rt].ty,j,_e));return d.mn==="ADBE Color Control"&&Object.defineProperty($,"color",{get:function(){return st[0]()}}),Object.defineProperties($,{numProperties:{get:function(){return d.np}},_name:{value:d.nm},propertyGroup:{value:_e}}),$.enabled=d.en!==0,$.active=$.enabled,$}function c(d,g,b,j){var $=ExpressionPropertyInterface(d.p);function _e(){return g===10?b.comp.compInterface(d.p.v):$()}return d.p.setGroupProperty&&d.p.setGroupProperty(PropertyInterface("",j)),_e}return e}(),ShapePathInterface=function(){return function(o,a,c){var d=a.sh;function g(j){return j==="Shape"||j==="shape"||j==="Path"||j==="path"||j==="ADBE Vector Shape"||j===2?g.path:null}var b=propertyGroupFactory(g,c);return d.setGroupProperty(PropertyInterface("Path",b)),Object.defineProperties(g,{path:{get:function(){return d.k&&d.getValue(),d}},shape:{get:function(){return d.k&&d.getValue(),d}},_name:{value:o.nm},ix:{value:o.ix},propertyIndex:{value:o.ix},mn:{value:o.mn},propertyGroup:{value:c}}),g}}(),ShapeExpressionInterface=function(){function e(yt,wt,Ct){var Pt=[],At,Tt=yt?yt.length:0;for(At=0;At<Tt;At+=1)yt[At].ty==="gr"?Pt.push(a(yt[At],wt[At],Ct)):yt[At].ty==="fl"?Pt.push(c(yt[At],wt[At],Ct)):yt[At].ty==="st"?Pt.push(b(yt[At],wt[At],Ct)):yt[At].ty==="tm"?Pt.push(j(yt[At],wt[At],Ct)):yt[At].ty==="tr"||(yt[At].ty==="el"?Pt.push(_e(yt[At],wt[At],Ct)):yt[At].ty==="sr"?Pt.push(st(yt[At],wt[At],Ct)):yt[At].ty==="sh"?Pt.push(ShapePathInterface(yt[At],wt[At],Ct)):yt[At].ty==="rc"?Pt.push(rt(yt[At],wt[At],Ct)):yt[At].ty==="rd"?Pt.push(ut(yt[At],wt[At],Ct)):yt[At].ty==="rp"?Pt.push(gt(yt[At],wt[At],Ct)):yt[At].ty==="gf"?Pt.push(d(yt[At],wt[At],Ct)):Pt.push(g(yt[At],wt[At])));return Pt}function o(yt,wt,Ct){var Pt,At=function(It){for(var Lt=0,Ft=Pt.length;Lt<Ft;){if(Pt[Lt]._name===It||Pt[Lt].mn===It||Pt[Lt].propertyIndex===It||Pt[Lt].ix===It||Pt[Lt].ind===It)return Pt[Lt];Lt+=1}return typeof It=="number"?Pt[It-1]:null};At.propertyGroup=propertyGroupFactory(At,Ct),Pt=e(yt.it,wt.it,At.propertyGroup),At.numProperties=Pt.length;var Tt=$(yt.it[yt.it.length-1],wt.it[wt.it.length-1],At.propertyGroup);return At.transform=Tt,At.propertyIndex=yt.cix,At._name=yt.nm,At}function a(yt,wt,Ct){var Pt=function(It){switch(It){case"ADBE Vectors Group":case"Contents":case 2:return Pt.content;default:return Pt.transform}};Pt.propertyGroup=propertyGroupFactory(Pt,Ct);var At=o(yt,wt,Pt.propertyGroup),Tt=$(yt.it[yt.it.length-1],wt.it[wt.it.length-1],Pt.propertyGroup);return Pt.content=At,Pt.transform=Tt,Object.defineProperty(Pt,"_name",{get:function(){return yt.nm}}),Pt.numProperties=yt.np,Pt.propertyIndex=yt.ix,Pt.nm=yt.nm,Pt.mn=yt.mn,Pt}function c(yt,wt,Ct){function Pt(At){return At==="Color"||At==="color"?Pt.color:At==="Opacity"||At==="opacity"?Pt.opacity:null}return Object.defineProperties(Pt,{color:{get:ExpressionPropertyInterface(wt.c)},opacity:{get:ExpressionPropertyInterface(wt.o)},_name:{value:yt.nm},mn:{value:yt.mn}}),wt.c.setGroupProperty(PropertyInterface("Color",Ct)),wt.o.setGroupProperty(PropertyInterface("Opacity",Ct)),Pt}function d(yt,wt,Ct){function Pt(At){return At==="Start Point"||At==="start point"?Pt.startPoint:At==="End Point"||At==="end point"?Pt.endPoint:At==="Opacity"||At==="opacity"?Pt.opacity:null}return Object.defineProperties(Pt,{startPoint:{get:ExpressionPropertyInterface(wt.s)},endPoint:{get:ExpressionPropertyInterface(wt.e)},opacity:{get:ExpressionPropertyInterface(wt.o)},type:{get:function(){return"a"}},_name:{value:yt.nm},mn:{value:yt.mn}}),wt.s.setGroupProperty(PropertyInterface("Start Point",Ct)),wt.e.setGroupProperty(PropertyInterface("End Point",Ct)),wt.o.setGroupProperty(PropertyInterface("Opacity",Ct)),Pt}function g(){function yt(){return null}return yt}function b(yt,wt,Ct){var Pt=propertyGroupFactory(Ft,Ct),At=propertyGroupFactory(Lt,Pt);function Tt(Nt){Object.defineProperty(Lt,yt.d[Nt].nm,{get:ExpressionPropertyInterface(wt.d.dataProps[Nt].p)})}var kt,It=yt.d?yt.d.length:0,Lt={};for(kt=0;kt<It;kt+=1)Tt(kt),wt.d.dataProps[kt].p.setGroupProperty(At);function Ft(Nt){return Nt==="Color"||Nt==="color"?Ft.color:Nt==="Opacity"||Nt==="opacity"?Ft.opacity:Nt==="Stroke Width"||Nt==="stroke width"?Ft.strokeWidth:null}return Object.defineProperties(Ft,{color:{get:ExpressionPropertyInterface(wt.c)},opacity:{get:ExpressionPropertyInterface(wt.o)},strokeWidth:{get:ExpressionPropertyInterface(wt.w)},dash:{get:function(){return Lt}},_name:{value:yt.nm},mn:{value:yt.mn}}),wt.c.setGroupProperty(PropertyInterface("Color",Pt)),wt.o.setGroupProperty(PropertyInterface("Opacity",Pt)),wt.w.setGroupProperty(PropertyInterface("Stroke Width",Pt)),Ft}function j(yt,wt,Ct){function Pt(Tt){return Tt===yt.e.ix||Tt==="End"||Tt==="end"?Pt.end:Tt===yt.s.ix?Pt.start:Tt===yt.o.ix?Pt.offset:null}var At=propertyGroupFactory(Pt,Ct);return Pt.propertyIndex=yt.ix,wt.s.setGroupProperty(PropertyInterface("Start",At)),wt.e.setGroupProperty(PropertyInterface("End",At)),wt.o.setGroupProperty(PropertyInterface("Offset",At)),Pt.propertyIndex=yt.ix,Pt.propertyGroup=Ct,Object.defineProperties(Pt,{start:{get:ExpressionPropertyInterface(wt.s)},end:{get:ExpressionPropertyInterface(wt.e)},offset:{get:ExpressionPropertyInterface(wt.o)},_name:{value:yt.nm}}),Pt.mn=yt.mn,Pt}function $(yt,wt,Ct){function Pt(Tt){return yt.a.ix===Tt||Tt==="Anchor Point"?Pt.anchorPoint:yt.o.ix===Tt||Tt==="Opacity"?Pt.opacity:yt.p.ix===Tt||Tt==="Position"?Pt.position:yt.r.ix===Tt||Tt==="Rotation"||Tt==="ADBE Vector Rotation"?Pt.rotation:yt.s.ix===Tt||Tt==="Scale"?Pt.scale:yt.sk&&yt.sk.ix===Tt||Tt==="Skew"?Pt.skew:yt.sa&&yt.sa.ix===Tt||Tt==="Skew Axis"?Pt.skewAxis:null}var At=propertyGroupFactory(Pt,Ct);return wt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",At)),wt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",At)),wt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",At)),wt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",At)),wt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",At)),wt.transform.mProps.sk&&(wt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",At)),wt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",At))),wt.transform.op.setGroupProperty(PropertyInterface("Opacity",At)),Object.defineProperties(Pt,{opacity:{get:ExpressionPropertyInterface(wt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(wt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(wt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(wt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(wt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(wt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(wt.transform.mProps.sa)},_name:{value:yt.nm}}),Pt.ty="tr",Pt.mn=yt.mn,Pt.propertyGroup=Ct,Pt}function _e(yt,wt,Ct){function Pt(kt){return yt.p.ix===kt?Pt.position:yt.s.ix===kt?Pt.size:null}var At=propertyGroupFactory(Pt,Ct);Pt.propertyIndex=yt.ix;var Tt=wt.sh.ty==="tm"?wt.sh.prop:wt.sh;return Tt.s.setGroupProperty(PropertyInterface("Size",At)),Tt.p.setGroupProperty(PropertyInterface("Position",At)),Object.defineProperties(Pt,{size:{get:ExpressionPropertyInterface(Tt.s)},position:{get:ExpressionPropertyInterface(Tt.p)},_name:{value:yt.nm}}),Pt.mn=yt.mn,Pt}function st(yt,wt,Ct){function Pt(kt){return yt.p.ix===kt?Pt.position:yt.r.ix===kt?Pt.rotation:yt.pt.ix===kt?Pt.points:yt.or.ix===kt||kt==="ADBE Vector Star Outer Radius"?Pt.outerRadius:yt.os.ix===kt?Pt.outerRoundness:yt.ir&&(yt.ir.ix===kt||kt==="ADBE Vector Star Inner Radius")?Pt.innerRadius:yt.is&&yt.is.ix===kt?Pt.innerRoundness:null}var At=propertyGroupFactory(Pt,Ct),Tt=wt.sh.ty==="tm"?wt.sh.prop:wt.sh;return Pt.propertyIndex=yt.ix,Tt.or.setGroupProperty(PropertyInterface("Outer Radius",At)),Tt.os.setGroupProperty(PropertyInterface("Outer Roundness",At)),Tt.pt.setGroupProperty(PropertyInterface("Points",At)),Tt.p.setGroupProperty(PropertyInterface("Position",At)),Tt.r.setGroupProperty(PropertyInterface("Rotation",At)),yt.ir&&(Tt.ir.setGroupProperty(PropertyInterface("Inner Radius",At)),Tt.is.setGroupProperty(PropertyInterface("Inner Roundness",At))),Object.defineProperties(Pt,{position:{get:ExpressionPropertyInterface(Tt.p)},rotation:{get:ExpressionPropertyInterface(Tt.r)},points:{get:ExpressionPropertyInterface(Tt.pt)},outerRadius:{get:ExpressionPropertyInterface(Tt.or)},outerRoundness:{get:ExpressionPropertyInterface(Tt.os)},innerRadius:{get:ExpressionPropertyInterface(Tt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Tt.is)},_name:{value:yt.nm}}),Pt.mn=yt.mn,Pt}function rt(yt,wt,Ct){function Pt(kt){return yt.p.ix===kt?Pt.position:yt.r.ix===kt?Pt.roundness:yt.s.ix===kt||kt==="Size"||kt==="ADBE Vector Rect Size"?Pt.size:null}var At=propertyGroupFactory(Pt,Ct),Tt=wt.sh.ty==="tm"?wt.sh.prop:wt.sh;return Pt.propertyIndex=yt.ix,Tt.p.setGroupProperty(PropertyInterface("Position",At)),Tt.s.setGroupProperty(PropertyInterface("Size",At)),Tt.r.setGroupProperty(PropertyInterface("Rotation",At)),Object.defineProperties(Pt,{position:{get:ExpressionPropertyInterface(Tt.p)},roundness:{get:ExpressionPropertyInterface(Tt.r)},size:{get:ExpressionPropertyInterface(Tt.s)},_name:{value:yt.nm}}),Pt.mn=yt.mn,Pt}function ut(yt,wt,Ct){function Pt(kt){return yt.r.ix===kt||kt==="Round Corners 1"?Pt.radius:null}var At=propertyGroupFactory(Pt,Ct),Tt=wt;return Pt.propertyIndex=yt.ix,Tt.rd.setGroupProperty(PropertyInterface("Radius",At)),Object.defineProperties(Pt,{radius:{get:ExpressionPropertyInterface(Tt.rd)},_name:{value:yt.nm}}),Pt.mn=yt.mn,Pt}function gt(yt,wt,Ct){function Pt(kt){return yt.c.ix===kt||kt==="Copies"?Pt.copies:yt.o.ix===kt||kt==="Offset"?Pt.offset:null}var At=propertyGroupFactory(Pt,Ct),Tt=wt;return Pt.propertyIndex=yt.ix,Tt.c.setGroupProperty(PropertyInterface("Copies",At)),Tt.o.setGroupProperty(PropertyInterface("Offset",At)),Object.defineProperties(Pt,{copies:{get:ExpressionPropertyInterface(Tt.c)},offset:{get:ExpressionPropertyInterface(Tt.o)},_name:{value:yt.nm}}),Pt.mn=yt.mn,Pt}return function(yt,wt,Ct){var Pt;function At(kt){if(typeof kt=="number")return kt=kt===void 0?1:kt,kt===0?Ct:Pt[kt-1];for(var It=0,Lt=Pt.length;It<Lt;){if(Pt[It]._name===kt)return Pt[It];It+=1}return null}function Tt(){return Ct}return At.propertyGroup=propertyGroupFactory(At,Tt),Pt=e(yt,wt,At.propertyGroup),At.numProperties=Pt.length,At._name="Contents",At}}(),TextExpressionInterface=function(){return function(e){var o;function a(c){switch(c){case"ADBE Text Document":return a.sourceText;default:return null}}return Object.defineProperty(a,"sourceText",{get:function(){e.textProperty.getValue();var d=e.textProperty.currentData.t;return(!o||d!==o.value)&&(o=new String(d),o.value=d||new String(d),Object.defineProperty(o,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),o}}),a}}();function _typeof(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(a){return typeof a}:_typeof=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(e)}var FootageInterface=function(){var e=function(c){var d="",g=c.getFootageData();function b(){return d="",g=c.getFootageData(),j}function j($){if(g[$])return d=$,g=g[$],_typeof(g)==="object"?j:g;var _e=$.indexOf(d);if(_e!==-1){var st=parseInt($.substr(_e+d.length),10);return g=g[st],_typeof(g)==="object"?j:g}return""}return b},o=function(c){function d(g){return g==="Outline"?d.outlineInterface():null}return d._name="Outline",d.outlineInterface=e(c),d};return function(a){function c(d){return d==="Data"?c.dataInterface:null}return c._name="Data",c.dataInterface=o(a),c}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){function e(b,j,$){j.x&&($.k=!0,$.x=!0,$.initiateExpression=ExpressionManager.initiateExpression,$.effectsSequence.push($.initiateExpression(b,j,$).bind($)))}function o(b){return b*=this.elem.globalData.frameRate,b-=this.offsetTime,b!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<b?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(b,this._cachingAtTime),this._cachingAtTime.lastFrame=b),this._cachingAtTime.value}function a(b){var j=-.01,$=this.getValueAtTime(b),_e=this.getValueAtTime(b+j),st=0;if($.length){var rt;for(rt=0;rt<$.length;rt+=1)st+=Math.pow(_e[rt]-$[rt],2);st=Math.sqrt(st)*100}else st=0;return st}function c(b){if(this.vel!==void 0)return this.vel;var j=-.001,$=this.getValueAtTime(b),_e=this.getValueAtTime(b+j),st;if($.length){st=createTypedArray("float32",$.length);var rt;for(rt=0;rt<$.length;rt+=1)st[rt]=(_e[rt]-$[rt])/j}else st=(_e-$)/j;return st}function d(){return this.pv}function g(b){this.propertyGroup=b}return{searchExpressions:e,getSpeedAtTime:a,getVelocityAtTime:c,getValueAtTime:o,getStaticValueAtTime:d,setGroupProperty:g}}();function addPropertyDecorator(){function e(ut,gt,yt){if(!this.k||!this.keyframes)return this.pv;ut=ut?ut.toLowerCase():"";var wt=this.comp.renderedFrame,Ct=this.keyframes,Pt=Ct[Ct.length-1].t;if(wt<=Pt)return this.pv;var At,Tt;yt?(gt?At=Math.abs(Pt-this.elem.comp.globalData.frameRate*gt):At=Math.max(0,Pt-this.elem.data.ip),Tt=Pt-At):((!gt||gt>Ct.length-1)&&(gt=Ct.length-1),Tt=Ct[Ct.length-1-gt].t,At=Pt-Tt);var kt,It,Lt;if(ut==="pingpong"){var Ft=Math.floor((wt-Tt)/At);if(Ft%2!==0)return this.getValueAtTime((At-(wt-Tt)%At+Tt)/this.comp.globalData.frameRate,0)}else if(ut==="offset"){var Nt=this.getValueAtTime(Tt/this.comp.globalData.frameRate,0),Ht=this.getValueAtTime(Pt/this.comp.globalData.frameRate,0),dr=this.getValueAtTime(((wt-Tt)%At+Tt)/this.comp.globalData.frameRate,0),hs=Math.floor((wt-Tt)/At);if(this.pv.length){for(Lt=new Array(Nt.length),It=Lt.length,kt=0;kt<It;kt+=1)Lt[kt]=(Ht[kt]-Nt[kt])*hs+dr[kt];return Lt}return(Ht-Nt)*hs+dr}else if(ut==="continue"){var us=this.getValueAtTime(Pt/this.comp.globalData.frameRate,0),hn=this.getValueAtTime((Pt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Lt=new Array(us.length),It=Lt.length,kt=0;kt<It;kt+=1)Lt[kt]=us[kt]+(us[kt]-hn[kt])*((wt-Pt)/this.comp.globalData.frameRate)/5e-4;return Lt}return us+(us-hn)*((wt-Pt)/.001)}return this.getValueAtTime(((wt-Tt)%At+Tt)/this.comp.globalData.frameRate,0)}function o(ut,gt,yt){if(!this.k)return this.pv;ut=ut?ut.toLowerCase():"";var wt=this.comp.renderedFrame,Ct=this.keyframes,Pt=Ct[0].t;if(wt>=Pt)return this.pv;var At,Tt;yt?(gt?At=Math.abs(this.elem.comp.globalData.frameRate*gt):At=Math.max(0,this.elem.data.op-Pt),Tt=Pt+At):((!gt||gt>Ct.length-1)&&(gt=Ct.length-1),Tt=Ct[gt].t,At=Tt-Pt);var kt,It,Lt;if(ut==="pingpong"){var Ft=Math.floor((Pt-wt)/At);if(Ft%2===0)return this.getValueAtTime(((Pt-wt)%At+Pt)/this.comp.globalData.frameRate,0)}else if(ut==="offset"){var Nt=this.getValueAtTime(Pt/this.comp.globalData.frameRate,0),Ht=this.getValueAtTime(Tt/this.comp.globalData.frameRate,0),dr=this.getValueAtTime((At-(Pt-wt)%At+Pt)/this.comp.globalData.frameRate,0),hs=Math.floor((Pt-wt)/At)+1;if(this.pv.length){for(Lt=new Array(Nt.length),It=Lt.length,kt=0;kt<It;kt+=1)Lt[kt]=dr[kt]-(Ht[kt]-Nt[kt])*hs;return Lt}return dr-(Ht-Nt)*hs}else if(ut==="continue"){var us=this.getValueAtTime(Pt/this.comp.globalData.frameRate,0),hn=this.getValueAtTime((Pt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Lt=new Array(us.length),It=Lt.length,kt=0;kt<It;kt+=1)Lt[kt]=us[kt]+(us[kt]-hn[kt])*(Pt-wt)/.001;return Lt}return us+(us-hn)*(Pt-wt)/.001}return this.getValueAtTime((At-((Pt-wt)%At+Pt))/this.comp.globalData.frameRate,0)}function a(ut,gt){if(!this.k)return this.pv;if(ut=(ut||.4)*.5,gt=Math.floor(gt||5),gt<=1)return this.pv;var yt=this.comp.renderedFrame/this.comp.globalData.frameRate,wt=yt-ut,Ct=yt+ut,Pt=gt>1?(Ct-wt)/(gt-1):1,At=0,Tt=0,kt;this.pv.length?kt=createTypedArray("float32",this.pv.length):kt=0;for(var It;At<gt;){if(It=this.getValueAtTime(wt+At*Pt),this.pv.length)for(Tt=0;Tt<this.pv.length;Tt+=1)kt[Tt]+=It[Tt];else kt+=It;At+=1}if(this.pv.length)for(Tt=0;Tt<this.pv.length;Tt+=1)kt[Tt]/=gt;else kt/=gt;return kt}function c(ut){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var gt=this._transformCachingAtTime.v;if(gt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var yt=this.a.getValueAtTime(ut);gt.translate(-yt[0]*this.a.mult,-yt[1]*this.a.mult,yt[2]*this.a.mult)}if(this.appliedTransformations<2){var wt=this.s.getValueAtTime(ut);gt.scale(wt[0]*this.s.mult,wt[1]*this.s.mult,wt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ct=this.sk.getValueAtTime(ut),Pt=this.sa.getValueAtTime(ut);gt.skewFromAxis(-Ct*this.sk.mult,Pt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var At=this.r.getValueAtTime(ut);gt.rotate(-At*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Tt=this.rz.getValueAtTime(ut),kt=this.ry.getValueAtTime(ut),It=this.rx.getValueAtTime(ut),Lt=this.or.getValueAtTime(ut);gt.rotateZ(-Tt*this.rz.mult).rotateY(kt*this.ry.mult).rotateX(It*this.rx.mult).rotateZ(-Lt[2]*this.or.mult).rotateY(Lt[1]*this.or.mult).rotateX(Lt[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Ft=this.px.getValueAtTime(ut),Nt=this.py.getValueAtTime(ut);if(this.data.p.z){var Ht=this.pz.getValueAtTime(ut);gt.translate(Ft*this.px.mult,Nt*this.py.mult,-Ht*this.pz.mult)}else gt.translate(Ft*this.px.mult,Nt*this.py.mult,0)}else{var dr=this.p.getValueAtTime(ut);gt.translate(dr[0]*this.p.mult,dr[1]*this.p.mult,-dr[2]*this.p.mult)}return gt}function d(){return this.v.clone(new Matrix)}var g=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(ut,gt,yt){var wt=g(ut,gt,yt);return wt.dynamicProperties.length?wt.getValueAtTime=c.bind(wt):wt.getValueAtTime=d.bind(wt),wt.setGroupProperty=expressionHelpers.setGroupProperty,wt};var b=PropertyFactory.getProp;PropertyFactory.getProp=function(ut,gt,yt,wt,Ct){var Pt=b(ut,gt,yt,wt,Ct);Pt.kf?Pt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Pt):Pt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Pt),Pt.setGroupProperty=expressionHelpers.setGroupProperty,Pt.loopOut=e,Pt.loopIn=o,Pt.smooth=a,Pt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Pt),Pt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Pt),Pt.numKeys=gt.a===1?gt.k.length:0,Pt.propertyIndex=gt.ix;var At=0;return yt!==0&&(At=createTypedArray("float32",gt.a===1?gt.k[0].s.length:gt.k.length)),Pt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:At},expressionHelpers.searchExpressions(ut,gt,Pt),Pt.k&&Ct.addDynamicProperty(Pt),Pt};function j(ut){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),ut*=this.elem.globalData.frameRate,ut-=this.offsetTime,ut!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<ut?this._caching.lastIndex:0,this._cachingAtTime.lastTime=ut,this.interpolateShape(ut,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var $=ShapePropertyFactory.getConstructorFunction(),_e=ShapePropertyFactory.getKeyframedConstructorFunction();function st(){}st.prototype={vertices:function(gt,yt){this.k&&this.getValue();var wt=this.v;yt!==void 0&&(wt=this.getValueAtTime(yt,0));var Ct,Pt=wt._length,At=wt[gt],Tt=wt.v,kt=createSizedArray(Pt);for(Ct=0;Ct<Pt;Ct+=1)gt==="i"||gt==="o"?kt[Ct]=[At[Ct][0]-Tt[Ct][0],At[Ct][1]-Tt[Ct][1]]:kt[Ct]=[At[Ct][0],At[Ct][1]];return kt},points:function(gt){return this.vertices("v",gt)},inTangents:function(gt){return this.vertices("i",gt)},outTangents:function(gt){return this.vertices("o",gt)},isClosed:function(){return this.v.c},pointOnPath:function(gt,yt){var wt=this.v;yt!==void 0&&(wt=this.getValueAtTime(yt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(wt));for(var Ct=this._segmentsLength,Pt=Ct.lengths,At=Ct.totalLength*gt,Tt=0,kt=Pt.length,It=0,Lt;Tt<kt;){if(It+Pt[Tt].addedLength>At){var Ft=Tt,Nt=wt.c&&Tt===kt-1?0:Tt+1,Ht=(At-It)/Pt[Tt].addedLength;Lt=bez.getPointInSegment(wt.v[Ft],wt.v[Nt],wt.o[Ft],wt.i[Nt],Ht,Pt[Tt]);break}else It+=Pt[Tt].addedLength;Tt+=1}return Lt||(Lt=wt.c?[wt.v[0][0],wt.v[0][1]]:[wt.v[wt._length-1][0],wt.v[wt._length-1][1]]),Lt},vectorOnPath:function(gt,yt,wt){gt==1?gt=this.v.c:gt==0&&(gt=.999);var Ct=this.pointOnPath(gt,yt),Pt=this.pointOnPath(gt+.001,yt),At=Pt[0]-Ct[0],Tt=Pt[1]-Ct[1],kt=Math.sqrt(Math.pow(At,2)+Math.pow(Tt,2));if(kt===0)return[0,0];var It=wt==="tangent"?[At/kt,Tt/kt]:[-Tt/kt,At/kt];return It},tangentOnPath:function(gt,yt){return this.vectorOnPath(gt,yt,"tangent")},normalOnPath:function(gt,yt){return this.vectorOnPath(gt,yt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([st],$),extendPrototype([st],_e),_e.prototype.getValueAtTime=j,_e.prototype.initiateExpression=ExpressionManager.initiateExpression;var rt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(ut,gt,yt,wt,Ct){var Pt=rt(ut,gt,yt,wt,Ct);return Pt.propertyIndex=gt.ix,Pt.lock=!1,yt===3?expressionHelpers.searchExpressions(ut,gt.pt,Pt):yt===4&&expressionHelpers.searchExpressions(ut,gt.ks,Pt),Pt.k&&ut.addDynamicProperty(Pt),Pt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function e(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(o,a){var c=this.calculateExpression(a);if(o.t!==c){var d={};return this.copyData(d,o),d.t=c.toString(),d.__complete=!1,d}return o},TextProperty.prototype.searchProperty=function(){var o=this.searchKeyframes(),a=this.searchExpressions();return this.kf=o||a,this.kf},TextProperty.prototype.searchExpressions=e}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function e(o,a){var c=createNS("feMerge");c.setAttribute("result",o);var d,g;for(g=0;g<a.length;g+=1)d=createNS("feMergeNode"),d.setAttribute("in",a[g]),c.appendChild(d),c.appendChild(d);return c}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,o,a,c,d){this.filterManager=o;var g=createNS("feColorMatrix");g.setAttribute("type","matrix"),g.setAttribute("color-interpolation-filters","linearRGB"),g.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=g,g.setAttribute("result",c+"_tint_1"),e.appendChild(g),g=createNS("feColorMatrix"),g.setAttribute("type","matrix"),g.setAttribute("color-interpolation-filters","sRGB"),g.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),g.setAttribute("result",c+"_tint_2"),e.appendChild(g),this.matrixFilter=g;var b=this.createMergeNode(c,[d,c+"_tint_1",c+"_tint_2"]);e.appendChild(b)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var o=this.filterManager.effectElements[0].p.v,a=this.filterManager.effectElements[1].p.v,c=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+c+" 0"),this.matrixFilter.setAttribute("values",a[0]-o[0]+" 0 0 0 "+o[0]+" "+(a[1]-o[1])+" 0 0 0 "+o[1]+" "+(a[2]-o[2])+" 0 0 0 "+o[2]+" 0 0 0 1 0")}};function SVGFillFilter(e,o,a,c){this.filterManager=o;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),d.setAttribute("result",c),e.appendChild(d),this.matrixFilter=d}SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var o=this.filterManager.effectElements[2].p.v,a=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+o[0]+" 0 0 0 0 "+o[1]+" 0 0 0 0 "+o[2]+" 0 0 0 "+a+" 0")}};function SVGStrokeEffect(e,o,a){this.initialized=!1,this.filterManager=o,this.elem=a,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var e=this.elem.layerElement.children||this.elem.layerElement.childNodes,o,a,c,d;for(this.filterManager.effectElements[1].p.v===1?(d=this.elem.maskManager.masksProperties.length,c=0):(c=this.filterManager.effectElements[0].p.v-1,d=c+1),a=createNS("g"),a.setAttribute("fill","none"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-dashoffset",1),c;c<d;c+=1)o=createNS("path"),a.appendChild(o),this.paths.push({p:o,m:c});if(this.filterManager.effectElements[10].p.v===3){var g=createNS("mask"),b=createElementID();g.setAttribute("id",b),g.setAttribute("mask-type","alpha"),g.appendChild(a),this.elem.globalData.defs.appendChild(g);var j=createNS("g");for(j.setAttribute("mask","url("+getLocationHref()+"#"+b+")");e[0];)j.appendChild(e[0]);this.elem.layerElement.appendChild(j),this.masker=g,a.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(e=this.elem.layerElement.children||this.elem.layerElement.childNodes;e.length;)this.elem.layerElement.removeChild(e[0]);this.elem.layerElement.appendChild(a),this.elem.layerElement.removeAttribute("mask"),a.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=a},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var o,a=this.paths.length,c,d;for(o=0;o<a;o+=1)if(this.paths[o].m!==-1&&(c=this.elem.maskManager.viewData[this.paths[o].m],d=this.paths[o].p,(e||this.filterManager._mdf||c.prop._mdf)&&d.setAttribute("d",c.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||c.prop._mdf)){var g;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var b=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,j=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,$=d.getTotalLength();g="0 0 0 "+$*b+" ";var _e=$*(j-b),st=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,rt=Math.floor(_e/st),ut;for(ut=0;ut<rt;ut+=1)g+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";g+="0 "+$*10+" 0 0"}else g="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;d.setAttribute("stroke-dasharray",g)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(e||this.filterManager.effectElements[3].p._mdf)){var gt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(gt[0]*255)+","+bmFloor(gt[1]*255)+","+bmFloor(gt[2]*255)+")")}};function SVGTritoneFilter(e,o,a,c){this.filterManager=o;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","linearRGB"),d.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(d);var g=createNS("feComponentTransfer");g.setAttribute("color-interpolation-filters","sRGB"),g.setAttribute("result",c),this.matrixFilter=g;var b=createNS("feFuncR");b.setAttribute("type","table"),g.appendChild(b),this.feFuncR=b;var j=createNS("feFuncG");j.setAttribute("type","table"),g.appendChild(j),this.feFuncG=j;var $=createNS("feFuncB");$.setAttribute("type","table"),g.appendChild($),this.feFuncB=$,e.appendChild(g)}SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var o=this.filterManager.effectElements[0].p.v,a=this.filterManager.effectElements[1].p.v,c=this.filterManager.effectElements[2].p.v,d=c[0]+" "+a[0]+" "+o[0],g=c[1]+" "+a[1]+" "+o[1],b=c[2]+" "+a[2]+" "+o[2];this.feFuncR.setAttribute("tableValues",d),this.feFuncG.setAttribute("tableValues",g),this.feFuncB.setAttribute("tableValues",b)}};function SVGProLevelsFilter(e,o,a,c){this.filterManager=o;var d=this.filterManager.effectElements,g=createNS("feComponentTransfer");(d[10].p.k||d[10].p.v!==0||d[11].p.k||d[11].p.v!==1||d[12].p.k||d[12].p.v!==1||d[13].p.k||d[13].p.v!==0||d[14].p.k||d[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",g)),(d[17].p.k||d[17].p.v!==0||d[18].p.k||d[18].p.v!==1||d[19].p.k||d[19].p.v!==1||d[20].p.k||d[20].p.v!==0||d[21].p.k||d[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",g)),(d[24].p.k||d[24].p.v!==0||d[25].p.k||d[25].p.v!==1||d[26].p.k||d[26].p.v!==1||d[27].p.k||d[27].p.v!==0||d[28].p.k||d[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",g)),(d[31].p.k||d[31].p.v!==0||d[32].p.k||d[32].p.v!==1||d[33].p.k||d[33].p.v!==1||d[34].p.k||d[34].p.v!==0||d[35].p.k||d[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",g)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(g.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(g)),(d[3].p.k||d[3].p.v!==0||d[4].p.k||d[4].p.v!==1||d[5].p.k||d[5].p.v!==1||d[6].p.k||d[6].p.v!==0||d[7].p.k||d[7].p.v!==1)&&(g=createNS("feComponentTransfer"),g.setAttribute("color-interpolation-filters","sRGB"),g.setAttribute("result",c),e.appendChild(g),this.feFuncRComposed=this.createFeFunc("feFuncR",g),this.feFuncGComposed=this.createFeFunc("feFuncG",g),this.feFuncBComposed=this.createFeFunc("feFuncB",g))}SVGProLevelsFilter.prototype.createFeFunc=function(e,o){var a=createNS(e);return a.setAttribute("type","table"),o.appendChild(a),a},SVGProLevelsFilter.prototype.getTableValue=function(e,o,a,c,d){for(var g=0,b=256,j,$=Math.min(e,o),_e=Math.max(e,o),st=Array.call(null,{length:b}),rt,ut=0,gt=d-c,yt=o-e;g<=256;)j=g/256,j<=$?rt=yt<0?d:c:j>=_e?rt=yt<0?c:d:rt=c+gt*Math.pow((j-e)/yt,1/a),st[ut]=rt,ut+=1,g+=256/(b-1);return st.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var o,a=this.filterManager.effectElements;this.feFuncRComposed&&(e||a[3].p._mdf||a[4].p._mdf||a[5].p._mdf||a[6].p._mdf||a[7].p._mdf)&&(o=this.getTableValue(a[3].p.v,a[4].p.v,a[5].p.v,a[6].p.v,a[7].p.v),this.feFuncRComposed.setAttribute("tableValues",o),this.feFuncGComposed.setAttribute("tableValues",o),this.feFuncBComposed.setAttribute("tableValues",o)),this.feFuncR&&(e||a[10].p._mdf||a[11].p._mdf||a[12].p._mdf||a[13].p._mdf||a[14].p._mdf)&&(o=this.getTableValue(a[10].p.v,a[11].p.v,a[12].p.v,a[13].p.v,a[14].p.v),this.feFuncR.setAttribute("tableValues",o)),this.feFuncG&&(e||a[17].p._mdf||a[18].p._mdf||a[19].p._mdf||a[20].p._mdf||a[21].p._mdf)&&(o=this.getTableValue(a[17].p.v,a[18].p.v,a[19].p.v,a[20].p.v,a[21].p.v),this.feFuncG.setAttribute("tableValues",o)),this.feFuncB&&(e||a[24].p._mdf||a[25].p._mdf||a[26].p._mdf||a[27].p._mdf||a[28].p._mdf)&&(o=this.getTableValue(a[24].p.v,a[25].p.v,a[26].p.v,a[27].p.v,a[28].p.v),this.feFuncB.setAttribute("tableValues",o)),this.feFuncA&&(e||a[31].p._mdf||a[32].p._mdf||a[33].p._mdf||a[34].p._mdf||a[35].p._mdf)&&(o=this.getTableValue(a[31].p.v,a[32].p.v,a[33].p.v,a[34].p.v,a[35].p.v),this.feFuncA.setAttribute("tableValues",o))}};function SVGDropShadowEffect(e,o,a,c,d){var g=o.container.globalData.renderConfig.filterSize,b=o.data.fs||g;e.setAttribute("x",b.x||g.x),e.setAttribute("y",b.y||g.y),e.setAttribute("width",b.width||g.width),e.setAttribute("height",b.height||g.height),this.filterManager=o;var j=createNS("feGaussianBlur");j.setAttribute("in","SourceAlpha"),j.setAttribute("result",c+"_drop_shadow_1"),j.setAttribute("stdDeviation","0"),this.feGaussianBlur=j,e.appendChild(j);var $=createNS("feOffset");$.setAttribute("dx","25"),$.setAttribute("dy","0"),$.setAttribute("in",c+"_drop_shadow_1"),$.setAttribute("result",c+"_drop_shadow_2"),this.feOffset=$,e.appendChild($);var _e=createNS("feFlood");_e.setAttribute("flood-color","#00ff00"),_e.setAttribute("flood-opacity","1"),_e.setAttribute("result",c+"_drop_shadow_3"),this.feFlood=_e,e.appendChild(_e);var st=createNS("feComposite");st.setAttribute("in",c+"_drop_shadow_3"),st.setAttribute("in2",c+"_drop_shadow_2"),st.setAttribute("operator","in"),st.setAttribute("result",c+"_drop_shadow_4"),e.appendChild(st);var rt=this.createMergeNode(c,[c+"_drop_shadow_4",d]);e.appendChild(rt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var o=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var a=this.filterManager.effectElements[3].p.v,c=(this.filterManager.effectElements[2].p.v-90)*degToRads,d=a*Math.cos(c),g=a*Math.sin(c);this.feOffset.setAttribute("dx",d),this.feOffset.setAttribute("dy",g)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,o,a){this.initialized=!1,this.filterManager=o,this.filterElem=e,this.elem=a,a.matteElement=createNS("g"),a.matteElement.appendChild(a.layerElement),a.matteElement.appendChild(a.transformedElement),a.baseElement=a.matteElement}SVGMatte3Effect.prototype.findSymbol=function(e){for(var o=0,a=_svgMatteSymbols.length;o<a;){if(_svgMatteSymbols[o]===e)return _svgMatteSymbols[o];o+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,o){var a=e.layerElement.parentNode;if(a){for(var c=a.children,d=0,g=c.length;d<g&&c[d]!==e.layerElement;)d+=1;var b;d<=g-2&&(b=c[d+1]);var j=createNS("use");j.setAttribute("href","#"+o),b?a.insertBefore(j,b):a.appendChild(j)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,o){if(!this.findSymbol(o)){var a=createElementID(),c=createNS("mask");c.setAttribute("id",o.layerId),c.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(o);var d=e.globalData.defs;d.appendChild(c);var g=createNS("symbol");g.setAttribute("id",a),this.replaceInParent(o,a),g.appendChild(o.layerElement),d.appendChild(g);var b=createNS("use");b.setAttribute("href","#"+a),c.appendChild(b),o.data.hd=!1,o.show()}e.setMatte(o.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,o=this.elem.comp.elements,a=0,c=o.length;a<c;)o[a]&&o[a].data.ind===e&&this.setElementAsMask(this.elem,o[a]),a+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(e,o,a,c){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=o;var d=createNS("feGaussianBlur");d.setAttribute("result",c),e.appendChild(d),this.feGaussianBlur=d}SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var o=.3,a=this.filterManager.effectElements[0].p.v*o,c=this.filterManager.effectElements[1].p.v,d=c==3?0:a,g=c==2?0:a;this.feGaussianBlur.setAttribute("stdDeviation",d+" "+g);var b=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",b)}};function TransformEffect(){}TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var o=this.effectsManager.effectElements,a=o[0].p.v,c=o[1].p.v,d=o[2].p.v===1,g=o[3].p.v,b=d?g:o[4].p.v,j=o[5].p.v,$=o[6].p.v,_e=o[7].p.v;this.matrix.reset(),this.matrix.translate(-a[0],-a[1],a[2]),this.matrix.scale(b*.01,g*.01,1),this.matrix.rotate(-_e*degToRads),this.matrix.skewFromAxis(-j*degToRads,($+90)*degToRads),this.matrix.translate(c[0],c[1],0),this._mdf=!0,this.opacity!==o[8].p.v&&(this.opacity=o[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(e,o){this.init(o)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(e){this.init(e)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(e,o){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var c,d,g,b,j=[],$=!0,_e=!1;try{if(g=(a=a.call(e)).next,o===0){if(Object(a)!==a)return;$=!1}else for(;!($=(c=g.call(a)).done)&&(j.push(c.value),j.length!==o);$=!0);}catch(st){_e=!0,d=st}finally{try{if(!$&&a.return!=null&&(b=a.return(),Object(b)!==b))return}finally{if(_e)throw d}}return j}}function ownKeys(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);o&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,c)}return a}function _objectSpread2(e){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(a),!0).forEach(function(c){_defineProperty(e,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(a,c))})}return e}function _defineProperty(e,o,a){return o=_toPropertyKey(o),o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function _objectWithoutPropertiesLoose(e,o){if(e==null)return{};var a={},c=Object.keys(e),d,g;for(g=0;g<c.length;g++)d=c[g],!(o.indexOf(d)>=0)&&(a[d]=e[d]);return a}function _objectWithoutProperties(e,o){if(e==null)return{};var a=_objectWithoutPropertiesLoose(e,o),c,d;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)c=g[d],!(o.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(e,c)&&(a[c]=e[c])}return a}function _slicedToArray(e,o){return _arrayWithHoles(e)||_iterableToArrayLimit(e,o)||_unsupportedIterableToArray(e,o)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _unsupportedIterableToArray(e,o){if(e){if(typeof e=="string")return _arrayLikeToArray(e,o);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(e,o)}}function _arrayLikeToArray(e,o){(o==null||o>e.length)&&(o=e.length);for(var a=0,c=new Array(o);a<o;a++)c[a]=e[a];return c}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(e,o){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var c=a.call(e,o||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}function _toPropertyKey(e){var o=_toPrimitive(e,"string");return typeof o=="symbol"?o:String(o)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function e(o,a){var c=o.animationData,d=o.loop,g=o.autoplay,b=o.initialSegment,j=o.onComplete,$=o.onLoopComplete,_e=o.onEnterFrame,st=o.onSegmentStart,rt=o.onConfigReady,ut=o.onDataReady,gt=o.onDataFailed,yt=o.onLoadedImages,wt=o.onDOMLoaded,Ct=o.onDestroy;o.lottieRef,o.renderer,o.name,o.assetsPath,o.rendererSettings;var Pt=_objectWithoutProperties(o,_excluded$1),At=reactExports$1.useState(!1),Tt=_slicedToArray(At,2),kt=Tt[0],It=Tt[1],Lt=reactExports$1.useRef(),Ft=reactExports$1.useRef(null),Nt=function(){var Qn;(Qn=Lt.current)===null||Qn===void 0||Qn.play()},Ht=function(){var Qn;(Qn=Lt.current)===null||Qn===void 0||Qn.stop()},dr=function(){var Qn;(Qn=Lt.current)===null||Qn===void 0||Qn.pause()},hs=function(Qn){var bu;(bu=Lt.current)===null||bu===void 0||bu.setSpeed(Qn)},us=function(Qn,bu){var ou;(ou=Lt.current)===null||ou===void 0||ou.goToAndPlay(Qn,bu)},hn=function(Qn,bu){var ou;(ou=Lt.current)===null||ou===void 0||ou.goToAndStop(Qn,bu)},un=function(Qn){var bu;(bu=Lt.current)===null||bu===void 0||bu.setDirection(Qn)},bo=function(Qn,bu){var ou;(ou=Lt.current)===null||ou===void 0||ou.playSegments(Qn,bu)},_s=function(Qn){var bu;(bu=Lt.current)===null||bu===void 0||bu.setSubframe(Qn)},gn=function(Qn){var bu;return(bu=Lt.current)===null||bu===void 0?void 0:bu.getDuration(Qn)},Gr=function(){var Qn;(Qn=Lt.current)===null||Qn===void 0||Qn.destroy(),Lt.current=void 0},ds=function(){var Qn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},bu;if(Ft.current){(bu=Lt.current)===null||bu===void 0||bu.destroy();var ou=_objectSpread2(_objectSpread2(_objectSpread2({},o),Qn),{},{container:Ft.current});return Lt.current=lottie.loadAnimation(ou),It(!!Lt.current),function(){var g0;(g0=Lt.current)===null||g0===void 0||g0.destroy(),Lt.current=void 0}}};reactExports$1.useEffect(function(){var Nn=ds();return function(){return Nn==null?void 0:Nn()}},[c,d]),reactExports$1.useEffect(function(){Lt.current&&(Lt.current.autoplay=!!g)},[g]),reactExports$1.useEffect(function(){if(Lt.current){if(!b){Lt.current.resetSegments(!0);return}!Array.isArray(b)||!b.length||((Lt.current.currentRawFrame<b[0]||Lt.current.currentRawFrame>b[1])&&(Lt.current.currentRawFrame=b[0]),Lt.current.setSegment(b[0],b[1]))}},[b]),reactExports$1.useEffect(function(){var Nn=[{name:"complete",handler:j},{name:"loopComplete",handler:$},{name:"enterFrame",handler:_e},{name:"segmentStart",handler:st},{name:"config_ready",handler:rt},{name:"data_ready",handler:ut},{name:"data_failed",handler:gt},{name:"loaded_images",handler:yt},{name:"DOMLoaded",handler:wt},{name:"destroy",handler:Ct}],Qn=Nn.filter(function(ou){return ou.handler!=null});if(Qn.length){var bu=Qn.map(function(ou){var g0;return(g0=Lt.current)===null||g0===void 0||g0.addEventListener(ou.name,ou.handler),function(){var Su;(Su=Lt.current)===null||Su===void 0||Su.removeEventListener(ou.name,ou.handler)}});return function(){bu.forEach(function(ou){return ou()})}}},[j,$,_e,st,rt,ut,gt,yt,wt,Ct]);var Zn=React$2.createElement("div",_objectSpread2({style:a,ref:Ft},Pt));return{View:Zn,play:Nt,stop:Ht,pause:dr,setSpeed:hs,goToAndStop:hn,goToAndPlay:us,setDirection:un,playSegments:bo,setSubframe:_s,getDuration:gn,destroy:Gr,animationContainerRef:Ft,animationLoaded:kt,animationItem:Lt.current}};function getContainerVisibility(e){var o=e.getBoundingClientRect(),a=o.top,c=o.height,d=window.innerHeight-a,g=window.innerHeight+c;return d/g}function getContainerCursorPosition(e,o,a){var c=e.getBoundingClientRect(),d=c.top,g=c.left,b=c.width,j=c.height,$=(o-g)/b,_e=(a-d)/j;return{x:$,y:_e}}var useInitInteractivity=function e(o){var a=o.wrapperRef,c=o.animationItem,d=o.mode,g=o.actions;reactExports$1.useEffect(function(){var b=a.current;if(!(!b||!c||!g.length)){c.stop();var j=function(){var st=null,rt=function(){var gt=getContainerVisibility(b),yt=g.find(function(Ct){var Pt=Ct.visibility;return Pt&&gt>=Pt[0]&&gt<=Pt[1]});if(yt){if(yt.type==="seek"&&yt.visibility&&yt.frames.length===2){var wt=yt.frames[0]+Math.ceil((gt-yt.visibility[0])/(yt.visibility[1]-yt.visibility[0])*yt.frames[1]);//! goToAndStop must be relative to the start of the current segment
c.goToAndStop(wt-c.firstFrame-1,!0)}yt.type==="loop"&&(st===null||st!==yt.frames||c.isPaused)&&(c.playSegments(yt.frames,!0),st=yt.frames),yt.type==="play"&&c.isPaused&&(c.resetSegments(!0),c.play()),yt.type==="stop"&&c.goToAndStop(yt.frames[0]-c.firstFrame-1,!0)}};return document.addEventListener("scroll",rt),function(){document.removeEventListener("scroll",rt)}},$=function(){var st=function(yt,wt){var Ct=yt,Pt=wt;if(Ct!==-1&&Pt!==-1){var At=getContainerCursorPosition(b,Ct,Pt);Ct=At.x,Pt=At.y}var Tt=g.find(function(Lt){var Ft=Lt.position;return Ft&&Array.isArray(Ft.x)&&Array.isArray(Ft.y)?Ct>=Ft.x[0]&&Ct<=Ft.x[1]&&Pt>=Ft.y[0]&&Pt<=Ft.y[1]:Ft&&!Number.isNaN(Ft.x)&&!Number.isNaN(Ft.y)?Ct===Ft.x&&Pt===Ft.y:!1});if(Tt){if(Tt.type==="seek"&&Tt.position&&Array.isArray(Tt.position.x)&&Array.isArray(Tt.position.y)&&Tt.frames.length===2){var kt=(Ct-Tt.position.x[0])/(Tt.position.x[1]-Tt.position.x[0]),It=(Pt-Tt.position.y[0])/(Tt.position.y[1]-Tt.position.y[0]);c.playSegments(Tt.frames,!0),c.goToAndStop(Math.ceil((kt+It)/2*(Tt.frames[1]-Tt.frames[0])),!0)}Tt.type==="loop"&&c.playSegments(Tt.frames,!0),Tt.type==="play"&&(c.isPaused&&c.resetSegments(!1),c.playSegments(Tt.frames)),Tt.type==="stop"&&c.goToAndStop(Tt.frames[0],!0)}},rt=function(yt){st(yt.clientX,yt.clientY)},ut=function(){st(-1,-1)};return b.addEventListener("mousemove",rt),b.addEventListener("mouseout",ut),function(){b.removeEventListener("mousemove",rt),b.removeEventListener("mouseout",ut)}};switch(d){case"scroll":return j();case"cursor":return $()}}},[d,c])},useLottieInteractivity=function e(o){var a=o.actions,c=o.mode,d=o.lottieObj,g=d.animationItem,b=d.View,j=d.animationContainerRef;return useInitInteractivity({actions:a,animationItem:g,mode:c,wrapperRef:j}),b},_excluded=["style","interactivity"],Lottie=function e(o){var a,c,d,g=o.style,b=o.interactivity,j=_objectWithoutProperties(o,_excluded),$=useLottie(j,g),_e=$.View,st=$.play,rt=$.stop,ut=$.pause,gt=$.setSpeed,yt=$.goToAndStop,wt=$.goToAndPlay,Ct=$.setDirection,Pt=$.playSegments,At=$.setSubframe,Tt=$.getDuration,kt=$.destroy,It=$.animationContainerRef,Lt=$.animationLoaded,Ft=$.animationItem;return reactExports$1.useEffect(function(){o.lottieRef&&(o.lottieRef.current={play:st,stop:rt,pause:ut,setSpeed:gt,goToAndPlay:wt,goToAndStop:yt,setDirection:Ct,playSegments:Pt,setSubframe:At,getDuration:Tt,destroy:kt,animationContainerRef:It,animationLoaded:Lt,animationItem:Ft})},[(a=o.lottieRef)===null||a===void 0?void 0:a.current]),useLottieInteractivity({lottieObj:{View:_e,play:st,stop:rt,pause:ut,setSpeed:gt,goToAndStop:yt,goToAndPlay:wt,setDirection:Ct,playSegments:Pt,setSubframe:At,getDuration:Tt,destroy:kt,animationContainerRef:It,animationLoaded:Lt,animationItem:Ft},actions:(c=b==null?void 0:b.actions)!==null&&c!==void 0?c:[],mode:(d=b==null?void 0:b.mode)!==null&&d!==void 0?d:"scroll"})};const SuccessModal=({SuccesTxt:e,successFunc:o})=>jsxRuntimeExports.jsx("div",{className:"successModalDiv",children:jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_animation",children:jsxRuntimeExports.jsx(Lottie,{animationData:successLoader,loop:!1,autoPlay:!0,className:"successModalDiv_cont_animation_icon",preserveAspectRatio:"xMidYMid meet"})}),jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont_body",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_title",children:"Success"}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_para",children:e})]}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_button_div",children:jsxRuntimeExports.jsx("button",{className:"successModalDiv_cont_button",onClick:o,children:"Continue"})})]})}),v="4.8.0",meta={g:"LottieFiles AE ",a:"",k:"",d:"",tc:""},fr=24,ip=0,op=59,w=1080,h=1080,nm="X",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"asterisco 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:41,s:[100]},{t:48,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:29,s:[0]},{t:38,s:[90]}],ix:10},p:{a:1,k:[{i:{x:.38,y:1},o:{x:.167,y:.167},t:14,s:[552.625,563.5,0],to:[-54.333,177.667,0],ti:[152.333,-20.167,0]},{t:26,s:[138.625,967.5,0]}],ix:2},a:{a:0,k:[415.625,-457.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[436.5,-435.75],[390.875,-481.375]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[392.25,-435.5],[439.75,-482.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[415,-425.25],[415,-489.75]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[384.25,-457],[447,-457]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:14,op:73,st:14,bm:0},{ddd:0,ind:2,ty:4,nm:"asterisco",sr:1,ks:{o:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:38,s:[100]},{t:45,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:26,s:[0]},{t:35,s:[90]}],ix:10},p:{a:1,k:[{i:{x:.38,y:1},o:{x:.167,y:.167},t:11,s:[555.625,540.5,0],to:[58.667,-208.333,0],ti:[-145.667,14.333,0]},{t:23,s:[939.125,146.5,0]}],ix:2},a:{a:0,k:[415.625,-457.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[436.5,-435.75],[390.875,-481.375]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[392.25,-435.5],[439.75,-482.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[415,-425.25],[415,-489.75]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[384.25,-457],[447,-457]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:11,op:70,st:11,bm:0},{ddd:0,ind:3,ty:4,nm:"X",parent:5,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-278.125,-292.563,0],ix:2},a:{a:0,k:[39.875,7.438,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-91,-131],[168,149]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:76,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.913725490196,.732413677141,.732413677141,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-92,149],[171.75,-134.125]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:76,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.693],y:[.942]},o:{x:[.769],y:[0]},t:17,s:[0]},{t:29,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:17,op:76,st:17,bm:0},{ddd:0,ind:4,ty:4,nm:"Circulo linea",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.662,.662,.542],y:[1,1,-8.04]},o:{x:[.895,.895,.663],y:[.086,.086,0]},t:6,s:[0,0,100]},{i:{x:[.658,.658,.602],y:[1,1,1]},o:{x:[.362,.362,.275],y:[0,0,6.41]},t:17,s:[114.619,114.619,100]},{t:30,s:[85,85,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[724,724],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:5,op:35,st:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Circulo",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.77,.77,.542],y:[1,1,-10.506]},o:{x:[.86,.86,.663],y:[.106,.106,0]},t:4,s:[0,0,100]},{i:{x:[.301,.301,.602],y:[1,1,1]},o:{x:[.484,.484,.275],y:[0,0,4.93]},t:18,s:[115,115,100]},{t:28,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[681,681],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.907451076134,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:67,st:-1,bm:0},{ddd:0,ind:6,ty:4,nm:"Burbuja 4",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:226.48,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[507,552,0],to:[-157.833,-198.5,0],ti:[103.333,13.5,0]},{t:43,s:[97.5,236.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:7,ty:4,nm:"Burbuja 3",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:36,s:[100]},{t:47,s:[0]}],ix:11},r:{a:0,k:169.291,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:16,s:[501,552,0],to:[-271.833,59.5,0],ti:[39.833,-87,0]},{t:46,s:[107.5,792.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:16,s:[100,100,100]},{t:46,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:16,op:75,st:16,bm:0},{ddd:0,ind:8,ty:4,nm:"Burbuja 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:68,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[513,546,0],to:[76.167,107.5,0],ti:[-65.167,9,0]},{t:43,s:[891.5,736.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:9,ty:4,nm:"Burbuja 1",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[513,546,0],to:[44.167,-94.5,0],ti:[-65.167,9,0]},{t:43,s:[817.5,248.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:10,ty:4,nm:"Circulo fill back",sr:1,ks:{o:{a:1,k:[{i:{x:[.47],y:[1]},o:{x:[.53],y:[0]},t:9,s:[100]},{t:24,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.425,.425,.542],y:[1,1,-8.862]},o:{x:[.41,.41,.663],y:[.226,.226,0]},t:0,s:[0,0,100]},{t:12,s:[114.619,114.619,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1186,1186],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[1,.58509796741,.58509796741,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:31,st:0,bm:0}],markers=[],errorLoader={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},ErrorModal=({ErrorTxt:e,errorFunc:o})=>jsxRuntimeExports.jsx("div",{className:"successModalDiv",children:jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_animation",children:jsxRuntimeExports.jsx(Lottie,{animationData:errorLoader,loop:!1,autoPlay:!0,className:"successModalDiv_cont_animation_icon",preserveAspectRatio:"xMidYMid meet"})}),jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont_body",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_title",children:"Error"}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_para",children:e})]}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_button_div",children:jsxRuntimeExports.jsx("button",{className:"errorModalDiv_cont_button",onClick:o,children:"Continue"})})]})}),Faucet=()=>{const[e,o]=reactExports$1.useState(""),[a,c]=reactExports$1.useState(!1),[d,g]=reactExports$1.useState(!1),[b,j]=reactExports$1.useState(""),[$,_e]=reactExports$1.useState(""),[st,rt]=reactExports$1.useState(!1),[ut,gt]=reactExports$1.useState(!1),yt=async()=>{rt(!0),gt(!0);const Ct={wallet:e};try{const Pt=await axios.post(API_URL+"/web3/faucet/submit-address",Ct,config);console.log(Pt),Pt.status===200?(console.log(Pt),console.log(Pt.data.data.message),c(!0),_e("You have successfully claimed 1egax"),rt(!1),gt(!1),gt(!1)):(console.log(Pt),c(!1),g(!0),j(Pt.data.data.message),rt(!1),gt(!1))}catch(Pt){console.log(Pt.response),console.log(Pt.response.data.errorMessage),j(Pt.response.data.errorMessage),c(!1),g(!0),rt(!1),gt(!1)}},wt=Ct=>{o(Ct.target.value),console.log(Ct.target.value)};return jsxRuntimeExports.jsxs("div",{className:"Home_div_faucet",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"Home_div_area",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_head",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_head_cont1",children:["EGAX ",jsxRuntimeExports.jsx("span",{className:"Home_div_area_head_span",children:" FAUCET"})," "]}),jsxRuntimeExports.jsx("div",{className:"Home_div_area_head_para",children:"Obtain EGO Chain Testnet tokens every 24 hours for seamless and confident development."})]}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont1",children:[jsxRuntimeExports.jsx("div",{className:"Home_div_area_cont_area1_cont1_title",children:"Token"}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont1_div",children:[jsxRuntimeExports.jsx("img",{src:"/egax_logo.png",alt:"",className:"Home_div_area_cont_area1_cont1_div_img"}),"1 EGAX"]})]}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"Home_div_area_cont_area1_cont2_title",children:"Wallet Address"}),jsxRuntimeExports.jsx("input",{type:"text",onChange:wt,value:e,placeholder:"Enter your Ego Chain Testnet wallet address",className:"Home_div_area_cont_area1_cont2_input"})]})]}),e===""?jsxRuntimeExports.jsx("button",{className:"Home_div_area_cont_area2_btn",disabled:!0,children:"Send 1 EGAX"}):jsxRuntimeExports.jsx("button",{className:"Home_div_area_cont_area2_btn",onClick:yt,disabled:ut,children:st?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_default,{color:"#366e51",height:20})," Sending..."]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:" Send 1 EGAX"})})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),a?jsxRuntimeExports.jsx(SuccessModal,{SuccesTxt:$,successFunc:()=>{window.location.href="/"}}):null,d?jsxRuntimeExports.jsx(ErrorModal,{ErrorTxt:b,errorFunc:()=>{g(!1)}}):null]})},Wallet=()=>jsxRuntimeExports.jsxs("div",{className:"wallet_div",children:[" ",jsxRuntimeExports.jsxs("section",{className:"wallet_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area",children:[jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area_1",children:[jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area_1_title",children:["Egochain Wallet",jsxRuntimeExports.jsx("br",{}),"Your"," ",jsxRuntimeExports.jsx("span",{className:"wallet_div_section1_area_1_title_span",children:"Gateway"})," ",jsxRuntimeExports.jsx("br",{}),"To Web3"]}),jsxRuntimeExports.jsx("div",{className:"wallet_div_section1_area_1_para",children:"Unleash the full potential of your cryptocurrency assets and delve into the innovative Web3 landscape on Egochain. Start your journey today!"}),jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area_1_btn_divs",children:[" ",jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"wallet_div_section2",children:jsxRuntimeExports.jsx("img",{src:"/img/wallet_hero_img_dummy.png",alt:"",className:"wallet_div_section2_img"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid$2,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"home_div_section3_area",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Security"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Uncompromising Security"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Egochain safeguards your wallet without ever touching your private keys or secret phrase. You, and only you, control your assets."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Effortless"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Effortless Exchange Deposits"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Ditch the complexities. Deposit crypto directly from exchanges like MEXC with just a few clicks."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Experience"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Intuitive Mobile Experience"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Navigate your Web3 journey with ease. Our user-friendly mobile app empowers you with powerful tools for seamless crypto management."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Data"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Data Sovereignty"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Enjoy the peace of mind knowing your data belongs to you. Egochain generates passwords and keys directly on your device, giving you complete control over sharing and privacy."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]}),jsxRuntimeExports.jsxs("section",{className:"wallet_div_section_last",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"wallet_div_section_last_area",children:[jsxRuntimeExports.jsxs("div",{className:"wallet_div_section_last_area_1",children:[jsxRuntimeExports.jsx("div",{className:"wallet_div_section_last_area_1_title",children:"Choose Egochain and unlock a world of crypto freedom"}),jsxRuntimeExports.jsxs("div",{className:"wallet_div_section_last_area_1_btns",children:[jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"wallet_div_section_last_area_2",children:jsxRuntimeExports.jsx("img",{src:"/img/wallet_last_section_img.png",alt:"",className:"wallet_div_section_last_area_2_img"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx(Grid$2,{})]})]});function App(){return window.location.host.split(".")[0]==="faucet"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Faucet,{}),jsxRuntimeExports.jsx(Footer,{})]}):jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/wallet",element:jsxRuntimeExports.jsx(Wallet,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/whitepaper",element:jsxRuntimeExports.jsx(WhitePaper,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(TermsAndConditions,{})}),jsxRuntimeExports.jsx(Route,{path:"/egc/coin/info",element:jsxRuntimeExports.jsx(Egc,{})}),jsxRuntimeExports.jsx(Route,{path:"/egax/coin/info",element:jsxRuntimeExports.jsx(Egax,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(RoadMapPage,{})})]}),jsxRuntimeExports.jsx(Footer,{})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}));export{commonjsGlobal as c,getDefaultExportFromCjs as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
